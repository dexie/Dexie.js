var Zk=Object.defineProperty;var e_=(e,t,n)=>t in e?Zk(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Mr=(e,t,n)=>(e_(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Hm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ng={exports:{}},ac={},Pg={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rl=Symbol.for("react.element"),t_=Symbol.for("react.portal"),n_=Symbol.for("react.fragment"),r_=Symbol.for("react.strict_mode"),i_=Symbol.for("react.profiler"),o_=Symbol.for("react.provider"),s_=Symbol.for("react.context"),l_=Symbol.for("react.forward_ref"),a_=Symbol.for("react.suspense"),u_=Symbol.for("react.memo"),c_=Symbol.for("react.lazy"),qm=Symbol.iterator;function d_(e){return e===null||typeof e!="object"?null:(e=qm&&e[qm]||e["@@iterator"],typeof e=="function"?e:null)}var Dg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ag=Object.assign,Rg={};function Ho(e,t,n){this.props=e,this.context=t,this.refs=Rg,this.updater=n||Dg}Ho.prototype.isReactComponent={};Ho.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ho.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Lg(){}Lg.prototype=Ho.prototype;function Hh(e,t,n){this.props=e,this.context=t,this.refs=Rg,this.updater=n||Dg}var qh=Hh.prototype=new Lg;qh.constructor=Hh;Ag(qh,Ho.prototype);qh.isPureReactComponent=!0;var Gm=Array.isArray,Mg=Object.prototype.hasOwnProperty,Gh={current:null},Ug={key:!0,ref:!0,__self:!0,__source:!0};function $g(e,t,n){var r,i={},o=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)Mg.call(t,r)&&!Ug.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),d=0;d<a;d++)c[d]=arguments[d+2];i.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Rl,type:e,key:o,ref:s,props:i,_owner:Gh.current}}function f_(e,t){return{$$typeof:Rl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Yh(e){return typeof e=="object"&&e!==null&&e.$$typeof===Rl}function h_(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ym=/\/+/g;function _d(e,t){return typeof e=="object"&&e!==null&&e.key!=null?h_(""+e.key):t.toString(36)}function Xa(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Rl:case t_:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+_d(s,0):r,Gm(i)?(n="",e!=null&&(n=e.replace(Ym,"$&/")+"/"),Xa(i,t,n,"",function(d){return d})):i!=null&&(Yh(i)&&(i=f_(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Ym,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",Gm(e))for(var a=0;a<e.length;a++){o=e[a];var c=r+_d(o,a);s+=Xa(o,t,n,c,i)}else if(c=d_(e),typeof c=="function")for(e=c.call(e),a=0;!(o=e.next()).done;)o=o.value,c=r+_d(o,a++),s+=Xa(o,t,n,c,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function xa(e,t,n){if(e==null)return e;var r=[],i=0;return Xa(e,r,"","",function(o){return t.call(n,o,i++)}),r}function p_(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Jt={current:null},Za={transition:null},m_={ReactCurrentDispatcher:Jt,ReactCurrentBatchConfig:Za,ReactCurrentOwner:Gh};function zg(){throw Error("act(...) is not supported in production builds of React.")}Re.Children={map:xa,forEach:function(e,t,n){xa(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return xa(e,function(){t++}),t},toArray:function(e){return xa(e,function(t){return t})||[]},only:function(e){if(!Yh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Re.Component=Ho;Re.Fragment=n_;Re.Profiler=i_;Re.PureComponent=Hh;Re.StrictMode=r_;Re.Suspense=a_;Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=m_;Re.act=zg;Re.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Ag({},e.props),i=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=Gh.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)Mg.call(t,c)&&!Ug.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var d=0;d<c;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:Rl,type:e.type,key:i,ref:o,props:r,_owner:s}};Re.createContext=function(e){return e={$$typeof:s_,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:o_,_context:e},e.Consumer=e};Re.createElement=$g;Re.createFactory=function(e){var t=$g.bind(null,e);return t.type=e,t};Re.createRef=function(){return{current:null}};Re.forwardRef=function(e){return{$$typeof:l_,render:e}};Re.isValidElement=Yh;Re.lazy=function(e){return{$$typeof:c_,_payload:{_status:-1,_result:e},_init:p_}};Re.memo=function(e,t){return{$$typeof:u_,type:e,compare:t===void 0?null:t}};Re.startTransition=function(e){var t=Za.transition;Za.transition={};try{e()}finally{Za.transition=t}};Re.unstable_act=zg;Re.useCallback=function(e,t){return Jt.current.useCallback(e,t)};Re.useContext=function(e){return Jt.current.useContext(e)};Re.useDebugValue=function(){};Re.useDeferredValue=function(e){return Jt.current.useDeferredValue(e)};Re.useEffect=function(e,t){return Jt.current.useEffect(e,t)};Re.useId=function(){return Jt.current.useId()};Re.useImperativeHandle=function(e,t,n){return Jt.current.useImperativeHandle(e,t,n)};Re.useInsertionEffect=function(e,t){return Jt.current.useInsertionEffect(e,t)};Re.useLayoutEffect=function(e,t){return Jt.current.useLayoutEffect(e,t)};Re.useMemo=function(e,t){return Jt.current.useMemo(e,t)};Re.useReducer=function(e,t,n){return Jt.current.useReducer(e,t,n)};Re.useRef=function(e){return Jt.current.useRef(e)};Re.useState=function(e){return Jt.current.useState(e)};Re.useSyncExternalStore=function(e,t,n){return Jt.current.useSyncExternalStore(e,t,n)};Re.useTransition=function(){return Jt.current.useTransition()};Re.version="18.3.1";Pg.exports=Re;var Ie=Pg.exports;const so=Tg(Ie);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y_=Ie,v_=Symbol.for("react.element"),g_=Symbol.for("react.fragment"),w_=Object.prototype.hasOwnProperty,b_=y_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,k_={key:!0,ref:!0,__self:!0,__source:!0};function Fg(e,t,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)w_.call(t,r)&&!k_.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:v_,type:e,key:o,ref:s,props:i,_owner:b_.current}}ac.Fragment=g_;ac.jsx=Fg;ac.jsxs=Fg;Ng.exports=ac;var T=Ng.exports,Bg={exports:{}},wn={},Kg={exports:{}},Vg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,ee){var ne=M.length;M.push(ee);e:for(;0<ne;){var de=ne-1>>>1,ie=M[de];if(0<i(ie,ee))M[de]=ee,M[ne]=ie,ne=de;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var ee=M[0],ne=M.pop();if(ne!==ee){M[0]=ne;e:for(var de=0,ie=M.length,be=ie>>>1;de<be;){var De=2*(de+1)-1,Qe=M[De],$e=De+1,Te=M[$e];if(0>i(Qe,ne))$e<ie&&0>i(Te,Qe)?(M[de]=Te,M[$e]=ne,de=$e):(M[de]=Qe,M[De]=ne,de=De);else if($e<ie&&0>i(Te,ne))M[de]=Te,M[$e]=ne,de=$e;else break e}}return ee}function i(M,ee){var ne=M.sortIndex-ee.sortIndex;return ne!==0?ne:M.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var c=[],d=[],f=1,p=null,y=3,g=!1,b=!1,x=!1,D=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(M){for(var ee=n(d);ee!==null;){if(ee.callback===null)r(d);else if(ee.startTime<=M)r(d),ee.sortIndex=ee.expirationTime,t(c,ee);else break;ee=n(d)}}function $(M){if(x=!1,k(M),!b)if(n(c)!==null)b=!0,Q(W);else{var ee=n(d);ee!==null&&ae($,ee.startTime-M)}}function W(M,ee){b=!1,x&&(x=!1,E(H),H=-1),g=!0;var ne=y;try{for(k(ee),p=n(c);p!==null&&(!(p.expirationTime>ee)||M&&!Y());){var de=p.callback;if(typeof de=="function"){p.callback=null,y=p.priorityLevel;var ie=de(p.expirationTime<=ee);ee=e.unstable_now(),typeof ie=="function"?p.callback=ie:p===n(c)&&r(c),k(ee)}else r(c);p=n(c)}if(p!==null)var be=!0;else{var De=n(d);De!==null&&ae($,De.startTime-ee),be=!1}return be}finally{p=null,y=ne,g=!1}}var K=!1,q=null,H=-1,le=5,fe=-1;function Y(){return!(e.unstable_now()-fe<le)}function ge(){if(q!==null){var M=e.unstable_now();fe=M;var ee=!0;try{ee=q(!0,M)}finally{ee?ke():(K=!1,q=null)}}else K=!1}var ke;if(typeof _=="function")ke=function(){_(ge)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,Ee=Se.port2;Se.port1.onmessage=ge,ke=function(){Ee.postMessage(null)}}else ke=function(){D(ge,0)};function Q(M){q=M,K||(K=!0,ke())}function ae(M,ee){H=D(function(){M(e.unstable_now())},ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){b||g||(b=!0,Q(W))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):le=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(M){switch(y){case 1:case 2:case 3:var ee=3;break;default:ee=y}var ne=y;y=ee;try{return M()}finally{y=ne}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,ee){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var ne=y;y=M;try{return ee()}finally{y=ne}},e.unstable_scheduleCallback=function(M,ee,ne){var de=e.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?de+ne:de):ne=de,M){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=ne+ie,M={id:f++,callback:ee,priorityLevel:M,startTime:ne,expirationTime:ie,sortIndex:-1},ne>de?(M.sortIndex=ne,t(d,M),n(c)===null&&M===n(d)&&(x?(E(H),H=-1):x=!0,ae($,ne-de))):(M.sortIndex=ie,t(c,M),b||g||(b=!0,Q(W))),M},e.unstable_shouldYield=Y,e.unstable_wrapCallback=function(M){var ee=y;return function(){var ne=y;y=ee;try{return M.apply(this,arguments)}finally{y=ne}}}})(Vg);Kg.exports=Vg;var __=Kg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x_=Ie,gn=__;function J(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wg=new Set,nl={};function Hi(e,t){No(e,t),No(e+"Capture",t)}function No(e,t){for(nl[e]=t,e=0;e<t.length;e++)Wg.add(t[e])}var wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gf=Object.prototype.hasOwnProperty,S_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qm={},Jm={};function E_(e){return gf.call(Jm,e)?!0:gf.call(Qm,e)?!1:S_.test(e)?Jm[e]=!0:(Qm[e]=!0,!1)}function C_(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function I_(e,t,n,r){if(t===null||typeof t>"u"||C_(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Xt(e,t,n,r,i,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var Mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Mt[e]=new Xt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Mt[t]=new Xt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Mt[e]=new Xt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Mt[e]=new Xt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Mt[e]=new Xt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Mt[e]=new Xt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Mt[e]=new Xt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Mt[e]=new Xt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Mt[e]=new Xt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Qh=/[\-:]([a-z])/g;function Jh(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Qh,Jh);Mt[t]=new Xt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Qh,Jh);Mt[t]=new Xt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Qh,Jh);Mt[t]=new Xt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Mt[e]=new Xt(e,1,!1,e.toLowerCase(),null,!1,!1)});Mt.xlinkHref=new Xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Mt[e]=new Xt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Xh(e,t,n,r){var i=Mt.hasOwnProperty(t)?Mt[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(I_(t,n,i,r)&&(n=null),r||i===null?E_(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Er=x_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sa=Symbol.for("react.element"),ao=Symbol.for("react.portal"),uo=Symbol.for("react.fragment"),Zh=Symbol.for("react.strict_mode"),wf=Symbol.for("react.profiler"),Hg=Symbol.for("react.provider"),qg=Symbol.for("react.context"),ep=Symbol.for("react.forward_ref"),bf=Symbol.for("react.suspense"),kf=Symbol.for("react.suspense_list"),tp=Symbol.for("react.memo"),zr=Symbol.for("react.lazy"),Gg=Symbol.for("react.offscreen"),Xm=Symbol.iterator;function ws(e){return e===null||typeof e!="object"?null:(e=Xm&&e[Xm]||e["@@iterator"],typeof e=="function"?e:null)}var at=Object.assign,xd;function Ds(e){if(xd===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);xd=t&&t[1]||""}return`
`+xd+e}var Sd=!1;function Ed(e,t){if(!e||Sd)return"";Sd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var c=`
`+i[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=s&&0<=a);break}}}finally{Sd=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ds(e):""}function O_(e){switch(e.tag){case 5:return Ds(e.type);case 16:return Ds("Lazy");case 13:return Ds("Suspense");case 19:return Ds("SuspenseList");case 0:case 2:case 15:return e=Ed(e.type,!1),e;case 11:return e=Ed(e.type.render,!1),e;case 1:return e=Ed(e.type,!0),e;default:return""}}function _f(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case uo:return"Fragment";case ao:return"Portal";case wf:return"Profiler";case Zh:return"StrictMode";case bf:return"Suspense";case kf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case qg:return(e.displayName||"Context")+".Consumer";case Hg:return(e._context.displayName||"Context")+".Provider";case ep:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case tp:return t=e.displayName||null,t!==null?t:_f(e.type)||"Memo";case zr:t=e._payload,e=e._init;try{return _f(e(t))}catch{}}return null}function j_(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _f(t);case 8:return t===Zh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function si(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Yg(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function T_(e){var t=Yg(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ea(e){e._valueTracker||(e._valueTracker=T_(e))}function Qg(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Yg(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function wu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function xf(e,t){var n=t.checked;return at({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Zm(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=si(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Jg(e,t){t=t.checked,t!=null&&Xh(e,"checked",t,!1)}function Sf(e,t){Jg(e,t);var n=si(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ef(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ef(e,t.type,si(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ey(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ef(e,t,n){(t!=="number"||wu(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var As=Array.isArray;function ko(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+si(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Cf(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(J(91));return at({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ty(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(J(92));if(As(n)){if(1<n.length)throw Error(J(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:si(n)}}function Xg(e,t){var n=si(t.value),r=si(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function ny(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Zg(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function If(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Zg(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ca,e0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ca=Ca||document.createElement("div"),Ca.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ca.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function rl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Us={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},N_=["Webkit","ms","Moz","O"];Object.keys(Us).forEach(function(e){N_.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Us[t]=Us[e]})});function t0(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Us.hasOwnProperty(e)&&Us[e]?(""+t).trim():t+"px"}function n0(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=t0(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var P_=at({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Of(e,t){if(t){if(P_[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(J(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(J(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(J(61))}if(t.style!=null&&typeof t.style!="object")throw Error(J(62))}}function jf(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tf=null;function np(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Nf=null,_o=null,xo=null;function ry(e){if(e=Ul(e)){if(typeof Nf!="function")throw Error(J(280));var t=e.stateNode;t&&(t=hc(t),Nf(e.stateNode,e.type,t))}}function r0(e){_o?xo?xo.push(e):xo=[e]:_o=e}function i0(){if(_o){var e=_o,t=xo;if(xo=_o=null,ry(e),t)for(e=0;e<t.length;e++)ry(t[e])}}function o0(e,t){return e(t)}function s0(){}var Cd=!1;function l0(e,t,n){if(Cd)return e(t,n);Cd=!0;try{return o0(e,t,n)}finally{Cd=!1,(_o!==null||xo!==null)&&(s0(),i0())}}function il(e,t){var n=e.stateNode;if(n===null)return null;var r=hc(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(J(231,t,typeof n));return n}var Pf=!1;if(wr)try{var bs={};Object.defineProperty(bs,"passive",{get:function(){Pf=!0}}),window.addEventListener("test",bs,bs),window.removeEventListener("test",bs,bs)}catch{Pf=!1}function D_(e,t,n,r,i,o,s,a,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(f){this.onError(f)}}var $s=!1,bu=null,ku=!1,Df=null,A_={onError:function(e){$s=!0,bu=e}};function R_(e,t,n,r,i,o,s,a,c){$s=!1,bu=null,D_.apply(A_,arguments)}function L_(e,t,n,r,i,o,s,a,c){if(R_.apply(this,arguments),$s){if($s){var d=bu;$s=!1,bu=null}else throw Error(J(198));ku||(ku=!0,Df=d)}}function qi(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function a0(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function iy(e){if(qi(e)!==e)throw Error(J(188))}function M_(e){var t=e.alternate;if(!t){if(t=qi(e),t===null)throw Error(J(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return iy(i),e;if(o===r)return iy(i),t;o=o.sibling}throw Error(J(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?e:t}function u0(e){return e=M_(e),e!==null?c0(e):null}function c0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=c0(e);if(t!==null)return t;e=e.sibling}return null}var d0=gn.unstable_scheduleCallback,oy=gn.unstable_cancelCallback,U_=gn.unstable_shouldYield,$_=gn.unstable_requestPaint,pt=gn.unstable_now,z_=gn.unstable_getCurrentPriorityLevel,rp=gn.unstable_ImmediatePriority,f0=gn.unstable_UserBlockingPriority,_u=gn.unstable_NormalPriority,F_=gn.unstable_LowPriority,h0=gn.unstable_IdlePriority,uc=null,Xn=null;function B_(e){if(Xn&&typeof Xn.onCommitFiberRoot=="function")try{Xn.onCommitFiberRoot(uc,e,void 0,(e.current.flags&128)===128)}catch{}}var $n=Math.clz32?Math.clz32:W_,K_=Math.log,V_=Math.LN2;function W_(e){return e>>>=0,e===0?32:31-(K_(e)/V_|0)|0}var Ia=64,Oa=4194304;function Rs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function xu(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=Rs(a):(o&=s,o!==0&&(r=Rs(o)))}else s=n&~i,s!==0?r=Rs(s):o!==0&&(r=Rs(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-$n(t),i=1<<n,r|=e[n],t&=~i;return r}function H_(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function q_(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-$n(o),a=1<<s,c=i[s];c===-1?(!(a&n)||a&r)&&(i[s]=H_(a,t)):c<=t&&(e.expiredLanes|=a),o&=~a}}function Af(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function p0(){var e=Ia;return Ia<<=1,!(Ia&4194240)&&(Ia=64),e}function Id(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ll(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-$n(t),e[t]=n}function G_(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-$n(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function ip(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-$n(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var We=0;function m0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var y0,op,v0,g0,w0,Rf=!1,ja=[],Gr=null,Yr=null,Qr=null,ol=new Map,sl=new Map,Br=[],Y_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sy(e,t){switch(e){case"focusin":case"focusout":Gr=null;break;case"dragenter":case"dragleave":Yr=null;break;case"mouseover":case"mouseout":Qr=null;break;case"pointerover":case"pointerout":ol.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":sl.delete(t.pointerId)}}function ks(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=Ul(t),t!==null&&op(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Q_(e,t,n,r,i){switch(t){case"focusin":return Gr=ks(Gr,e,t,n,r,i),!0;case"dragenter":return Yr=ks(Yr,e,t,n,r,i),!0;case"mouseover":return Qr=ks(Qr,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return ol.set(o,ks(ol.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,sl.set(o,ks(sl.get(o)||null,e,t,n,r,i)),!0}return!1}function b0(e){var t=Ti(e.target);if(t!==null){var n=qi(t);if(n!==null){if(t=n.tag,t===13){if(t=a0(n),t!==null){e.blockedOn=t,w0(e.priority,function(){v0(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function eu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Lf(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Tf=r,n.target.dispatchEvent(r),Tf=null}else return t=Ul(n),t!==null&&op(t),e.blockedOn=n,!1;t.shift()}return!0}function ly(e,t,n){eu(e)&&n.delete(t)}function J_(){Rf=!1,Gr!==null&&eu(Gr)&&(Gr=null),Yr!==null&&eu(Yr)&&(Yr=null),Qr!==null&&eu(Qr)&&(Qr=null),ol.forEach(ly),sl.forEach(ly)}function _s(e,t){e.blockedOn===t&&(e.blockedOn=null,Rf||(Rf=!0,gn.unstable_scheduleCallback(gn.unstable_NormalPriority,J_)))}function ll(e){function t(i){return _s(i,e)}if(0<ja.length){_s(ja[0],e);for(var n=1;n<ja.length;n++){var r=ja[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Gr!==null&&_s(Gr,e),Yr!==null&&_s(Yr,e),Qr!==null&&_s(Qr,e),ol.forEach(t),sl.forEach(t),n=0;n<Br.length;n++)r=Br[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Br.length&&(n=Br[0],n.blockedOn===null);)b0(n),n.blockedOn===null&&Br.shift()}var So=Er.ReactCurrentBatchConfig,Su=!0;function X_(e,t,n,r){var i=We,o=So.transition;So.transition=null;try{We=1,sp(e,t,n,r)}finally{We=i,So.transition=o}}function Z_(e,t,n,r){var i=We,o=So.transition;So.transition=null;try{We=4,sp(e,t,n,r)}finally{We=i,So.transition=o}}function sp(e,t,n,r){if(Su){var i=Lf(e,t,n,r);if(i===null)Md(e,t,r,Eu,n),sy(e,r);else if(Q_(i,e,t,n,r))r.stopPropagation();else if(sy(e,r),t&4&&-1<Y_.indexOf(e)){for(;i!==null;){var o=Ul(i);if(o!==null&&y0(o),o=Lf(e,t,n,r),o===null&&Md(e,t,r,Eu,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Md(e,t,r,null,n)}}var Eu=null;function Lf(e,t,n,r){if(Eu=null,e=np(r),e=Ti(e),e!==null)if(t=qi(e),t===null)e=null;else if(n=t.tag,n===13){if(e=a0(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Eu=e,null}function k0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(z_()){case rp:return 1;case f0:return 4;case _u:case F_:return 16;case h0:return 536870912;default:return 16}default:return 16}}var Vr=null,lp=null,tu=null;function _0(){if(tu)return tu;var e,t=lp,n=t.length,r,i="value"in Vr?Vr.value:Vr.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[o-r];r++);return tu=i.slice(e,1<r?1-r:void 0)}function nu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ta(){return!0}function ay(){return!1}function bn(e){function t(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ta:ay,this.isPropagationStopped=ay,this}return at(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ta)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ta)},persist:function(){},isPersistent:Ta}),t}var qo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ap=bn(qo),Ml=at({},qo,{view:0,detail:0}),ex=bn(Ml),Od,jd,xs,cc=at({},Ml,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:up,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xs&&(xs&&e.type==="mousemove"?(Od=e.screenX-xs.screenX,jd=e.screenY-xs.screenY):jd=Od=0,xs=e),Od)},movementY:function(e){return"movementY"in e?e.movementY:jd}}),uy=bn(cc),tx=at({},cc,{dataTransfer:0}),nx=bn(tx),rx=at({},Ml,{relatedTarget:0}),Td=bn(rx),ix=at({},qo,{animationName:0,elapsedTime:0,pseudoElement:0}),ox=bn(ix),sx=at({},qo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),lx=bn(sx),ax=at({},qo,{data:0}),cy=bn(ax),ux={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=dx[e])?!!t[e]:!1}function up(){return fx}var hx=at({},Ml,{key:function(e){if(e.key){var t=ux[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=nu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?cx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:up,charCode:function(e){return e.type==="keypress"?nu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?nu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),px=bn(hx),mx=at({},cc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dy=bn(mx),yx=at({},Ml,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:up}),vx=bn(yx),gx=at({},qo,{propertyName:0,elapsedTime:0,pseudoElement:0}),wx=bn(gx),bx=at({},cc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kx=bn(bx),_x=[9,13,27,32],cp=wr&&"CompositionEvent"in window,zs=null;wr&&"documentMode"in document&&(zs=document.documentMode);var xx=wr&&"TextEvent"in window&&!zs,x0=wr&&(!cp||zs&&8<zs&&11>=zs),fy=String.fromCharCode(32),hy=!1;function S0(e,t){switch(e){case"keyup":return _x.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function E0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var co=!1;function Sx(e,t){switch(e){case"compositionend":return E0(t);case"keypress":return t.which!==32?null:(hy=!0,fy);case"textInput":return e=t.data,e===fy&&hy?null:e;default:return null}}function Ex(e,t){if(co)return e==="compositionend"||!cp&&S0(e,t)?(e=_0(),tu=lp=Vr=null,co=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return x0&&t.locale!=="ko"?null:t.data;default:return null}}var Cx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function py(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Cx[e.type]:t==="textarea"}function C0(e,t,n,r){r0(r),t=Cu(t,"onChange"),0<t.length&&(n=new ap("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Fs=null,al=null;function Ix(e){M0(e,0)}function dc(e){var t=po(e);if(Qg(t))return e}function Ox(e,t){if(e==="change")return t}var I0=!1;if(wr){var Nd;if(wr){var Pd="oninput"in document;if(!Pd){var my=document.createElement("div");my.setAttribute("oninput","return;"),Pd=typeof my.oninput=="function"}Nd=Pd}else Nd=!1;I0=Nd&&(!document.documentMode||9<document.documentMode)}function yy(){Fs&&(Fs.detachEvent("onpropertychange",O0),al=Fs=null)}function O0(e){if(e.propertyName==="value"&&dc(al)){var t=[];C0(t,al,e,np(e)),l0(Ix,t)}}function jx(e,t,n){e==="focusin"?(yy(),Fs=t,al=n,Fs.attachEvent("onpropertychange",O0)):e==="focusout"&&yy()}function Tx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return dc(al)}function Nx(e,t){if(e==="click")return dc(t)}function Px(e,t){if(e==="input"||e==="change")return dc(t)}function Dx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Fn=typeof Object.is=="function"?Object.is:Dx;function ul(e,t){if(Fn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!gf.call(t,i)||!Fn(e[i],t[i]))return!1}return!0}function vy(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gy(e,t){var n=vy(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vy(n)}}function j0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?j0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function T0(){for(var e=window,t=wu();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=wu(e.document)}return t}function dp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ax(e){var t=T0(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&j0(n.ownerDocument.documentElement,n)){if(r!==null&&dp(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=gy(n,o);var s=gy(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Rx=wr&&"documentMode"in document&&11>=document.documentMode,fo=null,Mf=null,Bs=null,Uf=!1;function wy(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Uf||fo==null||fo!==wu(r)||(r=fo,"selectionStart"in r&&dp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Bs&&ul(Bs,r)||(Bs=r,r=Cu(Mf,"onSelect"),0<r.length&&(t=new ap("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=fo)))}function Na(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ho={animationend:Na("Animation","AnimationEnd"),animationiteration:Na("Animation","AnimationIteration"),animationstart:Na("Animation","AnimationStart"),transitionend:Na("Transition","TransitionEnd")},Dd={},N0={};wr&&(N0=document.createElement("div").style,"AnimationEvent"in window||(delete ho.animationend.animation,delete ho.animationiteration.animation,delete ho.animationstart.animation),"TransitionEvent"in window||delete ho.transitionend.transition);function fc(e){if(Dd[e])return Dd[e];if(!ho[e])return e;var t=ho[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in N0)return Dd[e]=t[n];return e}var P0=fc("animationend"),D0=fc("animationiteration"),A0=fc("animationstart"),R0=fc("transitionend"),L0=new Map,by="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fi(e,t){L0.set(e,t),Hi(t,[e])}for(var Ad=0;Ad<by.length;Ad++){var Rd=by[Ad],Lx=Rd.toLowerCase(),Mx=Rd[0].toUpperCase()+Rd.slice(1);fi(Lx,"on"+Mx)}fi(P0,"onAnimationEnd");fi(D0,"onAnimationIteration");fi(A0,"onAnimationStart");fi("dblclick","onDoubleClick");fi("focusin","onFocus");fi("focusout","onBlur");fi(R0,"onTransitionEnd");No("onMouseEnter",["mouseout","mouseover"]);No("onMouseLeave",["mouseout","mouseover"]);No("onPointerEnter",["pointerout","pointerover"]);No("onPointerLeave",["pointerout","pointerover"]);Hi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ls="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ux=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ls));function ky(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,L_(r,t,void 0,e),e.currentTarget=null}function M0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],c=a.instance,d=a.currentTarget;if(a=a.listener,c!==o&&i.isPropagationStopped())break e;ky(i,a,d),o=c}else for(s=0;s<r.length;s++){if(a=r[s],c=a.instance,d=a.currentTarget,a=a.listener,c!==o&&i.isPropagationStopped())break e;ky(i,a,d),o=c}}}if(ku)throw e=Df,ku=!1,Df=null,e}function et(e,t){var n=t[Kf];n===void 0&&(n=t[Kf]=new Set);var r=e+"__bubble";n.has(r)||(U0(t,e,2,!1),n.add(r))}function Ld(e,t,n){var r=0;t&&(r|=4),U0(n,e,r,t)}var Pa="_reactListening"+Math.random().toString(36).slice(2);function cl(e){if(!e[Pa]){e[Pa]=!0,Wg.forEach(function(n){n!=="selectionchange"&&(Ux.has(n)||Ld(n,!1,e),Ld(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Pa]||(t[Pa]=!0,Ld("selectionchange",!1,t))}}function U0(e,t,n,r){switch(k0(t)){case 1:var i=X_;break;case 4:i=Z_;break;default:i=sp}n=i.bind(null,t,n,e),i=void 0,!Pf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Md(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Ti(a),s===null)return;if(c=s.tag,c===5||c===6){r=o=s;continue e}a=a.parentNode}}r=r.return}l0(function(){var d=o,f=np(n),p=[];e:{var y=L0.get(e);if(y!==void 0){var g=ap,b=e;switch(e){case"keypress":if(nu(n)===0)break e;case"keydown":case"keyup":g=px;break;case"focusin":b="focus",g=Td;break;case"focusout":b="blur",g=Td;break;case"beforeblur":case"afterblur":g=Td;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=uy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=nx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=vx;break;case P0:case D0:case A0:g=ox;break;case R0:g=wx;break;case"scroll":g=ex;break;case"wheel":g=kx;break;case"copy":case"cut":case"paste":g=lx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=dy}var x=(t&4)!==0,D=!x&&e==="scroll",E=x?y!==null?y+"Capture":null:y;x=[];for(var _=d,k;_!==null;){k=_;var $=k.stateNode;if(k.tag===5&&$!==null&&(k=$,E!==null&&($=il(_,E),$!=null&&x.push(dl(_,$,k)))),D)break;_=_.return}0<x.length&&(y=new g(y,b,null,n,f),p.push({event:y,listeners:x}))}}if(!(t&7)){e:{if(y=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",y&&n!==Tf&&(b=n.relatedTarget||n.fromElement)&&(Ti(b)||b[br]))break e;if((g||y)&&(y=f.window===f?f:(y=f.ownerDocument)?y.defaultView||y.parentWindow:window,g?(b=n.relatedTarget||n.toElement,g=d,b=b?Ti(b):null,b!==null&&(D=qi(b),b!==D||b.tag!==5&&b.tag!==6)&&(b=null)):(g=null,b=d),g!==b)){if(x=uy,$="onMouseLeave",E="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(x=dy,$="onPointerLeave",E="onPointerEnter",_="pointer"),D=g==null?y:po(g),k=b==null?y:po(b),y=new x($,_+"leave",g,n,f),y.target=D,y.relatedTarget=k,$=null,Ti(f)===d&&(x=new x(E,_+"enter",b,n,f),x.target=k,x.relatedTarget=D,$=x),D=$,g&&b)t:{for(x=g,E=b,_=0,k=x;k;k=ro(k))_++;for(k=0,$=E;$;$=ro($))k++;for(;0<_-k;)x=ro(x),_--;for(;0<k-_;)E=ro(E),k--;for(;_--;){if(x===E||E!==null&&x===E.alternate)break t;x=ro(x),E=ro(E)}x=null}else x=null;g!==null&&_y(p,y,g,x,!1),b!==null&&D!==null&&_y(p,D,b,x,!0)}}e:{if(y=d?po(d):window,g=y.nodeName&&y.nodeName.toLowerCase(),g==="select"||g==="input"&&y.type==="file")var W=Ox;else if(py(y))if(I0)W=Px;else{W=Tx;var K=jx}else(g=y.nodeName)&&g.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(W=Nx);if(W&&(W=W(e,d))){C0(p,W,n,f);break e}K&&K(e,y,d),e==="focusout"&&(K=y._wrapperState)&&K.controlled&&y.type==="number"&&Ef(y,"number",y.value)}switch(K=d?po(d):window,e){case"focusin":(py(K)||K.contentEditable==="true")&&(fo=K,Mf=d,Bs=null);break;case"focusout":Bs=Mf=fo=null;break;case"mousedown":Uf=!0;break;case"contextmenu":case"mouseup":case"dragend":Uf=!1,wy(p,n,f);break;case"selectionchange":if(Rx)break;case"keydown":case"keyup":wy(p,n,f)}var q;if(cp)e:{switch(e){case"compositionstart":var H="onCompositionStart";break e;case"compositionend":H="onCompositionEnd";break e;case"compositionupdate":H="onCompositionUpdate";break e}H=void 0}else co?S0(e,n)&&(H="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(H="onCompositionStart");H&&(x0&&n.locale!=="ko"&&(co||H!=="onCompositionStart"?H==="onCompositionEnd"&&co&&(q=_0()):(Vr=f,lp="value"in Vr?Vr.value:Vr.textContent,co=!0)),K=Cu(d,H),0<K.length&&(H=new cy(H,e,null,n,f),p.push({event:H,listeners:K}),q?H.data=q:(q=E0(n),q!==null&&(H.data=q)))),(q=xx?Sx(e,n):Ex(e,n))&&(d=Cu(d,"onBeforeInput"),0<d.length&&(f=new cy("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=q))}M0(p,t)})}function dl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Cu(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=il(e,n),o!=null&&r.unshift(dl(e,o,i)),o=il(e,t),o!=null&&r.push(dl(e,o,i))),e=e.return}return r}function ro(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function _y(e,t,n,r,i){for(var o=t._reactName,s=[];n!==null&&n!==r;){var a=n,c=a.alternate,d=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&d!==null&&(a=d,i?(c=il(n,o),c!=null&&s.unshift(dl(n,c,a))):i||(c=il(n,o),c!=null&&s.push(dl(n,c,a)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var $x=/\r\n?/g,zx=/\u0000|\uFFFD/g;function xy(e){return(typeof e=="string"?e:""+e).replace($x,`
`).replace(zx,"")}function Da(e,t,n){if(t=xy(t),xy(e)!==t&&n)throw Error(J(425))}function Iu(){}var $f=null,zf=null;function Ff(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Bf=typeof setTimeout=="function"?setTimeout:void 0,Fx=typeof clearTimeout=="function"?clearTimeout:void 0,Sy=typeof Promise=="function"?Promise:void 0,Bx=typeof queueMicrotask=="function"?queueMicrotask:typeof Sy<"u"?function(e){return Sy.resolve(null).then(e).catch(Kx)}:Bf;function Kx(e){setTimeout(function(){throw e})}function Ud(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),ll(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ll(t)}function Jr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ey(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Go=Math.random().toString(36).slice(2),Qn="__reactFiber$"+Go,fl="__reactProps$"+Go,br="__reactContainer$"+Go,Kf="__reactEvents$"+Go,Vx="__reactListeners$"+Go,Wx="__reactHandles$"+Go;function Ti(e){var t=e[Qn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[br]||n[Qn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ey(e);e!==null;){if(n=e[Qn])return n;e=Ey(e)}return t}e=n,n=e.parentNode}return null}function Ul(e){return e=e[Qn]||e[br],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function po(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(J(33))}function hc(e){return e[fl]||null}var Vf=[],mo=-1;function hi(e){return{current:e}}function tt(e){0>mo||(e.current=Vf[mo],Vf[mo]=null,mo--)}function Xe(e,t){mo++,Vf[mo]=e.current,e.current=t}var li={},qt=hi(li),nn=hi(!1),Mi=li;function Po(e,t){var n=e.type.contextTypes;if(!n)return li;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function rn(e){return e=e.childContextTypes,e!=null}function Ou(){tt(nn),tt(qt)}function Cy(e,t,n){if(qt.current!==li)throw Error(J(168));Xe(qt,t),Xe(nn,n)}function $0(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(J(108,j_(e)||"Unknown",i));return at({},n,r)}function ju(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||li,Mi=qt.current,Xe(qt,e),Xe(nn,nn.current),!0}function Iy(e,t,n){var r=e.stateNode;if(!r)throw Error(J(169));n?(e=$0(e,t,Mi),r.__reactInternalMemoizedMergedChildContext=e,tt(nn),tt(qt),Xe(qt,e)):tt(nn),Xe(nn,n)}var dr=null,pc=!1,$d=!1;function z0(e){dr===null?dr=[e]:dr.push(e)}function Hx(e){pc=!0,z0(e)}function pi(){if(!$d&&dr!==null){$d=!0;var e=0,t=We;try{var n=dr;for(We=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}dr=null,pc=!1}catch(i){throw dr!==null&&(dr=dr.slice(e+1)),d0(rp,pi),i}finally{We=t,$d=!1}}return null}var yo=[],vo=0,Tu=null,Nu=0,xn=[],Sn=0,Ui=null,fr=1,hr="";function Ii(e,t){yo[vo++]=Nu,yo[vo++]=Tu,Tu=e,Nu=t}function F0(e,t,n){xn[Sn++]=fr,xn[Sn++]=hr,xn[Sn++]=Ui,Ui=e;var r=fr;e=hr;var i=32-$n(r)-1;r&=~(1<<i),n+=1;var o=32-$n(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,fr=1<<32-$n(t)+i|n<<i|r,hr=o+e}else fr=1<<o|n<<i|r,hr=e}function fp(e){e.return!==null&&(Ii(e,1),F0(e,1,0))}function hp(e){for(;e===Tu;)Tu=yo[--vo],yo[vo]=null,Nu=yo[--vo],yo[vo]=null;for(;e===Ui;)Ui=xn[--Sn],xn[Sn]=null,hr=xn[--Sn],xn[Sn]=null,fr=xn[--Sn],xn[Sn]=null}var mn=null,hn=null,it=!1,Mn=null;function B0(e,t){var n=jn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Oy(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,mn=e,hn=Jr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,mn=e,hn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ui!==null?{id:fr,overflow:hr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=jn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,mn=e,hn=null,!0):!1;default:return!1}}function Wf(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Hf(e){if(it){var t=hn;if(t){var n=t;if(!Oy(e,t)){if(Wf(e))throw Error(J(418));t=Jr(n.nextSibling);var r=mn;t&&Oy(e,t)?B0(r,n):(e.flags=e.flags&-4097|2,it=!1,mn=e)}}else{if(Wf(e))throw Error(J(418));e.flags=e.flags&-4097|2,it=!1,mn=e}}}function jy(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;mn=e}function Aa(e){if(e!==mn)return!1;if(!it)return jy(e),it=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ff(e.type,e.memoizedProps)),t&&(t=hn)){if(Wf(e))throw K0(),Error(J(418));for(;t;)B0(e,t),t=Jr(t.nextSibling)}if(jy(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(J(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){hn=Jr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}hn=null}}else hn=mn?Jr(e.stateNode.nextSibling):null;return!0}function K0(){for(var e=hn;e;)e=Jr(e.nextSibling)}function Do(){hn=mn=null,it=!1}function pp(e){Mn===null?Mn=[e]:Mn.push(e)}var qx=Er.ReactCurrentBatchConfig;function Ss(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},t._stringRef=o,t)}if(typeof e!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,e))}return e}function Ra(e,t){throw e=Object.prototype.toString.call(t),Error(J(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ty(e){var t=e._init;return t(e._payload)}function V0(e){function t(E,_){if(e){var k=E.deletions;k===null?(E.deletions=[_],E.flags|=16):k.push(_)}}function n(E,_){if(!e)return null;for(;_!==null;)t(E,_),_=_.sibling;return null}function r(E,_){for(E=new Map;_!==null;)_.key!==null?E.set(_.key,_):E.set(_.index,_),_=_.sibling;return E}function i(E,_){return E=ti(E,_),E.index=0,E.sibling=null,E}function o(E,_,k){return E.index=k,e?(k=E.alternate,k!==null?(k=k.index,k<_?(E.flags|=2,_):k):(E.flags|=2,_)):(E.flags|=1048576,_)}function s(E){return e&&E.alternate===null&&(E.flags|=2),E}function a(E,_,k,$){return _===null||_.tag!==6?(_=Hd(k,E.mode,$),_.return=E,_):(_=i(_,k),_.return=E,_)}function c(E,_,k,$){var W=k.type;return W===uo?f(E,_,k.props.children,$,k.key):_!==null&&(_.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===zr&&Ty(W)===_.type)?($=i(_,k.props),$.ref=Ss(E,_,k),$.return=E,$):($=uu(k.type,k.key,k.props,null,E.mode,$),$.ref=Ss(E,_,k),$.return=E,$)}function d(E,_,k,$){return _===null||_.tag!==4||_.stateNode.containerInfo!==k.containerInfo||_.stateNode.implementation!==k.implementation?(_=qd(k,E.mode,$),_.return=E,_):(_=i(_,k.children||[]),_.return=E,_)}function f(E,_,k,$,W){return _===null||_.tag!==7?(_=Ri(k,E.mode,$,W),_.return=E,_):(_=i(_,k),_.return=E,_)}function p(E,_,k){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Hd(""+_,E.mode,k),_.return=E,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Sa:return k=uu(_.type,_.key,_.props,null,E.mode,k),k.ref=Ss(E,null,_),k.return=E,k;case ao:return _=qd(_,E.mode,k),_.return=E,_;case zr:var $=_._init;return p(E,$(_._payload),k)}if(As(_)||ws(_))return _=Ri(_,E.mode,k,null),_.return=E,_;Ra(E,_)}return null}function y(E,_,k,$){var W=_!==null?_.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return W!==null?null:a(E,_,""+k,$);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Sa:return k.key===W?c(E,_,k,$):null;case ao:return k.key===W?d(E,_,k,$):null;case zr:return W=k._init,y(E,_,W(k._payload),$)}if(As(k)||ws(k))return W!==null?null:f(E,_,k,$,null);Ra(E,k)}return null}function g(E,_,k,$,W){if(typeof $=="string"&&$!==""||typeof $=="number")return E=E.get(k)||null,a(_,E,""+$,W);if(typeof $=="object"&&$!==null){switch($.$$typeof){case Sa:return E=E.get($.key===null?k:$.key)||null,c(_,E,$,W);case ao:return E=E.get($.key===null?k:$.key)||null,d(_,E,$,W);case zr:var K=$._init;return g(E,_,k,K($._payload),W)}if(As($)||ws($))return E=E.get(k)||null,f(_,E,$,W,null);Ra(_,$)}return null}function b(E,_,k,$){for(var W=null,K=null,q=_,H=_=0,le=null;q!==null&&H<k.length;H++){q.index>H?(le=q,q=null):le=q.sibling;var fe=y(E,q,k[H],$);if(fe===null){q===null&&(q=le);break}e&&q&&fe.alternate===null&&t(E,q),_=o(fe,_,H),K===null?W=fe:K.sibling=fe,K=fe,q=le}if(H===k.length)return n(E,q),it&&Ii(E,H),W;if(q===null){for(;H<k.length;H++)q=p(E,k[H],$),q!==null&&(_=o(q,_,H),K===null?W=q:K.sibling=q,K=q);return it&&Ii(E,H),W}for(q=r(E,q);H<k.length;H++)le=g(q,E,H,k[H],$),le!==null&&(e&&le.alternate!==null&&q.delete(le.key===null?H:le.key),_=o(le,_,H),K===null?W=le:K.sibling=le,K=le);return e&&q.forEach(function(Y){return t(E,Y)}),it&&Ii(E,H),W}function x(E,_,k,$){var W=ws(k);if(typeof W!="function")throw Error(J(150));if(k=W.call(k),k==null)throw Error(J(151));for(var K=W=null,q=_,H=_=0,le=null,fe=k.next();q!==null&&!fe.done;H++,fe=k.next()){q.index>H?(le=q,q=null):le=q.sibling;var Y=y(E,q,fe.value,$);if(Y===null){q===null&&(q=le);break}e&&q&&Y.alternate===null&&t(E,q),_=o(Y,_,H),K===null?W=Y:K.sibling=Y,K=Y,q=le}if(fe.done)return n(E,q),it&&Ii(E,H),W;if(q===null){for(;!fe.done;H++,fe=k.next())fe=p(E,fe.value,$),fe!==null&&(_=o(fe,_,H),K===null?W=fe:K.sibling=fe,K=fe);return it&&Ii(E,H),W}for(q=r(E,q);!fe.done;H++,fe=k.next())fe=g(q,E,H,fe.value,$),fe!==null&&(e&&fe.alternate!==null&&q.delete(fe.key===null?H:fe.key),_=o(fe,_,H),K===null?W=fe:K.sibling=fe,K=fe);return e&&q.forEach(function(ge){return t(E,ge)}),it&&Ii(E,H),W}function D(E,_,k,$){if(typeof k=="object"&&k!==null&&k.type===uo&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case Sa:e:{for(var W=k.key,K=_;K!==null;){if(K.key===W){if(W=k.type,W===uo){if(K.tag===7){n(E,K.sibling),_=i(K,k.props.children),_.return=E,E=_;break e}}else if(K.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===zr&&Ty(W)===K.type){n(E,K.sibling),_=i(K,k.props),_.ref=Ss(E,K,k),_.return=E,E=_;break e}n(E,K);break}else t(E,K);K=K.sibling}k.type===uo?(_=Ri(k.props.children,E.mode,$,k.key),_.return=E,E=_):($=uu(k.type,k.key,k.props,null,E.mode,$),$.ref=Ss(E,_,k),$.return=E,E=$)}return s(E);case ao:e:{for(K=k.key;_!==null;){if(_.key===K)if(_.tag===4&&_.stateNode.containerInfo===k.containerInfo&&_.stateNode.implementation===k.implementation){n(E,_.sibling),_=i(_,k.children||[]),_.return=E,E=_;break e}else{n(E,_);break}else t(E,_);_=_.sibling}_=qd(k,E.mode,$),_.return=E,E=_}return s(E);case zr:return K=k._init,D(E,_,K(k._payload),$)}if(As(k))return b(E,_,k,$);if(ws(k))return x(E,_,k,$);Ra(E,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,_!==null&&_.tag===6?(n(E,_.sibling),_=i(_,k),_.return=E,E=_):(n(E,_),_=Hd(k,E.mode,$),_.return=E,E=_),s(E)):n(E,_)}return D}var Ao=V0(!0),W0=V0(!1),Pu=hi(null),Du=null,go=null,mp=null;function yp(){mp=go=Du=null}function vp(e){var t=Pu.current;tt(Pu),e._currentValue=t}function qf(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Eo(e,t){Du=e,mp=go=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(en=!0),e.firstContext=null)}function Nn(e){var t=e._currentValue;if(mp!==e)if(e={context:e,memoizedValue:t,next:null},go===null){if(Du===null)throw Error(J(308));go=e,Du.dependencies={lanes:0,firstContext:e}}else go=go.next=e;return t}var Ni=null;function gp(e){Ni===null?Ni=[e]:Ni.push(e)}function H0(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,gp(t)):(n.next=i.next,i.next=n),t.interleaved=n,kr(e,r)}function kr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Fr=!1;function wp(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function q0(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Xr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ze&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,kr(e,n)}return i=r.interleaved,i===null?(t.next=t,gp(r)):(t.next=i.next,i.next=t),r.interleaved=t,kr(e,n)}function ru(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ip(e,n)}}function Ny(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Au(e,t,n,r){var i=e.updateQueue;Fr=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,d=c.next;c.next=null,s===null?o=d:s.next=d,s=c;var f=e.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==s&&(a===null?f.firstBaseUpdate=d:a.next=d,f.lastBaseUpdate=c))}if(o!==null){var p=i.baseState;s=0,f=d=c=null,a=o;do{var y=a.lane,g=a.eventTime;if((r&y)===y){f!==null&&(f=f.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var b=e,x=a;switch(y=t,g=n,x.tag){case 1:if(b=x.payload,typeof b=="function"){p=b.call(g,p,y);break e}p=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=x.payload,y=typeof b=="function"?b.call(g,p,y):b,y==null)break e;p=at({},p,y);break e;case 2:Fr=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,y=i.effects,y===null?i.effects=[a]:y.push(a))}else g={eventTime:g,lane:y,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(d=f=g,c=p):f=f.next=g,s|=y;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;y=a,a=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(1);if(f===null&&(c=p),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=f,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);zi|=s,e.lanes=s,e.memoizedState=p}}function Py(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(J(191,i));i.call(r)}}}var $l={},Zn=hi($l),hl=hi($l),pl=hi($l);function Pi(e){if(e===$l)throw Error(J(174));return e}function bp(e,t){switch(Xe(pl,t),Xe(hl,e),Xe(Zn,$l),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:If(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=If(t,e)}tt(Zn),Xe(Zn,t)}function Ro(){tt(Zn),tt(hl),tt(pl)}function G0(e){Pi(pl.current);var t=Pi(Zn.current),n=If(t,e.type);t!==n&&(Xe(hl,e),Xe(Zn,n))}function kp(e){hl.current===e&&(tt(Zn),tt(hl))}var ot=hi(0);function Ru(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var zd=[];function _p(){for(var e=0;e<zd.length;e++)zd[e]._workInProgressVersionPrimary=null;zd.length=0}var iu=Er.ReactCurrentDispatcher,Fd=Er.ReactCurrentBatchConfig,$i=0,lt=null,gt=null,Ot=null,Lu=!1,Ks=!1,ml=0,Gx=0;function Ft(){throw Error(J(321))}function xp(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Fn(e[n],t[n]))return!1;return!0}function Sp(e,t,n,r,i,o){if($i=o,lt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,iu.current=e===null||e.memoizedState===null?Xx:Zx,e=n(r,i),Ks){o=0;do{if(Ks=!1,ml=0,25<=o)throw Error(J(301));o+=1,Ot=gt=null,t.updateQueue=null,iu.current=eS,e=n(r,i)}while(Ks)}if(iu.current=Mu,t=gt!==null&&gt.next!==null,$i=0,Ot=gt=lt=null,Lu=!1,t)throw Error(J(300));return e}function Ep(){var e=ml!==0;return ml=0,e}function Gn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?lt.memoizedState=Ot=e:Ot=Ot.next=e,Ot}function Pn(){if(gt===null){var e=lt.alternate;e=e!==null?e.memoizedState:null}else e=gt.next;var t=Ot===null?lt.memoizedState:Ot.next;if(t!==null)Ot=t,gt=e;else{if(e===null)throw Error(J(310));gt=e,e={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},Ot===null?lt.memoizedState=Ot=e:Ot=Ot.next=e}return Ot}function yl(e,t){return typeof t=="function"?t(e):t}function Bd(e){var t=Pn(),n=t.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=e;var r=gt,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,c=null,d=o;do{var f=d.lane;if(($i&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(a=c=p,s=r):c=c.next=p,lt.lanes|=f,zi|=f}d=d.next}while(d!==null&&d!==o);c===null?s=r:c.next=a,Fn(r,t.memoizedState)||(en=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,lt.lanes|=o,zi|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Kd(e){var t=Pn(),n=t.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=e(o,s.action),s=s.next;while(s!==i);Fn(o,t.memoizedState)||(en=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Y0(){}function Q0(e,t){var n=lt,r=Pn(),i=t(),o=!Fn(r.memoizedState,i);if(o&&(r.memoizedState=i,en=!0),r=r.queue,Cp(Z0.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Ot!==null&&Ot.memoizedState.tag&1){if(n.flags|=2048,vl(9,X0.bind(null,n,r,i,t),void 0,null),Tt===null)throw Error(J(349));$i&30||J0(n,t,i)}return i}function J0(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=lt.updateQueue,t===null?(t={lastEffect:null,stores:null},lt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function X0(e,t,n,r){t.value=n,t.getSnapshot=r,ew(t)&&tw(e)}function Z0(e,t,n){return n(function(){ew(t)&&tw(e)})}function ew(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Fn(e,n)}catch{return!0}}function tw(e){var t=kr(e,1);t!==null&&zn(t,e,1,-1)}function Dy(e){var t=Gn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yl,lastRenderedState:e},t.queue=e,e=e.dispatch=Jx.bind(null,lt,e),[t.memoizedState,e]}function vl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=lt.updateQueue,t===null?(t={lastEffect:null,stores:null},lt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function nw(){return Pn().memoizedState}function ou(e,t,n,r){var i=Gn();lt.flags|=e,i.memoizedState=vl(1|t,n,void 0,r===void 0?null:r)}function mc(e,t,n,r){var i=Pn();r=r===void 0?null:r;var o=void 0;if(gt!==null){var s=gt.memoizedState;if(o=s.destroy,r!==null&&xp(r,s.deps)){i.memoizedState=vl(t,n,o,r);return}}lt.flags|=e,i.memoizedState=vl(1|t,n,o,r)}function Ay(e,t){return ou(8390656,8,e,t)}function Cp(e,t){return mc(2048,8,e,t)}function rw(e,t){return mc(4,2,e,t)}function iw(e,t){return mc(4,4,e,t)}function ow(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function sw(e,t,n){return n=n!=null?n.concat([e]):null,mc(4,4,ow.bind(null,t,e),n)}function Ip(){}function lw(e,t){var n=Pn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&xp(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function aw(e,t){var n=Pn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&xp(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function uw(e,t,n){return $i&21?(Fn(n,t)||(n=p0(),lt.lanes|=n,zi|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,en=!0),e.memoizedState=n)}function Yx(e,t){var n=We;We=n!==0&&4>n?n:4,e(!0);var r=Fd.transition;Fd.transition={};try{e(!1),t()}finally{We=n,Fd.transition=r}}function cw(){return Pn().memoizedState}function Qx(e,t,n){var r=ei(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},dw(e))fw(t,n);else if(n=H0(e,t,n,r),n!==null){var i=Qt();zn(n,e,r,i),hw(n,t,r)}}function Jx(e,t,n){var r=ei(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(dw(e))fw(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,Fn(a,s)){var c=t.interleaved;c===null?(i.next=i,gp(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=H0(e,t,i,r),n!==null&&(i=Qt(),zn(n,e,r,i),hw(n,t,r))}}function dw(e){var t=e.alternate;return e===lt||t!==null&&t===lt}function fw(e,t){Ks=Lu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function hw(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ip(e,n)}}var Mu={readContext:Nn,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},Xx={readContext:Nn,useCallback:function(e,t){return Gn().memoizedState=[e,t===void 0?null:t],e},useContext:Nn,useEffect:Ay,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ou(4194308,4,ow.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ou(4194308,4,e,t)},useInsertionEffect:function(e,t){return ou(4,2,e,t)},useMemo:function(e,t){var n=Gn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Gn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Qx.bind(null,lt,e),[r.memoizedState,e]},useRef:function(e){var t=Gn();return e={current:e},t.memoizedState=e},useState:Dy,useDebugValue:Ip,useDeferredValue:function(e){return Gn().memoizedState=e},useTransition:function(){var e=Dy(!1),t=e[0];return e=Yx.bind(null,e[1]),Gn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=lt,i=Gn();if(it){if(n===void 0)throw Error(J(407));n=n()}else{if(n=t(),Tt===null)throw Error(J(349));$i&30||J0(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Ay(Z0.bind(null,r,o,e),[e]),r.flags|=2048,vl(9,X0.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Gn(),t=Tt.identifierPrefix;if(it){var n=hr,r=fr;n=(r&~(1<<32-$n(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ml++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Gx++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zx={readContext:Nn,useCallback:lw,useContext:Nn,useEffect:Cp,useImperativeHandle:sw,useInsertionEffect:rw,useLayoutEffect:iw,useMemo:aw,useReducer:Bd,useRef:nw,useState:function(){return Bd(yl)},useDebugValue:Ip,useDeferredValue:function(e){var t=Pn();return uw(t,gt.memoizedState,e)},useTransition:function(){var e=Bd(yl)[0],t=Pn().memoizedState;return[e,t]},useMutableSource:Y0,useSyncExternalStore:Q0,useId:cw,unstable_isNewReconciler:!1},eS={readContext:Nn,useCallback:lw,useContext:Nn,useEffect:Cp,useImperativeHandle:sw,useInsertionEffect:rw,useLayoutEffect:iw,useMemo:aw,useReducer:Kd,useRef:nw,useState:function(){return Kd(yl)},useDebugValue:Ip,useDeferredValue:function(e){var t=Pn();return gt===null?t.memoizedState=e:uw(t,gt.memoizedState,e)},useTransition:function(){var e=Kd(yl)[0],t=Pn().memoizedState;return[e,t]},useMutableSource:Y0,useSyncExternalStore:Q0,useId:cw,unstable_isNewReconciler:!1};function Rn(e,t){if(e&&e.defaultProps){t=at({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Gf(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:at({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var yc={isMounted:function(e){return(e=e._reactInternals)?qi(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Qt(),i=ei(e),o=mr(r,i);o.payload=t,n!=null&&(o.callback=n),t=Xr(e,o,i),t!==null&&(zn(t,e,i,r),ru(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Qt(),i=ei(e),o=mr(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Xr(e,o,i),t!==null&&(zn(t,e,i,r),ru(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Qt(),r=ei(e),i=mr(n,r);i.tag=2,t!=null&&(i.callback=t),t=Xr(e,i,r),t!==null&&(zn(t,e,r,n),ru(t,e,r))}};function Ry(e,t,n,r,i,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,s):t.prototype&&t.prototype.isPureReactComponent?!ul(n,r)||!ul(i,o):!0}function pw(e,t,n){var r=!1,i=li,o=t.contextType;return typeof o=="object"&&o!==null?o=Nn(o):(i=rn(t)?Mi:qt.current,r=t.contextTypes,o=(r=r!=null)?Po(e,i):li),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=yc,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ly(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&yc.enqueueReplaceState(t,t.state,null)}function Yf(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},wp(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=Nn(o):(o=rn(t)?Mi:qt.current,i.context=Po(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Gf(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&yc.enqueueReplaceState(i,i.state,null),Au(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Lo(e,t){try{var n="",r=t;do n+=O_(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function Vd(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Qf(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var tS=typeof WeakMap=="function"?WeakMap:Map;function mw(e,t,n){n=mr(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$u||($u=!0,sh=r),Qf(e,t)},n}function yw(e,t,n){n=mr(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Qf(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Qf(e,t),typeof r!="function"&&(Zr===null?Zr=new Set([this]):Zr.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function My(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new tS;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=mS.bind(null,e,t,n),t.then(e,e))}function Uy(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function $y(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=mr(-1,1),t.tag=2,Xr(n,t,1))),n.lanes|=1),e)}var nS=Er.ReactCurrentOwner,en=!1;function Yt(e,t,n,r){t.child=e===null?W0(t,null,n,r):Ao(t,e.child,n,r)}function zy(e,t,n,r,i){n=n.render;var o=t.ref;return Eo(t,i),r=Sp(e,t,n,r,o,i),n=Ep(),e!==null&&!en?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,_r(e,t,i)):(it&&n&&fp(t),t.flags|=1,Yt(e,t,r,i),t.child)}function Fy(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!Rp(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,vw(e,t,o,r,i)):(e=uu(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:ul,n(s,r)&&e.ref===t.ref)return _r(e,t,i)}return t.flags|=1,e=ti(o,r),e.ref=t.ref,e.return=t,t.child=e}function vw(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(ul(o,r)&&e.ref===t.ref)if(en=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(en=!0);else return t.lanes=e.lanes,_r(e,t,i)}return Jf(e,t,n,r,i)}function gw(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(bo,dn),dn|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Xe(bo,dn),dn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Xe(bo,dn),dn|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Xe(bo,dn),dn|=r;return Yt(e,t,i,n),t.child}function ww(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Jf(e,t,n,r,i){var o=rn(n)?Mi:qt.current;return o=Po(t,o),Eo(t,i),n=Sp(e,t,n,r,o,i),r=Ep(),e!==null&&!en?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,_r(e,t,i)):(it&&r&&fp(t),t.flags|=1,Yt(e,t,n,i),t.child)}function By(e,t,n,r,i){if(rn(n)){var o=!0;ju(t)}else o=!1;if(Eo(t,i),t.stateNode===null)su(e,t),pw(t,n,r),Yf(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var c=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=Nn(d):(d=rn(n)?Mi:qt.current,d=Po(t,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||c!==d)&&Ly(t,s,r,d),Fr=!1;var y=t.memoizedState;s.state=y,Au(t,r,s,i),c=t.memoizedState,a!==r||y!==c||nn.current||Fr?(typeof f=="function"&&(Gf(t,n,f,r),c=t.memoizedState),(a=Fr||Ry(t,n,a,r,y,c,d))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=d,r=a):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,q0(e,t),a=t.memoizedProps,d=t.type===t.elementType?a:Rn(t.type,a),s.props=d,p=t.pendingProps,y=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=Nn(c):(c=rn(n)?Mi:qt.current,c=Po(t,c));var g=n.getDerivedStateFromProps;(f=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==p||y!==c)&&Ly(t,s,r,c),Fr=!1,y=t.memoizedState,s.state=y,Au(t,r,s,i);var b=t.memoizedState;a!==p||y!==b||nn.current||Fr?(typeof g=="function"&&(Gf(t,n,g,r),b=t.memoizedState),(d=Fr||Ry(t,n,d,r,y,b,c)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,b,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,b,c)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=b),s.props=r,s.state=b,s.context=c,r=d):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),r=!1)}return Xf(e,t,n,r,o,i)}function Xf(e,t,n,r,i,o){ww(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&Iy(t,n,!1),_r(e,t,o);r=t.stateNode,nS.current=t;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=Ao(t,e.child,null,o),t.child=Ao(t,null,a,o)):Yt(e,t,a,o),t.memoizedState=r.state,i&&Iy(t,n,!0),t.child}function bw(e){var t=e.stateNode;t.pendingContext?Cy(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Cy(e,t.context,!1),bp(e,t.containerInfo)}function Ky(e,t,n,r,i){return Do(),pp(i),t.flags|=256,Yt(e,t,n,r),t.child}var Zf={dehydrated:null,treeContext:null,retryLane:0};function eh(e){return{baseLanes:e,cachePool:null,transitions:null}}function kw(e,t,n){var r=t.pendingProps,i=ot.current,o=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Xe(ot,i&1),e===null)return Hf(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,o?(r=t.mode,o=t.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=wc(s,r,0,null),e=Ri(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=eh(n),t.memoizedState=Zf,e):Op(t,s));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return rS(e,t,s,r,a,i,n);if(o){o=r.fallback,s=t.mode,i=e.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=ti(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=ti(a,o):(o=Ri(o,s,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,s=e.child.memoizedState,s=s===null?eh(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=e.childLanes&~n,t.memoizedState=Zf,r}return o=e.child,e=o.sibling,r=ti(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Op(e,t){return t=wc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function La(e,t,n,r){return r!==null&&pp(r),Ao(t,e.child,null,n),e=Op(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function rS(e,t,n,r,i,o,s){if(n)return t.flags&256?(t.flags&=-257,r=Vd(Error(J(422))),La(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=wc({mode:"visible",children:r.children},i,0,null),o=Ri(o,i,s,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Ao(t,e.child,null,s),t.child.memoizedState=eh(s),t.memoizedState=Zf,o);if(!(t.mode&1))return La(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(J(419)),r=Vd(o,r,void 0),La(e,t,s,r)}if(a=(s&e.childLanes)!==0,en||a){if(r=Tt,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,kr(e,i),zn(r,e,i,-1))}return Ap(),r=Vd(Error(J(421))),La(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=yS.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,hn=Jr(i.nextSibling),mn=t,it=!0,Mn=null,e!==null&&(xn[Sn++]=fr,xn[Sn++]=hr,xn[Sn++]=Ui,fr=e.id,hr=e.overflow,Ui=t),t=Op(t,r.children),t.flags|=4096,t)}function Vy(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),qf(e.return,t,n)}function Wd(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function _w(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Yt(e,t,r.children,n),r=ot.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Vy(e,n,t);else if(e.tag===19)Vy(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Xe(ot,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Ru(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Wd(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Ru(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Wd(t,!0,n,null,o);break;case"together":Wd(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function su(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function _r(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),zi|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(J(153));if(t.child!==null){for(e=t.child,n=ti(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ti(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function iS(e,t,n){switch(t.tag){case 3:bw(t),Do();break;case 5:G0(t);break;case 1:rn(t.type)&&ju(t);break;case 4:bp(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Xe(Pu,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Xe(ot,ot.current&1),t.flags|=128,null):n&t.child.childLanes?kw(e,t,n):(Xe(ot,ot.current&1),e=_r(e,t,n),e!==null?e.sibling:null);Xe(ot,ot.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return _w(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Xe(ot,ot.current),r)break;return null;case 22:case 23:return t.lanes=0,gw(e,t,n)}return _r(e,t,n)}var xw,th,Sw,Ew;xw=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};th=function(){};Sw=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Pi(Zn.current);var o=null;switch(n){case"input":i=xf(e,i),r=xf(e,r),o=[];break;case"select":i=at({},i,{value:void 0}),r=at({},r,{value:void 0}),o=[];break;case"textarea":i=Cf(e,i),r=Cf(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Iu)}Of(n,r);var s;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var a=i[d];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(nl.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var c=r[d];if(a=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&c!==a&&(c!=null||a!=null))if(d==="style")if(a){for(s in a)!a.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&a[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(nl.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&et("scroll",e),o||a===c||(o=[])):(o=o||[]).push(d,c))}n&&(o=o||[]).push("style",n);var d=o;(t.updateQueue=d)&&(t.flags|=4)}};Ew=function(e,t,n,r){n!==r&&(t.flags|=4)};function Es(e,t){if(!it)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Bt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function oS(e,t,n){var r=t.pendingProps;switch(hp(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(t),null;case 1:return rn(t.type)&&Ou(),Bt(t),null;case 3:return r=t.stateNode,Ro(),tt(nn),tt(qt),_p(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Aa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Mn!==null&&(uh(Mn),Mn=null))),th(e,t),Bt(t),null;case 5:kp(t);var i=Pi(pl.current);if(n=t.type,e!==null&&t.stateNode!=null)Sw(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(J(166));return Bt(t),null}if(e=Pi(Zn.current),Aa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Qn]=t,r[fl]=o,e=(t.mode&1)!==0,n){case"dialog":et("cancel",r),et("close",r);break;case"iframe":case"object":case"embed":et("load",r);break;case"video":case"audio":for(i=0;i<Ls.length;i++)et(Ls[i],r);break;case"source":et("error",r);break;case"img":case"image":case"link":et("error",r),et("load",r);break;case"details":et("toggle",r);break;case"input":Zm(r,o),et("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},et("invalid",r);break;case"textarea":ty(r,o),et("invalid",r)}Of(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&Da(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Da(r.textContent,a,e),i=["children",""+a]):nl.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&et("scroll",r)}switch(n){case"input":Ea(r),ey(r,o,!0);break;case"textarea":Ea(r),ny(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Iu)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Zg(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[Qn]=t,e[fl]=r,xw(e,t,!1,!1),t.stateNode=e;e:{switch(s=jf(n,r),n){case"dialog":et("cancel",e),et("close",e),i=r;break;case"iframe":case"object":case"embed":et("load",e),i=r;break;case"video":case"audio":for(i=0;i<Ls.length;i++)et(Ls[i],e);i=r;break;case"source":et("error",e),i=r;break;case"img":case"image":case"link":et("error",e),et("load",e),i=r;break;case"details":et("toggle",e),i=r;break;case"input":Zm(e,r),i=xf(e,r),et("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=at({},r,{value:void 0}),et("invalid",e);break;case"textarea":ty(e,r),i=Cf(e,r),et("invalid",e);break;default:i=r}Of(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="style"?n0(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&e0(e,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&rl(e,c):typeof c=="number"&&rl(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(nl.hasOwnProperty(o)?c!=null&&o==="onScroll"&&et("scroll",e):c!=null&&Xh(e,o,c,s))}switch(n){case"input":Ea(e),ey(e,r,!1);break;case"textarea":Ea(e),ny(e);break;case"option":r.value!=null&&e.setAttribute("value",""+si(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?ko(e,!!r.multiple,o,!1):r.defaultValue!=null&&ko(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Iu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Bt(t),null;case 6:if(e&&t.stateNode!=null)Ew(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(J(166));if(n=Pi(pl.current),Pi(Zn.current),Aa(t)){if(r=t.stateNode,n=t.memoizedProps,r[Qn]=t,(o=r.nodeValue!==n)&&(e=mn,e!==null))switch(e.tag){case 3:Da(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Da(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qn]=t,t.stateNode=r}return Bt(t),null;case 13:if(tt(ot),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(it&&hn!==null&&t.mode&1&&!(t.flags&128))K0(),Do(),t.flags|=98560,o=!1;else if(o=Aa(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(J(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(J(317));o[Qn]=t}else Do(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Bt(t),o=!1}else Mn!==null&&(uh(Mn),Mn=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ot.current&1?bt===0&&(bt=3):Ap())),t.updateQueue!==null&&(t.flags|=4),Bt(t),null);case 4:return Ro(),th(e,t),e===null&&cl(t.stateNode.containerInfo),Bt(t),null;case 10:return vp(t.type._context),Bt(t),null;case 17:return rn(t.type)&&Ou(),Bt(t),null;case 19:if(tt(ot),o=t.memoizedState,o===null)return Bt(t),null;if(r=(t.flags&128)!==0,s=o.rendering,s===null)if(r)Es(o,!1);else{if(bt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Ru(e),s!==null){for(t.flags|=128,Es(o,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Xe(ot,ot.current&1|2),t.child}e=e.sibling}o.tail!==null&&pt()>Mo&&(t.flags|=128,r=!0,Es(o,!1),t.lanes=4194304)}else{if(!r)if(e=Ru(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Es(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!it)return Bt(t),null}else 2*pt()-o.renderingStartTime>Mo&&n!==1073741824&&(t.flags|=128,r=!0,Es(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(n=o.last,n!==null?n.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=pt(),t.sibling=null,n=ot.current,Xe(ot,r?n&1|2:n&1),t):(Bt(t),null);case 22:case 23:return Dp(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?dn&1073741824&&(Bt(t),t.subtreeFlags&6&&(t.flags|=8192)):Bt(t),null;case 24:return null;case 25:return null}throw Error(J(156,t.tag))}function sS(e,t){switch(hp(t),t.tag){case 1:return rn(t.type)&&Ou(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ro(),tt(nn),tt(qt),_p(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return kp(t),null;case 13:if(tt(ot),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(J(340));Do()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return tt(ot),null;case 4:return Ro(),null;case 10:return vp(t.type._context),null;case 22:case 23:return Dp(),null;case 24:return null;default:return null}}var Ma=!1,Vt=!1,lS=typeof WeakSet=="function"?WeakSet:Set,pe=null;function wo(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){dt(e,t,r)}else n.current=null}function nh(e,t,n){try{n()}catch(r){dt(e,t,r)}}var Wy=!1;function aS(e,t){if($f=Su,e=T0(),dp(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,c=-1,d=0,f=0,p=e,y=null;t:for(;;){for(var g;p!==n||i!==0&&p.nodeType!==3||(a=s+i),p!==o||r!==0&&p.nodeType!==3||(c=s+r),p.nodeType===3&&(s+=p.nodeValue.length),(g=p.firstChild)!==null;)y=p,p=g;for(;;){if(p===e)break t;if(y===n&&++d===i&&(a=s),y===o&&++f===r&&(c=s),(g=p.nextSibling)!==null)break;p=y,y=p.parentNode}p=g}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(zf={focusedElem:e,selectionRange:n},Su=!1,pe=t;pe!==null;)if(t=pe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,pe=e;else for(;pe!==null;){t=pe;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var x=b.memoizedProps,D=b.memoizedState,E=t.stateNode,_=E.getSnapshotBeforeUpdate(t.elementType===t.type?x:Rn(t.type,x),D);E.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var k=t.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch($){dt(t,t.return,$)}if(e=t.sibling,e!==null){e.return=t.return,pe=e;break}pe=t.return}return b=Wy,Wy=!1,b}function Vs(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&nh(t,n,o)}i=i.next}while(i!==r)}}function vc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function rh(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Cw(e){var t=e.alternate;t!==null&&(e.alternate=null,Cw(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Qn],delete t[fl],delete t[Kf],delete t[Vx],delete t[Wx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Iw(e){return e.tag===5||e.tag===3||e.tag===4}function Hy(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Iw(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ih(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Iu));else if(r!==4&&(e=e.child,e!==null))for(ih(e,t,n),e=e.sibling;e!==null;)ih(e,t,n),e=e.sibling}function oh(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(oh(e,t,n),e=e.sibling;e!==null;)oh(e,t,n),e=e.sibling}var Nt=null,Ln=!1;function Ur(e,t,n){for(n=n.child;n!==null;)Ow(e,t,n),n=n.sibling}function Ow(e,t,n){if(Xn&&typeof Xn.onCommitFiberUnmount=="function")try{Xn.onCommitFiberUnmount(uc,n)}catch{}switch(n.tag){case 5:Vt||wo(n,t);case 6:var r=Nt,i=Ln;Nt=null,Ur(e,t,n),Nt=r,Ln=i,Nt!==null&&(Ln?(e=Nt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Nt.removeChild(n.stateNode));break;case 18:Nt!==null&&(Ln?(e=Nt,n=n.stateNode,e.nodeType===8?Ud(e.parentNode,n):e.nodeType===1&&Ud(e,n),ll(e)):Ud(Nt,n.stateNode));break;case 4:r=Nt,i=Ln,Nt=n.stateNode.containerInfo,Ln=!0,Ur(e,t,n),Nt=r,Ln=i;break;case 0:case 11:case 14:case 15:if(!Vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&nh(n,t,s),i=i.next}while(i!==r)}Ur(e,t,n);break;case 1:if(!Vt&&(wo(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){dt(n,t,a)}Ur(e,t,n);break;case 21:Ur(e,t,n);break;case 22:n.mode&1?(Vt=(r=Vt)||n.memoizedState!==null,Ur(e,t,n),Vt=r):Ur(e,t,n);break;default:Ur(e,t,n)}}function qy(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new lS),t.forEach(function(r){var i=vS.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function An(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 5:Nt=a.stateNode,Ln=!1;break e;case 3:Nt=a.stateNode.containerInfo,Ln=!0;break e;case 4:Nt=a.stateNode.containerInfo,Ln=!0;break e}a=a.return}if(Nt===null)throw Error(J(160));Ow(o,s,i),Nt=null,Ln=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){dt(i,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)jw(t,e),t=t.sibling}function jw(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(An(t,e),Hn(e),r&4){try{Vs(3,e,e.return),vc(3,e)}catch(x){dt(e,e.return,x)}try{Vs(5,e,e.return)}catch(x){dt(e,e.return,x)}}break;case 1:An(t,e),Hn(e),r&512&&n!==null&&wo(n,n.return);break;case 5:if(An(t,e),Hn(e),r&512&&n!==null&&wo(n,n.return),e.flags&32){var i=e.stateNode;try{rl(i,"")}catch(x){dt(e,e.return,x)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,s=n!==null?n.memoizedProps:o,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&Jg(i,o),jf(a,s);var d=jf(a,o);for(s=0;s<c.length;s+=2){var f=c[s],p=c[s+1];f==="style"?n0(i,p):f==="dangerouslySetInnerHTML"?e0(i,p):f==="children"?rl(i,p):Xh(i,f,p,d)}switch(a){case"input":Sf(i,o);break;case"textarea":Xg(i,o);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?ko(i,!!o.multiple,g,!1):y!==!!o.multiple&&(o.defaultValue!=null?ko(i,!!o.multiple,o.defaultValue,!0):ko(i,!!o.multiple,o.multiple?[]:"",!1))}i[fl]=o}catch(x){dt(e,e.return,x)}}break;case 6:if(An(t,e),Hn(e),r&4){if(e.stateNode===null)throw Error(J(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(x){dt(e,e.return,x)}}break;case 3:if(An(t,e),Hn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ll(t.containerInfo)}catch(x){dt(e,e.return,x)}break;case 4:An(t,e),Hn(e);break;case 13:An(t,e),Hn(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Np=pt())),r&4&&qy(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(Vt=(d=Vt)||f,An(t,e),Vt=d):An(t,e),Hn(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!f&&e.mode&1)for(pe=e,f=e.child;f!==null;){for(p=pe=f;pe!==null;){switch(y=pe,g=y.child,y.tag){case 0:case 11:case 14:case 15:Vs(4,y,y.return);break;case 1:wo(y,y.return);var b=y.stateNode;if(typeof b.componentWillUnmount=="function"){r=y,n=y.return;try{t=r,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(x){dt(r,n,x)}}break;case 5:wo(y,y.return);break;case 22:if(y.memoizedState!==null){Yy(p);continue}}g!==null?(g.return=y,pe=g):Yy(p)}f=f.sibling}e:for(f=null,p=e;;){if(p.tag===5){if(f===null){f=p;try{i=p.stateNode,d?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=p.stateNode,c=p.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=t0("display",s))}catch(x){dt(e,e.return,x)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(x){dt(e,e.return,x)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:An(t,e),Hn(e),r&4&&qy(e);break;case 21:break;default:An(t,e),Hn(e)}}function Hn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Iw(n)){var r=n;break e}n=n.return}throw Error(J(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(rl(i,""),r.flags&=-33);var o=Hy(e);oh(e,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=Hy(e);ih(e,a,s);break;default:throw Error(J(161))}}catch(c){dt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function uS(e,t,n){pe=e,Tw(e)}function Tw(e,t,n){for(var r=(e.mode&1)!==0;pe!==null;){var i=pe,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Ma;if(!s){var a=i.alternate,c=a!==null&&a.memoizedState!==null||Vt;a=Ma;var d=Vt;if(Ma=s,(Vt=c)&&!d)for(pe=i;pe!==null;)s=pe,c=s.child,s.tag===22&&s.memoizedState!==null?Qy(i):c!==null?(c.return=s,pe=c):Qy(i);for(;o!==null;)pe=o,Tw(o),o=o.sibling;pe=i,Ma=a,Vt=d}Gy(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,pe=o):Gy(e)}}function Gy(e){for(;pe!==null;){var t=pe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Vt||vc(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Vt)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Rn(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Py(t,o,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Py(t,s,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&ll(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}Vt||t.flags&512&&rh(t)}catch(y){dt(t,t.return,y)}}if(t===e){pe=null;break}if(n=t.sibling,n!==null){n.return=t.return,pe=n;break}pe=t.return}}function Yy(e){for(;pe!==null;){var t=pe;if(t===e){pe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,pe=n;break}pe=t.return}}function Qy(e){for(;pe!==null;){var t=pe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{vc(4,t)}catch(c){dt(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(c){dt(t,i,c)}}var o=t.return;try{rh(t)}catch(c){dt(t,o,c)}break;case 5:var s=t.return;try{rh(t)}catch(c){dt(t,s,c)}}}catch(c){dt(t,t.return,c)}if(t===e){pe=null;break}var a=t.sibling;if(a!==null){a.return=t.return,pe=a;break}pe=t.return}}var cS=Math.ceil,Uu=Er.ReactCurrentDispatcher,jp=Er.ReactCurrentOwner,Tn=Er.ReactCurrentBatchConfig,ze=0,Tt=null,mt=null,Rt=0,dn=0,bo=hi(0),bt=0,gl=null,zi=0,gc=0,Tp=0,Ws=null,Zt=null,Np=0,Mo=1/0,cr=null,$u=!1,sh=null,Zr=null,Ua=!1,Wr=null,zu=0,Hs=0,lh=null,lu=-1,au=0;function Qt(){return ze&6?pt():lu!==-1?lu:lu=pt()}function ei(e){return e.mode&1?ze&2&&Rt!==0?Rt&-Rt:qx.transition!==null?(au===0&&(au=p0()),au):(e=We,e!==0||(e=window.event,e=e===void 0?16:k0(e.type)),e):1}function zn(e,t,n,r){if(50<Hs)throw Hs=0,lh=null,Error(J(185));Ll(e,n,r),(!(ze&2)||e!==Tt)&&(e===Tt&&(!(ze&2)&&(gc|=n),bt===4&&Kr(e,Rt)),on(e,r),n===1&&ze===0&&!(t.mode&1)&&(Mo=pt()+500,pc&&pi()))}function on(e,t){var n=e.callbackNode;q_(e,t);var r=xu(e,e===Tt?Rt:0);if(r===0)n!==null&&oy(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&oy(n),t===1)e.tag===0?Hx(Jy.bind(null,e)):z0(Jy.bind(null,e)),Bx(function(){!(ze&6)&&pi()}),n=null;else{switch(m0(r)){case 1:n=rp;break;case 4:n=f0;break;case 16:n=_u;break;case 536870912:n=h0;break;default:n=_u}n=Uw(n,Nw.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Nw(e,t){if(lu=-1,au=0,ze&6)throw Error(J(327));var n=e.callbackNode;if(Co()&&e.callbackNode!==n)return null;var r=xu(e,e===Tt?Rt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Fu(e,r);else{t=r;var i=ze;ze|=2;var o=Dw();(Tt!==e||Rt!==t)&&(cr=null,Mo=pt()+500,Ai(e,t));do try{hS();break}catch(a){Pw(e,a)}while(1);yp(),Uu.current=o,ze=i,mt!==null?t=0:(Tt=null,Rt=0,t=bt)}if(t!==0){if(t===2&&(i=Af(e),i!==0&&(r=i,t=ah(e,i))),t===1)throw n=gl,Ai(e,0),Kr(e,r),on(e,pt()),n;if(t===6)Kr(e,r);else{if(i=e.current.alternate,!(r&30)&&!dS(i)&&(t=Fu(e,r),t===2&&(o=Af(e),o!==0&&(r=o,t=ah(e,o))),t===1))throw n=gl,Ai(e,0),Kr(e,r),on(e,pt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(J(345));case 2:Oi(e,Zt,cr);break;case 3:if(Kr(e,r),(r&130023424)===r&&(t=Np+500-pt(),10<t)){if(xu(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Qt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Bf(Oi.bind(null,e,Zt,cr),t);break}Oi(e,Zt,cr);break;case 4:if(Kr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-$n(r);o=1<<s,s=t[s],s>i&&(i=s),r&=~o}if(r=i,r=pt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*cS(r/1960))-r,10<r){e.timeoutHandle=Bf(Oi.bind(null,e,Zt,cr),r);break}Oi(e,Zt,cr);break;case 5:Oi(e,Zt,cr);break;default:throw Error(J(329))}}}return on(e,pt()),e.callbackNode===n?Nw.bind(null,e):null}function ah(e,t){var n=Ws;return e.current.memoizedState.isDehydrated&&(Ai(e,t).flags|=256),e=Fu(e,t),e!==2&&(t=Zt,Zt=n,t!==null&&uh(t)),e}function uh(e){Zt===null?Zt=e:Zt.push.apply(Zt,e)}function dS(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Fn(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Kr(e,t){for(t&=~Tp,t&=~gc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-$n(t),r=1<<n;e[n]=-1,t&=~r}}function Jy(e){if(ze&6)throw Error(J(327));Co();var t=xu(e,0);if(!(t&1))return on(e,pt()),null;var n=Fu(e,t);if(e.tag!==0&&n===2){var r=Af(e);r!==0&&(t=r,n=ah(e,r))}if(n===1)throw n=gl,Ai(e,0),Kr(e,t),on(e,pt()),n;if(n===6)throw Error(J(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Oi(e,Zt,cr),on(e,pt()),null}function Pp(e,t){var n=ze;ze|=1;try{return e(t)}finally{ze=n,ze===0&&(Mo=pt()+500,pc&&pi())}}function Fi(e){Wr!==null&&Wr.tag===0&&!(ze&6)&&Co();var t=ze;ze|=1;var n=Tn.transition,r=We;try{if(Tn.transition=null,We=1,e)return e()}finally{We=r,Tn.transition=n,ze=t,!(ze&6)&&pi()}}function Dp(){dn=bo.current,tt(bo)}function Ai(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Fx(n)),mt!==null)for(n=mt.return;n!==null;){var r=n;switch(hp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ou();break;case 3:Ro(),tt(nn),tt(qt),_p();break;case 5:kp(r);break;case 4:Ro();break;case 13:tt(ot);break;case 19:tt(ot);break;case 10:vp(r.type._context);break;case 22:case 23:Dp()}n=n.return}if(Tt=e,mt=e=ti(e.current,null),Rt=dn=t,bt=0,gl=null,Tp=gc=zi=0,Zt=Ws=null,Ni!==null){for(t=0;t<Ni.length;t++)if(n=Ni[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Ni=null}return e}function Pw(e,t){do{var n=mt;try{if(yp(),iu.current=Mu,Lu){for(var r=lt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Lu=!1}if($i=0,Ot=gt=lt=null,Ks=!1,ml=0,jp.current=null,n===null||n.return===null){bt=1,gl=t,mt=null;break}e:{var o=e,s=n.return,a=n,c=t;if(t=Rt,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=a,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var y=f.alternate;y?(f.updateQueue=y.updateQueue,f.memoizedState=y.memoizedState,f.lanes=y.lanes):(f.updateQueue=null,f.memoizedState=null)}var g=Uy(s);if(g!==null){g.flags&=-257,$y(g,s,a,o,t),g.mode&1&&My(o,d,t),t=g,c=d;var b=t.updateQueue;if(b===null){var x=new Set;x.add(c),t.updateQueue=x}else b.add(c);break e}else{if(!(t&1)){My(o,d,t),Ap();break e}c=Error(J(426))}}else if(it&&a.mode&1){var D=Uy(s);if(D!==null){!(D.flags&65536)&&(D.flags|=256),$y(D,s,a,o,t),pp(Lo(c,a));break e}}o=c=Lo(c,a),bt!==4&&(bt=2),Ws===null?Ws=[o]:Ws.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var E=mw(o,c,t);Ny(o,E);break e;case 1:a=c;var _=o.type,k=o.stateNode;if(!(o.flags&128)&&(typeof _.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Zr===null||!Zr.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t;var $=yw(o,a,t);Ny(o,$);break e}}o=o.return}while(o!==null)}Rw(n)}catch(W){t=W,mt===n&&n!==null&&(mt=n=n.return);continue}break}while(1)}function Dw(){var e=Uu.current;return Uu.current=Mu,e===null?Mu:e}function Ap(){(bt===0||bt===3||bt===2)&&(bt=4),Tt===null||!(zi&268435455)&&!(gc&268435455)||Kr(Tt,Rt)}function Fu(e,t){var n=ze;ze|=2;var r=Dw();(Tt!==e||Rt!==t)&&(cr=null,Ai(e,t));do try{fS();break}catch(i){Pw(e,i)}while(1);if(yp(),ze=n,Uu.current=r,mt!==null)throw Error(J(261));return Tt=null,Rt=0,bt}function fS(){for(;mt!==null;)Aw(mt)}function hS(){for(;mt!==null&&!U_();)Aw(mt)}function Aw(e){var t=Mw(e.alternate,e,dn);e.memoizedProps=e.pendingProps,t===null?Rw(e):mt=t,jp.current=null}function Rw(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=sS(n,t),n!==null){n.flags&=32767,mt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{bt=6,mt=null;return}}else if(n=oS(n,t,dn),n!==null){mt=n;return}if(t=t.sibling,t!==null){mt=t;return}mt=t=e}while(t!==null);bt===0&&(bt=5)}function Oi(e,t,n){var r=We,i=Tn.transition;try{Tn.transition=null,We=1,pS(e,t,n,r)}finally{Tn.transition=i,We=r}return null}function pS(e,t,n,r){do Co();while(Wr!==null);if(ze&6)throw Error(J(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(J(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(G_(e,o),e===Tt&&(mt=Tt=null,Rt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ua||(Ua=!0,Uw(_u,function(){return Co(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Tn.transition,Tn.transition=null;var s=We;We=1;var a=ze;ze|=4,jp.current=null,aS(e,n),jw(n,e),Ax(zf),Su=!!$f,zf=$f=null,e.current=n,uS(n),$_(),ze=a,We=s,Tn.transition=o}else e.current=n;if(Ua&&(Ua=!1,Wr=e,zu=i),o=e.pendingLanes,o===0&&(Zr=null),B_(n.stateNode),on(e,pt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if($u)throw $u=!1,e=sh,sh=null,e;return zu&1&&e.tag!==0&&Co(),o=e.pendingLanes,o&1?e===lh?Hs++:(Hs=0,lh=e):Hs=0,pi(),null}function Co(){if(Wr!==null){var e=m0(zu),t=Tn.transition,n=We;try{if(Tn.transition=null,We=16>e?16:e,Wr===null)var r=!1;else{if(e=Wr,Wr=null,zu=0,ze&6)throw Error(J(331));var i=ze;for(ze|=4,pe=e.current;pe!==null;){var o=pe,s=o.child;if(pe.flags&16){var a=o.deletions;if(a!==null){for(var c=0;c<a.length;c++){var d=a[c];for(pe=d;pe!==null;){var f=pe;switch(f.tag){case 0:case 11:case 15:Vs(8,f,o)}var p=f.child;if(p!==null)p.return=f,pe=p;else for(;pe!==null;){f=pe;var y=f.sibling,g=f.return;if(Cw(f),f===d){pe=null;break}if(y!==null){y.return=g,pe=y;break}pe=g}}}var b=o.alternate;if(b!==null){var x=b.child;if(x!==null){b.child=null;do{var D=x.sibling;x.sibling=null,x=D}while(x!==null)}}pe=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,pe=s;else e:for(;pe!==null;){if(o=pe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Vs(9,o,o.return)}var E=o.sibling;if(E!==null){E.return=o.return,pe=E;break e}pe=o.return}}var _=e.current;for(pe=_;pe!==null;){s=pe;var k=s.child;if(s.subtreeFlags&2064&&k!==null)k.return=s,pe=k;else e:for(s=_;pe!==null;){if(a=pe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:vc(9,a)}}catch(W){dt(a,a.return,W)}if(a===s){pe=null;break e}var $=a.sibling;if($!==null){$.return=a.return,pe=$;break e}pe=a.return}}if(ze=i,pi(),Xn&&typeof Xn.onPostCommitFiberRoot=="function")try{Xn.onPostCommitFiberRoot(uc,e)}catch{}r=!0}return r}finally{We=n,Tn.transition=t}}return!1}function Xy(e,t,n){t=Lo(n,t),t=mw(e,t,1),e=Xr(e,t,1),t=Qt(),e!==null&&(Ll(e,1,t),on(e,t))}function dt(e,t,n){if(e.tag===3)Xy(e,e,n);else for(;t!==null;){if(t.tag===3){Xy(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Zr===null||!Zr.has(r))){e=Lo(n,e),e=yw(t,e,1),t=Xr(t,e,1),e=Qt(),t!==null&&(Ll(t,1,e),on(t,e));break}}t=t.return}}function mS(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Qt(),e.pingedLanes|=e.suspendedLanes&n,Tt===e&&(Rt&n)===n&&(bt===4||bt===3&&(Rt&130023424)===Rt&&500>pt()-Np?Ai(e,0):Tp|=n),on(e,t)}function Lw(e,t){t===0&&(e.mode&1?(t=Oa,Oa<<=1,!(Oa&130023424)&&(Oa=4194304)):t=1);var n=Qt();e=kr(e,t),e!==null&&(Ll(e,t,n),on(e,n))}function yS(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Lw(e,n)}function vS(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(t),Lw(e,n)}var Mw;Mw=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||nn.current)en=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return en=!1,iS(e,t,n);en=!!(e.flags&131072)}else en=!1,it&&t.flags&1048576&&F0(t,Nu,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;su(e,t),e=t.pendingProps;var i=Po(t,qt.current);Eo(t,n),i=Sp(null,t,r,e,i,n);var o=Ep();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,rn(r)?(o=!0,ju(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,wp(t),i.updater=yc,t.stateNode=i,i._reactInternals=t,Yf(t,r,e,n),t=Xf(null,t,r,!0,o,n)):(t.tag=0,it&&o&&fp(t),Yt(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(su(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=wS(r),e=Rn(r,e),i){case 0:t=Jf(null,t,r,e,n);break e;case 1:t=By(null,t,r,e,n);break e;case 11:t=zy(null,t,r,e,n);break e;case 14:t=Fy(null,t,r,Rn(r.type,e),n);break e}throw Error(J(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Rn(r,i),Jf(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Rn(r,i),By(e,t,r,i,n);case 3:e:{if(bw(t),e===null)throw Error(J(387));r=t.pendingProps,o=t.memoizedState,i=o.element,q0(e,t),Au(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=Lo(Error(J(423)),t),t=Ky(e,t,r,n,i);break e}else if(r!==i){i=Lo(Error(J(424)),t),t=Ky(e,t,r,n,i);break e}else for(hn=Jr(t.stateNode.containerInfo.firstChild),mn=t,it=!0,Mn=null,n=W0(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Do(),r===i){t=_r(e,t,n);break e}Yt(e,t,r,n)}t=t.child}return t;case 5:return G0(t),e===null&&Hf(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,s=i.children,Ff(r,i)?s=null:o!==null&&Ff(r,o)&&(t.flags|=32),ww(e,t),Yt(e,t,s,n),t.child;case 6:return e===null&&Hf(t),null;case 13:return kw(e,t,n);case 4:return bp(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ao(t,null,r,n):Yt(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Rn(r,i),zy(e,t,r,i,n);case 7:return Yt(e,t,t.pendingProps,n),t.child;case 8:return Yt(e,t,t.pendingProps.children,n),t.child;case 12:return Yt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Xe(Pu,r._currentValue),r._currentValue=s,o!==null)if(Fn(o.value,s)){if(o.children===i.children&&!nn.current){t=_r(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=mr(-1,n&-n),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),qf(o.return,n,t),a.lanes|=n;break}c=c.next}}else if(o.tag===10)s=o.type===t.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(J(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),qf(s,n,t),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===t){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Yt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Eo(t,n),i=Nn(i),r=r(i),t.flags|=1,Yt(e,t,r,n),t.child;case 14:return r=t.type,i=Rn(r,t.pendingProps),i=Rn(r.type,i),Fy(e,t,r,i,n);case 15:return vw(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Rn(r,i),su(e,t),t.tag=1,rn(r)?(e=!0,ju(t)):e=!1,Eo(t,n),pw(t,r,i),Yf(t,r,i,n),Xf(null,t,r,!0,e,n);case 19:return _w(e,t,n);case 22:return gw(e,t,n)}throw Error(J(156,t.tag))};function Uw(e,t){return d0(e,t)}function gS(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(e,t,n,r){return new gS(e,t,n,r)}function Rp(e){return e=e.prototype,!(!e||!e.isReactComponent)}function wS(e){if(typeof e=="function")return Rp(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ep)return 11;if(e===tp)return 14}return 2}function ti(e,t){var n=e.alternate;return n===null?(n=jn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function uu(e,t,n,r,i,o){var s=2;if(r=e,typeof e=="function")Rp(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case uo:return Ri(n.children,i,o,t);case Zh:s=8,i|=8;break;case wf:return e=jn(12,n,t,i|2),e.elementType=wf,e.lanes=o,e;case bf:return e=jn(13,n,t,i),e.elementType=bf,e.lanes=o,e;case kf:return e=jn(19,n,t,i),e.elementType=kf,e.lanes=o,e;case Gg:return wc(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Hg:s=10;break e;case qg:s=9;break e;case ep:s=11;break e;case tp:s=14;break e;case zr:s=16,r=null;break e}throw Error(J(130,e==null?e:typeof e,""))}return t=jn(s,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function Ri(e,t,n,r){return e=jn(7,e,r,t),e.lanes=n,e}function wc(e,t,n,r){return e=jn(22,e,r,t),e.elementType=Gg,e.lanes=n,e.stateNode={isHidden:!1},e}function Hd(e,t,n){return e=jn(6,e,null,t),e.lanes=n,e}function qd(e,t,n){return t=jn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function bS(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Id(0),this.expirationTimes=Id(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Id(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Lp(e,t,n,r,i,o,s,a,c){return e=new bS(e,t,n,a,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=jn(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wp(o),e}function kS(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ao,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function $w(e){if(!e)return li;e=e._reactInternals;e:{if(qi(e)!==e||e.tag!==1)throw Error(J(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(rn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(J(171))}if(e.tag===1){var n=e.type;if(rn(n))return $0(e,n,t)}return t}function zw(e,t,n,r,i,o,s,a,c){return e=Lp(n,r,!0,e,i,o,s,a,c),e.context=$w(null),n=e.current,r=Qt(),i=ei(n),o=mr(r,i),o.callback=t??null,Xr(n,o,i),e.current.lanes=i,Ll(e,i,r),on(e,r),e}function bc(e,t,n,r){var i=t.current,o=Qt(),s=ei(i);return n=$w(n),t.context===null?t.context=n:t.pendingContext=n,t=mr(o,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Xr(i,t,s),e!==null&&(zn(e,i,s,o),ru(e,i,s)),s}function Bu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Zy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Mp(e,t){Zy(e,t),(e=e.alternate)&&Zy(e,t)}function _S(){return null}var Fw=typeof reportError=="function"?reportError:function(e){console.error(e)};function Up(e){this._internalRoot=e}kc.prototype.render=Up.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(J(409));bc(e,t,null,null)};kc.prototype.unmount=Up.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Fi(function(){bc(null,e,null,null)}),t[br]=null}};function kc(e){this._internalRoot=e}kc.prototype.unstable_scheduleHydration=function(e){if(e){var t=g0();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Br.length&&t!==0&&t<Br[n].priority;n++);Br.splice(n,0,e),n===0&&b0(e)}};function $p(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function _c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ev(){}function xS(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var d=Bu(s);o.call(d)}}var s=zw(t,r,e,0,null,!1,!1,"",ev);return e._reactRootContainer=s,e[br]=s.current,cl(e.nodeType===8?e.parentNode:e),Fi(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var d=Bu(c);a.call(d)}}var c=Lp(e,0,!1,null,null,!1,!1,"",ev);return e._reactRootContainer=c,e[br]=c.current,cl(e.nodeType===8?e.parentNode:e),Fi(function(){bc(t,c,n,r)}),c}function xc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var c=Bu(s);a.call(c)}}bc(t,s,e,i)}else s=xS(n,t,e,i,r);return Bu(s)}y0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Rs(t.pendingLanes);n!==0&&(ip(t,n|1),on(t,pt()),!(ze&6)&&(Mo=pt()+500,pi()))}break;case 13:Fi(function(){var r=kr(e,1);if(r!==null){var i=Qt();zn(r,e,1,i)}}),Mp(e,1)}};op=function(e){if(e.tag===13){var t=kr(e,134217728);if(t!==null){var n=Qt();zn(t,e,134217728,n)}Mp(e,134217728)}};v0=function(e){if(e.tag===13){var t=ei(e),n=kr(e,t);if(n!==null){var r=Qt();zn(n,e,t,r)}Mp(e,t)}};g0=function(){return We};w0=function(e,t){var n=We;try{return We=e,t()}finally{We=n}};Nf=function(e,t,n){switch(t){case"input":if(Sf(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=hc(r);if(!i)throw Error(J(90));Qg(r),Sf(r,i)}}}break;case"textarea":Xg(e,n);break;case"select":t=n.value,t!=null&&ko(e,!!n.multiple,t,!1)}};o0=Pp;s0=Fi;var SS={usingClientEntryPoint:!1,Events:[Ul,po,hc,r0,i0,Pp]},Cs={findFiberByHostInstance:Ti,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ES={bundleType:Cs.bundleType,version:Cs.version,rendererPackageName:Cs.rendererPackageName,rendererConfig:Cs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Er.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=u0(e),e===null?null:e.stateNode},findFiberByHostInstance:Cs.findFiberByHostInstance||_S,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $a=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$a.isDisabled&&$a.supportsFiber)try{uc=$a.inject(ES),Xn=$a}catch{}}wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SS;wn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$p(t))throw Error(J(200));return kS(e,t,null,n)};wn.createRoot=function(e,t){if(!$p(e))throw Error(J(299));var n=!1,r="",i=Fw;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Lp(e,1,!1,null,null,n,!1,r,i),e[br]=t.current,cl(e.nodeType===8?e.parentNode:e),new Up(t)};wn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(J(188)):(e=Object.keys(e).join(","),Error(J(268,e)));return e=u0(t),e=e===null?null:e.stateNode,e};wn.flushSync=function(e){return Fi(e)};wn.hydrate=function(e,t,n){if(!_c(t))throw Error(J(200));return xc(null,e,t,!0,n)};wn.hydrateRoot=function(e,t,n){if(!$p(e))throw Error(J(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=Fw;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=zw(t,null,e,1,n??null,i,!1,o,s),e[br]=t.current,cl(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new kc(t)};wn.render=function(e,t,n){if(!_c(t))throw Error(J(200));return xc(null,e,t,!1,n)};wn.unmountComponentAtNode=function(e){if(!_c(e))throw Error(J(40));return e._reactRootContainer?(Fi(function(){xc(null,null,e,!1,function(){e._reactRootContainer=null,e[br]=null})}),!0):!1};wn.unstable_batchedUpdates=Pp;wn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!_c(n))throw Error(J(200));if(e==null||e._reactInternals===void 0)throw Error(J(38));return xc(e,t,n,!1,r)};wn.version="18.3.1-next-f1338f8080-20240426";function Bw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Bw)}catch(e){console.error(e)}}Bw(),Bg.exports=wn;var CS=Bg.exports,Kw,tv=CS;Kw=tv.createRoot,tv.hydrateRoot;var Vw={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Hm,function(){var n=function(l,u){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,m){h.__proto__=m}||function(h,m){for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&(h[v]=m[v])})(l,u)},r=function(){return(r=Object.assign||function(l){for(var u,h=1,m=arguments.length;h<m;h++)for(var v in u=arguments[h])Object.prototype.hasOwnProperty.call(u,v)&&(l[v]=u[v]);return l}).apply(this,arguments)};function i(l,u,h){if(h||arguments.length===2)for(var m,v=0,w=u.length;v<w;v++)!m&&v in u||((m=m||Array.prototype.slice.call(u,0,v))[v]=u[v]);return l.concat(m||Array.prototype.slice.call(u))}var o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Hm,s=Object.keys,a=Array.isArray;function c(l,u){return typeof u!="object"||s(u).forEach(function(h){l[h]=u[h]}),l}typeof Promise>"u"||o.Promise||(o.Promise=Promise);var d=Object.getPrototypeOf,f={}.hasOwnProperty;function p(l,u){return f.call(l,u)}function y(l,u){typeof u=="function"&&(u=u(d(l))),(typeof Reflect>"u"?s:Reflect.ownKeys)(u).forEach(function(h){b(l,h,u[h])})}var g=Object.defineProperty;function b(l,u,h,m){g(l,u,c(h&&p(h,"get")&&typeof h.get=="function"?{get:h.get,set:h.set,configurable:!0}:{value:h,configurable:!0,writable:!0},m))}function x(l){return{from:function(u){return l.prototype=Object.create(u.prototype),b(l.prototype,"constructor",l),{extend:y.bind(null,l.prototype)}}}}var D=Object.getOwnPropertyDescriptor,E=[].slice;function _(l,u,h){return E.call(l,u,h)}function k(l,u){return u(l)}function $(l){if(!l)throw new Error("Assertion Failed")}function W(l){o.setImmediate?setImmediate(l):setTimeout(l,0)}function K(l,u){if(typeof u=="string"&&p(l,u))return l[u];if(!u)return l;if(typeof u!="string"){for(var h=[],m=0,v=u.length;m<v;++m){var w=K(l,u[m]);h.push(w)}return h}var S=u.indexOf(".");if(S!==-1){var C=l[u.substr(0,S)];return C==null?void 0:K(C,u.substr(S+1))}}function q(l,u,h){if(l&&u!==void 0&&!("isFrozen"in Object&&Object.isFrozen(l)))if(typeof u!="string"&&"length"in u){$(typeof h!="string"&&"length"in h);for(var m=0,v=u.length;m<v;++m)q(l,u[m],h[m])}else{var w,S,C=u.indexOf(".");C!==-1?(w=u.substr(0,C),(S=u.substr(C+1))===""?h===void 0?a(l)&&!isNaN(parseInt(w))?l.splice(w,1):delete l[w]:l[w]=h:q(C=!(C=l[w])||!p(l,w)?l[w]={}:C,S,h)):h===void 0?a(l)&&!isNaN(parseInt(u))?l.splice(u,1):delete l[u]:l[u]=h}}function H(l){var u,h={};for(u in l)p(l,u)&&(h[u]=l[u]);return h}var le=[].concat;function fe(l){return le.apply([],l)}var yi="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(fe([8,16,32,64].map(function(l){return["Int","Uint","Float"].map(function(u){return u+l+"Array"})}))).filter(function(l){return o[l]}),Y=new Set(yi.map(function(l){return o[l]})),ge=null;function ke(l){return ge=new WeakMap,l=function u(h){if(!h||typeof h!="object")return h;var m=ge.get(h);if(m)return m;if(a(h)){m=[],ge.set(h,m);for(var v=0,w=h.length;v<w;++v)m.push(u(h[v]))}else if(Y.has(h.constructor))m=h;else{var S,C=d(h);for(S in m=C===Object.prototype?{}:Object.create(C),ge.set(h,m),h)p(h,S)&&(m[S]=u(h[S]))}return m}(l),ge=null,l}var Se={}.toString;function Ee(l){return Se.call(l).slice(8,-1)}var Q=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ae=typeof Q=="symbol"?function(l){var u;return l!=null&&(u=l[Q])&&u.apply(l)}:function(){return null};function M(l,u){return u=l.indexOf(u),0<=u&&l.splice(u,1),0<=u}var ee={};function ne(l){var u,h,m,v;if(arguments.length===1){if(a(l))return l.slice();if(this===ee&&typeof l=="string")return[l];if(v=ae(l)){for(h=[];!(m=v.next()).done;)h.push(m.value);return h}if(l==null)return[l];if(typeof(u=l.length)!="number")return[l];for(h=new Array(u);u--;)h[u]=l[u];return h}for(u=arguments.length,h=new Array(u);u--;)h[u]=arguments[u];return h}var de=typeof Symbol<"u"?function(l){return l[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ls=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],kn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ls),ie={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function be(l,u){this.name=l,this.message=u}function De(l,u){return l+". Errors: "+Object.keys(u).map(function(h){return u[h].toString()}).filter(function(h,m,v){return v.indexOf(h)===m}).join(`
`)}function Qe(l,u,h,m){this.failures=u,this.failedKeys=m,this.successCount=h,this.message=De(l,u)}function $e(l,u){this.name="BulkError",this.failures=Object.keys(u).map(function(h){return u[h]}),this.failuresByPos=u,this.message=De(l,this.failures)}x(be).from(Error).extend({toString:function(){return this.name+": "+this.message}}),x(Qe).from(be),x($e).from(be);var Te=kn.reduce(function(l,u){return l[u]=u+"Error",l},{}),ut=be,se=kn.reduce(function(l,u){var h=u+"Error";function m(v,w){this.name=h,v?typeof v=="string"?(this.message="".concat(v).concat(w?`
 `+w:""),this.inner=w||null):typeof v=="object"&&(this.message="".concat(v.name," ").concat(v.message),this.inner=v):(this.message=ie[u]||h,this.inner=null)}return x(m).from(ut),l[u]=m,l},{});se.Syntax=SyntaxError,se.Type=TypeError,se.Range=RangeError;var Ve=ls.reduce(function(l,u){return l[u+"Error"]=se[u],l},{}),nt=kn.reduce(function(l,u){return["Syntax","Type","Range"].indexOf(u)===-1&&(l[u+"Error"]=se[u]),l},{});function we(){}function Le(l){return l}function Be(l,u){return l==null||l===Le?u:function(h){return u(l(h))}}function qe(l,u){return function(){l.apply(this,arguments),u.apply(this,arguments)}}function un(l,u){return l===we?u:function(){var h=l.apply(this,arguments);h!==void 0&&(arguments[0]=h);var m=this.onsuccess,v=this.onerror;this.onsuccess=null,this.onerror=null;var w=u.apply(this,arguments);return m&&(this.onsuccess=this.onsuccess?qe(m,this.onsuccess):m),v&&(this.onerror=this.onerror?qe(v,this.onerror):v),w!==void 0?w:h}}function mi(l,u){return l===we?u:function(){l.apply(this,arguments);var h=this.onsuccess,m=this.onerror;this.onsuccess=this.onerror=null,u.apply(this,arguments),h&&(this.onsuccess=this.onsuccess?qe(h,this.onsuccess):h),m&&(this.onerror=this.onerror?qe(m,this.onerror):m)}}function Bn(l,u){return l===we?u:function(h){var m=l.apply(this,arguments);c(h,m);var v=this.onsuccess,w=this.onerror;return this.onsuccess=null,this.onerror=null,h=u.apply(this,arguments),v&&(this.onsuccess=this.onsuccess?qe(v,this.onsuccess):v),w&&(this.onerror=this.onerror?qe(w,this.onerror):w),m===void 0?h===void 0?void 0:h:c(m,h)}}function Ik(l,u){return l===we?u:function(){return u.apply(this,arguments)!==!1&&l.apply(this,arguments)}}function Fc(l,u){return l===we?u:function(){var h=l.apply(this,arguments);if(h&&typeof h.then=="function"){for(var m=this,v=arguments.length,w=new Array(v);v--;)w[v]=arguments[v];return h.then(function(){return u.apply(m,w)})}return u.apply(this,arguments)}}nt.ModifyError=Qe,nt.DexieError=be,nt.BulkError=$e;var Kn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function fm(l){Kn=l}var ss={},hm=100,yi=typeof Promise>"u"?[]:function(){var l=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[l,d(l),l];var u=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[u,d(u),l]}(),ls=yi[0],kn=yi[1],yi=yi[2],kn=kn&&kn.then,vi=ls&&ls.constructor,Bc=!!yi,as=function(l,u){us.push([l,u]),Jl&&(queueMicrotask(jk),Jl=!1)},Kc=!0,Jl=!0,gi=[],Xl=[],Vc=Le,Tr={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:we,pgp:!1,env:{},finalize:we},ve=Tr,us=[],wi=0,Zl=[];function ue(l){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var u=this._PSD=ve;if(typeof l!="function"){if(l!==ss)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Hc(this,this._value))}this._state=null,this._value=null,++u.ref,function h(m,v){try{v(function(w){if(m._state===null){if(w===m)throw new TypeError("A promise cannot be resolved with itself.");var S=m._lib&&Yi();w&&typeof w.then=="function"?h(m,function(C,O){w instanceof ue?w._then(C,O):w.then(C,O)}):(m._state=!0,m._value=w,mm(m)),S&&Qi()}},Hc.bind(null,m))}catch(w){Hc(m,w)}}(this,l)}var Wc={get:function(){var l=ve,u=ra;function h(m,v){var w=this,S=!l.global&&(l!==ve||u!==ra),C=S&&!Pr(),O=new ue(function(N,A){qc(w,new pm(vm(m,l,S,C),vm(v,l,S,C),N,A,l))});return this._consoleTask&&(O._consoleTask=this._consoleTask),O}return h.prototype=ss,h},set:function(l){b(this,"then",l&&l.prototype===ss?Wc:{get:function(){return l},set:Wc.set})}};function pm(l,u,h,m,v){this.onFulfilled=typeof l=="function"?l:null,this.onRejected=typeof u=="function"?u:null,this.resolve=h,this.reject=m,this.psd=v}function Hc(l,u){var h,m;Xl.push(u),l._state===null&&(h=l._lib&&Yi(),u=Vc(u),l._state=!1,l._value=u,m=l,gi.some(function(v){return v._value===m._value})||gi.push(m),mm(l),h&&Qi())}function mm(l){var u=l._listeners;l._listeners=[];for(var h=0,m=u.length;h<m;++h)qc(l,u[h]);var v=l._PSD;--v.ref||v.finalize(),wi===0&&(++wi,as(function(){--wi==0&&Gc()},[]))}function qc(l,u){if(l._state!==null){var h=l._state?u.onFulfilled:u.onRejected;if(h===null)return(l._state?u.resolve:u.reject)(l._value);++u.psd.ref,++wi,as(Ok,[h,l,u])}else l._listeners.push(u)}function Ok(l,u,h){try{var m,v=u._value;!u._state&&Xl.length&&(Xl=[]),m=Kn&&u._consoleTask?u._consoleTask.run(function(){return l(v)}):l(v),u._state||Xl.indexOf(v)!==-1||function(w){for(var S=gi.length;S;)if(gi[--S]._value===w._value)return gi.splice(S,1)}(u),h.resolve(m)}catch(w){h.reject(w)}finally{--wi==0&&Gc(),--h.psd.ref||h.psd.finalize()}}function jk(){bi(Tr,function(){Yi()&&Qi()})}function Yi(){var l=Kc;return Jl=Kc=!1,l}function Qi(){var l,u,h;do for(;0<us.length;)for(l=us,us=[],h=l.length,u=0;u<h;++u){var m=l[u];m[0].apply(null,m[1])}while(0<us.length);Jl=Kc=!0}function Gc(){var l=gi;gi=[],l.forEach(function(m){m._PSD.onunhandled.call(null,m._value,m)});for(var u=Zl.slice(0),h=u.length;h;)u[--h]()}function ea(l){return new ue(ss,!1,l)}function rt(l,u){var h=ve;return function(){var m=Yi(),v=ve;try{return Dr(h,!0),l.apply(this,arguments)}catch(w){u&&u(w)}finally{Dr(v,!1),m&&Qi()}}}y(ue.prototype,{then:Wc,_then:function(l,u){qc(this,new pm(null,null,l,u,ve))},catch:function(l){if(arguments.length===1)return this.then(null,l);var u=l,h=arguments[1];return typeof u=="function"?this.then(null,function(m){return(m instanceof u?h:ea)(m)}):this.then(null,function(m){return(m&&m.name===u?h:ea)(m)})},finally:function(l){return this.then(function(u){return ue.resolve(l()).then(function(){return u})},function(u){return ue.resolve(l()).then(function(){return ea(u)})})},timeout:function(l,u){var h=this;return l<1/0?new ue(function(m,v){var w=setTimeout(function(){return v(new se.Timeout(u))},l);h.then(m,v).finally(clearTimeout.bind(null,w))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&b(ue.prototype,Symbol.toStringTag,"Dexie.Promise"),Tr.env=ym(),y(ue,{all:function(){var l=ne.apply(null,arguments).map(ia);return new ue(function(u,h){l.length===0&&u([]);var m=l.length;l.forEach(function(v,w){return ue.resolve(v).then(function(S){l[w]=S,--m||u(l)},h)})})},resolve:function(l){return l instanceof ue?l:l&&typeof l.then=="function"?new ue(function(u,h){l.then(u,h)}):new ue(ss,!0,l)},reject:ea,race:function(){var l=ne.apply(null,arguments).map(ia);return new ue(function(u,h){l.map(function(m){return ue.resolve(m).then(u,h)})})},PSD:{get:function(){return ve},set:function(l){return ve=l}},totalEchoes:{get:function(){return ra}},newPSD:Nr,usePSD:bi,scheduler:{get:function(){return as},set:function(l){as=l}},rejectionMapper:{get:function(){return Vc},set:function(l){Vc=l}},follow:function(l,u){return new ue(function(h,m){return Nr(function(v,w){var S=ve;S.unhandleds=[],S.onunhandled=w,S.finalize=qe(function(){var C,O=this;C=function(){O.unhandleds.length===0?v():w(O.unhandleds[0])},Zl.push(function N(){C(),Zl.splice(Zl.indexOf(N),1)}),++wi,as(function(){--wi==0&&Gc()},[])},S.finalize),l()},u,h,m)})}}),vi&&(vi.allSettled&&b(ue,"allSettled",function(){var l=ne.apply(null,arguments).map(ia);return new ue(function(u){l.length===0&&u([]);var h=l.length,m=new Array(h);l.forEach(function(v,w){return ue.resolve(v).then(function(S){return m[w]={status:"fulfilled",value:S}},function(S){return m[w]={status:"rejected",reason:S}}).then(function(){return--h||u(m)})})})}),vi.any&&typeof AggregateError<"u"&&b(ue,"any",function(){var l=ne.apply(null,arguments).map(ia);return new ue(function(u,h){l.length===0&&h(new AggregateError([]));var m=l.length,v=new Array(m);l.forEach(function(w,S){return ue.resolve(w).then(function(C){return u(C)},function(C){v[S]=C,--m||h(new AggregateError(v))})})})}),vi.withResolvers&&(ue.withResolvers=vi.withResolvers));var Et={awaits:0,echoes:0,id:0},Tk=0,ta=[],na=0,ra=0,Nk=0;function Nr(l,u,h,m){var v=ve,w=Object.create(v);return w.parent=v,w.ref=0,w.global=!1,w.id=++Nk,Tr.env,w.env=Bc?{Promise:ue,PromiseProp:{value:ue,configurable:!0,writable:!0},all:ue.all,race:ue.race,allSettled:ue.allSettled,any:ue.any,resolve:ue.resolve,reject:ue.reject}:{},u&&c(w,u),++v.ref,w.finalize=function(){--this.parent.ref||this.parent.finalize()},m=bi(w,l,h,m),w.ref===0&&w.finalize(),m}function Ji(){return Et.id||(Et.id=++Tk),++Et.awaits,Et.echoes+=hm,Et.id}function Pr(){return!!Et.awaits&&(--Et.awaits==0&&(Et.id=0),Et.echoes=Et.awaits*hm,!0)}function ia(l){return Et.echoes&&l&&l.constructor===vi?(Ji(),l.then(function(u){return Pr(),u},function(u){return Pr(),ft(u)})):l}function Pk(){var l=ta[ta.length-1];ta.pop(),Dr(l,!1)}function Dr(l,u){var h,m=ve;(u?!Et.echoes||na++&&l===ve:!na||--na&&l===ve)||queueMicrotask(u?(function(v){++ra,Et.echoes&&--Et.echoes!=0||(Et.echoes=Et.awaits=Et.id=0),ta.push(ve),Dr(v,!0)}).bind(null,l):Pk),l!==ve&&(ve=l,m===Tr&&(Tr.env=ym()),Bc&&(h=Tr.env.Promise,u=l.env,(m.global||l.global)&&(Object.defineProperty(o,"Promise",u.PromiseProp),h.all=u.all,h.race=u.race,h.resolve=u.resolve,h.reject=u.reject,u.allSettled&&(h.allSettled=u.allSettled),u.any&&(h.any=u.any))))}function ym(){var l=o.Promise;return Bc?{Promise:l,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:l.all,race:l.race,allSettled:l.allSettled,any:l.any,resolve:l.resolve,reject:l.reject}:{}}function bi(l,u,h,m,v){var w=ve;try{return Dr(l,!0),u(h,m,v)}finally{Dr(w,!1)}}function vm(l,u,h,m){return typeof l!="function"?l:function(){var v=ve;h&&Ji(),Dr(u,!0);try{return l.apply(this,arguments)}finally{Dr(v,!1),m&&queueMicrotask(Pr)}}}function Yc(l){Promise===vi&&Et.echoes===0?na===0?l():enqueueNativeMicroTask(l):setTimeout(l,0)}(""+kn).indexOf("[native code]")===-1&&(Ji=Pr=we);var ft=ue.reject,ki=String.fromCharCode(65535),ir="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",gm="String expected.",Xi=[],oa="__dbnames",Qc="readonly",Jc="readwrite";function _i(l,u){return l?u?function(){return l.apply(this,arguments)&&u.apply(this,arguments)}:l:u}var wm={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function sa(l){return typeof l!="string"||/\./.test(l)?function(u){return u}:function(u){return u[l]===void 0&&l in u&&delete(u=ke(u))[l],u}}function bm(){throw se.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Me(l,u){try{var h=km(l),m=km(u);if(h!==m)return h==="Array"?1:m==="Array"?-1:h==="binary"?1:m==="binary"?-1:h==="string"?1:m==="string"?-1:h==="Date"?1:m!=="Date"?NaN:-1;switch(h){case"number":case"Date":case"string":return u<l?1:l<u?-1:0;case"binary":return function(v,w){for(var S=v.length,C=w.length,O=S<C?S:C,N=0;N<O;++N)if(v[N]!==w[N])return v[N]<w[N]?-1:1;return S===C?0:S<C?-1:1}(_m(l),_m(u));case"Array":return function(v,w){for(var S=v.length,C=w.length,O=S<C?S:C,N=0;N<O;++N){var A=Me(v[N],w[N]);if(A!==0)return A}return S===C?0:S<C?-1:1}(l,u)}}catch{}return NaN}function km(l){var u=typeof l;return u!="object"?u:ArrayBuffer.isView(l)?"binary":(l=Ee(l),l==="ArrayBuffer"?"binary":l)}function _m(l){return l instanceof Uint8Array?l:ArrayBuffer.isView(l)?new Uint8Array(l.buffer,l.byteOffset,l.byteLength):new Uint8Array(l)}function la(l,u,h){var m=l.schema.yProps;return m?(u&&0<h.numFailures&&(u=u.filter(function(v,w){return!h.failures[w]})),Promise.all(m.map(function(v){return v=v.updatesTable,u?l.db.table(v).where("k").anyOf(u).delete():l.db.table(v).clear()})).then(function(){return h})):h}var xm=(Ze.prototype._trans=function(l,u,h){var m=this._tx||ve.trans,v=this.name,w=Kn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(l==="readonly"?"read":"write"," ").concat(this.name));function S(N,A,I){if(!I.schema[v])throw new se.NotFound("Table "+v+" not part of transaction");return u(I.idbtrans,I)}var C=Yi();try{var O=m&&m.db._novip===this.db._novip?m===ve.trans?m._promise(l,S,h):Nr(function(){return m._promise(l,S,h)},{trans:m,transless:ve.transless||ve}):function N(A,I,U,j){if(A.idbdb&&(A._state.openComplete||ve.letThrough||A._vip)){var P=A._createTransaction(I,U,A._dbSchema);try{P.create(),A._state.PR1398_maxLoop=3}catch(L){return L.name===Te.InvalidState&&A.isOpen()&&0<--A._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),A.close({disableAutoOpen:!1}),A.open().then(function(){return N(A,I,U,j)})):ft(L)}return P._promise(I,function(L,R){return Nr(function(){return ve.trans=P,j(L,R,P)})}).then(function(L){if(I==="readwrite")try{P.idbtrans.commit()}catch{}return I==="readonly"?L:P._completion.then(function(){return L})})}if(A._state.openComplete)return ft(new se.DatabaseClosed(A._state.dbOpenError));if(!A._state.isBeingOpened){if(!A._state.autoOpen)return ft(new se.DatabaseClosed);A.open().catch(we)}return A._state.dbReadyPromise.then(function(){return N(A,I,U,j)})}(this.db,l,[this.name],S);return w&&(O._consoleTask=w,O=O.catch(function(N){return console.trace(N),ft(N)})),O}finally{C&&Qi()}},Ze.prototype.get=function(l,u){var h=this;return l&&l.constructor===Object?this.where(l).first(u):l==null?ft(new se.Type("Invalid argument to Table.get()")):this._trans("readonly",function(m){return h.core.get({trans:m,key:l}).then(function(v){return h.hook.reading.fire(v)})}).then(u)},Ze.prototype.where=function(l){if(typeof l=="string")return new this.db.WhereClause(this,l);if(a(l))return new this.db.WhereClause(this,"[".concat(l.join("+"),"]"));var u=s(l);if(u.length===1)return this.where(u[0]).equals(l[u[0]]);var h=this.schema.indexes.concat(this.schema.primKey).filter(function(C){if(C.compound&&u.every(function(N){return 0<=C.keyPath.indexOf(N)})){for(var O=0;O<u.length;++O)if(u.indexOf(C.keyPath[O])===-1)return!1;return!0}return!1}).sort(function(C,O){return C.keyPath.length-O.keyPath.length})[0];if(h&&this.db._maxKey!==ki){var w=h.keyPath.slice(0,u.length);return this.where(w).equals(w.map(function(O){return l[O]}))}!h&&Kn&&console.warn("The query ".concat(JSON.stringify(l)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(u.join("+"),"]"));var m=this.schema.idxByName;function v(C,O){return Me(C,O)===0}var S=u.reduce(function(I,O){var N=I[0],A=I[1],I=m[O],U=l[O];return[N||I,N||!I?_i(A,I&&I.multi?function(j){return j=K(j,O),a(j)&&j.some(function(P){return v(U,P)})}:function(j){return v(U,K(j,O))}):A]},[null,null]),w=S[0],S=S[1];return w?this.where(w.name).equals(l[w.keyPath]).filter(S):h?this.filter(S):this.where(u).equals("")},Ze.prototype.filter=function(l){return this.toCollection().and(l)},Ze.prototype.count=function(l){return this.toCollection().count(l)},Ze.prototype.offset=function(l){return this.toCollection().offset(l)},Ze.prototype.limit=function(l){return this.toCollection().limit(l)},Ze.prototype.each=function(l){return this.toCollection().each(l)},Ze.prototype.toArray=function(l){return this.toCollection().toArray(l)},Ze.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Ze.prototype.orderBy=function(l){return new this.db.Collection(new this.db.WhereClause(this,a(l)?"[".concat(l.join("+"),"]"):l))},Ze.prototype.reverse=function(){return this.toCollection().reverse()},Ze.prototype.mapToClass=function(l){var u,h=this.db,m=this.name;function v(){return u!==null&&u.apply(this,arguments)||this}(this.schema.mappedClass=l).prototype instanceof bm&&(function(O,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function A(){this.constructor=O}n(O,N),O.prototype=N===null?Object.create(N):(A.prototype=N.prototype,new A)}(v,u=l),Object.defineProperty(v.prototype,"db",{get:function(){return h},enumerable:!1,configurable:!0}),v.prototype.table=function(){return m},l=v);for(var w=new Set,S=l.prototype;S;S=d(S))Object.getOwnPropertyNames(S).forEach(function(O){return w.add(O)});function C(O){if(!O)return O;var N,A=Object.create(l.prototype);for(N in O)if(!w.has(N))try{A[N]=O[N]}catch{}return A}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=C,this.hook("reading",C),l},Ze.prototype.defineClass=function(){return this.mapToClass(function(l){c(this,l)})},Ze.prototype.add=function(l,u){var h=this,m=this.schema.primKey,v=m.auto,w=m.keyPath,S=l;return w&&v&&(S=sa(w)(l)),this._trans("readwrite",function(C){return h.core.mutate({trans:C,type:"add",keys:u!=null?[u]:null,values:[S]})}).then(function(C){return C.numFailures?ue.reject(C.failures[0]):C.lastResult}).then(function(C){if(w)try{q(l,w,C)}catch{}return C})},Ze.prototype.update=function(l,u){return typeof l!="object"||a(l)?this.where(":id").equals(l).modify(u):(l=K(l,this.schema.primKey.keyPath),l===void 0?ft(new se.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(l).modify(u))},Ze.prototype.put=function(l,u){var h=this,m=this.schema.primKey,v=m.auto,w=m.keyPath,S=l;return w&&v&&(S=sa(w)(l)),this._trans("readwrite",function(C){return h.core.mutate({trans:C,type:"put",values:[S],keys:u!=null?[u]:null})}).then(function(C){return C.numFailures?ue.reject(C.failures[0]):C.lastResult}).then(function(C){if(w)try{q(l,w,C)}catch{}return C})},Ze.prototype.delete=function(l){var u=this;return this._trans("readwrite",function(h){return u.core.mutate({trans:h,type:"delete",keys:[l]}).then(function(m){return la(u,[l],m)}).then(function(m){return m.numFailures?ue.reject(m.failures[0]):void 0})})},Ze.prototype.clear=function(){var l=this;return this._trans("readwrite",function(u){return l.core.mutate({trans:u,type:"deleteRange",range:wm}).then(function(h){return la(l,null,h)})}).then(function(u){return u.numFailures?ue.reject(u.failures[0]):void 0})},Ze.prototype.bulkGet=function(l){var u=this;return this._trans("readonly",function(h){return u.core.getMany({keys:l,trans:h}).then(function(m){return m.map(function(v){return u.hook.reading.fire(v)})})})},Ze.prototype.bulkAdd=function(l,u,h){var m=this,v=Array.isArray(u)?u:void 0,w=(h=h||(v?void 0:u))?h.allKeys:void 0;return this._trans("readwrite",function(S){var N=m.schema.primKey,C=N.auto,N=N.keyPath;if(N&&v)throw new se.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(v&&v.length!==l.length)throw new se.InvalidArgument("Arguments objects and keys must have the same length");var O=l.length,N=N&&C?l.map(sa(N)):l;return m.core.mutate({trans:S,type:"add",keys:v,values:N,wantResults:w}).then(function(P){var I=P.numFailures,U=P.results,j=P.lastResult,P=P.failures;if(I===0)return w?U:j;throw new $e("".concat(m.name,".bulkAdd(): ").concat(I," of ").concat(O," operations failed"),P)})})},Ze.prototype.bulkPut=function(l,u,h){var m=this,v=Array.isArray(u)?u:void 0,w=(h=h||(v?void 0:u))?h.allKeys:void 0;return this._trans("readwrite",function(S){var N=m.schema.primKey,C=N.auto,N=N.keyPath;if(N&&v)throw new se.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(v&&v.length!==l.length)throw new se.InvalidArgument("Arguments objects and keys must have the same length");var O=l.length,N=N&&C?l.map(sa(N)):l;return m.core.mutate({trans:S,type:"put",keys:v,values:N,wantResults:w}).then(function(P){var I=P.numFailures,U=P.results,j=P.lastResult,P=P.failures;if(I===0)return w?U:j;throw new $e("".concat(m.name,".bulkPut(): ").concat(I," of ").concat(O," operations failed"),P)})})},Ze.prototype.bulkUpdate=function(l){var u=this,h=this.core,m=l.map(function(S){return S.key}),v=l.map(function(S){return S.changes}),w=[];return this._trans("readwrite",function(S){return h.getMany({trans:S,keys:m,cache:"clone"}).then(function(C){var O=[],N=[];l.forEach(function(I,U){var j=I.key,P=I.changes,L=C[U];if(L){for(var R=0,z=Object.keys(P);R<z.length;R++){var F=z[R],B=P[F];if(F===u.schema.primKey.keyPath){if(Me(B,j)!==0)throw new se.Constraint("Cannot update primary key in bulkUpdate()")}else q(L,F,B)}w.push(U),O.push(j),N.push(L)}});var A=O.length;return h.mutate({trans:S,type:"put",keys:O,values:N,updates:{keys:m,changeSpecs:v}}).then(function(I){var U=I.numFailures,j=I.failures;if(U===0)return A;for(var P=0,L=Object.keys(j);P<L.length;P++){var R,z=L[P],F=w[Number(z)];F!=null&&(R=j[z],delete j[z],j[F]=R)}throw new $e("".concat(u.name,".bulkUpdate(): ").concat(U," of ").concat(A," operations failed"),j)})})})},Ze.prototype.bulkDelete=function(l){var u=this,h=l.length;return this._trans("readwrite",function(m){return u.core.mutate({trans:m,type:"delete",keys:l}).then(function(v){return la(u,l,v)})}).then(function(S){var v=S.numFailures,w=S.lastResult,S=S.failures;if(v===0)return w;throw new $e("".concat(u.name,".bulkDelete(): ").concat(v," of ").concat(h," operations failed"),S)})},Ze);function Ze(){}function cs(l){function u(S,C){if(C){for(var O=arguments.length,N=new Array(O-1);--O;)N[O-1]=arguments[O];return h[S].subscribe.apply(null,N),l}if(typeof S=="string")return h[S]}var h={};u.addEventType=w;for(var m=1,v=arguments.length;m<v;++m)w(arguments[m]);return u;function w(S,C,O){if(typeof S!="object"){var N;C=C||Ik;var A={subscribers:[],fire:O=O||we,subscribe:function(I){A.subscribers.indexOf(I)===-1&&(A.subscribers.push(I),A.fire=C(A.fire,I))},unsubscribe:function(I){A.subscribers=A.subscribers.filter(function(U){return U!==I}),A.fire=A.subscribers.reduce(C,O)}};return h[S]=u[S]=A}s(N=S).forEach(function(I){var U=N[I];if(a(U))w(I,N[I][0],N[I][1]);else{if(U!=="asap")throw new se.InvalidArgument("Invalid event config");var j=w(I,Le,function(){for(var P=arguments.length,L=new Array(P);P--;)L[P]=arguments[P];j.subscribers.forEach(function(R){W(function(){R.apply(null,L)})})})}})}}function ds(l,u){return x(u).from({prototype:l}),u}function Zi(l,u){return!(l.filter||l.algorithm||l.or)&&(u?l.justLimit:!l.replayFilter)}function Xc(l,u){l.filter=_i(l.filter,u)}function Zc(l,u,h){var m=l.replayFilter;l.replayFilter=m?function(){return _i(m(),u())}:u,l.justLimit=h&&!m}function aa(l,u){if(l.isPrimKey)return u.primaryKey;var h=u.getIndexByKeyPath(l.index);if(!h)throw new se.Schema("KeyPath "+l.index+" on object store "+u.name+" is not indexed");return h}function Sm(l,u,h){var m=aa(l,u.schema);return u.openCursor({trans:h,values:!l.keysOnly,reverse:l.dir==="prev",unique:!!l.unique,query:{index:m,range:l.range}})}function ua(l,u,h,m){var v=l.replayFilter?_i(l.filter,l.replayFilter()):l.filter;if(l.or){var w={},S=function(C,O,N){var A,I;v&&!v(O,N,function(U){return O.stop(U)},function(U){return O.fail(U)})||((I=""+(A=O.primaryKey))=="[object ArrayBuffer]"&&(I=""+new Uint8Array(A)),p(w,I)||(w[I]=!0,u(C,O,N)))};return Promise.all([l.or._iterate(S,h),Em(Sm(l,m,h),l.algorithm,S,!l.keysOnly&&l.valueMapper)])}return Em(Sm(l,m,h),_i(l.algorithm,v),u,!l.keysOnly&&l.valueMapper)}function Em(l,u,h,m){var v=rt(m?function(w,S,C){return h(m(w),S,C)}:h);return l.then(function(w){if(w)return w.start(function(){var S=function(){return w.continue()};u&&!u(w,function(C){return S=C},function(C){w.stop(C),S=we},function(C){w.fail(C),S=we})||v(w.value,w,function(C){return S=C}),S()})})}var fs=(Cm.prototype.execute=function(l){var u=this["@@propmod"];if(u.add!==void 0){var h=u.add;if(a(h))return i(i([],a(l)?l:[],!0),h,!0).sort();if(typeof h=="number")return(Number(l)||0)+h;if(typeof h=="bigint")try{return BigInt(l)+h}catch{return BigInt(0)+h}throw new TypeError("Invalid term ".concat(h))}if(u.remove!==void 0){var m=u.remove;if(a(m))return a(l)?l.filter(function(v){return!m.includes(v)}).sort():[];if(typeof m=="number")return Number(l)-m;if(typeof m=="bigint")try{return BigInt(l)-m}catch{return BigInt(0)-m}throw new TypeError("Invalid subtrahend ".concat(m))}return h=(h=u.replacePrefix)===null||h===void 0?void 0:h[0],h&&typeof l=="string"&&l.startsWith(h)?u.replacePrefix[1]+l.substring(h.length):l},Cm);function Cm(l){this["@@propmod"]=l}var Dk=(Ke.prototype._read=function(l,u){var h=this._ctx;return h.error?h.table._trans(null,ft.bind(null,h.error)):h.table._trans("readonly",l).then(u)},Ke.prototype._write=function(l){var u=this._ctx;return u.error?u.table._trans(null,ft.bind(null,u.error)):u.table._trans("readwrite",l,"locked")},Ke.prototype._addAlgorithm=function(l){var u=this._ctx;u.algorithm=_i(u.algorithm,l)},Ke.prototype._iterate=function(l,u){return ua(this._ctx,l,u,this._ctx.table.core)},Ke.prototype.clone=function(l){var u=Object.create(this.constructor.prototype),h=Object.create(this._ctx);return l&&c(h,l),u._ctx=h,u},Ke.prototype.raw=function(){return this._ctx.valueMapper=null,this},Ke.prototype.each=function(l){var u=this._ctx;return this._read(function(h){return ua(u,l,h,u.table.core)})},Ke.prototype.count=function(l){var u=this;return this._read(function(h){var m=u._ctx,v=m.table.core;if(Zi(m,!0))return v.count({trans:h,query:{index:aa(m,v.schema),range:m.range}}).then(function(S){return Math.min(S,m.limit)});var w=0;return ua(m,function(){return++w,!1},h,v).then(function(){return w})}).then(l)},Ke.prototype.sortBy=function(l,u){var h=l.split(".").reverse(),m=h[0],v=h.length-1;function w(O,N){return N?w(O[h[N]],N-1):O[m]}var S=this._ctx.dir==="next"?1:-1;function C(O,N){return Me(w(O,v),w(N,v))*S}return this.toArray(function(O){return O.sort(C)}).then(u)},Ke.prototype.toArray=function(l){var u=this;return this._read(function(h){var m=u._ctx;if(m.dir==="next"&&Zi(m,!0)&&0<m.limit){var v=m.valueMapper,w=aa(m,m.table.core.schema);return m.table.core.query({trans:h,limit:m.limit,values:!0,query:{index:w,range:m.range}}).then(function(C){return C=C.result,v?C.map(v):C})}var S=[];return ua(m,function(C){return S.push(C)},h,m.table.core).then(function(){return S})},l)},Ke.prototype.offset=function(l){var u=this._ctx;return l<=0||(u.offset+=l,Zi(u)?Zc(u,function(){var h=l;return function(m,v){return h===0||(h===1?--h:v(function(){m.advance(h),h=0}),!1)}}):Zc(u,function(){var h=l;return function(){return--h<0}})),this},Ke.prototype.limit=function(l){return this._ctx.limit=Math.min(this._ctx.limit,l),Zc(this._ctx,function(){var u=l;return function(h,m,v){return--u<=0&&m(v),0<=u}},!0),this},Ke.prototype.until=function(l,u){return Xc(this._ctx,function(h,m,v){return!l(h.value)||(m(v),u)}),this},Ke.prototype.first=function(l){return this.limit(1).toArray(function(u){return u[0]}).then(l)},Ke.prototype.last=function(l){return this.reverse().first(l)},Ke.prototype.filter=function(l){var u;return Xc(this._ctx,function(h){return l(h.value)}),(u=this._ctx).isMatch=_i(u.isMatch,l),this},Ke.prototype.and=function(l){return this.filter(l)},Ke.prototype.or=function(l){return new this.db.WhereClause(this._ctx.table,l,this)},Ke.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Ke.prototype.desc=function(){return this.reverse()},Ke.prototype.eachKey=function(l){var u=this._ctx;return u.keysOnly=!u.isMatch,this.each(function(h,m){l(m.key,m)})},Ke.prototype.eachUniqueKey=function(l){return this._ctx.unique="unique",this.eachKey(l)},Ke.prototype.eachPrimaryKey=function(l){var u=this._ctx;return u.keysOnly=!u.isMatch,this.each(function(h,m){l(m.primaryKey,m)})},Ke.prototype.keys=function(l){var u=this._ctx;u.keysOnly=!u.isMatch;var h=[];return this.each(function(m,v){h.push(v.key)}).then(function(){return h}).then(l)},Ke.prototype.primaryKeys=function(l){var u=this._ctx;if(u.dir==="next"&&Zi(u,!0)&&0<u.limit)return this._read(function(m){var v=aa(u,u.table.core.schema);return u.table.core.query({trans:m,values:!1,limit:u.limit,query:{index:v,range:u.range}})}).then(function(m){return m.result}).then(l);u.keysOnly=!u.isMatch;var h=[];return this.each(function(m,v){h.push(v.primaryKey)}).then(function(){return h}).then(l)},Ke.prototype.uniqueKeys=function(l){return this._ctx.unique="unique",this.keys(l)},Ke.prototype.firstKey=function(l){return this.limit(1).keys(function(u){return u[0]}).then(l)},Ke.prototype.lastKey=function(l){return this.reverse().firstKey(l)},Ke.prototype.distinct=function(){var l=this._ctx,l=l.index&&l.table.schema.idxByName[l.index];if(!l||!l.multi)return this;var u={};return Xc(this._ctx,function(v){var m=v.primaryKey.toString(),v=p(u,m);return u[m]=!0,!v}),this},Ke.prototype.modify=function(l){var u=this,h=this._ctx;return this._write(function(m){var v,w,S;S=typeof l=="function"?l:(v=s(l),w=v.length,function(z){for(var F=!1,B=0;B<w;++B){var V=v[B],G=l[V],te=K(z,V);G instanceof fs?(q(z,V,G.execute(te)),F=!0):te!==G&&(q(z,V,G),F=!0)}return F});var C=h.table.core,I=C.schema.primaryKey,O=I.outbound,N=I.extractKey,A=200,I=u.db._options.modifyChunkSize;I&&(A=typeof I=="object"?I[C.name]||I["*"]||200:I);function U(z,V){var B=V.failures,V=V.numFailures;P+=z-V;for(var G=0,te=s(B);G<te.length;G++){var X=te[G];j.push(B[X])}}var j=[],P=0,L=[],R=l===Im;return u.clone().primaryKeys().then(function(z){function F(V){var G=Math.min(A,z.length-V),te=z.slice(V,V+G);return(R?Promise.resolve([]):C.getMany({trans:m,keys:te,cache:"immutable"})).then(function(X){var Z=[],oe=[],re=O?[]:null,ce=R?te:[];if(!R)for(var Oe=0;Oe<G;++Oe){var Ue=X[Oe],Ce={value:ke(Ue),primKey:z[V+Oe]};S.call(Ce,Ce.value,Ce)!==!1&&(Ce.value==null?ce.push(z[V+Oe]):O||Me(N(Ue),N(Ce.value))===0?(oe.push(Ce.value),O&&re.push(z[V+Oe])):(ce.push(z[V+Oe]),Z.push(Ce.value)))}return Promise.resolve(0<Z.length&&C.mutate({trans:m,type:"add",values:Z}).then(function(ct){for(var xe in ct.failures)ce.splice(parseInt(xe),1);U(Z.length,ct)})).then(function(){return(0<oe.length||B&&typeof l=="object")&&C.mutate({trans:m,type:"put",keys:re,values:oe,criteria:B,changeSpec:typeof l!="function"&&l,isAdditionalChunk:0<V}).then(function(ct){return U(oe.length,ct)})}).then(function(){return(0<ce.length||B&&R)&&C.mutate({trans:m,type:"delete",keys:ce,criteria:B,isAdditionalChunk:0<V}).then(function(ct){return la(h.table,ce,ct)}).then(function(ct){return U(ce.length,ct)})}).then(function(){return z.length>V+G&&F(V+A)})})}var B=Zi(h)&&h.limit===1/0&&(typeof l!="function"||R)&&{index:h.index,range:h.range};return F(0).then(function(){if(0<j.length)throw new Qe("Error modifying one or more objects",j,P,L);return z.length})})})},Ke.prototype.delete=function(){var l=this._ctx,u=l.range;return!Zi(l)||l.table.schema.yProps||!l.isPrimKey&&u.type!==3?this.modify(Im):this._write(function(h){var m=l.table.core.schema.primaryKey,v=u;return l.table.core.count({trans:h,query:{index:m,range:v}}).then(function(w){return l.table.core.mutate({trans:h,type:"deleteRange",range:v}).then(function(O){var C=O.failures,O=O.numFailures;if(O)throw new Qe("Could not delete some values",Object.keys(C).map(function(N){return C[N]}),w-O);return w-O})})})},Ke);function Ke(){}var Im=function(l,u){return u.value=null};function Ak(l,u){return l<u?-1:l===u?0:1}function Rk(l,u){return u<l?-1:l===u?0:1}function cn(l,u,h){return l=l instanceof jm?new l.Collection(l):l,l._ctx.error=new(h||TypeError)(u),l}function eo(l){return new l.Collection(l,function(){return Om("")}).limit(0)}function ca(l,u,h,m){var v,w,S,C,O,N,A,I=h.length;if(!h.every(function(P){return typeof P=="string"}))return cn(l,gm);function U(P){v=P==="next"?function(R){return R.toUpperCase()}:function(R){return R.toLowerCase()},w=P==="next"?function(R){return R.toLowerCase()}:function(R){return R.toUpperCase()},S=P==="next"?Ak:Rk;var L=h.map(function(R){return{lower:w(R),upper:v(R)}}).sort(function(R,z){return S(R.lower,z.lower)});C=L.map(function(R){return R.upper}),O=L.map(function(R){return R.lower}),A=(N=P)==="next"?"":m}U("next"),l=new l.Collection(l,function(){return Ar(C[0],O[I-1]+m)}),l._ondirectionchange=function(P){U(P)};var j=0;return l._addAlgorithm(function(P,L,R){var z=P.key;if(typeof z!="string")return!1;var F=w(z);if(u(F,O,j))return!0;for(var B=null,V=j;V<I;++V){var G=function(te,X,Z,oe,re,ce){for(var Oe=Math.min(te.length,oe.length),Ue=-1,Ce=0;Ce<Oe;++Ce){var ct=X[Ce];if(ct!==oe[Ce])return re(te[Ce],Z[Ce])<0?te.substr(0,Ce)+Z[Ce]+Z.substr(Ce+1):re(te[Ce],oe[Ce])<0?te.substr(0,Ce)+oe[Ce]+Z.substr(Ce+1):0<=Ue?te.substr(0,Ue)+X[Ue]+Z.substr(Ue+1):null;re(te[Ce],ct)<0&&(Ue=Ce)}return Oe<oe.length&&ce==="next"?te+Z.substr(te.length):Oe<te.length&&ce==="prev"?te.substr(0,Z.length):Ue<0?null:te.substr(0,Ue)+oe[Ue]+Z.substr(Ue+1)}(z,F,C[V],O[V],S,N);G===null&&B===null?j=V+1:(B===null||0<S(B,G))&&(B=G)}return L(B!==null?function(){P.continue(B+A)}:R),!1}),l}function Ar(l,u,h,m){return{type:2,lower:l,upper:u,lowerOpen:h,upperOpen:m}}function Om(l){return{type:1,lower:l,upper:l}}var jm=(Object.defineProperty(Ct.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ct.prototype.between=function(l,u,h,m){h=h!==!1,m=m===!0;try{return 0<this._cmp(l,u)||this._cmp(l,u)===0&&(h||m)&&(!h||!m)?eo(this):new this.Collection(this,function(){return Ar(l,u,!h,!m)})}catch{return cn(this,ir)}},Ct.prototype.equals=function(l){return l==null?cn(this,ir):new this.Collection(this,function(){return Om(l)})},Ct.prototype.above=function(l){return l==null?cn(this,ir):new this.Collection(this,function(){return Ar(l,void 0,!0)})},Ct.prototype.aboveOrEqual=function(l){return l==null?cn(this,ir):new this.Collection(this,function(){return Ar(l,void 0,!1)})},Ct.prototype.below=function(l){return l==null?cn(this,ir):new this.Collection(this,function(){return Ar(void 0,l,!1,!0)})},Ct.prototype.belowOrEqual=function(l){return l==null?cn(this,ir):new this.Collection(this,function(){return Ar(void 0,l)})},Ct.prototype.startsWith=function(l){return typeof l!="string"?cn(this,gm):this.between(l,l+ki,!0,!0)},Ct.prototype.startsWithIgnoreCase=function(l){return l===""?this.startsWith(l):ca(this,function(u,h){return u.indexOf(h[0])===0},[l],ki)},Ct.prototype.equalsIgnoreCase=function(l){return ca(this,function(u,h){return u===h[0]},[l],"")},Ct.prototype.anyOfIgnoreCase=function(){var l=ne.apply(ee,arguments);return l.length===0?eo(this):ca(this,function(u,h){return h.indexOf(u)!==-1},l,"")},Ct.prototype.startsWithAnyOfIgnoreCase=function(){var l=ne.apply(ee,arguments);return l.length===0?eo(this):ca(this,function(u,h){return h.some(function(m){return u.indexOf(m)===0})},l,ki)},Ct.prototype.anyOf=function(){var l=this,u=ne.apply(ee,arguments),h=this._cmp;try{u.sort(h)}catch{return cn(this,ir)}if(u.length===0)return eo(this);var m=new this.Collection(this,function(){return Ar(u[0],u[u.length-1])});m._ondirectionchange=function(w){h=w==="next"?l._ascending:l._descending,u.sort(h)};var v=0;return m._addAlgorithm(function(w,S,C){for(var O=w.key;0<h(O,u[v]);)if(++v===u.length)return S(C),!1;return h(O,u[v])===0||(S(function(){w.continue(u[v])}),!1)}),m},Ct.prototype.notEqual=function(l){return this.inAnyRange([[-1/0,l],[l,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ct.prototype.noneOf=function(){var l=ne.apply(ee,arguments);if(l.length===0)return new this.Collection(this);try{l.sort(this._ascending)}catch{return cn(this,ir)}var u=l.reduce(function(h,m){return h?h.concat([[h[h.length-1][1],m]]):[[-1/0,m]]},null);return u.push([l[l.length-1],this.db._maxKey]),this.inAnyRange(u,{includeLowers:!1,includeUppers:!1})},Ct.prototype.inAnyRange=function(z,u){var h=this,m=this._cmp,v=this._ascending,w=this._descending,S=this._min,C=this._max;if(z.length===0)return eo(this);if(!z.every(function(F){return F[0]!==void 0&&F[1]!==void 0&&v(F[0],F[1])<=0}))return cn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",se.InvalidArgument);var O=!u||u.includeLowers!==!1,N=u&&u.includeUppers===!0,A,I=v;function U(F,B){return I(F[0],B[0])}try{(A=z.reduce(function(F,B){for(var V=0,G=F.length;V<G;++V){var te=F[V];if(m(B[0],te[1])<0&&0<m(B[1],te[0])){te[0]=S(te[0],B[0]),te[1]=C(te[1],B[1]);break}}return V===G&&F.push(B),F},[])).sort(U)}catch{return cn(this,ir)}var j=0,P=N?function(F){return 0<v(F,A[j][1])}:function(F){return 0<=v(F,A[j][1])},L=O?function(F){return 0<w(F,A[j][0])}:function(F){return 0<=w(F,A[j][0])},R=P,z=new this.Collection(this,function(){return Ar(A[0][0],A[A.length-1][1],!O,!N)});return z._ondirectionchange=function(F){I=F==="next"?(R=P,v):(R=L,w),A.sort(U)},z._addAlgorithm(function(F,B,V){for(var G,te=F.key;R(te);)if(++j===A.length)return B(V),!1;return!P(G=te)&&!L(G)||(h._cmp(te,A[j][1])===0||h._cmp(te,A[j][0])===0||B(function(){I===v?F.continue(A[j][0]):F.continue(A[j][1])}),!1)}),z},Ct.prototype.startsWithAnyOf=function(){var l=ne.apply(ee,arguments);return l.every(function(u){return typeof u=="string"})?l.length===0?eo(this):this.inAnyRange(l.map(function(u){return[u,u+ki]})):cn(this,"startsWithAnyOf() only works with strings")},Ct);function Ct(){}function Vn(l){return rt(function(u){return hs(u),l(u.target.error),!1})}function hs(l){l.stopPropagation&&l.stopPropagation(),l.preventDefault&&l.preventDefault()}var ps="storagemutated",ed="x-storagemutated-1",Rr=cs(null,ps),Lk=(Wn.prototype._lock=function(){return $(!ve.global),++this._reculock,this._reculock!==1||ve.global||(ve.lockOwnerFor=this),this},Wn.prototype._unlock=function(){if($(!ve.global),--this._reculock==0)for(ve.global||(ve.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var l=this._blockedFuncs.shift();try{bi(l[1],l[0])}catch{}}return this},Wn.prototype._locked=function(){return this._reculock&&ve.lockOwnerFor!==this},Wn.prototype.create=function(l){var u=this;if(!this.mode)return this;var h=this.db.idbdb,m=this.db._state.dbOpenError;if($(!this.idbtrans),!l&&!h)switch(m&&m.name){case"DatabaseClosedError":throw new se.DatabaseClosed(m);case"MissingAPIError":throw new se.MissingAPI(m.message,m);default:throw new se.OpenFailed(m)}if(!this.active)throw new se.TransactionInactive;return $(this._completion._state===null),(l=this.idbtrans=l||(this.db.core||h).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=rt(function(v){hs(v),u._reject(l.error)}),l.onabort=rt(function(v){hs(v),u.active&&u._reject(new se.Abort(l.error)),u.active=!1,u.on("abort").fire(v)}),l.oncomplete=rt(function(){u.active=!1,u._resolve(),"mutatedParts"in l&&Rr.storagemutated.fire(l.mutatedParts)}),this},Wn.prototype._promise=function(l,u,h){var m=this;if(l==="readwrite"&&this.mode!=="readwrite")return ft(new se.ReadOnly("Transaction is readonly"));if(!this.active)return ft(new se.TransactionInactive);if(this._locked())return new ue(function(w,S){m._blockedFuncs.push([function(){m._promise(l,u,h).then(w,S)},ve])});if(h)return Nr(function(){var w=new ue(function(S,C){m._lock();var O=u(S,C,m);O&&O.then&&O.then(S,C)});return w.finally(function(){return m._unlock()}),w._lib=!0,w});var v=new ue(function(w,S){var C=u(w,S,m);C&&C.then&&C.then(w,S)});return v._lib=!0,v},Wn.prototype._root=function(){return this.parent?this.parent._root():this},Wn.prototype.waitFor=function(l){var u,h=this._root(),m=ue.resolve(l);h._waitingFor?h._waitingFor=h._waitingFor.then(function(){return m}):(h._waitingFor=m,h._waitingQueue=[],u=h.idbtrans.objectStore(h.storeNames[0]),function w(){for(++h._spinCount;h._waitingQueue.length;)h._waitingQueue.shift()();h._waitingFor&&(u.get(-1/0).onsuccess=w)}());var v=h._waitingFor;return new ue(function(w,S){m.then(function(C){return h._waitingQueue.push(rt(w.bind(null,C)))},function(C){return h._waitingQueue.push(rt(S.bind(null,C)))}).finally(function(){h._waitingFor===v&&(h._waitingFor=null)})})},Wn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new se.Abort))},Wn.prototype.table=function(l){var u=this._memoizedTables||(this._memoizedTables={});if(p(u,l))return u[l];var h=this.schema[l];if(!h)throw new se.NotFound("Table "+l+" not part of transaction");return h=new this.db.Table(l,h,this),h.core=this.db.core.table(l),u[l]=h},Wn);function Wn(){}function td(l,u,h,m,v,w,S,C){return{name:l,keyPath:u,unique:h,multi:m,auto:v,compound:w,src:(h&&!S?"&":"")+(m?"*":"")+(v?"++":"")+Tm(u),type:C}}function Tm(l){return typeof l=="string"?l:l?"["+[].join.call(l,"+")+"]":""}function nd(l,u,h){return{name:l,primKey:u,indexes:h,mappedClass:null,idxByName:(m=function(v){return[v.name,v]},h.reduce(function(v,w,S){return S=m(w,S),S&&(v[S[0]]=S[1]),v},{}))};var m}var ms=function(l){try{return l.only([[]]),ms=function(){return[[]]},[[]]}catch{return ms=function(){return ki},ki}};function rd(l){return l==null?function(){}:typeof l=="string"?(u=l).split(".").length===1?function(h){return h[u]}:function(h){return K(h,u)}:function(h){return K(h,l)};var u}function Nm(l){return[].slice.call(l)}var Mk=0;function ys(l){return l==null?":id":typeof l=="string"?l:"[".concat(l.join("+"),"]")}function Uk(l,u,O){function m(R){if(R.type===3)return null;if(R.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var j=R.lower,P=R.upper,L=R.lowerOpen,R=R.upperOpen;return j===void 0?P===void 0?null:u.upperBound(P,!!R):P===void 0?u.lowerBound(j,!!L):u.bound(j,P,!!L,!!R)}function v(U){var j,P=U.name;return{name:P,schema:U,mutate:function(L){var R=L.trans,z=L.type,F=L.keys,B=L.values,V=L.range;return new Promise(function(G,te){G=rt(G);var X=R.objectStore(P),Z=X.keyPath==null,oe=z==="put"||z==="add";if(!oe&&z!=="delete"&&z!=="deleteRange")throw new Error("Invalid operation type: "+z);var re,ce=(F||B||{length:1}).length;if(F&&B&&F.length!==B.length)throw new Error("Given keys array must have same length as given values array.");if(ce===0)return G({numFailures:0,failures:{},results:[],lastResult:void 0});function Oe(Gt){++ct,hs(Gt)}var Ue=[],Ce=[],ct=0;if(z==="deleteRange"){if(V.type===4)return G({numFailures:ct,failures:Ce,results:[],lastResult:void 0});V.type===3?Ue.push(re=X.clear()):Ue.push(re=X.delete(m(V)))}else{var Z=oe?Z?[B,F]:[B,null]:[F,null],xe=Z[0],$t=Z[1];if(oe)for(var zt=0;zt<ce;++zt)Ue.push(re=$t&&$t[zt]!==void 0?X[z](xe[zt],$t[zt]):X[z](xe[zt])),re.onerror=Oe;else for(zt=0;zt<ce;++zt)Ue.push(re=X[z](xe[zt])),re.onerror=Oe}function _a(Gt){Gt=Gt.target.result,Ue.forEach(function(Ei,kd){return Ei.error!=null&&(Ce[kd]=Ei.error)}),G({numFailures:ct,failures:Ce,results:z==="delete"?F:Ue.map(function(Ei){return Ei.result}),lastResult:Gt})}re.onerror=function(Gt){Oe(Gt),_a(Gt)},re.onsuccess=_a})},getMany:function(L){var R=L.trans,z=L.keys;return new Promise(function(F,B){F=rt(F);for(var V,G=R.objectStore(P),te=z.length,X=new Array(te),Z=0,oe=0,re=function(Ue){Ue=Ue.target,X[Ue._pos]=Ue.result,++oe===Z&&F(X)},ce=Vn(B),Oe=0;Oe<te;++Oe)z[Oe]!=null&&((V=G.get(z[Oe]))._pos=Oe,V.onsuccess=re,V.onerror=ce,++Z);Z===0&&F(X)})},get:function(L){var R=L.trans,z=L.key;return new Promise(function(F,B){F=rt(F);var V=R.objectStore(P).get(z);V.onsuccess=function(G){return F(G.target.result)},V.onerror=Vn(B)})},query:(j=N,function(L){return new Promise(function(R,z){R=rt(R);var F,B,V,Z=L.trans,G=L.values,te=L.limit,re=L.query,X=te===1/0?void 0:te,oe=re.index,re=re.range,Z=Z.objectStore(P),oe=oe.isPrimaryKey?Z:Z.index(oe.name),re=m(re);if(te===0)return R({result:[]});j?((X=G?oe.getAll(re,X):oe.getAllKeys(re,X)).onsuccess=function(ce){return R({result:ce.target.result})},X.onerror=Vn(z)):(F=0,B=!G&&"openKeyCursor"in oe?oe.openKeyCursor(re):oe.openCursor(re),V=[],B.onsuccess=function(ce){var Oe=B.result;return Oe?(V.push(G?Oe.value:Oe.primaryKey),++F===te?R({result:V}):void Oe.continue()):R({result:V})},B.onerror=Vn(z))})}),openCursor:function(L){var R=L.trans,z=L.values,F=L.query,B=L.reverse,V=L.unique;return new Promise(function(G,te){G=rt(G);var oe=F.index,X=F.range,Z=R.objectStore(P),Z=oe.isPrimaryKey?Z:Z.index(oe.name),oe=B?V?"prevunique":"prev":V?"nextunique":"next",re=!z&&"openKeyCursor"in Z?Z.openKeyCursor(m(X),oe):Z.openCursor(m(X),oe);re.onerror=Vn(te),re.onsuccess=rt(function(ce){var Oe,Ue,Ce,ct,xe=re.result;xe?(xe.___id=++Mk,xe.done=!1,Oe=xe.continue.bind(xe),Ue=(Ue=xe.continuePrimaryKey)&&Ue.bind(xe),Ce=xe.advance.bind(xe),ct=function(){throw new Error("Cursor not stopped")},xe.trans=R,xe.stop=xe.continue=xe.continuePrimaryKey=xe.advance=function(){throw new Error("Cursor not started")},xe.fail=rt(te),xe.next=function(){var $t=this,zt=1;return this.start(function(){return zt--?$t.continue():$t.stop()}).then(function(){return $t})},xe.start=function($t){function zt(){if(re.result)try{$t()}catch(Gt){xe.fail(Gt)}else xe.done=!0,xe.start=function(){throw new Error("Cursor behind last entry")},xe.stop()}var _a=new Promise(function(Gt,Ei){Gt=rt(Gt),re.onerror=Vn(Ei),xe.fail=Ei,xe.stop=function(kd){xe.stop=xe.continue=xe.continuePrimaryKey=xe.advance=ct,Gt(kd)}});return re.onsuccess=rt(function(Gt){re.onsuccess=zt,zt()}),xe.continue=Oe,xe.continuePrimaryKey=Ue,xe.advance=Ce,zt(),_a},G(xe)):G(null)},te)})},count:function(L){var R=L.query,z=L.trans,F=R.index,B=R.range;return new Promise(function(V,G){var te=z.objectStore(P),X=F.isPrimaryKey?te:te.index(F.name),te=m(B),X=te?X.count(te):X.count();X.onsuccess=rt(function(Z){return V(Z.target.result)}),X.onerror=Vn(G)})}}}var w,S,C,A=(S=O,C=Nm((w=l).objectStoreNames),{schema:{name:w.name,tables:C.map(function(U){return S.objectStore(U)}).map(function(U){var j=U.keyPath,R=U.autoIncrement,P=a(j),L={},R={name:U.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:j==null,compound:P,keyPath:j,autoIncrement:R,unique:!0,extractKey:rd(j)},indexes:Nm(U.indexNames).map(function(z){return U.index(z)}).map(function(V){var F=V.name,B=V.unique,G=V.multiEntry,V=V.keyPath,G={name:F,compound:a(V),keyPath:V,unique:B,multiEntry:G,extractKey:rd(V)};return L[ys(V)]=G}),getIndexByKeyPath:function(z){return L[ys(z)]}};return L[":id"]=R.primaryKey,j!=null&&(L[ys(j)]=R.primaryKey),R})},hasGetAll:0<C.length&&"getAll"in S.objectStore(C[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),O=A.schema,N=A.hasGetAll,A=O.tables.map(v),I={};return A.forEach(function(U){return I[U.name]=U}),{stack:"dbcore",transaction:l.transaction.bind(l),table:function(U){if(!I[U])throw new Error("Table '".concat(U,"' not found"));return I[U]},MIN_KEY:-1/0,MAX_KEY:ms(u),schema:O}}function $k(l,u,h,m){var v=h.IDBKeyRange;return h.indexedDB,{dbcore:(m=Uk(u,v,m),l.dbcore.reduce(function(w,S){return S=S.create,r(r({},w),S(w))},m))}}function da(l,m){var h=m.db,m=$k(l._middlewares,h,l._deps,m);l.core=m.dbcore,l.tables.forEach(function(v){var w=v.name;l.core.schema.tables.some(function(S){return S.name===w})&&(v.core=l.core.table(w),l[w]instanceof l.Table&&(l[w].core=v.core))})}function fa(l,u,h,m){h.forEach(function(v){var w=m[v];u.forEach(function(S){var C=function O(N,A){return D(N,A)||(N=d(N))&&O(N,A)}(S,v);(!C||"value"in C&&C.value===void 0)&&(S===l.Transaction.prototype||S instanceof l.Transaction?b(S,v,{get:function(){return this.table(v)},set:function(O){g(this,v,{value:O,writable:!0,configurable:!0,enumerable:!0})}}):S[v]=new l.Table(v,w))})})}function id(l,u){u.forEach(function(h){for(var m in h)h[m]instanceof l.Table&&delete h[m]})}function zk(l,u){return l._cfg.version-u._cfg.version}function Fk(l,u,h,m){var v=l._dbSchema;h.objectStoreNames.contains("$meta")&&!v.$meta&&(v.$meta=nd("$meta",Dm("")[0],[]),l._storeNames.push("$meta"));var w=l._createTransaction("readwrite",l._storeNames,v);w.create(h),w._completion.catch(m);var S=w._reject.bind(w),C=ve.transless||ve;Nr(function(){return ve.trans=w,ve.transless=C,u!==0?(da(l,h),N=u,((O=w).storeNames.includes("$meta")?O.table("$meta").get("version").then(function(A){return A??N}):ue.resolve(N)).then(function(A){return U=A,j=w,P=h,L=[],A=(I=l)._versions,R=I._dbSchema=pa(0,I.idbdb,P),(A=A.filter(function(z){return z._cfg.version>=U})).length!==0?(A.forEach(function(z){L.push(function(){var F=R,B=z._cfg.dbschema;ma(I,F,P),ma(I,B,P),R=I._dbSchema=B;var V=od(F,B);V.add.forEach(function(oe){sd(P,oe[0],oe[1].primKey,oe[1].indexes)}),V.change.forEach(function(oe){if(oe.recreate)throw new se.Upgrade("Not yet support for changing primary key");var re=P.objectStore(oe.name);oe.add.forEach(function(ce){return ha(re,ce)}),oe.change.forEach(function(ce){re.deleteIndex(ce.name),ha(re,ce)}),oe.del.forEach(function(ce){return re.deleteIndex(ce)})});var G=z._cfg.contentUpgrade;if(G&&z._cfg.version>U){da(I,P),j._memoizedTables={};var te=H(B);V.del.forEach(function(oe){te[oe]=F[oe]}),id(I,[I.Transaction.prototype]),fa(I,[I.Transaction.prototype],s(te),te),j.schema=te;var X,Z=de(G);return Z&&Ji(),V=ue.follow(function(){var oe;(X=G(j))&&Z&&(oe=Pr.bind(null,null),X.then(oe,oe))}),X&&typeof X.then=="function"?ue.resolve(X):V.then(function(){return X})}}),L.push(function(F){var B,V,G=z._cfg.dbschema;B=G,V=F,[].slice.call(V.db.objectStoreNames).forEach(function(te){return B[te]==null&&V.db.deleteObjectStore(te)}),id(I,[I.Transaction.prototype]),fa(I,[I.Transaction.prototype],I._storeNames,I._dbSchema),j.schema=I._dbSchema}),L.push(function(F){I.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(I.idbdb.version/10)===z._cfg.version?(I.idbdb.deleteObjectStore("$meta"),delete I._dbSchema.$meta,I._storeNames=I._storeNames.filter(function(B){return B!=="$meta"})):F.objectStore("$meta").put(z._cfg.version,"version"))})}),function z(){return L.length?ue.resolve(L.shift()(j.idbtrans)).then(z):ue.resolve()}().then(function(){Pm(R,P)})):ue.resolve();var I,U,j,P,L,R}).catch(S)):(s(v).forEach(function(A){sd(h,A,v[A].primKey,v[A].indexes)}),da(l,h),void ue.follow(function(){return l.on.populate.fire(w)}).catch(S));var O,N})}function Bk(l,u){Pm(l._dbSchema,u),u.db.version%10!=0||u.objectStoreNames.contains("$meta")||u.db.createObjectStore("$meta").add(Math.ceil(u.db.version/10-1),"version");var h=pa(0,l.idbdb,u);ma(l,l._dbSchema,u);for(var m=0,v=od(h,l._dbSchema).change;m<v.length;m++){var w=function(S){if(S.change.length||S.recreate)return console.warn("Unable to patch indexes of table ".concat(S.name," because it has changes on the type of index or primary key.")),{value:void 0};var C=u.objectStore(S.name);S.add.forEach(function(O){Kn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(S.name,".").concat(O.src)),ha(C,O)})}(v[m]);if(typeof w=="object")return w.value}}function od(l,u){var h,m={del:[],add:[],change:[]};for(h in l)u[h]||m.del.push(h);for(h in u){var v=l[h],w=u[h];if(v){var S={name:h,def:w,recreate:!1,del:[],add:[],change:[]};if(""+(v.primKey.keyPath||"")!=""+(w.primKey.keyPath||"")||v.primKey.auto!==w.primKey.auto)S.recreate=!0,m.change.push(S);else{var C=v.idxByName,O=w.idxByName,N=void 0;for(N in C)O[N]||S.del.push(N);for(N in O){var A=C[N],I=O[N];A?A.src!==I.src&&S.change.push(I):S.add.push(I)}(0<S.del.length||0<S.add.length||0<S.change.length)&&m.change.push(S)}}else m.add.push([h,w])}return m}function sd(l,u,h,m){var v=l.db.createObjectStore(u,h.keyPath?{keyPath:h.keyPath,autoIncrement:h.auto}:{autoIncrement:h.auto});return m.forEach(function(w){return ha(v,w)}),v}function Pm(l,u){s(l).forEach(function(h){u.db.objectStoreNames.contains(h)||(Kn&&console.debug("Dexie: Creating missing table",h),sd(u,h,l[h].primKey,l[h].indexes))})}function ha(l,u){l.createIndex(u.name,u.keyPath,{unique:u.unique,multiEntry:u.multi})}function pa(l,u,h){var m={};return _(u.objectStoreNames,0).forEach(function(v){for(var w=h.objectStore(v),S=td(Tm(N=w.keyPath),N||"",!0,!1,!!w.autoIncrement,N&&typeof N!="string",!0),C=[],O=0;O<w.indexNames.length;++O){var A=w.index(w.indexNames[O]),N=A.keyPath,A=td(A.name,N,!!A.unique,!!A.multiEntry,!1,N&&typeof N!="string",!1);C.push(A)}m[v]=nd(v,S,C)}),m}function ma(l,u,h){for(var m=h.db.objectStoreNames,v=0;v<m.length;++v){var w=m[v],S=h.objectStore(w);l._hasGetAll="getAll"in S;for(var C=0;C<S.indexNames.length;++C){var O=S.indexNames[C],N=S.index(O).keyPath,A=typeof N=="string"?N:"["+_(N).join("+")+"]";!u[w]||(N=u[w].idxByName[A])&&(N.name=O,delete u[w].idxByName[A],u[w].idxByName[O]=N)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(l._hasGetAll=!1)}function Dm(l){return l.split(",").map(function(u,h){var w=u.split(":"),m=(v=w[1])===null||v===void 0?void 0:v.trim(),v=(u=w[0].trim()).replace(/([&*]|\+\+)/g,""),w=/^\[/.test(v)?v.match(/^\[(.*)\]$/)[1].split("+"):v;return td(v,w||null,/\&/.test(u),/\*/.test(u),/\+\+/.test(u),a(w),h===0,m)})}var Kk=(to.prototype._createTableSchema=nd,to.prototype._parseIndexSyntax=Dm,to.prototype._parseStoresSpec=function(l,u){var h=this;s(l).forEach(function(m){if(l[m]!==null){var v=h._parseIndexSyntax(l[m]),w=v.shift();if(!w)throw new se.Schema("Invalid schema for table "+m+": "+l[m]);if(w.unique=!0,w.multi)throw new se.Schema("Primary key cannot be multiEntry*");v.forEach(function(S){if(S.auto)throw new se.Schema("Only primary key can be marked as autoIncrement (++)");if(!S.keyPath)throw new se.Schema("Index must have a name and cannot be an empty string")}),v=h._createTableSchema(m,w,v),u[m]=v}})},to.prototype.stores=function(h){var u=this.db;this._cfg.storesSource=this._cfg.storesSource?c(this._cfg.storesSource,h):h;var h=u._versions,m={},v={};return h.forEach(function(w){c(m,w._cfg.storesSource),v=w._cfg.dbschema={},w._parseStoresSpec(m,v)}),u._dbSchema=v,id(u,[u._allTables,u,u.Transaction.prototype]),fa(u,[u._allTables,u,u.Transaction.prototype,this._cfg.tables],s(v),v),u._storeNames=s(v),this},to.prototype.upgrade=function(l){return this._cfg.contentUpgrade=Fc(this._cfg.contentUpgrade||we,l),this},to);function to(){}function ld(l,u){var h=l._dbNamesDB;return h||(h=l._dbNamesDB=new or(oa,{addons:[],indexedDB:l,IDBKeyRange:u})).version(1).stores({dbnames:"name"}),h.table("dbnames")}function ad(l){return l&&typeof l.databases=="function"}function ud(l){return Nr(function(){return ve.letThrough=!0,l()})}function cd(l){return!("from"in l)}var Ut=function(l,u){if(!this){var h=new Ut;return l&&"d"in l&&c(h,l),h}c(this,arguments.length?{d:1,from:l,to:1<arguments.length?u:l}:{d:0})};function vs(l,u,h){var m=Me(u,h);if(!isNaN(m)){if(0<m)throw RangeError();if(cd(l))return c(l,{from:u,to:h,d:1});var v=l.l,m=l.r;if(Me(h,l.from)<0)return v?vs(v,u,h):l.l={from:u,to:h,d:1,l:null,r:null},Rm(l);if(0<Me(u,l.to))return m?vs(m,u,h):l.r={from:u,to:h,d:1,l:null,r:null},Rm(l);Me(u,l.from)<0&&(l.from=u,l.l=null,l.d=m?m.d+1:1),0<Me(h,l.to)&&(l.to=h,l.r=null,l.d=l.l?l.l.d+1:1),h=!l.r,v&&!l.l&&gs(l,v),m&&h&&gs(l,m)}}function gs(l,u){cd(u)||function h(m,O){var w=O.from,S=O.to,C=O.l,O=O.r;vs(m,w,S),C&&h(m,C),O&&h(m,O)}(l,u)}function Am(l,u){var h=ya(u),m=h.next();if(m.done)return!1;for(var v=m.value,w=ya(l),S=w.next(v.from),C=S.value;!m.done&&!S.done;){if(Me(C.from,v.to)<=0&&0<=Me(C.to,v.from))return!0;Me(v.from,C.from)<0?v=(m=h.next(C.from)).value:C=(S=w.next(v.from)).value}return!1}function ya(l){var u=cd(l)?null:{s:0,n:l};return{next:function(h){for(var m=0<arguments.length;u;)switch(u.s){case 0:if(u.s=1,m)for(;u.n.l&&Me(h,u.n.from)<0;)u={up:u,n:u.n.l,s:1};else for(;u.n.l;)u={up:u,n:u.n.l,s:1};case 1:if(u.s=2,!m||Me(h,u.n.to)<=0)return{value:u.n,done:!1};case 2:if(u.n.r){u.s=3,u={up:u,n:u.n.r,s:0};continue}case 3:u=u.up}return{done:!0}}}}function Rm(l){var u,h,m=(((u=l.r)===null||u===void 0?void 0:u.d)||0)-(((h=l.l)===null||h===void 0?void 0:h.d)||0),v=1<m?"r":m<-1?"l":"";v&&(u=v=="r"?"l":"r",h=r({},l),m=l[v],l.from=m.from,l.to=m.to,l[v]=m[v],h[v]=m[u],(l[u]=h).d=Lm(h)),l.d=Lm(l)}function Lm(h){var u=h.r,h=h.l;return(u?h?Math.max(u.d,h.d):u.d:h?h.d:0)+1}function va(l,u){return s(u).forEach(function(h){l[h]?gs(l[h],u[h]):l[h]=function m(v){var w,S,C={};for(w in v)p(v,w)&&(S=v[w],C[w]=!S||typeof S!="object"||Y.has(S.constructor)?S:m(S));return C}(u[h])}),l}function dd(l,u){return l.all||u.all||Object.keys(l).some(function(h){return u[h]&&Am(u[h],l[h])})}y(Ut.prototype,((kn={add:function(l){return gs(this,l),this},addKey:function(l){return vs(this,l,l),this},addKeys:function(l){var u=this;return l.forEach(function(h){return vs(u,h,h)}),this},hasKey:function(l){var u=ya(this).next(l).value;return u&&Me(u.from,l)<=0&&0<=Me(u.to,l)}})[Q]=function(){return ya(this)},kn));var xi={},fd={},hd=!1;function ga(l){va(fd,l),hd||(hd=!0,setTimeout(function(){hd=!1,pd(fd,!(fd={}))},0))}function pd(l,u){u===void 0&&(u=!1);var h=new Set;if(l.all)for(var m=0,v=Object.values(xi);m<v.length;m++)Mm(S=v[m],l,h,u);else for(var w in l){var S,C=/^idb\:\/\/(.*)\/(.*)\//.exec(w);C&&(w=C[1],C=C[2],(S=xi["idb://".concat(w,"/").concat(C)])&&Mm(S,l,h,u))}h.forEach(function(O){return O()})}function Mm(l,u,h,m){for(var v=[],w=0,S=Object.entries(l.queries.query);w<S.length;w++){for(var C=S[w],O=C[0],N=[],A=0,I=C[1];A<I.length;A++){var U=I[A];dd(u,U.obsSet)?U.subscribers.forEach(function(R){return h.add(R)}):m&&N.push(U)}m&&v.push([O,N])}if(m)for(var j=0,P=v;j<P.length;j++){var L=P[j],O=L[0],N=L[1];l.queries.query[O]=N}}function Vk(l){var u=l._state,h=l._deps.indexedDB;if(u.isBeingOpened||l.idbdb)return u.dbReadyPromise.then(function(){return u.dbOpenError?ft(u.dbOpenError):l});u.isBeingOpened=!0,u.dbOpenError=null,u.openComplete=!1;var m=u.openCanceller,v=Math.round(10*l.verno),w=!1;function S(){if(u.openCanceller!==m)throw new se.DatabaseClosed("db.open() was cancelled")}function C(){return new ue(function(U,j){if(S(),!h)throw new se.MissingAPI;var P=l.name,L=u.autoSchema||!v?h.open(P):h.open(P,v);if(!L)throw new se.MissingAPI;L.onerror=Vn(j),L.onblocked=rt(l._fireOnBlocked),L.onupgradeneeded=rt(function(R){var z;A=L.transaction,u.autoSchema&&!l._options.allowEmptyDB?(L.onerror=hs,A.abort(),L.result.close(),(z=h.deleteDatabase(P)).onsuccess=z.onerror=rt(function(){j(new se.NoSuchDatabase("Database ".concat(P," doesnt exist")))})):(A.onerror=Vn(j),R=R.oldVersion>Math.pow(2,62)?0:R.oldVersion,I=R<1,l.idbdb=L.result,w&&Bk(l,A),Fk(l,R/10,A,j))},j),L.onsuccess=rt(function(){A=null;var R,z,F,B,V,G=l.idbdb=L.result,te=_(G.objectStoreNames);if(0<te.length)try{var X=G.transaction((B=te).length===1?B[0]:B,"readonly");if(u.autoSchema)z=G,F=X,(R=l).verno=z.version/10,F=R._dbSchema=pa(0,z,F),R._storeNames=_(z.objectStoreNames,0),fa(R,[R._allTables],s(F),F);else if(ma(l,l._dbSchema,X),((V=od(pa(0,(V=l).idbdb,X),V._dbSchema)).add.length||V.change.some(function(Z){return Z.add.length||Z.change.length}))&&!w)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),G.close(),v=G.version+1,w=!0,U(C());da(l,X)}catch{}Xi.push(l),G.onversionchange=rt(function(Z){u.vcFired=!0,l.on("versionchange").fire(Z)}),G.onclose=rt(function(Z){l.on("close").fire(Z)}),I&&(V=l._deps,X=P,G=V.indexedDB,V=V.IDBKeyRange,ad(G)||X===oa||ld(G,V).put({name:X}).catch(we)),U()},j)}).catch(function(U){switch(U==null?void 0:U.name){case"UnknownError":if(0<u.PR1398_maxLoop)return u.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),C();break;case"VersionError":if(0<v)return v=0,C()}return ue.reject(U)})}var O,N=u.dbReadyResolve,A=null,I=!1;return ue.race([m,(typeof navigator>"u"?ue.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(U){function j(){return indexedDB.databases().finally(U)}O=setInterval(j,100),j()}).finally(function(){return clearInterval(O)}):Promise.resolve()).then(C)]).then(function(){return S(),u.onReadyBeingFired=[],ue.resolve(ud(function(){return l.on.ready.fire(l.vip)})).then(function U(){if(0<u.onReadyBeingFired.length){var j=u.onReadyBeingFired.reduce(Fc,we);return u.onReadyBeingFired=[],ue.resolve(ud(function(){return j(l.vip)})).then(U)}})}).finally(function(){u.openCanceller===m&&(u.onReadyBeingFired=null,u.isBeingOpened=!1)}).catch(function(U){u.dbOpenError=U;try{A&&A.abort()}catch{}return m===u.openCanceller&&l._close(),ft(U)}).finally(function(){u.openComplete=!0,N()}).then(function(){var U;return I&&(U={},l.tables.forEach(function(j){j.schema.indexes.forEach(function(P){P.name&&(U["idb://".concat(l.name,"/").concat(j.name,"/").concat(P.name)]=new Ut(-1/0,[[[]]]))}),U["idb://".concat(l.name,"/").concat(j.name,"/")]=U["idb://".concat(l.name,"/").concat(j.name,"/:dels")]=new Ut(-1/0,[[[]]])}),Rr(ps).fire(U),pd(U,!0)),l})}function md(l){function u(w){return l.next(w)}var h=v(u),m=v(function(w){return l.throw(w)});function v(w){return function(O){var C=w(O),O=C.value;return C.done?O:O&&typeof O.then=="function"?O.then(h,m):a(O)?Promise.all(O).then(h,m):h(O)}}return v(u)()}function wa(l,u,h){for(var m=a(l)?l.slice():[l],v=0;v<h;++v)m.push(u);return m}var Wk={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(l){return r(r({},l),{table:function(u){var h=l.table(u),m=h.schema,v={},w=[];function S(I,U,j){var P=ys(I),L=v[P]=v[P]||[],R=I==null?0:typeof I=="string"?1:I.length,z=0<U,z=r(r({},j),{name:z?"".concat(P,"(virtual-from:").concat(j.name,")"):j.name,lowLevelIndex:j,isVirtual:z,keyTail:U,keyLength:R,extractKey:rd(I),unique:!z&&j.unique});return L.push(z),z.isPrimaryKey||w.push(z),1<R&&S(R===2?I[0]:I.slice(0,R-1),U+1,j),L.sort(function(F,B){return F.keyTail-B.keyTail}),z}u=S(m.primaryKey.keyPath,0,m.primaryKey),v[":id"]=[u];for(var C=0,O=m.indexes;C<O.length;C++){var N=O[C];S(N.keyPath,0,N)}function A(I){var U,j=I.query.index;return j.isVirtual?r(r({},I),{query:{index:j.lowLevelIndex,range:(U=I.query.range,j=j.keyTail,{type:U.type===1?2:U.type,lower:wa(U.lower,U.lowerOpen?l.MAX_KEY:l.MIN_KEY,j),lowerOpen:!0,upper:wa(U.upper,U.upperOpen?l.MIN_KEY:l.MAX_KEY,j),upperOpen:!0})}}):I}return r(r({},h),{schema:r(r({},m),{primaryKey:u,indexes:w,getIndexByKeyPath:function(I){return(I=v[ys(I)])&&I[0]}}),count:function(I){return h.count(A(I))},query:function(I){return h.query(A(I))},openCursor:function(I){var U=I.query.index,j=U.keyTail,P=U.isVirtual,L=U.keyLength;return P?h.openCursor(A(I)).then(function(z){return z&&R(z)}):h.openCursor(I);function R(z){return Object.create(z,{continue:{value:function(F){F!=null?z.continue(wa(F,I.reverse?l.MAX_KEY:l.MIN_KEY,j)):I.unique?z.continue(z.key.slice(0,L).concat(I.reverse?l.MIN_KEY:l.MAX_KEY,j)):z.continue()}},continuePrimaryKey:{value:function(F,B){z.continuePrimaryKey(wa(F,l.MAX_KEY,j),B)}},primaryKey:{get:function(){return z.primaryKey}},key:{get:function(){var F=z.key;return L===1?F[0]:F.slice(0,L)}},value:{get:function(){return z.value}}})}}})}})}};function yd(l,u,h,m){return h=h||{},m=m||"",s(l).forEach(function(v){var w,S,C;p(u,v)?(w=l[v],S=u[v],typeof w=="object"&&typeof S=="object"&&w&&S?(C=Ee(w))!==Ee(S)?h[m+v]=u[v]:C==="Object"?yd(w,S,h,m+v+"."):w!==S&&(h[m+v]=u[v]):w!==S&&(h[m+v]=u[v])):h[m+v]=void 0}),s(u).forEach(function(v){p(l,v)||(h[m+v]=u[v])}),h}function vd(l,u){return u.type==="delete"?u.keys:u.keys||u.values.map(l.extractKey)}var Hk={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(l){return r(r({},l),{table:function(u){var h=l.table(u),m=h.schema.primaryKey;return r(r({},h),{mutate:function(v){var w=ve.trans,S=w.table(u).hook,C=S.deleting,O=S.creating,N=S.updating;switch(v.type){case"add":if(O.fire===we)break;return w._promise("readwrite",function(){return A(v)},!0);case"put":if(O.fire===we&&N.fire===we)break;return w._promise("readwrite",function(){return A(v)},!0);case"delete":if(C.fire===we)break;return w._promise("readwrite",function(){return A(v)},!0);case"deleteRange":if(C.fire===we)break;return w._promise("readwrite",function(){return function I(U,j,P){return h.query({trans:U,values:!1,query:{index:m,range:j},limit:P}).then(function(L){var R=L.result;return A({type:"delete",keys:R,trans:U}).then(function(z){return 0<z.numFailures?Promise.reject(z.failures[0]):R.length<P?{failures:[],numFailures:0,lastResult:void 0}:I(U,r(r({},j),{lower:R[R.length-1],lowerOpen:!0}),P)})})}(v.trans,v.range,1e4)},!0)}return h.mutate(v);function A(I){var U,j,P,L=ve.trans,R=I.keys||vd(m,I);if(!R)throw new Error("Keys missing");return(I=I.type==="add"||I.type==="put"?r(r({},I),{keys:R}):r({},I)).type!=="delete"&&(I.values=i([],I.values,!0)),I.keys&&(I.keys=i([],I.keys,!0)),U=h,P=R,((j=I).type==="add"?Promise.resolve([]):U.getMany({trans:j.trans,keys:P,cache:"immutable"})).then(function(z){var F=R.map(function(B,V){var G,te,X,Z=z[V],oe={onerror:null,onsuccess:null};return I.type==="delete"?C.fire.call(oe,B,Z,L):I.type==="add"||Z===void 0?(G=O.fire.call(oe,B,I.values[V],L),B==null&&G!=null&&(I.keys[V]=B=G,m.outbound||q(I.values[V],m.keyPath,B))):(G=yd(Z,I.values[V]),(te=N.fire.call(oe,G,B,Z,L))&&(X=I.values[V],Object.keys(te).forEach(function(re){p(X,re)?X[re]=te[re]:q(X,re,te[re])}))),oe});return h.mutate(I).then(function(B){for(var V=B.failures,G=B.results,te=B.numFailures,B=B.lastResult,X=0;X<R.length;++X){var Z=(G||R)[X],oe=F[X];Z==null?oe.onerror&&oe.onerror(V[X]):oe.onsuccess&&oe.onsuccess(I.type==="put"&&z[X]?I.values[X]:Z)}return{failures:V,results:G,numFailures:te,lastResult:B}}).catch(function(B){return F.forEach(function(V){return V.onerror&&V.onerror(B)}),Promise.reject(B)})})}}})}})}};function Um(l,u,h){try{if(!u||u.keys.length<l.length)return null;for(var m=[],v=0,w=0;v<u.keys.length&&w<l.length;++v)Me(u.keys[v],l[w])===0&&(m.push(h?ke(u.values[v]):u.values[v]),++w);return m.length===l.length?m:null}catch{return null}}var qk={stack:"dbcore",level:-1,create:function(l){return{table:function(u){var h=l.table(u);return r(r({},h),{getMany:function(m){if(!m.cache)return h.getMany(m);var v=Um(m.keys,m.trans._cache,m.cache==="clone");return v?ue.resolve(v):h.getMany(m).then(function(w){return m.trans._cache={keys:m.keys,values:m.cache==="clone"?ke(w):w},w})},mutate:function(m){return m.type!=="add"&&(m.trans._cache=null),h.mutate(m)}})}}}};function $m(l,u){return l.trans.mode==="readonly"&&!!l.subscr&&!l.trans.explicit&&l.trans.db._options.cache!=="disabled"&&!u.schema.primaryKey.outbound}function zm(l,u){switch(l){case"query":return u.values&&!u.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Gk={stack:"dbcore",level:0,name:"Observability",create:function(l){var u=l.schema.name,h=new Ut(l.MIN_KEY,l.MAX_KEY);return r(r({},l),{transaction:function(m,v,w){if(ve.subscr&&v!=="readonly")throw new se.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ve.querier));return l.transaction(m,v,w)},table:function(m){var v=l.table(m),w=v.schema,S=w.primaryKey,I=w.indexes,C=S.extractKey,O=S.outbound,N=S.autoIncrement&&I.filter(function(j){return j.compound&&j.keyPath.includes(S.keyPath)}),A=r(r({},v),{mutate:function(j){function P(re){return re="idb://".concat(u,"/").concat(m,"/").concat(re),B[re]||(B[re]=new Ut)}var L,R,z,F=j.trans,B=j.mutatedParts||(j.mutatedParts={}),V=P(""),G=P(":dels"),te=j.type,oe=j.type==="deleteRange"?[j.range]:j.type==="delete"?[j.keys]:j.values.length<50?[vd(S,j).filter(function(re){return re}),j.values]:[],X=oe[0],Z=oe[1],oe=j.trans._cache;return a(X)?(V.addKeys(X),(oe=te==="delete"||X.length===Z.length?Um(X,oe):null)||G.addKeys(X),(oe||Z)&&(L=P,R=oe,z=Z,w.indexes.forEach(function(re){var ce=L(re.name||"");function Oe(Ce){return Ce!=null?re.extractKey(Ce):null}function Ue(Ce){return re.multiEntry&&a(Ce)?Ce.forEach(function(ct){return ce.addKey(ct)}):ce.addKey(Ce)}(R||z).forEach(function(Ce,$t){var xe=R&&Oe(R[$t]),$t=z&&Oe(z[$t]);Me(xe,$t)!==0&&(xe!=null&&Ue(xe),$t!=null&&Ue($t))})}))):X?(Z={from:(Z=X.lower)!==null&&Z!==void 0?Z:l.MIN_KEY,to:(Z=X.upper)!==null&&Z!==void 0?Z:l.MAX_KEY},G.add(Z),V.add(Z)):(V.add(h),G.add(h),w.indexes.forEach(function(re){return P(re.name).add(h)})),v.mutate(j).then(function(re){return!X||j.type!=="add"&&j.type!=="put"||(V.addKeys(re.results),N&&N.forEach(function(ce){for(var Oe=j.values.map(function(xe){return ce.extractKey(xe)}),Ue=ce.keyPath.findIndex(function(xe){return xe===S.keyPath}),Ce=0,ct=re.results.length;Ce<ct;++Ce)Oe[Ce][Ue]=re.results[Ce];P(ce.name).addKeys(Oe)})),F.mutatedParts=va(F.mutatedParts||{},B),re})}}),I=function(P){var L=P.query,P=L.index,L=L.range;return[P,new Ut((P=L.lower)!==null&&P!==void 0?P:l.MIN_KEY,(L=L.upper)!==null&&L!==void 0?L:l.MAX_KEY)]},U={get:function(j){return[S,new Ut(j.key)]},getMany:function(j){return[S,new Ut().addKeys(j.keys)]},count:I,query:I,openCursor:I};return s(U).forEach(function(j){A[j]=function(P){var L=ve.subscr,R=!!L,z=$m(ve,v)&&zm(j,P)?P.obsSet={}:L;if(R){var F=function(Z){return Z="idb://".concat(u,"/").concat(m,"/").concat(Z),z[Z]||(z[Z]=new Ut)},B=F(""),V=F(":dels"),L=U[j](P),R=L[0],L=L[1];if((j==="query"&&R.isPrimaryKey&&!P.values?V:F(R.name||"")).add(L),!R.isPrimaryKey){if(j!=="count"){var G=j==="query"&&O&&P.values&&v.query(r(r({},P),{values:!1}));return v[j].apply(this,arguments).then(function(Z){if(j==="query"){if(O&&P.values)return G.then(function(Oe){return Oe=Oe.result,B.addKeys(Oe),Z});var oe=P.values?Z.result.map(C):Z.result;(P.values?B:V).addKeys(oe)}else if(j==="openCursor"){var re=Z,ce=P.values;return re&&Object.create(re,{key:{get:function(){return V.addKey(re.primaryKey),re.key}},primaryKey:{get:function(){var Oe=re.primaryKey;return V.addKey(Oe),Oe}},value:{get:function(){return ce&&B.addKey(re.primaryKey),re.value}}})}return Z})}V.add(h)}}return v[j].apply(this,arguments)}}),A}})}};function Fm(l,u,h){if(h.numFailures===0)return u;if(u.type==="deleteRange")return null;var m=u.keys?u.keys.length:"values"in u&&u.values?u.values.length:1;return h.numFailures===m?null:(u=r({},u),a(u.keys)&&(u.keys=u.keys.filter(function(v,w){return!(w in h.failures)})),"values"in u&&a(u.values)&&(u.values=u.values.filter(function(v,w){return!(w in h.failures)})),u)}function gd(l,u){return h=l,((m=u).lower===void 0||(m.lowerOpen?0<Me(h,m.lower):0<=Me(h,m.lower)))&&(l=l,(u=u).upper===void 0||(u.upperOpen?Me(l,u.upper)<0:Me(l,u.upper)<=0));var h,m}function Bm(l,u,U,m,v,w){if(!U||U.length===0)return l;var S=u.query.index,C=S.multiEntry,O=u.query.range,N=m.schema.primaryKey.extractKey,A=S.extractKey,I=(S.lowLevelIndex||S).extractKey,U=U.reduce(function(j,P){var L=j,R=[];if(P.type==="add"||P.type==="put")for(var z=new Ut,F=P.values.length-1;0<=F;--F){var B,V=P.values[F],G=N(V);z.hasKey(G)||(B=A(V),(C&&a(B)?B.some(function(re){return gd(re,O)}):gd(B,O))&&(z.addKey(G),R.push(V)))}switch(P.type){case"add":var te=new Ut().addKeys(u.values?j.map(function(ce){return N(ce)}):j),L=j.concat(u.values?R.filter(function(ce){return ce=N(ce),!te.hasKey(ce)&&(te.addKey(ce),!0)}):R.map(function(ce){return N(ce)}).filter(function(ce){return!te.hasKey(ce)&&(te.addKey(ce),!0)}));break;case"put":var X=new Ut().addKeys(P.values.map(function(ce){return N(ce)}));L=j.filter(function(ce){return!X.hasKey(u.values?N(ce):ce)}).concat(u.values?R:R.map(function(ce){return N(ce)}));break;case"delete":var Z=new Ut().addKeys(P.keys);L=j.filter(function(ce){return!Z.hasKey(u.values?N(ce):ce)});break;case"deleteRange":var oe=P.range;L=j.filter(function(ce){return!gd(N(ce),oe)})}return L},l);return U===l?l:(U.sort(function(j,P){return Me(I(j),I(P))||Me(N(j),N(P))}),u.limit&&u.limit<1/0&&(U.length>u.limit?U.length=u.limit:l.length===u.limit&&U.length<u.limit&&(v.dirty=!0)),w?Object.freeze(U):U)}function Km(l,u){return Me(l.lower,u.lower)===0&&Me(l.upper,u.upper)===0&&!!l.lowerOpen==!!u.lowerOpen&&!!l.upperOpen==!!u.upperOpen}function Yk(l,u){return function(h,m,v,w){if(h===void 0)return m!==void 0?-1:0;if(m===void 0)return 1;if((m=Me(h,m))===0){if(v&&w)return 0;if(v)return 1;if(w)return-1}return m}(l.lower,u.lower,l.lowerOpen,u.lowerOpen)<=0&&0<=function(h,m,v,w){if(h===void 0)return m!==void 0?1:0;if(m===void 0)return-1;if((m=Me(h,m))===0){if(v&&w)return 0;if(v)return-1;if(w)return 1}return m}(l.upper,u.upper,l.upperOpen,u.upperOpen)}function Qk(l,u,h,m){l.subscribers.add(h),m.addEventListener("abort",function(){var v,w;l.subscribers.delete(h),l.subscribers.size===0&&(v=l,w=u,setTimeout(function(){v.subscribers.size===0&&M(w,v)},3e3))})}var Jk={stack:"dbcore",level:0,name:"Cache",create:function(l){var u=l.schema.name;return r(r({},l),{transaction:function(h,m,v){var w,S,C=l.transaction(h,m,v);return m==="readwrite"&&(S=(w=new AbortController).signal,v=function(O){return function(){if(w.abort(),m==="readwrite"){for(var N=new Set,A=0,I=h;A<I.length;A++){var U=I[A],j=xi["idb://".concat(u,"/").concat(U)];if(j){var P=l.table(U),L=j.optimisticOps.filter(function(ce){return ce.trans===C});if(C._explicit&&O&&C.mutatedParts)for(var R=0,z=Object.values(j.queries.query);R<z.length;R++)for(var F=0,B=(te=z[R]).slice();F<B.length;F++)dd((X=B[F]).obsSet,C.mutatedParts)&&(M(te,X),X.subscribers.forEach(function(ce){return N.add(ce)}));else if(0<L.length){j.optimisticOps=j.optimisticOps.filter(function(ce){return ce.trans!==C});for(var V=0,G=Object.values(j.queries.query);V<G.length;V++)for(var te,X,Z,oe=0,re=(te=G[V]).slice();oe<re.length;oe++)(X=re[oe]).res!=null&&C.mutatedParts&&(O&&!X.dirty?(Z=Object.isFrozen(X.res),Z=Bm(X.res,X.req,L,P,X,Z),X.dirty?(M(te,X),X.subscribers.forEach(function(ce){return N.add(ce)})):Z!==X.res&&(X.res=Z,X.promise=ue.resolve({result:Z}))):(X.dirty&&M(te,X),X.subscribers.forEach(function(ce){return N.add(ce)})))}}}N.forEach(function(ce){return ce()})}}},C.addEventListener("abort",v(!1),{signal:S}),C.addEventListener("error",v(!1),{signal:S}),C.addEventListener("complete",v(!0),{signal:S})),C},table:function(h){var m=l.table(h),v=m.schema.primaryKey;return r(r({},m),{mutate:function(w){var S=ve.trans;if(v.outbound||S.db._options.cache==="disabled"||S.explicit||S.idbtrans.mode!=="readwrite")return m.mutate(w);var C=xi["idb://".concat(u,"/").concat(h)];return C?(S=m.mutate(w),w.type!=="add"&&w.type!=="put"||!(50<=w.values.length||vd(v,w).some(function(O){return O==null}))?(C.optimisticOps.push(w),w.mutatedParts&&ga(w.mutatedParts),S.then(function(O){0<O.numFailures&&(M(C.optimisticOps,w),(O=Fm(0,w,O))&&C.optimisticOps.push(O),w.mutatedParts&&ga(w.mutatedParts))}),S.catch(function(){M(C.optimisticOps,w),w.mutatedParts&&ga(w.mutatedParts)})):S.then(function(O){var N=Fm(0,r(r({},w),{values:w.values.map(function(A,I){var U;return O.failures[I]?A:(A=(U=v.keyPath)!==null&&U!==void 0&&U.includes(".")?ke(A):r({},A),q(A,v.keyPath,O.results[I]),A)})}),O);C.optimisticOps.push(N),queueMicrotask(function(){return w.mutatedParts&&ga(w.mutatedParts)})}),S):m.mutate(w)},query:function(w){if(!$m(ve,m)||!zm("query",w))return m.query(w);var S=((N=ve.trans)===null||N===void 0?void 0:N.db._options.cache)==="immutable",I=ve,C=I.requery,O=I.signal,N=function(P,L,R,z){var F=xi["idb://".concat(P,"/").concat(L)];if(!F)return[];if(!(L=F.queries[R]))return[null,!1,F,null];var B=L[(z.query?z.query.index.name:null)||""];if(!B)return[null,!1,F,null];switch(R){case"query":var V=B.find(function(G){return G.req.limit===z.limit&&G.req.values===z.values&&Km(G.req.query.range,z.query.range)});return V?[V,!0,F,B]:[B.find(function(G){return("limit"in G.req?G.req.limit:1/0)>=z.limit&&(!z.values||G.req.values)&&Yk(G.req.query.range,z.query.range)}),!1,F,B];case"count":return V=B.find(function(G){return Km(G.req.query.range,z.query.range)}),[V,!!V,F,B]}}(u,h,"query",w),A=N[0],I=N[1],U=N[2],j=N[3];return A&&I?A.obsSet=w.obsSet:(I=m.query(w).then(function(P){var L=P.result;if(A&&(A.res=L),S){for(var R=0,z=L.length;R<z;++R)Object.freeze(L[R]);Object.freeze(L)}else P.result=ke(L);return P}).catch(function(P){return j&&A&&M(j,A),Promise.reject(P)}),A={obsSet:w.obsSet,promise:I,subscribers:new Set,type:"query",req:w,dirty:!1},j?j.push(A):(j=[A],(U=U||(xi["idb://".concat(u,"/").concat(h)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[w.query.index.name||""]=j)),Qk(A,j,C,O),A.promise.then(function(P){return{result:Bm(P.result,w,U==null?void 0:U.optimisticOps,m,A,S)}})}})}})}};function ba(l,u){return new Proxy(l,{get:function(h,m,v){return m==="db"?u:Reflect.get(h,m,v)}})}var or=(ht.prototype.version=function(l){if(isNaN(l)||l<.1)throw new se.Type("Given version is not a positive number");if(l=Math.round(10*l)/10,this.idbdb||this._state.isBeingOpened)throw new se.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,l);var u=this._versions,h=u.filter(function(m){return m._cfg.version===l})[0];return h||(h=new this.Version(l),u.push(h),u.sort(zk),h.stores({}),this._state.autoSchema=!1,h)},ht.prototype._whenReady=function(l){var u=this;return this.idbdb&&(this._state.openComplete||ve.letThrough||this._vip)?l():new ue(function(h,m){if(u._state.openComplete)return m(new se.DatabaseClosed(u._state.dbOpenError));if(!u._state.isBeingOpened){if(!u._state.autoOpen)return void m(new se.DatabaseClosed);u.open().catch(we)}u._state.dbReadyPromise.then(h,m)}).then(l)},ht.prototype.use=function(l){var u=l.stack,h=l.create,m=l.level,v=l.name;return v&&this.unuse({stack:u,name:v}),l=this._middlewares[u]||(this._middlewares[u]=[]),l.push({stack:u,create:h,level:m??10,name:v}),l.sort(function(w,S){return w.level-S.level}),this},ht.prototype.unuse=function(l){var u=l.stack,h=l.name,m=l.create;return u&&this._middlewares[u]&&(this._middlewares[u]=this._middlewares[u].filter(function(v){return m?v.create!==m:!!h&&v.name!==h})),this},ht.prototype.open=function(){var l=this;return bi(Tr,function(){return Vk(l)})},ht.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var l=this._state,u=Xi.indexOf(this);if(0<=u&&Xi.splice(u,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}l.isBeingOpened||(l.dbReadyPromise=new ue(function(h){l.dbReadyResolve=h}),l.openCanceller=new ue(function(h,m){l.cancelOpen=m}))},ht.prototype.close=function(h){var u=(h===void 0?{disableAutoOpen:!0}:h).disableAutoOpen,h=this._state;u?(h.isBeingOpened&&h.cancelOpen(new se.DatabaseClosed),this._close(),h.autoOpen=!1,h.dbOpenError=new se.DatabaseClosed):(this._close(),h.autoOpen=this._options.autoOpen||h.isBeingOpened,h.openComplete=!1,h.dbOpenError=null)},ht.prototype.delete=function(l){var u=this;l===void 0&&(l={disableAutoOpen:!0});var h=0<arguments.length&&typeof arguments[0]!="object",m=this._state;return new ue(function(v,w){function S(){u.close(l);var C=u._deps.indexedDB.deleteDatabase(u.name);C.onsuccess=rt(function(){var O,N,A;O=u._deps,N=u.name,A=O.indexedDB,O=O.IDBKeyRange,ad(A)||N===oa||ld(A,O).delete(N).catch(we),v()}),C.onerror=Vn(w),C.onblocked=u._fireOnBlocked}if(h)throw new se.InvalidArgument("Invalid closeOptions argument to db.delete()");m.isBeingOpened?m.dbReadyPromise.then(S):S()})},ht.prototype.backendDB=function(){return this.idbdb},ht.prototype.isOpen=function(){return this.idbdb!==null},ht.prototype.hasBeenClosed=function(){var l=this._state.dbOpenError;return l&&l.name==="DatabaseClosed"},ht.prototype.hasFailed=function(){return this._state.dbOpenError!==null},ht.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(ht.prototype,"tables",{get:function(){var l=this;return s(this._allTables).map(function(u){return l._allTables[u]})},enumerable:!1,configurable:!0}),ht.prototype.transaction=function(){var l=(function(u,h,m){var v=arguments.length;if(v<2)throw new se.InvalidArgument("Too few arguments");for(var w=new Array(v-1);--v;)w[v-1]=arguments[v];return m=w.pop(),[u,fe(w),m]}).apply(this,arguments);return this._transaction.apply(this,l)},ht.prototype._transaction=function(l,u,h){var m=this,v=ve.trans;v&&v.db===this&&l.indexOf("!")===-1||(v=null);var w,S,C=l.indexOf("?")!==-1;l=l.replace("!","").replace("?","");try{if(S=u.map(function(N){if(N=N instanceof m.Table?N.name:N,typeof N!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return N}),l=="r"||l===Qc)w=Qc;else{if(l!="rw"&&l!=Jc)throw new se.InvalidArgument("Invalid transaction mode: "+l);w=Jc}if(v){if(v.mode===Qc&&w===Jc){if(!C)throw new se.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");v=null}v&&S.forEach(function(N){if(v&&v.storeNames.indexOf(N)===-1){if(!C)throw new se.SubTransaction("Table "+N+" not included in parent transaction.");v=null}}),C&&v&&!v.active&&(v=null)}}catch(N){return v?v._promise(null,function(A,I){I(N)}):ft(N)}var O=(function N(A,I,U,j,P){return ue.resolve().then(function(){var L=ve.transless||ve,R=A._createTransaction(I,U,A._dbSchema,j);if(R.explicit=!0,L={trans:R,transless:L},j)R.idbtrans=j.idbtrans;else try{R.create(),R.idbtrans._explicit=!0,A._state.PR1398_maxLoop=3}catch(B){return B.name===Te.InvalidState&&A.isOpen()&&0<--A._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),A.close({disableAutoOpen:!1}),A.open().then(function(){return N(A,I,U,null,P)})):ft(B)}var z,F=de(P);return F&&Ji(),L=ue.follow(function(){var B;(z=P.call(R,R))&&(F?(B=Pr.bind(null,null),z.then(B,B)):typeof z.next=="function"&&typeof z.throw=="function"&&(z=md(z)))},L),(z&&typeof z.then=="function"?ue.resolve(z).then(function(B){return R.active?B:ft(new se.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):L.then(function(){return z})).then(function(B){return j&&R._resolve(),R._completion.then(function(){return B})}).catch(function(B){return R._reject(B),ft(B)})})}).bind(null,this,w,S,v,h);return v?v._promise(w,O,"lock"):ve.trans?bi(ve.transless,function(){return m._whenReady(O)}):this._whenReady(O)},ht.prototype.table=function(l){if(!p(this._allTables,l))throw new se.InvalidTable("Table ".concat(l," does not exist"));return this._allTables[l]},ht);function ht(l,u){var h=this;this._middlewares={},this.verno=0;var m=ht.dependencies;this._options=u=r({addons:ht.addons,autoOpen:!0,indexedDB:m.indexedDB,IDBKeyRange:m.IDBKeyRange,cache:"cloned"},u),this._deps={indexedDB:u.indexedDB,IDBKeyRange:u.IDBKeyRange},m=u.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var v,w,S,C,O,N={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:we,dbReadyPromise:null,cancelOpen:we,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:u.autoOpen};N.dbReadyPromise=new ue(function(I){N.dbReadyResolve=I}),N.openCanceller=new ue(function(I,U){N.cancelOpen=U}),this._state=N,this.name=l,this.on=cs(this,"populate","blocked","versionchange","close",{ready:[Fc,we]}),this.once=function(I,U){var j=function(){for(var P=[],L=0;L<arguments.length;L++)P[L]=arguments[L];h.on(I).unsubscribe(j),U.apply(h,P)};return h.on(I,j)},this.on.ready.subscribe=k(this.on.ready.subscribe,function(I){return function(U,j){ht.vip(function(){var P,L=h._state;L.openComplete?(L.dbOpenError||ue.resolve().then(U),j&&I(U)):L.onReadyBeingFired?(L.onReadyBeingFired.push(U),j&&I(U)):(I(U),P=h,j||I(function R(){P.on.ready.unsubscribe(U),P.on.ready.unsubscribe(R)}))})}}),this.Collection=(v=this,ds(Dk.prototype,function(z,R){this.db=v;var j=wm,P=null;if(R)try{j=R()}catch(F){P=F}var L=z._ctx,R=L.table,z=R.hook.reading.fire;this._ctx={table:R,index:L.index,isPrimKey:!L.index||R.schema.primKey.keyPath&&L.index===R.schema.primKey.name,range:j,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:P,or:L.or,valueMapper:z!==Le?z:null}})),this.Table=(w=this,ds(xm.prototype,function(I,U,j){this.db=w,this._tx=j,this.name=I,this.schema=U,this.hook=w._allTables[I]?w._allTables[I].hook:cs(null,{creating:[un,we],reading:[Be,Le],updating:[Bn,we],deleting:[mi,we]})})),this.Transaction=(S=this,ds(Lk.prototype,function(I,U,j,P,L){var R=this;I!=="readonly"&&U.forEach(function(z){z=(z=j[z])===null||z===void 0?void 0:z.yProps,z&&(U=U.concat(z.map(function(F){return F.updatesTable})))}),this.db=S,this.mode=I,this.storeNames=U,this.schema=j,this.chromeTransactionDurability=P,this.idbtrans=null,this.on=cs(this,"complete","error","abort"),this.parent=L||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ue(function(z,F){R._resolve=z,R._reject=F}),this._completion.then(function(){R.active=!1,R.on.complete.fire()},function(z){var F=R.active;return R.active=!1,R.on.error.fire(z),R.parent?R.parent._reject(z):F&&R.idbtrans&&R.idbtrans.abort(),ft(z)})})),this.Version=(C=this,ds(Kk.prototype,function(I){this.db=C,this._cfg={version:I,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(O=this,ds(jm.prototype,function(I,U,j){if(this.db=O,this._ctx={table:I,index:U===":id"?null:U,or:j},this._cmp=this._ascending=Me,this._descending=function(P,L){return Me(L,P)},this._max=function(P,L){return 0<Me(P,L)?P:L},this._min=function(P,L){return Me(P,L)<0?P:L},this._IDBKeyRange=O._deps.IDBKeyRange,!this._IDBKeyRange)throw new se.MissingAPI})),this.on("versionchange",function(I){0<I.newVersion?console.warn("Another connection wants to upgrade database '".concat(h.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(h.name,"'. Closing db now to resume the delete request.")),h.close({disableAutoOpen:!1})}),this.on("blocked",function(I){!I.newVersion||I.newVersion<I.oldVersion?console.warn("Dexie.delete('".concat(h.name,"') was blocked")):console.warn("Upgrade '".concat(h.name,"' blocked by other connection holding version ").concat(I.oldVersion/10))}),this._maxKey=ms(u.IDBKeyRange),this._createTransaction=function(I,U,j,P){return new h.Transaction(I,U,j,h._options.chromeTransactionDurability,P)},this._fireOnBlocked=function(I){h.on("blocked").fire(I),Xi.filter(function(U){return U.name===h.name&&U!==h&&!U._state.vcFired}).map(function(U){return U.on("versionchange").fire(I)})},this.use(qk),this.use(Jk),this.use(Gk),this.use(Wk),this.use(Hk);var A=new Proxy(this,{get:function(I,U,j){if(U==="_vip")return!0;if(U==="table")return function(L){return ba(h.table(L),A)};var P=Reflect.get(I,U,j);return P instanceof xm?ba(P,A):U==="tables"?P.map(function(L){return ba(L,A)}):U==="_createTransaction"?function(){return ba(P.apply(this,arguments),A)}:P}});this.vip=A,m.forEach(function(I){return I(h)})}var ka,kn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Xk=(wd.prototype.subscribe=function(l,u,h){return this._subscribe(l&&typeof l!="function"?l:{next:l,error:u,complete:h})},wd.prototype[kn]=function(){return this},wd);function wd(l){this._subscribe=l}try{ka={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch{ka={indexedDB:null,IDBKeyRange:null}}function Vm(l){var u,h=!1,m=new Xk(function(v){var w=de(l),S,C=!1,O={},N={},A={get closed(){return C},unsubscribe:function(){C||(C=!0,S&&S.abort(),I&&Rr.storagemutated.unsubscribe(j))}};v.start&&v.start(A);var I=!1,U=function(){return Yc(P)},j=function(L){va(O,L),dd(N,O)&&U()},P=function(){var L,R,z;!C&&ka.indexedDB&&(O={},L={},S&&S.abort(),S=new AbortController,z=function(F){var B=Yi();try{w&&Ji();var V=Nr(l,F);return V=w?V.finally(Pr):V}finally{B&&Qi()}}(R={subscr:L,signal:S.signal,requery:U,querier:l,trans:null}),Promise.resolve(z).then(function(F){h=!0,u=F,C||R.signal.aborted||(O={},function(B){for(var V in B)if(p(B,V))return;return 1}(N=L)||I||(Rr(ps,j),I=!0),Yc(function(){return!C&&v.next&&v.next(F)}))},function(F){h=!1,["DatabaseClosedError","AbortError"].includes(F==null?void 0:F.name)||C||Yc(function(){C||v.error&&v.error(F)})}))};return setTimeout(U,0),A});return m.hasValue=function(){return h},m.getValue=function(){return u},m}var Si=or;function bd(l){var u=Lr;try{Lr=!0,Rr.storagemutated.fire(l),pd(l,!0)}finally{Lr=u}}y(Si,r(r({},nt),{delete:function(l){return new Si(l,{addons:[]}).delete()},exists:function(l){return new Si(l,{addons:[]}).open().then(function(u){return u.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(l){try{return u=Si.dependencies,h=u.indexedDB,u=u.IDBKeyRange,(ad(h)?Promise.resolve(h.databases()).then(function(m){return m.map(function(v){return v.name}).filter(function(v){return v!==oa})}):ld(h,u).toCollection().primaryKeys()).then(l)}catch{return ft(new se.MissingAPI)}var u,h},defineClass:function(){return function(l){c(this,l)}},ignoreTransaction:function(l){return ve.trans?bi(ve.transless,l):l()},vip:ud,async:function(l){return function(){try{var u=md(l.apply(this,arguments));return u&&typeof u.then=="function"?u:ue.resolve(u)}catch(h){return ft(h)}}},spawn:function(l,u,h){try{var m=md(l.apply(h,u||[]));return m&&typeof m.then=="function"?m:ue.resolve(m)}catch(v){return ft(v)}},currentTransaction:{get:function(){return ve.trans||null}},waitFor:function(l,u){return u=ue.resolve(typeof l=="function"?Si.ignoreTransaction(l):l).timeout(u||6e4),ve.trans?ve.trans.waitFor(u):u},Promise:ue,debug:{get:function(){return Kn},set:function(l){fm(l)}},derive:x,extend:c,props:y,override:k,Events:cs,on:Rr,liveQuery:Vm,extendObservabilitySet:va,getByKeyPath:K,setByKeyPath:q,delByKeyPath:function(l,u){typeof u=="string"?q(l,u,void 0):"length"in u&&[].map.call(u,function(h){q(l,h,void 0)})},shallowClone:H,deepClone:ke,getObjectDiff:yd,cmp:Me,asap:W,minKey:-1/0,addons:[],connections:Xi,errnames:Te,dependencies:ka,cache:xi,semVer:"4.2.0",version:"4.2.0".split(".").map(function(l){return parseInt(l)}).reduce(function(l,u,h){return l+u/Math.pow(10,2*h)})})),Si.maxKey=ms(Si.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Rr(ps,function(l){Lr||(l=new CustomEvent(ed,{detail:l}),Lr=!0,dispatchEvent(l),Lr=!1)}),addEventListener(ed,function(l){l=l.detail,Lr||bd(l)}));var no,Lr=!1,Wm=function(){};return typeof BroadcastChannel<"u"&&((Wm=function(){(no=new BroadcastChannel(ed)).onmessage=function(l){return l.data&&bd(l.data)}})(),typeof no.unref=="function"&&no.unref(),Rr(ps,function(l){Lr||no.postMessage(l)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(l){if(!or.disableBfCache&&l.persisted){Kn&&console.debug("Dexie: handling persisted pagehide"),no!=null&&no.close();for(var u=0,h=Xi;u<h.length;u++)h[u].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(l){!or.disableBfCache&&l.persisted&&(Kn&&console.debug("Dexie: handling persisted pageshow"),Wm(),bd({all:new Ut(-1/0,[[]])}))})),ue.rejectionMapper=function(l,u){return!l||l instanceof be||l instanceof TypeError||l instanceof SyntaxError||!l.name||!Ve[l.name]?l:(u=new Ve[l.name](u||l.message,l),"stack"in l&&b(u,"stack",{get:function(){return this.inner.stack}}),u)},fm(Kn),r(or,Object.freeze({__proto__:null,Dexie:or,liveQuery:Vm,Entity:bm,cmp:Me,PropModification:fs,replacePrefix:function(l,u){return new fs({replacePrefix:[l,u]})},add:function(l){return new fs({add:l})},remove:function(l){return new fs({remove:l})},default:or,RangeSet:Ut,mergeRanges:gs,rangesOverlap:Am}),{default:or}),or})})(Vw);var IS=Vw.exports;const ch=Tg(IS),nv=Symbol.for("Dexie"),Ae=globalThis[nv]||(globalThis[nv]=ch);if(ch.semVer!==Ae.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${ch.semVer} and ${Ae.semVer}`);const{liveQuery:ni,mergeRanges:bT,rangesOverlap:kT,RangeSet:OS,cmp:Sc,Entity:jS,PropModification:rv,replacePrefix:_T,add:xT,remove:ST,DexieYProvider:ET}=Ae;function zl(e,t,n){var r,i;typeof e=="function"?(r=t||[],i=n):(r=[],i=t);var o=so.useRef({hasResult:!1,result:i,error:null}),s=so.useReducer(function(d){return d+1},0);s[0];var a=s[1],c=so.useMemo(function(){var d=typeof e=="function"?e():e;if(!d||typeof d.subscribe!="function")throw e===d?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!o.current.hasResult&&typeof window<"u"&&(typeof d.hasValue!="function"||d.hasValue()))if(typeof d.getValue=="function")o.current.result=d.getValue(),o.current.hasResult=!0;else{var f=d.subscribe(function(p){o.current.result=p,o.current.hasResult=!0});typeof f=="function"?f():f.unsubscribe()}return d},r);if(so.useDebugValue(o.current.result),so.useEffect(function(){var d=c.subscribe(function(f){var p=o.current;(p.error!==null||p.result!==f)&&(p.error=null,p.result=f,p.hasResult=!0,a())},function(f){var p=o.current;p.error!==f&&(p.error=f,a())});return typeof d=="function"?d:d.unsubscribe.bind(d)},r),o.current.error)throw o.current.error;return o.current.result}function Fl(e,t,n){return zl(function(){return Ae.liveQuery(e)},t||[],n)}function Bl(e,t,n){if(!e)throw new TypeError("Invalid arguments to usePermissions(): undefined or null");var r;if(arguments.length>=3){if(!("transaction"in e))throw new TypeError("Invalid arguments to usePermission(db, table, obj): 1st arg must be a Dexie instance");if(typeof t!="string")throw new TypeError("Invalid arguments to usePermission(db, table, obj): 2nd arg must be string");if(!n||typeof n!="object")throw new TypeError("Invalid arguments to usePermission(db, table, obj): 3rd arg must be an object");r=e}else{if(e instanceof Ae)throw new TypeError("Invalid arguments to usePermission(db, table, obj): Missing table and obj arguments.");if(typeof e.table=="function"&&typeof e.db=="object")r=e.db,n=e,t=e.table();else throw new TypeError("Invalid arguments to usePermissions(). Expected usePermissions(entity: DexieCloudEntity) or usePermissions(db: Dexie, table: string, obj: DexieCloudObject)")}if(!("cloud"in r))throw new Error("usePermissions() is only for Dexie Cloud but there's no dexie-cloud-addon active in given db.");if(!("permissions"in r.cloud))throw new Error("usePermissions() requires a newer version of dexie-cloud-addon. Please upgrade it.");return zl(function(){return r.cloud.permissions(n,t)},[n.realmId,n.owner,t])}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(e){var t=Ae.DexieYProvider;t&&t.release(e)});const xr=Math.floor,cu=Math.abs,Ww=(e,t)=>e<t?e:t,Yo=(e,t)=>e>t?e:t,Hw=e=>e!==0?e<0:1/e<0,iv=1,ov=2,Gd=4,Yd=8,wl=32,yr=64,yn=128,Ec=31,dh=63,Li=127,TS=2147483647,qw=Number.MAX_SAFE_INTEGER,NS=Number.isInteger||(e=>typeof e=="number"&&isFinite(e)&&xr(e)===e),Bi=()=>new Set,Qd=e=>e[e.length-1],PS=(e,t)=>{for(let n=0;n<t.length;n++)e.push(t[n])},ai=Array.from,DS=Array.isArray,AS=e=>e.toLowerCase(),RS=/^\s*/g,LS=e=>e.replace(RS,""),MS=/([A-Z])/g,sv=(e,t)=>LS(e.replace(MS,n=>`${t}${AS(n)}`)),US=e=>{const t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=t.codePointAt(i);return r},bl=typeof TextEncoder<"u"?new TextEncoder:null,$S=e=>bl.encode(e),zS=bl?$S:US;let qs=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});qs&&qs.decode(new Uint8Array).length===1&&(qs=null);class Qo{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Jo=()=>new Qo,FS=e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t},pn=e=>{const t=new Uint8Array(FS(e));let n=0;for(let r=0;r<e.bufs.length;r++){const i=e.bufs[r];t.set(i,n),n+=i.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),n),t},BS=(e,t)=>{const n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(Yo(n,t)*2),e.cpos=0)},It=(e,t)=>{const n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(n*2),e.cpos=0),e.cbuf[e.cpos++]=t},fh=It,je=(e,t)=>{for(;t>Li;)It(e,yn|Li&t),t=xr(t/128);It(e,Li&t)},zp=(e,t)=>{const n=Hw(t);for(n&&(t=-t),It(e,(t>dh?yn:0)|(n?yr:0)|dh&t),t=xr(t/64);t>0;)It(e,(t>Li?yn:0)|Li&t),t=xr(t/128)},hh=new Uint8Array(3e4),KS=hh.length/3,VS=(e,t)=>{if(t.length<KS){const n=bl.encodeInto(t,hh).written||0;je(e,n);for(let r=0;r<n;r++)It(e,hh[r])}else Pt(e,zS(t))},WS=(e,t)=>{const n=unescape(encodeURIComponent(t)),r=n.length;je(e,r);for(let i=0;i<r;i++)It(e,n.codePointAt(i))},En=bl&&bl.encodeInto?VS:WS,HS=(e,t)=>Kl(e,pn(t)),Kl=(e,t)=>{const n=e.cbuf.length,r=e.cpos,i=Ww(n-r,t.length),o=t.length-i;e.cbuf.set(t.subarray(0,i),r),e.cpos+=i,o>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(Yo(n*2,o)),e.cbuf.set(t.subarray(i)),e.cpos=o)},Pt=(e,t)=>{je(e,t.byteLength),Kl(e,t)},Cc=(e,t)=>{BS(e,t);const n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},qS=(e,t)=>Cc(e,4).setFloat32(0,t,!1),GS=(e,t)=>Cc(e,8).setFloat64(0,t,!1),YS=(e,t)=>Cc(e,8).setBigInt64(0,t,!1),lv=(e,t)=>Cc(e,8).setBigUint64(0,t,!1),av=new DataView(new ArrayBuffer(4)),QS=e=>(av.setFloat32(0,e),av.getFloat32(0)===e),ri=(e,t)=>{switch(typeof t){case"string":It(e,119),En(e,t);break;case"number":NS(t)&&cu(t)<=TS?(It(e,125),zp(e,t)):QS(t)?(It(e,124),qS(e,t)):(It(e,123),GS(e,t));break;case"bigint":It(e,122),YS(e,t);break;case"object":if(t===null)It(e,126);else if(DS(t)){It(e,117),je(e,t.length);for(let n=0;n<t.length;n++)ri(e,t[n])}else if(t instanceof Uint8Array)It(e,116),Pt(e,t);else{It(e,118);const n=Object.keys(t);je(e,n.length);for(let r=0;r<n.length;r++){const i=n[r];En(e,i),ri(e,t[i])}}break;case"boolean":It(e,t?120:121);break;default:It(e,127)}};class uv extends Qo{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&je(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}}const cv=e=>{e.count>0&&(zp(e.encoder,e.count===1?e.s:-e.s),e.count>1&&je(e.encoder,e.count-2))};class du{constructor(){this.encoder=new Qo,this.s=0,this.count=0}write(t){this.s===t?this.count++:(cv(this),this.count=1,this.s=t)}toUint8Array(){return cv(this),pn(this.encoder)}}const dv=e=>{if(e.count>0){const t=e.diff*2+(e.count===1?0:1);zp(e.encoder,t),e.count>1&&je(e.encoder,e.count-2)}};class Jd{constructor(){this.encoder=new Qo,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):(dv(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return dv(this),pn(this.encoder)}}class JS{constructor(){this.sarr=[],this.s="",this.lensE=new du}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){const t=new Qo;return this.sarr.push(this.s),this.s="",En(t,this.sarr.join("")),Kl(t,this.lensE.toUint8Array()),pn(t)}}const ui=e=>new Error(e),er=()=>{throw ui("Method unimplemented")},tr=()=>{throw ui("Unexpected case")},Gw=ui("Unexpected end of array"),Yw=ui("Integer out of Range");class Xo{constructor(t){this.arr=t,this.pos=0}}const Vl=e=>new Xo(e),Qw=e=>e.pos!==e.arr.length,XS=(e,t)=>{const n=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n},Dt=e=>XS(e,Ye(e)),Uo=e=>e.arr[e.pos++],Ye=e=>{let t=0,n=1;const r=e.arr.length;for(;e.pos<r;){const i=e.arr[e.pos++];if(t=t+(i&Li)*n,n*=128,i<yn)return t;if(t>qw)throw Yw}throw Gw},Fp=e=>{let t=e.arr[e.pos++],n=t&dh,r=64;const i=(t&yr)>0?-1:1;if(!(t&yn))return i*n;const o=e.arr.length;for(;e.pos<o;){if(t=e.arr[e.pos++],n=n+(t&Li)*r,r*=128,t<yn)return i*n;if(n>qw)throw Yw}throw Gw},ZS=e=>{let t=Ye(e);if(t===0)return"";{let n=String.fromCodePoint(Uo(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(Uo(e));else for(;t>0;){const r=t<1e4?t:1e4,i=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,i),t-=r}return decodeURIComponent(escape(n))}},eE=e=>qs.decode(Dt(e)),Cn=qs?eE:ZS,Ic=(e,t)=>{const n=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,n},tE=e=>Ic(e,4).getFloat32(0,!1),nE=e=>Ic(e,8).getFloat64(0,!1),rE=e=>Ic(e,8).getBigInt64(0,!1),fv=e=>Ic(e,8).getBigUint64(0,!1),iE=[e=>{},e=>null,Fp,tE,nE,rE,e=>!1,e=>!0,Cn,e=>{const t=Ye(e),n={};for(let r=0;r<t;r++){const i=Cn(e);n[i]=ii(e)}return n},e=>{const t=Ye(e),n=[];for(let r=0;r<t;r++)n.push(ii(e));return n},Dt],ii=e=>iE[127-Uo(e)](e);class hv extends Xo{constructor(t,n){super(t),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),Qw(this)?this.count=Ye(this)+1:this.count=-1),this.count--,this.s}}class fu extends Xo{constructor(t){super(t),this.s=0,this.count=0}read(){if(this.count===0){this.s=Fp(this);const t=Hw(this.s);this.count=1,t&&(this.s=-this.s,this.count=Ye(this)+2)}return this.count--,this.s}}class Xd extends Xo{constructor(t){super(t),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const t=Fp(this),n=t&1;this.diff=xr(t/2),this.count=1,n&&(this.count=Ye(this)+2)}return this.s+=this.diff,this.count--,this.s}}class oE{constructor(t){this.decoder=new fu(t),this.str=Cn(this.decoder),this.spos=0}read(){const t=this.spos+this.decoder.read(),n=this.str.slice(this.spos,t);return this.spos=t,n}}var ph=function(e,t){return ph=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},ph(e,t)};function Cr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ph(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function sE(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(f){try{d(r.next(f))}catch(p){s(p)}}function c(f){try{d(r.throw(f))}catch(p){s(p)}}function d(f){f.done?o(f.value):i(f.value).then(a,c)}d((r=r.apply(e,t||[])).next())})}function Jw(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(d){return function(f){return c([d,f])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,d[0]&&(n=0)),n;)try{if(r=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(d[0]===6&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(f){d=[6,f],i=0}finally{r=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function $o(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Sr(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function ci(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}function Io(e){return this instanceof Io?(this.v=e,this):new Io(e)}function lE(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(g){return function(b){return Promise.resolve(b).then(g,p)}}function a(g,b){r[g]&&(i[g]=function(x){return new Promise(function(D,E){o.push([g,x,D,E])>1||c(g,x)})},b&&(i[g]=b(i[g])))}function c(g,b){try{d(r[g](b))}catch(x){y(o[0][3],x)}}function d(g){g.value instanceof Io?Promise.resolve(g.value.v).then(f,p):y(o[0][2],g)}function f(g){c("next",g)}function p(g){c("throw",g)}function y(g,b){g(b),o.shift(),o.length&&c(o[0][0],o[0][1])}}function aE(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof $o=="function"?$o(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,c){s=e[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(d){o({value:d,done:a})},s)}}function He(e){return typeof e=="function"}function Bp(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Zd=Bp(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function Ku(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Zo=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=$o(s),c=a.next();!c.done;c=a.next()){var d=c.value;d.remove(this)}}catch(x){t={error:x}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}else s.remove(this);var f=this.initialTeardown;if(He(f))try{f()}catch(x){o=x instanceof Zd?x.errors:[x]}var p=this._finalizers;if(p){this._finalizers=null;try{for(var y=$o(p),g=y.next();!g.done;g=y.next()){var b=g.value;try{pv(b)}catch(x){o=o??[],x instanceof Zd?o=ci(ci([],Sr(o)),Sr(x.errors)):o.push(x)}}}catch(x){r={error:x}}finally{try{g&&!g.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}}if(o)throw new Zd(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)pv(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&Ku(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&Ku(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),Xw=Zo.EMPTY;function Zw(e){return e instanceof Zo||e&&"closed"in e&&He(e.remove)&&He(e.add)&&He(e.unsubscribe)}function pv(e){He(e)?e():e.unsubscribe()}var eb={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},mh={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=mh.delegate;return i!=null&&i.setTimeout?i.setTimeout.apply(i,ci([e,t],Sr(n))):setTimeout.apply(void 0,ci([e,t],Sr(n)))},clearTimeout:function(e){var t=mh.delegate;return((t==null?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function tb(e){mh.setTimeout(function(){throw e})}function yh(){}function hu(e){e()}var Kp=function(e){Cr(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,Zw(n)&&n.add(r)):r.destination=fE,r}return t.create=function(n,r,i){return new zo(n,r,i)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Zo),uE=Function.prototype.bind;function ef(e,t){return uE.call(e,t)}var cE=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){za(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){za(r)}else za(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){za(n)}},e}(),zo=function(e){Cr(t,e);function t(n,r,i){var o=e.call(this)||this,s;if(He(n)||!n)s={next:n??void 0,error:r??void 0,complete:i??void 0};else{var a;o&&eb.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=function(){return o.unsubscribe()},s={next:n.next&&ef(n.next,a),error:n.error&&ef(n.error,a),complete:n.complete&&ef(n.complete,a)}):s=n}return o.destination=new cE(s),o}return t}(Kp);function za(e){tb(e)}function dE(e){throw e}var fE={closed:!0,next:yh,error:dE,complete:yh},Vp=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function es(e){return e}function hE(e){return e.length===0?es:e.length===1?e[0]:function(n){return e.reduce(function(r,i){return i(r)},n)}}var _t=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var i=this,o=mE(t)?t:new zo(t,n,r);return hu(function(){var s=i,a=s.operator,c=s.source;o.add(a?a.call(o,c):c?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=mv(n),new n(function(i,o){var s=new zo({next:function(a){try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});r.subscribe(s)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[Vp]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return hE(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=mv(t),new t(function(r,i){var o;n.subscribe(function(s){return o=s},function(s){return i(s)},function(){return r(o)})})},e.create=function(t){return new e(t)},e}();function mv(e){var t;return(t=e??eb.Promise)!==null&&t!==void 0?t:Promise}function pE(e){return e&&He(e.next)&&He(e.error)&&He(e.complete)}function mE(e){return e&&e instanceof Kp||pE(e)&&Zw(e)}function yE(e){return He(e==null?void 0:e.lift)}function an(e){return function(t){if(yE(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ln(e,t,n,r,i){return new vE(e,t,n,r,i)}var vE=function(e){Cr(t,e);function t(n,r,i,o,s,a){var c=e.call(this,n)||this;return c.onFinalize=s,c.shouldUnsubscribe=a,c._next=r?function(d){try{r(d)}catch(f){n.error(f)}}:e.prototype._next,c._error=o?function(d){try{o(d)}catch(f){n.error(f)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=i?function(){try{i()}catch(d){n.error(d)}finally{this.unsubscribe()}}:e.prototype._complete,c}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t}(Kp),gE=Bp(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Ki=function(e){Cr(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var r=new yv(this,this);return r.operator=n,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new gE},t.prototype.next=function(n){var r=this;hu(function(){var i,o;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var s=$o(r.currentObservers),a=s.next();!a.done;a=s.next()){var c=a.value;c.next(n)}}catch(d){i={error:d}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}})},t.prototype.error=function(n){var r=this;hu(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},t.prototype.complete=function(){var n=this;hu(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var r=this,i=this,o=i.hasError,s=i.isStopped,a=i.observers;return o||s?Xw:(this.currentObservers=null,a.push(n),new Zo(function(){r.currentObservers=null,Ku(a,n)}))},t.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,o=r.thrownError,s=r.isStopped;i?n.error(o):s&&n.complete()},t.prototype.asObservable=function(){var n=new _t;return n.source=this,n},t.create=function(n,r){return new yv(n,r)},t}(_t),yv=function(e){Cr(t,e);function t(n,r){var i=e.call(this)||this;return i.destination=n,i.source=r,i}return t.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},t.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},t.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},t.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:Xw},t}(Ki),Un=function(e){Cr(t,e);function t(n){var r=e.call(this)||this;return r._value=n,r}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(n){var r=e.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},t.prototype.getValue=function(){var n=this,r=n.hasError,i=n.thrownError,o=n._value;if(r)throw i;return this._throwIfClosed(),o},t.prototype.next=function(n){e.prototype.next.call(this,this._value=n)},t}(Ki),nb={now:function(){return(nb.delegate||Date).now()},delegate:void 0},wE=function(e){Cr(t,e);function t(n,r){return e.call(this)||this}return t.prototype.schedule=function(n,r){return this},t}(Zo),Vu={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=Vu.delegate;return i!=null&&i.setInterval?i.setInterval.apply(i,ci([e,t],Sr(n))):setInterval.apply(void 0,ci([e,t],Sr(n)))},clearInterval:function(e){var t=Vu.delegate;return((t==null?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},bE=function(e){Cr(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return t.prototype.schedule=function(n,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var o=this.id,s=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(s,o,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,r),this},t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),Vu.setInterval(n.flush.bind(n,this),i)},t.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&Vu.clearInterval(r)},t.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(n,r){var i=!1,o;try{this.work(n)}catch(s){i=!0,o=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},t.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Ku(o,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(wE),vv=function(){function e(t,n){n===void 0&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(t,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,t).schedule(r,n)},e.now=nb.now,e}(),kE=function(e){Cr(t,e);function t(n,r){r===void 0&&(r=vv.now);var i=e.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return t.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},t}(vv),Wp=new kE(bE),_E=Wp,rb=new _t(function(e){return e.complete()});function ib(e){return e&&He(e.schedule)}function Hp(e){return e[e.length-1]}function xE(e){return He(Hp(e))?e.pop():void 0}function Wl(e){return ib(Hp(e))?e.pop():void 0}function SE(e,t){return typeof Hp(e)=="number"?e.pop():t}var qp=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function ob(e){return He(e==null?void 0:e.then)}function sb(e){return He(e[Vp])}function lb(e){return Symbol.asyncIterator&&He(e==null?void 0:e[Symbol.asyncIterator])}function ab(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function EE(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ub=EE();function cb(e){return He(e==null?void 0:e[ub])}function db(e){return lE(this,arguments,function(){var n,r,i,o;return Jw(this,function(s){switch(s.label){case 0:n=e.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,Io(n.read())];case 3:return r=s.sent(),i=r.value,o=r.done,o?[4,Io(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,Io(i)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function fb(e){return He(e==null?void 0:e.getReader)}function Dn(e){if(e instanceof _t)return e;if(e!=null){if(sb(e))return CE(e);if(qp(e))return IE(e);if(ob(e))return OE(e);if(lb(e))return hb(e);if(cb(e))return jE(e);if(fb(e))return TE(e)}throw ab(e)}function CE(e){return new _t(function(t){var n=e[Vp]();if(He(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function IE(e){return new _t(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function OE(e){return new _t(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,tb)})}function jE(e){return new _t(function(t){var n,r;try{for(var i=$o(e),o=i.next();!o.done;o=i.next()){var s=o.value;if(t.next(s),t.closed)return}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()})}function hb(e){return new _t(function(t){NE(e,t).catch(function(n){return t.error(n)})})}function TE(e){return hb(db(e))}function NE(e,t){var n,r,i,o;return sE(this,void 0,void 0,function(){var s,a;return Jw(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=aE(e),c.label=1;case 1:return[4,n.next()];case 2:if(r=c.sent(),!!r.done)return[3,4];if(s=r.value,t.next(s),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),i={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function vr(e,t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function pb(e,t){return t===void 0&&(t=0),an(function(n,r){n.subscribe(ln(r,function(i){return vr(r,e,function(){return r.next(i)},t)},function(){return vr(r,e,function(){return r.complete()},t)},function(i){return vr(r,e,function(){return r.error(i)},t)}))})}function mb(e,t){return t===void 0&&(t=0),an(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function PE(e,t){return Dn(e).pipe(mb(t),pb(t))}function DE(e,t){return Dn(e).pipe(mb(t),pb(t))}function AE(e,t){return new _t(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function RE(e,t){return new _t(function(n){var r;return vr(n,t,function(){r=e[ub](),vr(n,t,function(){var i,o,s;try{i=r.next(),o=i.value,s=i.done}catch(a){n.error(a);return}s?n.complete():n.next(o)},0,!0)}),function(){return He(r==null?void 0:r.return)&&r.return()}})}function yb(e,t){if(!e)throw new Error("Iterable cannot be null");return new _t(function(n){vr(n,t,function(){var r=e[Symbol.asyncIterator]();vr(n,t,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function LE(e,t){return yb(db(e),t)}function ME(e,t){if(e!=null){if(sb(e))return PE(e,t);if(qp(e))return AE(e,t);if(ob(e))return DE(e,t);if(lb(e))return yb(e,t);if(cb(e))return RE(e,t);if(fb(e))return LE(e,t)}throw ab(e)}function vn(e,t){return t?ME(e,t):Dn(e)}function gr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Wl(e);return vn(e,n)}function gv(e,t){var n=He(e)?e:function(){return e},r=function(i){return i.error(n())};return new _t(t?function(i){return t.schedule(r,0,i)}:r)}var UE=Bp(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});function Di(e,t){var n=typeof t=="object";return new Promise(function(r,i){var o=new zo({next:function(s){r(s),o.unsubscribe()},error:i,complete:function(){n?r(t.defaultValue):i(new UE)}});e.subscribe(o)})}function $E(e){return e instanceof Date&&!isNaN(e)}function fn(e,t){return an(function(n,r){var i=0;n.subscribe(ln(r,function(o){r.next(e.call(t,o,i++))}))})}var zE=Array.isArray;function FE(e,t){return zE(t)?e.apply(void 0,ci([],Sr(t))):e(t)}function vb(e){return fn(function(t){return FE(e,t)})}var BE=Array.isArray,KE=Object.getPrototypeOf,VE=Object.prototype,WE=Object.keys;function HE(e){if(e.length===1){var t=e[0];if(BE(t))return{args:t,keys:null};if(qE(t)){var n=WE(t);return{args:n.map(function(r){return t[r]}),keys:n}}}return{args:e,keys:null}}function qE(e){return e&&typeof e=="object"&&KE(e)===VE}function GE(e,t){return e.reduce(function(n,r,i){return n[r]=t[i],n},{})}function kl(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Wl(e),r=xE(e),i=HE(e),o=i.args,s=i.keys;if(o.length===0)return vn([],n);var a=new _t(YE(o,n,s?function(c){return GE(s,c)}:es));return r?a.pipe(vb(r)):a}function YE(e,t,n){return n===void 0&&(n=es),function(r){wv(t,function(){for(var i=e.length,o=new Array(i),s=i,a=i,c=function(f){wv(t,function(){var p=vn(e[f],t),y=!1;p.subscribe(ln(r,function(g){o[f]=g,y||(y=!0,a--),a||r.next(n(o.slice()))},function(){--s||r.complete()}))},r)},d=0;d<i;d++)c(d)},r)}}function wv(e,t,n){e?vr(n,e,t):t()}function QE(e,t,n,r,i,o,s,a){var c=[],d=0,f=0,p=!1,y=function(){p&&!c.length&&!d&&t.complete()},g=function(x){return d<r?b(x):c.push(x)},b=function(x){o&&t.next(x),d++;var D=!1;Dn(n(x,f++)).subscribe(ln(t,function(E){i==null||i(E),o?g(E):t.next(E)},function(){D=!0},void 0,function(){if(D)try{d--;for(var E=function(){var _=c.shift();s?vr(t,s,function(){return b(_)}):b(_)};c.length&&d<r;)E();y()}catch(_){t.error(_)}}))};return e.subscribe(ln(t,g,function(){p=!0,y()})),function(){a==null||a()}}function Hl(e,t,n){return n===void 0&&(n=1/0),He(t)?Hl(function(r,i){return fn(function(o,s){return t(r,o,i,s)})(Dn(e(r,i)))},n):(typeof t=="number"&&(n=t),an(function(r,i){return QE(r,i,e,n)}))}function gb(e){return e===void 0&&(e=1/0),Hl(es,e)}function JE(){return gb(1)}function vh(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return JE()(vn(e,Wl(e)))}var XE=["addListener","removeListener"],ZE=["addEventListener","removeEventListener"],eC=["on","off"];function Jn(e,t,n,r){if(He(n)&&(r=n,n=void 0),r)return Jn(e,t,n).pipe(vb(r));var i=Sr(rC(e)?ZE.map(function(a){return function(c){return e[a](t,c,n)}}):tC(e)?XE.map(bv(e,t)):nC(e)?eC.map(bv(e,t)):[],2),o=i[0],s=i[1];if(!o&&qp(e))return Hl(function(a){return Jn(a,t,n)})(Dn(e));if(!o)throw new TypeError("Invalid event target");return new _t(function(a){var c=function(){for(var d=[],f=0;f<arguments.length;f++)d[f]=arguments[f];return a.next(1<d.length?d:d[0])};return o(c),function(){return s(c)}})}function bv(e,t){return function(n){return function(r){return e[n](t,r)}}}function tC(e){return He(e.addListener)&&He(e.removeListener)}function nC(e){return He(e.on)&&He(e.off)}function rC(e){return He(e.addEventListener)&&He(e.removeEventListener)}function wb(e,t,n){e===void 0&&(e=0),n===void 0&&(n=_E);var r=-1;return t!=null&&(ib(t)?n=t:r=t),new _t(function(i){var o=$E(e)?+e-n.now():e;o<0&&(o=0);var s=0;return n.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function Oc(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Wl(e),r=SE(e,1/0),i=e;return i.length?i.length===1?Dn(i[0]):gb(r)(vn(i,n)):rb}function _n(e,t){return an(function(n,r){var i=0;n.subscribe(ln(r,function(o){return e.call(t,o,i++)&&r.next(o)}))})}function gh(e){return an(function(t,n){var r=null,i=!1,o;r=t.subscribe(ln(n,void 0,void 0,function(s){o=Dn(e(s,gh(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function kv(e,t){return t===void 0&&(t=Wp),an(function(n,r){var i=null,o=null,s=null,a=function(){if(i){i.unsubscribe(),i=null;var d=o;o=null,r.next(d)}};function c(){var d=s+e,f=t.now();if(f<d){i=this.schedule(void 0,d-f),r.add(i);return}a()}n.subscribe(ln(r,function(d){o=d,s=t.now(),i||(i=t.schedule(c,e),r.add(i))},function(){a(),r.complete()},void 0,function(){o=i=null}))})}function ji(e){return e<=0?function(){return rb}:an(function(t,n){var r=0;t.subscribe(ln(n,function(i){++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function iC(){return an(function(e,t){e.subscribe(ln(t,yh))})}function oC(e){return fn(function(){return e})}function bb(e,t){return t?function(n){return vh(t.pipe(ji(1),iC()),n.pipe(bb(e)))}:Hl(function(n,r){return Dn(e(n,r)).pipe(ji(1),oC(n))})}function kb(e,t){t===void 0&&(t=Wp);var n=wb(e,t);return bb(function(){return n})}function _b(e,t){return t===void 0&&(t=es),e=e??sC,an(function(n,r){var i,o=!0;n.subscribe(ln(r,function(s){var a=t(s);(o||!e(i,a))&&(o=!1,i=a,r.next(s))}))})}function sC(e,t){return e===t}function lC(e){e===void 0&&(e={});var t=e.connector,n=t===void 0?function(){return new Ki}:t,r=e.resetOnError,i=r===void 0?!0:r,o=e.resetOnComplete,s=o===void 0?!0:o,a=e.resetOnRefCountZero,c=a===void 0?!0:a;return function(d){var f,p,y,g=0,b=!1,x=!1,D=function(){p==null||p.unsubscribe(),p=void 0},E=function(){D(),f=y=void 0,b=x=!1},_=function(){var k=f;E(),k==null||k.unsubscribe()};return an(function(k,$){g++,!x&&!b&&D();var W=y=y??n();$.add(function(){g--,g===0&&!x&&!b&&(p=tf(_,c))}),W.subscribe($),!f&&g>0&&(f=new zo({next:function(K){return W.next(K)},error:function(K){x=!0,D(),p=tf(E,i,K),W.error(K)},complete:function(){b=!0,D(),p=tf(E,s),W.complete()}}),Dn(k).subscribe(f))})(d)}}function tf(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(t===!0){e();return}if(t!==!1){var i=new zo({next:function(){i.unsubscribe(),e()}});return Dn(t.apply(void 0,ci([],Sr(n)))).subscribe(i)}}function _v(e){return _n(function(t,n){return e<=n})}function xb(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Wl(e);return an(function(r,i){(n?vh(e,r,n):vh(e,r)).subscribe(i)})}function Kt(e,t){return an(function(n,r){var i=null,o=0,s=!1,a=function(){return s&&!i&&r.complete()};n.subscribe(ln(r,function(c){i==null||i.unsubscribe();var d=0,f=o++;Dn(e(c,f)).subscribe(i=ln(r,function(p){return r.next(t?t(c,p,f,d++):p)},function(){i=null,a()}))},function(){s=!0,a()}))})}function wh(e,t,n){var r=He(e)||t||n?{next:e,error:t,complete:n}:e;return r?an(function(i,o){var s;(s=r.subscribe)===null||s===void 0||s.call(r);var a=!0;i.subscribe(ln(o,function(c){var d;(d=r.next)===null||d===void 0||d.call(r,c),o.next(c)},function(){var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},function(c){var d;a=!1,(d=r.error)===null||d===void 0||d.call(r,c),o.error(c)},function(){var c,d;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):es}const sn=()=>new Map,bh=e=>{const t=sn();return e.forEach((n,r)=>{t.set(r,n)}),t},Ir=(e,t,n)=>{let r=e.get(t);return r===void 0&&e.set(t,r=n()),r},aC=(e,t)=>{const n=[];for(const[r,i]of e)n.push(t(i,r));return n},uC=(e,t)=>{for(const[n,r]of e)if(t(r,n))return!0;return!1};class cC{constructor(){this._observers=sn()}on(t,n){return Ir(this._observers,t,Bi).add(n),n}once(t,n){const r=(...i)=>{this.off(t,r),n(...i)};this.on(t,r)}off(t,n){const r=this._observers.get(t);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(t))}emit(t,n){return ai((this._observers.get(t)||sn()).values()).forEach(r=>r(...n))}destroy(){this._observers=sn()}}class dC{constructor(){this._observers=sn()}on(t,n){Ir(this._observers,t,Bi).add(n)}once(t,n){const r=(...i)=>{this.off(t,r),n(...i)};this.on(t,r)}off(t,n){const r=this._observers.get(t);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(t))}emit(t,n){return ai((this._observers.get(t)||sn()).values()).forEach(r=>r(...n))}destroy(){this._observers=sn()}}const fC=crypto.getRandomValues.bind(crypto),Sb=()=>fC(new Uint32Array(1))[0],hC=[1e7]+-1e3+-4e3+-8e3+-1e11,pC=()=>hC.replace(/[018]/g,e=>(e^Sb()&15>>e/4).toString(16)),Wu=Date.now,xv=e=>new Promise(e);Promise.all.bind(Promise);const Sv=e=>e===void 0?null:e;class mC{constructor(){this.map=new Map}setItem(t,n){this.map.set(t,n)}getItem(t){return this.map.get(t)}}let Eb=new mC,yC=!0;try{typeof localStorage<"u"&&localStorage&&(Eb=localStorage,yC=!1)}catch{}const vC=Eb,gC=Object.assign,Cb=Object.keys,wC=(e,t)=>{for(const n in e)t(e[n],n)},Ev=e=>Cb(e).length,Cv=e=>Cb(e).length,bC=e=>{for(const t in e)return!1;return!0},kC=(e,t)=>{for(const n in e)if(!t(e[n],n))return!1;return!0},Ib=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),_C=(e,t)=>e===t||Cv(e)===Cv(t)&&kC(e,(n,r)=>(n!==void 0||Ib(t,r))&&t[r]===n),xC=Object.freeze,Ob=e=>{for(const t in e){const n=e[t];(typeof n=="object"||typeof n=="function")&&Ob(e[t])}return xC(e)},Iv=Symbol("Equality"),Gp=(e,t,n=0)=>{try{for(;n<e.length;n++)e[n](...t)}finally{n<e.length&&Gp(e,t,n+1)}},Gs=(e,t)=>{if(e===t)return!0;if(e==null||t==null||e.constructor!==t.constructor)return!1;if(e[Iv]!=null)return e[Iv](t);switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:{if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;break}case Set:{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;break}case Map:{if(e.size!==t.size)return!1;for(const n of e.keys())if(!t.has(n)||!Gs(e.get(n),t.get(n)))return!1;break}case Object:if(Ev(e)!==Ev(t))return!1;for(const n in e)if(!Ib(e,n)||!Gs(e[n],t[n]))return!1;break;case Array:if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!Gs(e[n],t[n]))return!1;break;default:return!1}return!0},SC=(e,t)=>t.includes(e),_l=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";let qn;const EC=()=>{if(qn===void 0)if(_l){qn=sn();const e=process.argv;let t=null;for(let n=0;n<e.length;n++){const r=e[n];r[0]==="-"?(t!==null&&qn.set(t,""),t=r):t!==null&&(qn.set(t,r),t=null)}t!==null&&qn.set(t,"")}else typeof location=="object"?(qn=sn(),(location.search||"?").slice(1).split("&").forEach(e=>{if(e.length!==0){const[t,n]=e.split("=");qn.set(`--${sv(t,"-")}`,n),qn.set(`-${sv(t,"-")}`,n)}})):qn=sn();return qn},kh=e=>EC().has(e),Hu=e=>Sv(_l?process.env[e.toUpperCase().replaceAll("-","_")]:vC.getItem(e)),jb=e=>kh("--"+e)||Hu(e)!==null;jb("production");const CC=_l&&SC({}.FORCE_COLOR,["true","1","2"]),IC=CC||!kh("--no-colors")&&!jb("no-color")&&(!_l||process.stdout.isTTY)&&(!_l||kh("--color")||Hu("COLORTERM")!==null||(Hu("TERM")||"").includes("color"));class OC{constructor(t,n){this.left=t,this.right=n}}const sr=(e,t)=>new OC(e,t);typeof DOMParser<"u"&&new DOMParser;const jC=e=>aC(e,(t,n)=>`${n}:${t};`).join(""),Or=Symbol,Tb=Or(),Nb=Or(),TC=Or(),NC=Or(),PC=Or(),Pb=Or(),DC=Or(),Yp=Or(),AC=Or(),RC=e=>{var i;e.length===1&&((i=e[0])==null?void 0:i.constructor)===Function&&(e=e[0]());const t=[],n=[];let r=0;for(;r<e.length;r++){const o=e[r];if(o===void 0)break;if(o.constructor===String||o.constructor===Number)t.push(o);else if(o.constructor===Object)break}for(r>0&&n.push(t.join(""));r<e.length;r++){const o=e[r];o instanceof Symbol||n.push(o)}return n},LC={[Tb]:sr("font-weight","bold"),[Nb]:sr("font-weight","normal"),[TC]:sr("color","blue"),[PC]:sr("color","green"),[NC]:sr("color","grey"),[Pb]:sr("color","red"),[DC]:sr("color","purple"),[Yp]:sr("color","orange"),[AC]:sr("color","black")},MC=e=>{var s;e.length===1&&((s=e[0])==null?void 0:s.constructor)===Function&&(e=e[0]());const t=[],n=[],r=sn();let i=[],o=0;for(;o<e.length;o++){const a=e[o],c=LC[a];if(c!==void 0)r.set(c.left,c.right);else{if(a===void 0)break;if(a.constructor===String||a.constructor===Number){const d=jC(r);o>0||d.length>0?(t.push("%c"+a),n.push(d)):t.push(a)}else break}}for(o>0&&(i=n,i.unshift(t.join("")));o<e.length;o++){const a=e[o];a instanceof Symbol||i.push(a)}return i},Db=IC?MC:RC,UC=(...e)=>{console.log(...Db(e)),Ab.forEach(t=>t.print(e))},$C=(...e)=>{console.warn(...Db(e)),e.unshift(Yp),Ab.forEach(t=>t.print(e))},Ab=Bi(),Rb=e=>({[Symbol.iterator](){return this},next:e}),zC=(e,t)=>Rb(()=>{let n;do n=e.next();while(!n.done&&!t(n.value));return n}),nf=(e,t)=>Rb(()=>{const{done:n,value:r}=e.next();return{done:n,value:n?void 0:t(r)}});class Lb{constructor(t,n){this.clock=t,this.len=n}}class jc{constructor(){this.clients=new Map}}const Mb=(e,t,n)=>t.clients.forEach((r,i)=>{const o=e.doc.store.clients.get(i);if(o!=null){const s=o[o.length-1],a=s.id.clock+s.length;for(let c=0,d=r[c];c<r.length&&d.clock<a;d=r[++c])Hb(e,o,d.clock,d.len,n)}}),FC=(e,t)=>{let n=0,r=e.length-1;for(;n<=r;){const i=xr((n+r)/2),o=e[i],s=o.clock;if(s<=t){if(t<s+o.len)return i;n=i+1}else r=i-1}return null},Ub=(e,t)=>{const n=e.clients.get(t.client);return n!==void 0&&FC(n,t.clock)!==null},Qp=e=>{e.clients.forEach(t=>{t.sort((i,o)=>i.clock-o.clock);let n,r;for(n=1,r=1;n<t.length;n++){const i=t[r-1],o=t[n];i.clock+i.len>=o.clock?i.len=Yo(i.len,o.clock+o.len-i.clock):(r<n&&(t[r]=o),r++)}t.length=r})},BC=e=>{const t=new jc;for(let n=0;n<e.length;n++)e[n].clients.forEach((r,i)=>{if(!t.clients.has(i)){const o=r.slice();for(let s=n+1;s<e.length;s++)PS(o,e[s].clients.get(i)||[]);t.clients.set(i,o)}});return Qp(t),t},qu=(e,t,n,r)=>{Ir(e.clients,t,()=>[]).push(new Lb(n,r))},Jp=(e,t)=>{je(e.restEncoder,t.clients.size),ai(t.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{e.resetDsCurVal(),je(e.restEncoder,n);const i=r.length;je(e.restEncoder,i);for(let o=0;o<i;o++){const s=r[o];e.writeDsClock(s.clock),e.writeDsLen(s.len)}})},KC=e=>{const t=new jc,n=Ye(e.restDecoder);for(let r=0;r<n;r++){e.resetDsCurVal();const i=Ye(e.restDecoder),o=Ye(e.restDecoder);if(o>0){const s=Ir(t.clients,i,()=>[]);for(let a=0;a<o;a++)s.push(new Lb(e.readDsClock(),e.readDsLen()))}}return t},Ov=(e,t,n)=>{const r=new jc,i=Ye(e.restDecoder);for(let o=0;o<i;o++){e.resetDsCurVal();const s=Ye(e.restDecoder),a=Ye(e.restDecoder),c=n.clients.get(s)||[],d=jt(n,s);for(let f=0;f<a;f++){const p=e.readDsClock(),y=p+e.readDsLen();if(p<d){d<y&&qu(r,s,d,y-d);let g=nr(c,p),b=c[g];for(!b.deleted&&b.id.clock<p&&(c.splice(g+1,0,ec(t,b,p-b.id.clock)),g++);g<c.length&&(b=c[g++],b.id.clock<y);)b.deleted||(y<b.id.clock+b.length&&c.splice(g,0,ec(t,b,y-b.id.clock)),b.delete(t))}else qu(r,s,p,y-p)}}if(r.clients.size>0){const o=new Tc;return je(o.restEncoder,0),Jp(o,r),o.toUint8Array()}return null},$b=Sb;class ts extends cC{constructor({guid:t=pC(),collectionid:n=null,gc:r=!0,gcFilter:i=()=>!0,meta:o=null,autoLoad:s=!1,shouldLoad:a=!0}={}){super(),this.gc=r,this.gcFilter=i,this.clientID=$b(),this.guid=t,this.collectionid=n,this.share=new Map,this.store=new Vb,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=s,this.meta=o,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=xv(d=>{this.on("load",()=>{this.isLoaded=!0,d(this)})});const c=()=>xv(d=>{const f=p=>{(p===void 0||p===!0)&&(this.off("sync",f),d())};this.on("sync",f)});this.on("sync",d=>{d===!1&&this.isSynced&&(this.whenSynced=c()),this.isSynced=d===void 0||d===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=c()}load(){const t=this._item;t!==null&&!this.shouldLoad&&Je(t.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(ai(this.subdocs).map(t=>t.guid))}transact(t,n=null){return Je(this,t,n)}get(t,n=Lt){const r=Ir(this.share,t,()=>{const o=new n;return o._integrate(this,null),o}),i=r.constructor;if(n!==Lt&&i!==n)if(i===Lt){const o=new n;o._map=r._map,r._map.forEach(s=>{for(;s!==null;s=s.left)s.parent=o}),o._start=r._start;for(let s=o._start;s!==null;s=s.right)s.parent=o;return o._length=r._length,this.share.set(t,o),o._integrate(this,null),o}else throw new Error(`Type with the name ${t} has already been defined with a different constructor`);return r}getArray(t=""){return this.get(t,jo)}getText(t=""){return this.get(t,Bo)}getMap(t=""){return this.get(t,Fo)}getXmlElement(t=""){return this.get(t,Ko)}getXmlFragment(t=""){return this.get(t,Vi)}toJSON(){const t={};return this.share.forEach((n,r)=>{t[r]=n.toJSON()}),t}destroy(){this.isDestroyed=!0,ai(this.subdocs).forEach(n=>n.destroy());const t=this._item;if(t!==null){this._item=null;const n=t.content;n.doc=new ts({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=t,Je(t.parent.doc,r=>{const i=n.doc;t.deleted||r.subdocsAdded.add(i),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class VC{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=Ye(this.restDecoder),this.dsCurrVal}readDsLen(){const t=Ye(this.restDecoder)+1;return this.dsCurrVal+=t,t}}class xl extends VC{constructor(t){super(t),this.keys=[],Ye(t),this.keyClockDecoder=new Xd(Dt(t)),this.clientDecoder=new fu(Dt(t)),this.leftClockDecoder=new Xd(Dt(t)),this.rightClockDecoder=new Xd(Dt(t)),this.infoDecoder=new hv(Dt(t),Uo),this.stringDecoder=new oE(Dt(t)),this.parentInfoDecoder=new hv(Dt(t),Uo),this.typeRefDecoder=new fu(Dt(t)),this.lenDecoder=new fu(Dt(t))}readLeftID(){return new Oo(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Oo(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return ii(this.restDecoder)}readBuf(){return Dt(this.restDecoder)}readJSON(){return ii(this.restDecoder)}readKey(){const t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class WC{constructor(){this.restEncoder=Jo()}toUint8Array(){return pn(this.restEncoder)}resetDsCurVal(){}writeDsClock(t){je(this.restEncoder,t)}writeDsLen(t){je(this.restEncoder,t)}}class HC extends WC{writeLeftID(t){je(this.restEncoder,t.client),je(this.restEncoder,t.clock)}writeRightID(t){je(this.restEncoder,t.client),je(this.restEncoder,t.clock)}writeClient(t){je(this.restEncoder,t)}writeInfo(t){fh(this.restEncoder,t)}writeString(t){En(this.restEncoder,t)}writeParentInfo(t){je(this.restEncoder,t?1:0)}writeTypeRef(t){je(this.restEncoder,t)}writeLen(t){je(this.restEncoder,t)}writeAny(t){ri(this.restEncoder,t)}writeBuf(t){Pt(this.restEncoder,t)}writeJSON(t){En(this.restEncoder,JSON.stringify(t))}writeKey(t){En(this.restEncoder,t)}}class zb{constructor(){this.restEncoder=Jo(),this.dsCurrVal=0}toUint8Array(){return pn(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){const n=t-this.dsCurrVal;this.dsCurrVal=t,je(this.restEncoder,n)}writeDsLen(t){t===0&&tr(),je(this.restEncoder,t-1),this.dsCurrVal+=t}}class Tc extends zb{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new Jd,this.clientEncoder=new du,this.leftClockEncoder=new Jd,this.rightClockEncoder=new Jd,this.infoEncoder=new uv(fh),this.stringEncoder=new JS,this.parentInfoEncoder=new uv(fh),this.typeRefEncoder=new du,this.lenEncoder=new du}toUint8Array(){const t=Jo();return je(t,0),Pt(t,this.keyClockEncoder.toUint8Array()),Pt(t,this.clientEncoder.toUint8Array()),Pt(t,this.leftClockEncoder.toUint8Array()),Pt(t,this.rightClockEncoder.toUint8Array()),Pt(t,pn(this.infoEncoder)),Pt(t,this.stringEncoder.toUint8Array()),Pt(t,pn(this.parentInfoEncoder)),Pt(t,this.typeRefEncoder.toUint8Array()),Pt(t,this.lenEncoder.toUint8Array()),Kl(t,pn(this.restEncoder)),pn(t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){ri(this.restEncoder,t)}writeBuf(t){Pt(this.restEncoder,t)}writeJSON(t){ri(this.restEncoder,t)}writeKey(t){const n=this.keyMap.get(t);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(n)}}const qC=(e,t,n,r)=>{r=Yo(r,t[0].id.clock);const i=nr(t,r);je(e.restEncoder,t.length-i),e.writeClient(n),je(e.restEncoder,r);const o=t[i];o.write(e,r-o.id.clock);for(let s=i+1;s<t.length;s++)t[s].write(e,0)},Fb=(e,t,n)=>{const r=new Map;n.forEach((i,o)=>{jt(t,o)>i&&r.set(o,i)}),Xp(t).forEach((i,o)=>{n.has(o)||r.set(o,0)}),je(e.restEncoder,r.size),ai(r.entries()).sort((i,o)=>o[0]-i[0]).forEach(([i,o])=>{qC(e,t.clients.get(i),i,o)})},GC=(e,t)=>{const n=sn(),r=Ye(e.restDecoder);for(let i=0;i<r;i++){const o=Ye(e.restDecoder),s=new Array(o),a=e.readClient();let c=Ye(e.restDecoder);n.set(a,{i:0,refs:s});for(let d=0;d<o;d++){const f=e.readInfo();switch(Ec&f){case 0:{const p=e.readLen();s[d]=new In(Fe(a,c),p),c+=p;break}case 10:{const p=Ye(e.restDecoder);s[d]=new On(Fe(a,c),p),c+=p;break}default:{const p=(f&(yr|yn))===0,y=new kt(Fe(a,c),null,(f&yn)===yn?e.readLeftID():null,null,(f&yr)===yr?e.readRightID():null,p?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,p&&(f&wl)===wl?e.readString():null,h1(e,f));s[d]=y,c+=y.length}}}}return n},YC=(e,t,n)=>{const r=[];let i=ai(n.keys()).sort((g,b)=>g-b);if(i.length===0)return null;const o=()=>{if(i.length===0)return null;let g=n.get(i[i.length-1]);for(;g.refs.length===g.i;)if(i.pop(),i.length>0)g=n.get(i[i.length-1]);else return null;return g};let s=o();if(s===null)return null;const a=new Vb,c=new Map,d=(g,b)=>{const x=c.get(g);(x==null||x>b)&&c.set(g,b)};let f=s.refs[s.i++];const p=new Map,y=()=>{for(const g of r){const b=g.id.client,x=n.get(b);x?(x.i--,a.clients.set(b,x.refs.slice(x.i)),n.delete(b),x.i=0,x.refs=[]):a.clients.set(b,[g]),i=i.filter(D=>D!==b)}r.length=0};for(;;){if(f.constructor!==On){const b=Ir(p,f.id.client,()=>jt(t,f.id.client))-f.id.clock;if(b<0)r.push(f),d(f.id.client,f.id.clock-1),y();else{const x=f.getMissing(e,t);if(x!==null){r.push(f);const D=n.get(x)||{refs:[],i:0};if(D.refs.length===D.i)d(x,jt(t,x)),y();else{f=D.refs[D.i++];continue}}else(b===0||b<f.length)&&(f.integrate(e,b),p.set(f.id.client,f.id.clock+f.length))}}if(r.length>0)f=r.pop();else if(s!==null&&s.i<s.refs.length)f=s.refs[s.i++];else{if(s=o(),s===null)break;f=s.refs[s.i++]}}if(a.clients.size>0){const g=new Tc;return Fb(g,a,new Map),je(g.restEncoder,0),{missing:c,update:g.toUint8Array()}}return null},QC=(e,t)=>Fb(e,t.doc.store,t.beforeState),JC=(e,t,n,r=new xl(e))=>Je(t,i=>{i.local=!1;let o=!1;const s=i.doc,a=s.store,c=GC(r,s),d=YC(i,a,c),f=a.pendingStructs;if(f){for(const[y,g]of f.missing)if(g<jt(a,y)){o=!0;break}if(d){for(const[y,g]of d.missing){const b=f.missing.get(y);(b==null||b>g)&&f.missing.set(y,g)}f.update=Gu([f.update,d.update])}}else a.pendingStructs=d;const p=Ov(r,i,a);if(a.pendingDs){const y=new xl(Vl(a.pendingDs));Ye(y.restDecoder);const g=Ov(y,i,a);p&&g?a.pendingDs=Gu([p,g]):a.pendingDs=p||g}else a.pendingDs=p;if(o){const y=a.pendingStructs.update;a.pendingStructs=null,Bb(i.doc,y)}},n,!1),Bb=(e,t,n,r=xl)=>{const i=Vl(t);JC(i,e,n,new r(i))};class XC{constructor(){this.l=[]}}const jv=()=>new XC,Tv=(e,t)=>e.l.push(t),Nv=(e,t)=>{const n=e.l,r=n.length;e.l=n.filter(i=>t!==i),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},Kb=(e,t,n)=>Gp(e.l,[t,n]);class Oo{constructor(t,n){this.client=t,this.clock=n}}const Fa=(e,t)=>e===t||e!==null&&t!==null&&e.client===t.client&&e.clock===t.clock,Fe=(e,t)=>new Oo(e,t),ZC=e=>{for(const[t,n]of e.doc.share.entries())if(n===e)return t;throw tr()},lo=(e,t)=>t===void 0?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!Ub(t.ds,e.id),_h=(e,t)=>{const n=Ir(e.meta,_h,Bi),r=e.doc.store;n.has(t)||(t.sv.forEach((i,o)=>{i<jt(r,o)&&di(e,Fe(o,i))}),Mb(e,t.ds,i=>{}),n.add(t))};class Vb{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Xp=e=>{const t=new Map;return e.clients.forEach((n,r)=>{const i=n[n.length-1];t.set(r,i.id.clock+i.length)}),t},jt=(e,t)=>{const n=e.clients.get(t);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},Wb=(e,t)=>{let n=e.clients.get(t.id.client);if(n===void 0)n=[],e.clients.set(t.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==t.id.clock)throw tr()}n.push(t)},nr=(e,t)=>{let n=0,r=e.length-1,i=e[r],o=i.id.clock;if(o===t)return r;let s=xr(t/(o+i.length-1)*r);for(;n<=r;){if(i=e[s],o=i.id.clock,o<=t){if(t<o+i.length)return s;n=s+1}else r=s-1;s=xr((n+r)/2)}throw tr()},eI=(e,t)=>{const n=e.clients.get(t.client);return n[nr(n,t.clock)]},rf=eI,xh=(e,t,n)=>{const r=nr(t,n),i=t[r];return i.id.clock<n&&i instanceof kt?(t.splice(r+1,0,ec(e,i,n-i.id.clock)),r+1):r},di=(e,t)=>{const n=e.doc.store.clients.get(t.client);return n[xh(e,n,t.clock)]},Pv=(e,t,n)=>{const r=t.clients.get(n.client),i=nr(r,n.clock),o=r[i];return n.clock!==o.id.clock+o.length-1&&o.constructor!==In&&r.splice(i+1,0,ec(e,o,n.clock-o.id.clock+1)),o},tI=(e,t,n)=>{const r=e.clients.get(t.id.client);r[nr(r,t.id.clock)]=n},Hb=(e,t,n,r,i)=>{if(r===0)return;const o=n+r;let s=xh(e,t,n),a;do a=t[s++],o<a.id.clock+a.length&&xh(e,t,o),i(a);while(s<t.length&&t[s].id.clock<o)};class nI{constructor(t,n,r){this.doc=t,this.deleteSet=new jc,this.beforeState=Xp(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const Dv=(e,t)=>t.deleteSet.clients.size===0&&!uC(t.afterState,(n,r)=>t.beforeState.get(r)!==n)?!1:(Qp(t.deleteSet),QC(e,t),Jp(e,t.deleteSet),!0),Av=(e,t,n)=>{const r=t._item;(r===null||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&Ir(e.changed,t,Bi).add(n)},pu=(e,t)=>{let n=e[t],r=e[t-1],i=t;for(;i>0;n=r,r=e[--i-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof kt&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}const o=t-i;return o&&e.splice(t+1-o,o),o},rI=(e,t,n)=>{for(const[r,i]of e.clients.entries()){const o=t.clients.get(r);for(let s=i.length-1;s>=0;s--){const a=i[s],c=a.clock+a.len;for(let d=nr(o,a.clock),f=o[d];d<o.length&&f.id.clock<c;f=o[++d]){const p=o[d];if(a.clock+a.len<=p.id.clock)break;p instanceof kt&&p.deleted&&!p.keep&&n(p)&&p.gc(t,!1)}}}},iI=(e,t)=>{e.clients.forEach((n,r)=>{const i=t.clients.get(r);for(let o=n.length-1;o>=0;o--){const s=n[o],a=Ww(i.length-1,1+nr(i,s.clock+s.len-1));for(let c=a,d=i[c];c>0&&d.id.clock>=s.clock;d=i[c])c-=1+pu(i,c)}})},qb=(e,t)=>{if(t<e.length){const n=e[t],r=n.doc,i=r.store,o=n.deleteSet,s=n._mergeStructs;try{Qp(o),n.afterState=Xp(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const a=[];n.changed.forEach((c,d)=>a.push(()=>{(d._item===null||!d._item.deleted)&&d._callObserver(n,c)})),a.push(()=>{n.changedParentTypes.forEach((c,d)=>{d._dEH.l.length>0&&(d._item===null||!d._item.deleted)&&(c=c.filter(f=>f.target._item===null||!f.target._item.deleted),c.forEach(f=>{f.currentTarget=d,f._path=null}),c.sort((f,p)=>f.path.length-p.path.length),Kb(d._dEH,c,n))})}),a.push(()=>r.emit("afterTransaction",[n,r])),Gp(a,[]),n._needFormattingCleanup&&_I(n)}finally{r.gc&&rI(o,i,r.gcFilter),iI(o,i),n.afterState.forEach((f,p)=>{const y=n.beforeState.get(p)||0;if(y!==f){const g=i.clients.get(p),b=Yo(nr(g,y),1);for(let x=g.length-1;x>=b;)x-=1+pu(g,x)}});for(let f=s.length-1;f>=0;f--){const{client:p,clock:y}=s[f].id,g=i.clients.get(p),b=nr(g,y);b+1<g.length&&pu(g,b+1)>1||b>0&&pu(g,b)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(UC(Yp,Tb,"[yjs] ",Nb,Pb,"Changed the client-id because another client seems to be using it."),r.clientID=$b()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const f=new HC;Dv(f,n)&&r.emit("update",[f.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const f=new Tc;Dv(f,n)&&r.emit("updateV2",[f.toUint8Array(),n.origin,r,n])}const{subdocsAdded:a,subdocsLoaded:c,subdocsRemoved:d}=n;(a.size>0||d.size>0||c.size>0)&&(a.forEach(f=>{f.clientID=r.clientID,f.collectionid==null&&(f.collectionid=r.collectionid),r.subdocs.add(f)}),d.forEach(f=>r.subdocs.delete(f)),r.emit("subdocs",[{loaded:c,added:a,removed:d},r,n]),d.forEach(f=>f.destroy())),e.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,e])):qb(e,t+1)}}},Je=(e,t,n=null,r=!0)=>{const i=e._transactionCleanups;let o=!1,s=null;e._transaction===null&&(o=!0,e._transaction=new nI(e,n,r),i.push(e._transaction),i.length===1&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{s=t(e._transaction)}finally{if(o){const a=e._transaction===i[0];e._transaction=null,a&&qb(i,0)}}return s};function*oI(e){const t=Ye(e.restDecoder);for(let n=0;n<t;n++){const r=Ye(e.restDecoder),i=e.readClient();let o=Ye(e.restDecoder);for(let s=0;s<r;s++){const a=e.readInfo();if(a===10){const c=Ye(e.restDecoder);yield new On(Fe(i,o),c),o+=c}else if(Ec&a){const c=(a&(yr|yn))===0,d=new kt(Fe(i,o),null,(a&yn)===yn?e.readLeftID():null,null,(a&yr)===yr?e.readRightID():null,c?e.readParentInfo()?e.readString():e.readLeftID():null,c&&(a&wl)===wl?e.readString():null,h1(e,a));yield d,o+=d.length}else{const c=e.readLen();yield new In(Fe(i,o),c),o+=c}}}}class Gb{constructor(t,n){this.gen=oI(t),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===On);return this.curr}}class sI{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}}const Yb=(e,t=zb,n=xl)=>{const r=new t,i=new Gb(new n(Vl(e)),!1);let o=i.curr;if(o!==null){let s=0,a=o.id.client,c=o.id.clock!==0,d=c?0:o.id.clock+o.length;for(;o!==null;o=i.next())a!==o.id.client&&(d!==0&&(s++,je(r.restEncoder,a),je(r.restEncoder,d)),a=o.id.client,d=0,c=o.id.clock!==0),o.constructor===On&&(c=!0),c||(d=o.id.clock+o.length);d!==0&&(s++,je(r.restEncoder,a),je(r.restEncoder,d));const f=Jo();return je(f,s),HS(f,r.restEncoder),r.restEncoder=f,r.toUint8Array()}else return je(r.restEncoder,0),r.toUint8Array()},lI=(e,t)=>{if(e.constructor===In){const{client:n,clock:r}=e.id;return new In(Fe(n,r+t),e.length-t)}else if(e.constructor===On){const{client:n,clock:r}=e.id;return new On(Fe(n,r+t),e.length-t)}else{const n=e,{client:r,clock:i}=n.id;return new kt(Fe(r,i+t),null,Fe(r,i+t-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(t))}},Gu=(e,t=xl,n=Tc)=>{if(e.length===1)return e[0];const r=e.map(f=>new t(Vl(f)));let i=r.map(f=>new Gb(f,!0)),o=null;const s=new n,a=new sI(s);for(;i=i.filter(y=>y.curr!==null),i.sort((y,g)=>{if(y.curr.id.client===g.curr.id.client){const b=y.curr.id.clock-g.curr.id.clock;return b===0?y.curr.constructor===g.curr.constructor?0:y.curr.constructor===On?1:-1:b}else return g.curr.id.client-y.curr.id.client}),i.length!==0;){const f=i[0],p=f.curr.id.client;if(o!==null){let y=f.curr,g=!1;for(;y!==null&&y.id.clock+y.length<=o.struct.id.clock+o.struct.length&&y.id.client>=o.struct.id.client;)y=f.next(),g=!0;if(y===null||y.id.client!==p||g&&y.id.clock>o.struct.id.clock+o.struct.length)continue;if(p!==o.struct.id.client)Is(a,o.struct,o.offset),o={struct:y,offset:0},f.next();else if(o.struct.id.clock+o.struct.length<y.id.clock)if(o.struct.constructor===On)o.struct.length=y.id.clock+y.length-o.struct.id.clock;else{Is(a,o.struct,o.offset);const b=y.id.clock-o.struct.id.clock-o.struct.length;o={struct:new On(Fe(p,o.struct.id.clock+o.struct.length),b),offset:0}}else{const b=o.struct.id.clock+o.struct.length-y.id.clock;b>0&&(o.struct.constructor===On?o.struct.length-=b:y=lI(y,b)),o.struct.mergeWith(y)||(Is(a,o.struct,o.offset),o={struct:y,offset:0},f.next())}}else o={struct:f.curr,offset:0},f.next();for(let y=f.curr;y!==null&&y.id.client===p&&y.id.clock===o.struct.id.clock+o.struct.length&&y.constructor!==On;y=f.next())Is(a,o.struct,o.offset),o={struct:y,offset:0}}o!==null&&(Is(a,o.struct,o.offset),o=null),aI(a);const c=r.map(f=>KC(f)),d=BC(c);return Jp(s,d),s.toUint8Array()},Qb=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:pn(e.encoder.restEncoder)}),e.encoder.restEncoder=Jo(),e.written=0)},Is=(e,t,n)=>{e.written>0&&e.currClient!==t.id.client&&Qb(e),e.written===0&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),je(e.encoder.restEncoder,t.id.clock+n)),t.write(e.encoder,n),e.written++},aI=e=>{Qb(e);const t=e.encoder.restEncoder;je(t,e.clientStructs.length);for(let n=0;n<e.clientStructs.length;n++){const r=e.clientStructs[n];je(t,r.written),Kl(t,r.restEncoder)}},Rv="You must not compute changes after the event-handler fired.";class Nc{constructor(t,n){this.target=t,this.currentTarget=t,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=uI(this.currentTarget,this.target))}deletes(t){return Ub(this.transaction.deleteSet,t.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw ui(Rv);const t=new Map,n=this.target;this.transaction.changed.get(n).forEach(i=>{if(i!==null){const o=n._map.get(i);let s,a;if(this.adds(o)){let c=o.left;for(;c!==null&&this.adds(c);)c=c.left;if(this.deletes(o))if(c!==null&&this.deletes(c))s="delete",a=Qd(c.content.getContent());else return;else c!==null&&this.deletes(c)?(s="update",a=Qd(c.content.getContent())):(s="add",a=void 0)}else if(this.deletes(o))s="delete",a=Qd(o.content.getContent());else return;t.set(i,{action:s,oldValue:a})}}),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(t===null){if(this.transaction.doc._transactionCleanups.length===0)throw ui(Rv);const n=this.target,r=Bi(),i=Bi(),o=[];if(t={added:r,deleted:i,delta:o,keys:this.keys},this.transaction.changed.get(n).has(null)){let a=null;const c=()=>{a&&o.push(a)};for(let d=n._start;d!==null;d=d.right)d.deleted?this.deletes(d)&&!this.adds(d)&&((a===null||a.delete===void 0)&&(c(),a={delete:0}),a.delete+=d.length,i.add(d)):this.adds(d)?((a===null||a.insert===void 0)&&(c(),a={insert:[]}),a.insert=a.insert.concat(d.content.getContent()),r.add(d)):((a===null||a.retain===void 0)&&(c(),a={retain:0}),a.retain+=d.length);a!==null&&a.retain===void 0&&c()}this._changes=t}return t}}const uI=(e,t)=>{const n=[];for(;t._item!==null&&t!==e;){if(t._item.parentSub!==null)n.unshift(t._item.parentSub);else{let r=0,i=t._item.parent._start;for(;i!==t._item&&i!==null;)!i.deleted&&i.countable&&(r+=i.length),i=i.right;n.unshift(r)}t=t._item.parent}return n},Ht=()=>{$C("Invalid access: Add Yjs type to a document before reading data.")},Jb=80;let Zp=0;class cI{constructor(t,n){t.marker=!0,this.p=t,this.index=n,this.timestamp=Zp++}}const dI=e=>{e.timestamp=Zp++},Xb=(e,t,n)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=Zp++},fI=(e,t,n)=>{if(e.length>=Jb){const r=e.reduce((i,o)=>i.timestamp<o.timestamp?i:o);return Xb(r,t,n),r}else{const r=new cI(t,n);return e.push(r),r}},Pc=(e,t)=>{if(e._start===null||t===0||e._searchMarker===null)return null;const n=e._searchMarker.length===0?null:e._searchMarker.reduce((o,s)=>cu(t-o.index)<cu(t-s.index)?o:s);let r=e._start,i=0;for(n!==null&&(r=n.p,i=n.index,dI(n));r.right!==null&&i<t;){if(!r.deleted&&r.countable){if(t<i+r.length)break;i+=r.length}r=r.right}for(;r.left!==null&&i>t;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return n!==null&&cu(n.index-i)<r.parent.length/Jb?(Xb(n,r,i),n):fI(e._searchMarker,r,i)},Sl=(e,t,n)=>{for(let r=e.length-1;r>=0;r--){const i=e[r];if(n>0){let o=i.p;for(o.marker=!1;o&&(o.deleted||!o.countable);)o=o.left,o&&!o.deleted&&o.countable&&(i.index-=o.length);if(o===null||o.marker===!0){e.splice(r,1);continue}i.p=o,o.marker=!0}(t<i.index||n>0&&t===i.index)&&(i.index=Yo(t,i.index+n))}},Dc=(e,t,n)=>{const r=e,i=t.changedParentTypes;for(;Ir(i,e,()=>[]).push(n),e._item!==null;)e=e._item.parent;Kb(r._eH,n,t)};class Lt{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=jv(),this._dEH=jv(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,n){this.doc=t,this._item=n}_copy(){throw er()}clone(){throw er()}_write(t){}get _first(){let t=this._start;for(;t!==null&&t.deleted;)t=t.right;return t}_callObserver(t,n){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){Tv(this._eH,t)}observeDeep(t){Tv(this._dEH,t)}unobserve(t){Nv(this._eH,t)}unobserveDeep(t){Nv(this._dEH,t)}toJSON(){}}const Zb=(e,t,n)=>{e.doc??Ht(),t<0&&(t=e._length+t),n<0&&(n=e._length+n);let r=n-t;const i=[];let o=e._start;for(;o!==null&&r>0;){if(o.countable&&!o.deleted){const s=o.content.getContent();if(s.length<=t)t-=s.length;else{for(let a=t;a<s.length&&r>0;a++)i.push(s[a]),r--;t=0}}o=o.right}return i},e1=e=>{e.doc??Ht();const t=[];let n=e._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let i=0;i<r.length;i++)t.push(r[i])}n=n.right}return t},El=(e,t)=>{let n=0,r=e._start;for(e.doc??Ht();r!==null;){if(r.countable&&!r.deleted){const i=r.content.getContent();for(let o=0;o<i.length;o++)t(i[o],n++,e)}r=r.right}},t1=(e,t)=>{const n=[];return El(e,(r,i)=>{n.push(t(r,i,e))}),n},hI=e=>{let t=e._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;t!==null&&t.deleted;)t=t.right;if(t===null)return{done:!0,value:void 0};n=t.content.getContent(),r=0,t=t.right}const i=n[r++];return n.length<=r&&(n=null),{done:!1,value:i}}}},n1=(e,t)=>{e.doc??Ht();const n=Pc(e,t);let r=e._start;for(n!==null&&(r=n.p,t-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},Yu=(e,t,n,r)=>{let i=n;const o=e.doc,s=o.clientID,a=o.store,c=n===null?t._start:n.right;let d=[];const f=()=>{d.length>0&&(i=new kt(Fe(s,jt(a,s)),i,i&&i.lastId,c,c&&c.id,t,null,new Wi(d)),i.integrate(e,0),d=[])};r.forEach(p=>{if(p===null)d.push(p);else switch(p.constructor){case Number:case Object:case Boolean:case Array:case String:d.push(p);break;default:switch(f(),p.constructor){case Uint8Array:case ArrayBuffer:i=new kt(Fe(s,jt(a,s)),i,i&&i.lastId,c,c&&c.id,t,null,new ql(new Uint8Array(p))),i.integrate(e,0);break;case ts:i=new kt(Fe(s,jt(a,s)),i,i&&i.lastId,c,c&&c.id,t,null,new Gl(p)),i.integrate(e,0);break;default:if(p instanceof Lt)i=new kt(Fe(s,jt(a,s)),i,i&&i.lastId,c,c&&c.id,t,null,new jr(p)),i.integrate(e,0);else throw new Error("Unexpected content type in insert operation")}}}),f()},r1=()=>ui("Length exceeded!"),i1=(e,t,n,r)=>{if(n>t._length)throw r1();if(n===0)return t._searchMarker&&Sl(t._searchMarker,n,r.length),Yu(e,t,null,r);const i=n,o=Pc(t,n);let s=t._start;for(o!==null&&(s=o.p,n-=o.index,n===0&&(s=s.prev,n+=s&&s.countable&&!s.deleted?s.length:0));s!==null;s=s.right)if(!s.deleted&&s.countable){if(n<=s.length){n<s.length&&di(e,Fe(s.id.client,s.id.clock+n));break}n-=s.length}return t._searchMarker&&Sl(t._searchMarker,i,r.length),Yu(e,t,s,r)},pI=(e,t,n)=>{let i=(t._searchMarker||[]).reduce((o,s)=>s.index>o.index?s:o,{index:0,p:t._start}).p;if(i)for(;i.right;)i=i.right;return Yu(e,t,i,n)},o1=(e,t,n,r)=>{if(r===0)return;const i=n,o=r,s=Pc(t,n);let a=t._start;for(s!==null&&(a=s.p,n-=s.index);a!==null&&n>0;a=a.right)!a.deleted&&a.countable&&(n<a.length&&di(e,Fe(a.id.client,a.id.clock+n)),n-=a.length);for(;r>0&&a!==null;)a.deleted||(r<a.length&&di(e,Fe(a.id.client,a.id.clock+r)),a.delete(e),r-=a.length),a=a.right;if(r>0)throw r1();t._searchMarker&&Sl(t._searchMarker,i,-o+r)},Qu=(e,t,n)=>{const r=t._map.get(n);r!==void 0&&r.delete(e)},em=(e,t,n,r)=>{const i=t._map.get(n)||null,o=e.doc,s=o.clientID;let a;if(r==null)a=new Wi([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:a=new Wi([r]);break;case Uint8Array:a=new ql(r);break;case ts:a=new Gl(r);break;default:if(r instanceof Lt)a=new jr(r);else throw new Error("Unexpected content type")}new kt(Fe(s,jt(o.store,s)),i,i&&i.lastId,null,null,t,n,a).integrate(e,0)},tm=(e,t)=>{e.doc??Ht();const n=e._map.get(t);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},s1=e=>{const t={};return e.doc??Ht(),e._map.forEach((n,r)=>{n.deleted||(t[r]=n.content.getContent()[n.length-1])}),t},l1=(e,t)=>{e.doc??Ht();const n=e._map.get(t);return n!==void 0&&!n.deleted},mI=(e,t)=>{const n={};return e._map.forEach((r,i)=>{let o=r;for(;o!==null&&(!t.sv.has(o.id.client)||o.id.clock>=(t.sv.get(o.id.client)||0));)o=o.left;o!==null&&lo(o,t)&&(n[i]=o.content.getContent()[o.length-1])}),n},Ba=e=>(e.doc??Ht(),zC(e._map.entries(),t=>!t[1].deleted));class yI extends Nc{}class jo extends Lt{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){const n=new jo;return n.push(t),n}_integrate(t,n){super._integrate(t,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new jo}clone(){const t=new jo;return t.insert(0,this.toArray().map(n=>n instanceof Lt?n.clone():n)),t}get length(){return this.doc??Ht(),this._length}_callObserver(t,n){super._callObserver(t,n),Dc(this,t,new yI(this,t))}insert(t,n){this.doc!==null?Je(this.doc,r=>{i1(r,this,t,n)}):this._prelimContent.splice(t,0,...n)}push(t){this.doc!==null?Je(this.doc,n=>{pI(n,this,t)}):this._prelimContent.push(...t)}unshift(t){this.insert(0,t)}delete(t,n=1){this.doc!==null?Je(this.doc,r=>{o1(r,this,t,n)}):this._prelimContent.splice(t,n)}get(t){return n1(this,t)}toArray(){return e1(this)}slice(t=0,n=this.length){return Zb(this,t,n)}toJSON(){return this.map(t=>t instanceof Lt?t.toJSON():t)}map(t){return t1(this,t)}forEach(t){El(this,t)}[Symbol.iterator](){return hI(this)}_write(t){t.writeTypeRef(FI)}}const vI=e=>new jo;class gI extends Nc{constructor(t,n,r){super(t,n),this.keysChanged=r}}class Fo extends Lt{constructor(t){super(),this._prelimContent=null,t===void 0?this._prelimContent=new Map:this._prelimContent=new Map(t)}_integrate(t,n){super._integrate(t,n),this._prelimContent.forEach((r,i)=>{this.set(i,r)}),this._prelimContent=null}_copy(){return new Fo}clone(){const t=new Fo;return this.forEach((n,r)=>{t.set(r,n instanceof Lt?n.clone():n)}),t}_callObserver(t,n){Dc(this,t,new gI(this,t,n))}toJSON(){this.doc??Ht();const t={};return this._map.forEach((n,r)=>{if(!n.deleted){const i=n.content.getContent()[n.length-1];t[r]=i instanceof Lt?i.toJSON():i}}),t}get size(){return[...Ba(this)].length}keys(){return nf(Ba(this),t=>t[0])}values(){return nf(Ba(this),t=>t[1].content.getContent()[t[1].length-1])}entries(){return nf(Ba(this),t=>[t[0],t[1].content.getContent()[t[1].length-1]])}forEach(t){this.doc??Ht(),this._map.forEach((n,r)=>{n.deleted||t(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(t){this.doc!==null?Je(this.doc,n=>{Qu(n,this,t)}):this._prelimContent.delete(t)}set(t,n){return this.doc!==null?Je(this.doc,r=>{em(r,this,t,n)}):this._prelimContent.set(t,n),n}get(t){return tm(this,t)}has(t){return l1(this,t)}clear(){this.doc!==null?Je(this.doc,t=>{this.forEach(function(n,r,i){Qu(t,i,r)})}):this._prelimContent.clear()}_write(t){t.writeTypeRef(BI)}}const wI=e=>new Fo,Hr=(e,t)=>e===t||typeof e=="object"&&typeof t=="object"&&e&&t&&_C(e,t);class Sh{constructor(t,n,r,i){this.left=t,this.right=n,this.index=r,this.currentAttributes=i}forward(){switch(this.right===null&&tr(),this.right.content.constructor){case xt:this.right.deleted||ns(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const Lv=(e,t,n)=>{for(;t.right!==null&&n>0;){switch(t.right.content.constructor){case xt:t.right.deleted||ns(t.currentAttributes,t.right.content);break;default:t.right.deleted||(n<t.right.length&&di(e,Fe(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length);break}t.left=t.right,t.right=t.right.right}return t},Ka=(e,t,n,r)=>{const i=new Map,o=r?Pc(t,n):null;if(o){const s=new Sh(o.p.left,o.p,o.index,i);return Lv(e,s,n-o.index)}else{const s=new Sh(null,t._start,0,i);return Lv(e,s,n)}},a1=(e,t,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===xt&&Hr(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const i=e.doc,o=i.clientID;r.forEach((s,a)=>{const c=n.left,d=n.right,f=new kt(Fe(o,jt(i.store,o)),c,c&&c.lastId,d,d&&d.id,t,null,new xt(a,s));f.integrate(e,0),n.right=f,n.forward()})},ns=(e,t)=>{const{key:n,value:r}=t;r===null?e.delete(n):e.set(n,r)},u1=(e,t)=>{for(;e.right!==null;){if(!(e.right.deleted||e.right.content.constructor===xt&&Hr(t[e.right.content.key]??null,e.right.content.value)))break;e.forward()}},c1=(e,t,n,r)=>{const i=e.doc,o=i.clientID,s=new Map;for(const a in r){const c=r[a],d=n.currentAttributes.get(a)??null;if(!Hr(d,c)){s.set(a,d);const{left:f,right:p}=n;n.right=new kt(Fe(o,jt(i.store,o)),f,f&&f.lastId,p,p&&p.id,t,null,new xt(a,c)),n.right.integrate(e,0),n.forward()}}return s},of=(e,t,n,r,i)=>{n.currentAttributes.forEach((y,g)=>{i[g]===void 0&&(i[g]=null)});const o=e.doc,s=o.clientID;u1(n,i);const a=c1(e,t,n,i),c=r.constructor===String?new rr(r):r instanceof Lt?new jr(r):new Gi(r);let{left:d,right:f,index:p}=n;t._searchMarker&&Sl(t._searchMarker,n.index,c.getLength()),f=new kt(Fe(s,jt(o.store,s)),d,d&&d.lastId,f,f&&f.id,t,null,c),f.integrate(e,0),n.right=f,n.index=p,n.forward(),a1(e,t,n,a)},Mv=(e,t,n,r,i)=>{const o=e.doc,s=o.clientID;u1(n,i);const a=c1(e,t,n,i);e:for(;n.right!==null&&(r>0||a.size>0&&(n.right.deleted||n.right.content.constructor===xt));){if(!n.right.deleted)switch(n.right.content.constructor){case xt:{const{key:c,value:d}=n.right.content,f=i[c];if(f!==void 0){if(Hr(f,d))a.delete(c);else{if(r===0)break e;a.set(c,d)}n.right.delete(e)}else n.currentAttributes.set(c,d);break}default:r<n.right.length&&di(e,Fe(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let c="";for(;r>0;r--)c+=`
`;n.right=new kt(Fe(s,jt(o.store,s)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new rr(c)),n.right.integrate(e,0),n.forward()}a1(e,t,n,a)},d1=(e,t,n,r,i)=>{let o=t;const s=sn();for(;o&&(!o.countable||o.deleted);){if(!o.deleted&&o.content.constructor===xt){const d=o.content;s.set(d.key,d)}o=o.right}let a=0,c=!1;for(;t!==o;){if(n===t&&(c=!0),!t.deleted){const d=t.content;switch(d.constructor){case xt:{const{key:f,value:p}=d,y=r.get(f)??null;(s.get(f)!==d||y===p)&&(t.delete(e),a++,!c&&(i.get(f)??null)===p&&y!==p&&(y===null?i.delete(f):i.set(f,y))),!c&&!t.deleted&&ns(i,d);break}}}t=t.right}return a},bI=(e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const n=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===xt){const r=t.content.key;n.has(r)?t.delete(e):n.add(r)}t=t.left}},kI=e=>{let t=0;return Je(e.doc,n=>{let r=e._start,i=e._start,o=sn();const s=bh(o);for(;i;){if(i.deleted===!1)switch(i.content.constructor){case xt:ns(s,i.content);break;default:t+=d1(n,r,i,o,s),o=bh(s),r=i;break}i=i.right}}),t},_I=e=>{const t=new Set,n=e.doc;for(const[r,i]of e.afterState.entries()){const o=e.beforeState.get(r)||0;i!==o&&Hb(e,n.store.clients.get(r),o,i,s=>{!s.deleted&&s.content.constructor===xt&&s.constructor!==In&&t.add(s.parent)})}Je(n,r=>{Mb(e,e.deleteSet,i=>{if(i instanceof In||!i.parent._hasFormatting||t.has(i.parent))return;const o=i.parent;i.content.constructor===xt?t.add(o):bI(r,i)});for(const i of t)kI(i)})},Uv=(e,t,n)=>{const r=n,i=bh(t.currentAttributes),o=t.right;for(;n>0&&t.right!==null;){if(t.right.deleted===!1)switch(t.right.content.constructor){case jr:case Gi:case rr:n<t.right.length&&di(e,Fe(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e);break}t.forward()}o&&d1(e,o,t.right,i,t.currentAttributes);const s=(t.left||t.right).parent;return s._searchMarker&&Sl(s._searchMarker,t.index,-r+n),t};class xI extends Nc{constructor(t,n,r){super(t,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(i=>{i===null?this.childListChanged=!0:this.keysChanged.add(i)})}get changes(){if(this._changes===null){const t={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=t}return this._changes}get delta(){if(this._delta===null){const t=this.target.doc,n=[];Je(t,r=>{const i=new Map,o=new Map;let s=this.target._start,a=null;const c={};let d="",f=0,p=0;const y=()=>{if(a!==null){let g=null;switch(a){case"delete":p>0&&(g={delete:p}),p=0;break;case"insert":(typeof d=="object"||d.length>0)&&(g={insert:d},i.size>0&&(g.attributes={},i.forEach((b,x)=>{b!==null&&(g.attributes[x]=b)}))),d="";break;case"retain":f>0&&(g={retain:f},bC(c)||(g.attributes=gC({},c))),f=0;break}g&&n.push(g),a=null}};for(;s!==null;){switch(s.content.constructor){case jr:case Gi:this.adds(s)?this.deletes(s)||(y(),a="insert",d=s.content.getContent()[0],y()):this.deletes(s)?(a!=="delete"&&(y(),a="delete"),p+=1):s.deleted||(a!=="retain"&&(y(),a="retain"),f+=1);break;case rr:this.adds(s)?this.deletes(s)||(a!=="insert"&&(y(),a="insert"),d+=s.content.str):this.deletes(s)?(a!=="delete"&&(y(),a="delete"),p+=s.length):s.deleted||(a!=="retain"&&(y(),a="retain"),f+=s.length);break;case xt:{const{key:g,value:b}=s.content;if(this.adds(s)){if(!this.deletes(s)){const x=i.get(g)??null;Hr(x,b)?b!==null&&s.delete(r):(a==="retain"&&y(),Hr(b,o.get(g)??null)?delete c[g]:c[g]=b)}}else if(this.deletes(s)){o.set(g,b);const x=i.get(g)??null;Hr(x,b)||(a==="retain"&&y(),c[g]=x)}else if(!s.deleted){o.set(g,b);const x=c[g];x!==void 0&&(Hr(x,b)?x!==null&&s.delete(r):(a==="retain"&&y(),b===null?delete c[g]:c[g]=b))}s.deleted||(a==="insert"&&y(),ns(i,s.content));break}}s=s.right}for(y();n.length>0;){const g=n[n.length-1];if(g.retain!==void 0&&g.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class Bo extends Lt{constructor(t){super(),this._pending=t!==void 0?[()=>this.insert(0,t)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??Ht(),this._length}_integrate(t,n){super._integrate(t,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new Bo}clone(){const t=new Bo;return t.applyDelta(this.toDelta()),t}_callObserver(t,n){super._callObserver(t,n);const r=new xI(this,t,n);Dc(this,t,r),!t.local&&this._hasFormatting&&(t._needFormattingCleanup=!0)}toString(){this.doc??Ht();let t="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===rr&&(t+=n.content.str),n=n.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:n=!0}={}){this.doc!==null?Je(this.doc,r=>{const i=new Sh(null,this._start,0,new Map);for(let o=0;o<t.length;o++){const s=t[o];if(s.insert!==void 0){const a=!n&&typeof s.insert=="string"&&o===t.length-1&&i.right===null&&s.insert.slice(-1)===`
`?s.insert.slice(0,-1):s.insert;(typeof a!="string"||a.length>0)&&of(r,this,i,a,s.attributes||{})}else s.retain!==void 0?Mv(r,this,i,s.retain,s.attributes||{}):s.delete!==void 0&&Uv(r,i,s.delete)}}):this._pending.push(()=>this.applyDelta(t))}toDelta(t,n,r){this.doc??Ht();const i=[],o=new Map,s=this.doc;let a="",c=this._start;function d(){if(a.length>0){const p={};let y=!1;o.forEach((b,x)=>{y=!0,p[x]=b});const g={insert:a};y&&(g.attributes=p),i.push(g),a=""}}const f=()=>{for(;c!==null;){if(lo(c,t)||n!==void 0&&lo(c,n))switch(c.content.constructor){case rr:{const p=o.get("ychange");t!==void 0&&!lo(c,t)?(p===void 0||p.user!==c.id.client||p.type!=="removed")&&(d(),o.set("ychange",r?r("removed",c.id):{type:"removed"})):n!==void 0&&!lo(c,n)?(p===void 0||p.user!==c.id.client||p.type!=="added")&&(d(),o.set("ychange",r?r("added",c.id):{type:"added"})):p!==void 0&&(d(),o.delete("ychange")),a+=c.content.str;break}case jr:case Gi:{d();const p={insert:c.content.getContent()[0]};if(o.size>0){const y={};p.attributes=y,o.forEach((g,b)=>{y[b]=g})}i.push(p);break}case xt:lo(c,t)&&(d(),ns(o,c.content));break}c=c.right}d()};return t||n?Je(s,p=>{t&&_h(p,t),n&&_h(p,n),f()},"cleanup"):f(),i}insert(t,n,r){if(n.length<=0)return;const i=this.doc;i!==null?Je(i,o=>{const s=Ka(o,this,t,!r);r||(r={},s.currentAttributes.forEach((a,c)=>{r[c]=a})),of(o,this,s,n,r)}):this._pending.push(()=>this.insert(t,n,r))}insertEmbed(t,n,r){const i=this.doc;i!==null?Je(i,o=>{const s=Ka(o,this,t,!r);of(o,this,s,n,r||{})}):this._pending.push(()=>this.insertEmbed(t,n,r||{}))}delete(t,n){if(n===0)return;const r=this.doc;r!==null?Je(r,i=>{Uv(i,Ka(i,this,t,!0),n)}):this._pending.push(()=>this.delete(t,n))}format(t,n,r){if(n===0)return;const i=this.doc;i!==null?Je(i,o=>{const s=Ka(o,this,t,!1);s.right!==null&&Mv(o,this,s,n,r)}):this._pending.push(()=>this.format(t,n,r))}removeAttribute(t){this.doc!==null?Je(this.doc,n=>{Qu(n,this,t)}):this._pending.push(()=>this.removeAttribute(t))}setAttribute(t,n){this.doc!==null?Je(this.doc,r=>{em(r,this,t,n)}):this._pending.push(()=>this.setAttribute(t,n))}getAttribute(t){return tm(this,t)}getAttributes(){return s1(this)}_write(t){t.writeTypeRef(KI)}}const SI=e=>new Bo;class sf{constructor(t,n=()=>!0){this._filter=n,this._root=t,this._currentNode=t._start,this._firstCall=!0,t.doc??Ht()}[Symbol.iterator](){return this}next(){let t=this._currentNode,n=t&&t.content&&t.content.type;if(t!==null&&(!this._firstCall||t.deleted||!this._filter(n)))do if(n=t.content.type,!t.deleted&&(n.constructor===Ko||n.constructor===Vi)&&n._start!==null)t=n._start;else for(;t!==null;){const r=t.next;if(r!==null){t=r;break}else t.parent===this._root?t=null:t=t.parent._item}while(t!==null&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,t===null?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}}class Vi extends Lt{constructor(){super(),this._prelimContent=[]}get firstChild(){const t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,n){super._integrate(t,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Vi}clone(){const t=new Vi;return t.insert(0,this.toArray().map(n=>n instanceof Lt?n.clone():n)),t}get length(){return this.doc??Ht(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(t){return new sf(this,t)}querySelector(t){t=t.toUpperCase();const r=new sf(this,i=>i.nodeName&&i.nodeName.toUpperCase()===t).next();return r.done?null:r.value}querySelectorAll(t){return t=t.toUpperCase(),ai(new sf(this,n=>n.nodeName&&n.nodeName.toUpperCase()===t))}_callObserver(t,n){Dc(this,t,new II(this,n,t))}toString(){return t1(this,t=>t.toString()).join("")}toJSON(){return this.toString()}toDOM(t=document,n={},r){const i=t.createDocumentFragment();return r!==void 0&&r._createAssociation(i,this),El(this,o=>{i.insertBefore(o.toDOM(t,n,r),null)}),i}insert(t,n){this.doc!==null?Je(this.doc,r=>{i1(r,this,t,n)}):this._prelimContent.splice(t,0,...n)}insertAfter(t,n){if(this.doc!==null)Je(this.doc,r=>{const i=t&&t instanceof Lt?t._item:t;Yu(r,this,i,n)});else{const r=this._prelimContent,i=t===null?0:r.findIndex(o=>o===t)+1;if(i===0&&t!==null)throw ui("Reference item not found");r.splice(i,0,...n)}}delete(t,n=1){this.doc!==null?Je(this.doc,r=>{o1(r,this,t,n)}):this._prelimContent.splice(t,n)}toArray(){return e1(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return n1(this,t)}slice(t=0,n=this.length){return Zb(this,t,n)}forEach(t){El(this,t)}_write(t){t.writeTypeRef(WI)}}const EI=e=>new Vi;class Ko extends Vi{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,n){super._integrate(t,n),this._prelimAttrs.forEach((r,i)=>{this.setAttribute(i,r)}),this._prelimAttrs=null}_copy(){return new Ko(this.nodeName)}clone(){const t=new Ko(this.nodeName),n=this.getAttributes();return wC(n,(r,i)=>{typeof r=="string"&&t.setAttribute(i,r)}),t.insert(0,this.toArray().map(r=>r instanceof Lt?r.clone():r)),t}toString(){const t=this.getAttributes(),n=[],r=[];for(const a in t)r.push(a);r.sort();const i=r.length;for(let a=0;a<i;a++){const c=r[a];n.push(c+'="'+t[c]+'"')}const o=this.nodeName.toLocaleLowerCase(),s=n.length>0?" "+n.join(" "):"";return`<${o}${s}>${super.toString()}</${o}>`}removeAttribute(t){this.doc!==null?Je(this.doc,n=>{Qu(n,this,t)}):this._prelimAttrs.delete(t)}setAttribute(t,n){this.doc!==null?Je(this.doc,r=>{em(r,this,t,n)}):this._prelimAttrs.set(t,n)}getAttribute(t){return tm(this,t)}hasAttribute(t){return l1(this,t)}getAttributes(t){return t?mI(this,t):s1(this)}toDOM(t=document,n={},r){const i=t.createElement(this.nodeName),o=this.getAttributes();for(const s in o){const a=o[s];typeof a=="string"&&i.setAttribute(s,a)}return El(this,s=>{i.appendChild(s.toDOM(t,n,r))}),r!==void 0&&r._createAssociation(i,this),i}_write(t){t.writeTypeRef(VI),t.writeKey(this.nodeName)}}const CI=e=>new Ko(e.readKey());class II extends Nc{constructor(t,n,r){super(t,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(i=>{i===null?this.childListChanged=!0:this.attributesChanged.add(i)})}}class Ju extends Fo{constructor(t){super(),this.hookName=t}_copy(){return new Ju(this.hookName)}clone(){const t=new Ju(this.hookName);return this.forEach((n,r)=>{t.set(r,n)}),t}toDOM(t=document,n={},r){const i=n[this.hookName];let o;return i!==void 0?o=i.createDom(this):o=document.createElement(this.hookName),o.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(o,this),o}_write(t){t.writeTypeRef(HI),t.writeKey(this.hookName)}}const OI=e=>new Ju(e.readKey());class Xu extends Bo{get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new Xu}clone(){const t=new Xu;return t.applyDelta(this.toDelta()),t}toDOM(t=document,n,r){const i=t.createTextNode(this.toString());return r!==void 0&&r._createAssociation(i,this),i}toString(){return this.toDelta().map(t=>{const n=[];for(const i in t.attributes){const o=[];for(const s in t.attributes[i])o.push({key:s,value:t.attributes[i][s]});o.sort((s,a)=>s.key<a.key?-1:1),n.push({nodeName:i,attrs:o})}n.sort((i,o)=>i.nodeName<o.nodeName?-1:1);let r="";for(let i=0;i<n.length;i++){const o=n[i];r+=`<${o.nodeName}`;for(let s=0;s<o.attrs.length;s++){const a=o.attrs[s];r+=` ${a.key}="${a.value}"`}r+=">"}r+=t.insert;for(let i=n.length-1;i>=0;i--)r+=`</${n[i].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(qI)}}const jI=e=>new Xu;class nm{constructor(t,n){this.id=t,this.length=n}get deleted(){throw er()}mergeWith(t){return!1}write(t,n,r){throw er()}integrate(t,n){throw er()}}const TI=0;class In extends nm{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,n){n>0&&(this.id.clock+=n,this.length-=n),Wb(t.doc.store,this)}write(t,n){t.writeInfo(TI),t.writeLen(this.length-n)}getMissing(t,n){return null}}class ql{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new ql(this.content)}splice(t){throw er()}mergeWith(t){return!1}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeBuf(this.content)}getRef(){return 3}}const NI=e=>new ql(e.readBuf());class Cl{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Cl(this.len)}splice(t){const n=new Cl(this.len-t);return this.len=t,n}mergeWith(t){return this.len+=t.len,!0}integrate(t,n){qu(t.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(t){}gc(t){}write(t,n){t.writeLen(this.len-n)}getRef(){return 1}}const PI=e=>new Cl(e.readLen()),f1=(e,t)=>new ts({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class Gl{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;const n={};this.opts=n,t.gc||(n.gc=!1),t.autoLoad&&(n.autoLoad=!0),t.meta!==null&&(n.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Gl(f1(this.doc.guid,this.opts))}splice(t){throw er()}mergeWith(t){return!1}integrate(t,n){this.doc._item=n,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,n){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}}const DI=e=>new Gl(f1(e.readString(),e.readAny()));class Gi{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new Gi(this.embed)}splice(t){throw er()}mergeWith(t){return!1}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeJSON(this.embed)}getRef(){return 5}}const AI=e=>new Gi(e.readJSON());class xt{constructor(t,n){this.key=t,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new xt(this.key,this.value)}splice(t){throw er()}mergeWith(t){return!1}integrate(t,n){const r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(t){}gc(t){}write(t,n){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}}const RI=e=>new xt(e.readKey(),e.readJSON());class Zu{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Zu(this.arr)}splice(t){const n=new Zu(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){const r=this.arr.length;t.writeLen(r-n);for(let i=n;i<r;i++){const o=this.arr[i];t.writeString(o===void 0?"undefined":JSON.stringify(o))}}getRef(){return 2}}const LI=e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++){const i=e.readString();i==="undefined"?n.push(void 0):n.push(JSON.parse(i))}return new Zu(n)},MI=Hu("node_env")==="development";class Wi{constructor(t){this.arr=t,MI&&Ob(t)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Wi(this.arr)}splice(t){const n=new Wi(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){const r=this.arr.length;t.writeLen(r-n);for(let i=n;i<r;i++){const o=this.arr[i];t.writeAny(o)}}getRef(){return 8}}const UI=e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++)n.push(e.readAny());return new Wi(n)};class rr{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new rr(this.str)}splice(t){const n=new rr(this.str.slice(t));this.str=this.str.slice(0,t);const r=this.str.charCodeAt(t-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,t-1)+"�",n.str="�"+n.str.slice(1)),n}mergeWith(t){return this.str+=t.str,!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const $I=e=>new rr(e.readString()),zI=[vI,wI,SI,CI,EI,OI,jI],FI=0,BI=1,KI=2,VI=3,WI=4,HI=5,qI=6;class jr{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new jr(this.type._copy())}splice(t){throw er()}mergeWith(t){return!1}integrate(t,n){this.type._integrate(t.doc,n)}delete(t){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(t.beforeState.get(n.id.client)||0)&&t._mergeStructs.push(n):n.delete(t),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(t.beforeState.get(r.id.client)||0)&&t._mergeStructs.push(r):r.delete(t)}),t.changed.delete(this.type)}gc(t){let n=this.type._start;for(;n!==null;)n.gc(t,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(t,!0),r=r.left}),this.type._map=new Map}write(t,n){this.type._write(t)}getRef(){return 7}}const GI=e=>new jr(zI[e.readTypeRef()](e)),ec=(e,t,n)=>{const{client:r,clock:i}=t.id,o=new kt(Fe(r,i+n),t,Fe(r,i+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&o.markDeleted(),t.keep&&(o.keep=!0),t.redone!==null&&(o.redone=Fe(t.redone.client,t.redone.clock+n)),t.right=o,o.right!==null&&(o.right.left=o),e._mergeStructs.push(o),o.parentSub!==null&&o.right===null&&o.parent._map.set(o.parentSub,o),t.length=n,o};class kt extends nm{constructor(t,n,r,i,o,s,a,c){super(t,c.getLength()),this.origin=r,this.left=n,this.right=i,this.rightOrigin=o,this.parent=s,this.parentSub=a,this.redone=null,this.content=c,this.info=this.content.isCountable()?ov:0}set marker(t){(this.info&Yd)>0!==t&&(this.info^=Yd)}get marker(){return(this.info&Yd)>0}get keep(){return(this.info&iv)>0}set keep(t){this.keep!==t&&(this.info^=iv)}get countable(){return(this.info&ov)>0}get deleted(){return(this.info&Gd)>0}set deleted(t){this.deleted!==t&&(this.info^=Gd)}markDeleted(){this.info|=Gd}getMissing(t,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=jt(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=jt(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Oo&&this.id.client!==this.parent.client&&this.parent.clock>=jt(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Pv(t,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=di(t,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===In||this.right&&this.right.constructor===In)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===kt?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===kt&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===Oo){const r=rf(n,this.parent);r.constructor===In?this.parent=null:this.parent=r.content.type}return null}integrate(t,n){if(n>0&&(this.id.clock+=n,this.left=Pv(t,t.doc.store,Fe(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,i;if(r!==null)i=r.right;else if(this.parentSub!==null)for(i=this.parent._map.get(this.parentSub)||null;i!==null&&i.left!==null;)i=i.left;else i=this.parent._start;const o=new Set,s=new Set;for(;i!==null&&i!==this.right;){if(s.add(i),o.add(i),Fa(this.origin,i.origin)){if(i.id.client<this.id.client)r=i,o.clear();else if(Fa(this.rightOrigin,i.rightOrigin))break}else if(i.origin!==null&&s.has(rf(t.doc.store,i.origin)))o.has(rf(t.doc.store,i.origin))||(r=i,o.clear());else break;i=i.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(t)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),Wb(t.doc.store,this),this.content.integrate(t,this),Av(t,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(t)}else new In(this.id,this.length).integrate(t,0)}get next(){let t=this.right;for(;t!==null&&t.deleted;)t=t.right;return t}get prev(){let t=this.left;for(;t!==null&&t.deleted;)t=t.left;return t}get lastId(){return this.length===1?this.id:Fe(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&Fa(t.origin,this.lastId)&&this.right===t&&Fa(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&this.redone===null&&t.redone===null&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===t&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),t.keep&&(this.keep=!0),this.right=t.right,this.right!==null&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),qu(t.deleteSet,this.id.client,this.id.clock,this.length),Av(t,n,this.parentSub),this.content.delete(t)}}gc(t,n){if(!this.deleted)throw tr();this.content.gc(t),n?tI(t,this,new In(this.id,this.length)):this.content=new Cl(this.length)}write(t,n){const r=n>0?Fe(this.id.client,this.id.clock+n-1):this.origin,i=this.rightOrigin,o=this.parentSub,s=this.content.getRef()&Ec|(r===null?0:yn)|(i===null?0:yr)|(o===null?0:wl);if(t.writeInfo(s),r!==null&&t.writeLeftID(r),i!==null&&t.writeRightID(i),r===null&&i===null){const a=this.parent;if(a._item!==void 0){const c=a._item;if(c===null){const d=ZC(a);t.writeParentInfo(!0),t.writeString(d)}else t.writeParentInfo(!1),t.writeLeftID(c.id)}else a.constructor===String?(t.writeParentInfo(!0),t.writeString(a)):a.constructor===Oo?(t.writeParentInfo(!1),t.writeLeftID(a)):tr();o!==null&&t.writeString(o)}this.content.write(t,n)}}const h1=(e,t)=>YI[t&Ec](e),YI=[()=>{tr()},PI,LI,NI,$I,AI,RI,GI,UI,DI,()=>{tr()}],QI=10;class On extends nm{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,n){tr()}write(t,n){t.writeInfo(QI),je(t.restEncoder,this.length-n)}getMissing(t,n){return null}}const p1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},m1="__ $YJS$ __";p1[m1]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");p1[m1]=!0;const lf=new FinalizationRegistry(({cache:e,key:t})=>{delete e[t]});function y1(e){var t,n;return(t=(n=e._novip)._docCache)!==null&&t!==void 0?t:n._docCache={cache:{},get size(){return Object.keys(this.cache).length},find(r,i,o){const s=af(r,i,o),a=this.cache[s];return a?a.deref():void 0},add(r){var i;const{parentTable:o,parentId:s,parentProp:a}=r.meta;if(!o||!a||s==null)throw new Error("Missing Dexie-related metadata in Y.Doc");const c=af(o,s,a),d=(i=this.cache[c])===null||i===void 0?void 0:i.deref();d&&lf.unregister(d),this.cache[c]=new WeakRef(r),lf.register(r,{cache:this.cache,key:c},r)},delete(r){lf.unregister(r);const i=af(r.meta.parentTable,r.meta.parentId,r.meta.parentProp),o=this.cache[i];(o==null?void 0:o.deref())===r&&delete this.cache[i]}}}const Ys=new WeakSet;function Eh(e){if(Ys.has(e))throw new Error(`Y.Doc ${e.meta.parentId} has been destroyed`)}function af(e,t,n){return`${e}[${t}].${n}`}function JI(e,t,n,r,i,o){let s=t.find(n,o,r);return s||(s=new ts({meta:{db:e,updatesTable:i,parentProp:r,parentTable:n,parentId:o}}),t.add(s),s.on("destroy",()=>{Ys.add(s),t.delete(s)}),s)}let v1=null;function $v(e){v1=e}function XI(e,t,n,r,i,o){let s=0,a=!0;const c=ni(()=>{Eh(t);const p=n.table(i);return Promise.all([(s>0?p.where("i").between(s,1/0,!1).toArray().then(y=>y.filter(g=>Sc(g.k,o)===0)):p.where({k:o}).toArray()).then(y=>y),n.table(r).where(":id").equals(o).toArray()])}).subscribe(([p,y])=>{if(p.length>0&&(s=p[p.length-1].i),y.length===0){t.destroy();return}Eh(t),p.length>0&&Je(t,()=>{p.forEach(g=>{try{$v(g),Bb(t,g.u)}finally{$v(null)}})},e,!1),a&&(a=!1,t.emit("load",[t]))},p=>{e.on("error").fire(p)}),d=(p,y)=>{y!==e&&n.table(i).add({k:o,u:p,f:1}).then(g=>{g===s-1&&++s}).catch(g=>{e.on("error").fire(g)})},f=()=>{c.unsubscribe(),t.off("updateV2",d),t.off("destroy",f)};return t.on("updateV2",d),t.on("destroy",f),f}function g1(){}function ZI(e,t){return e===g1?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then(function(){return t.apply(r,o)})}return t.apply(this,arguments)}}function e2(e,t){return e===g1?t:function(){e.apply(this,arguments),t.apply(this,arguments)}}const Os=new WeakMap;function zv(){return Ae.Events(null,"load","sync","error")}class Wt{static getOrCreateDocument(t,n,r,i){var o,s;const a=y1(t),c=(s=(o=t.table(n).schema.yProps)===null||o===void 0?void 0:o.find(d=>d.prop===r))===null||s===void 0?void 0:s.updatesTable;if(!c)throw new Error(`Updates table for ${n}.${r} not found`);return JI(t,a,n,r,c,i)}static load(t,n){var r;let i=Os.get(t);return i?(++i.refCount,(n==null?void 0:n.gracePeriod)!=null&&i.graceTimeout<n.gracePeriod&&(i.graceTimeout=n.gracePeriod),i.graceTimer&&(clearTimeout(i.graceTimer),i.graceTimer=null)):(i=new Wt(t),i.graceTimeout=(r=n==null?void 0:n.gracePeriod)!==null&&r!==void 0?r:-1,Os.set(t,i)),i}static release(t){if(!t||Ys.has(t))return;const n=Os.get(t);n?--n.refCount<=0&&(n.graceTimeout<0?n._release():n.graceTimer||(n.graceTimer=setTimeout(()=>{n.graceTimer=null,n.refCount===0&&n._release()},n.graceTimeout))):t.destroy()}_release(){this.doc&&Promise.resolve(Wt.on("beforeunload").fire(this)).finally(()=>{var t;this.refCount===0&&((t=this.doc)===null||t===void 0||t.destroy())})}static for(t){return Os.get(t)}static get currentUpdateRow(){return v1}get whenLoaded(){return this._whenLoaded||(this._whenLoaded=new Promise((t,n)=>{if(!this.doc){n(new Error("No Y.Doc associated with this provider"));return}this.doc.isLoaded?t():this._error?n(this._error):Ys.has(this.doc)?n(new Ae.AbortError("Document was destroyed before loaded")):(this.on("load",t),this.on("error",n),this.doc.on("destroy",()=>n(new Ae.AbortError("Document was destroyed before loaded"))))})),this._whenLoaded}get whenSynced(){return this._whenSynced||(this._whenSynced=new Promise((t,n)=>{if(!this.doc){n(new Error("No Y.Doc associated with this provider"));return}this.doc.isSynced?t():this._error?n(this._error):Ys.has(this.doc)?n(new Ae.AbortError("Document was destroyed before synced")):(this.on("sync",t),this.on("error",n),this.doc.on("destroy",()=>n(new Ae.AbortError("Document was destroyed before synced"))))})),this._whenSynced}constructor(t){this.refCount=1,this.cleanupHandlers=[],this.graceTimeout=-1,this.doc=null,this.destroyed=!1,this.on=zv(),this.doc=t,this.off=(s,a)=>{var c;return(c=this.on[s])===null||c===void 0?void 0:c.unsubscribe(a)},"dispose"in Symbol&&(this[Symbol.dispose]=()=>Wt.release(t)),t.on("load",()=>this.on("load").fire()),t.on("sync",s=>s!==!1&&this.on("sync").fire()),t.on("destroy",this.destroy.bind(this)),this.on("error",s=>{this._error=s});const{db:n,parentTable:r,parentId:i,updatesTable:o}=t.meta||{};if(!n||!r||!o)throw new Error("Missing Dexie-related metadata in Y.Doc. Documents need to be obtained through Y.Doc properties from dexie queries.");if(!n.table(r)||!n.table(o))throw new Error(`Table ${r} or ${o} not found in db`);Eh(t),this.stopObserving=XI(this,t,n,r,o,i),Wt.on("new").fire(this)}destroy(){var t,n,r;console.debug(`Y.Doc ${(n=(t=this.doc)===null||t===void 0?void 0:t.meta)===null||n===void 0?void 0:n.parentId} was destroyed`),Os.delete(this.doc),this.doc=null,this.destroyed=!0,this.refCount=0,(r=this.stopObserving)===null||r===void 0||r.call(this),this.on=zv(),this.cleanupHandlers.forEach(i=>i())}addCleanupHandler(t){this.cleanupHandlers.push(typeof t=="function"?t:()=>t.unsubscribe())}}Wt.on=Ae.Events(null,{new:[e2],beforeunload:[ZI]});Wt.getDocCache=y1;Ae.DexieYProvider?Wt=Ae.DexieYProvider||Wt:Ae.DexieYProvider=Wt;const uf=3e4;class t2 extends dC{constructor(t){super(),this.doc=t,this.clientID=t.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const n=Wu();this.getLocalState()!==null&&uf/2<=n-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const r=[];this.meta.forEach((i,o)=>{o!==this.clientID&&uf<=n-i.lastUpdated&&this.states.has(o)&&r.push(o)}),r.length>0&&w1(this,r,"timeout")},xr(uf/10)),t.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(t){const n=this.clientID,r=this.meta.get(n),i=r===void 0?0:r.clock+1,o=this.states.get(n);t===null?this.states.delete(n):this.states.set(n,t),this.meta.set(n,{clock:i,lastUpdated:Wu()});const s=[],a=[],c=[],d=[];t===null?d.push(n):o==null?t!=null&&s.push(n):(a.push(n),Gs(o,t)||c.push(n)),(s.length>0||c.length>0||d.length>0)&&this.emit("change",[{added:s,updated:c,removed:d},"local"]),this.emit("update",[{added:s,updated:a,removed:d},"local"])}setLocalStateField(t,n){const r=this.getLocalState();r!==null&&this.setLocalState({...r,[t]:n})}getStates(){return this.states}}const w1=(e,t,n)=>{const r=[];for(let i=0;i<t.length;i++){const o=t[i];if(e.states.has(o)){if(e.states.delete(o),o===e.clientID){const s=e.meta.get(o);e.meta.set(o,{clock:s.clock+1,lastUpdated:Wu()})}r.push(o)}}r.length>0&&(e.emit("change",[{added:[],updated:[],removed:r},n]),e.emit("update",[{added:[],updated:[],removed:r},n]))},n2=(e,t,n=e.states)=>{const r=t.length,i=Jo();je(i,r);for(let o=0;o<r;o++){const s=t[o],a=n.get(s)||null,c=e.meta.get(s).clock;je(i,s),je(i,c),En(i,JSON.stringify(a))}return pn(i)},r2=(e,t,n)=>{const r=Vl(t),i=Wu(),o=[],s=[],a=[],c=[],d=Ye(r);for(let f=0;f<d;f++){const p=Ye(r);let y=Ye(r);const g=JSON.parse(Cn(r)),b=e.meta.get(p),x=e.states.get(p),D=b===void 0?0:b.clock;(D<y||D===y&&g===null&&e.states.has(p))&&(g===null?p===e.clientID&&e.getLocalState()!=null?y++:e.states.delete(p):e.states.set(p,g),e.meta.set(p,{clock:y,lastUpdated:i}),b===void 0&&g!==null?o.push(p):b!==void 0&&g===null?c.push(p):g!==null&&(Gs(g,x)||a.push(p),s.push(p)))}(o.length>0||a.length>0||c.length>0)&&e.emit("change",[{added:o,updated:a,removed:c},n]),(o.length>0||s.length>0||c.length>0)&&e.emit("update",[{added:o,updated:s,removed:c},n])};function he(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(d){try{c(r.next(d))}catch(f){o(f)}}function a(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){var f;d.done?i(d.value):(f=d.value,f instanceof n?f:new n(function(p){p(f)})).then(s,a)}c((r=r.apply(e,t||[])).next())})}function i2(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function At(e){return this instanceof At?(this.v=e,this):new At(e)}function Ch(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(p){i[p]&&(r[p]=function(y){return new Promise(function(g,b){o.push([p,y,g,b])>1||a(p,y)})})}function a(p,y){try{(function(g){g.value instanceof At?Promise.resolve(g.value.v).then(c,d):f(o[0][2],g)})(i[p](y))}catch(g){f(o[0][3],g)}}function c(p){a("next",p)}function d(p){a("throw",p)}function f(p,y){p(y),o.shift(),o.length&&a(o[0][0],o[0][1])}}function Ih(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=i2(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=e[i]&&function(o){return new Promise(function(s,a){(function(c,d,f,p){Promise.resolve(p).then(function(y){c({value:y,done:f})},d)})(s,a,(o=e[i](o)).done,o.value)})}}}const o2={}.hasOwnProperty;function tc(e,t,n){if(e&&t!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){(function(d){if(!d)throw new Error("Assertion Failed")})(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)tc(e,t[r],n[r])}else{var o=t.indexOf(".");if(o!==-1){var s=t.substr(0,o),a=t.substr(o+1);if(a==="")n===void 0?Array.isArray(e)?isNaN(parseInt(s))||e.splice(parseInt(s),1):delete e[s]:e[s]=n;else{var c=e[s];c&&function(d,f){return o2.call(d,f)}(e,s)||(c=e[s]={}),tc(c,a,n)}}else n===void 0?Array.isArray(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}const b1=typeof self<"u"&&typeof crypto<"u"?(e,t=crypto.getRandomValues.bind(crypto))=>{const n=new Uint8Array(e);return t(n),self.btoa(String.fromCharCode.apply(null,n))}:typeof Buffer<"u"?(e,t=s2)=>{const n=Buffer.alloc(e);return t(n),n.toString("base64")}:()=>{throw new Error("No implementation of randomString was found")};function s2(e){for(let t=0;t<e.length;++t)e[t]=Math.floor(256*Math.random())}function rm(e){return typeof e=="string"||!!(Array.isArray(e)&&e.some(t=>rm(t))&&e.every(k1))}function k1(e){return typeof e=="string"||typeof e=="number"||Array.isArray(e)&&e.every(k1)}function l2(e,t,n){const r=e[t]||(e[t]={}),i=n.keys.map(o=>typeof o=="string"?o:JSON.stringify(o));switch(n.type){case"insert":case"upsert":i.forEach((o,s)=>{r[o]={type:"ups",val:n.values[s]}});break;case"update":case"modify":i.forEach((o,s)=>{const a=n.type==="update"?n.changeSpecs[s]:n.changeSpec,c=r[o];if(c)switch(c.type){case"ups":for(const[d,f]of Object.entries(a))tc(c.val,d,f);break;case"del":break;case"upd":Object.assign(c.mod,a)}else r[o]={type:"upd",mod:a}});break;case"delete":i.forEach(o=>{r[o]={type:"del"}})}return e}function Fv(e,t){for(const{table:n,muts:r}of t)for(const i of r)l2(e,n,i)}function a2(e){return Ch(this,arguments,function*(){var t,n,r,i;let o=0,s=new Uint8Array(4),a=0,c=[],d=0;try{for(var f,p=!0,y=Ih(e);!(t=(f=yield At(y.next())).done);p=!0){i=f.value,p=!1;const g=i,b=new DataView(g.buffer,g.byteOffset,g.byteLength);let x=0;for(;x<g.byteLength;)switch(o){case 0:if(x+4>g.byteLength){for(const D of g.slice(x)){if(a===4)break;s[a++]=D,++x}if(a<4)break}else if(a>0&&a<4)for(const D of g.slice(x,x+4-a))s[a++]=D,++x;case 1:d=a===4?new DataView(s.buffer,0,4).getUint32(0,!1):b.getUint32(x,!1),a?a=0:x+=4;case 2:if(x>=g.byteLength){o=2;break}if(x+d>g.byteLength)c.push(g.slice(x)),d-=g.byteLength-x,o=2,x=g.byteLength;else{if(c.length>0){const D=new Uint8Array(c.reduce((_,k)=>_+k.byteLength,d));let E=0;for(const _ of c)D.set(_,E),E+=_.byteLength;D.set(g.slice(x,x+d),E),c=[],yield yield At(D)}else yield yield At(g.slice(x,x+d));x+=d,o=0}}}}catch(g){n={error:g}}finally{try{p||t||!(r=y.return)||(yield At(r.call(y)))}finally{if(n)throw n.error}}})}function _1(e,t){return he(this,void 0,void 0,function*(){try{const n=yield navigator.serviceWorker.ready;if(t==="push"&&n.sync&&(yield n.sync.register(`dexie-cloud:${e.name}`)),!n.active)throw new Error("Failed to trigger sync - there's no active service worker");return void n.active.postMessage({type:"dexie-cloud-sync",dbName:e.name,purpose:t})}catch{}})}function pr(e,t){e.cloud.usingServiceWorker?_1(e,t):e.localSyncEvent.next({purpose:t})}const u2="fromBase64"in Uint8Array,c2="toBase64"in Uint8Array.prototype,im=typeof Buffer<"u"?e=>Buffer.from(e,"base64"):u2?e=>Uint8Array.fromBase64(e):e=>{const t=atob(e),n=t.length,r=new Uint8Array(n);for(var i=0;i<n;i++)r[i]=t.charCodeAt(i);return r},rs=typeof Buffer<"u"?e=>ArrayBuffer.isView(e)?Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("base64"):Buffer.from(e).toString("base64"):c2?e=>(ArrayBuffer.isView(e)?e:new Uint8Array(e)).toBase64():e=>{const t=ArrayBuffer.isView(e)?e:new Uint8Array(e),n=[];for(let r=0,i=t.length;r<i;r+=4096){const o=t.subarray(r,r+4096);n.push(String.fromCharCode.apply(null,o))}return btoa(n.join(""))};class Oh extends Error{constructor({title:t,message:n,messageCode:r,messageParams:i}){super(n),this.name="TokenErrorResponseError",this.title=t,this.messageCode=r,this.messageParams=i}}function Yl(e,t){return new Promise((n,r)=>{const i=Object.assign(Object.assign({submitLabel:"Submit",cancelLabel:"Cancel"},t),{onSubmit:o=>{e.next(void 0),n(o)},onCancel:()=>{e.next(void 0),r(new Ae.AbortError("User cancelled"))}});e.next(i)})}function jh(e,t,...n){return Yl(e,{type:"message-alert",title:t,alerts:n,fields:{},submitLabel:"OK",cancelLabel:null})}function Bv(e,t,n){return he(this,void 0,void 0,function*(){let r=n||"";for(;!r||!/^[\w-+.]+@([\w-]+\.)+[\w-]{2,10}(\sas\s[\w-+.]+@([\w-]+\.)+[\w-]{2,10})?$/.test(r);)r=(yield Yl(e,{type:"email",title:t,alerts:r?[{type:"error",messageCode:"INVALID_EMAIL",message:"Please enter a valid email address",messageParams:{}}]:[],fields:{email:{type:"email",placeholder:"you@somedomain.com"}}})).email;return r})}function Kv(e,t,n){return he(this,void 0,void 0,function*(){const r=[{type:"info",messageCode:"OTP_SENT",message:"A One-Time password has been sent to {email}",messageParams:{email:t}}];n&&r.push(n);const{otp:i}=yield Yl(e,{type:"otp",title:"Enter OTP",alerts:r,fields:{otp:{type:"otp",label:"OTP",placeholder:"Paste OTP here"}}});return i})}function Ac(e){return he(this,void 0,void 0,function*(){var t,n,r;const i=yield e.getCurrentUser(),{accessToken:o,accessTokenExpiration:s,refreshToken:a,refreshTokenExpiration:c,claims:d}=i;if(!o)return null;if(((t=s==null?void 0:s.getTime())!==null&&t!==void 0?t:1/0)>Date.now()&&(((n=i.license)===null||n===void 0?void 0:n.status)||"ok")==="ok")return i;if(!a)throw new Error("Refresh token missing");if(((r=c==null?void 0:c.getTime())!==null&&r!==void 0?r:1/0)<=Date.now())throw new Error("Refresh token has expired");const f=yield Rc(e.cloud.options.databaseUrl,i);return yield e.table("$logins").update(d.sub,{accessToken:f.accessToken,accessTokenExpiration:f.accessTokenExpiration,claims:f.claims,license:f.license,data:f.data}),f})}function d2(e,t,n,r,i){return he(this,void 0,void 0,function*(){return t.accessToken&&t.accessTokenExpiration.getTime()>Date.now()?t:t.refreshToken&&(!t.refreshTokenExpiration||t.refreshTokenExpiration.getTime()>Date.now())?yield Rc(e,t):yield function(o,s,a,c){return he(this,void 0,void 0,function*(){if(!crypto.subtle)throw typeof location<"u"&&location.protocol==="http:"?new Error("Dexie Cloud Addon needs to use WebCrypto, but your browser has disabled it due to being served from an insecure location. Please serve it from https or http://localhost:<port> (See https://stackoverflow.com/questions/46670556/how-to-enable-crypto-subtle-for-unsecure-origins-in-chrome/46671627#46671627)"):new Error("This browser does not support WebCrypto.");const{privateKey:d,publicKey:f}=yield crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!1,["sign","verify"]);if(!d||!f)throw new Error("Could not generate RSA keypair");o.nonExportablePrivateKey=d;const p=function(y){const g=rs(y);return function(b){let x=`-----BEGIN PUBLIC KEY-----
`;for(;b.length>0;)x+=b.substring(0,64)+`
`,b=b.substring(64);return x+="-----END PUBLIC KEY-----",x}(g)}(yield crypto.subtle.exportKey("spki",f));o.publicKey=f;try{const y=yield s({public_key:p,hints:c});if(y.type==="error")throw new Oh(y);if(y.type!=="tokens")throw new Error(`Unexpected response type from token endpoint: ${y.type}`);return o.accessToken=y.accessToken,o.accessTokenExpiration=new Date(y.accessTokenExpiration),o.refreshToken=y.refreshToken,y.refreshTokenExpiration&&(o.refreshTokenExpiration=new Date(y.refreshTokenExpiration)),o.userId=y.claims.sub,o.email=y.claims.email,o.name=y.claims.name,o.claims=y.claims,o.license={type:y.userType,status:y.claims.license||"ok"},o.data=y.data,y.evalDaysLeft!=null&&(o.license.evalDaysLeft=y.evalDaysLeft),y.userValidUntil!=null&&(o.license.validUntil=new Date(y.userValidUntil)),y.alerts&&y.alerts.length>0&&(yield Yl(a,{type:"message-alert",title:"Authentication Alert",fields:{},alerts:y.alerts})),o}catch(y){if(y instanceof Oh)throw yield jh(a,y.title,{type:"error",messageCode:y.messageCode,message:y.message,messageParams:{}}),y;let g="We're having a problem authenticating right now.";throw y instanceof TypeError&&(g=typeof navigator!==void 0&&!navigator.onLine?"You seem to be offline. Please connect to the internet and try again.":Ae.debug||typeof location<"u"&&(location.hostname==="localhost"||location.hostname==="127.0.0.1")?`Could not connect to server. Please verify that your origin '${location.origin}' is whitelisted using \`npx dexie-cloud whitelist\``:"Could not connect to server. Please verify the connection.",yield jh(a,"Authentication Failed",{type:"error",messageCode:"GENERIC_ERROR",message:g,messageParams:{}}).catch(()=>{})),y}})}(t,n,r,i)})}function Rc(e,t){return he(this,void 0,void 0,function*(){if(!t.refreshToken)throw new Error("Cannot refresh token - refresh token is missing.");if(!t.nonExportablePrivateKey)throw new Error("login.nonExportablePrivateKey is missing - cannot sign refresh token without a private key.");const n=Date.now(),r="RSASSA-PKCS1-v1_5",i=new TextEncoder().encode(t.refreshToken+n),o=yield crypto.subtle.sign(r,t.nonExportablePrivateKey,i),s=rs(o),a={grant_type:"refresh_token",refresh_token:t.refreshToken,scopes:["ACCESS_DB"],signature:s,signing_algorithm:r,time_stamp:n},c=yield fetch(`${e}/token`,{body:JSON.stringify(a),method:"post",headers:{"Content-Type":"application/json"},mode:"cors"});if(c.status!==200)throw new Error(`RefreshToken: Status ${c.status} from ${e}/token`);const d=yield c.json();if(d.type==="error")throw new Oh(d);return t.accessToken=d.accessToken,t.accessTokenExpiration=d.accessTokenExpiration?new Date(d.accessTokenExpiration):void 0,t.claims=d.claims,t.license={type:d.userType,status:d.claims.license||"ok"},d.evalDaysLeft!=null&&(t.license.evalDaysLeft=d.evalDaysLeft),d.userValidUntil!=null&&(t.license.validUntil=new Date(d.userValidUntil)),d.data&&(t.data=d.data),t})}const Vv=new WeakMap;class om{constructor(t,n){Vv.set(this,t),Object.assign(this,n)}static load(t,n){return t.table("$logins").get(n).then(r=>new om(t,r||{userId:n,claims:{sub:n},lastLogin:new Date(0)}))}save(){return he(this,void 0,void 0,function*(){Vv.get(this).table("$logins").put(this)})}}const tn={userId:"unauthorized",name:"Unauthorized",claims:{sub:"unauthorized"},lastLogin:new Date(0)};try{Object.freeze(tn),Object.freeze(tn.claims)}catch{}function x1(e,t){return Di(vn(e).pipe(_n(t)))}function S1(e){return he(this,void 0,void 0,function*(){const t=yield Th(e);if(t){if(!(yield function(n,r,i){return he(this,void 0,void 0,function*(){const o=[{type:"warning",messageCode:"LOGOUT_CONFIRMATION",message:`{numUnsyncedChanges} unsynced changes will get lost!
                Logout anyway?`,messageParams:{currentUserId:r,numUnsyncedChanges:i.toString()}}];return yield Yl(n,{type:"logout-confirmation",title:"Confirm Logout",alerts:o,fields:{},submitLabel:"Confirm logout",cancelLabel:"Cancel"}).then(()=>!0).catch(()=>!1)})}(e.cloud.userInteraction,e.cloud.currentUserId,t)))throw new Error("User cancelled logout due to unsynced changes");yield Th(e,{deleteUnsyncedData:!0})}})}function Th(e){return he(this,arguments,void 0,function*(t,{deleteUnsyncedData:n=!1}={}){const[r,i]=yield t.dx.transaction("rw",t.dx.tables,o=>he(this,void 0,void 0,function*(){const s=o.idbtrans;s.disableChangeTracking=!0,s.disableAccessControl=!0;const a=o.storeNames.filter(d=>d.endsWith("_mutations")),c=(yield Promise.all(a.map(d=>o.table(d).count()))).reduce((d,f)=>d+f,0);if(c>0&&!n)return[c,!1];t.$syncState.delete("syncState");for(const d of t.dx.tables)d.name!=="$jobs"&&d.name!=="$syncState"&&d.clear();return[c,!0]}));return i&&(yield x1(t.cloud.currentUser,o=>o.userId===tn.userId),yield t.cloud.sync({purpose:"pull",wait:!0})),r})}class Nh extends Error{constructor(t,n){super(n||`${t.status} ${t.statusText}`),this.httpStatus=t.status}get name(){return"HttpError"}}function Va(e,...t){globalThis.console[e](...t)}function cf(e,t){return he(this,void 0,void 0,function*(){var n;const r=yield e.getCurrentUser(),i=r.userId;if(r.isLoggedIn&&(!t||!t.email&&!t.userId)){if((((n=r.license)===null||n===void 0?void 0:n.status)||"ok")==="ok"&&r.accessToken&&(!r.accessTokenExpiration||r.accessTokenExpiration.getTime()>Date.now()))return!1;if(r.refreshToken&&(!r.refreshTokenExpiration||r.refreshTokenExpiration.getTime()>Date.now()))return yield Ac(e),!1}const o=new om(e,{claims:{},lastLogin:new Date(0)});return yield d2(e.cloud.options.databaseUrl,o,e.cloud.options.fetchTokens||function(s){const{userInteraction:a}=s.cloud;return function(c){return he(this,arguments,void 0,function*({public_key:d,hints:f}){var p;let y;const g=(p=s.cloud.options)===null||p===void 0?void 0:p.databaseUrl;if(!g)throw new Error("No database URL given.");if((f==null?void 0:f.grant_type)==="demo")y={demo_user:yield Bv(a,"Enter a demo user email",(f==null?void 0:f.email)||(f==null?void 0:f.userId)),grant_type:"demo",scopes:["ACCESS_DB"],public_key:d};else if(f!=null&&f.otpId&&f.otp)y={grant_type:"otp",otp_id:f.otpId,otp:f.otp,scopes:["ACCESS_DB"],public_key:d};else{const D=yield Bv(a,"Enter email address",f==null?void 0:f.email);y=/@demo.local$/.test(D)?{demo_user:D,grant_type:"demo",scopes:["ACCESS_DB"],public_key:d}:{email:D,grant_type:"otp",scopes:["ACCESS_DB"]}}const b=yield fetch(`${g}/token`,{body:JSON.stringify(y),method:"post",headers:{"Content-Type":"application/json",mode:"cors"}});if(b.status!==200){const D=yield b.text();throw yield jh(a,"Token request failed",{type:"error",messageCode:"GENERIC_ERROR",message:D,messageParams:{}}).catch(()=>{}),new Nh(b,D)}const x=yield b.json();if(x.type==="tokens"||x.type==="error")return x;if(y.grant_type==="otp"&&"email"in y){if(x.type!=="otp-sent")throw new Error(`Unexpected response from ${g}/token`);const D=yield Kv(a,y.email),E=Object.assign(Object.assign({},y),{otp:D||"",otp_id:x.otp_id,public_key:d});let _=yield fetch(`${g}/token`,{body:JSON.stringify(E),method:"post",headers:{"Content-Type":"application/json"},mode:"cors"});for(;_.status===401;){const k=yield _.text();E.otp=yield Kv(a,y.email,{type:"error",messageCode:"INVALID_OTP",message:k,messageParams:{}}),_=yield fetch(`${g}/token`,{body:JSON.stringify(E),method:"post",headers:{"Content-Type":"application/json"},mode:"cors"})}if(_.status!==200){const k=yield _.text();throw new Nh(_,k)}return yield _.json()}throw new Error(`Unexpected response from ${g}/token`)})}}(e),e.cloud.userInteraction,t),i!==tn.userId&&o.userId!==i&&(yield S1(e)),yield function(s,a){return he(this,void 0,void 0,function*(){const c=s.table("$logins");yield s.transaction("rw",c,d=>he(this,void 0,void 0,function*(){const f=yield c.toArray();yield Promise.all(f.filter(p=>p.userId!==a.userId&&p.isLoggedIn).map(p=>(p.isLoggedIn=!1,c.put(p)))),a.isLoggedIn=!0,a.lastLogin=new Date;try{yield a.save()}catch(p){try{p.name==="DataCloneError"&&(Va("debug","Login context property names:",Object.keys(a)),Va("debug","Login context property names:",Object.keys(a)),Va("debug","Login context:",a),Va("debug","Login context JSON:",JSON.stringify(a)))}catch{}throw p}})),yield x1(s.cloud.currentUser,d=>d.userId===a.userId)})}(e,o),pr(e,"pull"),o.userId!==i})}const Ph={},Qs=typeof self<"u"&&self.document&&typeof navigator<"u"&&navigator.serviceWorker;Qs&&Qs.ready.then(e=>Ph.registration=e),typeof self<"u"&&"clients"in self&&!self.document&&addEventListener("message",e=>{var t,n;!((n=(t=e.data)===null||t===void 0?void 0:t.type)===null||n===void 0)&&n.startsWith("sw-broadcast-")&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(r=>{var i;return r.id!==((i=e.source)===null||i===void 0?void 0:i.id)&&r.postMessage(e.data)})});class df{constructor(t){this.name=t}subscribe(t){if(!Qs)return()=>{};const n=r=>{var i;((i=r.data)===null||i===void 0?void 0:i.type)===`sw-broadcast-${this.name}`&&t(r.data.message)};return Qs.addEventListener("message",n),()=>Qs.removeEventListener("message",n)}postMessage(t){var n;typeof self.clients=="object"?[...self.clients.matchAll({includeUncontrolled:!0})].forEach(r=>r.postMessage({type:`sw-broadcast-${this.name}`,message:t})):Ph.registration&&((n=Ph.registration.active)===null||n===void 0||n.postMessage({type:`sw-broadcast-${this.name}`,message:t}))}}const js=globalThis["lbc-events"]||(globalThis["lbc-events"]=new Map);class Wa extends _t{constructor(t){const n=typeof BroadcastChannel>"u"?new df(t):new BroadcastChannel(t);super(r=>{function i(a){r.next(a.detail)}function o(a){r.next(a.data)}let s;(function(a,c){js.has(a)?js.get(a).push(c):js.set(a,[c])})(`lbc-${t}`,i);try{n instanceof df?s=n.subscribe(a=>r.next(a)):n.addEventListener("message",o)}catch{}return()=>{(function(a,c){const d=js.get(a);if(d){const f=d.indexOf(c);f!==-1&&d.splice(f,1)}})(`lbc-${t}`,i),n instanceof df?s():n.removeEventListener("message",o)}}),this.name=t,this.bc=n}next(t){this.bc.postMessage(t),function(n){const r=js.get(n.type);r&&r.forEach(i=>{try{i(n)}catch{}})}(new CustomEvent(`lbc-${this.name}`,{detail:t}))}}function Dh(e){return he(this,arguments,void 0,function*({realms:t,inviteRealms:n}){const r=JSON.stringify([...t.map(s=>({realmId:s,accepted:!0})),...n.map(s=>({realmId:s,accepted:!1}))].sort((s,a)=>s.realmId<a.realmId?-1:s.realmId>a.realmId?1:0)),i=new TextEncoder().encode(r),o=yield crypto.subtle.digest("SHA-1",i);return rs(o)})}function mu(e){return Object.entries(e.cloud.schema||{}).filter(([,{markedForSync:t}])=>t).map(([t])=>e.tables.filter(({name:n})=>n===t)[0]).filter(t=>t)}function sm(e){return`$${e}_mutations`}function E1(e){var t;const n=(t=/^\$(.*)_mutations$/.exec(e))===null||t===void 0?void 0:t[1];if(!n)throw new Error(`Given mutationTable ${e} is not correct`);return n}const f2=[].concat;function lm(e){return f2.apply([],e)}function Ah(e,t){return he(this,arguments,void 0,function*(n,r,{since:i={},limit:o=1/0}={}){const s=lm(yield Promise.all(n.map(f=>he(this,void 0,void 0,function*(){const p=E1(f.name),y=i[p];let g=y?f.where("rev").above(y):f;return o<1/0&&(g=g.limit(o)),(yield g.toArray()).map(b=>({table:p,mut:b}))})))).sort((f,p)=>f.mut.txid===p.mut.txid?f.mut.opNo-p.mut.opNo:f.mut.ts-p.mut.ts),a=[];let c=null,d=null;for(const{table:f,mut:p}of s)c&&c.table===f&&d===p.txid?c.muts.push(p):(c={table:f,muts:[p]},d=p.txid,a.push(c));return a})}function C1(e){const t=new Uint8Array(e);if(typeof crypto<"u")crypto.getRandomValues(t);else for(let n=0;n<e;n++)t[n]=Math.floor(256*Math.random());if(typeof Buffer<"u"&&Buffer.from)return Buffer.from(t).toString("base64");if(typeof btoa<"u")return btoa(String.fromCharCode.apply(null,t));throw new Error("No btoa or Buffer available")}const{toString:h2}={},Wv={replace:function(e){const t=Object.keys(e);let n=null;for(let i=0,o=t.length;i<o;++i)t[i][0]==="$"&&(n=n||[],n.push(t[i]));if(!n)return e;const r={...e};for(const i of n)delete r[i];for(const i of n)r["$"+i]=e[i];return r}};function I1(...e){const t=e.reduce((r,i)=>({...r,...i}),e.reduce((r,i)=>({...i,...r}),{})),n=new WeakMap;return{stringify(r,i,o){return JSON.stringify(r,function(a){const c=this[a],d=function(f){const p=typeof f;switch(typeof f){case"object":case"function":{if(f===null)return null;const g=Object.getPrototypeOf(f);if(!g)return Wv;let b=n.get(g);if(b!==void 0)return b;const x=(y=f,h2.call(y).slice(8,-1)),D=Object.entries(t).find(([E,_])=>{var k,$;return($=(k=_==null?void 0:_.test)===null||k===void 0?void 0:k.call(_,f,x))!==null&&$!==void 0?$:E===x});return b=D==null?void 0:D[1],b||(b=Array.isArray(f)?null:typeof f=="function"?t.function||null:Wv),n.set(g,b),b}default:return t[p]}var y}(c);return d?d.replace(c,i,t):c},o)},parse(r,i){const o=[];return JSON.parse(r,function(s,a){const c=a==null?void 0:a.$t;if(c){const f=t[c];a=f?f.revive(a,i,t):a}let d=o[o.length-1];if(d&&d[0]===a){a={...a};for(const f of d[1])delete a[f];for(const[f,p]of Object.entries(d[2]))a[f]=p;o.pop()}if(a===void 0||s[0]==="$"&&s!=="$t"){let f,p;d=o[o.length-1],d&&d[0]===this?(f=d[1],p=d[2]):o.push([this,f=[],p={}]),s[0]==="$"&&s!=="$t"?(f.push(s),p[s.substr(1)]=a):p[s]=void 0}return a})}}}const p2={Blob:{test:(e,t)=>t==="Blob",replace:(e,t)=>{const n=t.length;return t.push(e),{$t:"Blob",mimeType:e.type,i:n}},revive:({i:e,mimeType:t},n)=>new Blob([n[e]],{type:t})}};var m2={number:{replace:e=>{switch(!0){case isNaN(e):return{$t:"number",v:"NaN"};case e===1/0:return{$t:"number",v:"Infinity"};case e===-1/0:return{$t:"number",v:"-Infinity"};default:return e}},revive:({v:e})=>Number(e)}};const y2={bigint:{replace:e=>({$t:"bigint",v:""+e}),revive:e=>BigInt(e.v)}};var v2={Date:{replace:e=>({$t:"Date",v:isNaN(e.getTime())?"NaN":e.toISOString()}),revive:({v:e})=>new Date(e==="NaN"?NaN:Date.parse(e))}},g2={Set:{replace:e=>({$t:"Set",v:Array.from(e.entries())}),revive:({v:e})=>new Set(e)}},w2={Map:{replace:e=>({$t:"Map",v:Array.from(e.entries())}),revive:({v:e})=>new Map(e)}};const b2=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:void 0;var k2=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","DataView","BigInt64Array","BigUint64Array"].reduce((e,t)=>({...e,[t]:{replace:(n,r,i)=>({$t:t,v:i.ArrayBuffer.replace(n.byteOffset===0&&n.byteLength===n.buffer.byteLength?n.buffer:n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength),r,i).v}),revive:({v:n},r,i)=>{const o=b2[t];return o&&new o(i.ArrayBuffer.revive({v:n},r,i))}}}),{});function O1(e){return function(t){for(var n="",r=0,i=t.length;r<i;r++)n+=j1[t[r]];return n}(rs(e))}function _2(e){return im(function(t){if(typeof t!="string")throw new Error("invalid decoder input: "+t);for(var n="",r=0,i=t.length;r<i;r++)n+=Rh[t[r]];return n}(e))}const Rh={"-":"=",0:"A",1:"B",2:"C",3:"D",4:"E",5:"F",6:"G",7:"H",8:"I",9:"J",A:"K",B:"L",C:"M",D:"N",E:"O",F:"P",G:"Q",H:"R",I:"S",J:"T",K:"U",L:"V",M:"W",N:"X",O:"Y",P:"Z",Q:"a",R:"b",S:"c",T:"d",U:"e",V:"f",W:"g",X:"h",Y:"i",Z:"j",_:"k",a:"l",b:"m",c:"n",d:"o",e:"p",f:"q",g:"r",h:"s",i:"t",j:"u",k:"v",l:"w",m:"x",n:"y",o:"z",p:"0",q:"1",r:"2",s:"3",t:"4",u:"5",v:"6",w:"7",x:"8",y:"9",z:"+","|":"/"},j1={};for(const e of Object.keys(Rh))j1[Rh[e]]=e;var x2={ArrayBuffer:{replace:e=>({$t:"ArrayBuffer",v:O1(e)}),revive:({v:e})=>{const t=_2(e);return t.buffer.byteLength===t.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}}};class ff{constructor(t,n){this.buf=t,this.type=n}}function T1(e){const t=new XMLHttpRequest;if(t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("GET",URL.createObjectURL(e),!1),t.send(),t.status!==200&&t.status!==0)throw new Error("Bad Blob access: "+t.status);return t.responseText}function N1(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t.buffer}var S2={Blob:{test:(e,t)=>t==="Blob"||e instanceof ff,replace:e=>({$t:"Blob",v:rs(e instanceof ff?e.buf:N1(T1(e))),type:e.type}),revive:({type:e,v:t})=>{const n=im(t);return typeof Blob!==void 0?new Blob([n]):new ff(n.buffer,e)}}};const P1={...m2,...y2,...v2,...g2,...w2,...k2,...x2,...S2};function Hv(e){return new Promise((t,n)=>{const r=new FileReader;r.onabort=i=>n(new Error("file read aborted")),r.onerror=i=>n(i.target.error),r.onload=i=>t(i.target.result),r.readAsArrayBuffer(e)})}var E2={undefined:{replace:()=>({$t:"undefined"}),revive:()=>{}}},C2={File:{test:(e,t)=>t==="File",replace:e=>({$t:"File",v:rs(N1(T1(e))),type:e.type,name:e.name,lastModified:new Date(e.lastModified).toISOString()}),revive:({type:e,v:t,name:n,lastModified:r})=>{const i=im(t);return new File([i],n,{type:e,lastModified:new Date(r).getTime()})}}};const I2=typeof BigInt=="function"&&typeof BigInt(0)=="bigint";class qv{toString(){return this.v}constructor(t){this.v=t}}const O2=I2?{}:{bigint:{test:e=>e instanceof qv,replace:e=>Object.assign({$t:"bigint"},e),revive:({v:e})=>new qv(e)}},D1=Object.assign(Object.assign(Object.assign(Object.assign({},E2),O2),C2),{PropModification:{test:e=>e instanceof rv,replace:e=>Object.assign({$t:"PropModification"},e["@@propmod"]),revive:e=>{var t=function(n,r){var i={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&r.indexOf(o)<0&&(i[o]=n[o]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(o=Object.getOwnPropertySymbols(n);s<o.length;s++)r.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(n,o[s])&&(i[o[s]]=n[o[s]])}return i}(e,["$t"]);return new rv(t)}}}),Il=I1(P1,D1),j2=function(...e){const t=I1(P1,p2,...e);return{toBinary(n){const[r,i]=this.stringify(n),o=new ArrayBuffer(4);return new DataView(o).setUint32(0,r.size),new Blob([o,r,i])},stringify(n){const r=[],i=t.stringify(n,r);return[new Blob(r.map(s=>{const a=new ArrayBuffer(4);return new DataView(a).setUint32(0,"byteLength"in s?s.byteLength:s.size),new Blob([a,s])})),i]},async parse(n,r){let i=0;const o=[],s=await Hv(r),a=new DataView(s);for(;i<s.byteLength;){const c=a.getUint32(i);i+=4;const d=s.slice(i,i+c);i+=c,o.push(d)}return t.parse(n,o)},async fromBinary(n){const r=new DataView(await Hv(n.slice(0,4))).getUint32(0),i=n.slice(4,r+4),o=await function(s){return new Promise((a,c)=>{const d=new FileReader;d.onabort=f=>c(new Error("file read aborted")),d.onerror=f=>c(f.target.error),d.onload=f=>a(f.target.result),d.readAsText(s)})}(n.slice(r+4));return await this.parse(o,i)}}}(D1);function T2(e,t,n){const r=[];for(let i of n){const{table:o,muts:s}=i,a=e.tables.find(f=>f.name===o);if(!a)throw new Error(`Internal error: table ${o} not found in DBCore schema`);const{primaryKey:c}=a;let d=i;s.forEach((f,p)=>{const y=!c.outbound&&(f.type==="upsert"||f.type==="insert");f.keys.forEach((g,b)=>{if(Array.isArray(g)){d===i&&(d=Gv(i,y));const x=d.muts[p],D=JSON.stringify(g);x.keys[b]=D}else if(g[0]==="#"){d===i&&(d=Gv(i,y));const x=d.muts[p];if(!t.isLoggedIn)throw new Error("Internal error: Cannot sync private IDs before authenticated");const D=`${g}:${t.userId}`;x.keys[b]=D,y&&Ae.setByKeyPath(x.values[b],c.keyPath,D)}})}),r.push(d)}return r}function Gv(e,t){return Object.assign(Object.assign({},e),{muts:t?e.muts.map(n=>n.type!=="insert"&&n.type!=="upsert"||!n.values?Object.assign(Object.assign({},n),{keys:n.keys.slice()}):Object.assign(Object.assign({},n),{keys:n.keys.slice(),values:n.values.slice()})):e.muts.map(n=>Object.assign(Object.assign({},n),{keys:n.keys.slice()}))})}let Lh=new WeakMap;function A1(e){return he(this,void 0,void 0,function*(){var t,n;const r=((n=(t=Lh.get(e))===null||t===void 0?void 0:t.getTime())!==null&&n!==void 0?n:0)-Date.now();r>0&&(yield new Promise(i=>setTimeout(i,r)))})}function N2(e,t,n,r,i,o,s,a,c){return he(this,void 0,void 0,function*(){const d={Accept:"application/json, application/x-bison, application/x-bison-stream","Content-Type":"application/tson"},f=yield Ac(i),p=f==null?void 0:f.accessToken;p&&(d.Authorization=`Bearer ${p}`);const y={v:2,dbID:n==null?void 0:n.remoteDbId,clientIdentity:a,schema:s||{},lastPull:n?{serverRevision:n.serverRevision,yServerRevision:n.yServerRevision,realms:n.realms,inviteRealms:n.inviteRealms}:void 0,baseRevs:r,changes:T2(i.dx.core.schema,c,e),y:t,dxcv:i.cloud.version};i.syncStateChangedEvent.next({phase:"pushing"});const g=Il.stringify(y),b=yield fetch(`${o}/sync`,{method:"post",headers:d,credentials:"include",body:g});if(i.syncStateChangedEvent.next({phase:"pulling"}),function(x,D){const E=D.headers.get("Ratelimit-Limit"),_=D.headers.get("Ratelimit-Remaining"),k=D.headers.get("Ratelimit-Reset");if(E&&_&&k){const $=Number(E),W=Math.max(0,Number(_)),K=Number(k);if(W<$/2){const q=Math.ceil(K/(W+1));Lh.set(x,new Date(Date.now()+1e3*q))}else Lh.delete(x)}}(i,b),!b.ok)throw new Nh(b);if(b.headers.get("content-type")==="application/x-bison")return j2.fromBinary(yield b.blob());{const x=yield b.text();return Il.parse(x)}})}function Ts(e){if(e!=null&&e.cancelled)throw new Ae.AbortError("Operation was cancelled")}let To=!1;function R1(e,t,n,r){return he(this,void 0,void 0,function*(){yield e.$baseRevs.bulkPut(Object.keys(t).filter(i=>t[i].markedForSync).map(i=>({tableName:i,clientRev:(n[i]||0)+1,serverRev:r}))),yield e.$baseRevs.where("tableName").noneOf(Object.keys(t).filter(i=>t[i].markedForSync)).delete()})}function Mh(e,t={}){for(const{table:n,muts:r}of e){const i=r.length>0?r[r.length-1].rev:null;t[n]=i||t[n]||0}return t}function P2(e,t,n){return he(this,void 0,void 0,function*(){const r=yield e.bulkGet(t),i=[],o=[];t.forEach((s,a)=>{const c=r[a];if(c){for(const[d,f]of Object.entries(n[a]))if(d===e.schema.primKey.keyPath){if(Sc(f,s)!==0)throw new Error("Cannot change primary key")}else Ae.setByKeyPath(c,d,f);i.push(s),o.push(c)}}),yield e.schema.primKey.keyPath==null?e.bulkPut(o,i):e.bulkPut(o)})}function L1(e,t){return he(this,void 0,void 0,function*(){for(const{table:n,muts:r}of e){if(!t.dx._allTables[n])continue;const i=t.table(n),{primaryKey:o}=i.core.schema,s=a=>{switch(a[0]){case"[":if(a.endsWith("]"))try{return JSON.parse(a)}catch{}return a;case"#":return a.endsWith(":"+t.cloud.currentUserId)?a.substr(0,a.length-t.cloud.currentUserId.length-1):a;default:return a}};for(const a of r){const c=a.keys.map(s);switch(a.type){case"insert":o.outbound?yield i.bulkAdd(a.values,c):(c.forEach((d,f)=>{Ae.setByKeyPath(a.values[f],o.keyPath,d)}),yield i.bulkAdd(a.values));break;case"upsert":o.outbound?yield i.bulkPut(a.values,c):(c.forEach((d,f)=>{Ae.setByKeyPath(a.values[f],o.keyPath,d)}),yield i.bulkPut(a.values));break;case"modify":c.length===1?yield i.update(c[0],a.changeSpec):yield i.where(":id").anyOf(c).modify(a.changeSpec);break;case"update":yield P2(i,c,a.changeSpecs);break;case"delete":yield i.bulkDelete(c)}}}})}typeof self<"u"&&typeof navigator<"u"&&(To=navigator.onLine,self.addEventListener("online",()=>To=!0),self.addEventListener("offline",()=>To=!1));const oi="dexie-cloud-syncer";function M1(e,t){return e.where("i").between(t,1/0,!0).toArray()}function Js(e,t,n){var r,i,o;if(!e.dx._allTables[t])return;const s=(o=(i=(r=e.table(t))===null||r===void 0?void 0:r.schema.yProps)===null||i===void 0?void 0:i.find(a=>a.prop===n))===null||o===void 0?void 0:o.updatesTable;return s&&e.dx._allTables[s]?e.table(s):void 0}function U1(e,t){return he(this,void 0,void 0,function*(){var n;const r={};let i,o=!1;for(const s of e)try{switch(s.type){case"u-s":{const a=Js(t,s.table,s.prop);if(a){const c={k:s.k,u:s.u};s.r&&(c.r=s.r,i=s.r),r[a.name]=yield a.add(c)}break}case"u-ack":{const a=Js(t,s.table,s.prop);a&&(yield t.transaction("rw",a,c=>he(this,void 0,void 0,function*(){let d=yield c.table(a.name).get(oi);yield c.table(a.name).put(Object.assign(Object.assign({},d||{i:oi}),{unsentFrom:Math.max((d==null?void 0:d.unsentFrom)||1,s.i+1)}))})));break}case"u-reject":{const a=Js(t,s.table,s.prop);if(!a)break;const c=(n=yield a.get(s.i))===null||n===void 0?void 0:n.k;if(c!=null){yield t.transaction("rw",a,f=>(f.idbtrans._rejecting_y_ypdate=!0,a.where("i").aboveOrEqual(s.i).filter(p=>Sc(p.k,c)===0&&(1&(p.f||0))==1).delete()));const d=Wt.getDocCache(t.dx).find(s.table,c,s.prop);d&&d.destroy()}break}case"in-sync":{const a=Wt.getDocCache(t.dx).find(s.table,s.k,s.prop);a&&!a.isSynced&&a.emit("sync",[!0,a]);break}case"y-complete-sync-done":i=s.yServerRev;break;case"outdated-server-rev":o=!0}}catch{}return{receivedUntils:r,resyncNeeded:o,yServerRevision:i}})}const D2=1,A2=2,R2=3;function L2(e,t,n){return he(this,arguments,void 0,function*(r,i,{yDownloadedRealms:o,realms:s}){if(o&&s&&s.every(f=>o[f]==="*"))return;const a=yield Ac(r),c={"Content-Type":"application/json",Accept:"application/octet-stream"};a&&(c.Authorization=`Bearer ${a.accessToken}`);const d=yield fetch(`${i}/y/download`,{body:Il.stringify({downloadedRealms:o||{}}),method:"POST",headers:c,credentials:"include"});if(!d.ok)throw new Error(`Failed to download Yjs documents from server. Status: ${d.status}`);yield async function(f,...p){var y,g,b;let x=f();for(let k=0;k<p.length;k++)x=p[k](x);try{for(var D,E=!0,_=Ih(x);!(y=(D=await _.next()).done);E=!0)D.value,E=!1}catch(k){g={error:k}}finally{try{E||y||!(b=_.return)||await b.call(_)}finally{if(g)throw g.error}}}(function(f){return function(){return Ch(this,arguments,function*(){if(!f.body)throw new Error("Response body is not readable");const p=f.body.getReader();try{for(;;){const{done:y,value:g}=yield At(p.read());if(y)return yield At(void 0);yield yield At(g)}}finally{p.releaseLock()}})}}(d),a2,function(f){return Ch(this,arguments,function*(){var p,y,g,b;let x=null,D=null,E=null,_=[];function k(q){return he(this,void 0,void 0,function*(){const H=_[_.length-1];if(_.length>0){if(!x||!D||!E)throw new Error(`Protocol error from ${i}/y/download`);const le=Js(r,D,E);le&&(yield le.bulkAdd(_)),_=[]}x&&(D&&E&&H||q)&&(yield r.$syncState.update("syncState",le=>{const fe=le.yDownloadedRealms||{};fe[x]=q?"*":{tbl:D,prop:E,key:H.k},le.yDownloadedRealms=fe}))})}try{try{for(var $,W=!0,K=Ih(f);!(p=($=yield At(K.next())).done);W=!0){b=$.value,W=!1;const q=new Xo(b);for(;Qw(q);)switch(Uo(q)){case D2:yield At(k(!0)),x=Cn(q);break;case A2:yield At(k(!1)),D=Cn(q),E=Cn(q);break;case R2:{const H=ii(q),le=Dt(q);_.push({k:H,u:le});break}}yield At(k(!1))}}catch(q){y={error:q}}finally{try{W||p||!(g=K.return)||(yield At(g.call(K)))}finally{if(y)throw y.error}}yield At(k(!0))}catch(q){throw q instanceof Ae.DexieError||(yield At(k(!1))),q}})})})}const $1="currentSyncWorker";function Lc(e,t,n,r){return z1(e,t,n,r).then(i=>(r!=null&&r.justCheckIfNeeded||e.syncStateChangedEvent.next({phase:"in-sync"}),i)).catch(i=>he(this,void 0,void 0,function*(){return r!=null&&r.justCheckIfNeeded?Promise.reject(i):To&&(r!=null&&r.retryImmediatelyOnFetchError)&&(i==null?void 0:i.name)==="TypeError"&&/fetch/.test(i==null?void 0:i.message)?(e.syncStateChangedEvent.next({phase:"error",error:i}),yield new Promise(o=>setTimeout(o,500)),yield Lc(e,t,n,Object.assign(Object.assign({},r),{retryImmediatelyOnFetchError:!1}))):(yield e.$syncState.update("syncState",{timestamp:new Date,error:""+i}),e.syncStateChangedEvent.next({phase:To?"error":"offline",error:new Error(""+(i==null?void 0:i.message)||i)}),Promise.reject(i))}))}function z1(e,t,n){return he(this,arguments,void 0,function*(r,i,o,{isInitialSync:s,cancelToken:a,justCheckIfNeeded:c,purpose:d}={isInitialSync:!1}){var f;if(!(!((f=r.cloud.options)===null||f===void 0)&&f.databaseUrl))throw new Error("Internal error: sync must not be called when no databaseUrl is configured");const{databaseUrl:p}=i,y=yield r.getCurrentUser(),g=y.isLoggedIn?mu(r):[],b=g.map(Q=>r.table(sm(Q.name))),x=yield r.getPersistedSyncState(),D=y.isLoggedIn,E=D?function(Q,ae){const M=(ae==null?void 0:ae.syncedTables)||[];return mu(Q).filter(ee=>!M.includes(ee.name))}(r,x):[];Ts(a);const _=E.length>0;if(_){if(c)return!0;yield r.transaction("rw",E,Q=>he(this,void 0,void 0,function*(){Q.idbtrans.disableChangeTracking=!0,Q.idbtrans.disableAccessControl=!0,yield function(ae,M,ee){return he(this,void 0,void 0,function*(){const ne=new Set(ee||[]);for(const de of ae)de.name==="members"?yield de.toCollection().modify(ie=>{ne.has(ie.realmId)||ie.userId&&ie.userId!==tn.userId||(ie.userId=M.userId)}):de.name==="roles"||(de.name==="realms"?yield de.toCollection().modify(ie=>{ne.has(ie.realmId)||ie.owner!==void 0&&ie.owner!==tn.userId||(ie.owner=M.userId)}):yield de.toCollection().modify(ie=>{ie.realmId&&ne.has(ie.realmId)||(ie.owner&&ie.owner!==tn.userId||(ie.owner=M.userId),ie.realmId&&ie.realmId!==tn.userId||(ie.realmId=M.userId))}))})}(E,y,x==null?void 0:x.realms)})),Ts(a)}const[k,$,W,{yMessages:K,lastUpdateIds:q}]=yield r.transaction("r",r.tables,()=>he(this,void 0,void 0,function*(){const Q=yield r.getPersistedSyncState();let ae=yield r.$baseRevs.toArray();ae=ae.filter(ne=>g.some(de=>de.name===ne.tableName));let M=yield Ah(b,r);const ee=yield function(ne,de){return he(this,void 0,void 0,function*(){const ie=[],be={};for(const De of de)if(De.schema.yProps)for(const Qe of De.schema.yProps){const $e=ne.table(Qe.updatesTable),Te=yield $e.get(oi),ut=(Te==null?void 0:Te.unsentFrom)||1,se=(Te==null?void 0:Te.receivedUntil)||0,Ve=Math.min(ut,se+1),nt=yield M1($e,Ve);nt.length>0&&(be[$e.name]=nt[nt.length-1].i);const we={};for(const Le of nt){const Be=(1&(Le.f||0))==1;if(Be&&Le.i<ut)continue;const qe=JSON.stringify(Le.k)+"/"+Be;let un=we[qe];un?(un.u.push(Le.u),un.i=Math.max(Le.i,un.i)):(we[qe]=un={i:Le.i,k:Le.k,isLocal:Be,u:[]},un.u.push(Le.u))}for(const{k:Le,isLocal:Be,u:qe,i:un}of Object.values(we)){const mi=qe.length===1?qe[0]:Gu(qe);if(Be)ie.push({type:"u-c",table:De.name,prop:Qe.prop,k:Le,u:mi,i:un});else{const Bn=Yb(mi);ie.push({type:"sv",table:De.name,prop:Qe.prop,k:Le,sv:Bn})}}}return{yMessages:ie,lastUpdateIds:be}})}(r,g);if(Ts(a),_){const ne=[...(x==null?void 0:x.realms)||[],...(x==null?void 0:x.inviteRealms)||[]],de=yield function(ie,be,De,Qe){return he(this,void 0,void 0,function*(){const $e=`upload-${C1(8)}`;if(be.isLoggedIn&&ie.length>0){const Te=new Set(Qe||[]);return(yield Promise.all(ie.map(ut=>he(this,void 0,void 0,function*(){const{extractKey:se}=ut.core.schema.primaryKey;if(!se)return{table:ut.name,muts:[]};const Ve=De[ut.name],nt=Ve!=null&&Ve.generatedGlobalId?ut.filter(Le=>{return se(Le),!Te.has(Le.realmId||"")&&(Be=se(Le),!(qe=Ve==null?void 0:Ve.idPrefix)||typeof Be=="string"&&Be.startsWith(qe));var Be,qe}):ut.filter(Le=>{const Be=se(Le);return!Te.has(Le.realmId||"")&&rm(Be)}),we=yield nt.toArray();if(we.length>0){const Le={type:"upsert",values:we,keys:we.map(se),userId:be.userId,txid:$e};return{table:ut.name,muts:[Le]}}return{table:ut.name,muts:[]}})))).filter(ut=>ut.muts.length>0)}return[]})}(E,y,o,ne);return Ts(a),M=M.concat(de),[M,Q,ae,ee]}return[M,Q,ae,ee]})),H=k.some(Q=>Q.muts.some(ae=>ae.keys.length>0))||K.some(Q=>Q.type==="u-c");if(c)return H;if(d==="push"&&!H)return!1;const le=Mh(k,$==null?void 0:$.latestRevisions),fe=($==null?void 0:$.clientIdentity)||b1(16);Ts(a);const Y=yield N2(k,K,$,W,r,p,o,fe,y),{done:ge,newSyncState:ke}=yield r.transaction("rw",r.tables,Q=>he(this,void 0,void 0,function*(){Q.idbtrans.disableChangeTracking=!0,Q.idbtrans.disableAccessControl=!0;for(const de of Object.keys(o))Y.schema[de]&&(o[de]=Y.schema[de]);yield r.$syncState.put(o,"schema");const ae=yield Ah(b,r,{since:le});for(const de of b){const ie=E1(de.name);if(ae.some(be=>be.table===ie&&be.muts.length>0)){if(le[ie]){const be=le[ie]||0;yield Promise.all([de.where("rev").belowOrEqual(be).delete(),r.$baseRevs.where(":id").between([ie,-1/0],[ie,be+1],!0,!0).reverse().offset(1).delete()])}}else yield Promise.all([de.clear(),r.$baseRevs.where({tableName:ie}).delete()])}Mh(ae,le),yield R1(r,o,le,Y.serverRevision);const M=yield r.getPersistedSyncState();yield function(de,ie,be){return he(this,void 0,void 0,function*(){const De=new Set,Qe=new Set,$e=be?be.realms:[],Te=be?be.inviteRealms:[],ut=new Set(ie.realms),se=new Set(ie.realms.concat(ie.inviteRealms));for(const Ve of $e)ut.has(Ve)||(Qe.add(Ve),se.has(Ve)||De.add(Ve));for(const Ve of Te.concat($e))se.has(Ve)||De.add(Ve);if(De.size>0||Qe.size>0){const Ve=mu(de);for(const nt of Ve){let we=["realms","members","roles"].includes(nt.name)?De:Qe;we.size!==0&&(nt.schema.indexes.some(Le=>Le.keyPath==="realmId"||Array.isArray(Le.keyPath)&&Le.keyPath[0]==="realmId")?yield nt.where("realmId").anyOf([...we]).delete():yield nt.filter(Le=>!!(Le!=null&&Le.realmId)&&we.has(Le.realmId)).delete())}}if(Qe.size>0&&(be!=null&&be.yDownloadedRealms))for(const Ve of Qe)delete be.yDownloadedRealms[Ve]})}(r,Y,M);const ee=M||{syncedTables:[],latestRevisions:{},realms:[],inviteRealms:[],clientIdentity:fe};D&&(ee.syncedTables=g.map(de=>de.name).concat(E.map(de=>de.name))),ee.latestRevisions=le,ee.remoteDbId=Y.dbId,ee.initiallySynced=!0,ee.realms=Y.realms,ee.inviteRealms=Y.inviteRealms,ee.serverRevision=Y.serverRevision,ee.yServerRevision=Y.serverRevision,ee.timestamp=new Date,delete ee.error;const ne=F1(Y.changes,ae);if(yield L1(ne,r),Y.yMessages){const{receivedUntils:de,resyncNeeded:ie,yServerRevision:be}=yield U1(Y.yMessages,r);be&&(ee.yServerRevision=be),yield function(De,Qe,$e){return he(this,void 0,void 0,function*(){var Te,ut,se,Ve,nt;const we={};for(const[Be,qe]of Object.entries(De))(Te=we[Be])!==null&&Te!==void 0||(we[Be]={}),we[Be].unsentFrom=qe+1;for(const[Be,qe]of Object.entries(Qe))(ut=we[Be])!==null&&ut!==void 0||(we[Be]={}),we[Be].receivedUntil=qe;const Le=Object.values($e.dx._dbSchema).filter(Be=>Be.yProps).map(Be=>Be.yProps.map(qe=>qe.updatesTable)).flat();for(const Be of Le){const qe=we[Be],un=(se=qe==null?void 0:qe.unsentFrom)!==null&&se!==void 0?se:1,mi=(nt=(Ve=qe==null?void 0:qe.receivedUntil)!==null&&Ve!==void 0?Ve:(yield $e.table(Be).where("i").between(1,1/0).reverse().limit(1).primaryKeys())[0])!==null&&nt!==void 0?nt:0;yield $e.transaction("rw",Be,()=>he(this,void 0,void 0,function*(){const Bn=yield $e.table(Be).get(oi);Bn?(Bn.unsentFrom=Math.max(un,Bn.unsentFrom||1),Bn.receivedUntil=Math.max(mi,Bn.receivedUntil||0),yield $e.table(Be).put(Bn)):yield $e.table(Be).add({i:oi,unsentFrom:un,receivedUntil:mi})}))}})}(q,de,r),ie&&(ee.yDownloadedRealms={})}return r.$syncState.put(ee,"syncState"),{done:ae.length===0,newSyncState:ee}}));if(!ge)return yield A1(r),yield z1(r,i,o,{isInitialSync:s,cancelToken:a});const Se=Object.values(o).some(Q=>{var ae;return(ae=Q.yProps)===null||ae===void 0?void 0:ae.length}),Ee=!!Y.yMessages;if(Se&&Ee)try{yield L2(r,p,ke)}catch{}return r.syncCompleteEvent.next(),!1})}function F1(e,t){const n={};Fv(n,e);const r={};return Fv(r,t),function(i,o){var s,a,c;for(const[d,f]of Object.entries(o))for(const[p,y]of Object.entries(f))switch(y.type){case"ups":{const g=(s=i[d])===null||s===void 0?void 0:s[p];if(g)switch(g.type){case"ups":case"upd":delete i[d][p]}}break;case"del":(a=i[d])===null||a===void 0||delete a[p];break;case"upd":{const g=(c=i[d])===null||c===void 0?void 0:c[p];if(g)switch(g.type){case"ups":for(const[b,x]of Object.entries(y.mod))tc(g.val,b,x);break;case"del":break;case"upd":for(const b of Object.keys(y.mod))delete g.mod[b]}break}}}(n,r),function(i,o=""){o||(o=b1(16));const s={};for(const[c,d]of Object.entries(i))for(const[f,p]of Object.entries(d)){const y=s[c]||(s[c]={});(y[p.type]||(y[p.type]=[])).push(Object.assign({key:f},p))}const a=[];for(const[c,d]of Object.entries(s)){const f={table:c,muts:[]};for(const[p,y]of Object.entries(d))switch(p){case"ups":{const g={type:"upsert",keys:y.map(b=>b.key),values:y.map(b=>b.val),txid:o};f.muts.push(g);break}case"upd":{const g={type:"update",keys:y.map(b=>b.key),changeSpecs:y.map(b=>b.mod),txid:o};f.muts.push(g);break}case"del":{const g={type:"delete",keys:y.map(b=>b.key),txid:o};f.muts.push(g);break}}a.push(f)}return a}(n)}const M2=10,U2=1e4,$2=1e3;function z2(e){const t=[],n=new Un(!0),r=new Un(null);let i=!1,o=new Array(M2).fill(0);return r.subscribe(()=>he(this,void 0,void 0,function*(){if(!i&&t.length>0){i=!0,o.shift(),o.push(Date.now()),n.next(!1);try{yield function(){return he(this,void 0,void 0,function*(){for(var s,a,c,d,f,p;t.length>0;){const y=t.shift();try{yield Di(e.cloud.syncState.pipe(_n(({phase:b})=>b==="in-sync"||b==="error")));const g=e.cloud.persistedSyncState.value;if(!y)continue;switch(y.type){case"token-expired":const b=e.cloud.currentUser.value,x=yield Rc(e.cloud.options.databaseUrl,b);yield e.table("$logins").update(b.userId,{accessToken:x.accessToken,accessTokenExpiration:x.accessTokenExpiration,claims:x.claims,license:x.license,data:x.data});break;case"realm-added":!((s=g==null?void 0:g.realms)===null||s===void 0)&&s.includes(y.realm)||!((a=g==null?void 0:g.inviteRealms)===null||a===void 0)&&a.includes(y.realm)||(yield e.cloud.sync({purpose:"pull",wait:!0}));break;case"realm-accepted":!((c=g==null?void 0:g.realms)===null||c===void 0)&&c.includes(y.realm)||(yield e.cloud.sync({purpose:"pull",wait:!0}));break;case"realm-removed":(!((d=g==null?void 0:g.realms)===null||d===void 0)&&d.includes(y.realm)||!((f=g==null?void 0:g.inviteRealms)===null||f===void 0)&&f.includes(y.realm))&&(yield e.cloud.sync({purpose:"pull",wait:!0}));break;case"realms-changed":yield e.cloud.sync({purpose:"pull",wait:!0});break;case"changes":if(((p=e.cloud.syncState.value)===null||p===void 0?void 0:p.phase)==="error"){pr(e,"pull");break}yield e.transaction("rw",e.dx.tables,D=>he(this,void 0,void 0,function*(){D.idbtrans.disableChangeTracking=!0,D.idbtrans.disableAccessControl=!0;const[E,_,k]=yield Promise.all([e.getSchema(),e.getPersistedSyncState(),e.getCurrentUser()]);if(!_||!E||!k)return;if(y.baseRev!==_.serverRevision)return void(typeof y.baseRev!="string"||typeof _.serverRevision!="bigint"&&typeof _.serverRevision!="object"||pr(e,"pull"));if((yield Ae.waitFor(Dh(_)))!==y.realmSetHash)return void pr(e,"pull");let $=[];if(k.isLoggedIn){const W=mu(e).map(K=>e.table(sm(K.name)));$=yield Ah(W,e)}if(y.changes.length>0){const W=F1(y.changes,$);yield L1(W,e)}_.latestRevisions=Mh($,_.latestRevisions),_.serverRevision=y.newRev,yield R1(e,E,_.latestRevisions,y.newRev),yield e.$syncState.put(_,"syncState")}))}}catch{}}})}()}finally{o[o.length-1]-o[0]<U2&&(yield new Promise(s=>setTimeout(s,$2))),i=!1,n.next(!0)}}})),{enqueue:function(s){t.push(s),r.next(null)},readyToServe:n}}const Yv=new WeakMap,Ha={members:"@id, [userId+realmId], [email+realmId], realmId",roles:"[realmId+name]",realms:"@realmId",$jobs:"",$syncState:"",$baseRevs:"[tableName+clientRev]",$logins:"claims.sub, lastLogin"};let F2=0;function lr(e){"vip"in e&&(e=e.vip);let t=Yv.get(e.cloud);if(!t){const n=new Ki;let r=new Wa(`syncstatechanged-${e.name}`),i=new Wa(`synccomplete-${e.name}`);n.id=++F2;let o=!1;t={get name(){return e.name},close:()=>e.close(),transaction:e.transaction.bind(e),table:e.table.bind(e),get tables(){return e.tables},cloud:e.cloud,get $jobs(){return e.table("$jobs")},get $syncState(){return e.table("$syncState")},get $baseRevs(){return e.table("$baseRevs")},get $logins(){return e.table("$logins")},get realms(){return e.realms},get members(){return e.members},get roles(){return e.roles},get initiallySynced(){return o},localSyncEvent:n,get syncStateChangedEvent(){return r},get syncCompleteEvent(){return i},dx:e},Object.assign(t,{getCurrentUser:()=>t.$logins.toArray().then(a=>a.find(c=>c.isLoggedIn)||tn),getPersistedSyncState:()=>t.$syncState.get("syncState"),getSchema:()=>t.$syncState.get("schema").then(a=>{if(a)for(const d of t.tables)d.schema.primKey&&d.schema.primKey.keyPath&&a[d.name]&&(a[d.name].primaryKey=typeof(c=d.schema.primKey.keyPath)=="string"?c:c?"["+[].join.call(c,"+")+"]":"");var c;return a}),getOptions:()=>t.$syncState.get("options"),setInitiallySynced(a){o=a},reconfigure(){r=new Wa(`syncstatechanged-${e.name}`),i=new Wa(`synccomplete-${e.name}`)}}),t.messageConsumer=z2(t),t.messageProducer=new Ki,Yv.set(e.cloud,t)}return t}const B2=typeof InstallTrigger<"u",B1=typeof navigator<"u"&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\/|Edge\//.test(navigator.userAgent),K2=B1?[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]:NaN,V2=B1&&K2<=605||B2,W2=typeof self<"u"&&"clients"in self&&!self.document,{toString:H2}={};function Qv(e){return H2.call(e).slice(8,-1)}function hf(e,t){var n;return t.type==="delete"?t.keys:((n=t.keys)===null||n===void 0?void 0:n.slice())||t.values.map(e.extractKey)}const q2=/b|c|d|f|g|h|j|k|l|m|n|p|q|r|s|t|v|x|y|z/i;let ar=0;function K1(e,t){const n=new Uint8Array(18),r=new Uint8Array(n.buffer,0,6),i=Date.now();ar>=i?++ar:ar=i,r[0]=ar/1099511627776,r[1]=ar/4294967296,r[2]=ar/16777216,r[3]=ar/65536,r[4]=ar/256,r[5]=ar;const o=new Uint8Array(n.buffer,6);return crypto.getRandomValues(o),e+O1(new Uint8Array(n.buffer))+(t||"")}function G2(e){return{stack:"dbcore",name:"idGenerationMiddleware",level:1,create:t=>Object.assign(Object.assign({},t),{table:n=>{const r=t.table(n);return Object.assign(Object.assign({},r),{mutate:i=>{var o,s;const a=i.trans;if(a.mode==="versionchange"&&(a.disableChangeTracking=!0,a.disableAccessControl=!0),a.disableChangeTracking)return r.mutate(i);if(i.type==="add"||i.type==="put"){const c=(o=e.cloud.schema)===null||o===void 0?void 0:o[n];if(c!=null&&c.generatedGlobalId){if(!((s=e.cloud.options)===null||s===void 0)&&s.databaseUrl&&!e.initiallySynced){const d=hf(r.schema.primaryKey,i);return r.getMany({keys:d,trans:i.trans,cache:"immutable"}).then(f=>{if(f.length<d.length)throw new Error("Unable to create new objects without an initial sync having been performed.");return r.mutate(i)})}return function(d,f){let p=null;const y=hf(r.schema.primaryKey,d);return y.forEach((g,b)=>{if(g===void 0){const x=d.values[b].realmId||e.cloud.currentUserId,D=x.substr(x.length-3);y[b]=K1(f,D),r.schema.primaryKey.outbound||(p||(p=d.values.slice()),p[b]=Ae.deepClone(p[b]),Ae.setByKeyPath(p[b],r.schema.primaryKey.keyPath,y[b]))}else if(typeof g!="string"||!g.startsWith(f)&&!g.startsWith("#"+f))throw new Ae.ConstraintError(`The ID "${g}" is not valid for table "${n}". Primary '@' keys requires the key to be prefixed with "${f}" (or "#${f}).
If you want to generate IDs programmatically, remove '@' from the schema to get rid of this constraint. Dexie Cloud supports custom IDs as long as they are random and globally unique.`)}),r.mutate(Object.assign(Object.assign({},d),{keys:y,values:p||d.values}))}(i,c.idPrefix)}c!=null&&c.markedForSync&&hf(r.schema.primaryKey,i).forEach((d,f)=>{if(!rm(d)){const p=Array.isArray(d)?d.map(Qv).join(","):Qv(d);throw new Ae.ConstraintError(`Invalid primary key type ${p} for table ${n}. Tables marked for sync has primary keys of type string or Array of string (and optional numbers)`)}})}return r.mutate(i)}})}})}}let Y2=0;function Ns(e,t){return function(n){const{readers:r,writers:i}=n.trans[t]||(n.trans[t]={writers:[],readers:[]}),o=i.length,s=(o>0?i[o-1].then(()=>e(n),()=>e(n)):e(n)).finally(()=>{r.splice(r.indexOf(s))});return r.push(s),s}}function Q2(e,t){return function(n){const{readers:r,writers:i}=n.trans[t]||(n.trans[t]={writers:[],readers:[]});let o=(i.length>0?i[i.length-1].then(()=>e(n),()=>e(n)):r.length>0?(s=r,new Promise(a=>{s.length===0&&a([]);let c=s.length;const d=new Array(c);s.forEach((f,p)=>Promise.resolve(f).then(y=>d[p]={status:"fulfilled",value:y},y=>d[p]={status:"rejected",reason:y}).then(()=>--c||a(d)))})).then(()=>e(n)):e(n)).finally(()=>{i.shift()});var s;return i.push(o),o}}const io=new Un(new Set);function Ol(e){var t,n,r,i;return((t=e.cloud.options)===null||t===void 0?void 0:t.disableEagerSync)||((r=(n=e.cloud.currentUser.value)===null||n===void 0?void 0:n.license)===null||r===void 0?void 0:r.status)!=="ok"||!(!((i=e.cloud.options)===null||i===void 0)&&i.databaseUrl)}function J2({currentUserObservable:e,db:t}){return{stack:"dbcore",name:"MutationTrackingMiddleware",level:1,create:n=>{const r=new Set(n.schema.tables.map(s=>s.name)),i=n.schema.tables.filter(s=>!/^\$/.test(s.name)),o=new Map;for(const s of i){const a=`$${s.name}_mutations`;r.has(a)&&o.set(s.name,n.table(a))}return Object.assign(Object.assign({},n),{transaction:(s,a)=>{let c;if(a==="readwrite"){const d=s.filter(f=>{var p,y;return(y=(p=t.cloud.schema)===null||p===void 0?void 0:p[f])===null||y===void 0?void 0:y.markedForSync}).map(f=>sm(f));c=n.transaction([...s,...d],a)}else c=n.transaction(s,a);if(a==="readwrite"){c.txid=C1(16),c.opCount=0,c.currentUser=e.value,io.value.add(c),io.next(io.value);const d=()=>{c.removeEventListener("complete",f),c.removeEventListener("error",d),c.removeEventListener("abort",d),io.value.delete(c),io.next(io.value)},f=()=>{c.mutationsAdded&&!Ol(t)&&pr(t,"push"),d()};c.addEventListener("complete",f),c.addEventListener("error",d),c.addEventListener("abort",d)}return c},table:s=>{const a=n.table(s);if(/^\$/.test(s))return s.endsWith("_mutations")?Object.assign(Object.assign({},a),{mutate:p=>(p.type!=="add"&&p.type!=="put"||(p.trans.mutationsAdded=!0),a.mutate(p))}):s==="$logins"?Object.assign(Object.assign({},a),{mutate:p=>a.mutate(p).then(y=>(p.trans.mutationsAdded=!0,y)).catch(y=>Promise.reject(y))}):a;const{schema:c}=a,d=o.get(s);return d?function(p){const y="$lock"+ ++Y2;return Object.assign(Object.assign({},p),{count:Ns(p.count,y),get:Ns(p.get,y),getMany:Ns(p.getMany,y),openCursor:Ns(p.openCursor,y),query:Ns(p.query,y),mutate:Q2(p.mutate,y)})}(Object.assign(Object.assign({},a),{mutate:p=>{var y,g,b;const x=p.trans;return x.txid?x.disableChangeTracking?a.mutate(p):!((g=(y=t.cloud.schema)===null||y===void 0?void 0:y[s])===null||g===void 0)&&g.markedForSync&&(!((b=x.currentUser)===null||b===void 0)&&b.isLoggedIn)?p.type==="deleteRange"?a.query({query:{range:p.range,index:c.primaryKey},trans:p.trans,values:!1}).then(D=>f({type:"delete",keys:D.result,trans:p.trans,criteria:{index:null,range:p.range}})):f(p):a.mutate(p):a.mutate(p)}})):a;function f(p){var y,g;const b=p.trans,x=(g=(y=t.cloud.options)===null||y===void 0?void 0:y.unsyncedProperties)===null||g===void 0?void 0:g[s],{txid:D,currentUser:{userId:E}}=b,{type:_}=p,k=++b.opCount;function $(W){if(!x)return W;let K=W;for(const q of Object.keys(W))x.some(H=>q===H||q.startsWith(H+"."))&&(K===W&&(K=Object.assign({},W)),delete K[q]);return K}return a.mutate(p).then(W=>{var K;const{numFailures:q,failures:H}=W;let le=_==="delete"?p.keys:W.results,fe="values"in p?p.values:[],Y="changeSpec"in p?p.changeSpec:void 0,ge="updates"in p?p.updates:void 0;if(q&&(le=le.filter((Q,ae)=>!H[ae]),fe=fe.filter((Q,ae)=>!H[ae])),x){if(fe=fe.map(Q=>{const ae=Object.assign({},Q);for(const M of x)delete ae[M];return ae}),Y&&(Y=$(Y),Object.keys(Y).length===0))return W;if(ge){let Q=ge.changeSpecs.map($),ae={keys:[],changeSpecs:[]};const M=new OS;let ee=!1;for(let ne=0,de=Q.length;ne<de;++ne)Object.keys(Q[ne]).length>0?(ae.keys.push(ge.keys[ne]),ae.changeSpecs.push(Q[ne]),M.addKey(ge.keys[ne])):ee=!0;if(ge=ae,ee){let ne=[],de=[];for(let ie=0,be=le.length;ie<be;++ie)M.hasKey(le[ie])&&(ne.push(le[ie]),de.push(fe[ie]));le=ne,fe=de}}}const ke=Date.now();let Se="criteria"in p&&p.criteria?Object.assign(Object.assign({},p.criteria),{index:p.criteria.index===c.primaryKey.keyPath?null:p.criteria.index}):void 0;if(x&&(Se!=null&&Se.index)){const Q=(K=c.indexes.find(ae=>ae.name===Se.index))===null||K===void 0?void 0:K.keyPath;(Q?typeof Q=="string"?[Q]:Q:[]).some(ae=>x==null?void 0:x.includes(ae))&&(Se=void 0)}const Ee=p.type==="delete"?{type:"delete",ts:ke,opNo:k,keys:le,criteria:Se,txid:D,userId:E}:p.type==="add"?{type:"insert",ts:ke,opNo:k,keys:le,txid:D,userId:E,values:fe}:Se&&Y?{type:"modify",ts:ke,opNo:k,keys:le,criteria:Se,changeSpec:Y,txid:D,userId:E}:Y?{type:"update",ts:ke,opNo:k,keys:le,changeSpecs:le.map(()=>Y),txid:D,userId:E}:ge?{type:"update",ts:ke,opNo:k,keys:ge.keys,changeSpecs:ge.changeSpecs,txid:D,userId:E}:{type:"upsert",ts:ke,opNo:k,keys:le,values:fe,txid:D,userId:E};return"isAdditionalChunk"in p&&p.isAdditionalChunk&&(Ee.isAdditionalChunk=!0),le.length>0||Se?d.mutate({type:"add",trans:b,values:[Ee]}).then(()=>(b.mutationsAdded=!0,W)):W})}}})}}}function X2(e,t){return function(n,r){var i;const o=Object.assign(Object.assign({},Ha),n);Object.keys(Ha).forEach(d=>{const f=o[d];if(f==null)throw new Error(`Cannot delete table ${d} as it is needed for access control of Dexie Cloud`);if(!n[d])return;const p=f.split(",").map(b=>b.trim()),y=Ha[d].split(",").map(b=>b.trim()),g=new Set(p.map(b=>b.replace(/([&*]|\+\+)/g,"")));if(p[0]!==y[0])throw new Error(`Cannot override primary key of table ${d}. Please declare it as {${d}: ${JSON.stringify(Ha[d])}`);for(let b=1;b<y.length;++b){const x=y[b];g.has(x.replace(/([&*]|\+\+)/g,""))||(o[d]+=`,${x}`)}});const s=t.cloud.schema||(t.cloud.schema={}),a=new Set;Object.keys(o).forEach(d=>{const f=o[d],p=s[d]||(s[d]={});f!=null?(/^\@/.test(f)&&(o[d]=o[d].substr(1),p.generatedGlobalId=!0,p.idPrefix=function(y,g){let b=y[0].toLocaleLowerCase();for(let _=1,k=y.length;_<k&&b.length<3;++_)(q2.test(y[_])||(x=y[_])>="A"&&x<="Z")&&(b+=y[_].toLowerCase());for(var x,D,E;g.has(b);){if(/\d/g.test(b)){if(b=b.substr(0,b.length-1)+(b[b.length-1]+1),!(b.length>3))continue;b=b.substr(0,3)}else if(b.length<3){b+="2";continue}let _=1,k=b;for(;g.has(k)&&_<8;)D=b,k=(1&(E=_)?D[0].toUpperCase():D[0].toLowerCase())+(2&E?D[1].toUpperCase():D[1].toLowerCase())+(4&E?D[2].toUpperCase():D[2].toLowerCase()),++_;if(_<8)b=k;else{let $=b.charCodeAt(2)+1&127;b=b.substr(0,2)+String.fromCharCode($)}}return b}(d,a),a.add(p.idPrefix)),/^\$/.test(d)||(o[`$${d}_mutations`]="++rev",p.markedForSync=!0),p.deleted&&(p.deleted=!1)):(p.deleted=!0,p.markedForSync=!1,o[`$${d}_mutations`]=null)});const c=e.call(this,o,r);for(const[d,f]of Object.entries(r))if(!((i=f.yProps)===null||i===void 0)&&i.length){const p=s[d];p&&(p.yProps=f.yProps.map(y=>y.prop))}return c}}function V1(e,t,n){return typeof navigator<"u"&&navigator.locks?navigator.locks.request(e.name+"|"+t,()=>n()):n()}const Xs=new Un(!0),Uh=new Un(!0);Xs.pipe(Kt(e=>e?gr(!0):gr(!1).pipe(kb(2e4))),_b()).subscribe(Uh);const W1=typeof document<"u"?Jn(document,"visibilitychange"):gr({}),Z2=W1.pipe(_n(()=>document.visibilityState==="hidden")),eO=W1.pipe(_n(()=>document.visibilityState==="visible")),H1=typeof window<"u"?Oc(eO,Jn(window,"mousedown"),Jn(window,"mousemove"),Jn(window,"keydown"),Jn(window,"wheel"),Jn(window,"touchmove")):gr({});typeof document<"u"&&Oc(gr(!0),Z2,H1).pipe(fn(()=>document.visibilityState==="visible"),wh(e=>{Xs.value!==e&&Xs.next(e)}),Kt(e=>e?gr(0).pipe(kb(16e4),wh(()=>Xs.next(!1))):gr(0))).subscribe(()=>{});class tO extends Error{constructor(){super(...arguments),this.name="TokenExpiredError"}}const q1=new WeakMap,Jv=new WeakMap;function G1(e){let t=Jv.get(e);return t||(t=new Ki,Jv.set(e,t)),t}class nO extends _t{constructor(t,n,r,i,o,s,a,c){super(d=>new iO(t,n,r,i,o,c,d,s,a))}}let rO=0;class iO extends Zo{constructor(t,n,r,i,o,s,a,c,d){super(()=>this.teardown()),this.id=++rO,this.subscriptions=new Set,this.reconnecting=!1,this.db=t,this.databaseUrl=t.cloud.options.databaseUrl,this.rev=n,this.yrev=r,this.realmSetHash=i,this.clientIdentity=o,this.user=s,this.subscriber=a,this.lastUserActivity=new Date,this.messageProducer=c,this.webSocketStatus=d,this.connect()}teardown(){this.disconnect()}disconnect(){if(this.webSocketStatus.next("disconnected"),this.pinger&&(clearInterval(this.pinger),this.pinger=null),this.ws)try{this.ws.close()}catch{}this.ws=null;for(const t of this.subscriptions)t.unsubscribe();this.subscriptions.clear()}reconnect(){if(!this.reconnecting){this.reconnecting=!0;try{this.disconnect()}catch{}this.connect().catch(()=>{}).then(()=>this.reconnecting=!1)}}connect(){return he(this,void 0,void 0,function*(){if(this.lastServerActivity=new Date,this.pauseUntil&&this.pauseUntil>new Date)return;if(this.ws)throw new Error("Called connect() when a connection is already open");if(!this.databaseUrl)throw new Error("Cannot connect without a database URL");if(this.closed)return;const t=this.user.accessTokenExpiration;if(t&&t<new Date)return void this.subscriber.error(new tO);this.webSocketStatus.next("connecting"),this.pinger=setInterval(()=>he(this,void 0,void 0,function*(){if(this.closed)this.teardown();else if(this.ws)try{this.ws.send(JSON.stringify({type:"ping"})),setTimeout(()=>{this.pinger&&(this.closed?this.teardown():this.lastServerActivity<new Date(Date.now()-2e4)&&this.reconnect())},2e4)}catch{this.reconnect()}else this.reconnect()}),3e4);const n=new URL(this.databaseUrl);n.protocol=n.protocol==="http:"?"ws":"wss";const r=new URLSearchParams;if(this.subscriber.closed)return;r.set("v","2"),this.rev&&r.set("rev",this.rev),this.yrev&&r.set("yrev",this.yrev),r.set("realmsHash",this.realmSetHash),r.set("clientId",this.clientIdentity),r.set("dxcv",this.db.cloud.version),this.user.accessToken&&r.set("token",this.user.accessToken);const i=this.ws=new WebSocket(`${n}/changes?${r}`);i.binaryType="arraybuffer",i.onclose=o=>{this.pinger&&this.reconnect()},i.onmessage=o=>{if(this.pinger){this.lastServerActivity=new Date;try{const s=typeof o.data=="string"?Il.parse(o.data):function(a){const c=new Xo(a),d=Cn(c);if(d==="outdated-server-rev")return{type:d};if(d==="y-complete-sync-done")return{type:d,yServerRev:Cn(c)};const f=Cn(c),p=Cn(c);switch(d){case"u-ack":case"u-reject":return{type:d,table:f,prop:p,i:Number(fv(c))};default:{const y=ii(c);switch(d){case"in-sync":case"doc-close":return{type:d,table:f,prop:p,k:y};case"aware":return{type:d,table:f,prop:p,k:y,u:Dt(c)};case"doc-open":return{type:d,table:f,prop:p,k:y,serverRev:ii(c),sv:ii(c)};case"sv":return{type:d,table:f,prop:p,k:y,sv:Dt(c)};case"u-c":return{type:d,table:f,prop:p,k:y,u:Dt(c),i:Number(fv(c))};case"u-s":return{type:d,table:f,prop:p,k:y,u:Dt(c),r:c.pos<c.arr.length&&Cn(c)||void 0};default:throw new TypeError(`Unknown message type: ${d}`)}}}}(new Uint8Array(o.data));if(s.type==="error")throw new Error(`Error message from dexie-cloud: ${s.error}`);if(s.type==="aware"){const a=Wt.getDocCache(this.db.dx).find(s.table,s.k,s.prop);if(a){const c=(d=>q1.get(d))(a);c&&r2(c,s.u,"server")}}else if(s.type!=="pong")if(s.type==="doc-open"){const a=Wt.getDocCache(this.db.dx).find(s.table,s.k,s.prop);a&&G1(a).next()}else s.type==="u-ack"||s.type==="u-reject"||s.type==="u-s"||s.type==="in-sync"||s.type==="outdated-server-rev"||s.type==="y-complete-sync-done"?U1([s],this.db).then(a=>he(this,[a],void 0,function*({resyncNeeded:c,yServerRevision:d,receivedUntils:f}){if(d&&(yield this.db.$syncState.update("syncState",{yServerRevision:d})),s.type==="u-s"&&f){const p=Js(this.db,s.table,s.prop);if(p){const y=f[p.name];y&&(yield p.update(oi,{receivedUntil:y}))}}c&&(yield this.db.cloud.sync({purpose:"pull",wait:!0}))})):this.subscriber.next(s)}catch(s){this.subscriber.error(s)}}};try{let o=!1;yield new Promise((s,a)=>{i.onopen=c=>{o=!0,s(null)},i.onerror=c=>{if(o)this.reconnect();else{const d=c.error||new Error("WebSocket Error");this.subscriber.error(d),this.webSocketStatus.next("error"),a(d)}}}),this.subscriptions.add(this.messageProducer.subscribe(s=>{var a,c;this.closed||(s.type==="ready"&&this.webSocketStatus.value!=="connected"&&this.webSocketStatus.next("connected"),s.type==="ready"?(this.rev=s.rev,(a=this.ws)===null||a===void 0||a.send(Il.stringify(s))):(c=this.ws)===null||c===void 0||c.send(function(d){const f=new Qo;switch(En(f,d.type),"table"in d&&En(f,d.table),"prop"in d&&En(f,d.prop),d.type){case"u-ack":case"u-reject":lv(f,BigInt(d.i));break;case"outdated-server-rev":break;case"y-complete-sync-done":En(f,d.yServerRev);break;default:switch(ri(f,d.k),d.type){case"aware":Pt(f,d.u);break;case"doc-open":ri(f,d.serverRev),ri(f,d.sv);break;case"doc-close":break;case"sv":Pt(f,d.sv);break;case"u-c":Pt(f,d.u),lv(f,BigInt(d.i));break;case"u-s":Pt(f,d.u),En(f,d.r||"")}}return pn(f)}(s)))})),this.user.isLoggedIn&&!Ol(this.db)&&this.subscriptions.add(function(s){const a=lm(s.tables.filter(c=>{var d,f;return((f=(d=s.cloud.schema)===null||d===void 0?void 0:d[c.name])===null||f===void 0?void 0:f.markedForSync)&&c.schema.yProps}).map(c=>c.schema.yProps.map(d=>({table:c.name,ydocProp:d.prop,updatesTable:d.updatesTable}))));return Oc(...a.map(({table:c,ydocProp:d,updatesTable:f})=>{const p=s.table(f);return vn(p.get(oi)).pipe(Kt(y=>{let g=(y==null?void 0:y.unsentFrom)||1;return vn(ni(()=>he(this,void 0,void 0,function*(){return(yield M1(p,g)).filter(b=>b.f&&1&b.f).map(b=>({type:"u-c",table:c,prop:d,k:b.k,u:b.u,i:b.i}))}))).pipe(wh(b=>{b.length>0&&(g=b.at(-1).i+1)}))}))})).pipe(Hl(c=>c))}(this.db).subscribe(this.db.messageProducer))}catch{this.pauseUntil=new Date(Date.now()+6e4)}})}}class oO extends Error{constructor(t){super(t==="expired"?"License expired":t==="deactivated"?"User deactivated":"Invalid license"),this.name="InvalidLicenseError",t&&(this.license=t)}}function sO(e){return he(this,void 0,void 0,function*(){var t;yield(t=3e3,new Promise(n=>setTimeout(n,t))),yield Di(H1)})}function Xv(e){return he(this,void 0,void 0,function*(){var t;return!(!(!((t=e.cloud.options)===null||t===void 0)&&t.databaseUrl)||!e.cloud.schema)&&(yield Lc(e,e.cloud.options,e.cloud.schema,{justCheckIfNeeded:!0}))})}const qa=new WeakMap;function Y1(e,t,n,r){const i=qa.get(e);if(i){if(i.pull||(r==null?void 0:r.purpose)==="push")return i.promise;{let s=!1;const a=e.cloud.syncState.subscribe(c=>{c.phase==="pulling"&&(s=!0)});return i.promise.then(()=>{a.unsubscribe()}).catch(c=>(a.unsubscribe(),Promise.reject(c))).then(()=>{if(!s)return Y1(e,t,n,r)})}}const o=function(){return he(this,void 0,void 0,function*(){try{yield A1(e),yield V1(e,$1,()=>Lc(e,t,n,r)),qa.delete(e)}catch(s){throw qa.delete(e),s}})}();return qa.set(e,{promise:o,pull:(r==null?void 0:r.purpose)!=="push"}),o}const lO=1e3;function aO(e,t,n){let r=null,i={cancelled:!1},o=0,s=0;function a(y=1){setTimeout(()=>{const g=c?"pull":"push";s=Date.now(),Y1(e,t,n,{cancelToken:i,retryImmediatelyOnFetchError:!0,purpose:g}).then(()=>{if(i.cancelled)p();else if(c||d)return c=!1,d=!1,a();f=!1,o=0,s=0}).catch(b=>{if(i.cancelled)p(),f=!1,o=0,s=0;else if(y<5){const x=[0,20,40,300,900][y]*lO;o=Date.now()+x,s=0,setTimeout(()=>a(y+1),x)}else f=!1,o=0,s=0})},0)}let c=!1,d=!1,f=!1;const p=()=>{i.cancelled=!0,r&&r.unsubscribe()};return{start:()=>{r=e.localSyncEvent.subscribe(({purpose:y})=>{(g=>{i.cancelled||(g==="pull"&&(c=!0),g==="push"&&(d=!0),f?o||s>0&&Date.now():(f=!0,a()))})(y||"pull")})},stop:p}}function pf(e,t){if(e&&t&&t.unsyncedTables)for(const n of t.unsyncedTables)e[n]&&(e[n].markedForSync=!1)}var Mc,Ne,Q1,Zs,Zv,nc={},J1=[],uO=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function qr(e,t){for(var n in t)e[n]=t[n];return e}function X1(e){var t=e.parentNode;t&&t.removeChild(e)}function vt(e,t,n){var r,i,o,s={};for(o in t)o=="key"?r=t[o]:o=="ref"?i=t[o]:s[o]=t[o];if(arguments.length>2&&(s.children=arguments.length>3?Mc.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)s[o]===void 0&&(s[o]=e.defaultProps[o]);return yu(e,s,r,i,null)}function yu(e,t,n,r,i){var o={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i??++Q1};return i==null&&Ne.vnode!=null&&Ne.vnode(o),o}function Vo(e){return e.children}function el(e,t){this.props=e,this.context=t}function Wo(e,t){if(t==null)return e.__?Wo(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Wo(e):null}function Z1(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Z1(e)}}function eg(e){(!e.__d&&(e.__d=!0)&&Zs.push(e)&&!rc.__r++||Zv!==Ne.debounceRendering)&&((Zv=Ne.debounceRendering)||setTimeout)(rc)}function rc(){for(var e;rc.__r=Zs.length;)e=Zs.sort(function(t,n){return t.__v.__b-n.__v.__b}),Zs=[],e.some(function(t){var n,r,i,o,s,a;t.__d&&(s=(o=(n=t).__v).__e,(a=n.__P)&&(r=[],(i=qr({},o)).__v=o.__v+1,am(a,o,i,n.__n,a.ownerSVGElement!==void 0,o.__h!=null?[s]:null,r,s??Wo(o),o.__h),rk(r,o),o.__e!=s&&Z1(o)))})}function ek(e,t,n,r,i,o,s,a,c,d){var f,p,y,g,b,x,D,E=r&&r.__k||J1,_=E.length;for(n.__k=[],f=0;f<t.length;f++)if((g=n.__k[f]=(g=t[f])==null||typeof g=="boolean"?null:typeof g=="string"||typeof g=="number"||typeof g=="bigint"?yu(null,g,null,null,g):Array.isArray(g)?yu(Vo,{children:g},null,null,null):g.__b>0?yu(g.type,g.props,g.key,null,g.__v):g)!=null){if(g.__=n,g.__b=n.__b+1,(y=E[f])===null||y&&g.key==y.key&&g.type===y.type)E[f]=void 0;else for(p=0;p<_;p++){if((y=E[p])&&g.key==y.key&&g.type===y.type){E[p]=void 0;break}y=null}am(e,g,y=y||nc,i,o,s,a,c,d),b=g.__e,(p=g.ref)&&y.ref!=p&&(D||(D=[]),y.ref&&D.push(y.ref,null,g),D.push(p,g.__c||b,g)),b!=null?(x==null&&(x=b),typeof g.type=="function"&&g.__k===y.__k?g.__d=c=tk(g,c,e):c=nk(e,g,y,E,b,c),typeof n.type=="function"&&(n.__d=c)):c&&y.__e==c&&c.parentNode!=e&&(c=Wo(y))}for(n.__e=x,f=_;f--;)E[f]!=null&&(typeof n.type=="function"&&E[f].__e!=null&&E[f].__e==n.__d&&(n.__d=Wo(r,f+1)),ok(E[f],E[f]));if(D)for(f=0;f<D.length;f++)ik(D[f],D[++f],D[++f])}function tk(e,t,n){for(var r,i=e.__k,o=0;i&&o<i.length;o++)(r=i[o])&&(r.__=e,t=typeof r.type=="function"?tk(r,t,n):nk(n,r,r,i,r.__e,t));return t}function nk(e,t,n,r,i,o){var s,a,c;if(t.__d!==void 0)s=t.__d,t.__d=void 0;else if(n==null||i!=o||i.parentNode==null)e:if(o==null||o.parentNode!==e)e.appendChild(i),s=null;else{for(a=o,c=0;(a=a.nextSibling)&&c<r.length;c+=2)if(a==i)break e;e.insertBefore(i,o),s=o}return s!==void 0?s:i.nextSibling}function tg(e,t,n){t[0]==="-"?e.setProperty(t,n):e[t]=n==null?"":typeof n!="number"||uO.test(t)?n:n+"px"}function Ga(e,t,n,r,i){var o;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||tg(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||tg(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")o=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r||e.addEventListener(t,o?rg:ng,o):e.removeEventListener(t,o?rg:ng,o);else if(t!=="dangerouslySetInnerHTML"){if(i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n!=null&&(n!==!1||t[0]==="a"&&t[1]==="r")?e.setAttribute(t,n):e.removeAttribute(t))}}function ng(e){this.l[e.type+!1](Ne.event?Ne.event(e):e)}function rg(e){this.l[e.type+!0](Ne.event?Ne.event(e):e)}function am(e,t,n,r,i,o,s,a,c){var d,f,p,y,g,b,x,D,E,_,k,$,W,K=t.type;if(t.constructor!==void 0)return null;n.__h!=null&&(c=n.__h,a=t.__e=n.__e,t.__h=null,o=[a]),(d=Ne.__b)&&d(t);try{e:if(typeof K=="function"){if(D=t.props,E=(d=K.contextType)&&r[d.__c],_=d?E?E.props.value:d.__:r,n.__c?x=(f=t.__c=n.__c).__=f.__E:("prototype"in K&&K.prototype.render?t.__c=f=new K(D,_):(t.__c=f=new el(D,_),f.constructor=K,f.render=dO),E&&E.sub(f),f.props=D,f.state||(f.state={}),f.context=_,f.__n=r,p=f.__d=!0,f.__h=[]),f.__s==null&&(f.__s=f.state),K.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=qr({},f.__s)),qr(f.__s,K.getDerivedStateFromProps(D,f.__s))),y=f.props,g=f.state,p)K.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(K.getDerivedStateFromProps==null&&D!==y&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps(D,_),!f.__e&&f.shouldComponentUpdate!=null&&f.shouldComponentUpdate(D,f.__s,_)===!1||t.__v===n.__v){f.props=D,f.state=f.__s,t.__v!==n.__v&&(f.__d=!1),f.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(q){q&&(q.__=t)}),f.__h.length&&s.push(f);break e}f.componentWillUpdate!=null&&f.componentWillUpdate(D,f.__s,_),f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(y,g,b)})}if(f.context=_,f.props=D,f.__v=t,f.__P=e,k=Ne.__r,$=0,"prototype"in K&&K.prototype.render)f.state=f.__s,f.__d=!1,k&&k(t),d=f.render(f.props,f.state,f.context);else do f.__d=!1,k&&k(t),d=f.render(f.props,f.state,f.context),f.state=f.__s;while(f.__d&&++$<25);f.state=f.__s,f.getChildContext!=null&&(r=qr(qr({},r),f.getChildContext())),p||f.getSnapshotBeforeUpdate==null||(b=f.getSnapshotBeforeUpdate(y,g)),W=d!=null&&d.type===Vo&&d.key==null?d.props.children:d,ek(e,Array.isArray(W)?W:[W],t,n,r,i,o,s,a,c),f.base=t.__e,t.__h=null,f.__h.length&&s.push(f),x&&(f.__E=f.__=null),f.__e=!1}else o==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=cO(n.__e,t,n,r,i,o,s,c);(d=Ne.diffed)&&d(t)}catch(q){t.__v=null,(c||o!=null)&&(t.__e=a,t.__h=!!c,o[o.indexOf(a)]=null),Ne.__e(q,t,n)}}function rk(e,t){Ne.__c&&Ne.__c(t,e),e.some(function(n){try{e=n.__h,n.__h=[],e.some(function(r){r.call(n)})}catch(r){Ne.__e(r,n.__v)}})}function cO(e,t,n,r,i,o,s,a){var c,d,f,p=n.props,y=t.props,g=t.type,b=0;if(g==="svg"&&(i=!0),o!=null){for(;b<o.length;b++)if((c=o[b])&&"setAttribute"in c==!!g&&(g?c.localName===g:c.nodeType===3)){e=c,o[b]=null;break}}if(e==null){if(g===null)return document.createTextNode(y);e=i?document.createElementNS("http://www.w3.org/2000/svg",g):document.createElement(g,y.is&&y),o=null,a=!1}if(g===null)p===y||a&&e.data===y||(e.data=y);else{if(o=o&&Mc.call(e.childNodes),d=(p=n.props||nc).dangerouslySetInnerHTML,f=y.dangerouslySetInnerHTML,!a){if(o!=null)for(p={},b=0;b<e.attributes.length;b++)p[e.attributes[b].name]=e.attributes[b].value;(f||d)&&(f&&(d&&f.__html==d.__html||f.__html===e.innerHTML)||(e.innerHTML=f&&f.__html||""))}if(function(x,D,E,_,k){var $;for($ in E)$==="children"||$==="key"||$ in D||Ga(x,$,null,E[$],_);for($ in D)k&&typeof D[$]!="function"||$==="children"||$==="key"||$==="value"||$==="checked"||E[$]===D[$]||Ga(x,$,D[$],E[$],_)}(e,y,p,i,a),f)t.__k=[];else if(b=t.props.children,ek(e,Array.isArray(b)?b:[b],t,n,r,i&&g!=="foreignObject",o,s,o?o[0]:n.__k&&Wo(n,0),a),o!=null)for(b=o.length;b--;)o[b]!=null&&X1(o[b]);a||("value"in y&&(b=y.value)!==void 0&&(b!==e.value||g==="progress"&&!b||g==="option"&&b!==p.value)&&Ga(e,"value",b,p.value,!1),"checked"in y&&(b=y.checked)!==void 0&&b!==e.checked&&Ga(e,"checked",b,p.checked,!1))}return e}function ik(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){Ne.__e(r,n)}}function ok(e,t,n){var r,i;if(Ne.unmount&&Ne.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||ik(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){Ne.__e(o,t)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&ok(r[i],t,typeof e.type!="function");n||e.__e==null||X1(e.__e),e.__e=e.__d=void 0}function dO(e,t,n){return this.constructor(e,n)}function ig(e,t,n){var r,i,o;Ne.__&&Ne.__(e,t),i=(r=typeof n=="function")?null:n&&n.__k||t.__k,o=[],am(t,e=(!r&&n||t).__k=vt(Vo,null,[e]),i||nc,nc,t.ownerSVGElement!==void 0,!r&&n?[n]:i?null:t.firstChild?Mc.call(t.childNodes):null,o,!r&&n?n:i?i.__e:t.firstChild,r),rk(o,e)}Mc=J1.slice,Ne={__e:function(e,t,n,r){for(var i,o,s;t=t.__;)if((i=t.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(e)),s=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,r||{}),s=i.__d),s)return i.__E=i}catch(a){e=a}throw e}},Q1=0,el.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=qr({},this.state),typeof e=="function"&&(e=e(qr({},n),this.props)),e&&qr(n,e),e!=null&&this.__v&&(t&&this.__h.push(t),eg(this))},el.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),eg(this))},el.prototype.render=Vo,Zs=[],rc.__r=0;const Yn={Error:{color:"red"},Alert:{error:{color:"red",fontWeight:"bold"},warning:{color:"#f80",fontWeight:"bold"},info:{color:"black"}},Darken:{position:"fixed",top:0,left:0,opacity:.5,backgroundColor:"#000",width:"100vw",height:"100vh",zIndex:150,webkitBackdropFilter:"blur(2px)",backdropFilter:"blur(2px)"},DialogOuter:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:150,alignItems:"center",display:"flex",justifyContent:"center"},DialogInner:{position:"relative",color:"#222",backgroundColor:"#fff",padding:"30px",marginBottom:"2em",maxWidth:"90%",maxHeight:"90%",overflowY:"auto",border:"3px solid #3d3d5d",borderRadius:"8px",boxShadow:"0 0 80px 10px #666",width:"auto",fontFamily:"sans-serif"},Input:{height:"35px",width:"17em",borderColor:"#ccf4",outline:"none",fontSize:"17pt",padding:"8px"}};function fO({children:e,className:t}){return vt("div",{className:t},vt("div",{style:Yn.Darken}),vt("div",{style:Yn.DialogOuter},vt("div",{style:Yn.DialogInner},e)))}var Uc,wt,mf,og,ic=0,sk=[],vu=[],sg=Ne.__b,lg=Ne.__r,ag=Ne.diffed,ug=Ne.__c,cg=Ne.unmount;function um(e,t){Ne.__h&&Ne.__h(wt,e,ic||t),ic=0;var n=wt.__H||(wt.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:vu}),n.__[e]}function hO(e){return ic=1,function(t,n,r){var i=um(Uc++,2);if(i.t=t,!i.__c&&(i.__=[r?r(n):fg(void 0,n),function(s){var a=i.__N?i.__N[0]:i.__[0],c=i.t(a,s);a!==c&&(i.__N=[c,i.__[1]],i.__c.setState({}))}],i.__c=wt,!wt.u)){wt.u=!0;var o=wt.shouldComponentUpdate;wt.shouldComponentUpdate=function(s,a,c){if(!i.__c.__H)return!0;var d=i.__c.__H.__.filter(function(p){return p.__c});if(d.every(function(p){return!p.__N}))return!o||o.call(this,s,a,c);var f=!1;return d.forEach(function(p){if(p.__N){var y=p.__[0];p.__=p.__N,p.__N=void 0,y!==p.__[0]&&(f=!0)}}),!!f&&(!o||o.call(this,s,a,c))}}return i.__N||i.__}(fg,e)}function pO(e){return ic=5,function(t,n){var r=um(Uc++,7);return lk(r.__H,n)?(r.__V=t(),r.i=n,r.__h=t,r.__V):r.__}(function(){return{current:e}},[])}function mO(){for(var e;e=sk.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(gu),e.__H.__h.forEach($h),e.__H.__h=[]}catch(t){e.__H.__h=[],Ne.__e(t,e.__v)}}Ne.__b=function(e){wt=null,sg&&sg(e)},Ne.__r=function(e){lg&&lg(e),Uc=0;var t=(wt=e.__c).__H;t&&(mf===wt?(t.__h=[],wt.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=vu,n.__N=n.i=void 0})):(t.__h.forEach(gu),t.__h.forEach($h),t.__h=[])),mf=wt},Ne.diffed=function(e){ag&&ag(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(sk.push(t)!==1&&og===Ne.requestAnimationFrame||((og=Ne.requestAnimationFrame)||function(n){var r,i=function(){clearTimeout(o),dg&&cancelAnimationFrame(r),setTimeout(n)},o=setTimeout(i,100);dg&&(r=requestAnimationFrame(i))})(mO)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==vu&&(n.__=n.__V),n.i=void 0,n.__V=vu})),mf=wt=null},Ne.__c=function(e,t){t.some(function(n){try{n.__h.forEach(gu),n.__h=n.__h.filter(function(r){return!r.__||$h(r)})}catch(r){t.some(function(i){i.__h&&(i.__h=[])}),t=[],Ne.__e(r,n.__v)}}),ug&&ug(e,t)},Ne.unmount=function(e){cg&&cg(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{gu(r)}catch(i){t=i}}),t&&Ne.__e(t,n.__v))};var dg=typeof requestAnimationFrame=="function";function gu(e){var t=wt,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),wt=t}function $h(e){var t=wt;e.__c=e.__(),wt=t}function lk(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function fg(e,t){return typeof t=="function"?t(e):t}function yO({message:e,messageCode:t,messageParams:n}){return e.replace(/\{\w+\}/gi,r=>n[r.substring(1,r.length-1)])}function vO({title:e,type:t,alerts:n,fields:r,submitLabel:i,cancelLabel:o,onCancel:s,onSubmit:a}){const[c,d]=hO({}),f=pO(null);return function(p,y){var g=um(Uc++,4);!Ne.__s&&lk(g.__H,y)&&(g.__=p,g.i=y,wt.__h.push(g))}(()=>{var p;return(p=f.current)===null||p===void 0?void 0:p.focus()},[]),vt(fO,{className:"dxc-login-dlg"},vt(Vo,null,vt("h3",{style:Yn.WindowHeader},e),n.map(p=>vt("p",{style:Yn.Alert[p.type]},yO(p))),vt("form",{onSubmit:p=>{p.preventDefault(),a(c)}},Object.entries(r).map(([p,{type:y,label:g,placeholder:b}],x)=>vt("label",{style:Yn.Label,key:x},g?`${g}: `:"",vt("input",{ref:x===0?f:void 0,type:y,name:p,autoComplete:"on",style:Yn.Input,autoFocus:!0,placeholder:b,value:c[p]||"",onInput:D=>{var E;const _=function($,W){switch($){case"email":return W.toLowerCase();case"otp":return W.toUpperCase();default:return W}}(y,(E=D.target)===null||E===void 0?void 0:E.value);let k=Object.assign(Object.assign({},c),{[p]:_});d(k),y==="otp"&&(_==null?void 0:_.trim().length)===8&&a(k)}}))))),vt("div",{style:Yn.ButtonsDiv},vt(Vo,null,vt("button",{type:"submit",style:Yn.Button,onClick:()=>a(c)},i),o&&vt("button",{style:Yn.Button,onClick:s},o))))}class hg extends el{constructor(t){super(t),this.observer=n=>this.setState({userInteraction:n}),this.state={userInteraction:void 0}}componentDidMount(){this.subscription=vn(this.props.db.cloud.userInteraction).subscribe(this.observer)}componentWillUnmount(){this.subscription&&(this.subscription.unsubscribe(),delete this.subscription)}render(t,{userInteraction:n}){return n?vt(vO,Object.assign({},n)):null}}function Ql(e){const t=new WeakMap;return n=>{let r=t.get(n);return r||(r=e(n),t.set(n,r)),r}}const oc=Ql(e=>new Un(tn));function $c(e,t){let n=t,r=vn(e).pipe(fn(o=>n=o),lC({resetOnRefCountZero:()=>wb(1e3)}));const i=new _t(o=>{let s=!1;const a=r.subscribe({next(c){s=!0,o.next(c)},error(c){o.error(c)},complete(){o.complete()}});return s||a.closed||o.next(n),a});return i.getValue=()=>n,i}const ak=Ql(e=>$c(ni(()=>e.roles.where({realmId:"rlm-public"}).toArray().then(t=>{const n={};for(const r of t.slice().sort((i,o)=>(i.sortOrder||0)-(o.sortOrder||0)))n[r.name]=r;return n})),{})),uk=Ql(e=>$c(oc(e._novip).pipe(Kt(t=>ni(()=>e.transaction("r","realms","members",()=>Promise.all([e.members.where({userId:t.userId}).toArray(),e.realms.toArray(),t.userId]).then(([n,r,i])=>({selfMembers:n,realms:r,userId:i})))))),{selfMembers:[],realms:[],get userId(){return e.cloud.currentUserId}}));function gO(...e){return e.length===0?{}:e.reduce((n,r)=>{const i=Object.assign({},n);for(const[o,s]of Object.entries(r))if(o in i&&i[o]){if(i[o]==="*")continue;if(s==="*")i[o]="*";else if(Array.isArray(s)&&Array.isArray(i[o])){const a=i,c=a[o];a[o]=[...new Set([...c,...s])]}else if(typeof s=="object"&&s&&typeof i[o]=="object"){const a=i[o];for(const[c,d]of Object.entries(s))a[c]!=="*"&&(d==="*"?a[c]="*":Array.isArray(a[c])&&Array.isArray(d)&&(a[c]=[...new Set([...a[c],...d])]))}}else i[o]=r[o];return i})}const ck=Ql(e=>function(t,n){let r;const i=t.pipe(fn(o=>r=n(o)));return i.getValue=()=>r!==void 0?r:r=n(t.getValue()),i}($c(kl([uk(e._novip),ak(e._novip)]).pipe(fn(([{selfMembers:t,realms:n,userId:r},i])=>({selfMembers:t,realms:n,userId:r,globalRoles:i}))),{selfMembers:[],realms:[],userId:tn.userId,globalRoles:{}}),({selfMembers:t,realms:n,userId:r,globalRoles:i})=>n.map(s=>{const a=t.filter(f=>f.realmId===s.realmId),c=a.map(f=>f.permissions).filter(f=>f),d=lm(a.map(f=>f.roles).filter(f=>f)).map(f=>i[f]).filter(f=>f).map(f=>f.permissions);return Object.assign(Object.assign({},s),{permissions:s.owner===r?{manage:"*"}:gO(...c,...d)})}).reduce((s,a)=>Object.assign(Object.assign({},s),{[a.realmId]:a}),{[r]:{realmId:r,owner:r,name:r,permissions:{manage:"*"}}})));class pg{constructor(t,n,r){this.permissions=t||{},this.tableName=n,this.isOwner=r}add(...t){var n;return this.permissions.manage==="*"||!!(!((n=this.permissions.manage)===null||n===void 0)&&n.includes(this.tableName))||this.permissions.add==="*"||!!t.every(r=>{var i;return(i=this.permissions.add)===null||i===void 0?void 0:i.includes(r)})}update(...t){var n,r;if(this.isOwner||this.permissions.manage==="*"||!((n=this.permissions.manage)===null||n===void 0)&&n.includes(this.tableName))return!0;if(this.permissions.update==="*")return t.every(o=>o!=="owner");const i=(r=this.permissions.update)===null||r===void 0?void 0:r[this.tableName];return i==="*"?t.every(o=>o!=="owner"):t.every(o=>i==null?void 0:i.some(s=>s===o||s==="*"&&o!=="owner"))}delete(){var t;return!(!this.isOwner&&this.permissions.manage!=="*")||!!(!((t=this.permissions.manage)===null||t===void 0)&&t.includes(this.tableName))}}const wO=Ql(e=>{const t=oc(e._novip).pipe(Kt(i=>ni(()=>e.members.where({email:i.email||""}).toArray()))),n=ck(e._novip),r=uk(e._novip);return $c(kl([t,r,n]).pipe(fn(([i,o,s])=>{const a=(f,p)=>Object.assign(Object.assign({},f),{[p.id]:Object.assign(Object.assign({},p),{realm:s[p.realmId]})}),c=i.reduce(a,{}),d=o.selfMembers.reduce(a,c);return Object.values(d).filter(f=>!f.accepted).map(f=>Object.assign(Object.assign({},f),{accept(){return he(this,void 0,void 0,function*(){yield e.members.update(f.id,{accepted:new Date})})},reject(){return he(this,void 0,void 0,function*(){yield e.members.update(f.id,{rejected:new Date})})}}))})),[])});function bO(e){return t=>{var n;const r=t.doc;if(!r)throw new Error("Internal error: DexieYProvider.createYHandler called without a doc. This is unexpected.");const{parentTable:i}=r.meta||{};if(!(!((n=e.cloud.schema)===null||n===void 0)&&n[i].markedForSync))return;let o;Object.defineProperty(t,"awareness",{get:()=>o||(o=function(s,a,c){const{parentTable:d,parentId:f,parentProp:p,updatesTable:y}=a.meta,g=new t2(a),b=G1(a);return g.on("update",({added:x,updated:D,removed:E},_)=>{const k=x.concat(D).concat(E),$=s.cloud.currentUser.value;if(_!=="server"&&$.isLoggedIn&&!Ol(s)){const W=n2(g,k);s.messageProducer.next({type:"aware",table:d,prop:p,k:a.meta.parentId,u:W}),c.destroyed&&s.messageProducer.next({type:"doc-close",table:d,prop:p,k:a.meta.parentId})}}),g.on("destroy",()=>{w1(g,[a.clientID],"provider destroyed")}),he(this,void 0,void 0,function*(){if(c.destroyed)return;let x=!1,D=1;const E=kl([s.cloud.webSocketStatus,b.pipe(xb(null))]).subscribe(([k])=>{if(c.destroyed)return;x=k==="connected";const $=s.cloud.currentUser.value;k==="connected"&&$.isLoggedIn&&!Ol(s)&&(++D,_().catch(W=>{}))});function _(){return he(this,void 0,void 0,function*(){const k=D,$=s.table(y),W=s.$syncState,[K,q]=yield s.transaction("r",W,$,()=>he(this,void 0,void 0,function*(){const fe=yield $.get(oi),Y=yield W.get("syncState");return[(fe==null?void 0:fe.receivedUntil)||0,(Y==null?void 0:Y.yServerRevision)||(Y==null?void 0:Y.serverRevision)]}));if(c.destroyed||D!==k||!x)return;const H={type:"doc-open",table:d,prop:p,k:f,serverRev:q},le=yield $.where("i").between(K,1/0,!1).filter(fe=>Sc(fe.k,f)===0&&(1&(fe.f||0))==0).toArray();if(!c.destroyed&&D===k&&x){if(le.length>0){const fe=Gu(le.map(ge=>ge.u)),Y=Yb(fe);H.sv=Y}s.messageProducer.next(H)}})}c.addCleanupHandler(E)}),g}(e,r,t),q1.set(r,o),o)})}}function Ms(e){return"rlm~"+e}const kO={nameSuffix:!0};function zh(e){const t=e.name,n=oc(e),r=[];let i=!1,o=null;e.on("ready",f=>he(this,void 0,void 0,function*(){try{yield function(p){return he(this,void 0,void 0,function*(){var y,g,b,x,D,E,_;s=!1;const k=lr(p);typeof window<"u"&&typeof document<"u"&&(!((y=k.cloud.options)===null||y===void 0)&&y.customLoginGui||r.push(function(Y){let ge=!1;const ke=document.createElement("div");return document.body?(document.body.appendChild(ke),ig(vt(hg,{db:Y.vip}),ke)):addEventListener("DOMContentLoaded",()=>{ge||(document.body.appendChild(ke),ig(vt(hg,{db:Y.vip}),ke))}),{unsubscribe(){try{ke.remove()}catch{}ge=!0},get closed(){return ge}}}(p))),k.cloud.isServiceWorkerDB||r.push(function(Y){let ge=Y.cloud.webSocketStatus.value;const ke=Y.cloud.webSocketStatus.pipe(Kt(Se=>{const Ee=ge;ge=Se;const Q=gr(Se);switch(Se){case"disconnected":return Xs.value?Q.pipe(kv(500)):Q;case"connecting":return Ee==="not-started"||Ee==="error"?Q:Q.pipe(kv(4e3));default:return Q}}));return kl([ke,Y.syncStateChangedEvent.pipe(xb({phase:"initial"})),oc(Y.dx._novip),Uh]).pipe(fn(([Se,Ee,Q,ae])=>{var M;if(!((M=Q.license)===null||M===void 0)&&M.status&&Q.license.status!=="ok")return{phase:"offline",status:"offline",license:Q.license.status};let{phase:ee,error:ne,progress:de}=Ee,ie=Se;return ee==="error"&&(ie="error"),Se==="not-started"&&(ee!=="pushing"&&ee!=="pulling"||(ie="connecting")),Y.cloud.syncState.value.phase!=="error"||Ee.phase!=="pushing"&&Ee.phase!=="pulling"||(ie="connecting"),ae||(ie="disconnected"),{phase:ee,error:ne,progress:de,status:To?ie:"offline",license:"ok"}}))}(k).subscribe(p.cloud.syncState)),r.push(k.syncCompleteEvent.subscribe(c)),k.tables.every(Y=>Y.core)||function(){throw new Ae.SchemaError("Version increment needed to allow dexie-cloud change tracking")}();const $="serviceWorker"in navigator?yield navigator.serviceWorker.getRegistrations():[],[W,K]=yield k.transaction("rw",k.$syncState,()=>he(this,void 0,void 0,function*(){var Y,ge;const{options:ke,schema:Se}=k.cloud,[Ee,Q,ae]=yield Promise.all([k.getOptions(),k.getSchema(),k.getPersistedSyncState()]);if(i){if(!Ee||JSON.stringify(Ee)!==JSON.stringify(ke)){if(!ke)throw new Error("Internal error");const M=Object.assign({},ke);delete M.fetchTokens,delete M.awarenessProtocol,yield k.$syncState.put(M,"options")}}else k.cloud.options=Ee||null;if(!((Y=k.cloud.options)===null||Y===void 0)&&Y.tryUseServiceWorker&&"serviceWorker"in navigator&&$.length>0&&!V2?k.cloud.usingServiceWorker=!0:(!((ge=k.cloud.options)===null||ge===void 0)&&ge.tryUseServiceWorker&&k.cloud.isServiceWorkerDB,k.cloud.usingServiceWorker=!1),pf(Se,k.cloud.options),pf(Q,k.cloud.options),Se){if(!Q||JSON.stringify(Q)!==JSON.stringify(Se)){const M=Q||{};for(const[ee,ne]of Object.entries(Se)){const de=M[ee];de?(de.markedForSync=ne.markedForSync,ne.deleted=de.deleted,de.generatedGlobalId=ne.generatedGlobalId):M[ee]=Object.assign({},ne)}yield k.$syncState.put(M,"schema"),Object.assign(Se,M)}}else k.cloud.schema=Q||null;return[ae==null?void 0:ae.initiallySynced,ae==null?void 0:ae.realms]}));if(W&&k.setInitiallySynced(!0),function(Y){var ge,ke;for(const Se of Y.tables)if(!((ke=(ge=Y.cloud.schema)===null||ge===void 0?void 0:ge[Se.name])===null||ke===void 0)&&ke.markedForSync){if(Se.schema.primKey.auto)throw new Ae.SchemaError(`Table ${Se.name} is both autoIncremented and synced. Use db.cloud.configure({unsyncedTables: [${JSON.stringify(Se.name)}]}) to blacklist it from sync`);if(!Se.schema.primKey.keyPath)throw new Ae.SchemaError(`Table ${Se.name} cannot be both synced and outbound. Use db.cloud.configure({unsyncedTables: [${JSON.stringify(Se.name)}]}) to blacklist it from sync`)}}(k),a(),!k.cloud.isServiceWorkerDB){r.push(ni(()=>k.getCurrentUser()).subscribe(n)),r.push(ni(()=>k.getPersistedSyncState()).subscribe(k.cloud.persistedSyncState)),yield Di(kl([n.pipe(_v(1),ji(1)),k.cloud.persistedSyncState.pipe(_v(1),ji(1))]));const Y=bO(k);Wt.on.new.subscribe(Y),k.dx.once("close",()=>{Wt.on.new.unsubscribe(Y)})}let q=!1;const H=yield k.getCurrentUser(),le=(g=k.cloud.options)===null||g===void 0?void 0:g.requireAuth;le&&(k.cloud.isServiceWorkerDB?yield Di(n.pipe(_n(Y=>!!Y.isLoggedIn),ji(1))):typeof le=="object"?(!H.isLoggedIn||le.userId&&H.userId!==le.userId||le.email&&H.email!==le.email)&&(q=yield cf(k,le)):H.isLoggedIn||(q=yield cf(k))),!H.isLoggedIn||K&&K.includes(H.userId)||(q=!0),o&&o.stop(),o=null,a();const fe=((b=k.cloud.options)===null||b===void 0?void 0:b.databaseUrl)&&(!W||q);fe&&(yield function(Y,ge,ke){return he(this,void 0,void 0,function*(){yield V1(Y,$1,()=>Lc(Y,ge,ke,{isInitialSync:!0}))})}(k,k.cloud.options,k.cloud.schema),k.setInitiallySynced(!0)),a(),k.cloud.usingServiceWorker&&(!((x=k.cloud.options)===null||x===void 0)&&x.databaseUrl)?(fe||_1(k,"push").catch(()=>{}),function(Y){return he(this,void 0,void 0,function*(){var ge;try{const{periodicSync:ke}=yield navigator.serviceWorker.ready;if(ke)try{yield ke.register(`dexie-cloud:${Y.name}`,(ge=Y.cloud.options)===null||ge===void 0?void 0:ge.periodicSync)}catch{}}catch{}})}(k).catch(()=>{})):!((D=k.cloud.options)===null||D===void 0)&&D.databaseUrl&&k.cloud.schema&&!k.cloud.isServiceWorkerDB&&(o=aO(k,k.cloud.options,k.cloud.schema),o.start(),fe||pr(k,"push")),a(),k.cloud.isServiceWorkerDB||r.push(Jn(self,"online").subscribe(()=>{k.syncStateChangedEvent.next({phase:"not-in-sync"}),Ol(k)||pr(k,"push")}),Jn(self,"offline").subscribe(()=>{k.syncStateChangedEvent.next({phase:"offline"})})),!(!((E=k.cloud.options)===null||E===void 0)&&E.databaseUrl)||!((_=k.cloud.options)===null||_===void 0)&&_.disableWebSocket||W2||r.push(function(Y){var ge;if(!(!((ge=Y.cloud.options)===null||ge===void 0)&&ge.databaseUrl))throw new Error("No database URL to connect WebSocket to");const ke=Y.messageConsumer.readyToServe.pipe(_n(Ee=>Ee),Kt(()=>Y.getPersistedSyncState()),_n(Ee=>Ee&&Ee.serverRevision),Kt(Ee=>he(this,void 0,void 0,function*(){return{type:"ready",rev:Ee.serverRevision,realmSetHash:yield Dh(Ee)}}))),Se=Oc(ke,Y.messageProducer);return function Ee(){return Y.cloud.persistedSyncState.pipe(_n(Q=>Q==null?void 0:Q.serverRevision),ji(1),Kt(Q=>Y.cloud.currentUser.pipe(fn(ae=>[ae,Q]))),Kt(([Q,ae])=>Uh.pipe(fn(M=>[M?Q:null,ae]))),Kt(([Q,ae])=>Q!=null&&Q.isLoggedIn&&!(ae!=null&&ae.realms.includes(Q.userId))?Y.cloud.persistedSyncState.pipe(_n(M=>(M==null?void 0:M.realms.includes(Q.userId))||!1),ji(1),fn(M=>[Q,M])):new Un([Q,ae])),Kt(Q=>he(this,[Q],void 0,function*([ae,M]){return[ae,yield Dh(M)]})),_b(([Q,ae],[M,ee])=>Q===M&&ae===ee),Kt(([Q,ae])=>{var M;return!((M=Y.cloud.persistedSyncState)===null||M===void 0)&&M.value?Q?new nO(Y,Y.cloud.persistedSyncState.value.serverRevision,Y.cloud.persistedSyncState.value.yServerRevision,ae,Y.cloud.persistedSyncState.value.clientIdentity,Se,Y.cloud.webSocketStatus,Q):vn([]):Ee()}),gh(Q=>(Q==null?void 0:Q.name)==="TokenExpiredError"?gr(!0).pipe(Kt(()=>he(this,void 0,void 0,function*(){const ae=yield Y.getCurrentUser(),M=yield Rc(Y.cloud.options.databaseUrl,ae);yield Y.table("$logins").update(ae.userId,{accessToken:M.accessToken,accessTokenExpiration:M.accessTokenExpiration,claims:M.claims,license:M.license,data:M.data})})),Kt(()=>Ee())):gv(()=>Q)),gh(Q=>(Y.cloud.webSocketStatus.next("error"),Q instanceof oO?gv(()=>Q):vn(sO()).pipe(Kt(()=>Ee())))))}().subscribe({next:Ee=>{Ee&&Y.messageConsumer.enqueue(Ee)},error:Ee=>{},complete:()=>{}})}(k))})}(f)}catch{}}),!0);let s=!1;function a(){if(s)throw new Ae.DatabaseClosedError}e.once("close",()=>{r.forEach(f=>f.unsubscribe()),r.splice(0,r.length),s=!0,o&&o.stop(),o=null,n.next(tn)});const c=new Ki;var d;e.cloud={version:"4.2.0",options:Object.assign({},kO),schema:null,get currentUserId(){return n.value.userId||tn.userId},currentUser:n,syncState:new Un({phase:"initial",status:"not-started"}),events:{syncComplete:c},persistedSyncState:new Un(void 0),userInteraction:new Un(void 0),webSocketStatus:new Un("not-started"),login(f){return he(this,void 0,void 0,function*(){const p=lr(e);yield p.cloud.sync(),yield cf(p,f)})},invites:wO(e),roles:ak(e),configure(f){f=e.cloud.options=Object.assign(Object.assign({},e.cloud.options),f),i=!0,f.databaseUrl&&f.nameSuffix&&(e.name=`${t}-${function(p){const y=new URL(p);return y.pathname==="/"?y.hostname.split(".")[0]:y.pathname.split("/")[1]}(f.databaseUrl)}`,lr(e).reconfigure()),pf(e.cloud.schema,e.cloud.options)},logout(){return he(this,arguments,void 0,function*({force:f}={}){f?yield Th(lr(e),{deleteUnsyncedData:!0}):yield S1(lr(e))})},sync(){return he(this,arguments,void 0,function*({wait:f,purpose:p}={wait:!0,purpose:"push"}){var y;f===void 0&&(f=!0);const g=lr(e);if((((y=g.cloud.currentUser.value.license)===null||y===void 0?void 0:y.status)||"ok")!=="ok"&&(yield Ac(g)),p==="pull"){const b=g.cloud.persistedSyncState.value;if(pr(g,p),f){const x=yield Di(g.cloud.persistedSyncState.pipe(_n(D=>(D==null?void 0:D.timestamp)!=null&&(!b||D.timestamp>b.timestamp))));if(x!=null&&x.error)throw new Error("Sync error: "+x.error)}}else if(yield Xv(g)){const b=g.cloud.persistedSyncState.value;pr(g,p),f&&(yield Di(vn(ni(()=>he(this,void 0,void 0,function*(){const x=yield Xv(g),D=yield g.getPersistedSyncState();if((D==null?void 0:D.timestamp)!==(b==null?void 0:b.timestamp)&&(D!=null&&D.error))throw new Error("Sync error: "+D.error);return x}))).pipe(_n(x=>!x))))}})},permissions:(f,p)=>function(y,g,b){if(!g)throw new TypeError("Cannot check permissions of undefined or null. A Dexie Cloud object with realmId and owner expected.");const{owner:x,realmId:D}=g;if(!b){if(typeof g.table!="function")throw new TypeError("Missing 'table' argument to permissions and table could not be extracted from entity");b=g.table()}const E=ck(y),_=$=>{const W=$[D||y.cloud.currentUserId];return W?new pg(W.permissions,b,D===void 0||D===y.cloud.currentUserId||x===y.cloud.currentUserId):new pg({},b,!x||x===y.cloud.currentUserId)},k=E.pipe(fn(_));return k.getValue=()=>_(E.getValue()),k}(e._novip,f,p)},e.Version.prototype._parseStoresSpec=Ae.override(e.Version.prototype._parseStoresSpec,f=>X2(f,e)),e.Table.prototype.newId=function({colocateWith:f}={}){const p=f&&f.substr(f.length-3);return K1(e.cloud.schema[this.name].idPrefix||"",p)},e.Table.prototype.idPrefix=function(){var f,p;return((p=(f=this.db.cloud.schema)===null||f===void 0?void 0:f[this.name])===null||p===void 0?void 0:p.idPrefix)||""},e.use(J2({currentUserObservable:e.cloud.currentUser,db:lr(e)})),e.use((d=lr(e),{stack:"dbcore",name:"implicitPropSetterMiddleware",level:1,create:f=>Object.assign(Object.assign({},f),{table:p=>{const y=f.table(p);return Object.assign(Object.assign({},y),{mutate:g=>{var b,x,D,E,_,k;const $=g.trans;if($.disableChangeTracking)return y.mutate(g);const W=(x=(b=$.currentUser)===null||b===void 0?void 0:b.userId)!==null&&x!==void 0?x:tn.userId;if(!((E=(D=d.cloud.schema)===null||D===void 0?void 0:D[p])===null||E===void 0)&&E.markedForSync&&(g.type==="add"||g.type==="put")){if(p==="members")for(const K of g.values)typeof K.email=="string"&&(K.email=K.email.trim().toLowerCase());for(const K of g.values){K.owner||(K.owner=W),K.realmId||(K.realmId=W);const q=(k=(_=y.schema.primaryKey).extractKey)===null||k===void 0?void 0:k.call(_,K);typeof q=="string"&&q[0]==="#"&&g.type==="put"&&(delete g.criteria,delete g.changeSpec,delete g.updates,K.$ts=Date.now())}}return y.mutate(g)}})}})})),e.use(G2(lr(e)))}zh.version="4.2.0",Ae.Cloud=zh;class _O extends jS{constructor(){super(...arguments);Mr(this,"id");Mr(this,"realmId");Mr(this,"owner");Mr(this,"title")}isSharable(){return this.realmId===Ms(this.id)}isPrivate(){return this.id[0]==="#"}async makeSharable(){if(this.isPrivate())throw new Error("Private lists cannot be made sharable");const n=this.realmId,r=Ms(this.id),{db:i}=this;return await this.db.transaction("rw",[i.todoLists,i.todoItems,i.realms],async()=>{await i.realms.put({realmId:r,name:this.title,represents:"a to-do list"}),await i.todoLists.update(this.id,{realmId:r}),await i.todoItems.where({realmId:n,todoListId:this.id}).modify({realmId:r})}),r}async unshareWithEveryone(){const{db:n}=this,r=Ms(this.id);await n.transaction("rw",[n.todoLists,n.todoItems,n.members,n.realms],async()=>{await n.todoItems.where({realmId:r,todoListId:this.id}).modify({realmId:n.cloud.currentUserId}),await n.todoLists.update(this.id,{realmId:this.db.cloud.currentUserId}),await n.members.where("realmId").equals(r).delete(),await n.realms.delete(r)})}async shareWith(n,r,i,o){const{db:s}=this;await s.transaction("rw",[s.members,s.todoLists,s.todoItems,s.realms],async()=>{let a=this.realmId;this.isSharable()||(a=await this.makeSharable()),await this.db.members.add({realmId:a,name:n,email:r,invite:i,roles:o})})}async unshareWith(n){const{db:r}=this;await r.transaction("rw",[r.todoLists,r.todoItems,r.members,r.realms],async()=>{await r.members.delete(n.id),await r.members.where({realmId:this.realmId}).filter(o=>o.userId!==r.cloud.currentUserId).count()===0&&await this.unshareWithEveryone()})}async leave(){const{db:n}=this;await n.members.where({realmId:this.realmId,userId:n.cloud.currentUserId}).delete()}async delete(){const{db:n}=this;await n.transaction("rw",[n.todoLists,n.todoItems,n.members,n.realms],()=>{n.todoItems.where({todoListId:this.id}).delete(),n.todoLists.delete(this.id);const r=Ms(this.id);n.realms.delete(r)})}}class xO extends Ae{constructor(){super("TodoDBCloud2",{addons:[zh],cache:"immutable"});Mr(this,"todoLists");Mr(this,"todoItems");Mr(this,"openCloseStates");this.version(14).stores({todoLists:"@id",todoItems:"@id, [todoListId+realmId]",openCloseStates:""}),this.todoLists.mapToClass(_O),this.on("populate",()=>{this.on("ready",()=>void 0)}),this.cloud.configure({unsyncedTables:["openCloseStates"],databaseUrl:"https://z0lesejpr.dexie.cloud",tryUseServiceWorker:!0,requireAuth:!1})}}const _e=new xO;/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SO=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),EO=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),mg=e=>{const t=EO(e);return t.charAt(0).toUpperCase()+t.slice(1)},dk=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),CO=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var IO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=Ie.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:s,...a},c)=>Ie.createElement("svg",{ref:c,...IO,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:dk("lucide",i),...!o&&!CO(a)&&{"aria-hidden":"true"},...a},[...s.map(([d,f])=>Ie.createElement(d,f)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=(e,t)=>{const n=Ie.forwardRef(({className:r,...i},o)=>Ie.createElement(OO,{ref:o,iconNode:t,className:dk(`lucide-${SO(mg(e))}`,`lucide-${e}`,r),...i}));return n.displayName=mg(e),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],yg=St("chevron-down",jO);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],NO=St("circle-alert",TO);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]],DO=St("cloud-off",PO);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],vg=St("cloud",AO);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],LO=St("crown",RO);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],UO=St("list",MO);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],zO=St("loader-circle",$O);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],gg=St("log-out",FO);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],wg=St("mail",BO);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KO=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],VO=St("menu",KO);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],fk=St("plus",WO);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],qO=St("rotate-ccw",HO);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],YO=St("share-2",GO);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],zc=St("trash-2",QO);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],XO=St("user-plus",JO);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],hk=St("user",ZO);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ej=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],tj=St("users",ej);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nj=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],rj=St("wifi-off",nj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],oj=St("wifi",ij);function pk(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=pk(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function mk(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=pk(e))&&(r&&(r+=" "),r+=t);return r}const bg=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,kg=mk,sj=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return kg(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:o}=t,s=Object.keys(i).map(d=>{const f=n==null?void 0:n[d],p=o==null?void 0:o[d];if(f===null)return null;const y=bg(f)||bg(p);return i[d][y]}),a=n&&Object.entries(n).reduce((d,f)=>{let[p,y]=f;return y===void 0||(d[p]=y),d},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((d,f)=>{let{class:p,className:y,...g}=f;return Object.entries(g).every(b=>{let[x,D]=b;return Array.isArray(D)?D.includes({...o,...a}[x]):{...o,...a}[x]===D})?[...d,p,y]:d},[]);return kg(e,s,c,n==null?void 0:n.class,n==null?void 0:n.className)},cm="-",lj=e=>{const t=uj(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:s=>{const a=s.split(cm);return a[0]===""&&a.length!==1&&a.shift(),yk(a,t)||aj(s)},getConflictingClassGroupIds:(s,a)=>{const c=n[s]||[];return a&&r[s]?[...c,...r[s]]:c}}},yk=(e,t)=>{var s;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),i=r?yk(e.slice(1),r):void 0;if(i)return i;if(t.validators.length===0)return;const o=e.join(cm);return(s=t.validators.find(({validator:a})=>a(o)))==null?void 0:s.classGroupId},_g=/^\[(.+)\]$/,aj=e=>{if(_g.test(e)){const t=_g.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},uj=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const i in n)Fh(n[i],r,i,t);return r},Fh=(e,t,n,r)=>{e.forEach(i=>{if(typeof i=="string"){const o=i===""?t:xg(t,i);o.classGroupId=n;return}if(typeof i=="function"){if(cj(i)){Fh(i(r),t,n,r);return}t.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([o,s])=>{Fh(s,xg(t,o),n,r)})})},xg=(e,t)=>{let n=e;return t.split(cm).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},cj=e=>e.isThemeGetter,dj=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const i=(o,s)=>{n.set(o,s),t++,t>e&&(t=0,r=n,n=new Map)};return{get(o){let s=n.get(o);if(s!==void 0)return s;if((s=r.get(o))!==void 0)return i(o,s),s},set(o,s){n.has(o)?n.set(o,s):i(o,s)}}},Bh="!",Kh=":",fj=Kh.length,hj=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=i=>{const o=[];let s=0,a=0,c=0,d;for(let b=0;b<i.length;b++){let x=i[b];if(s===0&&a===0){if(x===Kh){o.push(i.slice(c,b)),c=b+fj;continue}if(x==="/"){d=b;continue}}x==="["?s++:x==="]"?s--:x==="("?a++:x===")"&&a--}const f=o.length===0?i:i.substring(c),p=pj(f),y=p!==f,g=d&&d>c?d-c:void 0;return{modifiers:o,hasImportantModifier:y,baseClassName:p,maybePostfixModifierPosition:g}};if(t){const i=t+Kh,o=r;r=s=>s.startsWith(i)?o(s.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:s,maybePostfixModifierPosition:void 0}}if(n){const i=r;r=o=>n({className:o,parseClassName:i})}return r},pj=e=>e.endsWith(Bh)?e.substring(0,e.length-1):e.startsWith(Bh)?e.substring(1):e,mj=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let o=[];return r.forEach(s=>{s[0]==="["||t[s]?(i.push(...o.sort(),s),o=[]):o.push(s)}),i.push(...o.sort()),i}},yj=e=>({cache:dj(e.cacheSize),parseClassName:hj(e),sortModifiers:mj(e),...lj(e)}),vj=/\s+/,gj=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:o}=t,s=[],a=e.trim().split(vj);let c="";for(let d=a.length-1;d>=0;d-=1){const f=a[d],{isExternal:p,modifiers:y,hasImportantModifier:g,baseClassName:b,maybePostfixModifierPosition:x}=n(f);if(p){c=f+(c.length>0?" "+c:c);continue}let D=!!x,E=r(D?b.substring(0,x):b);if(!E){if(!D){c=f+(c.length>0?" "+c:c);continue}if(E=r(b),!E){c=f+(c.length>0?" "+c:c);continue}D=!1}const _=o(y).join(":"),k=g?_+Bh:_,$=k+E;if(s.includes($))continue;s.push($);const W=i(E,D);for(let K=0;K<W.length;++K){const q=W[K];s.push(k+q)}c=f+(c.length>0?" "+c:c)}return c};function wj(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=vk(t))&&(r&&(r+=" "),r+=n);return r}const vk=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=vk(e[r]))&&(n&&(n+=" "),n+=t);return n};function bj(e,...t){let n,r,i,o=s;function s(c){const d=t.reduce((f,p)=>p(f),e());return n=yj(d),r=n.cache.get,i=n.cache.set,o=a,a(c)}function a(c){const d=r(c);if(d)return d;const f=gj(c,n);return i(c,f),f}return function(){return o(wj.apply(null,arguments))}}const yt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},gk=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,wk=/^\((?:(\w[\w-]*):)?(.+)\)$/i,kj=/^\d+\/\d+$/,_j=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,xj=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Sj=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Ej=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Cj=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,oo=e=>kj.test(e),Pe=e=>!!e&&!Number.isNaN(Number(e)),$r=e=>!!e&&Number.isInteger(Number(e)),yf=e=>e.endsWith("%")&&Pe(e.slice(0,-1)),ur=e=>_j.test(e),Ij=()=>!0,Oj=e=>xj.test(e)&&!Sj.test(e),bk=()=>!1,jj=e=>Ej.test(e),Tj=e=>Cj.test(e),Nj=e=>!me(e)&&!ye(e),Pj=e=>is(e,xk,bk),me=e=>gk.test(e),Ci=e=>is(e,Sk,Oj),vf=e=>is(e,Mj,Pe),Sg=e=>is(e,kk,bk),Dj=e=>is(e,_k,Tj),Ya=e=>is(e,Ek,jj),ye=e=>wk.test(e),Ps=e=>os(e,Sk),Aj=e=>os(e,Uj),Eg=e=>os(e,kk),Rj=e=>os(e,xk),Lj=e=>os(e,_k),Qa=e=>os(e,Ek,!0),is=(e,t,n)=>{const r=gk.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},os=(e,t,n=!1)=>{const r=wk.exec(e);return r?r[1]?t(r[1]):n:!1},kk=e=>e==="position"||e==="percentage",_k=e=>e==="image"||e==="url",xk=e=>e==="length"||e==="size"||e==="bg-size",Sk=e=>e==="length",Mj=e=>e==="number",Uj=e=>e==="family-name",Ek=e=>e==="shadow",$j=()=>{const e=yt("color"),t=yt("font"),n=yt("text"),r=yt("font-weight"),i=yt("tracking"),o=yt("leading"),s=yt("breakpoint"),a=yt("container"),c=yt("spacing"),d=yt("radius"),f=yt("shadow"),p=yt("inset-shadow"),y=yt("text-shadow"),g=yt("drop-shadow"),b=yt("blur"),x=yt("perspective"),D=yt("aspect"),E=yt("ease"),_=yt("animate"),k=()=>["auto","avoid","all","avoid-page","page","left","right","column"],$=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],W=()=>[...$(),ye,me],K=()=>["auto","hidden","clip","visible","scroll"],q=()=>["auto","contain","none"],H=()=>[ye,me,c],le=()=>[oo,"full","auto",...H()],fe=()=>[$r,"none","subgrid",ye,me],Y=()=>["auto",{span:["full",$r,ye,me]},$r,ye,me],ge=()=>[$r,"auto",ye,me],ke=()=>["auto","min","max","fr",ye,me],Se=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Ee=()=>["start","end","center","stretch","center-safe","end-safe"],Q=()=>["auto",...H()],ae=()=>[oo,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...H()],M=()=>[e,ye,me],ee=()=>[...$(),Eg,Sg,{position:[ye,me]}],ne=()=>["no-repeat",{repeat:["","x","y","space","round"]}],de=()=>["auto","cover","contain",Rj,Pj,{size:[ye,me]}],ie=()=>[yf,Ps,Ci],be=()=>["","none","full",d,ye,me],De=()=>["",Pe,Ps,Ci],Qe=()=>["solid","dashed","dotted","double"],$e=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Te=()=>[Pe,yf,Eg,Sg],ut=()=>["","none",b,ye,me],se=()=>["none",Pe,ye,me],Ve=()=>["none",Pe,ye,me],nt=()=>[Pe,ye,me],we=()=>[oo,"full",...H()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ur],breakpoint:[ur],color:[Ij],container:[ur],"drop-shadow":[ur],ease:["in","out","in-out"],font:[Nj],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ur],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ur],shadow:[ur],spacing:["px",Pe],text:[ur],"text-shadow":[ur],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",oo,me,ye,D]}],container:["container"],columns:[{columns:[Pe,me,ye,a]}],"break-after":[{"break-after":k()}],"break-before":[{"break-before":k()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:W()}],overflow:[{overflow:K()}],"overflow-x":[{"overflow-x":K()}],"overflow-y":[{"overflow-y":K()}],overscroll:[{overscroll:q()}],"overscroll-x":[{"overscroll-x":q()}],"overscroll-y":[{"overscroll-y":q()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:le()}],"inset-x":[{"inset-x":le()}],"inset-y":[{"inset-y":le()}],start:[{start:le()}],end:[{end:le()}],top:[{top:le()}],right:[{right:le()}],bottom:[{bottom:le()}],left:[{left:le()}],visibility:["visible","invisible","collapse"],z:[{z:[$r,"auto",ye,me]}],basis:[{basis:[oo,"full","auto",a,...H()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Pe,oo,"auto","initial","none",me]}],grow:[{grow:["",Pe,ye,me]}],shrink:[{shrink:["",Pe,ye,me]}],order:[{order:[$r,"first","last","none",ye,me]}],"grid-cols":[{"grid-cols":fe()}],"col-start-end":[{col:Y()}],"col-start":[{"col-start":ge()}],"col-end":[{"col-end":ge()}],"grid-rows":[{"grid-rows":fe()}],"row-start-end":[{row:Y()}],"row-start":[{"row-start":ge()}],"row-end":[{"row-end":ge()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ke()}],"auto-rows":[{"auto-rows":ke()}],gap:[{gap:H()}],"gap-x":[{"gap-x":H()}],"gap-y":[{"gap-y":H()}],"justify-content":[{justify:[...Se(),"normal"]}],"justify-items":[{"justify-items":[...Ee(),"normal"]}],"justify-self":[{"justify-self":["auto",...Ee()]}],"align-content":[{content:["normal",...Se()]}],"align-items":[{items:[...Ee(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Ee(),{baseline:["","last"]}]}],"place-content":[{"place-content":Se()}],"place-items":[{"place-items":[...Ee(),"baseline"]}],"place-self":[{"place-self":["auto",...Ee()]}],p:[{p:H()}],px:[{px:H()}],py:[{py:H()}],ps:[{ps:H()}],pe:[{pe:H()}],pt:[{pt:H()}],pr:[{pr:H()}],pb:[{pb:H()}],pl:[{pl:H()}],m:[{m:Q()}],mx:[{mx:Q()}],my:[{my:Q()}],ms:[{ms:Q()}],me:[{me:Q()}],mt:[{mt:Q()}],mr:[{mr:Q()}],mb:[{mb:Q()}],ml:[{ml:Q()}],"space-x":[{"space-x":H()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":H()}],"space-y-reverse":["space-y-reverse"],size:[{size:ae()}],w:[{w:[a,"screen",...ae()]}],"min-w":[{"min-w":[a,"screen","none",...ae()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[s]},...ae()]}],h:[{h:["screen","lh",...ae()]}],"min-h":[{"min-h":["screen","lh","none",...ae()]}],"max-h":[{"max-h":["screen","lh",...ae()]}],"font-size":[{text:["base",n,Ps,Ci]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,ye,vf]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",yf,me]}],"font-family":[{font:[Aj,me,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,ye,me]}],"line-clamp":[{"line-clamp":[Pe,"none",ye,vf]}],leading:[{leading:[o,...H()]}],"list-image":[{"list-image":["none",ye,me]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ye,me]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:M()}],"text-color":[{text:M()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Qe(),"wavy"]}],"text-decoration-thickness":[{decoration:[Pe,"from-font","auto",ye,Ci]}],"text-decoration-color":[{decoration:M()}],"underline-offset":[{"underline-offset":[Pe,"auto",ye,me]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:H()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ye,me]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ye,me]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ee()}],"bg-repeat":[{bg:ne()}],"bg-size":[{bg:de()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},$r,ye,me],radial:["",ye,me],conic:[$r,ye,me]},Lj,Dj]}],"bg-color":[{bg:M()}],"gradient-from-pos":[{from:ie()}],"gradient-via-pos":[{via:ie()}],"gradient-to-pos":[{to:ie()}],"gradient-from":[{from:M()}],"gradient-via":[{via:M()}],"gradient-to":[{to:M()}],rounded:[{rounded:be()}],"rounded-s":[{"rounded-s":be()}],"rounded-e":[{"rounded-e":be()}],"rounded-t":[{"rounded-t":be()}],"rounded-r":[{"rounded-r":be()}],"rounded-b":[{"rounded-b":be()}],"rounded-l":[{"rounded-l":be()}],"rounded-ss":[{"rounded-ss":be()}],"rounded-se":[{"rounded-se":be()}],"rounded-ee":[{"rounded-ee":be()}],"rounded-es":[{"rounded-es":be()}],"rounded-tl":[{"rounded-tl":be()}],"rounded-tr":[{"rounded-tr":be()}],"rounded-br":[{"rounded-br":be()}],"rounded-bl":[{"rounded-bl":be()}],"border-w":[{border:De()}],"border-w-x":[{"border-x":De()}],"border-w-y":[{"border-y":De()}],"border-w-s":[{"border-s":De()}],"border-w-e":[{"border-e":De()}],"border-w-t":[{"border-t":De()}],"border-w-r":[{"border-r":De()}],"border-w-b":[{"border-b":De()}],"border-w-l":[{"border-l":De()}],"divide-x":[{"divide-x":De()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":De()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Qe(),"hidden","none"]}],"divide-style":[{divide:[...Qe(),"hidden","none"]}],"border-color":[{border:M()}],"border-color-x":[{"border-x":M()}],"border-color-y":[{"border-y":M()}],"border-color-s":[{"border-s":M()}],"border-color-e":[{"border-e":M()}],"border-color-t":[{"border-t":M()}],"border-color-r":[{"border-r":M()}],"border-color-b":[{"border-b":M()}],"border-color-l":[{"border-l":M()}],"divide-color":[{divide:M()}],"outline-style":[{outline:[...Qe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Pe,ye,me]}],"outline-w":[{outline:["",Pe,Ps,Ci]}],"outline-color":[{outline:M()}],shadow:[{shadow:["","none",f,Qa,Ya]}],"shadow-color":[{shadow:M()}],"inset-shadow":[{"inset-shadow":["none",p,Qa,Ya]}],"inset-shadow-color":[{"inset-shadow":M()}],"ring-w":[{ring:De()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:M()}],"ring-offset-w":[{"ring-offset":[Pe,Ci]}],"ring-offset-color":[{"ring-offset":M()}],"inset-ring-w":[{"inset-ring":De()}],"inset-ring-color":[{"inset-ring":M()}],"text-shadow":[{"text-shadow":["none",y,Qa,Ya]}],"text-shadow-color":[{"text-shadow":M()}],opacity:[{opacity:[Pe,ye,me]}],"mix-blend":[{"mix-blend":[...$e(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":$e()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Pe]}],"mask-image-linear-from-pos":[{"mask-linear-from":Te()}],"mask-image-linear-to-pos":[{"mask-linear-to":Te()}],"mask-image-linear-from-color":[{"mask-linear-from":M()}],"mask-image-linear-to-color":[{"mask-linear-to":M()}],"mask-image-t-from-pos":[{"mask-t-from":Te()}],"mask-image-t-to-pos":[{"mask-t-to":Te()}],"mask-image-t-from-color":[{"mask-t-from":M()}],"mask-image-t-to-color":[{"mask-t-to":M()}],"mask-image-r-from-pos":[{"mask-r-from":Te()}],"mask-image-r-to-pos":[{"mask-r-to":Te()}],"mask-image-r-from-color":[{"mask-r-from":M()}],"mask-image-r-to-color":[{"mask-r-to":M()}],"mask-image-b-from-pos":[{"mask-b-from":Te()}],"mask-image-b-to-pos":[{"mask-b-to":Te()}],"mask-image-b-from-color":[{"mask-b-from":M()}],"mask-image-b-to-color":[{"mask-b-to":M()}],"mask-image-l-from-pos":[{"mask-l-from":Te()}],"mask-image-l-to-pos":[{"mask-l-to":Te()}],"mask-image-l-from-color":[{"mask-l-from":M()}],"mask-image-l-to-color":[{"mask-l-to":M()}],"mask-image-x-from-pos":[{"mask-x-from":Te()}],"mask-image-x-to-pos":[{"mask-x-to":Te()}],"mask-image-x-from-color":[{"mask-x-from":M()}],"mask-image-x-to-color":[{"mask-x-to":M()}],"mask-image-y-from-pos":[{"mask-y-from":Te()}],"mask-image-y-to-pos":[{"mask-y-to":Te()}],"mask-image-y-from-color":[{"mask-y-from":M()}],"mask-image-y-to-color":[{"mask-y-to":M()}],"mask-image-radial":[{"mask-radial":[ye,me]}],"mask-image-radial-from-pos":[{"mask-radial-from":Te()}],"mask-image-radial-to-pos":[{"mask-radial-to":Te()}],"mask-image-radial-from-color":[{"mask-radial-from":M()}],"mask-image-radial-to-color":[{"mask-radial-to":M()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":$()}],"mask-image-conic-pos":[{"mask-conic":[Pe]}],"mask-image-conic-from-pos":[{"mask-conic-from":Te()}],"mask-image-conic-to-pos":[{"mask-conic-to":Te()}],"mask-image-conic-from-color":[{"mask-conic-from":M()}],"mask-image-conic-to-color":[{"mask-conic-to":M()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ee()}],"mask-repeat":[{mask:ne()}],"mask-size":[{mask:de()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ye,me]}],filter:[{filter:["","none",ye,me]}],blur:[{blur:ut()}],brightness:[{brightness:[Pe,ye,me]}],contrast:[{contrast:[Pe,ye,me]}],"drop-shadow":[{"drop-shadow":["","none",g,Qa,Ya]}],"drop-shadow-color":[{"drop-shadow":M()}],grayscale:[{grayscale:["",Pe,ye,me]}],"hue-rotate":[{"hue-rotate":[Pe,ye,me]}],invert:[{invert:["",Pe,ye,me]}],saturate:[{saturate:[Pe,ye,me]}],sepia:[{sepia:["",Pe,ye,me]}],"backdrop-filter":[{"backdrop-filter":["","none",ye,me]}],"backdrop-blur":[{"backdrop-blur":ut()}],"backdrop-brightness":[{"backdrop-brightness":[Pe,ye,me]}],"backdrop-contrast":[{"backdrop-contrast":[Pe,ye,me]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Pe,ye,me]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Pe,ye,me]}],"backdrop-invert":[{"backdrop-invert":["",Pe,ye,me]}],"backdrop-opacity":[{"backdrop-opacity":[Pe,ye,me]}],"backdrop-saturate":[{"backdrop-saturate":[Pe,ye,me]}],"backdrop-sepia":[{"backdrop-sepia":["",Pe,ye,me]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":H()}],"border-spacing-x":[{"border-spacing-x":H()}],"border-spacing-y":[{"border-spacing-y":H()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ye,me]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Pe,"initial",ye,me]}],ease:[{ease:["linear","initial",E,ye,me]}],delay:[{delay:[Pe,ye,me]}],animate:[{animate:["none",_,ye,me]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,ye,me]}],"perspective-origin":[{"perspective-origin":W()}],rotate:[{rotate:se()}],"rotate-x":[{"rotate-x":se()}],"rotate-y":[{"rotate-y":se()}],"rotate-z":[{"rotate-z":se()}],scale:[{scale:Ve()}],"scale-x":[{"scale-x":Ve()}],"scale-y":[{"scale-y":Ve()}],"scale-z":[{"scale-z":Ve()}],"scale-3d":["scale-3d"],skew:[{skew:nt()}],"skew-x":[{"skew-x":nt()}],"skew-y":[{"skew-y":nt()}],transform:[{transform:[ye,me,"","none","gpu","cpu"]}],"transform-origin":[{origin:W()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:we()}],"translate-x":[{"translate-x":we()}],"translate-y":[{"translate-y":we()}],"translate-z":[{"translate-z":we()}],"translate-none":["translate-none"],accent:[{accent:M()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:M()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ye,me]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":H()}],"scroll-mx":[{"scroll-mx":H()}],"scroll-my":[{"scroll-my":H()}],"scroll-ms":[{"scroll-ms":H()}],"scroll-me":[{"scroll-me":H()}],"scroll-mt":[{"scroll-mt":H()}],"scroll-mr":[{"scroll-mr":H()}],"scroll-mb":[{"scroll-mb":H()}],"scroll-ml":[{"scroll-ml":H()}],"scroll-p":[{"scroll-p":H()}],"scroll-px":[{"scroll-px":H()}],"scroll-py":[{"scroll-py":H()}],"scroll-ps":[{"scroll-ps":H()}],"scroll-pe":[{"scroll-pe":H()}],"scroll-pt":[{"scroll-pt":H()}],"scroll-pr":[{"scroll-pr":H()}],"scroll-pb":[{"scroll-pb":H()}],"scroll-pl":[{"scroll-pl":H()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ye,me]}],fill:[{fill:["none",...M()]}],"stroke-w":[{stroke:[Pe,Ps,Ci,vf]}],stroke:[{stroke:["none",...M()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},zj=bj($j);function st(...e){return zj(mk(e))}const Fj=sj("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Ge=Ie.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...i},o)=>T.jsx("button",{className:st(Fj({variant:t,size:n,className:e})),ref:o,...i}));Ge.displayName="Button";function Bj({item:e}){const t=Bl(_e,"todoItems",e),[n,r]=Ie.useState(!1),[i,o]=Ie.useState(!1);Ie.useEffect(()=>{let d;return n?(o(!0),d=setTimeout(()=>{o(!1)},2e3)):o(!1),()=>{d&&clearTimeout(d)}},[n]);const s=()=>{n&&(o(!0),r(!1),setTimeout(()=>r(!0),10))},a=d=>{_e.todoItems.update(e.id,{done:d})},c=async()=>{await _e.todoItems.delete(e.id)};return T.jsxs("div",{className:st("group flex items-center gap-3 py-3 px-4 border-b border-blue-200/60 last:border-b-0 transition-colors",e.done?"bg-blue-50 dark:bg-blue-900/20":"bg-background hover:bg-muted/30"),onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onClick:s,children:[T.jsxs("label",{className:"relative flex items-center cursor-pointer",children:[T.jsx("input",{type:"checkbox",disabled:!t.update("done"),checked:!!e.done,onChange:d=>a(d.target.checked),className:"sr-only"}),T.jsx("div",{className:st("w-6 h-6 border-2 rounded flex items-center justify-center transition-all duration-200",e.done?"bg-blue-500 border-blue-500 text-white shadow-sm":"border-gray-300 hover:border-blue-400 bg-white",!t.update("done")&&"opacity-50 cursor-not-allowed"),children:e.done&&T.jsx("svg",{className:"w-4 h-4 fill-current",viewBox:"0 0 20 20",children:T.jsx("path",{d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"})})})]}),T.jsx("div",{className:st("flex-1 text-sm leading-relaxed",e.done?"text-foreground/80":"text-foreground"),children:e.title}),T.jsx(Ge,{variant:"ghost",size:"icon",disabled:!t.delete(),onClick:c,title:"Delete item",className:st("h-8 w-8 text-muted-foreground hover:text-destructive transition-all duration-300",i?"opacity-100 translate-x-0":"opacity-0 translate-x-2 pointer-events-none"),children:T.jsx(zc,{className:"h-4 w-4"})})]})}const jl=Ie.forwardRef(({className:e,type:t,...n},r)=>T.jsx("input",{type:t,className:st("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...n}));jl.displayName="Input";function Kj({todoList:e}){const[t,n]=Ie.useState(""),r=async i=>{i.preventDefault(),t.trim()&&(await _e.todoItems.add({todoListId:e.id,realmId:e.realmId,title:t.trim()}),n(""))};return T.jsxs("form",{onSubmit:r,className:"flex gap-2",children:[T.jsx("div",{className:"flex-1",children:T.jsx(jl,{type:"text",placeholder:"Add todo item ...",value:t,onChange:i=>n(i.target.value)})}),T.jsx(Ge,{type:"submit",size:"icon",disabled:!t.trim(),title:"Add item",children:T.jsx(fk,{className:"h-4 w-4"})})]})}function Vj({todoList:e,member:t,access:n}){const r=zl(_e.cloud.roles)||{};return T.jsxs("select",{disabled:e.owner===t.userId&&t.userId===_e.cloud.currentUserId,style:{border:0},value:n,onChange:i=>Wj(e,t,n,i.target.value),children:[T.jsx("option",{value:"owner",disabled:!t.userId,children:"Owner"}),Object.entries(r).map(([i,o])=>T.jsx("option",{value:i,children:o.displayName},i)),!r[n]&&n!=="owner"&&T.jsx("option",{children:"(unknown)"},n)]})}function Wj(e,t,n,r){const i=Ms(e.id);return _e.transaction("rw",_e.todoLists,_e.members,_e.realms,()=>{if(n!=="owner"&&r==="owner"){if(!t.userId)throw new Error("Cannot give ownership to user before invite is accepted.");_e.members.where({realmId:i,userId:e.owner}).modify({roles:["manager"]}),_e.members.where({realmId:i}).modify({owner:t.userId}),_e.todoLists.update(e,{owner:t.userId}),_e.realms.update(i,{owner:t.userId})}r!=="owner"&&_e.members.update(t,{permissions:{},roles:[r]}),n==="owner"&&r!=="owner"&&(_e.todoLists.update(e,{owner:_e.cloud.currentUserId}),_e.realms.update(i,{owner:_e.cloud.currentUserId}))})}function Hj({member:e,todoList:t}){var d;const n=Bl(_e,"members",e),r=zl(_e.cloud.roles),i=(d=e.roles)==null?void 0:d[0],o=i?r==null?void 0:r[i]:null,s=e.userId===t.owner?"owner":i||"readonly",a=s==="owner"?"Owner":(o==null?void 0:o.displayName)||s,c=()=>s==="owner"?T.jsx(LO,{className:"h-4 w-4"}):T.jsx(hk,{className:"h-4 w-4"});return T.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 bg-gray-50 rounded border border-gray-200 min-w-[100px]",children:[c(),n.update("roles")?T.jsx(Vj,{todoList:t,member:e,access:s}):T.jsx("span",{className:"text-sm font-medium",children:a})]})}const qj={"alice@demo.local":{},"bob@demo.local":{},"foo@demo.local":{},"bar@demo.local":{}},Gj={manager:{displayName:"Manager",description:"Members with this role gains full permissions within the realm pointed out by the member entry",sortOrder:1,permissions:{manage:"*"}},doer:{displayName:"Doer",description:"Members with this role can add todoItems, manage own todoItems and mark other todoItems as done or undone",sortOrder:2,permissions:{add:["todoItems"],update:{todoItems:["done"]}}},readonly:{displayName:"ReadOnly",description:"Members with this role have no permissions to change any data",sortOrder:3,permissions:{}}},Yj={},Vh={demoUsers:qj,roles:Gj,data:Yj};function Qj({todoList:e}){const[t,n]=Ie.useState(""),[r,i]=Ie.useState(""),o=Fl(async()=>await _e.members.where({realmId:e.realmId}).toArray(),[e.realmId]),[s,a]=Ie.useState(!1),c=Bl(e);return T.jsxs("div",{className:"space-y-3",children:[o&&o.length>0&&T.jsxs("div",{children:[T.jsx("h4",{className:"text-sm font-medium text-foreground mb-2",children:"Shared with:"}),T.jsx("div",{className:"space-y-1",children:o==null?void 0:o.map(d=>T.jsx(Jj,{todoList:e,member:d},d.id))})]}),T.jsx("div",{className:"border-t border-border pt-3",children:c.add("members")&&T.jsxs("div",{className:"space-y-3",children:[T.jsxs("h4",{className:"text-sm font-medium text-foreground flex items-center gap-2",children:[T.jsx(XO,{className:"h-4 w-4"}),"Invite someone?"]}),T.jsx("div",{className:"space-y-1",children:Object.keys(Vh.demoUsers).filter(d=>d!==_e.cloud.currentUserId).map(d=>T.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-white rounded border border-blue-100",children:[T.jsx("span",{className:"text-sm text-foreground",children:d}),T.jsx(Ge,{size:"sm",variant:"outline",onClick:()=>{a(!1),e.shareWith(d,d,!0,["doer"])},className:"h-7 px-3 text-xs border-blue-200 text-blue-600 hover:bg-blue-50",children:"Invite"})]},d))}),s?T.jsxs("form",{onSubmit:d=>{d.preventDefault(),a(!1),e.shareWith(t,r,!0,["doer"]),n(""),i("")},className:"space-y-3 p-4 bg-muted/50 rounded-lg",children:[T.jsx(jl,{type:"email",placeholder:"Email address",value:r,onChange:d=>i(d.target.value)}),T.jsx(jl,{type:"text",placeholder:"Name",value:t,onChange:d=>n(d.target.value)}),T.jsxs("div",{className:"flex gap-2",children:[T.jsxs(Ge,{type:"submit",disabled:!/@/.test(r),size:"sm",className:"flex items-center gap-2",children:[T.jsx(wg,{className:"h-4 w-4"}),"Send invite"]}),T.jsx(Ge,{type:"button",variant:"outline",size:"sm",onClick:()=>a(!1),children:"Cancel"})]})]}):T.jsx("div",{className:"mt-2",children:T.jsxs(Ge,{variant:"outline",size:"sm",onClick:()=>a(!0),className:"flex items-center gap-2 h-8 px-3 text-xs border-blue-200 text-blue-600 hover:bg-blue-50",children:[T.jsx(wg,{className:"h-4 w-4"}),"Invite by email address"]})})]})})]})}function Jj({member:e,todoList:t}){var s,a;const n=Bl(_e,"members",e),r=e.userId===_e.cloud.currentUserId,i=e.userId===t.owner;let o=e.name||e.email||e.userId;return r&&(o+=" (me)"),T.jsxs("div",{className:`flex items-center justify-between py-2 px-3 bg-white rounded border border-blue-100 ${e.accepted?"":"opacity-50"}`,children:[T.jsxs("div",{className:"flex-1",children:[T.jsx("span",{className:"text-sm text-foreground font-medium",children:o}),!e.rejected&&!e.accepted&&T.jsx("span",{className:"text-xs text-muted-foreground italic ml-2",children:"Pending invite"}),e.rejected&&T.jsx("span",{className:"text-xs text-muted-foreground italic ml-2",children:"Rejected"})]}),T.jsxs("div",{className:"flex items-center gap-2 min-w-[140px] justify-end",children:[T.jsx(Hj,{member:e,todoList:t}),T.jsx("div",{className:"w-8 flex justify-center ml-1",children:n.delete()&&!i?T.jsx(Ge,{variant:"ghost",size:"sm",onClick:()=>t.unshareWith(e),className:"text-red-500 hover:text-red-700 hover:bg-red-50 h-8 w-8 p-0",children:T.jsx(zc,{className:"h-4 w-4"})}):!i&&e.userId===_e.cloud.currentUserId&&((((s=e.accepted)==null?void 0:s.getTime())||0)>(((a=e.rejected)==null?void 0:a.getTime())||0)?T.jsx(Ge,{variant:"outline",size:"sm",onClick:()=>t.leave(),className:"h-7 px-3 text-xs border-red-300 text-red-600 hover:bg-red-50 hover:border-red-400 min-w-[50px]",children:"Leave"}):T.jsx(Ge,{variant:"default",size:"sm",onClick:()=>_e.members.update(e.id,{accepted:new Date,rejected:void 0}),className:"h-7 px-3 text-xs bg-blue-500 hover:bg-blue-600",children:"Accept"}))})]})]})}function Xj(e,t,n=!1){return[Fl(()=>_e.openCloseStates.get([e,t]),[e,t],n)??n,o=>_e.openCloseStates.put(o,[e,t])]}function Zj({todoList:e}){const t=Fl(()=>_e.todoItems.where({todoListId:e.id}).toArray(),[e.id]),n=Bl(e),[r,i]=Xj("sharing-menu",e.id,!1);if(!t)return null;const o=async()=>{confirm(`Are you sure you want to delete "${e.title}" and all its items?`)&&await e.delete()};return T.jsxs("div",{className:"border-b border-border bg-background",children:[T.jsxs("div",{className:"flex items-center justify-between px-4 py-4 border-b border-blue-300/70 bg-blue-500 dark:bg-blue-600",children:[T.jsx("h2",{className:"text-lg font-semibold text-white",children:e.title}),T.jsxs("div",{className:"flex items-center gap-2",children:[!e.isPrivate()&&T.jsx(Ge,{variant:"ghost",size:"icon",onClick:()=>i(!r),title:"Share list",className:"text-white hover:bg-blue-600",children:T.jsx(YO,{className:"h-4 w-4"})}),T.jsx(Ge,{variant:"ghost",size:"icon",disabled:!n.delete(),onClick:o,title:"Delete list",className:"text-white hover:bg-blue-600",children:T.jsx(zc,{className:"h-4 w-4"})})]})]}),r&&T.jsx("div",{className:"px-4 py-4 bg-blue-50/70 dark:bg-blue-900/15 border-b border-blue-200/60",children:T.jsx(Qj,{todoList:e})}),T.jsxs("div",{className:"px-0 py-0",children:[t.map(s=>T.jsx(Bj,{item:s},s.id)),n.add("todoItems")&&T.jsx("div",{className:"px-4 py-3 border-b border-blue-200/60 bg-background",children:T.jsx(Kj,{todoList:e})})]})]})}function eT(){const e=Fl(()=>_e.todoLists.toArray());return e?T.jsx("div",{className:"w-full",children:e.map(t=>T.jsx(Zj,{todoList:t},t.id))}):null}const Tl=Ie.forwardRef(({className:e,...t},n)=>T.jsx("div",{ref:n,className:st("rounded-xl border bg-card text-card-foreground shadow",e),...t}));Tl.displayName="Card";const Nl=Ie.forwardRef(({className:e,...t},n)=>T.jsx("div",{ref:n,className:st("flex flex-col space-y-1.5 p-6",e),...t}));Nl.displayName="CardHeader";const Pl=Ie.forwardRef(({className:e,...t},n)=>T.jsx("h3",{ref:n,className:st("font-semibold leading-none tracking-tight",e),...t}));Pl.displayName="CardTitle";const Dl=Ie.forwardRef(({className:e,...t},n)=>T.jsx("p",{ref:n,className:st("text-sm text-muted-foreground",e),...t}));Dl.displayName="CardDescription";const Al=Ie.forwardRef(({className:e,...t},n)=>T.jsx("div",{ref:n,className:st("p-6 pt-0",e),...t}));Al.displayName="CardContent";const tT=Ie.forwardRef(({className:e,...t},n)=>T.jsx("div",{ref:n,className:st("flex items-center p-6 pt-0",e),...t}));tT.displayName="CardFooter";function nT(){const[e,t]=Ie.useState(!1),[n,r]=Ie.useState(""),i=Fl(async()=>await _e.todoLists.count()>0),o=()=>{n.trim()&&(_e.todoLists.add({title:n.trim()}),r(""),t(!1))};return e?T.jsxs(Tl,{className:"w-full sm:max-w-md",children:[T.jsxs(Nl,{children:[T.jsxs(Pl,{className:"flex items-center gap-2",children:[T.jsx(fk,{className:"h-5 w-5"}),"New Todo List"]}),T.jsx(Dl,{children:"Give your list a name to get started"})]}),T.jsxs(Al,{className:"space-y-4",children:[T.jsx(jl,{type:"text",autoFocus:!0,placeholder:"Name of list...",value:n,onChange:s=>r(s.target.value),onKeyUp:s=>{s.key==="Enter"?o():s.key==="Escape"&&(t(!1),r(""))}}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx(Ge,{onClick:o,disabled:!n.trim(),children:"Create List"}),T.jsx(Ge,{variant:"outline",onClick:()=>{t(!1),r("")},children:"Cancel"})]})]})]}):T.jsxs(Ge,{onClick:()=>t(!0),size:"lg",variant:"outline",className:"w-full sm:w-auto flex items-center gap-2 border-slate-300 text-slate-700 hover:bg-slate-50",children:[T.jsx(UO,{className:"h-4 w-4"}),i?"Add another list":"Create ToDo List"]})}function rT(){const e=async()=>{confirm("Are you sure you want to reset the database? This will delete all your local data and reload the app.")&&(await _e.delete(),location.reload())};return T.jsxs(Ge,{variant:"outline",size:"lg",onClick:e,className:"w-full sm:w-auto flex items-center gap-2 border-red-300 text-red-700 bg-red-50 hover:bg-red-100 hover:border-red-400",children:[T.jsx(qO,{className:"h-4 w-4"}),"Factory reset client"]})}var iT=typeof window<"u",oT=iT?Ie.useLayoutEffect:Ie.useEffect;const sT=oT;function dm(e,t){var n=Ie.useState(t),r=n[0],i=n[1];return sT(function(){var o=e.subscribe(i);return function(){return o.unsubscribe()}},[e]),r}function Cg({className:e}){const t=dm(_e.cloud.syncState),n=st("text-muted-foreground",e);switch(t==null?void 0:t.status){case"not-started":return T.jsx(vg,{className:n});case"connecting":return T.jsx(zO,{className:st(n,"animate-spin")});case"connected":return T.jsx(oj,{className:st(n,"text-green-500")});case"disconnected":return T.jsx(DO,{className:st(n,"text-yellow-500")});case"offline":return T.jsx("div",{title:t.error?String(t.error):void 0,children:T.jsx(rj,{className:st(n,"text-orange-500")})});case"error":return T.jsx("div",{title:t.error?String(t.error):void 0,children:T.jsx(NO,{className:st(n,"text-red-500")})});default:return T.jsx(vg,{className:n})}}const Ig=({children:e,...t})=>{const[n,r]=Ie.useState(!1);return T.jsx("div",{className:"relative inline-block text-left",...t,children:Ie.Children.map(e,i=>{if(Ie.isValidElement(i)){if(i.type===sc)return Ie.cloneElement(i,{onClick:()=>r(!n),"aria-expanded":n});if(i.type===lc)return Ie.cloneElement(i,{isOpen:n,onClose:()=>r(!1)})}return i})})},sc=Ie.forwardRef(({className:e,children:t,...n},r)=>T.jsx("button",{ref:r,className:st("inline-flex w-full justify-center gap-x-1.5 rounded-md bg-background px-3 py-2 text-sm font-semibold text-foreground shadow-sm ring-1 ring-inset ring-border hover:bg-accent",e),...n,children:t}));sc.displayName="DropdownMenuTrigger";const lc=Ie.forwardRef(({className:e,align:t="end",isOpen:n,onClose:r,children:i,...o},s)=>(Ie.useEffect(()=>{const a=c=>{s&&"current"in s&&s.current&&!s.current.contains(c.target)&&(r==null||r())};if(n)return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[n,r,s]),n?T.jsx("div",{ref:s,className:st("absolute z-10 mt-2 w-56 origin-top-right rounded-md bg-popover shadow-lg ring-1 ring-border ring-opacity-5 focus:outline-none",t==="end"?"right-0":"left-0",e),...o,children:Ie.Children.map(i,a=>Ie.isValidElement(a)&&a.type===tl?Ie.cloneElement(a,{onClick:c=>{var d,f;(f=(d=a.props).onClick)==null||f.call(d,c),r==null||r()}}):a)}):null));lc.displayName="DropdownMenuContent";const tl=Ie.forwardRef(({className:e,...t},n)=>T.jsx("button",{ref:n,className:st("block w-full px-4 py-2 text-left text-sm text-popover-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none",e),...t}));tl.displayName="DropdownMenuItem";const Ck=Ie.forwardRef(({className:e,...t},n)=>T.jsx("div",{ref:n,className:st("my-1 h-px bg-border",e),...t}));Ck.displayName="DropdownMenuSeparator";const Wh=Ie.forwardRef(({className:e,...t},n)=>T.jsx("div",{ref:n,className:st("px-4 py-2 text-xs font-semibold text-muted-foreground",e),...t}));Wh.displayName="DropdownMenuLabel";function Ja(e){return(...t)=>e(...t).catch(n=>{(n==null?void 0:n.name)==="AbortError"?console.debug(n):console.error(n)})}function Og(){return _e.cloud.logout().catch(e=>{console.log("Logout cancelled",e)})}function lT(){const e=dm(_e.cloud.currentUser),[t,n]=Ie.useState(!1);return T.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-background border-b border-border",children:T.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[T.jsxs("div",{className:"flex h-16 items-center justify-between",children:[T.jsx("div",{className:"flex items-center",children:T.jsx("h1",{className:"text-xl font-semibold text-foreground",children:"Dexie Cloud ToDo App"})}),T.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[T.jsx(Cg,{className:"h-5 w-5"}),e!=null&&e.isLoggedIn?T.jsxs(Ig,{children:[T.jsx(sc,{children:T.jsxs(Ge,{variant:"ghost",className:"flex items-center gap-2",children:[T.jsx(hk,{className:"h-4 w-4"}),e.name,T.jsx(yg,{className:"h-4 w-4"})]})}),T.jsx(lc,{children:T.jsxs(tl,{onClick:()=>Og(),children:[T.jsx(gg,{className:"mr-2 h-4 w-4"}),"Logout"]})})]}):T.jsxs(Ig,{children:[T.jsx(sc,{children:T.jsxs(Ge,{variant:"outline",className:"flex items-center gap-2",children:["Sign in or create account",T.jsx(yg,{className:"h-4 w-4"})]})}),T.jsxs(lc,{children:[T.jsx(Wh,{children:"Sign in a demo user"}),Object.keys(Vh.demoUsers).map(r=>T.jsx(tl,{onClick:Ja(()=>_e.cloud.login({grant_type:"demo",email:r})),children:r},r)),T.jsx(Ck,{}),T.jsx(Wh,{children:"Sign in real user"}),T.jsx(tl,{onClick:Ja(()=>_e.cloud.login()),children:"Sign in / sign up yourself"})]})]})]}),T.jsxs("div",{className:"md:hidden flex items-center space-x-2",children:[T.jsx(Cg,{className:"h-5 w-5"}),T.jsx(Ge,{variant:"ghost",size:"icon",onClick:()=>n(!t),children:T.jsx(VO,{className:"h-5 w-5"})})]})]}),t&&T.jsx("div",{className:"md:hidden border-t border-border",children:T.jsx("div",{className:"px-2 pt-2 pb-3 space-y-1",children:e!=null&&e.isLoggedIn?T.jsxs("div",{className:"space-y-1",children:[T.jsxs("div",{className:"px-3 py-2 text-sm text-muted-foreground",children:["Signed in as ",e.name]}),T.jsxs(Ge,{variant:"ghost",className:"w-full justify-start",onClick:()=>{Og(),n(!1)},children:[T.jsx(gg,{className:"mr-2 h-4 w-4"}),"Logout"]})]}):T.jsxs("div",{className:"space-y-1",children:[T.jsx("div",{className:"px-3 py-2 text-sm font-medium text-muted-foreground",children:"Sign in a demo user"}),Object.keys(Vh.demoUsers).map(r=>T.jsx(Ge,{variant:"ghost",className:"w-full justify-start",onClick:Ja(async()=>{await _e.cloud.login({grant_type:"demo",email:r}),n(!1)}),children:r},r)),T.jsx("div",{className:"border-t border-border my-2"}),T.jsx("div",{className:"px-3 py-2 text-sm font-medium text-muted-foreground",children:"Sign in real user"}),T.jsx(Ge,{variant:"outline",className:"w-full justify-start",onClick:Ja(async()=>{await _e.cloud.login(),n(!1)}),children:"Sign in / sign up yourself"})]})})})]})})}function aT(){const e=dm(_e.cloud.invites,[]);return e.length===0?null:T.jsxs(Tl,{children:[T.jsxs(Nl,{children:[T.jsxs(Pl,{className:"flex items-center gap-2",children:[T.jsx(tj,{className:"h-5 w-5"}),"You've got invited!"]}),T.jsxs(Dl,{children:["You have ",e.length," pending invitation",e.length>1?"s":""]})]}),T.jsx(Al,{children:T.jsx("div",{className:"space-y-4",children:e.map(t=>{var n,r;return T.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[T.jsxs("div",{className:"flex-1",children:[T.jsx("div",{className:"font-medium",children:(n=t.realm)==null?void 0:n.name}),T.jsxs("div",{className:"text-sm text-muted-foreground",children:["Invited by ",(r=t.invitedBy)==null?void 0:r.name]})]}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx(Ge,{size:"sm",onClick:()=>t.accept(),disabled:!!t.accepted,variant:t.accepted?"secondary":"default",children:t.accepted?"Accepted":"Accept"}),T.jsx(Ge,{size:"sm",variant:"outline",onClick:()=>t.reject(),disabled:!!t.rejected,children:t.rejected?"Rejected":"Reject"}),T.jsx(Ge,{size:"sm",variant:"ghost",onClick:()=>_e.members.delete(t.id),title:"Remove invite",children:T.jsx(zc,{className:"h-4 w-4"})})]})]},t.id)})})})]})}function uT(){return T.jsxs("div",{className:"min-h-screen bg-background",children:[T.jsx(lT,{}),T.jsxs("main",{className:"pt-16",children:[T.jsxs("div",{className:"max-w-4xl mx-auto px-4 pb-2",children:[T.jsx(cT,{}),T.jsx(aT,{})]}),T.jsx(eT,{}),T.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6",children:T.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[T.jsx(nT,{}),T.jsx(rT,{})]})})]})]})}function cT(){var r;const e=zl(_e.cloud.currentUser);if(!e)return null;const{license:t}=e;if(!t||t.status==="ok"&&t.validUntil===void 0&&t.evalDaysLeft===void 0)return null;if(t.status!=="ok")return T.jsxs(Tl,{className:"mb-6 border-destructive",children:[T.jsx(Nl,{children:T.jsx(Pl,{className:"text-destructive",children:"License Required"})}),T.jsxs(Al,{className:"space-y-4",children:[T.jsx(Dl,{children:"No valid license. You are in offline mode until a valid license is purchased."}),T.jsxs("div",{className:"space-y-2",children:[T.jsx(Ge,{asChild:!0,children:T.jsx("a",{href:"https://example.com",children:"Purchase License"})}),T.jsx(Ge,{variant:"destructive",onClick:i=>{i.preventDefault(),i.stopPropagation(),dT(e)},children:"Delete Account & All Data"})]})]})]});let n=t.evalDaysLeft;if(n===void 0){const i=((r=t.validUntil)==null?void 0:r.getTime())??1/0;n=Math.round((i-Date.now())/(24*60*60*1e3))}return n<7?T.jsxs(Tl,{className:"mb-6 border-yellow-500",children:[T.jsx(Nl,{children:T.jsx(Pl,{className:"text-yellow-600",children:"License Expiring Soon"})}),T.jsxs(Al,{className:"space-y-4",children:[T.jsxs(Dl,{children:["License expires in ",n," days."]}),T.jsx(Ge,{asChild:!0,children:T.jsx("a",{href:"https://example.com",children:"Purchase Production License"})})]})]}):null}async function dT(e){var n;!(e!=null&&e.userId)||!confirm(`Are you sure you want to delete your user completely along all stored data for ${e.userId}? Private data will be deleted. Shared data will not be deleted. This action cannot be undone.`)||(await fetch(`${(n=_e.cloud.options)==null?void 0:n.databaseUrl}/users/${e.userId}`,{method:"DELETE",headers:{Authorization:`Bearer ${e.accessToken}`}}),await _e.cloud.logout({force:!0}))}function fT(e){return"serviceWorker"in navigator?window.addEventListener("load",async()=>{try{let t="./";t.endsWith("/")||(t+="/");const n=await navigator.serviceWorker.register(`${t}sw.js`,{scope:t});console.log("🔧 Service Worker: Registration successful",n),n.addEventListener("updatefound",()=>{const r=n.installing;r&&r.addEventListener("statechange",()=>{var i,o,s,a;r.state==="installed"&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed."),(i=e==null?void 0:e.onUpdate)==null||i.call(e,n),(o=e==null?void 0:e.onNeedRefresh)==null||o.call(e)):(console.log("App ready to work offline."),(s=e==null?void 0:e.onSuccess)==null||s.call(e,n),(a=e==null?void 0:e.onOfflineReady)==null||a.call(e)))})})}catch(t){console.error("🚨 Service worker registration failed:",t),t instanceof Error&&console.error("🚨 Error details:",{name:t.name,message:t.message,stack:t.stack})}}):"serviceWorker"in navigator||console.log("🚫 Service Worker: Not supported in this browser"),()=>{}}const hT="modulepreload",pT=function(e,t){return new URL(e,t).href},jg={},mT=function(t,n,r){if(!n||n.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=pT(o,r),o in jg)return;jg[o]=!0;const s=o.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(!!r)for(let f=i.length-1;f>=0;f--){const p=i[f];if(p.href===o&&(!s||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const d=document.createElement("link");if(d.rel=s?"stylesheet":hT,s||(d.as="script",d.crossOrigin=""),d.href=o,document.head.appendChild(d),s)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o})},yT=e=>{e&&e instanceof Function&&mT(()=>import("./web-vitals-867e2ef8.js"),[],import.meta.url).then(({getCLS:t,getFID:n,getFCP:r,getLCP:i,getTTFB:o})=>{t(e),n(e),r(e),i(e),o(e)})};window.Dexie=Ae;Ae.debug=!0;const vT=document.getElementById("root"),gT=Kw(vT);gT.render(T.jsx(so.StrictMode,{children:T.jsx(uT,{})}));fT();yT();
//# sourceMappingURL=index-48c95ba2.js.map
