var w_=Object.defineProperty;var b_=(e,t,n)=>t in e?w_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Lr=(e,t,n)=>b_(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var sy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var qv={exports:{}},kc={},Gv={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vl=Symbol.for("react.element"),k_=Symbol.for("react.portal"),__=Symbol.for("react.fragment"),x_=Symbol.for("react.strict_mode"),S_=Symbol.for("react.profiler"),E_=Symbol.for("react.provider"),C_=Symbol.for("react.context"),I_=Symbol.for("react.forward_ref"),O_=Symbol.for("react.suspense"),j_=Symbol.for("react.memo"),T_=Symbol.for("react.lazy"),ly=Symbol.iterator;function N_(e){return e===null||typeof e!="object"?null:(e=ly&&e[ly]||e["@@iterator"],typeof e=="function"?e:null)}var Yv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qv=Object.assign,Jv={};function Jo(e,t,n){this.props=e,this.context=t,this.refs=Jv,this.updater=n||Yv}Jo.prototype.isReactComponent={};Jo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Jo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Xv(){}Xv.prototype=Jo.prototype;function ip(e,t,n){this.props=e,this.context=t,this.refs=Jv,this.updater=n||Yv}var op=ip.prototype=new Xv;op.constructor=ip;Qv(op,Jo.prototype);op.isPureReactComponent=!0;var ay=Array.isArray,Zv=Object.prototype.hasOwnProperty,sp={current:null},e0={key:!0,ref:!0,__self:!0,__source:!0};function t0(e,t,n){var r,i={},o=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)Zv.call(t,r)&&!e0.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),d=0;d<a;d++)c[d]=arguments[d+2];i.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Vl,type:e,key:o,ref:s,props:i,_owner:sp.current}}function P_(e,t){return{$$typeof:Vl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function lp(e){return typeof e=="object"&&e!==null&&e.$$typeof===Vl}function A_(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var uy=/\/+/g;function Rd(e,t){return typeof e=="object"&&e!==null&&e.key!=null?A_(""+e.key):t.toString(36)}function lu(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Vl:case k_:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+Rd(s,0):r,ay(i)?(n="",e!=null&&(n=e.replace(uy,"$&/")+"/"),lu(i,t,n,"",function(d){return d})):i!=null&&(lp(i)&&(i=P_(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(uy,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",ay(e))for(var a=0;a<e.length;a++){o=e[a];var c=r+Rd(o,a);s+=lu(o,t,n,c,i)}else if(c=N_(e),typeof c=="function")for(e=c.call(e),a=0;!(o=e.next()).done;)o=o.value,c=r+Rd(o,a++),s+=lu(o,t,n,c,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Aa(e,t,n){if(e==null)return e;var r=[],i=0;return lu(e,r,"","",function(o){return t.call(n,o,i++)}),r}function D_(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Qt={current:null},au={transition:null},L_={ReactCurrentDispatcher:Qt,ReactCurrentBatchConfig:au,ReactCurrentOwner:sp};function n0(){throw Error("act(...) is not supported in production builds of React.")}Le.Children={map:Aa,forEach:function(e,t,n){Aa(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Aa(e,function(){t++}),t},toArray:function(e){return Aa(e,function(t){return t})||[]},only:function(e){if(!lp(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Le.Component=Jo;Le.Fragment=__;Le.Profiler=S_;Le.PureComponent=ip;Le.StrictMode=x_;Le.Suspense=O_;Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L_;Le.act=n0;Le.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Qv({},e.props),i=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=sp.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)Zv.call(t,c)&&!e0.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var d=0;d<c;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:Vl,type:e.type,key:i,ref:o,props:r,_owner:s}};Le.createContext=function(e){return e={$$typeof:C_,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:E_,_context:e},e.Consumer=e};Le.createElement=t0;Le.createFactory=function(e){var t=t0.bind(null,e);return t.type=e,t};Le.createRef=function(){return{current:null}};Le.forwardRef=function(e){return{$$typeof:I_,render:e}};Le.isValidElement=lp;Le.lazy=function(e){return{$$typeof:T_,_payload:{_status:-1,_result:e},_init:D_}};Le.memo=function(e,t){return{$$typeof:j_,type:e,compare:t===void 0?null:t}};Le.startTransition=function(e){var t=au.transition;au.transition={};try{e()}finally{au.transition=t}};Le.unstable_act=n0;Le.useCallback=function(e,t){return Qt.current.useCallback(e,t)};Le.useContext=function(e){return Qt.current.useContext(e)};Le.useDebugValue=function(){};Le.useDeferredValue=function(e){return Qt.current.useDeferredValue(e)};Le.useEffect=function(e,t){return Qt.current.useEffect(e,t)};Le.useId=function(){return Qt.current.useId()};Le.useImperativeHandle=function(e,t,n){return Qt.current.useImperativeHandle(e,t,n)};Le.useInsertionEffect=function(e,t){return Qt.current.useInsertionEffect(e,t)};Le.useLayoutEffect=function(e,t){return Qt.current.useLayoutEffect(e,t)};Le.useMemo=function(e,t){return Qt.current.useMemo(e,t)};Le.useReducer=function(e,t,n){return Qt.current.useReducer(e,t,n)};Le.useRef=function(e){return Qt.current.useRef(e)};Le.useState=function(e){return Qt.current.useState(e)};Le.useSyncExternalStore=function(e,t,n){return Qt.current.useSyncExternalStore(e,t,n)};Le.useTransition=function(){return Qt.current.useTransition()};Le.version="18.3.1";Gv.exports=Le;var Se=Gv.exports;const so=Hv(Se);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R_=Se,M_=Symbol.for("react.element"),U_=Symbol.for("react.fragment"),$_=Object.prototype.hasOwnProperty,z_=R_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,F_={key:!0,ref:!0,__self:!0,__source:!0};function r0(e,t,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)$_.call(t,r)&&!F_.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:M_,type:e,key:o,ref:s,props:i,_owner:z_.current}}kc.Fragment=U_;kc.jsx=r0;kc.jsxs=r0;qv.exports=kc;var O=qv.exports,i0={exports:{}},gn={},o0={exports:{}},s0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(U,ee){var ne=U.length;U.push(ee);e:for(;0<ne;){var de=ne-1>>>1,oe=U[de];if(0<i(oe,ee))U[de]=ee,U[ne]=oe,ne=de;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var ee=U[0],ne=U.pop();if(ne!==ee){U[0]=ne;e:for(var de=0,oe=U.length,be=oe>>>1;de<be;){var Ae=2*(de+1)-1,Je=U[Ae],$e=Ae+1,Te=U[$e];if(0>i(Je,ne))$e<oe&&0>i(Te,Je)?(U[de]=Te,U[$e]=ne,de=$e):(U[de]=Je,U[Ae]=ne,de=Ae);else if($e<oe&&0>i(Te,ne))U[de]=Te,U[$e]=ne,de=$e;else break e}}return ee}function i(U,ee){var ne=U.sortIndex-ee.sortIndex;return ne!==0?ne:U.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var c=[],d=[],f=1,p=null,m=3,v=!1,b=!1,x=!1,P=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(U){for(var ee=n(d);ee!==null;){if(ee.callback===null)r(d);else if(ee.startTime<=U)r(d),ee.sortIndex=ee.expirationTime,t(c,ee);else break;ee=n(d)}}function R(U){if(x=!1,_(U),!b)if(n(c)!==null)b=!0,Q(K);else{var ee=n(d);ee!==null&&ae(R,ee.startTime-U)}}function K(U,ee){b=!1,x&&(x=!1,S(H),H=-1),v=!0;var ne=m;try{for(_(ee),p=n(c);p!==null&&(!(p.expirationTime>ee)||U&&!Y());){var de=p.callback;if(typeof de=="function"){p.callback=null,m=p.priorityLevel;var oe=de(p.expirationTime<=ee);ee=e.unstable_now(),typeof oe=="function"?p.callback=oe:p===n(c)&&r(c),_(ee)}else r(c);p=n(c)}if(p!==null)var be=!0;else{var Ae=n(d);Ae!==null&&ae(R,Ae.startTime-ee),be=!1}return be}finally{p=null,m=ne,v=!1}}var B=!1,q=null,H=-1,ie=5,fe=-1;function Y(){return!(e.unstable_now()-fe<ie)}function ve(){if(q!==null){var U=e.unstable_now();fe=U;var ee=!0;try{ee=q(!0,U)}finally{ee?ke():(B=!1,q=null)}}else B=!1}var ke;if(typeof k=="function")ke=function(){k(ve)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,Ce=Ee.port2;Ee.port1.onmessage=ve,ke=function(){Ce.postMessage(null)}}else ke=function(){P(ve,0)};function Q(U){q=U,B||(B=!0,ke())}function ae(U,ee){H=P(function(){U(e.unstable_now())},ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){b||v||(b=!0,Q(K))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(U){switch(m){case 1:case 2:case 3:var ee=3;break;default:ee=m}var ne=m;m=ee;try{return U()}finally{m=ne}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,ee){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ne=m;m=U;try{return ee()}finally{m=ne}},e.unstable_scheduleCallback=function(U,ee,ne){var de=e.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?de+ne:de):ne=de,U){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=ne+oe,U={id:f++,callback:ee,priorityLevel:U,startTime:ne,expirationTime:oe,sortIndex:-1},ne>de?(U.sortIndex=ne,t(d,U),n(c)===null&&U===n(d)&&(x?(S(H),H=-1):x=!0,ae(R,ne-de))):(U.sortIndex=oe,t(c,U),b||v||(b=!0,Q(K))),U},e.unstable_shouldYield=Y,e.unstable_wrapCallback=function(U){var ee=m;return function(){var ne=m;m=ee;try{return U.apply(this,arguments)}finally{m=ne}}}})(s0);o0.exports=s0;var B_=o0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K_=Se,mn=B_;function J(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l0=new Set,ll={};function Hi(e,t){Lo(e,t),Lo(e+"Capture",t)}function Lo(e,t){for(ll[e]=t,e=0;e<t.length;e++)l0.add(t[e])}var vr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nf=Object.prototype.hasOwnProperty,V_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cy={},dy={};function W_(e){return Nf.call(dy,e)?!0:Nf.call(cy,e)?!1:V_.test(e)?dy[e]=!0:(cy[e]=!0,!1)}function H_(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function q_(e,t,n,r){if(t===null||typeof t>"u"||H_(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Jt(e,t,n,r,i,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var Rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Rt[e]=new Jt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Rt[t]=new Jt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Rt[e]=new Jt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Rt[e]=new Jt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Rt[e]=new Jt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Rt[e]=new Jt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Rt[e]=new Jt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Rt[e]=new Jt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Rt[e]=new Jt(e,5,!1,e.toLowerCase(),null,!1,!1)});var ap=/[\-:]([a-z])/g;function up(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ap,up);Rt[t]=new Jt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ap,up);Rt[t]=new Jt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ap,up);Rt[t]=new Jt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Rt[e]=new Jt(e,1,!1,e.toLowerCase(),null,!1,!1)});Rt.xlinkHref=new Jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Rt[e]=new Jt(e,1,!1,e.toLowerCase(),null,!0,!0)});function cp(e,t,n,r){var i=Rt.hasOwnProperty(t)?Rt[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(q_(t,n,i,r)&&(n=null),r||i===null?W_(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var xr=K_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Da=Symbol.for("react.element"),uo=Symbol.for("react.portal"),co=Symbol.for("react.fragment"),dp=Symbol.for("react.strict_mode"),Pf=Symbol.for("react.profiler"),a0=Symbol.for("react.provider"),u0=Symbol.for("react.context"),fp=Symbol.for("react.forward_ref"),Af=Symbol.for("react.suspense"),Df=Symbol.for("react.suspense_list"),hp=Symbol.for("react.memo"),Ur=Symbol.for("react.lazy"),c0=Symbol.for("react.offscreen"),fy=Symbol.iterator;function _s(e){return e===null||typeof e!="object"?null:(e=fy&&e[fy]||e["@@iterator"],typeof e=="function"?e:null)}var at=Object.assign,Md;function Rs(e){if(Md===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Md=t&&t[1]||""}return`
`+Md+e}var Ud=!1;function $d(e,t){if(!e||Ud)return"";Ud=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var c=`
`+i[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=s&&0<=a);break}}}finally{Ud=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Rs(e):""}function G_(e){switch(e.tag){case 5:return Rs(e.type);case 16:return Rs("Lazy");case 13:return Rs("Suspense");case 19:return Rs("SuspenseList");case 0:case 2:case 15:return e=$d(e.type,!1),e;case 11:return e=$d(e.type.render,!1),e;case 1:return e=$d(e.type,!0),e;default:return""}}function Lf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case co:return"Fragment";case uo:return"Portal";case Pf:return"Profiler";case dp:return"StrictMode";case Af:return"Suspense";case Df:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case u0:return(e.displayName||"Context")+".Consumer";case a0:return(e._context.displayName||"Context")+".Provider";case fp:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case hp:return t=e.displayName||null,t!==null?t:Lf(e.type)||"Memo";case Ur:t=e._payload,e=e._init;try{return Lf(e(t))}catch{}}return null}function Y_(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Lf(t);case 8:return t===dp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ri(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function d0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Q_(e){var t=d0(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function La(e){e._valueTracker||(e._valueTracker=Q_(e))}function f0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=d0(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ou(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Rf(e,t){var n=t.checked;return at({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function hy(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ri(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function h0(e,t){t=t.checked,t!=null&&cp(e,"checked",t,!1)}function Mf(e,t){h0(e,t);var n=ri(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Uf(e,t.type,n):t.hasOwnProperty("defaultValue")&&Uf(e,t.type,ri(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function py(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Uf(e,t,n){(t!=="number"||Ou(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ms=Array.isArray;function So(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ri(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function $f(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(J(91));return at({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function my(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(J(92));if(Ms(n)){if(1<n.length)throw Error(J(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ri(n)}}function p0(e,t){var n=ri(t.value),r=ri(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function yy(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function m0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zf(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?m0(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ra,y0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ra=Ra||document.createElement("div"),Ra.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ra.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function al(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Fs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},J_=["Webkit","ms","Moz","O"];Object.keys(Fs).forEach(function(e){J_.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Fs[t]=Fs[e]})});function g0(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Fs.hasOwnProperty(e)&&Fs[e]?(""+t).trim():t+"px"}function v0(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=g0(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var X_=at({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ff(e,t){if(t){if(X_[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(J(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(J(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(J(61))}if(t.style!=null&&typeof t.style!="object")throw Error(J(62))}}function Bf(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kf=null;function pp(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Vf=null,Eo=null,Co=null;function gy(e){if(e=ql(e)){if(typeof Vf!="function")throw Error(J(280));var t=e.stateNode;t&&(t=Cc(t),Vf(e.stateNode,e.type,t))}}function w0(e){Eo?Co?Co.push(e):Co=[e]:Eo=e}function b0(){if(Eo){var e=Eo,t=Co;if(Co=Eo=null,gy(e),t)for(e=0;e<t.length;e++)gy(t[e])}}function k0(e,t){return e(t)}function _0(){}var zd=!1;function x0(e,t,n){if(zd)return e(t,n);zd=!0;try{return k0(e,t,n)}finally{zd=!1,(Eo!==null||Co!==null)&&(_0(),b0())}}function ul(e,t){var n=e.stateNode;if(n===null)return null;var r=Cc(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(J(231,t,typeof n));return n}var Wf=!1;if(vr)try{var xs={};Object.defineProperty(xs,"passive",{get:function(){Wf=!0}}),window.addEventListener("test",xs,xs),window.removeEventListener("test",xs,xs)}catch{Wf=!1}function Z_(e,t,n,r,i,o,s,a,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(f){this.onError(f)}}var Bs=!1,ju=null,Tu=!1,Hf=null,ex={onError:function(e){Bs=!0,ju=e}};function tx(e,t,n,r,i,o,s,a,c){Bs=!1,ju=null,Z_.apply(ex,arguments)}function nx(e,t,n,r,i,o,s,a,c){if(tx.apply(this,arguments),Bs){if(Bs){var d=ju;Bs=!1,ju=null}else throw Error(J(198));Tu||(Tu=!0,Hf=d)}}function qi(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function S0(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function vy(e){if(qi(e)!==e)throw Error(J(188))}function rx(e){var t=e.alternate;if(!t){if(t=qi(e),t===null)throw Error(J(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return vy(i),e;if(o===r)return vy(i),t;o=o.sibling}throw Error(J(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?e:t}function E0(e){return e=rx(e),e!==null?C0(e):null}function C0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=C0(e);if(t!==null)return t;e=e.sibling}return null}var I0=mn.unstable_scheduleCallback,wy=mn.unstable_cancelCallback,ix=mn.unstable_shouldYield,ox=mn.unstable_requestPaint,pt=mn.unstable_now,sx=mn.unstable_getCurrentPriorityLevel,mp=mn.unstable_ImmediatePriority,O0=mn.unstable_UserBlockingPriority,Nu=mn.unstable_NormalPriority,lx=mn.unstable_LowPriority,j0=mn.unstable_IdlePriority,_c=null,Jn=null;function ax(e){if(Jn&&typeof Jn.onCommitFiberRoot=="function")try{Jn.onCommitFiberRoot(_c,e,void 0,(e.current.flags&128)===128)}catch{}}var Mn=Math.clz32?Math.clz32:dx,ux=Math.log,cx=Math.LN2;function dx(e){return e>>>=0,e===0?32:31-(ux(e)/cx|0)|0}var Ma=64,Ua=4194304;function Us(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Pu(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=Us(a):(o&=s,o!==0&&(r=Us(o)))}else s=n&~i,s!==0?r=Us(s):o!==0&&(r=Us(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Mn(t),i=1<<n,r|=e[n],t&=~i;return r}function fx(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hx(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-Mn(o),a=1<<s,c=i[s];c===-1?(!(a&n)||a&r)&&(i[s]=fx(a,t)):c<=t&&(e.expiredLanes|=a),o&=~a}}function qf(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function T0(){var e=Ma;return Ma<<=1,!(Ma&4194240)&&(Ma=64),e}function Fd(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Wl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Mn(t),e[t]=n}function px(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Mn(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function yp(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Mn(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var He=0;function N0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var P0,gp,A0,D0,L0,Gf=!1,$a=[],Hr=null,qr=null,Gr=null,cl=new Map,dl=new Map,zr=[],mx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function by(e,t){switch(e){case"focusin":case"focusout":Hr=null;break;case"dragenter":case"dragleave":qr=null;break;case"mouseover":case"mouseout":Gr=null;break;case"pointerover":case"pointerout":cl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":dl.delete(t.pointerId)}}function Ss(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=ql(t),t!==null&&gp(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function yx(e,t,n,r,i){switch(t){case"focusin":return Hr=Ss(Hr,e,t,n,r,i),!0;case"dragenter":return qr=Ss(qr,e,t,n,r,i),!0;case"mouseover":return Gr=Ss(Gr,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return cl.set(o,Ss(cl.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,dl.set(o,Ss(dl.get(o)||null,e,t,n,r,i)),!0}return!1}function R0(e){var t=Ci(e.target);if(t!==null){var n=qi(t);if(n!==null){if(t=n.tag,t===13){if(t=S0(n),t!==null){e.blockedOn=t,L0(e.priority,function(){A0(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function uu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yf(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Kf=r,n.target.dispatchEvent(r),Kf=null}else return t=ql(n),t!==null&&gp(t),e.blockedOn=n,!1;t.shift()}return!0}function ky(e,t,n){uu(e)&&n.delete(t)}function gx(){Gf=!1,Hr!==null&&uu(Hr)&&(Hr=null),qr!==null&&uu(qr)&&(qr=null),Gr!==null&&uu(Gr)&&(Gr=null),cl.forEach(ky),dl.forEach(ky)}function Es(e,t){e.blockedOn===t&&(e.blockedOn=null,Gf||(Gf=!0,mn.unstable_scheduleCallback(mn.unstable_NormalPriority,gx)))}function fl(e){function t(i){return Es(i,e)}if(0<$a.length){Es($a[0],e);for(var n=1;n<$a.length;n++){var r=$a[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Hr!==null&&Es(Hr,e),qr!==null&&Es(qr,e),Gr!==null&&Es(Gr,e),cl.forEach(t),dl.forEach(t),n=0;n<zr.length;n++)r=zr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<zr.length&&(n=zr[0],n.blockedOn===null);)R0(n),n.blockedOn===null&&zr.shift()}var Io=xr.ReactCurrentBatchConfig,Au=!0;function vx(e,t,n,r){var i=He,o=Io.transition;Io.transition=null;try{He=1,vp(e,t,n,r)}finally{He=i,Io.transition=o}}function wx(e,t,n,r){var i=He,o=Io.transition;Io.transition=null;try{He=4,vp(e,t,n,r)}finally{He=i,Io.transition=o}}function vp(e,t,n,r){if(Au){var i=Yf(e,t,n,r);if(i===null)Jd(e,t,r,Du,n),by(e,r);else if(yx(i,e,t,n,r))r.stopPropagation();else if(by(e,r),t&4&&-1<mx.indexOf(e)){for(;i!==null;){var o=ql(i);if(o!==null&&P0(o),o=Yf(e,t,n,r),o===null&&Jd(e,t,r,Du,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Jd(e,t,r,null,n)}}var Du=null;function Yf(e,t,n,r){if(Du=null,e=pp(r),e=Ci(e),e!==null)if(t=qi(e),t===null)e=null;else if(n=t.tag,n===13){if(e=S0(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Du=e,null}function M0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sx()){case mp:return 1;case O0:return 4;case Nu:case lx:return 16;case j0:return 536870912;default:return 16}default:return 16}}var Br=null,wp=null,cu=null;function U0(){if(cu)return cu;var e,t=wp,n=t.length,r,i="value"in Br?Br.value:Br.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[o-r];r++);return cu=i.slice(e,1<r?1-r:void 0)}function du(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function za(){return!0}function _y(){return!1}function vn(e){function t(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?za:_y,this.isPropagationStopped=_y,this}return at(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=za)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=za)},persist:function(){},isPersistent:za}),t}var Xo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bp=vn(Xo),Hl=at({},Xo,{view:0,detail:0}),bx=vn(Hl),Bd,Kd,Cs,xc=at({},Hl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kp,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Cs&&(Cs&&e.type==="mousemove"?(Bd=e.screenX-Cs.screenX,Kd=e.screenY-Cs.screenY):Kd=Bd=0,Cs=e),Bd)},movementY:function(e){return"movementY"in e?e.movementY:Kd}}),xy=vn(xc),kx=at({},xc,{dataTransfer:0}),_x=vn(kx),xx=at({},Hl,{relatedTarget:0}),Vd=vn(xx),Sx=at({},Xo,{animationName:0,elapsedTime:0,pseudoElement:0}),Ex=vn(Sx),Cx=at({},Xo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ix=vn(Cx),Ox=at({},Xo,{data:0}),Sy=vn(Ox),jx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Px(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Nx[e])?!!t[e]:!1}function kp(){return Px}var Ax=at({},Hl,{key:function(e){if(e.key){var t=jx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=du(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Tx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kp,charCode:function(e){return e.type==="keypress"?du(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?du(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Dx=vn(Ax),Lx=at({},xc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ey=vn(Lx),Rx=at({},Hl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kp}),Mx=vn(Rx),Ux=at({},Xo,{propertyName:0,elapsedTime:0,pseudoElement:0}),$x=vn(Ux),zx=at({},xc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Fx=vn(zx),Bx=[9,13,27,32],_p=vr&&"CompositionEvent"in window,Ks=null;vr&&"documentMode"in document&&(Ks=document.documentMode);var Kx=vr&&"TextEvent"in window&&!Ks,$0=vr&&(!_p||Ks&&8<Ks&&11>=Ks),Cy=" ",Iy=!1;function z0(e,t){switch(e){case"keyup":return Bx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function F0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var fo=!1;function Vx(e,t){switch(e){case"compositionend":return F0(t);case"keypress":return t.which!==32?null:(Iy=!0,Cy);case"textInput":return e=t.data,e===Cy&&Iy?null:e;default:return null}}function Wx(e,t){if(fo)return e==="compositionend"||!_p&&z0(e,t)?(e=U0(),cu=wp=Br=null,fo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $0&&t.locale!=="ko"?null:t.data;default:return null}}var Hx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Oy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Hx[e.type]:t==="textarea"}function B0(e,t,n,r){w0(r),t=Lu(t,"onChange"),0<t.length&&(n=new bp("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Vs=null,hl=null;function qx(e){Z0(e,0)}function Sc(e){var t=mo(e);if(f0(t))return e}function Gx(e,t){if(e==="change")return t}var K0=!1;if(vr){var Wd;if(vr){var Hd="oninput"in document;if(!Hd){var jy=document.createElement("div");jy.setAttribute("oninput","return;"),Hd=typeof jy.oninput=="function"}Wd=Hd}else Wd=!1;K0=Wd&&(!document.documentMode||9<document.documentMode)}function Ty(){Vs&&(Vs.detachEvent("onpropertychange",V0),hl=Vs=null)}function V0(e){if(e.propertyName==="value"&&Sc(hl)){var t=[];B0(t,hl,e,pp(e)),x0(qx,t)}}function Yx(e,t,n){e==="focusin"?(Ty(),Vs=t,hl=n,Vs.attachEvent("onpropertychange",V0)):e==="focusout"&&Ty()}function Qx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Sc(hl)}function Jx(e,t){if(e==="click")return Sc(t)}function Xx(e,t){if(e==="input"||e==="change")return Sc(t)}function Zx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $n=typeof Object.is=="function"?Object.is:Zx;function pl(e,t){if($n(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Nf.call(t,i)||!$n(e[i],t[i]))return!1}return!0}function Ny(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Py(e,t){var n=Ny(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ny(n)}}function W0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?W0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function H0(){for(var e=window,t=Ou();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ou(e.document)}return t}function xp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function eS(e){var t=H0(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&W0(n.ownerDocument.documentElement,n)){if(r!==null&&xp(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=Py(n,o);var s=Py(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var tS=vr&&"documentMode"in document&&11>=document.documentMode,ho=null,Qf=null,Ws=null,Jf=!1;function Ay(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jf||ho==null||ho!==Ou(r)||(r=ho,"selectionStart"in r&&xp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ws&&pl(Ws,r)||(Ws=r,r=Lu(Qf,"onSelect"),0<r.length&&(t=new bp("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ho)))}function Fa(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var po={animationend:Fa("Animation","AnimationEnd"),animationiteration:Fa("Animation","AnimationIteration"),animationstart:Fa("Animation","AnimationStart"),transitionend:Fa("Transition","TransitionEnd")},qd={},q0={};vr&&(q0=document.createElement("div").style,"AnimationEvent"in window||(delete po.animationend.animation,delete po.animationiteration.animation,delete po.animationstart.animation),"TransitionEvent"in window||delete po.transitionend.transition);function Ec(e){if(qd[e])return qd[e];if(!po[e])return e;var t=po[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in q0)return qd[e]=t[n];return e}var G0=Ec("animationend"),Y0=Ec("animationiteration"),Q0=Ec("animationstart"),J0=Ec("transitionend"),X0=new Map,Dy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ai(e,t){X0.set(e,t),Hi(t,[e])}for(var Gd=0;Gd<Dy.length;Gd++){var Yd=Dy[Gd],nS=Yd.toLowerCase(),rS=Yd[0].toUpperCase()+Yd.slice(1);ai(nS,"on"+rS)}ai(G0,"onAnimationEnd");ai(Y0,"onAnimationIteration");ai(Q0,"onAnimationStart");ai("dblclick","onDoubleClick");ai("focusin","onFocus");ai("focusout","onBlur");ai(J0,"onTransitionEnd");Lo("onMouseEnter",["mouseout","mouseover"]);Lo("onMouseLeave",["mouseout","mouseover"]);Lo("onPointerEnter",["pointerout","pointerover"]);Lo("onPointerLeave",["pointerout","pointerover"]);Hi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $s="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iS=new Set("cancel close invalid load scroll toggle".split(" ").concat($s));function Ly(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,nx(r,t,void 0,e),e.currentTarget=null}function Z0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],c=a.instance,d=a.currentTarget;if(a=a.listener,c!==o&&i.isPropagationStopped())break e;Ly(i,a,d),o=c}else for(s=0;s<r.length;s++){if(a=r[s],c=a.instance,d=a.currentTarget,a=a.listener,c!==o&&i.isPropagationStopped())break e;Ly(i,a,d),o=c}}}if(Tu)throw e=Hf,Tu=!1,Hf=null,e}function tt(e,t){var n=t[nh];n===void 0&&(n=t[nh]=new Set);var r=e+"__bubble";n.has(r)||(ew(t,e,2,!1),n.add(r))}function Qd(e,t,n){var r=0;t&&(r|=4),ew(n,e,r,t)}var Ba="_reactListening"+Math.random().toString(36).slice(2);function ml(e){if(!e[Ba]){e[Ba]=!0,l0.forEach(function(n){n!=="selectionchange"&&(iS.has(n)||Qd(n,!1,e),Qd(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ba]||(t[Ba]=!0,Qd("selectionchange",!1,t))}}function ew(e,t,n,r){switch(M0(t)){case 1:var i=vx;break;case 4:i=wx;break;default:i=vp}n=i.bind(null,t,n,e),i=void 0,!Wf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Jd(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Ci(a),s===null)return;if(c=s.tag,c===5||c===6){r=o=s;continue e}a=a.parentNode}}r=r.return}x0(function(){var d=o,f=pp(n),p=[];e:{var m=X0.get(e);if(m!==void 0){var v=bp,b=e;switch(e){case"keypress":if(du(n)===0)break e;case"keydown":case"keyup":v=Dx;break;case"focusin":b="focus",v=Vd;break;case"focusout":b="blur",v=Vd;break;case"beforeblur":case"afterblur":v=Vd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=xy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=_x;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=Mx;break;case G0:case Y0:case Q0:v=Ex;break;case J0:v=$x;break;case"scroll":v=bx;break;case"wheel":v=Fx;break;case"copy":case"cut":case"paste":v=Ix;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Ey}var x=(t&4)!==0,P=!x&&e==="scroll",S=x?m!==null?m+"Capture":null:m;x=[];for(var k=d,_;k!==null;){_=k;var R=_.stateNode;if(_.tag===5&&R!==null&&(_=R,S!==null&&(R=ul(k,S),R!=null&&x.push(yl(k,R,_)))),P)break;k=k.return}0<x.length&&(m=new v(m,b,null,n,f),p.push({event:m,listeners:x}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",m&&n!==Kf&&(b=n.relatedTarget||n.fromElement)&&(Ci(b)||b[wr]))break e;if((v||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,v?(b=n.relatedTarget||n.toElement,v=d,b=b?Ci(b):null,b!==null&&(P=qi(b),b!==P||b.tag!==5&&b.tag!==6)&&(b=null)):(v=null,b=d),v!==b)){if(x=xy,R="onMouseLeave",S="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(x=Ey,R="onPointerLeave",S="onPointerEnter",k="pointer"),P=v==null?m:mo(v),_=b==null?m:mo(b),m=new x(R,k+"leave",v,n,f),m.target=P,m.relatedTarget=_,R=null,Ci(f)===d&&(x=new x(S,k+"enter",b,n,f),x.target=_,x.relatedTarget=P,R=x),P=R,v&&b)t:{for(x=v,S=b,k=0,_=x;_;_=ro(_))k++;for(_=0,R=S;R;R=ro(R))_++;for(;0<k-_;)x=ro(x),k--;for(;0<_-k;)S=ro(S),_--;for(;k--;){if(x===S||S!==null&&x===S.alternate)break t;x=ro(x),S=ro(S)}x=null}else x=null;v!==null&&Ry(p,m,v,x,!1),b!==null&&P!==null&&Ry(p,P,b,x,!0)}}e:{if(m=d?mo(d):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var K=Gx;else if(Oy(m))if(K0)K=Xx;else{K=Qx;var B=Yx}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(K=Jx);if(K&&(K=K(e,d))){B0(p,K,n,f);break e}B&&B(e,m,d),e==="focusout"&&(B=m._wrapperState)&&B.controlled&&m.type==="number"&&Uf(m,"number",m.value)}switch(B=d?mo(d):window,e){case"focusin":(Oy(B)||B.contentEditable==="true")&&(ho=B,Qf=d,Ws=null);break;case"focusout":Ws=Qf=ho=null;break;case"mousedown":Jf=!0;break;case"contextmenu":case"mouseup":case"dragend":Jf=!1,Ay(p,n,f);break;case"selectionchange":if(tS)break;case"keydown":case"keyup":Ay(p,n,f)}var q;if(_p)e:{switch(e){case"compositionstart":var H="onCompositionStart";break e;case"compositionend":H="onCompositionEnd";break e;case"compositionupdate":H="onCompositionUpdate";break e}H=void 0}else fo?z0(e,n)&&(H="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(H="onCompositionStart");H&&($0&&n.locale!=="ko"&&(fo||H!=="onCompositionStart"?H==="onCompositionEnd"&&fo&&(q=U0()):(Br=f,wp="value"in Br?Br.value:Br.textContent,fo=!0)),B=Lu(d,H),0<B.length&&(H=new Sy(H,e,null,n,f),p.push({event:H,listeners:B}),q?H.data=q:(q=F0(n),q!==null&&(H.data=q)))),(q=Kx?Vx(e,n):Wx(e,n))&&(d=Lu(d,"onBeforeInput"),0<d.length&&(f=new Sy("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=q))}Z0(p,t)})}function yl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Lu(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=ul(e,n),o!=null&&r.unshift(yl(e,o,i)),o=ul(e,t),o!=null&&r.push(yl(e,o,i))),e=e.return}return r}function ro(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ry(e,t,n,r,i){for(var o=t._reactName,s=[];n!==null&&n!==r;){var a=n,c=a.alternate,d=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&d!==null&&(a=d,i?(c=ul(n,o),c!=null&&s.unshift(yl(n,c,a))):i||(c=ul(n,o),c!=null&&s.push(yl(n,c,a)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var oS=/\r\n?/g,sS=/\u0000|\uFFFD/g;function My(e){return(typeof e=="string"?e:""+e).replace(oS,`
`).replace(sS,"")}function Ka(e,t,n){if(t=My(t),My(e)!==t&&n)throw Error(J(425))}function Ru(){}var Xf=null,Zf=null;function eh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var th=typeof setTimeout=="function"?setTimeout:void 0,lS=typeof clearTimeout=="function"?clearTimeout:void 0,Uy=typeof Promise=="function"?Promise:void 0,aS=typeof queueMicrotask=="function"?queueMicrotask:typeof Uy<"u"?function(e){return Uy.resolve(null).then(e).catch(uS)}:th;function uS(e){setTimeout(function(){throw e})}function Xd(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),fl(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);fl(t)}function Yr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function $y(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Zo=Math.random().toString(36).slice(2),Gn="__reactFiber$"+Zo,gl="__reactProps$"+Zo,wr="__reactContainer$"+Zo,nh="__reactEvents$"+Zo,cS="__reactListeners$"+Zo,dS="__reactHandles$"+Zo;function Ci(e){var t=e[Gn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[wr]||n[Gn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=$y(e);e!==null;){if(n=e[Gn])return n;e=$y(e)}return t}e=n,n=e.parentNode}return null}function ql(e){return e=e[Gn]||e[wr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function mo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(J(33))}function Cc(e){return e[gl]||null}var rh=[],yo=-1;function ui(e){return{current:e}}function nt(e){0>yo||(e.current=rh[yo],rh[yo]=null,yo--)}function Ze(e,t){yo++,rh[yo]=e.current,e.current=t}var ii={},Ht=ui(ii),tn=ui(!1),Ri=ii;function Ro(e,t){var n=e.type.contextTypes;if(!n)return ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function nn(e){return e=e.childContextTypes,e!=null}function Mu(){nt(tn),nt(Ht)}function zy(e,t,n){if(Ht.current!==ii)throw Error(J(168));Ze(Ht,t),Ze(tn,n)}function tw(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(J(108,Y_(e)||"Unknown",i));return at({},n,r)}function Uu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ii,Ri=Ht.current,Ze(Ht,e),Ze(tn,tn.current),!0}function Fy(e,t,n){var r=e.stateNode;if(!r)throw Error(J(169));n?(e=tw(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,nt(tn),nt(Ht),Ze(Ht,e)):nt(tn),Ze(tn,n)}var dr=null,Ic=!1,Zd=!1;function nw(e){dr===null?dr=[e]:dr.push(e)}function fS(e){Ic=!0,nw(e)}function ci(){if(!Zd&&dr!==null){Zd=!0;var e=0,t=He;try{var n=dr;for(He=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}dr=null,Ic=!1}catch(i){throw dr!==null&&(dr=dr.slice(e+1)),I0(mp,ci),i}finally{He=t,Zd=!1}}return null}var go=[],vo=0,$u=null,zu=0,xn=[],Sn=0,Mi=null,fr=1,hr="";function xi(e,t){go[vo++]=zu,go[vo++]=$u,$u=e,zu=t}function rw(e,t,n){xn[Sn++]=fr,xn[Sn++]=hr,xn[Sn++]=Mi,Mi=e;var r=fr;e=hr;var i=32-Mn(r)-1;r&=~(1<<i),n+=1;var o=32-Mn(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,fr=1<<32-Mn(t)+i|n<<i|r,hr=o+e}else fr=1<<o|n<<i|r,hr=e}function Sp(e){e.return!==null&&(xi(e,1),rw(e,1,0))}function Ep(e){for(;e===$u;)$u=go[--vo],go[vo]=null,zu=go[--vo],go[vo]=null;for(;e===Mi;)Mi=xn[--Sn],xn[Sn]=null,hr=xn[--Sn],xn[Sn]=null,fr=xn[--Sn],xn[Sn]=null}var fn=null,dn=null,ot=!1,Ln=null;function iw(e,t){var n=In(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function By(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,fn=e,dn=Yr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,fn=e,dn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Mi!==null?{id:fr,overflow:hr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=In(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,fn=e,dn=null,!0):!1;default:return!1}}function ih(e){return(e.mode&1)!==0&&(e.flags&128)===0}function oh(e){if(ot){var t=dn;if(t){var n=t;if(!By(e,t)){if(ih(e))throw Error(J(418));t=Yr(n.nextSibling);var r=fn;t&&By(e,t)?iw(r,n):(e.flags=e.flags&-4097|2,ot=!1,fn=e)}}else{if(ih(e))throw Error(J(418));e.flags=e.flags&-4097|2,ot=!1,fn=e}}}function Ky(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;fn=e}function Va(e){if(e!==fn)return!1;if(!ot)return Ky(e),ot=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!eh(e.type,e.memoizedProps)),t&&(t=dn)){if(ih(e))throw ow(),Error(J(418));for(;t;)iw(e,t),t=Yr(t.nextSibling)}if(Ky(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(J(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){dn=Yr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}dn=null}}else dn=fn?Yr(e.stateNode.nextSibling):null;return!0}function ow(){for(var e=dn;e;)e=Yr(e.nextSibling)}function Mo(){dn=fn=null,ot=!1}function Cp(e){Ln===null?Ln=[e]:Ln.push(e)}var hS=xr.ReactCurrentBatchConfig;function Is(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},t._stringRef=o,t)}if(typeof e!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,e))}return e}function Wa(e,t){throw e=Object.prototype.toString.call(t),Error(J(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Vy(e){var t=e._init;return t(e._payload)}function sw(e){function t(S,k){if(e){var _=S.deletions;_===null?(S.deletions=[k],S.flags|=16):_.push(k)}}function n(S,k){if(!e)return null;for(;k!==null;)t(S,k),k=k.sibling;return null}function r(S,k){for(S=new Map;k!==null;)k.key!==null?S.set(k.key,k):S.set(k.index,k),k=k.sibling;return S}function i(S,k){return S=Zr(S,k),S.index=0,S.sibling=null,S}function o(S,k,_){return S.index=_,e?(_=S.alternate,_!==null?(_=_.index,_<k?(S.flags|=2,k):_):(S.flags|=2,k)):(S.flags|=1048576,k)}function s(S){return e&&S.alternate===null&&(S.flags|=2),S}function a(S,k,_,R){return k===null||k.tag!==6?(k=lf(_,S.mode,R),k.return=S,k):(k=i(k,_),k.return=S,k)}function c(S,k,_,R){var K=_.type;return K===co?f(S,k,_.props.children,R,_.key):k!==null&&(k.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===Ur&&Vy(K)===k.type)?(R=i(k,_.props),R.ref=Is(S,k,_),R.return=S,R):(R=vu(_.type,_.key,_.props,null,S.mode,R),R.ref=Is(S,k,_),R.return=S,R)}function d(S,k,_,R){return k===null||k.tag!==4||k.stateNode.containerInfo!==_.containerInfo||k.stateNode.implementation!==_.implementation?(k=af(_,S.mode,R),k.return=S,k):(k=i(k,_.children||[]),k.return=S,k)}function f(S,k,_,R,K){return k===null||k.tag!==7?(k=Pi(_,S.mode,R,K),k.return=S,k):(k=i(k,_),k.return=S,k)}function p(S,k,_){if(typeof k=="string"&&k!==""||typeof k=="number")return k=lf(""+k,S.mode,_),k.return=S,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Da:return _=vu(k.type,k.key,k.props,null,S.mode,_),_.ref=Is(S,null,k),_.return=S,_;case uo:return k=af(k,S.mode,_),k.return=S,k;case Ur:var R=k._init;return p(S,R(k._payload),_)}if(Ms(k)||_s(k))return k=Pi(k,S.mode,_,null),k.return=S,k;Wa(S,k)}return null}function m(S,k,_,R){var K=k!==null?k.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return K!==null?null:a(S,k,""+_,R);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Da:return _.key===K?c(S,k,_,R):null;case uo:return _.key===K?d(S,k,_,R):null;case Ur:return K=_._init,m(S,k,K(_._payload),R)}if(Ms(_)||_s(_))return K!==null?null:f(S,k,_,R,null);Wa(S,_)}return null}function v(S,k,_,R,K){if(typeof R=="string"&&R!==""||typeof R=="number")return S=S.get(_)||null,a(k,S,""+R,K);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Da:return S=S.get(R.key===null?_:R.key)||null,c(k,S,R,K);case uo:return S=S.get(R.key===null?_:R.key)||null,d(k,S,R,K);case Ur:var B=R._init;return v(S,k,_,B(R._payload),K)}if(Ms(R)||_s(R))return S=S.get(_)||null,f(k,S,R,K,null);Wa(k,R)}return null}function b(S,k,_,R){for(var K=null,B=null,q=k,H=k=0,ie=null;q!==null&&H<_.length;H++){q.index>H?(ie=q,q=null):ie=q.sibling;var fe=m(S,q,_[H],R);if(fe===null){q===null&&(q=ie);break}e&&q&&fe.alternate===null&&t(S,q),k=o(fe,k,H),B===null?K=fe:B.sibling=fe,B=fe,q=ie}if(H===_.length)return n(S,q),ot&&xi(S,H),K;if(q===null){for(;H<_.length;H++)q=p(S,_[H],R),q!==null&&(k=o(q,k,H),B===null?K=q:B.sibling=q,B=q);return ot&&xi(S,H),K}for(q=r(S,q);H<_.length;H++)ie=v(q,S,H,_[H],R),ie!==null&&(e&&ie.alternate!==null&&q.delete(ie.key===null?H:ie.key),k=o(ie,k,H),B===null?K=ie:B.sibling=ie,B=ie);return e&&q.forEach(function(Y){return t(S,Y)}),ot&&xi(S,H),K}function x(S,k,_,R){var K=_s(_);if(typeof K!="function")throw Error(J(150));if(_=K.call(_),_==null)throw Error(J(151));for(var B=K=null,q=k,H=k=0,ie=null,fe=_.next();q!==null&&!fe.done;H++,fe=_.next()){q.index>H?(ie=q,q=null):ie=q.sibling;var Y=m(S,q,fe.value,R);if(Y===null){q===null&&(q=ie);break}e&&q&&Y.alternate===null&&t(S,q),k=o(Y,k,H),B===null?K=Y:B.sibling=Y,B=Y,q=ie}if(fe.done)return n(S,q),ot&&xi(S,H),K;if(q===null){for(;!fe.done;H++,fe=_.next())fe=p(S,fe.value,R),fe!==null&&(k=o(fe,k,H),B===null?K=fe:B.sibling=fe,B=fe);return ot&&xi(S,H),K}for(q=r(S,q);!fe.done;H++,fe=_.next())fe=v(q,S,H,fe.value,R),fe!==null&&(e&&fe.alternate!==null&&q.delete(fe.key===null?H:fe.key),k=o(fe,k,H),B===null?K=fe:B.sibling=fe,B=fe);return e&&q.forEach(function(ve){return t(S,ve)}),ot&&xi(S,H),K}function P(S,k,_,R){if(typeof _=="object"&&_!==null&&_.type===co&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Da:e:{for(var K=_.key,B=k;B!==null;){if(B.key===K){if(K=_.type,K===co){if(B.tag===7){n(S,B.sibling),k=i(B,_.props.children),k.return=S,S=k;break e}}else if(B.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===Ur&&Vy(K)===B.type){n(S,B.sibling),k=i(B,_.props),k.ref=Is(S,B,_),k.return=S,S=k;break e}n(S,B);break}else t(S,B);B=B.sibling}_.type===co?(k=Pi(_.props.children,S.mode,R,_.key),k.return=S,S=k):(R=vu(_.type,_.key,_.props,null,S.mode,R),R.ref=Is(S,k,_),R.return=S,S=R)}return s(S);case uo:e:{for(B=_.key;k!==null;){if(k.key===B)if(k.tag===4&&k.stateNode.containerInfo===_.containerInfo&&k.stateNode.implementation===_.implementation){n(S,k.sibling),k=i(k,_.children||[]),k.return=S,S=k;break e}else{n(S,k);break}else t(S,k);k=k.sibling}k=af(_,S.mode,R),k.return=S,S=k}return s(S);case Ur:return B=_._init,P(S,k,B(_._payload),R)}if(Ms(_))return b(S,k,_,R);if(_s(_))return x(S,k,_,R);Wa(S,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,k!==null&&k.tag===6?(n(S,k.sibling),k=i(k,_),k.return=S,S=k):(n(S,k),k=lf(_,S.mode,R),k.return=S,S=k),s(S)):n(S,k)}return P}var Uo=sw(!0),lw=sw(!1),Fu=ui(null),Bu=null,wo=null,Ip=null;function Op(){Ip=wo=Bu=null}function jp(e){var t=Fu.current;nt(Fu),e._currentValue=t}function sh(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Oo(e,t){Bu=e,Ip=wo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Zt=!0),e.firstContext=null)}function Tn(e){var t=e._currentValue;if(Ip!==e)if(e={context:e,memoizedValue:t,next:null},wo===null){if(Bu===null)throw Error(J(308));wo=e,Bu.dependencies={lanes:0,firstContext:e}}else wo=wo.next=e;return t}var Ii=null;function Tp(e){Ii===null?Ii=[e]:Ii.push(e)}function aw(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Tp(t)):(n.next=i.next,i.next=n),t.interleaved=n,br(e,r)}function br(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var $r=!1;function Np(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uw(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Qr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ze&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,br(e,n)}return i=r.interleaved,i===null?(t.next=t,Tp(r)):(t.next=i.next,i.next=t),r.interleaved=t,br(e,n)}function fu(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,yp(e,n)}}function Wy(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ku(e,t,n,r){var i=e.updateQueue;$r=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,d=c.next;c.next=null,s===null?o=d:s.next=d,s=c;var f=e.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==s&&(a===null?f.firstBaseUpdate=d:a.next=d,f.lastBaseUpdate=c))}if(o!==null){var p=i.baseState;s=0,f=d=c=null,a=o;do{var m=a.lane,v=a.eventTime;if((r&m)===m){f!==null&&(f=f.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var b=e,x=a;switch(m=t,v=n,x.tag){case 1:if(b=x.payload,typeof b=="function"){p=b.call(v,p,m);break e}p=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=x.payload,m=typeof b=="function"?b.call(v,p,m):b,m==null)break e;p=at({},p,m);break e;case 2:$r=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else v={eventTime:v,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(d=f=v,c=p):f=f.next=v,s|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(f===null&&(c=p),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=f,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);$i|=s,e.lanes=s,e.memoizedState=p}}function Hy(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(J(191,i));i.call(r)}}}var Gl={},Xn=ui(Gl),vl=ui(Gl),wl=ui(Gl);function Oi(e){if(e===Gl)throw Error(J(174));return e}function Pp(e,t){switch(Ze(wl,t),Ze(vl,e),Ze(Xn,Gl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:zf(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=zf(t,e)}nt(Xn),Ze(Xn,t)}function $o(){nt(Xn),nt(vl),nt(wl)}function cw(e){Oi(wl.current);var t=Oi(Xn.current),n=zf(t,e.type);t!==n&&(Ze(vl,e),Ze(Xn,n))}function Ap(e){vl.current===e&&(nt(Xn),nt(vl))}var st=ui(0);function Vu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ef=[];function Dp(){for(var e=0;e<ef.length;e++)ef[e]._workInProgressVersionPrimary=null;ef.length=0}var hu=xr.ReactCurrentDispatcher,tf=xr.ReactCurrentBatchConfig,Ui=0,lt=null,vt=null,Ot=null,Wu=!1,Hs=!1,bl=0,pS=0;function zt(){throw Error(J(321))}function Lp(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!$n(e[n],t[n]))return!1;return!0}function Rp(e,t,n,r,i,o){if(Ui=o,lt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,hu.current=e===null||e.memoizedState===null?vS:wS,e=n(r,i),Hs){o=0;do{if(Hs=!1,bl=0,25<=o)throw Error(J(301));o+=1,Ot=vt=null,t.updateQueue=null,hu.current=bS,e=n(r,i)}while(Hs)}if(hu.current=Hu,t=vt!==null&&vt.next!==null,Ui=0,Ot=vt=lt=null,Wu=!1,t)throw Error(J(300));return e}function Mp(){var e=bl!==0;return bl=0,e}function Hn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?lt.memoizedState=Ot=e:Ot=Ot.next=e,Ot}function Nn(){if(vt===null){var e=lt.alternate;e=e!==null?e.memoizedState:null}else e=vt.next;var t=Ot===null?lt.memoizedState:Ot.next;if(t!==null)Ot=t,vt=e;else{if(e===null)throw Error(J(310));vt=e,e={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},Ot===null?lt.memoizedState=Ot=e:Ot=Ot.next=e}return Ot}function kl(e,t){return typeof t=="function"?t(e):t}function nf(e){var t=Nn(),n=t.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=e;var r=vt,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,c=null,d=o;do{var f=d.lane;if((Ui&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(a=c=p,s=r):c=c.next=p,lt.lanes|=f,$i|=f}d=d.next}while(d!==null&&d!==o);c===null?s=r:c.next=a,$n(r,t.memoizedState)||(Zt=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,lt.lanes|=o,$i|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function rf(e){var t=Nn(),n=t.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=e(o,s.action),s=s.next;while(s!==i);$n(o,t.memoizedState)||(Zt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function dw(){}function fw(e,t){var n=lt,r=Nn(),i=t(),o=!$n(r.memoizedState,i);if(o&&(r.memoizedState=i,Zt=!0),r=r.queue,Up(mw.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Ot!==null&&Ot.memoizedState.tag&1){if(n.flags|=2048,_l(9,pw.bind(null,n,r,i,t),void 0,null),Tt===null)throw Error(J(349));Ui&30||hw(n,t,i)}return i}function hw(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=lt.updateQueue,t===null?(t={lastEffect:null,stores:null},lt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function pw(e,t,n,r){t.value=n,t.getSnapshot=r,yw(t)&&gw(e)}function mw(e,t,n){return n(function(){yw(t)&&gw(e)})}function yw(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!$n(e,n)}catch{return!0}}function gw(e){var t=br(e,1);t!==null&&Un(t,e,1,-1)}function qy(e){var t=Hn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kl,lastRenderedState:e},t.queue=e,e=e.dispatch=gS.bind(null,lt,e),[t.memoizedState,e]}function _l(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=lt.updateQueue,t===null?(t={lastEffect:null,stores:null},lt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function vw(){return Nn().memoizedState}function pu(e,t,n,r){var i=Hn();lt.flags|=e,i.memoizedState=_l(1|t,n,void 0,r===void 0?null:r)}function Oc(e,t,n,r){var i=Nn();r=r===void 0?null:r;var o=void 0;if(vt!==null){var s=vt.memoizedState;if(o=s.destroy,r!==null&&Lp(r,s.deps)){i.memoizedState=_l(t,n,o,r);return}}lt.flags|=e,i.memoizedState=_l(1|t,n,o,r)}function Gy(e,t){return pu(8390656,8,e,t)}function Up(e,t){return Oc(2048,8,e,t)}function ww(e,t){return Oc(4,2,e,t)}function bw(e,t){return Oc(4,4,e,t)}function kw(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _w(e,t,n){return n=n!=null?n.concat([e]):null,Oc(4,4,kw.bind(null,t,e),n)}function $p(){}function xw(e,t){var n=Nn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Lp(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Sw(e,t){var n=Nn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Lp(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ew(e,t,n){return Ui&21?($n(n,t)||(n=T0(),lt.lanes|=n,$i|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Zt=!0),e.memoizedState=n)}function mS(e,t){var n=He;He=n!==0&&4>n?n:4,e(!0);var r=tf.transition;tf.transition={};try{e(!1),t()}finally{He=n,tf.transition=r}}function Cw(){return Nn().memoizedState}function yS(e,t,n){var r=Xr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Iw(e))Ow(t,n);else if(n=aw(e,t,n,r),n!==null){var i=Yt();Un(n,e,r,i),jw(n,t,r)}}function gS(e,t,n){var r=Xr(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Iw(e))Ow(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,$n(a,s)){var c=t.interleaved;c===null?(i.next=i,Tp(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=aw(e,t,i,r),n!==null&&(i=Yt(),Un(n,e,r,i),jw(n,t,r))}}function Iw(e){var t=e.alternate;return e===lt||t!==null&&t===lt}function Ow(e,t){Hs=Wu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function jw(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,yp(e,n)}}var Hu={readContext:Tn,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useInsertionEffect:zt,useLayoutEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useMutableSource:zt,useSyncExternalStore:zt,useId:zt,unstable_isNewReconciler:!1},vS={readContext:Tn,useCallback:function(e,t){return Hn().memoizedState=[e,t===void 0?null:t],e},useContext:Tn,useEffect:Gy,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,pu(4194308,4,kw.bind(null,t,e),n)},useLayoutEffect:function(e,t){return pu(4194308,4,e,t)},useInsertionEffect:function(e,t){return pu(4,2,e,t)},useMemo:function(e,t){var n=Hn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Hn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=yS.bind(null,lt,e),[r.memoizedState,e]},useRef:function(e){var t=Hn();return e={current:e},t.memoizedState=e},useState:qy,useDebugValue:$p,useDeferredValue:function(e){return Hn().memoizedState=e},useTransition:function(){var e=qy(!1),t=e[0];return e=mS.bind(null,e[1]),Hn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=lt,i=Hn();if(ot){if(n===void 0)throw Error(J(407));n=n()}else{if(n=t(),Tt===null)throw Error(J(349));Ui&30||hw(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Gy(mw.bind(null,r,o,e),[e]),r.flags|=2048,_l(9,pw.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Hn(),t=Tt.identifierPrefix;if(ot){var n=hr,r=fr;n=(r&~(1<<32-Mn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=bl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=pS++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},wS={readContext:Tn,useCallback:xw,useContext:Tn,useEffect:Up,useImperativeHandle:_w,useInsertionEffect:ww,useLayoutEffect:bw,useMemo:Sw,useReducer:nf,useRef:vw,useState:function(){return nf(kl)},useDebugValue:$p,useDeferredValue:function(e){var t=Nn();return Ew(t,vt.memoizedState,e)},useTransition:function(){var e=nf(kl)[0],t=Nn().memoizedState;return[e,t]},useMutableSource:dw,useSyncExternalStore:fw,useId:Cw,unstable_isNewReconciler:!1},bS={readContext:Tn,useCallback:xw,useContext:Tn,useEffect:Up,useImperativeHandle:_w,useInsertionEffect:ww,useLayoutEffect:bw,useMemo:Sw,useReducer:rf,useRef:vw,useState:function(){return rf(kl)},useDebugValue:$p,useDeferredValue:function(e){var t=Nn();return vt===null?t.memoizedState=e:Ew(t,vt.memoizedState,e)},useTransition:function(){var e=rf(kl)[0],t=Nn().memoizedState;return[e,t]},useMutableSource:dw,useSyncExternalStore:fw,useId:Cw,unstable_isNewReconciler:!1};function An(e,t){if(e&&e.defaultProps){t=at({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function lh(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:at({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var jc={isMounted:function(e){return(e=e._reactInternals)?qi(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Yt(),i=Xr(e),o=mr(r,i);o.payload=t,n!=null&&(o.callback=n),t=Qr(e,o,i),t!==null&&(Un(t,e,i,r),fu(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Yt(),i=Xr(e),o=mr(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Qr(e,o,i),t!==null&&(Un(t,e,i,r),fu(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Yt(),r=Xr(e),i=mr(n,r);i.tag=2,t!=null&&(i.callback=t),t=Qr(e,i,r),t!==null&&(Un(t,e,r,n),fu(t,e,r))}};function Yy(e,t,n,r,i,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,s):t.prototype&&t.prototype.isPureReactComponent?!pl(n,r)||!pl(i,o):!0}function Tw(e,t,n){var r=!1,i=ii,o=t.contextType;return typeof o=="object"&&o!==null?o=Tn(o):(i=nn(t)?Ri:Ht.current,r=t.contextTypes,o=(r=r!=null)?Ro(e,i):ii),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=jc,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Qy(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&jc.enqueueReplaceState(t,t.state,null)}function ah(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Np(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=Tn(o):(o=nn(t)?Ri:Ht.current,i.context=Ro(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(lh(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&jc.enqueueReplaceState(i,i.state,null),Ku(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function zo(e,t){try{var n="",r=t;do n+=G_(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function of(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function uh(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var kS=typeof WeakMap=="function"?WeakMap:Map;function Nw(e,t,n){n=mr(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gu||(Gu=!0,wh=r),uh(e,t)},n}function Pw(e,t,n){n=mr(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uh(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){uh(e,t),typeof r!="function"&&(Jr===null?Jr=new Set([this]):Jr.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function Jy(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new kS;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=LS.bind(null,e,t,n),t.then(e,e))}function Xy(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Zy(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=mr(-1,1),t.tag=2,Qr(n,t,1))),n.lanes|=1),e)}var _S=xr.ReactCurrentOwner,Zt=!1;function Gt(e,t,n,r){t.child=e===null?lw(t,null,n,r):Uo(t,e.child,n,r)}function eg(e,t,n,r,i){n=n.render;var o=t.ref;return Oo(t,i),r=Rp(e,t,n,r,o,i),n=Mp(),e!==null&&!Zt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,kr(e,t,i)):(ot&&n&&Sp(t),t.flags|=1,Gt(e,t,r,i),t.child)}function tg(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!qp(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,Aw(e,t,o,r,i)):(e=vu(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:pl,n(s,r)&&e.ref===t.ref)return kr(e,t,i)}return t.flags|=1,e=Zr(o,r),e.ref=t.ref,e.return=t,t.child=e}function Aw(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(pl(o,r)&&e.ref===t.ref)if(Zt=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(Zt=!0);else return t.lanes=e.lanes,kr(e,t,i)}return ch(e,t,n,r,i)}function Dw(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(ko,un),un|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ze(ko,un),un|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ze(ko,un),un|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ze(ko,un),un|=r;return Gt(e,t,i,n),t.child}function Lw(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ch(e,t,n,r,i){var o=nn(n)?Ri:Ht.current;return o=Ro(t,o),Oo(t,i),n=Rp(e,t,n,r,o,i),r=Mp(),e!==null&&!Zt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,kr(e,t,i)):(ot&&r&&Sp(t),t.flags|=1,Gt(e,t,n,i),t.child)}function ng(e,t,n,r,i){if(nn(n)){var o=!0;Uu(t)}else o=!1;if(Oo(t,i),t.stateNode===null)mu(e,t),Tw(t,n,r),ah(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var c=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=Tn(d):(d=nn(n)?Ri:Ht.current,d=Ro(t,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||c!==d)&&Qy(t,s,r,d),$r=!1;var m=t.memoizedState;s.state=m,Ku(t,r,s,i),c=t.memoizedState,a!==r||m!==c||tn.current||$r?(typeof f=="function"&&(lh(t,n,f,r),c=t.memoizedState),(a=$r||Yy(t,n,a,r,m,c,d))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=d,r=a):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,uw(e,t),a=t.memoizedProps,d=t.type===t.elementType?a:An(t.type,a),s.props=d,p=t.pendingProps,m=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=Tn(c):(c=nn(n)?Ri:Ht.current,c=Ro(t,c));var v=n.getDerivedStateFromProps;(f=typeof v=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==p||m!==c)&&Qy(t,s,r,c),$r=!1,m=t.memoizedState,s.state=m,Ku(t,r,s,i);var b=t.memoizedState;a!==p||m!==b||tn.current||$r?(typeof v=="function"&&(lh(t,n,v,r),b=t.memoizedState),(d=$r||Yy(t,n,d,r,m,b,c)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,b,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,b,c)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=b),s.props=r,s.state=b,s.context=c,r=d):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return dh(e,t,n,r,o,i)}function dh(e,t,n,r,i,o){Lw(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&Fy(t,n,!1),kr(e,t,o);r=t.stateNode,_S.current=t;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=Uo(t,e.child,null,o),t.child=Uo(t,null,a,o)):Gt(e,t,a,o),t.memoizedState=r.state,i&&Fy(t,n,!0),t.child}function Rw(e){var t=e.stateNode;t.pendingContext?zy(e,t.pendingContext,t.pendingContext!==t.context):t.context&&zy(e,t.context,!1),Pp(e,t.containerInfo)}function rg(e,t,n,r,i){return Mo(),Cp(i),t.flags|=256,Gt(e,t,n,r),t.child}var fh={dehydrated:null,treeContext:null,retryLane:0};function hh(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mw(e,t,n){var r=t.pendingProps,i=st.current,o=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Ze(st,i&1),e===null)return oh(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,o?(r=t.mode,o=t.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Pc(s,r,0,null),e=Pi(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=hh(n),t.memoizedState=fh,e):zp(t,s));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return xS(e,t,s,r,a,i,n);if(o){o=r.fallback,s=t.mode,i=e.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Zr(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=Zr(a,o):(o=Pi(o,s,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,s=e.child.memoizedState,s=s===null?hh(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=e.childLanes&~n,t.memoizedState=fh,r}return o=e.child,e=o.sibling,r=Zr(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function zp(e,t){return t=Pc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ha(e,t,n,r){return r!==null&&Cp(r),Uo(t,e.child,null,n),e=zp(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function xS(e,t,n,r,i,o,s){if(n)return t.flags&256?(t.flags&=-257,r=of(Error(J(422))),Ha(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Pc({mode:"visible",children:r.children},i,0,null),o=Pi(o,i,s,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Uo(t,e.child,null,s),t.child.memoizedState=hh(s),t.memoizedState=fh,o);if(!(t.mode&1))return Ha(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(J(419)),r=of(o,r,void 0),Ha(e,t,s,r)}if(a=(s&e.childLanes)!==0,Zt||a){if(r=Tt,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,br(e,i),Un(r,e,i,-1))}return Hp(),r=of(Error(J(421))),Ha(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=RS.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,dn=Yr(i.nextSibling),fn=t,ot=!0,Ln=null,e!==null&&(xn[Sn++]=fr,xn[Sn++]=hr,xn[Sn++]=Mi,fr=e.id,hr=e.overflow,Mi=t),t=zp(t,r.children),t.flags|=4096,t)}function ig(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),sh(e.return,t,n)}function sf(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Uw(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Gt(e,t,r.children,n),r=st.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ig(e,n,t);else if(e.tag===19)ig(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ze(st,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Vu(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),sf(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Vu(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}sf(t,!0,n,null,o);break;case"together":sf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function mu(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function kr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),$i|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(J(153));if(t.child!==null){for(e=t.child,n=Zr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Zr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function SS(e,t,n){switch(t.tag){case 3:Rw(t),Mo();break;case 5:cw(t);break;case 1:nn(t.type)&&Uu(t);break;case 4:Pp(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ze(Fu,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ze(st,st.current&1),t.flags|=128,null):n&t.child.childLanes?Mw(e,t,n):(Ze(st,st.current&1),e=kr(e,t,n),e!==null?e.sibling:null);Ze(st,st.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Uw(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ze(st,st.current),r)break;return null;case 22:case 23:return t.lanes=0,Dw(e,t,n)}return kr(e,t,n)}var $w,ph,zw,Fw;$w=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ph=function(){};zw=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Oi(Xn.current);var o=null;switch(n){case"input":i=Rf(e,i),r=Rf(e,r),o=[];break;case"select":i=at({},i,{value:void 0}),r=at({},r,{value:void 0}),o=[];break;case"textarea":i=$f(e,i),r=$f(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ru)}Ff(n,r);var s;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var a=i[d];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ll.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var c=r[d];if(a=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&c!==a&&(c!=null||a!=null))if(d==="style")if(a){for(s in a)!a.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&a[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ll.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&tt("scroll",e),o||a===c||(o=[])):(o=o||[]).push(d,c))}n&&(o=o||[]).push("style",n);var d=o;(t.updateQueue=d)&&(t.flags|=4)}};Fw=function(e,t,n,r){n!==r&&(t.flags|=4)};function Os(e,t){if(!ot)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ft(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ES(e,t,n){var r=t.pendingProps;switch(Ep(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(t),null;case 1:return nn(t.type)&&Mu(),Ft(t),null;case 3:return r=t.stateNode,$o(),nt(tn),nt(Ht),Dp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Va(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ln!==null&&(_h(Ln),Ln=null))),ph(e,t),Ft(t),null;case 5:Ap(t);var i=Oi(wl.current);if(n=t.type,e!==null&&t.stateNode!=null)zw(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(J(166));return Ft(t),null}if(e=Oi(Xn.current),Va(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Gn]=t,r[gl]=o,e=(t.mode&1)!==0,n){case"dialog":tt("cancel",r),tt("close",r);break;case"iframe":case"object":case"embed":tt("load",r);break;case"video":case"audio":for(i=0;i<$s.length;i++)tt($s[i],r);break;case"source":tt("error",r);break;case"img":case"image":case"link":tt("error",r),tt("load",r);break;case"details":tt("toggle",r);break;case"input":hy(r,o),tt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},tt("invalid",r);break;case"textarea":my(r,o),tt("invalid",r)}Ff(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&Ka(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Ka(r.textContent,a,e),i=["children",""+a]):ll.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&tt("scroll",r)}switch(n){case"input":La(r),py(r,o,!0);break;case"textarea":La(r),yy(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Ru)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=m0(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[Gn]=t,e[gl]=r,$w(e,t,!1,!1),t.stateNode=e;e:{switch(s=Bf(n,r),n){case"dialog":tt("cancel",e),tt("close",e),i=r;break;case"iframe":case"object":case"embed":tt("load",e),i=r;break;case"video":case"audio":for(i=0;i<$s.length;i++)tt($s[i],e);i=r;break;case"source":tt("error",e),i=r;break;case"img":case"image":case"link":tt("error",e),tt("load",e),i=r;break;case"details":tt("toggle",e),i=r;break;case"input":hy(e,r),i=Rf(e,r),tt("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=at({},r,{value:void 0}),tt("invalid",e);break;case"textarea":my(e,r),i=$f(e,r),tt("invalid",e);break;default:i=r}Ff(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="style"?v0(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&y0(e,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&al(e,c):typeof c=="number"&&al(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ll.hasOwnProperty(o)?c!=null&&o==="onScroll"&&tt("scroll",e):c!=null&&cp(e,o,c,s))}switch(n){case"input":La(e),py(e,r,!1);break;case"textarea":La(e),yy(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ri(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?So(e,!!r.multiple,o,!1):r.defaultValue!=null&&So(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Ru)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ft(t),null;case 6:if(e&&t.stateNode!=null)Fw(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(J(166));if(n=Oi(wl.current),Oi(Xn.current),Va(t)){if(r=t.stateNode,n=t.memoizedProps,r[Gn]=t,(o=r.nodeValue!==n)&&(e=fn,e!==null))switch(e.tag){case 3:Ka(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ka(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Gn]=t,t.stateNode=r}return Ft(t),null;case 13:if(nt(st),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ot&&dn!==null&&t.mode&1&&!(t.flags&128))ow(),Mo(),t.flags|=98560,o=!1;else if(o=Va(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(J(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(J(317));o[Gn]=t}else Mo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ft(t),o=!1}else Ln!==null&&(_h(Ln),Ln=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||st.current&1?bt===0&&(bt=3):Hp())),t.updateQueue!==null&&(t.flags|=4),Ft(t),null);case 4:return $o(),ph(e,t),e===null&&ml(t.stateNode.containerInfo),Ft(t),null;case 10:return jp(t.type._context),Ft(t),null;case 17:return nn(t.type)&&Mu(),Ft(t),null;case 19:if(nt(st),o=t.memoizedState,o===null)return Ft(t),null;if(r=(t.flags&128)!==0,s=o.rendering,s===null)if(r)Os(o,!1);else{if(bt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Vu(e),s!==null){for(t.flags|=128,Os(o,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ze(st,st.current&1|2),t.child}e=e.sibling}o.tail!==null&&pt()>Fo&&(t.flags|=128,r=!0,Os(o,!1),t.lanes=4194304)}else{if(!r)if(e=Vu(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Os(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!ot)return Ft(t),null}else 2*pt()-o.renderingStartTime>Fo&&n!==1073741824&&(t.flags|=128,r=!0,Os(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(n=o.last,n!==null?n.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=pt(),t.sibling=null,n=st.current,Ze(st,r?n&1|2:n&1),t):(Ft(t),null);case 22:case 23:return Wp(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?un&1073741824&&(Ft(t),t.subtreeFlags&6&&(t.flags|=8192)):Ft(t),null;case 24:return null;case 25:return null}throw Error(J(156,t.tag))}function CS(e,t){switch(Ep(t),t.tag){case 1:return nn(t.type)&&Mu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return $o(),nt(tn),nt(Ht),Dp(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ap(t),null;case 13:if(nt(st),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(J(340));Mo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return nt(st),null;case 4:return $o(),null;case 10:return jp(t.type._context),null;case 22:case 23:return Wp(),null;case 24:return null;default:return null}}var qa=!1,Kt=!1,IS=typeof WeakSet=="function"?WeakSet:Set,pe=null;function bo(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){dt(e,t,r)}else n.current=null}function mh(e,t,n){try{n()}catch(r){dt(e,t,r)}}var og=!1;function OS(e,t){if(Xf=Au,e=H0(),xp(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,c=-1,d=0,f=0,p=e,m=null;t:for(;;){for(var v;p!==n||i!==0&&p.nodeType!==3||(a=s+i),p!==o||r!==0&&p.nodeType!==3||(c=s+r),p.nodeType===3&&(s+=p.nodeValue.length),(v=p.firstChild)!==null;)m=p,p=v;for(;;){if(p===e)break t;if(m===n&&++d===i&&(a=s),m===o&&++f===r&&(c=s),(v=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=v}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zf={focusedElem:e,selectionRange:n},Au=!1,pe=t;pe!==null;)if(t=pe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,pe=e;else for(;pe!==null;){t=pe;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var x=b.memoizedProps,P=b.memoizedState,S=t.stateNode,k=S.getSnapshotBeforeUpdate(t.elementType===t.type?x:An(t.type,x),P);S.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(R){dt(t,t.return,R)}if(e=t.sibling,e!==null){e.return=t.return,pe=e;break}pe=t.return}return b=og,og=!1,b}function qs(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&mh(t,n,o)}i=i.next}while(i!==r)}}function Tc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function yh(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Bw(e){var t=e.alternate;t!==null&&(e.alternate=null,Bw(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Gn],delete t[gl],delete t[nh],delete t[cS],delete t[dS])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Kw(e){return e.tag===5||e.tag===3||e.tag===4}function sg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Kw(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function gh(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ru));else if(r!==4&&(e=e.child,e!==null))for(gh(e,t,n),e=e.sibling;e!==null;)gh(e,t,n),e=e.sibling}function vh(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(vh(e,t,n),e=e.sibling;e!==null;)vh(e,t,n),e=e.sibling}var Nt=null,Dn=!1;function Rr(e,t,n){for(n=n.child;n!==null;)Vw(e,t,n),n=n.sibling}function Vw(e,t,n){if(Jn&&typeof Jn.onCommitFiberUnmount=="function")try{Jn.onCommitFiberUnmount(_c,n)}catch{}switch(n.tag){case 5:Kt||bo(n,t);case 6:var r=Nt,i=Dn;Nt=null,Rr(e,t,n),Nt=r,Dn=i,Nt!==null&&(Dn?(e=Nt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Nt.removeChild(n.stateNode));break;case 18:Nt!==null&&(Dn?(e=Nt,n=n.stateNode,e.nodeType===8?Xd(e.parentNode,n):e.nodeType===1&&Xd(e,n),fl(e)):Xd(Nt,n.stateNode));break;case 4:r=Nt,i=Dn,Nt=n.stateNode.containerInfo,Dn=!0,Rr(e,t,n),Nt=r,Dn=i;break;case 0:case 11:case 14:case 15:if(!Kt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&mh(n,t,s),i=i.next}while(i!==r)}Rr(e,t,n);break;case 1:if(!Kt&&(bo(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){dt(n,t,a)}Rr(e,t,n);break;case 21:Rr(e,t,n);break;case 22:n.mode&1?(Kt=(r=Kt)||n.memoizedState!==null,Rr(e,t,n),Kt=r):Rr(e,t,n);break;default:Rr(e,t,n)}}function lg(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new IS),t.forEach(function(r){var i=MS.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Pn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 5:Nt=a.stateNode,Dn=!1;break e;case 3:Nt=a.stateNode.containerInfo,Dn=!0;break e;case 4:Nt=a.stateNode.containerInfo,Dn=!0;break e}a=a.return}if(Nt===null)throw Error(J(160));Vw(o,s,i),Nt=null,Dn=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){dt(i,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ww(t,e),t=t.sibling}function Ww(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Pn(t,e),Vn(e),r&4){try{qs(3,e,e.return),Tc(3,e)}catch(x){dt(e,e.return,x)}try{qs(5,e,e.return)}catch(x){dt(e,e.return,x)}}break;case 1:Pn(t,e),Vn(e),r&512&&n!==null&&bo(n,n.return);break;case 5:if(Pn(t,e),Vn(e),r&512&&n!==null&&bo(n,n.return),e.flags&32){var i=e.stateNode;try{al(i,"")}catch(x){dt(e,e.return,x)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,s=n!==null?n.memoizedProps:o,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&h0(i,o),Bf(a,s);var d=Bf(a,o);for(s=0;s<c.length;s+=2){var f=c[s],p=c[s+1];f==="style"?v0(i,p):f==="dangerouslySetInnerHTML"?y0(i,p):f==="children"?al(i,p):cp(i,f,p,d)}switch(a){case"input":Mf(i,o);break;case"textarea":p0(i,o);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var v=o.value;v!=null?So(i,!!o.multiple,v,!1):m!==!!o.multiple&&(o.defaultValue!=null?So(i,!!o.multiple,o.defaultValue,!0):So(i,!!o.multiple,o.multiple?[]:"",!1))}i[gl]=o}catch(x){dt(e,e.return,x)}}break;case 6:if(Pn(t,e),Vn(e),r&4){if(e.stateNode===null)throw Error(J(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(x){dt(e,e.return,x)}}break;case 3:if(Pn(t,e),Vn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{fl(t.containerInfo)}catch(x){dt(e,e.return,x)}break;case 4:Pn(t,e),Vn(e);break;case 13:Pn(t,e),Vn(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Kp=pt())),r&4&&lg(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(Kt=(d=Kt)||f,Pn(t,e),Kt=d):Pn(t,e),Vn(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!f&&e.mode&1)for(pe=e,f=e.child;f!==null;){for(p=pe=f;pe!==null;){switch(m=pe,v=m.child,m.tag){case 0:case 11:case 14:case 15:qs(4,m,m.return);break;case 1:bo(m,m.return);var b=m.stateNode;if(typeof b.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(x){dt(r,n,x)}}break;case 5:bo(m,m.return);break;case 22:if(m.memoizedState!==null){ug(p);continue}}v!==null?(v.return=m,pe=v):ug(p)}f=f.sibling}e:for(f=null,p=e;;){if(p.tag===5){if(f===null){f=p;try{i=p.stateNode,d?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=p.stateNode,c=p.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=g0("display",s))}catch(x){dt(e,e.return,x)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(x){dt(e,e.return,x)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Pn(t,e),Vn(e),r&4&&lg(e);break;case 21:break;default:Pn(t,e),Vn(e)}}function Vn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Kw(n)){var r=n;break e}n=n.return}throw Error(J(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(al(i,""),r.flags&=-33);var o=sg(e);vh(e,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=sg(e);gh(e,a,s);break;default:throw Error(J(161))}}catch(c){dt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function jS(e,t,n){pe=e,Hw(e)}function Hw(e,t,n){for(var r=(e.mode&1)!==0;pe!==null;){var i=pe,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||qa;if(!s){var a=i.alternate,c=a!==null&&a.memoizedState!==null||Kt;a=qa;var d=Kt;if(qa=s,(Kt=c)&&!d)for(pe=i;pe!==null;)s=pe,c=s.child,s.tag===22&&s.memoizedState!==null?cg(i):c!==null?(c.return=s,pe=c):cg(i);for(;o!==null;)pe=o,Hw(o),o=o.sibling;pe=i,qa=a,Kt=d}ag(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,pe=o):ag(e)}}function ag(e){for(;pe!==null;){var t=pe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Kt||Tc(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Kt)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:An(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Hy(t,o,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Hy(t,s,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&fl(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}Kt||t.flags&512&&yh(t)}catch(m){dt(t,t.return,m)}}if(t===e){pe=null;break}if(n=t.sibling,n!==null){n.return=t.return,pe=n;break}pe=t.return}}function ug(e){for(;pe!==null;){var t=pe;if(t===e){pe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,pe=n;break}pe=t.return}}function cg(e){for(;pe!==null;){var t=pe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Tc(4,t)}catch(c){dt(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(c){dt(t,i,c)}}var o=t.return;try{yh(t)}catch(c){dt(t,o,c)}break;case 5:var s=t.return;try{yh(t)}catch(c){dt(t,s,c)}}}catch(c){dt(t,t.return,c)}if(t===e){pe=null;break}var a=t.sibling;if(a!==null){a.return=t.return,pe=a;break}pe=t.return}}var TS=Math.ceil,qu=xr.ReactCurrentDispatcher,Fp=xr.ReactCurrentOwner,jn=xr.ReactCurrentBatchConfig,ze=0,Tt=null,mt=null,Dt=0,un=0,ko=ui(0),bt=0,xl=null,$i=0,Nc=0,Bp=0,Gs=null,Xt=null,Kp=0,Fo=1/0,cr=null,Gu=!1,wh=null,Jr=null,Ga=!1,Kr=null,Yu=0,Ys=0,bh=null,yu=-1,gu=0;function Yt(){return ze&6?pt():yu!==-1?yu:yu=pt()}function Xr(e){return e.mode&1?ze&2&&Dt!==0?Dt&-Dt:hS.transition!==null?(gu===0&&(gu=T0()),gu):(e=He,e!==0||(e=window.event,e=e===void 0?16:M0(e.type)),e):1}function Un(e,t,n,r){if(50<Ys)throw Ys=0,bh=null,Error(J(185));Wl(e,n,r),(!(ze&2)||e!==Tt)&&(e===Tt&&(!(ze&2)&&(Nc|=n),bt===4&&Fr(e,Dt)),rn(e,r),n===1&&ze===0&&!(t.mode&1)&&(Fo=pt()+500,Ic&&ci()))}function rn(e,t){var n=e.callbackNode;hx(e,t);var r=Pu(e,e===Tt?Dt:0);if(r===0)n!==null&&wy(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&wy(n),t===1)e.tag===0?fS(dg.bind(null,e)):nw(dg.bind(null,e)),aS(function(){!(ze&6)&&ci()}),n=null;else{switch(N0(r)){case 1:n=mp;break;case 4:n=O0;break;case 16:n=Nu;break;case 536870912:n=j0;break;default:n=Nu}n=eb(n,qw.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function qw(e,t){if(yu=-1,gu=0,ze&6)throw Error(J(327));var n=e.callbackNode;if(jo()&&e.callbackNode!==n)return null;var r=Pu(e,e===Tt?Dt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Qu(e,r);else{t=r;var i=ze;ze|=2;var o=Yw();(Tt!==e||Dt!==t)&&(cr=null,Fo=pt()+500,Ni(e,t));do try{AS();break}catch(a){Gw(e,a)}while(!0);Op(),qu.current=o,ze=i,mt!==null?t=0:(Tt=null,Dt=0,t=bt)}if(t!==0){if(t===2&&(i=qf(e),i!==0&&(r=i,t=kh(e,i))),t===1)throw n=xl,Ni(e,0),Fr(e,r),rn(e,pt()),n;if(t===6)Fr(e,r);else{if(i=e.current.alternate,!(r&30)&&!NS(i)&&(t=Qu(e,r),t===2&&(o=qf(e),o!==0&&(r=o,t=kh(e,o))),t===1))throw n=xl,Ni(e,0),Fr(e,r),rn(e,pt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(J(345));case 2:Si(e,Xt,cr);break;case 3:if(Fr(e,r),(r&130023424)===r&&(t=Kp+500-pt(),10<t)){if(Pu(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Yt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=th(Si.bind(null,e,Xt,cr),t);break}Si(e,Xt,cr);break;case 4:if(Fr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-Mn(r);o=1<<s,s=t[s],s>i&&(i=s),r&=~o}if(r=i,r=pt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*TS(r/1960))-r,10<r){e.timeoutHandle=th(Si.bind(null,e,Xt,cr),r);break}Si(e,Xt,cr);break;case 5:Si(e,Xt,cr);break;default:throw Error(J(329))}}}return rn(e,pt()),e.callbackNode===n?qw.bind(null,e):null}function kh(e,t){var n=Gs;return e.current.memoizedState.isDehydrated&&(Ni(e,t).flags|=256),e=Qu(e,t),e!==2&&(t=Xt,Xt=n,t!==null&&_h(t)),e}function _h(e){Xt===null?Xt=e:Xt.push.apply(Xt,e)}function NS(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!$n(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Fr(e,t){for(t&=~Bp,t&=~Nc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Mn(t),r=1<<n;e[n]=-1,t&=~r}}function dg(e){if(ze&6)throw Error(J(327));jo();var t=Pu(e,0);if(!(t&1))return rn(e,pt()),null;var n=Qu(e,t);if(e.tag!==0&&n===2){var r=qf(e);r!==0&&(t=r,n=kh(e,r))}if(n===1)throw n=xl,Ni(e,0),Fr(e,t),rn(e,pt()),n;if(n===6)throw Error(J(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Si(e,Xt,cr),rn(e,pt()),null}function Vp(e,t){var n=ze;ze|=1;try{return e(t)}finally{ze=n,ze===0&&(Fo=pt()+500,Ic&&ci())}}function zi(e){Kr!==null&&Kr.tag===0&&!(ze&6)&&jo();var t=ze;ze|=1;var n=jn.transition,r=He;try{if(jn.transition=null,He=1,e)return e()}finally{He=r,jn.transition=n,ze=t,!(ze&6)&&ci()}}function Wp(){un=ko.current,nt(ko)}function Ni(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,lS(n)),mt!==null)for(n=mt.return;n!==null;){var r=n;switch(Ep(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Mu();break;case 3:$o(),nt(tn),nt(Ht),Dp();break;case 5:Ap(r);break;case 4:$o();break;case 13:nt(st);break;case 19:nt(st);break;case 10:jp(r.type._context);break;case 22:case 23:Wp()}n=n.return}if(Tt=e,mt=e=Zr(e.current,null),Dt=un=t,bt=0,xl=null,Bp=Nc=$i=0,Xt=Gs=null,Ii!==null){for(t=0;t<Ii.length;t++)if(n=Ii[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Ii=null}return e}function Gw(e,t){do{var n=mt;try{if(Op(),hu.current=Hu,Wu){for(var r=lt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Wu=!1}if(Ui=0,Ot=vt=lt=null,Hs=!1,bl=0,Fp.current=null,n===null||n.return===null){bt=1,xl=t,mt=null;break}e:{var o=e,s=n.return,a=n,c=t;if(t=Dt,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=a,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=Xy(s);if(v!==null){v.flags&=-257,Zy(v,s,a,o,t),v.mode&1&&Jy(o,d,t),t=v,c=d;var b=t.updateQueue;if(b===null){var x=new Set;x.add(c),t.updateQueue=x}else b.add(c);break e}else{if(!(t&1)){Jy(o,d,t),Hp();break e}c=Error(J(426))}}else if(ot&&a.mode&1){var P=Xy(s);if(P!==null){!(P.flags&65536)&&(P.flags|=256),Zy(P,s,a,o,t),Cp(zo(c,a));break e}}o=c=zo(c,a),bt!==4&&(bt=2),Gs===null?Gs=[o]:Gs.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var S=Nw(o,c,t);Wy(o,S);break e;case 1:a=c;var k=o.type,_=o.stateNode;if(!(o.flags&128)&&(typeof k.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Jr===null||!Jr.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t;var R=Pw(o,a,t);Wy(o,R);break e}}o=o.return}while(o!==null)}Jw(n)}catch(K){t=K,mt===n&&n!==null&&(mt=n=n.return);continue}break}while(!0)}function Yw(){var e=qu.current;return qu.current=Hu,e===null?Hu:e}function Hp(){(bt===0||bt===3||bt===2)&&(bt=4),Tt===null||!($i&268435455)&&!(Nc&268435455)||Fr(Tt,Dt)}function Qu(e,t){var n=ze;ze|=2;var r=Yw();(Tt!==e||Dt!==t)&&(cr=null,Ni(e,t));do try{PS();break}catch(i){Gw(e,i)}while(!0);if(Op(),ze=n,qu.current=r,mt!==null)throw Error(J(261));return Tt=null,Dt=0,bt}function PS(){for(;mt!==null;)Qw(mt)}function AS(){for(;mt!==null&&!ix();)Qw(mt)}function Qw(e){var t=Zw(e.alternate,e,un);e.memoizedProps=e.pendingProps,t===null?Jw(e):mt=t,Fp.current=null}function Jw(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=CS(n,t),n!==null){n.flags&=32767,mt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{bt=6,mt=null;return}}else if(n=ES(n,t,un),n!==null){mt=n;return}if(t=t.sibling,t!==null){mt=t;return}mt=t=e}while(t!==null);bt===0&&(bt=5)}function Si(e,t,n){var r=He,i=jn.transition;try{jn.transition=null,He=1,DS(e,t,n,r)}finally{jn.transition=i,He=r}return null}function DS(e,t,n,r){do jo();while(Kr!==null);if(ze&6)throw Error(J(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(J(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(px(e,o),e===Tt&&(mt=Tt=null,Dt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ga||(Ga=!0,eb(Nu,function(){return jo(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=jn.transition,jn.transition=null;var s=He;He=1;var a=ze;ze|=4,Fp.current=null,OS(e,n),Ww(n,e),eS(Zf),Au=!!Xf,Zf=Xf=null,e.current=n,jS(n),ox(),ze=a,He=s,jn.transition=o}else e.current=n;if(Ga&&(Ga=!1,Kr=e,Yu=i),o=e.pendingLanes,o===0&&(Jr=null),ax(n.stateNode),rn(e,pt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gu)throw Gu=!1,e=wh,wh=null,e;return Yu&1&&e.tag!==0&&jo(),o=e.pendingLanes,o&1?e===bh?Ys++:(Ys=0,bh=e):Ys=0,ci(),null}function jo(){if(Kr!==null){var e=N0(Yu),t=jn.transition,n=He;try{if(jn.transition=null,He=16>e?16:e,Kr===null)var r=!1;else{if(e=Kr,Kr=null,Yu=0,ze&6)throw Error(J(331));var i=ze;for(ze|=4,pe=e.current;pe!==null;){var o=pe,s=o.child;if(pe.flags&16){var a=o.deletions;if(a!==null){for(var c=0;c<a.length;c++){var d=a[c];for(pe=d;pe!==null;){var f=pe;switch(f.tag){case 0:case 11:case 15:qs(8,f,o)}var p=f.child;if(p!==null)p.return=f,pe=p;else for(;pe!==null;){f=pe;var m=f.sibling,v=f.return;if(Bw(f),f===d){pe=null;break}if(m!==null){m.return=v,pe=m;break}pe=v}}}var b=o.alternate;if(b!==null){var x=b.child;if(x!==null){b.child=null;do{var P=x.sibling;x.sibling=null,x=P}while(x!==null)}}pe=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,pe=s;else e:for(;pe!==null;){if(o=pe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:qs(9,o,o.return)}var S=o.sibling;if(S!==null){S.return=o.return,pe=S;break e}pe=o.return}}var k=e.current;for(pe=k;pe!==null;){s=pe;var _=s.child;if(s.subtreeFlags&2064&&_!==null)_.return=s,pe=_;else e:for(s=k;pe!==null;){if(a=pe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Tc(9,a)}}catch(K){dt(a,a.return,K)}if(a===s){pe=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,pe=R;break e}pe=a.return}}if(ze=i,ci(),Jn&&typeof Jn.onPostCommitFiberRoot=="function")try{Jn.onPostCommitFiberRoot(_c,e)}catch{}r=!0}return r}finally{He=n,jn.transition=t}}return!1}function fg(e,t,n){t=zo(n,t),t=Nw(e,t,1),e=Qr(e,t,1),t=Yt(),e!==null&&(Wl(e,1,t),rn(e,t))}function dt(e,t,n){if(e.tag===3)fg(e,e,n);else for(;t!==null;){if(t.tag===3){fg(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Jr===null||!Jr.has(r))){e=zo(n,e),e=Pw(t,e,1),t=Qr(t,e,1),e=Yt(),t!==null&&(Wl(t,1,e),rn(t,e));break}}t=t.return}}function LS(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Yt(),e.pingedLanes|=e.suspendedLanes&n,Tt===e&&(Dt&n)===n&&(bt===4||bt===3&&(Dt&130023424)===Dt&&500>pt()-Kp?Ni(e,0):Bp|=n),rn(e,t)}function Xw(e,t){t===0&&(e.mode&1?(t=Ua,Ua<<=1,!(Ua&130023424)&&(Ua=4194304)):t=1);var n=Yt();e=br(e,t),e!==null&&(Wl(e,t,n),rn(e,n))}function RS(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Xw(e,n)}function MS(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(t),Xw(e,n)}var Zw;Zw=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||tn.current)Zt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Zt=!1,SS(e,t,n);Zt=!!(e.flags&131072)}else Zt=!1,ot&&t.flags&1048576&&rw(t,zu,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;mu(e,t),e=t.pendingProps;var i=Ro(t,Ht.current);Oo(t,n),i=Rp(null,t,r,e,i,n);var o=Mp();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,nn(r)?(o=!0,Uu(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Np(t),i.updater=jc,t.stateNode=i,i._reactInternals=t,ah(t,r,e,n),t=dh(null,t,r,!0,o,n)):(t.tag=0,ot&&o&&Sp(t),Gt(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(mu(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=$S(r),e=An(r,e),i){case 0:t=ch(null,t,r,e,n);break e;case 1:t=ng(null,t,r,e,n);break e;case 11:t=eg(null,t,r,e,n);break e;case 14:t=tg(null,t,r,An(r.type,e),n);break e}throw Error(J(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:An(r,i),ch(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:An(r,i),ng(e,t,r,i,n);case 3:e:{if(Rw(t),e===null)throw Error(J(387));r=t.pendingProps,o=t.memoizedState,i=o.element,uw(e,t),Ku(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=zo(Error(J(423)),t),t=rg(e,t,r,n,i);break e}else if(r!==i){i=zo(Error(J(424)),t),t=rg(e,t,r,n,i);break e}else for(dn=Yr(t.stateNode.containerInfo.firstChild),fn=t,ot=!0,Ln=null,n=lw(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Mo(),r===i){t=kr(e,t,n);break e}Gt(e,t,r,n)}t=t.child}return t;case 5:return cw(t),e===null&&oh(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,s=i.children,eh(r,i)?s=null:o!==null&&eh(r,o)&&(t.flags|=32),Lw(e,t),Gt(e,t,s,n),t.child;case 6:return e===null&&oh(t),null;case 13:return Mw(e,t,n);case 4:return Pp(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Uo(t,null,r,n):Gt(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:An(r,i),eg(e,t,r,i,n);case 7:return Gt(e,t,t.pendingProps,n),t.child;case 8:return Gt(e,t,t.pendingProps.children,n),t.child;case 12:return Gt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ze(Fu,r._currentValue),r._currentValue=s,o!==null)if($n(o.value,s)){if(o.children===i.children&&!tn.current){t=kr(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=mr(-1,n&-n),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),sh(o.return,n,t),a.lanes|=n;break}c=c.next}}else if(o.tag===10)s=o.type===t.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(J(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),sh(s,n,t),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===t){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Gt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Oo(t,n),i=Tn(i),r=r(i),t.flags|=1,Gt(e,t,r,n),t.child;case 14:return r=t.type,i=An(r,t.pendingProps),i=An(r.type,i),tg(e,t,r,i,n);case 15:return Aw(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:An(r,i),mu(e,t),t.tag=1,nn(r)?(e=!0,Uu(t)):e=!1,Oo(t,n),Tw(t,r,i),ah(t,r,i,n),dh(null,t,r,!0,e,n);case 19:return Uw(e,t,n);case 22:return Dw(e,t,n)}throw Error(J(156,t.tag))};function eb(e,t){return I0(e,t)}function US(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(e,t,n,r){return new US(e,t,n,r)}function qp(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $S(e){if(typeof e=="function")return qp(e)?1:0;if(e!=null){if(e=e.$$typeof,e===fp)return 11;if(e===hp)return 14}return 2}function Zr(e,t){var n=e.alternate;return n===null?(n=In(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function vu(e,t,n,r,i,o){var s=2;if(r=e,typeof e=="function")qp(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case co:return Pi(n.children,i,o,t);case dp:s=8,i|=8;break;case Pf:return e=In(12,n,t,i|2),e.elementType=Pf,e.lanes=o,e;case Af:return e=In(13,n,t,i),e.elementType=Af,e.lanes=o,e;case Df:return e=In(19,n,t,i),e.elementType=Df,e.lanes=o,e;case c0:return Pc(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case a0:s=10;break e;case u0:s=9;break e;case fp:s=11;break e;case hp:s=14;break e;case Ur:s=16,r=null;break e}throw Error(J(130,e==null?e:typeof e,""))}return t=In(s,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function Pi(e,t,n,r){return e=In(7,e,r,t),e.lanes=n,e}function Pc(e,t,n,r){return e=In(22,e,r,t),e.elementType=c0,e.lanes=n,e.stateNode={isHidden:!1},e}function lf(e,t,n){return e=In(6,e,null,t),e.lanes=n,e}function af(e,t,n){return t=In(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zS(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fd(0),this.expirationTimes=Fd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Gp(e,t,n,r,i,o,s,a,c){return e=new zS(e,t,n,a,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=In(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Np(o),e}function FS(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:uo,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function tb(e){if(!e)return ii;e=e._reactInternals;e:{if(qi(e)!==e||e.tag!==1)throw Error(J(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(nn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(J(171))}if(e.tag===1){var n=e.type;if(nn(n))return tw(e,n,t)}return t}function nb(e,t,n,r,i,o,s,a,c){return e=Gp(n,r,!0,e,i,o,s,a,c),e.context=tb(null),n=e.current,r=Yt(),i=Xr(n),o=mr(r,i),o.callback=t??null,Qr(n,o,i),e.current.lanes=i,Wl(e,i,r),rn(e,r),e}function Ac(e,t,n,r){var i=t.current,o=Yt(),s=Xr(i);return n=tb(n),t.context===null?t.context=n:t.pendingContext=n,t=mr(o,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Qr(i,t,s),e!==null&&(Un(e,i,s,o),fu(e,i,s)),s}function Ju(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Yp(e,t){hg(e,t),(e=e.alternate)&&hg(e,t)}function BS(){return null}var rb=typeof reportError=="function"?reportError:function(e){console.error(e)};function Qp(e){this._internalRoot=e}Dc.prototype.render=Qp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(J(409));Ac(e,t,null,null)};Dc.prototype.unmount=Qp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zi(function(){Ac(null,e,null,null)}),t[wr]=null}};function Dc(e){this._internalRoot=e}Dc.prototype.unstable_scheduleHydration=function(e){if(e){var t=D0();e={blockedOn:null,target:e,priority:t};for(var n=0;n<zr.length&&t!==0&&t<zr[n].priority;n++);zr.splice(n,0,e),n===0&&R0(e)}};function Jp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Lc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function pg(){}function KS(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var d=Ju(s);o.call(d)}}var s=nb(t,r,e,0,null,!1,!1,"",pg);return e._reactRootContainer=s,e[wr]=s.current,ml(e.nodeType===8?e.parentNode:e),zi(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var d=Ju(c);a.call(d)}}var c=Gp(e,0,!1,null,null,!1,!1,"",pg);return e._reactRootContainer=c,e[wr]=c.current,ml(e.nodeType===8?e.parentNode:e),zi(function(){Ac(t,c,n,r)}),c}function Rc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var c=Ju(s);a.call(c)}}Ac(t,s,e,i)}else s=KS(n,t,e,i,r);return Ju(s)}P0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Us(t.pendingLanes);n!==0&&(yp(t,n|1),rn(t,pt()),!(ze&6)&&(Fo=pt()+500,ci()))}break;case 13:zi(function(){var r=br(e,1);if(r!==null){var i=Yt();Un(r,e,1,i)}}),Yp(e,1)}};gp=function(e){if(e.tag===13){var t=br(e,134217728);if(t!==null){var n=Yt();Un(t,e,134217728,n)}Yp(e,134217728)}};A0=function(e){if(e.tag===13){var t=Xr(e),n=br(e,t);if(n!==null){var r=Yt();Un(n,e,t,r)}Yp(e,t)}};D0=function(){return He};L0=function(e,t){var n=He;try{return He=e,t()}finally{He=n}};Vf=function(e,t,n){switch(t){case"input":if(Mf(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Cc(r);if(!i)throw Error(J(90));f0(r),Mf(r,i)}}}break;case"textarea":p0(e,n);break;case"select":t=n.value,t!=null&&So(e,!!n.multiple,t,!1)}};k0=Vp;_0=zi;var VS={usingClientEntryPoint:!1,Events:[ql,mo,Cc,w0,b0,Vp]},js={findFiberByHostInstance:Ci,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},WS={bundleType:js.bundleType,version:js.version,rendererPackageName:js.rendererPackageName,rendererConfig:js.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=E0(e),e===null?null:e.stateNode},findFiberByHostInstance:js.findFiberByHostInstance||BS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ya=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ya.isDisabled&&Ya.supportsFiber)try{_c=Ya.inject(WS),Jn=Ya}catch{}}gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VS;gn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jp(t))throw Error(J(200));return FS(e,t,null,n)};gn.createRoot=function(e,t){if(!Jp(e))throw Error(J(299));var n=!1,r="",i=rb;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Gp(e,1,!1,null,null,n,!1,r,i),e[wr]=t.current,ml(e.nodeType===8?e.parentNode:e),new Qp(t)};gn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(J(188)):(e=Object.keys(e).join(","),Error(J(268,e)));return e=E0(t),e=e===null?null:e.stateNode,e};gn.flushSync=function(e){return zi(e)};gn.hydrate=function(e,t,n){if(!Lc(t))throw Error(J(200));return Rc(null,e,t,!0,n)};gn.hydrateRoot=function(e,t,n){if(!Jp(e))throw Error(J(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=rb;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=nb(t,null,e,1,n??null,i,!1,o,s),e[wr]=t.current,ml(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Dc(t)};gn.render=function(e,t,n){if(!Lc(t))throw Error(J(200));return Rc(null,e,t,!1,n)};gn.unmountComponentAtNode=function(e){if(!Lc(e))throw Error(J(40));return e._reactRootContainer?(zi(function(){Rc(null,null,e,!1,function(){e._reactRootContainer=null,e[wr]=null})}),!0):!1};gn.unstable_batchedUpdates=Vp;gn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Lc(n))throw Error(J(200));if(e==null||e._reactInternals===void 0)throw Error(J(38));return Rc(e,t,n,!1,r)};gn.version="18.3.1-next-f1338f8080-20240426";function ib(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ib)}catch(e){console.error(e)}}ib(),i0.exports=gn;var HS=i0.exports,ob,mg=HS;ob=mg.createRoot,mg.hydrateRoot;var sb={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(sy,function(){var n=function(l,u){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,y){h.__proto__=y}||function(h,y){for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&(h[g]=y[g])})(l,u)},r=function(){return(r=Object.assign||function(l){for(var u,h=1,y=arguments.length;h<y;h++)for(var g in u=arguments[h])Object.prototype.hasOwnProperty.call(u,g)&&(l[g]=u[g]);return l}).apply(this,arguments)};function i(l,u,h){for(var y,g=0,w=u.length;g<w;g++)!y&&g in u||((y=y||Array.prototype.slice.call(u,0,g))[g]=u[g]);return l.concat(y||Array.prototype.slice.call(u))}var o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:sy,s=Object.keys,a=Array.isArray;function c(l,u){return typeof u!="object"||s(u).forEach(function(h){l[h]=u[h]}),l}typeof Promise>"u"||o.Promise||(o.Promise=Promise);var d=Object.getPrototypeOf,f={}.hasOwnProperty;function p(l,u){return f.call(l,u)}function m(l,u){typeof u=="function"&&(u=u(d(l))),(typeof Reflect>"u"?s:Reflect.ownKeys)(u).forEach(function(h){b(l,h,u[h])})}var v=Object.defineProperty;function b(l,u,h,y){v(l,u,c(h&&p(h,"get")&&typeof h.get=="function"?{get:h.get,set:h.set,configurable:!0}:{value:h,configurable:!0,writable:!0},y))}function x(l){return{from:function(u){return l.prototype=Object.create(u.prototype),b(l.prototype,"constructor",l),{extend:m.bind(null,l.prototype)}}}}var P=Object.getOwnPropertyDescriptor,S=[].slice;function k(l,u,h){return S.call(l,u,h)}function _(l,u){return u(l)}function R(l){if(!l)throw new Error("Assertion Failed")}function K(l){o.setImmediate?setImmediate(l):setTimeout(l,0)}function B(l,u){if(typeof u=="string"&&p(l,u))return l[u];if(!u)return l;if(typeof u!="string"){for(var h=[],y=0,g=u.length;y<g;++y){var w=B(l,u[y]);h.push(w)}return h}var E=u.indexOf(".");if(E!==-1){var C=l[u.substr(0,E)];return C==null?void 0:B(C,u.substr(E+1))}}function q(l,u,h){if(l&&u!==void 0&&!("isFrozen"in Object&&Object.isFrozen(l)))if(typeof u!="string"&&"length"in u){R(typeof h!="string"&&"length"in h);for(var y=0,g=u.length;y<g;++y)q(l,u[y],h[y])}else{var w,E,C=u.indexOf(".");C!==-1?(w=u.substr(0,C),(E=u.substr(C+1))===""?h===void 0?a(l)&&!isNaN(parseInt(w))?l.splice(w,1):delete l[w]:l[w]=h:q(C=!(C=l[w])||!p(l,w)?l[w]={}:C,E,h)):h===void 0?a(l)&&!isNaN(parseInt(u))?l.splice(u,1):delete l[u]:l[u]=h}}function H(l){var u,h={};for(u in l)p(l,u)&&(h[u]=l[u]);return h}var ie=[].concat;function fe(l){return ie.apply([],l)}var fi="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(fe([8,16,32,64].map(function(l){return["Int","Uint","Float"].map(function(u){return u+l+"Array"})}))).filter(function(l){return o[l]}),Y=new Set(fi.map(function(l){return o[l]})),ve=null;function ke(l){return ve=new WeakMap,l=function u(h){if(!h||typeof h!="object")return h;var y=ve.get(h);if(y)return y;if(a(h)){y=[],ve.set(h,y);for(var g=0,w=h.length;g<w;++g)y.push(u(h[g]))}else if(Y.has(h.constructor))y=h;else{var E,C=d(h);for(E in y=C===Object.prototype?{}:Object.create(C),ve.set(h,y),h)p(h,E)&&(y[E]=u(h[E]))}return y}(l),ve=null,l}var Ee={}.toString;function Ce(l){return Ee.call(l).slice(8,-1)}var Q=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ae=typeof Q=="symbol"?function(l){var u;return l!=null&&(u=l[Q])&&u.apply(l)}:function(){return null};function U(l,u){return u=l.indexOf(u),0<=u&&l.splice(u,1),0<=u}var ee={};function ne(l){var u,h,y,g;if(arguments.length===1){if(a(l))return l.slice();if(this===ee&&typeof l=="string")return[l];if(g=ae(l)){for(h=[];!(y=g.next()).done;)h.push(y.value);return h}if(l==null)return[l];if(typeof(u=l.length)!="number")return[l];for(h=new Array(u);u--;)h[u]=l[u];return h}for(u=arguments.length,h=new Array(u);u--;)h[u]=arguments[u];return h}var de=typeof Symbol<"u"?function(l){return l[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},cs=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],bn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(cs),oe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function be(l,u){this.name=l,this.message=u}function Ae(l,u){return l+". Errors: "+Object.keys(u).map(function(h){return u[h].toString()}).filter(function(h,y,g){return g.indexOf(h)===y}).join(`
`)}function Je(l,u,h,y){this.failures=u,this.failedKeys=y,this.successCount=h,this.message=Ae(l,u)}function $e(l,u){this.name="BulkError",this.failures=Object.keys(u).map(function(h){return u[h]}),this.failuresByPos=u,this.message=Ae(l,this.failures)}x(be).from(Error).extend({toString:function(){return this.name+": "+this.message}}),x(Je).from(be),x($e).from(be);var Te=bn.reduce(function(l,u){return l[u]=u+"Error",l},{}),ut=be,le=bn.reduce(function(l,u){var h=u+"Error";function y(g,w){this.name=h,g?typeof g=="string"?(this.message="".concat(g).concat(w?`
 `+w:""),this.inner=w||null):typeof g=="object"&&(this.message="".concat(g.name," ").concat(g.message),this.inner=g):(this.message=oe[u]||h,this.inner=null)}return x(y).from(ut),l[u]=y,l},{});le.Syntax=SyntaxError,le.Type=TypeError,le.Range=RangeError;var Ve=cs.reduce(function(l,u){return l[u+"Error"]=le[u],l},{}),rt=bn.reduce(function(l,u){return["Syntax","Type","Range"].indexOf(u)===-1&&(l[u+"Error"]=le[u]),l},{});function we(){}function Re(l){return l}function Be(l,u){return l==null||l===Re?u:function(h){return u(l(h))}}function Ge(l,u){return function(){l.apply(this,arguments),u.apply(this,arguments)}}function sn(l,u){return l===we?u:function(){var h=l.apply(this,arguments);h!==void 0&&(arguments[0]=h);var y=this.onsuccess,g=this.onerror;this.onsuccess=null,this.onerror=null;var w=u.apply(this,arguments);return y&&(this.onsuccess=this.onsuccess?Ge(y,this.onsuccess):y),g&&(this.onerror=this.onerror?Ge(g,this.onerror):g),w!==void 0?w:h}}function di(l,u){return l===we?u:function(){l.apply(this,arguments);var h=this.onsuccess,y=this.onerror;this.onsuccess=this.onerror=null,u.apply(this,arguments),h&&(this.onsuccess=this.onsuccess?Ge(h,this.onsuccess):h),y&&(this.onerror=this.onerror?Ge(y,this.onerror):y)}}function zn(l,u){return l===we?u:function(h){var y=l.apply(this,arguments);c(h,y);var g=this.onsuccess,w=this.onerror;return this.onsuccess=null,this.onerror=null,h=u.apply(this,arguments),g&&(this.onsuccess=this.onsuccess?Ge(g,this.onsuccess):g),w&&(this.onerror=this.onerror?Ge(w,this.onerror):w),y===void 0?h===void 0?void 0:h:c(y,h)}}function q1(l,u){return l===we?u:function(){return u.apply(this,arguments)!==!1&&l.apply(this,arguments)}}function td(l,u){return l===we?u:function(){var h=l.apply(this,arguments);if(h&&typeof h.then=="function"){for(var y=this,g=arguments.length,w=new Array(g);g--;)w[g]=arguments[g];return h.then(function(){return u.apply(y,w)})}return u.apply(this,arguments)}}rt.ModifyError=Je,rt.DexieError=be,rt.BulkError=$e;var Fn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Cm(l){Fn=l}var us={},Im=100,fi=typeof Promise>"u"?[]:function(){var l=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[l,d(l),l];var u=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[u,d(u),l]}(),cs=fi[0],bn=fi[1],fi=fi[2],bn=bn&&bn.then,hi=cs&&cs.constructor,nd=!!fi,ds=function(l,u){fs.push([l,u]),la&&(queueMicrotask(Y1),la=!1)},rd=!0,la=!0,pi=[],aa=[],id=Re,Or={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:we,pgp:!1,env:{},finalize:we},ge=Or,fs=[],mi=0,ua=[];function ue(l){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var u=this._PSD=ge;if(typeof l!="function"){if(l!==us)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&sd(this,this._value))}this._state=null,this._value=null,++u.ref,function h(y,g){try{g(function(w){if(y._state===null){if(w===y)throw new TypeError("A promise cannot be resolved with itself.");var E=y._lib&&Yi();w&&typeof w.then=="function"?h(y,function(C,j){w instanceof ue?w._then(C,j):w.then(C,j)}):(y._state=!0,y._value=w,jm(y)),E&&Qi()}},sd.bind(null,y))}catch(w){sd(y,w)}}(this,l)}var od={get:function(){var l=ge,u=ha;function h(y,g){var w=this,E=!l.global&&(l!==ge||u!==ha),C=E&&!Tr(),j=new ue(function(N,D){ld(w,new Om(Nm(y,l,E,C),Nm(g,l,E,C),N,D,l))});return this._consoleTask&&(j._consoleTask=this._consoleTask),j}return h.prototype=us,h},set:function(l){b(this,"then",l&&l.prototype===us?od:{get:function(){return l},set:od.set})}};function Om(l,u,h,y,g){this.onFulfilled=typeof l=="function"?l:null,this.onRejected=typeof u=="function"?u:null,this.resolve=h,this.reject=y,this.psd=g}function sd(l,u){var h,y;aa.push(u),l._state===null&&(h=l._lib&&Yi(),u=id(u),l._state=!1,l._value=u,y=l,pi.some(function(g){return g._value===y._value})||pi.push(y),jm(l),h&&Qi())}function jm(l){var u=l._listeners;l._listeners=[];for(var h=0,y=u.length;h<y;++h)ld(l,u[h]);var g=l._PSD;--g.ref||g.finalize(),mi===0&&(++mi,ds(function(){--mi==0&&ad()},[]))}function ld(l,u){if(l._state!==null){var h=l._state?u.onFulfilled:u.onRejected;if(h===null)return(l._state?u.resolve:u.reject)(l._value);++u.psd.ref,++mi,ds(G1,[h,l,u])}else l._listeners.push(u)}function G1(l,u,h){try{var y,g=u._value;!u._state&&aa.length&&(aa=[]),y=Fn&&u._consoleTask?u._consoleTask.run(function(){return l(g)}):l(g),u._state||aa.indexOf(g)!==-1||function(w){for(var E=pi.length;E;)if(pi[--E]._value===w._value)return pi.splice(E,1)}(u),h.resolve(y)}catch(w){h.reject(w)}finally{--mi==0&&ad(),--h.psd.ref||h.psd.finalize()}}function Y1(){yi(Or,function(){Yi()&&Qi()})}function Yi(){var l=rd;return la=rd=!1,l}function Qi(){var l,u,h;do for(;0<fs.length;)for(l=fs,fs=[],h=l.length,u=0;u<h;++u){var y=l[u];y[0].apply(null,y[1])}while(0<fs.length);la=rd=!0}function ad(){var l=pi;pi=[],l.forEach(function(y){y._PSD.onunhandled.call(null,y._value,y)});for(var u=ua.slice(0),h=u.length;h;)u[--h]()}function ca(l){return new ue(us,!1,l)}function it(l,u){var h=ge;return function(){var y=Yi(),g=ge;try{return Nr(h,!0),l.apply(this,arguments)}catch(w){u&&u(w)}finally{Nr(g,!1),y&&Qi()}}}m(ue.prototype,{then:od,_then:function(l,u){ld(this,new Om(null,null,l,u,ge))},catch:function(l){if(arguments.length===1)return this.then(null,l);var u=l,h=arguments[1];return typeof u=="function"?this.then(null,function(y){return(y instanceof u?h:ca)(y)}):this.then(null,function(y){return(y&&y.name===u?h:ca)(y)})},finally:function(l){return this.then(function(u){return ue.resolve(l()).then(function(){return u})},function(u){return ue.resolve(l()).then(function(){return ca(u)})})},timeout:function(l,u){var h=this;return l<1/0?new ue(function(y,g){var w=setTimeout(function(){return g(new le.Timeout(u))},l);h.then(y,g).finally(clearTimeout.bind(null,w))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&b(ue.prototype,Symbol.toStringTag,"Dexie.Promise"),Or.env=Tm(),m(ue,{all:function(){var l=ne.apply(null,arguments).map(pa);return new ue(function(u,h){l.length===0&&u([]);var y=l.length;l.forEach(function(g,w){return ue.resolve(g).then(function(E){l[w]=E,--y||u(l)},h)})})},resolve:function(l){return l instanceof ue?l:l&&typeof l.then=="function"?new ue(function(u,h){l.then(u,h)}):new ue(us,!0,l)},reject:ca,race:function(){var l=ne.apply(null,arguments).map(pa);return new ue(function(u,h){l.map(function(y){return ue.resolve(y).then(u,h)})})},PSD:{get:function(){return ge},set:function(l){return ge=l}},totalEchoes:{get:function(){return ha}},newPSD:jr,usePSD:yi,scheduler:{get:function(){return ds},set:function(l){ds=l}},rejectionMapper:{get:function(){return id},set:function(l){id=l}},follow:function(l,u){return new ue(function(h,y){return jr(function(g,w){var E=ge;E.unhandleds=[],E.onunhandled=w,E.finalize=Ge(function(){var C,j=this;C=function(){j.unhandleds.length===0?g():w(j.unhandleds[0])},ua.push(function N(){C(),ua.splice(ua.indexOf(N),1)}),++mi,ds(function(){--mi==0&&ad()},[])},E.finalize),l()},u,h,y)})}}),hi&&(hi.allSettled&&b(ue,"allSettled",function(){var l=ne.apply(null,arguments).map(pa);return new ue(function(u){l.length===0&&u([]);var h=l.length,y=new Array(h);l.forEach(function(g,w){return ue.resolve(g).then(function(E){return y[w]={status:"fulfilled",value:E}},function(E){return y[w]={status:"rejected",reason:E}}).then(function(){return--h||u(y)})})})}),hi.any&&typeof AggregateError<"u"&&b(ue,"any",function(){var l=ne.apply(null,arguments).map(pa);return new ue(function(u,h){l.length===0&&h(new AggregateError([]));var y=l.length,g=new Array(y);l.forEach(function(w,E){return ue.resolve(w).then(function(C){return u(C)},function(C){g[E]=C,--y||h(new AggregateError(g))})})})}),hi.withResolvers&&(ue.withResolvers=hi.withResolvers));var Et={awaits:0,echoes:0,id:0},Q1=0,da=[],fa=0,ha=0,J1=0;function jr(l,u,h,y){var g=ge,w=Object.create(g);return w.parent=g,w.ref=0,w.global=!1,w.id=++J1,Or.env,w.env=nd?{Promise:ue,PromiseProp:{value:ue,configurable:!0,writable:!0},all:ue.all,race:ue.race,allSettled:ue.allSettled,any:ue.any,resolve:ue.resolve,reject:ue.reject}:{},u&&c(w,u),++g.ref,w.finalize=function(){--this.parent.ref||this.parent.finalize()},y=yi(w,l,h,y),w.ref===0&&w.finalize(),y}function Ji(){return Et.id||(Et.id=++Q1),++Et.awaits,Et.echoes+=Im,Et.id}function Tr(){return!!Et.awaits&&(--Et.awaits==0&&(Et.id=0),Et.echoes=Et.awaits*Im,!0)}function pa(l){return Et.echoes&&l&&l.constructor===hi?(Ji(),l.then(function(u){return Tr(),u},function(u){return Tr(),ft(u)})):l}function X1(){var l=da[da.length-1];da.pop(),Nr(l,!1)}function Nr(l,u){var h,y=ge;(u?!Et.echoes||fa++&&l===ge:!fa||--fa&&l===ge)||queueMicrotask(u?(function(g){++ha,Et.echoes&&--Et.echoes!=0||(Et.echoes=Et.awaits=Et.id=0),da.push(ge),Nr(g,!0)}).bind(null,l):X1),l!==ge&&(ge=l,y===Or&&(Or.env=Tm()),nd&&(h=Or.env.Promise,u=l.env,(y.global||l.global)&&(Object.defineProperty(o,"Promise",u.PromiseProp),h.all=u.all,h.race=u.race,h.resolve=u.resolve,h.reject=u.reject,u.allSettled&&(h.allSettled=u.allSettled),u.any&&(h.any=u.any))))}function Tm(){var l=o.Promise;return nd?{Promise:l,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:l.all,race:l.race,allSettled:l.allSettled,any:l.any,resolve:l.resolve,reject:l.reject}:{}}function yi(l,u,h,y,g){var w=ge;try{return Nr(l,!0),u(h,y,g)}finally{Nr(w,!1)}}function Nm(l,u,h,y){return typeof l!="function"?l:function(){var g=ge;h&&Ji(),Nr(u,!0);try{return l.apply(this,arguments)}finally{Nr(g,!1),y&&queueMicrotask(Tr)}}}function ud(l){Promise===hi&&Et.echoes===0?fa===0?l():enqueueNativeMicroTask(l):setTimeout(l,0)}(""+bn).indexOf("[native code]")===-1&&(Ji=Tr=we);var ft=ue.reject,gi="",ir="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Pm="String expected.",Xi=[],ma="__dbnames",cd="readonly",dd="readwrite";function vi(l,u){return l?u?function(){return l.apply(this,arguments)&&u.apply(this,arguments)}:l:u}var Am={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ya(l){return typeof l!="string"||/\./.test(l)?function(u){return u}:function(u){return u[l]===void 0&&l in u&&delete(u=ke(u))[l],u}}function Dm(){throw le.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Me(l,u){try{var h=Lm(l),y=Lm(u);if(h!==y)return h==="Array"?1:y==="Array"?-1:h==="binary"?1:y==="binary"?-1:h==="string"?1:y==="string"?-1:h==="Date"?1:y!=="Date"?NaN:-1;switch(h){case"number":case"Date":case"string":return u<l?1:l<u?-1:0;case"binary":return function(g,w){for(var E=g.length,C=w.length,j=E<C?E:C,N=0;N<j;++N)if(g[N]!==w[N])return g[N]<w[N]?-1:1;return E===C?0:E<C?-1:1}(Rm(l),Rm(u));case"Array":return function(g,w){for(var E=g.length,C=w.length,j=E<C?E:C,N=0;N<j;++N){var D=Me(g[N],w[N]);if(D!==0)return D}return E===C?0:E<C?-1:1}(l,u)}}catch{}return NaN}function Lm(l){var u=typeof l;return u!="object"?u:ArrayBuffer.isView(l)?"binary":(l=Ce(l),l==="ArrayBuffer"?"binary":l)}function Rm(l){return l instanceof Uint8Array?l:ArrayBuffer.isView(l)?new Uint8Array(l.buffer,l.byteOffset,l.byteLength):new Uint8Array(l)}function ga(l,u,h){var y=l.schema.yProps;return y?(u&&0<h.numFailures&&(u=u.filter(function(g,w){return!h.failures[w]})),Promise.all(y.map(function(g){return g=g.updatesTable,u?l.db.table(g).where("k").anyOf(u).delete():l.db.table(g).clear()})).then(function(){return h})):h}var Mm=(et.prototype._trans=function(l,u,h){var y=this._tx||ge.trans,g=this.name,w=Fn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(l==="readonly"?"read":"write"," ").concat(this.name));function E(N,D,I){if(!I.schema[g])throw new le.NotFound("Table "+g+" not part of transaction");return u(I.idbtrans,I)}var C=Yi();try{var j=y&&y.db._novip===this.db._novip?y===ge.trans?y._promise(l,E,h):jr(function(){return y._promise(l,E,h)},{trans:y,transless:ge.transless||ge}):function N(D,I,$,T){if(D.idbdb&&(D._state.openComplete||ge.letThrough||D._vip)){var A=D._createTransaction(I,$,D._dbSchema);try{A.create(),D._state.PR1398_maxLoop=3}catch(M){return M.name===Te.InvalidState&&D.isOpen()&&0<--D._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),D.close({disableAutoOpen:!1}),D.open().then(function(){return N(D,I,$,T)})):ft(M)}return A._promise(I,function(M,L){return jr(function(){return ge.trans=A,T(M,L,A)})}).then(function(M){if(I==="readwrite")try{A.idbtrans.commit()}catch{}return I==="readonly"?M:A._completion.then(function(){return M})})}if(D._state.openComplete)return ft(new le.DatabaseClosed(D._state.dbOpenError));if(!D._state.isBeingOpened){if(!D._state.autoOpen)return ft(new le.DatabaseClosed);D.open().catch(we)}return D._state.dbReadyPromise.then(function(){return N(D,I,$,T)})}(this.db,l,[this.name],E);return w&&(j._consoleTask=w,j=j.catch(function(N){return console.trace(N),ft(N)})),j}finally{C&&Qi()}},et.prototype.get=function(l,u){var h=this;return l&&l.constructor===Object?this.where(l).first(u):l==null?ft(new le.Type("Invalid argument to Table.get()")):this._trans("readonly",function(y){return h.core.get({trans:y,key:l}).then(function(g){return h.hook.reading.fire(g)})}).then(u)},et.prototype.where=function(l){if(typeof l=="string")return new this.db.WhereClause(this,l);if(a(l))return new this.db.WhereClause(this,"[".concat(l.join("+"),"]"));var u=s(l);if(u.length===1)return this.where(u[0]).equals(l[u[0]]);var h=this.schema.indexes.concat(this.schema.primKey).filter(function(C){if(C.compound&&u.every(function(N){return 0<=C.keyPath.indexOf(N)})){for(var j=0;j<u.length;++j)if(u.indexOf(C.keyPath[j])===-1)return!1;return!0}return!1}).sort(function(C,j){return C.keyPath.length-j.keyPath.length})[0];if(h&&this.db._maxKey!==gi){var w=h.keyPath.slice(0,u.length);return this.where(w).equals(w.map(function(j){return l[j]}))}!h&&Fn&&console.warn("The query ".concat(JSON.stringify(l)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(u.join("+"),"]"));var y=this.schema.idxByName;function g(C,j){return Me(C,j)===0}var E=u.reduce(function(I,j){var N=I[0],D=I[1],I=y[j],$=l[j];return[N||I,N||!I?vi(D,I&&I.multi?function(T){return T=B(T,j),a(T)&&T.some(function(A){return g($,A)})}:function(T){return g($,B(T,j))}):D]},[null,null]),w=E[0],E=E[1];return w?this.where(w.name).equals(l[w.keyPath]).filter(E):h?this.filter(E):this.where(u).equals("")},et.prototype.filter=function(l){return this.toCollection().and(l)},et.prototype.count=function(l){return this.toCollection().count(l)},et.prototype.offset=function(l){return this.toCollection().offset(l)},et.prototype.limit=function(l){return this.toCollection().limit(l)},et.prototype.each=function(l){return this.toCollection().each(l)},et.prototype.toArray=function(l){return this.toCollection().toArray(l)},et.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},et.prototype.orderBy=function(l){return new this.db.Collection(new this.db.WhereClause(this,a(l)?"[".concat(l.join("+"),"]"):l))},et.prototype.reverse=function(){return this.toCollection().reverse()},et.prototype.mapToClass=function(l){var u,h=this.db,y=this.name;function g(){return u!==null&&u.apply(this,arguments)||this}(this.schema.mappedClass=l).prototype instanceof Dm&&(function(j,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function D(){this.constructor=j}n(j,N),j.prototype=N===null?Object.create(N):(D.prototype=N.prototype,new D)}(g,u=l),Object.defineProperty(g.prototype,"db",{get:function(){return h},enumerable:!1,configurable:!0}),g.prototype.table=function(){return y},l=g);for(var w=new Set,E=l.prototype;E;E=d(E))Object.getOwnPropertyNames(E).forEach(function(j){return w.add(j)});function C(j){if(!j)return j;var N,D=Object.create(l.prototype);for(N in j)if(!w.has(N))try{D[N]=j[N]}catch{}return D}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=C,this.hook("reading",C),l},et.prototype.defineClass=function(){return this.mapToClass(function(l){c(this,l)})},et.prototype.add=function(l,u){var h=this,y=this.schema.primKey,g=y.auto,w=y.keyPath,E=l;return w&&g&&(E=ya(w)(l)),this._trans("readwrite",function(C){return h.core.mutate({trans:C,type:"add",keys:u!=null?[u]:null,values:[E]})}).then(function(C){return C.numFailures?ue.reject(C.failures[0]):C.lastResult}).then(function(C){if(w)try{q(l,w,C)}catch{}return C})},et.prototype.update=function(l,u){return typeof l!="object"||a(l)?this.where(":id").equals(l).modify(u):(l=B(l,this.schema.primKey.keyPath),l===void 0?ft(new le.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(l).modify(u))},et.prototype.put=function(l,u){var h=this,y=this.schema.primKey,g=y.auto,w=y.keyPath,E=l;return w&&g&&(E=ya(w)(l)),this._trans("readwrite",function(C){return h.core.mutate({trans:C,type:"put",values:[E],keys:u!=null?[u]:null})}).then(function(C){return C.numFailures?ue.reject(C.failures[0]):C.lastResult}).then(function(C){if(w)try{q(l,w,C)}catch{}return C})},et.prototype.delete=function(l){var u=this;return this._trans("readwrite",function(h){return u.core.mutate({trans:h,type:"delete",keys:[l]}).then(function(y){return ga(u,[l],y)}).then(function(y){return y.numFailures?ue.reject(y.failures[0]):void 0})})},et.prototype.clear=function(){var l=this;return this._trans("readwrite",function(u){return l.core.mutate({trans:u,type:"deleteRange",range:Am}).then(function(h){return ga(l,null,h)})}).then(function(u){return u.numFailures?ue.reject(u.failures[0]):void 0})},et.prototype.bulkGet=function(l){var u=this;return this._trans("readonly",function(h){return u.core.getMany({keys:l,trans:h}).then(function(y){return y.map(function(g){return u.hook.reading.fire(g)})})})},et.prototype.bulkAdd=function(l,u,h){var y=this,g=Array.isArray(u)?u:void 0,w=(h=h||(g?void 0:u))?h.allKeys:void 0;return this._trans("readwrite",function(E){var N=y.schema.primKey,C=N.auto,N=N.keyPath;if(N&&g)throw new le.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(g&&g.length!==l.length)throw new le.InvalidArgument("Arguments objects and keys must have the same length");var j=l.length,N=N&&C?l.map(ya(N)):l;return y.core.mutate({trans:E,type:"add",keys:g,values:N,wantResults:w}).then(function(A){var I=A.numFailures,$=A.results,T=A.lastResult,A=A.failures;if(I===0)return w?$:T;throw new $e("".concat(y.name,".bulkAdd(): ").concat(I," of ").concat(j," operations failed"),A)})})},et.prototype.bulkPut=function(l,u,h){var y=this,g=Array.isArray(u)?u:void 0,w=(h=h||(g?void 0:u))?h.allKeys:void 0;return this._trans("readwrite",function(E){var N=y.schema.primKey,C=N.auto,N=N.keyPath;if(N&&g)throw new le.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(g&&g.length!==l.length)throw new le.InvalidArgument("Arguments objects and keys must have the same length");var j=l.length,N=N&&C?l.map(ya(N)):l;return y.core.mutate({trans:E,type:"put",keys:g,values:N,wantResults:w}).then(function(A){var I=A.numFailures,$=A.results,T=A.lastResult,A=A.failures;if(I===0)return w?$:T;throw new $e("".concat(y.name,".bulkPut(): ").concat(I," of ").concat(j," operations failed"),A)})})},et.prototype.bulkUpdate=function(l){var u=this,h=this.core,y=l.map(function(E){return E.key}),g=l.map(function(E){return E.changes}),w=[];return this._trans("readwrite",function(E){return h.getMany({trans:E,keys:y,cache:"clone"}).then(function(C){var j=[],N=[];l.forEach(function(I,$){var T=I.key,A=I.changes,M=C[$];if(M){for(var L=0,z=Object.keys(A);L<z.length;L++){var F=z[L],V=A[F];if(F===u.schema.primKey.keyPath){if(Me(V,T)!==0)throw new le.Constraint("Cannot update primary key in bulkUpdate()")}else q(M,F,V)}w.push($),j.push(T),N.push(M)}});var D=j.length;return h.mutate({trans:E,type:"put",keys:j,values:N,updates:{keys:y,changeSpecs:g}}).then(function(I){var $=I.numFailures,T=I.failures;if($===0)return D;for(var A=0,M=Object.keys(T);A<M.length;A++){var L,z=M[A],F=w[Number(z)];F!=null&&(L=T[z],delete T[z],T[F]=L)}throw new $e("".concat(u.name,".bulkUpdate(): ").concat($," of ").concat(D," operations failed"),T)})})})},et.prototype.bulkDelete=function(l){var u=this,h=l.length;return this._trans("readwrite",function(y){return u.core.mutate({trans:y,type:"delete",keys:l}).then(function(g){return ga(u,l,g)})}).then(function(E){var g=E.numFailures,w=E.lastResult,E=E.failures;if(g===0)return w;throw new $e("".concat(u.name,".bulkDelete(): ").concat(g," of ").concat(h," operations failed"),E)})},et);function et(){}function hs(l){function u(E,C){if(C){for(var j=arguments.length,N=new Array(j-1);--j;)N[j-1]=arguments[j];return h[E].subscribe.apply(null,N),l}if(typeof E=="string")return h[E]}var h={};u.addEventType=w;for(var y=1,g=arguments.length;y<g;++y)w(arguments[y]);return u;function w(E,C,j){if(typeof E!="object"){var N;C=C||q1;var D={subscribers:[],fire:j=j||we,subscribe:function(I){D.subscribers.indexOf(I)===-1&&(D.subscribers.push(I),D.fire=C(D.fire,I))},unsubscribe:function(I){D.subscribers=D.subscribers.filter(function($){return $!==I}),D.fire=D.subscribers.reduce(C,j)}};return h[E]=u[E]=D}s(N=E).forEach(function(I){var $=N[I];if(a($))w(I,N[I][0],N[I][1]);else{if($!=="asap")throw new le.InvalidArgument("Invalid event config");var T=w(I,Re,function(){for(var A=arguments.length,M=new Array(A);A--;)M[A]=arguments[A];T.subscribers.forEach(function(L){K(function(){L.apply(null,M)})})})}})}}function ps(l,u){return x(u).from({prototype:l}),u}function Zi(l,u){return!(l.filter||l.algorithm||l.or)&&(u?l.justLimit:!l.replayFilter)}function fd(l,u){l.filter=vi(l.filter,u)}function hd(l,u,h){var y=l.replayFilter;l.replayFilter=y?function(){return vi(y(),u())}:u,l.justLimit=h&&!y}function va(l,u){if(l.isPrimKey)return u.primaryKey;var h=u.getIndexByKeyPath(l.index);if(!h)throw new le.Schema("KeyPath "+l.index+" on object store "+u.name+" is not indexed");return h}function Um(l,u,h){var y=va(l,u.schema);return u.openCursor({trans:h,values:!l.keysOnly,reverse:l.dir==="prev",unique:!!l.unique,query:{index:y,range:l.range}})}function wa(l,u,h,y){var g=l.replayFilter?vi(l.filter,l.replayFilter()):l.filter;if(l.or){var w={},E=function(C,j,N){var D,I;g&&!g(j,N,function($){return j.stop($)},function($){return j.fail($)})||((I=""+(D=j.primaryKey))=="[object ArrayBuffer]"&&(I=""+new Uint8Array(D)),p(w,I)||(w[I]=!0,u(C,j,N)))};return Promise.all([l.or._iterate(E,h),$m(Um(l,y,h),l.algorithm,E,!l.keysOnly&&l.valueMapper)])}return $m(Um(l,y,h),vi(l.algorithm,g),u,!l.keysOnly&&l.valueMapper)}function $m(l,u,h,y){var g=it(y?function(w,E,C){return h(y(w),E,C)}:h);return l.then(function(w){if(w)return w.start(function(){var E=function(){return w.continue()};u&&!u(w,function(C){return E=C},function(C){w.stop(C),E=we},function(C){w.fail(C),E=we})||g(w.value,w,function(C){return E=C}),E()})})}var ms=(zm.prototype.execute=function(l){var u=this["@@propmod"];if(u.add!==void 0){var h=u.add;if(a(h))return i(i([],a(l)?l:[],!0),h).sort();if(typeof h=="number")return(Number(l)||0)+h;if(typeof h=="bigint")try{return BigInt(l)+h}catch{return BigInt(0)+h}throw new TypeError("Invalid term ".concat(h))}if(u.remove!==void 0){var y=u.remove;if(a(y))return a(l)?l.filter(function(g){return!y.includes(g)}).sort():[];if(typeof y=="number")return Number(l)-y;if(typeof y=="bigint")try{return BigInt(l)-y}catch{return BigInt(0)-y}throw new TypeError("Invalid subtrahend ".concat(y))}return h=(h=u.replacePrefix)===null||h===void 0?void 0:h[0],h&&typeof l=="string"&&l.startsWith(h)?u.replacePrefix[1]+l.substring(h.length):l},zm);function zm(l){this["@@propmod"]=l}var Z1=(Ke.prototype._read=function(l,u){var h=this._ctx;return h.error?h.table._trans(null,ft.bind(null,h.error)):h.table._trans("readonly",l).then(u)},Ke.prototype._write=function(l){var u=this._ctx;return u.error?u.table._trans(null,ft.bind(null,u.error)):u.table._trans("readwrite",l,"locked")},Ke.prototype._addAlgorithm=function(l){var u=this._ctx;u.algorithm=vi(u.algorithm,l)},Ke.prototype._iterate=function(l,u){return wa(this._ctx,l,u,this._ctx.table.core)},Ke.prototype.clone=function(l){var u=Object.create(this.constructor.prototype),h=Object.create(this._ctx);return l&&c(h,l),u._ctx=h,u},Ke.prototype.raw=function(){return this._ctx.valueMapper=null,this},Ke.prototype.each=function(l){var u=this._ctx;return this._read(function(h){return wa(u,l,h,u.table.core)})},Ke.prototype.count=function(l){var u=this;return this._read(function(h){var y=u._ctx,g=y.table.core;if(Zi(y,!0))return g.count({trans:h,query:{index:va(y,g.schema),range:y.range}}).then(function(E){return Math.min(E,y.limit)});var w=0;return wa(y,function(){return++w,!1},h,g).then(function(){return w})}).then(l)},Ke.prototype.sortBy=function(l,u){var h=l.split(".").reverse(),y=h[0],g=h.length-1;function w(j,N){return N?w(j[h[N]],N-1):j[y]}var E=this._ctx.dir==="next"?1:-1;function C(j,N){return Me(w(j,g),w(N,g))*E}return this.toArray(function(j){return j.sort(C)}).then(u)},Ke.prototype.toArray=function(l){var u=this;return this._read(function(h){var y=u._ctx;if(y.dir==="next"&&Zi(y,!0)&&0<y.limit){var g=y.valueMapper,w=va(y,y.table.core.schema);return y.table.core.query({trans:h,limit:y.limit,values:!0,query:{index:w,range:y.range}}).then(function(C){return C=C.result,g?C.map(g):C})}var E=[];return wa(y,function(C){return E.push(C)},h,y.table.core).then(function(){return E})},l)},Ke.prototype.offset=function(l){var u=this._ctx;return l<=0||(u.offset+=l,Zi(u)?hd(u,function(){var h=l;return function(y,g){return h===0||(h===1?--h:g(function(){y.advance(h),h=0}),!1)}}):hd(u,function(){var h=l;return function(){return--h<0}})),this},Ke.prototype.limit=function(l){return this._ctx.limit=Math.min(this._ctx.limit,l),hd(this._ctx,function(){var u=l;return function(h,y,g){return--u<=0&&y(g),0<=u}},!0),this},Ke.prototype.until=function(l,u){return fd(this._ctx,function(h,y,g){return!l(h.value)||(y(g),u)}),this},Ke.prototype.first=function(l){return this.limit(1).toArray(function(u){return u[0]}).then(l)},Ke.prototype.last=function(l){return this.reverse().first(l)},Ke.prototype.filter=function(l){var u;return fd(this._ctx,function(h){return l(h.value)}),(u=this._ctx).isMatch=vi(u.isMatch,l),this},Ke.prototype.and=function(l){return this.filter(l)},Ke.prototype.or=function(l){return new this.db.WhereClause(this._ctx.table,l,this)},Ke.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Ke.prototype.desc=function(){return this.reverse()},Ke.prototype.eachKey=function(l){var u=this._ctx;return u.keysOnly=!u.isMatch,this.each(function(h,y){l(y.key,y)})},Ke.prototype.eachUniqueKey=function(l){return this._ctx.unique="unique",this.eachKey(l)},Ke.prototype.eachPrimaryKey=function(l){var u=this._ctx;return u.keysOnly=!u.isMatch,this.each(function(h,y){l(y.primaryKey,y)})},Ke.prototype.keys=function(l){var u=this._ctx;u.keysOnly=!u.isMatch;var h=[];return this.each(function(y,g){h.push(g.key)}).then(function(){return h}).then(l)},Ke.prototype.primaryKeys=function(l){var u=this._ctx;if(u.dir==="next"&&Zi(u,!0)&&0<u.limit)return this._read(function(y){var g=va(u,u.table.core.schema);return u.table.core.query({trans:y,values:!1,limit:u.limit,query:{index:g,range:u.range}})}).then(function(y){return y.result}).then(l);u.keysOnly=!u.isMatch;var h=[];return this.each(function(y,g){h.push(g.primaryKey)}).then(function(){return h}).then(l)},Ke.prototype.uniqueKeys=function(l){return this._ctx.unique="unique",this.keys(l)},Ke.prototype.firstKey=function(l){return this.limit(1).keys(function(u){return u[0]}).then(l)},Ke.prototype.lastKey=function(l){return this.reverse().firstKey(l)},Ke.prototype.distinct=function(){var l=this._ctx,l=l.index&&l.table.schema.idxByName[l.index];if(!l||!l.multi)return this;var u={};return fd(this._ctx,function(g){var y=g.primaryKey.toString(),g=p(u,y);return u[y]=!0,!g}),this},Ke.prototype.modify=function(l){var u=this,h=this._ctx;return this._write(function(y){var g,w,E;E=typeof l=="function"?l:(g=s(l),w=g.length,function(z){for(var F=!1,V=0;V<w;++V){var W=g[V],G=l[W],te=B(z,W);G instanceof ms?(q(z,W,G.execute(te)),F=!0):te!==G&&(q(z,W,G),F=!0)}return F});var C=h.table.core,I=C.schema.primaryKey,j=I.outbound,N=I.extractKey,D=200,I=u.db._options.modifyChunkSize;I&&(D=typeof I=="object"?I[C.name]||I["*"]||200:I);function $(z,W){var V=W.failures,W=W.numFailures;A+=z-W;for(var G=0,te=s(V);G<te.length;G++){var X=te[G];T.push(V[X])}}var T=[],A=0,M=[],L=l===Fm;return u.clone().primaryKeys().then(function(z){function F(W){var G=Math.min(D,z.length-W),te=z.slice(W,W+G);return(L?Promise.resolve([]):C.getMany({trans:y,keys:te,cache:"immutable"})).then(function(X){var Z=[],se=[],re=j?[]:null,ce=L?te:[];if(!L)for(var Oe=0;Oe<G;++Oe){var Ue=X[Oe],Ie={value:ke(Ue),primKey:z[W+Oe]};E.call(Ie,Ie.value,Ie)!==!1&&(Ie.value==null?ce.push(z[W+Oe]):j||Me(N(Ue),N(Ie.value))===0?(se.push(Ie.value),j&&re.push(z[W+Oe])):(ce.push(z[W+Oe]),Z.push(Ie.value)))}return Promise.resolve(0<Z.length&&C.mutate({trans:y,type:"add",values:Z}).then(function(ct){for(var xe in ct.failures)ce.splice(parseInt(xe),1);$(Z.length,ct)})).then(function(){return(0<se.length||V&&typeof l=="object")&&C.mutate({trans:y,type:"put",keys:re,values:se,criteria:V,changeSpec:typeof l!="function"&&l,isAdditionalChunk:0<W}).then(function(ct){return $(se.length,ct)})}).then(function(){return(0<ce.length||V&&L)&&C.mutate({trans:y,type:"delete",keys:ce,criteria:V,isAdditionalChunk:0<W}).then(function(ct){return ga(h.table,ce,ct)}).then(function(ct){return $(ce.length,ct)})}).then(function(){return z.length>W+G&&F(W+D)})})}var V=Zi(h)&&h.limit===1/0&&(typeof l!="function"||L)&&{index:h.index,range:h.range};return F(0).then(function(){if(0<T.length)throw new Je("Error modifying one or more objects",T,A,M);return z.length})})})},Ke.prototype.delete=function(){var l=this._ctx,u=l.range;return!Zi(l)||l.table.schema.yProps||!l.isPrimKey&&u.type!==3?this.modify(Fm):this._write(function(h){var y=l.table.core.schema.primaryKey,g=u;return l.table.core.count({trans:h,query:{index:y,range:g}}).then(function(w){return l.table.core.mutate({trans:h,type:"deleteRange",range:g}).then(function(j){var C=j.failures,j=j.numFailures;if(j)throw new Je("Could not delete some values",Object.keys(C).map(function(N){return C[N]}),w-j);return w-j})})})},Ke);function Ke(){}var Fm=function(l,u){return u.value=null};function e_(l,u){return l<u?-1:l===u?0:1}function t_(l,u){return u<l?-1:l===u?0:1}function ln(l,u,h){return l=l instanceof Km?new l.Collection(l):l,l._ctx.error=new(h||TypeError)(u),l}function eo(l){return new l.Collection(l,function(){return Bm("")}).limit(0)}function ba(l,u,h,y){var g,w,E,C,j,N,D,I=h.length;if(!h.every(function(A){return typeof A=="string"}))return ln(l,Pm);function $(A){g=A==="next"?function(L){return L.toUpperCase()}:function(L){return L.toLowerCase()},w=A==="next"?function(L){return L.toLowerCase()}:function(L){return L.toUpperCase()},E=A==="next"?e_:t_;var M=h.map(function(L){return{lower:w(L),upper:g(L)}}).sort(function(L,z){return E(L.lower,z.lower)});C=M.map(function(L){return L.upper}),j=M.map(function(L){return L.lower}),D=(N=A)==="next"?"":y}$("next"),l=new l.Collection(l,function(){return Pr(C[0],j[I-1]+y)}),l._ondirectionchange=function(A){$(A)};var T=0;return l._addAlgorithm(function(A,M,L){var z=A.key;if(typeof z!="string")return!1;var F=w(z);if(u(F,j,T))return!0;for(var V=null,W=T;W<I;++W){var G=function(te,X,Z,se,re,ce){for(var Oe=Math.min(te.length,se.length),Ue=-1,Ie=0;Ie<Oe;++Ie){var ct=X[Ie];if(ct!==se[Ie])return re(te[Ie],Z[Ie])<0?te.substr(0,Ie)+Z[Ie]+Z.substr(Ie+1):re(te[Ie],se[Ie])<0?te.substr(0,Ie)+se[Ie]+Z.substr(Ie+1):0<=Ue?te.substr(0,Ue)+X[Ue]+Z.substr(Ue+1):null;re(te[Ie],ct)<0&&(Ue=Ie)}return Oe<se.length&&ce==="next"?te+Z.substr(te.length):Oe<te.length&&ce==="prev"?te.substr(0,Z.length):Ue<0?null:te.substr(0,Ue)+se[Ue]+Z.substr(Ue+1)}(z,F,C[W],j[W],E,N);G===null&&V===null?T=W+1:(V===null||0<E(V,G))&&(V=G)}return M(V!==null?function(){A.continue(V+D)}:L),!1}),l}function Pr(l,u,h,y){return{type:2,lower:l,upper:u,lowerOpen:h,upperOpen:y}}function Bm(l){return{type:1,lower:l,upper:l}}var Km=(Object.defineProperty(Ct.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ct.prototype.between=function(l,u,h,y){h=h!==!1,y=y===!0;try{return 0<this._cmp(l,u)||this._cmp(l,u)===0&&(h||y)&&(!h||!y)?eo(this):new this.Collection(this,function(){return Pr(l,u,!h,!y)})}catch{return ln(this,ir)}},Ct.prototype.equals=function(l){return l==null?ln(this,ir):new this.Collection(this,function(){return Bm(l)})},Ct.prototype.above=function(l){return l==null?ln(this,ir):new this.Collection(this,function(){return Pr(l,void 0,!0)})},Ct.prototype.aboveOrEqual=function(l){return l==null?ln(this,ir):new this.Collection(this,function(){return Pr(l,void 0,!1)})},Ct.prototype.below=function(l){return l==null?ln(this,ir):new this.Collection(this,function(){return Pr(void 0,l,!1,!0)})},Ct.prototype.belowOrEqual=function(l){return l==null?ln(this,ir):new this.Collection(this,function(){return Pr(void 0,l)})},Ct.prototype.startsWith=function(l){return typeof l!="string"?ln(this,Pm):this.between(l,l+gi,!0,!0)},Ct.prototype.startsWithIgnoreCase=function(l){return l===""?this.startsWith(l):ba(this,function(u,h){return u.indexOf(h[0])===0},[l],gi)},Ct.prototype.equalsIgnoreCase=function(l){return ba(this,function(u,h){return u===h[0]},[l],"")},Ct.prototype.anyOfIgnoreCase=function(){var l=ne.apply(ee,arguments);return l.length===0?eo(this):ba(this,function(u,h){return h.indexOf(u)!==-1},l,"")},Ct.prototype.startsWithAnyOfIgnoreCase=function(){var l=ne.apply(ee,arguments);return l.length===0?eo(this):ba(this,function(u,h){return h.some(function(y){return u.indexOf(y)===0})},l,gi)},Ct.prototype.anyOf=function(){var l=this,u=ne.apply(ee,arguments),h=this._cmp;try{u.sort(h)}catch{return ln(this,ir)}if(u.length===0)return eo(this);var y=new this.Collection(this,function(){return Pr(u[0],u[u.length-1])});y._ondirectionchange=function(w){h=w==="next"?l._ascending:l._descending,u.sort(h)};var g=0;return y._addAlgorithm(function(w,E,C){for(var j=w.key;0<h(j,u[g]);)if(++g===u.length)return E(C),!1;return h(j,u[g])===0||(E(function(){w.continue(u[g])}),!1)}),y},Ct.prototype.notEqual=function(l){return this.inAnyRange([[-1/0,l],[l,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ct.prototype.noneOf=function(){var l=ne.apply(ee,arguments);if(l.length===0)return new this.Collection(this);try{l.sort(this._ascending)}catch{return ln(this,ir)}var u=l.reduce(function(h,y){return h?h.concat([[h[h.length-1][1],y]]):[[-1/0,y]]},null);return u.push([l[l.length-1],this.db._maxKey]),this.inAnyRange(u,{includeLowers:!1,includeUppers:!1})},Ct.prototype.inAnyRange=function(z,u){var h=this,y=this._cmp,g=this._ascending,w=this._descending,E=this._min,C=this._max;if(z.length===0)return eo(this);if(!z.every(function(F){return F[0]!==void 0&&F[1]!==void 0&&g(F[0],F[1])<=0}))return ln(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",le.InvalidArgument);var j=!u||u.includeLowers!==!1,N=u&&u.includeUppers===!0,D,I=g;function $(F,V){return I(F[0],V[0])}try{(D=z.reduce(function(F,V){for(var W=0,G=F.length;W<G;++W){var te=F[W];if(y(V[0],te[1])<0&&0<y(V[1],te[0])){te[0]=E(te[0],V[0]),te[1]=C(te[1],V[1]);break}}return W===G&&F.push(V),F},[])).sort($)}catch{return ln(this,ir)}var T=0,A=N?function(F){return 0<g(F,D[T][1])}:function(F){return 0<=g(F,D[T][1])},M=j?function(F){return 0<w(F,D[T][0])}:function(F){return 0<=w(F,D[T][0])},L=A,z=new this.Collection(this,function(){return Pr(D[0][0],D[D.length-1][1],!j,!N)});return z._ondirectionchange=function(F){I=F==="next"?(L=A,g):(L=M,w),D.sort($)},z._addAlgorithm(function(F,V,W){for(var G,te=F.key;L(te);)if(++T===D.length)return V(W),!1;return!A(G=te)&&!M(G)||(h._cmp(te,D[T][1])===0||h._cmp(te,D[T][0])===0||V(function(){I===g?F.continue(D[T][0]):F.continue(D[T][1])}),!1)}),z},Ct.prototype.startsWithAnyOf=function(){var l=ne.apply(ee,arguments);return l.every(function(u){return typeof u=="string"})?l.length===0?eo(this):this.inAnyRange(l.map(function(u){return[u,u+gi]})):ln(this,"startsWithAnyOf() only works with strings")},Ct);function Ct(){}function Bn(l){return it(function(u){return ys(u),l(u.target.error),!1})}function ys(l){l.stopPropagation&&l.stopPropagation(),l.preventDefault&&l.preventDefault()}var gs="storagemutated",pd="x-storagemutated-1",Ar=hs(null,gs),n_=(Kn.prototype._lock=function(){return R(!ge.global),++this._reculock,this._reculock!==1||ge.global||(ge.lockOwnerFor=this),this},Kn.prototype._unlock=function(){if(R(!ge.global),--this._reculock==0)for(ge.global||(ge.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var l=this._blockedFuncs.shift();try{yi(l[1],l[0])}catch{}}return this},Kn.prototype._locked=function(){return this._reculock&&ge.lockOwnerFor!==this},Kn.prototype.create=function(l){var u=this;if(!this.mode)return this;var h=this.db.idbdb,y=this.db._state.dbOpenError;if(R(!this.idbtrans),!l&&!h)switch(y&&y.name){case"DatabaseClosedError":throw new le.DatabaseClosed(y);case"MissingAPIError":throw new le.MissingAPI(y.message,y);default:throw new le.OpenFailed(y)}if(!this.active)throw new le.TransactionInactive;return R(this._completion._state===null),(l=this.idbtrans=l||(this.db.core||h).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=it(function(g){ys(g),u._reject(l.error)}),l.onabort=it(function(g){ys(g),u.active&&u._reject(new le.Abort(l.error)),u.active=!1,u.on("abort").fire(g)}),l.oncomplete=it(function(){u.active=!1,u._resolve(),"mutatedParts"in l&&Ar.storagemutated.fire(l.mutatedParts)}),this},Kn.prototype._promise=function(l,u,h){var y=this;if(l==="readwrite"&&this.mode!=="readwrite")return ft(new le.ReadOnly("Transaction is readonly"));if(!this.active)return ft(new le.TransactionInactive);if(this._locked())return new ue(function(w,E){y._blockedFuncs.push([function(){y._promise(l,u,h).then(w,E)},ge])});if(h)return jr(function(){var w=new ue(function(E,C){y._lock();var j=u(E,C,y);j&&j.then&&j.then(E,C)});return w.finally(function(){return y._unlock()}),w._lib=!0,w});var g=new ue(function(w,E){var C=u(w,E,y);C&&C.then&&C.then(w,E)});return g._lib=!0,g},Kn.prototype._root=function(){return this.parent?this.parent._root():this},Kn.prototype.waitFor=function(l){var u,h=this._root(),y=ue.resolve(l);h._waitingFor?h._waitingFor=h._waitingFor.then(function(){return y}):(h._waitingFor=y,h._waitingQueue=[],u=h.idbtrans.objectStore(h.storeNames[0]),function w(){for(++h._spinCount;h._waitingQueue.length;)h._waitingQueue.shift()();h._waitingFor&&(u.get(-1/0).onsuccess=w)}());var g=h._waitingFor;return new ue(function(w,E){y.then(function(C){return h._waitingQueue.push(it(w.bind(null,C)))},function(C){return h._waitingQueue.push(it(E.bind(null,C)))}).finally(function(){h._waitingFor===g&&(h._waitingFor=null)})})},Kn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new le.Abort))},Kn.prototype.table=function(l){var u=this._memoizedTables||(this._memoizedTables={});if(p(u,l))return u[l];var h=this.schema[l];if(!h)throw new le.NotFound("Table "+l+" not part of transaction");return h=new this.db.Table(l,h,this),h.core=this.db.core.table(l),u[l]=h},Kn);function Kn(){}function md(l,u,h,y,g,w,E,C){return{name:l,keyPath:u,unique:h,multi:y,auto:g,compound:w,src:(h&&!E?"&":"")+(y?"*":"")+(g?"++":"")+Vm(u),type:C}}function Vm(l){return typeof l=="string"?l:l?"["+[].join.call(l,"+")+"]":""}function yd(l,u,h){return{name:l,primKey:u,indexes:h,mappedClass:null,idxByName:(y=function(g){return[g.name,g]},h.reduce(function(g,w,E){return E=y(w,E),E&&(g[E[0]]=E[1]),g},{}))};var y}var vs=function(l){try{return l.only([[]]),vs=function(){return[[]]},[[]]}catch{return vs=function(){return gi},gi}};function gd(l){return l==null?function(){}:typeof l=="string"?(u=l).split(".").length===1?function(h){return h[u]}:function(h){return B(h,u)}:function(h){return B(h,l)};var u}function Wm(l){return[].slice.call(l)}var r_=0;function ws(l){return l==null?":id":typeof l=="string"?l:"[".concat(l.join("+"),"]")}function i_(l,u,j){function y(L){if(L.type===3)return null;if(L.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var T=L.lower,A=L.upper,M=L.lowerOpen,L=L.upperOpen;return T===void 0?A===void 0?null:u.upperBound(A,!!L):A===void 0?u.lowerBound(T,!!M):u.bound(T,A,!!M,!!L)}function g($){var T,A=$.name;return{name:A,schema:$,mutate:function(M){var L=M.trans,z=M.type,F=M.keys,V=M.values,W=M.range;return new Promise(function(G,te){G=it(G);var X=L.objectStore(A),Z=X.keyPath==null,se=z==="put"||z==="add";if(!se&&z!=="delete"&&z!=="deleteRange")throw new Error("Invalid operation type: "+z);var re,ce=(F||V||{length:1}).length;if(F&&V&&F.length!==V.length)throw new Error("Given keys array must have same length as given values array.");if(ce===0)return G({numFailures:0,failures:{},results:[],lastResult:void 0});function Oe(qt){++ct,ys(qt)}var Ue=[],Ie=[],ct=0;if(z==="deleteRange"){if(W.type===4)return G({numFailures:ct,failures:Ie,results:[],lastResult:void 0});W.type===3?Ue.push(re=X.clear()):Ue.push(re=X.delete(y(W)))}else{var Z=se?Z?[V,F]:[V,null]:[F,null],xe=Z[0],Ut=Z[1];if(se)for(var $t=0;$t<ce;++$t)Ue.push(re=Ut&&Ut[$t]!==void 0?X[z](xe[$t],Ut[$t]):X[z](xe[$t])),re.onerror=Oe;else for($t=0;$t<ce;++$t)Ue.push(re=X[z](xe[$t])),re.onerror=Oe}function Pa(qt){qt=qt.target.result,Ue.forEach(function(ki,Ld){return ki.error!=null&&(Ie[Ld]=ki.error)}),G({numFailures:ct,failures:Ie,results:z==="delete"?F:Ue.map(function(ki){return ki.result}),lastResult:qt})}re.onerror=function(qt){Oe(qt),Pa(qt)},re.onsuccess=Pa})},getMany:function(M){var L=M.trans,z=M.keys;return new Promise(function(F,V){F=it(F);for(var W,G=L.objectStore(A),te=z.length,X=new Array(te),Z=0,se=0,re=function(Ue){Ue=Ue.target,X[Ue._pos]=Ue.result,++se===Z&&F(X)},ce=Bn(V),Oe=0;Oe<te;++Oe)z[Oe]!=null&&((W=G.get(z[Oe]))._pos=Oe,W.onsuccess=re,W.onerror=ce,++Z);Z===0&&F(X)})},get:function(M){var L=M.trans,z=M.key;return new Promise(function(F,V){F=it(F);var W=L.objectStore(A).get(z);W.onsuccess=function(G){return F(G.target.result)},W.onerror=Bn(V)})},query:(T=N,function(M){return new Promise(function(L,z){L=it(L);var F,V,W,Z=M.trans,G=M.values,te=M.limit,re=M.query,X=te===1/0?void 0:te,se=re.index,re=re.range,Z=Z.objectStore(A),se=se.isPrimaryKey?Z:Z.index(se.name),re=y(re);if(te===0)return L({result:[]});T?((X=G?se.getAll(re,X):se.getAllKeys(re,X)).onsuccess=function(ce){return L({result:ce.target.result})},X.onerror=Bn(z)):(F=0,V=!G&&"openKeyCursor"in se?se.openKeyCursor(re):se.openCursor(re),W=[],V.onsuccess=function(ce){var Oe=V.result;return Oe?(W.push(G?Oe.value:Oe.primaryKey),++F===te?L({result:W}):void Oe.continue()):L({result:W})},V.onerror=Bn(z))})}),openCursor:function(M){var L=M.trans,z=M.values,F=M.query,V=M.reverse,W=M.unique;return new Promise(function(G,te){G=it(G);var se=F.index,X=F.range,Z=L.objectStore(A),Z=se.isPrimaryKey?Z:Z.index(se.name),se=V?W?"prevunique":"prev":W?"nextunique":"next",re=!z&&"openKeyCursor"in Z?Z.openKeyCursor(y(X),se):Z.openCursor(y(X),se);re.onerror=Bn(te),re.onsuccess=it(function(ce){var Oe,Ue,Ie,ct,xe=re.result;xe?(xe.___id=++r_,xe.done=!1,Oe=xe.continue.bind(xe),Ue=(Ue=xe.continuePrimaryKey)&&Ue.bind(xe),Ie=xe.advance.bind(xe),ct=function(){throw new Error("Cursor not stopped")},xe.trans=L,xe.stop=xe.continue=xe.continuePrimaryKey=xe.advance=function(){throw new Error("Cursor not started")},xe.fail=it(te),xe.next=function(){var Ut=this,$t=1;return this.start(function(){return $t--?Ut.continue():Ut.stop()}).then(function(){return Ut})},xe.start=function(Ut){function $t(){if(re.result)try{Ut()}catch(qt){xe.fail(qt)}else xe.done=!0,xe.start=function(){throw new Error("Cursor behind last entry")},xe.stop()}var Pa=new Promise(function(qt,ki){qt=it(qt),re.onerror=Bn(ki),xe.fail=ki,xe.stop=function(Ld){xe.stop=xe.continue=xe.continuePrimaryKey=xe.advance=ct,qt(Ld)}});return re.onsuccess=it(function(qt){re.onsuccess=$t,$t()}),xe.continue=Oe,xe.continuePrimaryKey=Ue,xe.advance=Ie,$t(),Pa},G(xe)):G(null)},te)})},count:function(M){var L=M.query,z=M.trans,F=L.index,V=L.range;return new Promise(function(W,G){var te=z.objectStore(A),X=F.isPrimaryKey?te:te.index(F.name),te=y(V),X=te?X.count(te):X.count();X.onsuccess=it(function(Z){return W(Z.target.result)}),X.onerror=Bn(G)})}}}var w,E,C,D=(E=j,C=Wm((w=l).objectStoreNames),{schema:{name:w.name,tables:C.map(function($){return E.objectStore($)}).map(function($){var T=$.keyPath,L=$.autoIncrement,A=a(T),M={},L={name:$.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:T==null,compound:A,keyPath:T,autoIncrement:L,unique:!0,extractKey:gd(T)},indexes:Wm($.indexNames).map(function(z){return $.index(z)}).map(function(W){var F=W.name,V=W.unique,G=W.multiEntry,W=W.keyPath,G={name:F,compound:a(W),keyPath:W,unique:V,multiEntry:G,extractKey:gd(W)};return M[ws(W)]=G}),getIndexByKeyPath:function(z){return M[ws(z)]}};return M[":id"]=L.primaryKey,T!=null&&(M[ws(T)]=L.primaryKey),L})},hasGetAll:0<C.length&&"getAll"in E.objectStore(C[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),j=D.schema,N=D.hasGetAll,D=j.tables.map(g),I={};return D.forEach(function($){return I[$.name]=$}),{stack:"dbcore",transaction:l.transaction.bind(l),table:function($){if(!I[$])throw new Error("Table '".concat($,"' not found"));return I[$]},MIN_KEY:-1/0,MAX_KEY:vs(u),schema:j}}function o_(l,u,h,y){var g=h.IDBKeyRange;return h.indexedDB,{dbcore:(y=i_(u,g,y),l.dbcore.reduce(function(w,E){return E=E.create,r(r({},w),E(w))},y))}}function ka(l,y){var h=y.db,y=o_(l._middlewares,h,l._deps,y);l.core=y.dbcore,l.tables.forEach(function(g){var w=g.name;l.core.schema.tables.some(function(E){return E.name===w})&&(g.core=l.core.table(w),l[w]instanceof l.Table&&(l[w].core=g.core))})}function _a(l,u,h,y){h.forEach(function(g){var w=y[g];u.forEach(function(E){var C=function j(N,D){return P(N,D)||(N=d(N))&&j(N,D)}(E,g);(!C||"value"in C&&C.value===void 0)&&(E===l.Transaction.prototype||E instanceof l.Transaction?b(E,g,{get:function(){return this.table(g)},set:function(j){v(this,g,{value:j,writable:!0,configurable:!0,enumerable:!0})}}):E[g]=new l.Table(g,w))})})}function vd(l,u){u.forEach(function(h){for(var y in h)h[y]instanceof l.Table&&delete h[y]})}function s_(l,u){return l._cfg.version-u._cfg.version}function l_(l,u,h,y){var g=l._dbSchema;h.objectStoreNames.contains("$meta")&&!g.$meta&&(g.$meta=yd("$meta",qm("")[0],[]),l._storeNames.push("$meta"));var w=l._createTransaction("readwrite",l._storeNames,g);w.create(h),w._completion.catch(y);var E=w._reject.bind(w),C=ge.transless||ge;jr(function(){return ge.trans=w,ge.transless=C,u!==0?(ka(l,h),N=u,((j=w).storeNames.includes("$meta")?j.table("$meta").get("version").then(function(D){return D??N}):ue.resolve(N)).then(function(D){return $=D,T=w,A=h,M=[],D=(I=l)._versions,L=I._dbSchema=Sa(0,I.idbdb,A),(D=D.filter(function(z){return z._cfg.version>=$})).length!==0?(D.forEach(function(z){M.push(function(){var F=L,V=z._cfg.dbschema;Ea(I,F,A),Ea(I,V,A),L=I._dbSchema=V;var W=wd(F,V);W.add.forEach(function(se){bd(A,se[0],se[1].primKey,se[1].indexes)}),W.change.forEach(function(se){if(se.recreate)throw new le.Upgrade("Not yet support for changing primary key");var re=A.objectStore(se.name);se.add.forEach(function(ce){return xa(re,ce)}),se.change.forEach(function(ce){re.deleteIndex(ce.name),xa(re,ce)}),se.del.forEach(function(ce){return re.deleteIndex(ce)})});var G=z._cfg.contentUpgrade;if(G&&z._cfg.version>$){ka(I,A),T._memoizedTables={};var te=H(V);W.del.forEach(function(se){te[se]=F[se]}),vd(I,[I.Transaction.prototype]),_a(I,[I.Transaction.prototype],s(te),te),T.schema=te;var X,Z=de(G);return Z&&Ji(),W=ue.follow(function(){var se;(X=G(T))&&Z&&(se=Tr.bind(null,null),X.then(se,se))}),X&&typeof X.then=="function"?ue.resolve(X):W.then(function(){return X})}}),M.push(function(F){var V,W,G=z._cfg.dbschema;V=G,W=F,[].slice.call(W.db.objectStoreNames).forEach(function(te){return V[te]==null&&W.db.deleteObjectStore(te)}),vd(I,[I.Transaction.prototype]),_a(I,[I.Transaction.prototype],I._storeNames,I._dbSchema),T.schema=I._dbSchema}),M.push(function(F){I.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(I.idbdb.version/10)===z._cfg.version?(I.idbdb.deleteObjectStore("$meta"),delete I._dbSchema.$meta,I._storeNames=I._storeNames.filter(function(V){return V!=="$meta"})):F.objectStore("$meta").put(z._cfg.version,"version"))})}),function z(){return M.length?ue.resolve(M.shift()(T.idbtrans)).then(z):ue.resolve()}().then(function(){Hm(L,A)})):ue.resolve();var I,$,T,A,M,L}).catch(E)):(s(g).forEach(function(D){bd(h,D,g[D].primKey,g[D].indexes)}),ka(l,h),void ue.follow(function(){return l.on.populate.fire(w)}).catch(E));var j,N})}function a_(l,u){Hm(l._dbSchema,u),u.db.version%10!=0||u.objectStoreNames.contains("$meta")||u.db.createObjectStore("$meta").add(Math.ceil(u.db.version/10-1),"version");var h=Sa(0,l.idbdb,u);Ea(l,l._dbSchema,u);for(var y=0,g=wd(h,l._dbSchema).change;y<g.length;y++){var w=function(E){if(E.change.length||E.recreate)return console.warn("Unable to patch indexes of table ".concat(E.name," because it has changes on the type of index or primary key.")),{value:void 0};var C=u.objectStore(E.name);E.add.forEach(function(j){Fn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(E.name,".").concat(j.src)),xa(C,j)})}(g[y]);if(typeof w=="object")return w.value}}function wd(l,u){var h,y={del:[],add:[],change:[]};for(h in l)u[h]||y.del.push(h);for(h in u){var g=l[h],w=u[h];if(g){var E={name:h,def:w,recreate:!1,del:[],add:[],change:[]};if(""+(g.primKey.keyPath||"")!=""+(w.primKey.keyPath||"")||g.primKey.auto!==w.primKey.auto)E.recreate=!0,y.change.push(E);else{var C=g.idxByName,j=w.idxByName,N=void 0;for(N in C)j[N]||E.del.push(N);for(N in j){var D=C[N],I=j[N];D?D.src!==I.src&&E.change.push(I):E.add.push(I)}(0<E.del.length||0<E.add.length||0<E.change.length)&&y.change.push(E)}}else y.add.push([h,w])}return y}function bd(l,u,h,y){var g=l.db.createObjectStore(u,h.keyPath?{keyPath:h.keyPath,autoIncrement:h.auto}:{autoIncrement:h.auto});return y.forEach(function(w){return xa(g,w)}),g}function Hm(l,u){s(l).forEach(function(h){u.db.objectStoreNames.contains(h)||(Fn&&console.debug("Dexie: Creating missing table",h),bd(u,h,l[h].primKey,l[h].indexes))})}function xa(l,u){l.createIndex(u.name,u.keyPath,{unique:u.unique,multiEntry:u.multi})}function Sa(l,u,h){var y={};return k(u.objectStoreNames,0).forEach(function(g){for(var w=h.objectStore(g),E=md(Vm(N=w.keyPath),N||"",!0,!1,!!w.autoIncrement,N&&typeof N!="string",!0),C=[],j=0;j<w.indexNames.length;++j){var D=w.index(w.indexNames[j]),N=D.keyPath,D=md(D.name,N,!!D.unique,!!D.multiEntry,!1,N&&typeof N!="string",!1);C.push(D)}y[g]=yd(g,E,C)}),y}function Ea(l,u,h){for(var y=h.db.objectStoreNames,g=0;g<y.length;++g){var w=y[g],E=h.objectStore(w);l._hasGetAll="getAll"in E;for(var C=0;C<E.indexNames.length;++C){var j=E.indexNames[C],N=E.index(j).keyPath,D=typeof N=="string"?N:"["+k(N).join("+")+"]";!u[w]||(N=u[w].idxByName[D])&&(N.name=j,delete u[w].idxByName[D],u[w].idxByName[j]=N)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(l._hasGetAll=!1)}function qm(l){return l.split(",").map(function(u,h){var w=u.split(":"),y=(g=w[1])===null||g===void 0?void 0:g.trim(),g=(u=w[0].trim()).replace(/([&*]|\+\+)/g,""),w=/^\[/.test(g)?g.match(/^\[(.*)\]$/)[1].split("+"):g;return md(g,w||null,/\&/.test(u),/\*/.test(u),/\+\+/.test(u),a(w),h===0,y)})}var u_=(to.prototype._createTableSchema=yd,to.prototype._parseIndexSyntax=qm,to.prototype._parseStoresSpec=function(l,u){var h=this;s(l).forEach(function(y){if(l[y]!==null){var g=h._parseIndexSyntax(l[y]),w=g.shift();if(!w)throw new le.Schema("Invalid schema for table "+y+": "+l[y]);if(w.unique=!0,w.multi)throw new le.Schema("Primary key cannot be multiEntry*");g.forEach(function(E){if(E.auto)throw new le.Schema("Only primary key can be marked as autoIncrement (++)");if(!E.keyPath)throw new le.Schema("Index must have a name and cannot be an empty string")}),g=h._createTableSchema(y,w,g),u[y]=g}})},to.prototype.stores=function(h){var u=this.db;this._cfg.storesSource=this._cfg.storesSource?c(this._cfg.storesSource,h):h;var h=u._versions,y={},g={};return h.forEach(function(w){c(y,w._cfg.storesSource),g=w._cfg.dbschema={},w._parseStoresSpec(y,g)}),u._dbSchema=g,vd(u,[u._allTables,u,u.Transaction.prototype]),_a(u,[u._allTables,u,u.Transaction.prototype,this._cfg.tables],s(g),g),u._storeNames=s(g),this},to.prototype.upgrade=function(l){return this._cfg.contentUpgrade=td(this._cfg.contentUpgrade||we,l),this},to);function to(){}function kd(l,u){var h=l._dbNamesDB;return h||(h=l._dbNamesDB=new or(ma,{addons:[],indexedDB:l,IDBKeyRange:u})).version(1).stores({dbnames:"name"}),h.table("dbnames")}function _d(l){return l&&typeof l.databases=="function"}function xd(l){return jr(function(){return ge.letThrough=!0,l()})}function Sd(l){return!("from"in l)}var Mt=function(l,u){if(!this){var h=new Mt;return l&&"d"in l&&c(h,l),h}c(this,arguments.length?{d:1,from:l,to:1<arguments.length?u:l}:{d:0})};function bs(l,u,h){var y=Me(u,h);if(!isNaN(y)){if(0<y)throw RangeError();if(Sd(l))return c(l,{from:u,to:h,d:1});var g=l.l,y=l.r;if(Me(h,l.from)<0)return g?bs(g,u,h):l.l={from:u,to:h,d:1,l:null,r:null},Ym(l);if(0<Me(u,l.to))return y?bs(y,u,h):l.r={from:u,to:h,d:1,l:null,r:null},Ym(l);Me(u,l.from)<0&&(l.from=u,l.l=null,l.d=y?y.d+1:1),0<Me(h,l.to)&&(l.to=h,l.r=null,l.d=l.l?l.l.d+1:1),h=!l.r,g&&!l.l&&ks(l,g),y&&h&&ks(l,y)}}function ks(l,u){Sd(u)||function h(y,j){var w=j.from,E=j.to,C=j.l,j=j.r;bs(y,w,E),C&&h(y,C),j&&h(y,j)}(l,u)}function Gm(l,u){var h=Ca(u),y=h.next();if(y.done)return!1;for(var g=y.value,w=Ca(l),E=w.next(g.from),C=E.value;!y.done&&!E.done;){if(Me(C.from,g.to)<=0&&0<=Me(C.to,g.from))return!0;Me(g.from,C.from)<0?g=(y=h.next(C.from)).value:C=(E=w.next(g.from)).value}return!1}function Ca(l){var u=Sd(l)?null:{s:0,n:l};return{next:function(h){for(var y=0<arguments.length;u;)switch(u.s){case 0:if(u.s=1,y)for(;u.n.l&&Me(h,u.n.from)<0;)u={up:u,n:u.n.l,s:1};else for(;u.n.l;)u={up:u,n:u.n.l,s:1};case 1:if(u.s=2,!y||Me(h,u.n.to)<=0)return{value:u.n,done:!1};case 2:if(u.n.r){u.s=3,u={up:u,n:u.n.r,s:0};continue}case 3:u=u.up}return{done:!0}}}}function Ym(l){var u,h,y=(((u=l.r)===null||u===void 0?void 0:u.d)||0)-(((h=l.l)===null||h===void 0?void 0:h.d)||0),g=1<y?"r":y<-1?"l":"";g&&(u=g=="r"?"l":"r",h=r({},l),y=l[g],l.from=y.from,l.to=y.to,l[g]=y[g],h[g]=y[u],(l[u]=h).d=Qm(h)),l.d=Qm(l)}function Qm(h){var u=h.r,h=h.l;return(u?h?Math.max(u.d,h.d):u.d:h?h.d:0)+1}function Ia(l,u){return s(u).forEach(function(h){l[h]?ks(l[h],u[h]):l[h]=function y(g){var w,E,C={};for(w in g)p(g,w)&&(E=g[w],C[w]=!E||typeof E!="object"||Y.has(E.constructor)?E:y(E));return C}(u[h])}),l}function Ed(l,u){return l.all||u.all||Object.keys(l).some(function(h){return u[h]&&Gm(u[h],l[h])})}m(Mt.prototype,((bn={add:function(l){return ks(this,l),this},addKey:function(l){return bs(this,l,l),this},addKeys:function(l){var u=this;return l.forEach(function(h){return bs(u,h,h)}),this},hasKey:function(l){var u=Ca(this).next(l).value;return u&&Me(u.from,l)<=0&&0<=Me(u.to,l)}})[Q]=function(){return Ca(this)},bn));var wi={},Cd={},Id=!1;function Oa(l){Ia(Cd,l),Id||(Id=!0,setTimeout(function(){Id=!1,Od(Cd,!(Cd={}))},0))}function Od(l,u){u===void 0&&(u=!1);var h=new Set;if(l.all)for(var y=0,g=Object.values(wi);y<g.length;y++)Jm(E=g[y],l,h,u);else for(var w in l){var E,C=/^idb\:\/\/(.*)\/(.*)\//.exec(w);C&&(w=C[1],C=C[2],(E=wi["idb://".concat(w,"/").concat(C)])&&Jm(E,l,h,u))}h.forEach(function(j){return j()})}function Jm(l,u,h,y){for(var g=[],w=0,E=Object.entries(l.queries.query);w<E.length;w++){for(var C=E[w],j=C[0],N=[],D=0,I=C[1];D<I.length;D++){var $=I[D];Ed(u,$.obsSet)?$.subscribers.forEach(function(L){return h.add(L)}):y&&N.push($)}y&&g.push([j,N])}if(y)for(var T=0,A=g;T<A.length;T++){var M=A[T],j=M[0],N=M[1];l.queries.query[j]=N}}function c_(l){var u=l._state,h=l._deps.indexedDB;if(u.isBeingOpened||l.idbdb)return u.dbReadyPromise.then(function(){return u.dbOpenError?ft(u.dbOpenError):l});u.isBeingOpened=!0,u.dbOpenError=null,u.openComplete=!1;var y=u.openCanceller,g=Math.round(10*l.verno),w=!1;function E(){if(u.openCanceller!==y)throw new le.DatabaseClosed("db.open() was cancelled")}function C(){return new ue(function($,T){if(E(),!h)throw new le.MissingAPI;var A=l.name,M=u.autoSchema||!g?h.open(A):h.open(A,g);if(!M)throw new le.MissingAPI;M.onerror=Bn(T),M.onblocked=it(l._fireOnBlocked),M.onupgradeneeded=it(function(L){var z;D=M.transaction,u.autoSchema&&!l._options.allowEmptyDB?(M.onerror=ys,D.abort(),M.result.close(),(z=h.deleteDatabase(A)).onsuccess=z.onerror=it(function(){T(new le.NoSuchDatabase("Database ".concat(A," doesnt exist")))})):(D.onerror=Bn(T),L=L.oldVersion>Math.pow(2,62)?0:L.oldVersion,I=L<1,l.idbdb=M.result,w&&a_(l,D),l_(l,L/10,D,T))},T),M.onsuccess=it(function(){D=null;var L,z,F,V,W,G=l.idbdb=M.result,te=k(G.objectStoreNames);if(0<te.length)try{var X=G.transaction((V=te).length===1?V[0]:V,"readonly");if(u.autoSchema)z=G,F=X,(L=l).verno=z.version/10,F=L._dbSchema=Sa(0,z,F),L._storeNames=k(z.objectStoreNames,0),_a(L,[L._allTables],s(F),F);else if(Ea(l,l._dbSchema,X),((W=wd(Sa(0,(W=l).idbdb,X),W._dbSchema)).add.length||W.change.some(function(Z){return Z.add.length||Z.change.length}))&&!w)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),G.close(),g=G.version+1,w=!0,$(C());ka(l,X)}catch{}Xi.push(l),G.onversionchange=it(function(Z){u.vcFired=!0,l.on("versionchange").fire(Z)}),G.onclose=it(function(Z){l.on("close").fire(Z)}),I&&(W=l._deps,X=A,G=W.indexedDB,W=W.IDBKeyRange,_d(G)||X===ma||kd(G,W).put({name:X}).catch(we)),$()},T)}).catch(function($){switch($==null?void 0:$.name){case"UnknownError":if(0<u.PR1398_maxLoop)return u.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),C();break;case"VersionError":if(0<g)return g=0,C()}return ue.reject($)})}var j,N=u.dbReadyResolve,D=null,I=!1;return ue.race([y,(typeof navigator>"u"?ue.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function($){function T(){return indexedDB.databases().finally($)}j=setInterval(T,100),T()}).finally(function(){return clearInterval(j)}):Promise.resolve()).then(C)]).then(function(){return E(),u.onReadyBeingFired=[],ue.resolve(xd(function(){return l.on.ready.fire(l.vip)})).then(function $(){if(0<u.onReadyBeingFired.length){var T=u.onReadyBeingFired.reduce(td,we);return u.onReadyBeingFired=[],ue.resolve(xd(function(){return T(l.vip)})).then($)}})}).finally(function(){u.openCanceller===y&&(u.onReadyBeingFired=null,u.isBeingOpened=!1)}).catch(function($){u.dbOpenError=$;try{D&&D.abort()}catch{}return y===u.openCanceller&&l._close(),ft($)}).finally(function(){u.openComplete=!0,N()}).then(function(){var $;return I&&($={},l.tables.forEach(function(T){T.schema.indexes.forEach(function(A){A.name&&($["idb://".concat(l.name,"/").concat(T.name,"/").concat(A.name)]=new Mt(-1/0,[[[]]]))}),$["idb://".concat(l.name,"/").concat(T.name,"/")]=$["idb://".concat(l.name,"/").concat(T.name,"/:dels")]=new Mt(-1/0,[[[]]])}),Ar(gs).fire($),Od($,!0)),l})}function jd(l){function u(w){return l.next(w)}var h=g(u),y=g(function(w){return l.throw(w)});function g(w){return function(j){var C=w(j),j=C.value;return C.done?j:j&&typeof j.then=="function"?j.then(h,y):a(j)?Promise.all(j).then(h,y):h(j)}}return g(u)()}function ja(l,u,h){for(var y=a(l)?l.slice():[l],g=0;g<h;++g)y.push(u);return y}var d_={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(l){return r(r({},l),{table:function(u){var h=l.table(u),y=h.schema,g={},w=[];function E(I,$,T){var A=ws(I),M=g[A]=g[A]||[],L=I==null?0:typeof I=="string"?1:I.length,z=0<$,z=r(r({},T),{name:z?"".concat(A,"(virtual-from:").concat(T.name,")"):T.name,lowLevelIndex:T,isVirtual:z,keyTail:$,keyLength:L,extractKey:gd(I),unique:!z&&T.unique});return M.push(z),z.isPrimaryKey||w.push(z),1<L&&E(L===2?I[0]:I.slice(0,L-1),$+1,T),M.sort(function(F,V){return F.keyTail-V.keyTail}),z}u=E(y.primaryKey.keyPath,0,y.primaryKey),g[":id"]=[u];for(var C=0,j=y.indexes;C<j.length;C++){var N=j[C];E(N.keyPath,0,N)}function D(I){var $,T=I.query.index;return T.isVirtual?r(r({},I),{query:{index:T.lowLevelIndex,range:($=I.query.range,T=T.keyTail,{type:$.type===1?2:$.type,lower:ja($.lower,$.lowerOpen?l.MAX_KEY:l.MIN_KEY,T),lowerOpen:!0,upper:ja($.upper,$.upperOpen?l.MIN_KEY:l.MAX_KEY,T),upperOpen:!0})}}):I}return r(r({},h),{schema:r(r({},y),{primaryKey:u,indexes:w,getIndexByKeyPath:function(I){return(I=g[ws(I)])&&I[0]}}),count:function(I){return h.count(D(I))},query:function(I){return h.query(D(I))},openCursor:function(I){var $=I.query.index,T=$.keyTail,A=$.isVirtual,M=$.keyLength;return A?h.openCursor(D(I)).then(function(z){return z&&L(z)}):h.openCursor(I);function L(z){return Object.create(z,{continue:{value:function(F){F!=null?z.continue(ja(F,I.reverse?l.MAX_KEY:l.MIN_KEY,T)):I.unique?z.continue(z.key.slice(0,M).concat(I.reverse?l.MIN_KEY:l.MAX_KEY,T)):z.continue()}},continuePrimaryKey:{value:function(F,V){z.continuePrimaryKey(ja(F,l.MAX_KEY,T),V)}},primaryKey:{get:function(){return z.primaryKey}},key:{get:function(){var F=z.key;return M===1?F[0]:F.slice(0,M)}},value:{get:function(){return z.value}}})}}})}})}};function Td(l,u,h,y){return h=h||{},y=y||"",s(l).forEach(function(g){var w,E,C;p(u,g)?(w=l[g],E=u[g],typeof w=="object"&&typeof E=="object"&&w&&E?(C=Ce(w))!==Ce(E)?h[y+g]=u[g]:C==="Object"?Td(w,E,h,y+g+"."):w!==E&&(h[y+g]=u[g]):w!==E&&(h[y+g]=u[g])):h[y+g]=void 0}),s(u).forEach(function(g){p(l,g)||(h[y+g]=u[g])}),h}function Nd(l,u){return u.type==="delete"?u.keys:u.keys||u.values.map(l.extractKey)}var f_={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(l){return r(r({},l),{table:function(u){var h=l.table(u),y=h.schema.primaryKey;return r(r({},h),{mutate:function(g){var w=ge.trans,E=w.table(u).hook,C=E.deleting,j=E.creating,N=E.updating;switch(g.type){case"add":if(j.fire===we)break;return w._promise("readwrite",function(){return D(g)},!0);case"put":if(j.fire===we&&N.fire===we)break;return w._promise("readwrite",function(){return D(g)},!0);case"delete":if(C.fire===we)break;return w._promise("readwrite",function(){return D(g)},!0);case"deleteRange":if(C.fire===we)break;return w._promise("readwrite",function(){return function I($,T,A){return h.query({trans:$,values:!1,query:{index:y,range:T},limit:A}).then(function(M){var L=M.result;return D({type:"delete",keys:L,trans:$}).then(function(z){return 0<z.numFailures?Promise.reject(z.failures[0]):L.length<A?{failures:[],numFailures:0,lastResult:void 0}:I($,r(r({},T),{lower:L[L.length-1],lowerOpen:!0}),A)})})}(g.trans,g.range,1e4)},!0)}return h.mutate(g);function D(I){var $,T,A,M=ge.trans,L=I.keys||Nd(y,I);if(!L)throw new Error("Keys missing");return(I=I.type==="add"||I.type==="put"?r(r({},I),{keys:L}):r({},I)).type!=="delete"&&(I.values=i([],I.values)),I.keys&&(I.keys=i([],I.keys)),$=h,A=L,((T=I).type==="add"?Promise.resolve([]):$.getMany({trans:T.trans,keys:A,cache:"immutable"})).then(function(z){var F=L.map(function(V,W){var G,te,X,Z=z[W],se={onerror:null,onsuccess:null};return I.type==="delete"?C.fire.call(se,V,Z,M):I.type==="add"||Z===void 0?(G=j.fire.call(se,V,I.values[W],M),V==null&&G!=null&&(I.keys[W]=V=G,y.outbound||q(I.values[W],y.keyPath,V))):(G=Td(Z,I.values[W]),(te=N.fire.call(se,G,V,Z,M))&&(X=I.values[W],Object.keys(te).forEach(function(re){p(X,re)?X[re]=te[re]:q(X,re,te[re])}))),se});return h.mutate(I).then(function(V){for(var W=V.failures,G=V.results,te=V.numFailures,V=V.lastResult,X=0;X<L.length;++X){var Z=(G||L)[X],se=F[X];Z==null?se.onerror&&se.onerror(W[X]):se.onsuccess&&se.onsuccess(I.type==="put"&&z[X]?I.values[X]:Z)}return{failures:W,results:G,numFailures:te,lastResult:V}}).catch(function(V){return F.forEach(function(W){return W.onerror&&W.onerror(V)}),Promise.reject(V)})})}}})}})}};function Xm(l,u,h){try{if(!u||u.keys.length<l.length)return null;for(var y=[],g=0,w=0;g<u.keys.length&&w<l.length;++g)Me(u.keys[g],l[w])===0&&(y.push(h?ke(u.values[g]):u.values[g]),++w);return y.length===l.length?y:null}catch{return null}}var h_={stack:"dbcore",level:-1,create:function(l){return{table:function(u){var h=l.table(u);return r(r({},h),{getMany:function(y){if(!y.cache)return h.getMany(y);var g=Xm(y.keys,y.trans._cache,y.cache==="clone");return g?ue.resolve(g):h.getMany(y).then(function(w){return y.trans._cache={keys:y.keys,values:y.cache==="clone"?ke(w):w},w})},mutate:function(y){return y.type!=="add"&&(y.trans._cache=null),h.mutate(y)}})}}}};function Zm(l,u){return l.trans.mode==="readonly"&&!!l.subscr&&!l.trans.explicit&&l.trans.db._options.cache!=="disabled"&&!u.schema.primaryKey.outbound}function ey(l,u){switch(l){case"query":return u.values&&!u.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var p_={stack:"dbcore",level:0,name:"Observability",create:function(l){var u=l.schema.name,h=new Mt(l.MIN_KEY,l.MAX_KEY);return r(r({},l),{transaction:function(y,g,w){if(ge.subscr&&g!=="readonly")throw new le.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ge.querier));return l.transaction(y,g,w)},table:function(y){var g=l.table(y),w=g.schema,E=w.primaryKey,I=w.indexes,C=E.extractKey,j=E.outbound,N=E.autoIncrement&&I.filter(function(T){return T.compound&&T.keyPath.includes(E.keyPath)}),D=r(r({},g),{mutate:function(T){function A(re){return re="idb://".concat(u,"/").concat(y,"/").concat(re),V[re]||(V[re]=new Mt)}var M,L,z,F=T.trans,V=T.mutatedParts||(T.mutatedParts={}),W=A(""),G=A(":dels"),te=T.type,se=T.type==="deleteRange"?[T.range]:T.type==="delete"?[T.keys]:T.values.length<50?[Nd(E,T).filter(function(re){return re}),T.values]:[],X=se[0],Z=se[1],se=T.trans._cache;return a(X)?(W.addKeys(X),(se=te==="delete"||X.length===Z.length?Xm(X,se):null)||G.addKeys(X),(se||Z)&&(M=A,L=se,z=Z,w.indexes.forEach(function(re){var ce=M(re.name||"");function Oe(Ie){return Ie!=null?re.extractKey(Ie):null}function Ue(Ie){return re.multiEntry&&a(Ie)?Ie.forEach(function(ct){return ce.addKey(ct)}):ce.addKey(Ie)}(L||z).forEach(function(Ie,Ut){var xe=L&&Oe(L[Ut]),Ut=z&&Oe(z[Ut]);Me(xe,Ut)!==0&&(xe!=null&&Ue(xe),Ut!=null&&Ue(Ut))})}))):X?(Z={from:(Z=X.lower)!==null&&Z!==void 0?Z:l.MIN_KEY,to:(Z=X.upper)!==null&&Z!==void 0?Z:l.MAX_KEY},G.add(Z),W.add(Z)):(W.add(h),G.add(h),w.indexes.forEach(function(re){return A(re.name).add(h)})),g.mutate(T).then(function(re){return!X||T.type!=="add"&&T.type!=="put"||(W.addKeys(re.results),N&&N.forEach(function(ce){for(var Oe=T.values.map(function(xe){return ce.extractKey(xe)}),Ue=ce.keyPath.findIndex(function(xe){return xe===E.keyPath}),Ie=0,ct=re.results.length;Ie<ct;++Ie)Oe[Ie][Ue]=re.results[Ie];A(ce.name).addKeys(Oe)})),F.mutatedParts=Ia(F.mutatedParts||{},V),re})}}),I=function(A){var M=A.query,A=M.index,M=M.range;return[A,new Mt((A=M.lower)!==null&&A!==void 0?A:l.MIN_KEY,(M=M.upper)!==null&&M!==void 0?M:l.MAX_KEY)]},$={get:function(T){return[E,new Mt(T.key)]},getMany:function(T){return[E,new Mt().addKeys(T.keys)]},count:I,query:I,openCursor:I};return s($).forEach(function(T){D[T]=function(A){var M=ge.subscr,L=!!M,z=Zm(ge,g)&&ey(T,A)?A.obsSet={}:M;if(L){var F=function(Z){return Z="idb://".concat(u,"/").concat(y,"/").concat(Z),z[Z]||(z[Z]=new Mt)},V=F(""),W=F(":dels"),M=$[T](A),L=M[0],M=M[1];if((T==="query"&&L.isPrimaryKey&&!A.values?W:F(L.name||"")).add(M),!L.isPrimaryKey){if(T!=="count"){var G=T==="query"&&j&&A.values&&g.query(r(r({},A),{values:!1}));return g[T].apply(this,arguments).then(function(Z){if(T==="query"){if(j&&A.values)return G.then(function(Oe){return Oe=Oe.result,V.addKeys(Oe),Z});var se=A.values?Z.result.map(C):Z.result;(A.values?V:W).addKeys(se)}else if(T==="openCursor"){var re=Z,ce=A.values;return re&&Object.create(re,{key:{get:function(){return W.addKey(re.primaryKey),re.key}},primaryKey:{get:function(){var Oe=re.primaryKey;return W.addKey(Oe),Oe}},value:{get:function(){return ce&&V.addKey(re.primaryKey),re.value}}})}return Z})}W.add(h)}}return g[T].apply(this,arguments)}}),D}})}};function ty(l,u,h){if(h.numFailures===0)return u;if(u.type==="deleteRange")return null;var y=u.keys?u.keys.length:"values"in u&&u.values?u.values.length:1;return h.numFailures===y?null:(u=r({},u),a(u.keys)&&(u.keys=u.keys.filter(function(g,w){return!(w in h.failures)})),"values"in u&&a(u.values)&&(u.values=u.values.filter(function(g,w){return!(w in h.failures)})),u)}function Pd(l,u){return h=l,((y=u).lower===void 0||(y.lowerOpen?0<Me(h,y.lower):0<=Me(h,y.lower)))&&(l=l,(u=u).upper===void 0||(u.upperOpen?Me(l,u.upper)<0:Me(l,u.upper)<=0));var h,y}function ny(l,u,$,y,g,w){if(!$||$.length===0)return l;var E=u.query.index,C=E.multiEntry,j=u.query.range,N=y.schema.primaryKey.extractKey,D=E.extractKey,I=(E.lowLevelIndex||E).extractKey,$=$.reduce(function(T,A){var M=T,L=[];if(A.type==="add"||A.type==="put")for(var z=new Mt,F=A.values.length-1;0<=F;--F){var V,W=A.values[F],G=N(W);z.hasKey(G)||(V=D(W),(C&&a(V)?V.some(function(re){return Pd(re,j)}):Pd(V,j))&&(z.addKey(G),L.push(W)))}switch(A.type){case"add":var te=new Mt().addKeys(u.values?T.map(function(ce){return N(ce)}):T),M=T.concat(u.values?L.filter(function(ce){return ce=N(ce),!te.hasKey(ce)&&(te.addKey(ce),!0)}):L.map(function(ce){return N(ce)}).filter(function(ce){return!te.hasKey(ce)&&(te.addKey(ce),!0)}));break;case"put":var X=new Mt().addKeys(A.values.map(function(ce){return N(ce)}));M=T.filter(function(ce){return!X.hasKey(u.values?N(ce):ce)}).concat(u.values?L:L.map(function(ce){return N(ce)}));break;case"delete":var Z=new Mt().addKeys(A.keys);M=T.filter(function(ce){return!Z.hasKey(u.values?N(ce):ce)});break;case"deleteRange":var se=A.range;M=T.filter(function(ce){return!Pd(N(ce),se)})}return M},l);return $===l?l:($.sort(function(T,A){return Me(I(T),I(A))||Me(N(T),N(A))}),u.limit&&u.limit<1/0&&($.length>u.limit?$.length=u.limit:l.length===u.limit&&$.length<u.limit&&(g.dirty=!0)),w?Object.freeze($):$)}function ry(l,u){return Me(l.lower,u.lower)===0&&Me(l.upper,u.upper)===0&&!!l.lowerOpen==!!u.lowerOpen&&!!l.upperOpen==!!u.upperOpen}function m_(l,u){return function(h,y,g,w){if(h===void 0)return y!==void 0?-1:0;if(y===void 0)return 1;if((y=Me(h,y))===0){if(g&&w)return 0;if(g)return 1;if(w)return-1}return y}(l.lower,u.lower,l.lowerOpen,u.lowerOpen)<=0&&0<=function(h,y,g,w){if(h===void 0)return y!==void 0?1:0;if(y===void 0)return-1;if((y=Me(h,y))===0){if(g&&w)return 0;if(g)return-1;if(w)return 1}return y}(l.upper,u.upper,l.upperOpen,u.upperOpen)}function y_(l,u,h,y){l.subscribers.add(h),y.addEventListener("abort",function(){var g,w;l.subscribers.delete(h),l.subscribers.size===0&&(g=l,w=u,setTimeout(function(){g.subscribers.size===0&&U(w,g)},3e3))})}var g_={stack:"dbcore",level:0,name:"Cache",create:function(l){var u=l.schema.name;return r(r({},l),{transaction:function(h,y,g){var w,E,C=l.transaction(h,y,g);return y==="readwrite"&&(E=(w=new AbortController).signal,g=function(j){return function(){if(w.abort(),y==="readwrite"){for(var N=new Set,D=0,I=h;D<I.length;D++){var $=I[D],T=wi["idb://".concat(u,"/").concat($)];if(T){var A=l.table($),M=T.optimisticOps.filter(function(ce){return ce.trans===C});if(C._explicit&&j&&C.mutatedParts)for(var L=0,z=Object.values(T.queries.query);L<z.length;L++)for(var F=0,V=(te=z[L]).slice();F<V.length;F++)Ed((X=V[F]).obsSet,C.mutatedParts)&&(U(te,X),X.subscribers.forEach(function(ce){return N.add(ce)}));else if(0<M.length){T.optimisticOps=T.optimisticOps.filter(function(ce){return ce.trans!==C});for(var W=0,G=Object.values(T.queries.query);W<G.length;W++)for(var te,X,Z,se=0,re=(te=G[W]).slice();se<re.length;se++)(X=re[se]).res!=null&&C.mutatedParts&&(j&&!X.dirty?(Z=Object.isFrozen(X.res),Z=ny(X.res,X.req,M,A,X,Z),X.dirty?(U(te,X),X.subscribers.forEach(function(ce){return N.add(ce)})):Z!==X.res&&(X.res=Z,X.promise=ue.resolve({result:Z}))):(X.dirty&&U(te,X),X.subscribers.forEach(function(ce){return N.add(ce)})))}}}N.forEach(function(ce){return ce()})}}},C.addEventListener("abort",g(!1),{signal:E}),C.addEventListener("error",g(!1),{signal:E}),C.addEventListener("complete",g(!0),{signal:E})),C},table:function(h){var y=l.table(h),g=y.schema.primaryKey;return r(r({},y),{mutate:function(w){var E=ge.trans;if(g.outbound||E.db._options.cache==="disabled"||E.explicit||E.idbtrans.mode!=="readwrite")return y.mutate(w);var C=wi["idb://".concat(u,"/").concat(h)];return C?(E=y.mutate(w),w.type!=="add"&&w.type!=="put"||!(50<=w.values.length||Nd(g,w).some(function(j){return j==null}))?(C.optimisticOps.push(w),w.mutatedParts&&Oa(w.mutatedParts),E.then(function(j){0<j.numFailures&&(U(C.optimisticOps,w),(j=ty(0,w,j))&&C.optimisticOps.push(j),w.mutatedParts&&Oa(w.mutatedParts))}),E.catch(function(){U(C.optimisticOps,w),w.mutatedParts&&Oa(w.mutatedParts)})):E.then(function(j){var N=ty(0,r(r({},w),{values:w.values.map(function(D,I){var $;return j.failures[I]?D:(D=($=g.keyPath)!==null&&$!==void 0&&$.includes(".")?ke(D):r({},D),q(D,g.keyPath,j.results[I]),D)})}),j);C.optimisticOps.push(N),queueMicrotask(function(){return w.mutatedParts&&Oa(w.mutatedParts)})}),E):y.mutate(w)},query:function(w){if(!Zm(ge,y)||!ey("query",w))return y.query(w);var E=((N=ge.trans)===null||N===void 0?void 0:N.db._options.cache)==="immutable",I=ge,C=I.requery,j=I.signal,N=function(A,M,L,z){var F=wi["idb://".concat(A,"/").concat(M)];if(!F)return[];if(!(M=F.queries[L]))return[null,!1,F,null];var V=M[(z.query?z.query.index.name:null)||""];if(!V)return[null,!1,F,null];switch(L){case"query":var W=V.find(function(G){return G.req.limit===z.limit&&G.req.values===z.values&&ry(G.req.query.range,z.query.range)});return W?[W,!0,F,V]:[V.find(function(G){return("limit"in G.req?G.req.limit:1/0)>=z.limit&&(!z.values||G.req.values)&&m_(G.req.query.range,z.query.range)}),!1,F,V];case"count":return W=V.find(function(G){return ry(G.req.query.range,z.query.range)}),[W,!!W,F,V]}}(u,h,"query",w),D=N[0],I=N[1],$=N[2],T=N[3];return D&&I?D.obsSet=w.obsSet:(I=y.query(w).then(function(A){var M=A.result;if(D&&(D.res=M),E){for(var L=0,z=M.length;L<z;++L)Object.freeze(M[L]);Object.freeze(M)}else A.result=ke(M);return A}).catch(function(A){return T&&D&&U(T,D),Promise.reject(A)}),D={obsSet:w.obsSet,promise:I,subscribers:new Set,type:"query",req:w,dirty:!1},T?T.push(D):(T=[D],($=$||(wi["idb://".concat(u,"/").concat(h)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[w.query.index.name||""]=T)),y_(D,T,C,j),D.promise.then(function(A){return{result:ny(A.result,w,$==null?void 0:$.optimisticOps,y,D,E)}})}})}})}};function Ta(l,u){return new Proxy(l,{get:function(h,y,g){return y==="db"?u:Reflect.get(h,y,g)}})}var or=(ht.prototype.version=function(l){if(isNaN(l)||l<.1)throw new le.Type("Given version is not a positive number");if(l=Math.round(10*l)/10,this.idbdb||this._state.isBeingOpened)throw new le.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,l);var u=this._versions,h=u.filter(function(y){return y._cfg.version===l})[0];return h||(h=new this.Version(l),u.push(h),u.sort(s_),h.stores({}),this._state.autoSchema=!1,h)},ht.prototype._whenReady=function(l){var u=this;return this.idbdb&&(this._state.openComplete||ge.letThrough||this._vip)?l():new ue(function(h,y){if(u._state.openComplete)return y(new le.DatabaseClosed(u._state.dbOpenError));if(!u._state.isBeingOpened){if(!u._state.autoOpen)return void y(new le.DatabaseClosed);u.open().catch(we)}u._state.dbReadyPromise.then(h,y)}).then(l)},ht.prototype.use=function(l){var u=l.stack,h=l.create,y=l.level,g=l.name;return g&&this.unuse({stack:u,name:g}),l=this._middlewares[u]||(this._middlewares[u]=[]),l.push({stack:u,create:h,level:y??10,name:g}),l.sort(function(w,E){return w.level-E.level}),this},ht.prototype.unuse=function(l){var u=l.stack,h=l.name,y=l.create;return u&&this._middlewares[u]&&(this._middlewares[u]=this._middlewares[u].filter(function(g){return y?g.create!==y:!!h&&g.name!==h})),this},ht.prototype.open=function(){var l=this;return yi(Or,function(){return c_(l)})},ht.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var l=this._state,u=Xi.indexOf(this);if(0<=u&&Xi.splice(u,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}l.isBeingOpened||(l.dbReadyPromise=new ue(function(h){l.dbReadyResolve=h}),l.openCanceller=new ue(function(h,y){l.cancelOpen=y}))},ht.prototype.close=function(h){var u=(h===void 0?{disableAutoOpen:!0}:h).disableAutoOpen,h=this._state;u?(h.isBeingOpened&&h.cancelOpen(new le.DatabaseClosed),this._close(),h.autoOpen=!1,h.dbOpenError=new le.DatabaseClosed):(this._close(),h.autoOpen=this._options.autoOpen||h.isBeingOpened,h.openComplete=!1,h.dbOpenError=null)},ht.prototype.delete=function(l){var u=this;l===void 0&&(l={disableAutoOpen:!0});var h=0<arguments.length&&typeof arguments[0]!="object",y=this._state;return new ue(function(g,w){function E(){u.close(l);var C=u._deps.indexedDB.deleteDatabase(u.name);C.onsuccess=it(function(){var j,N,D;j=u._deps,N=u.name,D=j.indexedDB,j=j.IDBKeyRange,_d(D)||N===ma||kd(D,j).delete(N).catch(we),g()}),C.onerror=Bn(w),C.onblocked=u._fireOnBlocked}if(h)throw new le.InvalidArgument("Invalid closeOptions argument to db.delete()");y.isBeingOpened?y.dbReadyPromise.then(E):E()})},ht.prototype.backendDB=function(){return this.idbdb},ht.prototype.isOpen=function(){return this.idbdb!==null},ht.prototype.hasBeenClosed=function(){var l=this._state.dbOpenError;return l&&l.name==="DatabaseClosed"},ht.prototype.hasFailed=function(){return this._state.dbOpenError!==null},ht.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(ht.prototype,"tables",{get:function(){var l=this;return s(this._allTables).map(function(u){return l._allTables[u]})},enumerable:!1,configurable:!0}),ht.prototype.transaction=function(){var l=(function(u,h,y){var g=arguments.length;if(g<2)throw new le.InvalidArgument("Too few arguments");for(var w=new Array(g-1);--g;)w[g-1]=arguments[g];return y=w.pop(),[u,fe(w),y]}).apply(this,arguments);return this._transaction.apply(this,l)},ht.prototype._transaction=function(l,u,h){var y=this,g=ge.trans;g&&g.db===this&&l.indexOf("!")===-1||(g=null);var w,E,C=l.indexOf("?")!==-1;l=l.replace("!","").replace("?","");try{if(E=u.map(function(N){if(N=N instanceof y.Table?N.name:N,typeof N!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return N}),l=="r"||l===cd)w=cd;else{if(l!="rw"&&l!=dd)throw new le.InvalidArgument("Invalid transaction mode: "+l);w=dd}if(g){if(g.mode===cd&&w===dd){if(!C)throw new le.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");g=null}g&&E.forEach(function(N){if(g&&g.storeNames.indexOf(N)===-1){if(!C)throw new le.SubTransaction("Table "+N+" not included in parent transaction.");g=null}}),C&&g&&!g.active&&(g=null)}}catch(N){return g?g._promise(null,function(D,I){I(N)}):ft(N)}var j=(function N(D,I,$,T,A){return ue.resolve().then(function(){var M=ge.transless||ge,L=D._createTransaction(I,$,D._dbSchema,T);if(L.explicit=!0,M={trans:L,transless:M},T)L.idbtrans=T.idbtrans;else try{L.create(),L.idbtrans._explicit=!0,D._state.PR1398_maxLoop=3}catch(V){return V.name===Te.InvalidState&&D.isOpen()&&0<--D._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),D.close({disableAutoOpen:!1}),D.open().then(function(){return N(D,I,$,null,A)})):ft(V)}var z,F=de(A);return F&&Ji(),M=ue.follow(function(){var V;(z=A.call(L,L))&&(F?(V=Tr.bind(null,null),z.then(V,V)):typeof z.next=="function"&&typeof z.throw=="function"&&(z=jd(z)))},M),(z&&typeof z.then=="function"?ue.resolve(z).then(function(V){return L.active?V:ft(new le.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):M.then(function(){return z})).then(function(V){return T&&L._resolve(),L._completion.then(function(){return V})}).catch(function(V){return L._reject(V),ft(V)})})}).bind(null,this,w,E,g,h);return g?g._promise(w,j,"lock"):ge.trans?yi(ge.transless,function(){return y._whenReady(j)}):this._whenReady(j)},ht.prototype.table=function(l){if(!p(this._allTables,l))throw new le.InvalidTable("Table ".concat(l," does not exist"));return this._allTables[l]},ht);function ht(l,u){var h=this;this._middlewares={},this.verno=0;var y=ht.dependencies;this._options=u=r({addons:ht.addons,autoOpen:!0,indexedDB:y.indexedDB,IDBKeyRange:y.IDBKeyRange,cache:"cloned"},u),this._deps={indexedDB:u.indexedDB,IDBKeyRange:u.IDBKeyRange},y=u.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var g,w,E,C,j,N={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:we,dbReadyPromise:null,cancelOpen:we,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:u.autoOpen};N.dbReadyPromise=new ue(function(I){N.dbReadyResolve=I}),N.openCanceller=new ue(function(I,$){N.cancelOpen=$}),this._state=N,this.name=l,this.on=hs(this,"populate","blocked","versionchange","close",{ready:[td,we]}),this.once=function(I,$){var T=function(){for(var A=[],M=0;M<arguments.length;M++)A[M]=arguments[M];h.on(I).unsubscribe(T),$.apply(h,A)};return h.on(I,T)},this.on.ready.subscribe=_(this.on.ready.subscribe,function(I){return function($,T){ht.vip(function(){var A,M=h._state;M.openComplete?(M.dbOpenError||ue.resolve().then($),T&&I($)):M.onReadyBeingFired?(M.onReadyBeingFired.push($),T&&I($)):(I($),A=h,T||I(function L(){A.on.ready.unsubscribe($),A.on.ready.unsubscribe(L)}))})}}),this.Collection=(g=this,ps(Z1.prototype,function(z,L){this.db=g;var T=Am,A=null;if(L)try{T=L()}catch(F){A=F}var M=z._ctx,L=M.table,z=L.hook.reading.fire;this._ctx={table:L,index:M.index,isPrimKey:!M.index||L.schema.primKey.keyPath&&M.index===L.schema.primKey.name,range:T,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:A,or:M.or,valueMapper:z!==Re?z:null}})),this.Table=(w=this,ps(Mm.prototype,function(I,$,T){this.db=w,this._tx=T,this.name=I,this.schema=$,this.hook=w._allTables[I]?w._allTables[I].hook:hs(null,{creating:[sn,we],reading:[Be,Re],updating:[zn,we],deleting:[di,we]})})),this.Transaction=(E=this,ps(n_.prototype,function(I,$,T,A,M){var L=this;I!=="readonly"&&$.forEach(function(z){z=(z=T[z])===null||z===void 0?void 0:z.yProps,z&&($=$.concat(z.map(function(F){return F.updatesTable})))}),this.db=E,this.mode=I,this.storeNames=$,this.schema=T,this.chromeTransactionDurability=A,this.idbtrans=null,this.on=hs(this,"complete","error","abort"),this.parent=M||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ue(function(z,F){L._resolve=z,L._reject=F}),this._completion.then(function(){L.active=!1,L.on.complete.fire()},function(z){var F=L.active;return L.active=!1,L.on.error.fire(z),L.parent?L.parent._reject(z):F&&L.idbtrans&&L.idbtrans.abort(),ft(z)})})),this.Version=(C=this,ps(u_.prototype,function(I){this.db=C,this._cfg={version:I,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(j=this,ps(Km.prototype,function(I,$,T){if(this.db=j,this._ctx={table:I,index:$===":id"?null:$,or:T},this._cmp=this._ascending=Me,this._descending=function(A,M){return Me(M,A)},this._max=function(A,M){return 0<Me(A,M)?A:M},this._min=function(A,M){return Me(A,M)<0?A:M},this._IDBKeyRange=j._deps.IDBKeyRange,!this._IDBKeyRange)throw new le.MissingAPI})),this.on("versionchange",function(I){0<I.newVersion?console.warn("Another connection wants to upgrade database '".concat(h.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(h.name,"'. Closing db now to resume the delete request.")),h.close({disableAutoOpen:!1})}),this.on("blocked",function(I){!I.newVersion||I.newVersion<I.oldVersion?console.warn("Dexie.delete('".concat(h.name,"') was blocked")):console.warn("Upgrade '".concat(h.name,"' blocked by other connection holding version ").concat(I.oldVersion/10))}),this._maxKey=vs(u.IDBKeyRange),this._createTransaction=function(I,$,T,A){return new h.Transaction(I,$,T,h._options.chromeTransactionDurability,A)},this._fireOnBlocked=function(I){h.on("blocked").fire(I),Xi.filter(function($){return $.name===h.name&&$!==h&&!$._state.vcFired}).map(function($){return $.on("versionchange").fire(I)})},this.use(h_),this.use(g_),this.use(p_),this.use(d_),this.use(f_);var D=new Proxy(this,{get:function(I,$,T){if($==="_vip")return!0;if($==="table")return function(M){return Ta(h.table(M),D)};var A=Reflect.get(I,$,T);return A instanceof Mm?Ta(A,D):$==="tables"?A.map(function(M){return Ta(M,D)}):$==="_createTransaction"?function(){return Ta(A.apply(this,arguments),D)}:A}});this.vip=D,y.forEach(function(I){return I(h)})}var Na,bn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",v_=(Ad.prototype.subscribe=function(l,u,h){return this._subscribe(l&&typeof l!="function"?l:{next:l,error:u,complete:h})},Ad.prototype[bn]=function(){return this},Ad);function Ad(l){this._subscribe=l}try{Na={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch{Na={indexedDB:null,IDBKeyRange:null}}function iy(l){var u,h=!1,y=new v_(function(g){var w=de(l),E,C=!1,j={},N={},D={get closed(){return C},unsubscribe:function(){C||(C=!0,E&&E.abort(),I&&Ar.storagemutated.unsubscribe(T))}};g.start&&g.start(D);var I=!1,$=function(){return ud(A)},T=function(M){Ia(j,M),Ed(N,j)&&$()},A=function(){var M,L,z;!C&&Na.indexedDB&&(j={},M={},E&&E.abort(),E=new AbortController,z=function(F){var V=Yi();try{w&&Ji();var W=jr(l,F);return W=w?W.finally(Tr):W}finally{V&&Qi()}}(L={subscr:M,signal:E.signal,requery:$,querier:l,trans:null}),Promise.resolve(z).then(function(F){h=!0,u=F,C||L.signal.aborted||(j={},function(V){for(var W in V)if(p(V,W))return;return 1}(N=M)||I||(Ar(gs,T),I=!0),ud(function(){return!C&&g.next&&g.next(F)}))},function(F){h=!1,["DatabaseClosedError","AbortError"].includes(F==null?void 0:F.name)||C||ud(function(){C||g.error&&g.error(F)})}))};return setTimeout($,0),D});return y.hasValue=function(){return h},y.getValue=function(){return u},y}var bi=or;function Dd(l){var u=Dr;try{Dr=!0,Ar.storagemutated.fire(l),Od(l,!0)}finally{Dr=u}}m(bi,r(r({},rt),{delete:function(l){return new bi(l,{addons:[]}).delete()},exists:function(l){return new bi(l,{addons:[]}).open().then(function(u){return u.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(l){try{return u=bi.dependencies,h=u.indexedDB,u=u.IDBKeyRange,(_d(h)?Promise.resolve(h.databases()).then(function(y){return y.map(function(g){return g.name}).filter(function(g){return g!==ma})}):kd(h,u).toCollection().primaryKeys()).then(l)}catch{return ft(new le.MissingAPI)}var u,h},defineClass:function(){return function(l){c(this,l)}},ignoreTransaction:function(l){return ge.trans?yi(ge.transless,l):l()},vip:xd,async:function(l){return function(){try{var u=jd(l.apply(this,arguments));return u&&typeof u.then=="function"?u:ue.resolve(u)}catch(h){return ft(h)}}},spawn:function(l,u,h){try{var y=jd(l.apply(h,u||[]));return y&&typeof y.then=="function"?y:ue.resolve(y)}catch(g){return ft(g)}},currentTransaction:{get:function(){return ge.trans||null}},waitFor:function(l,u){return u=ue.resolve(typeof l=="function"?bi.ignoreTransaction(l):l).timeout(u||6e4),ge.trans?ge.trans.waitFor(u):u},Promise:ue,debug:{get:function(){return Fn},set:function(l){Cm(l)}},derive:x,extend:c,props:m,override:_,Events:hs,on:Ar,liveQuery:iy,extendObservabilitySet:Ia,getByKeyPath:B,setByKeyPath:q,delByKeyPath:function(l,u){typeof u=="string"?q(l,u,void 0):"length"in u&&[].map.call(u,function(h){q(l,h,void 0)})},shallowClone:H,deepClone:ke,getObjectDiff:Td,cmp:Me,asap:K,minKey:-1/0,addons:[],connections:Xi,errnames:Te,dependencies:Na,cache:wi,semVer:"4.2.0",version:"4.2.0".split(".").map(function(l){return parseInt(l)}).reduce(function(l,u,h){return l+u/Math.pow(10,2*h)})})),bi.maxKey=vs(bi.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ar(gs,function(l){Dr||(l=new CustomEvent(pd,{detail:l}),Dr=!0,dispatchEvent(l),Dr=!1)}),addEventListener(pd,function(l){l=l.detail,Dr||Dd(l)}));var no,Dr=!1,oy=function(){};return typeof BroadcastChannel<"u"&&((oy=function(){(no=new BroadcastChannel(pd)).onmessage=function(l){return l.data&&Dd(l.data)}})(),typeof no.unref=="function"&&no.unref(),Ar(gs,function(l){Dr||no.postMessage(l)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(l){if(!or.disableBfCache&&l.persisted){Fn&&console.debug("Dexie: handling persisted pagehide"),no!=null&&no.close();for(var u=0,h=Xi;u<h.length;u++)h[u].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(l){!or.disableBfCache&&l.persisted&&(Fn&&console.debug("Dexie: handling persisted pageshow"),oy(),Dd({all:new Mt(-1/0,[[]])}))})),ue.rejectionMapper=function(l,u){return!l||l instanceof be||l instanceof TypeError||l instanceof SyntaxError||!l.name||!Ve[l.name]?l:(u=new Ve[l.name](u||l.message,l),"stack"in l&&b(u,"stack",{get:function(){return this.inner.stack}}),u)},Cm(Fn),r(or,Object.freeze({__proto__:null,Dexie:or,liveQuery:iy,Entity:Dm,cmp:Me,PropModification:ms,replacePrefix:function(l,u){return new ms({replacePrefix:[l,u]})},add:function(l){return new ms({add:l})},remove:function(l){return new ms({remove:l})},default:or,RangeSet:Mt,mergeRanges:ks,rangesOverlap:Gm}),{default:or}),or})})(sb);var qS=sb.exports;const xh=Hv(qS),yg=Symbol.for("Dexie"),De=globalThis[yg]||(globalThis[yg]=xh);if(xh.semVer!==De.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${xh.semVer} and ${De.semVer}`);const{liveQuery:ei,mergeRanges:mN,rangesOverlap:yN,RangeSet:GS,cmp:Mc,Entity:YS,PropModification:gg,replacePrefix:gN,add:vN,remove:wN,DexieYProvider:bN}=De;function Yl(e,t,n){var r,i;typeof e=="function"?(r=t||[],i=n):(r=[],i=t);var o=so.useRef({hasResult:!1,result:i,error:null}),s=so.useReducer(function(d){return d+1},0);s[0];var a=s[1],c=so.useMemo(function(){var d=typeof e=="function"?e():e;if(!d||typeof d.subscribe!="function")throw e===d?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!o.current.hasResult&&typeof window<"u"&&(typeof d.hasValue!="function"||d.hasValue()))if(typeof d.getValue=="function")o.current.result=d.getValue(),o.current.hasResult=!0;else{var f=d.subscribe(function(p){o.current.result=p,o.current.hasResult=!0});typeof f=="function"?f():f.unsubscribe()}return d},r);if(so.useDebugValue(o.current.result),so.useEffect(function(){var d=c.subscribe(function(f){var p=o.current;(p.error!==null||p.result!==f)&&(p.error=null,p.result=f,p.hasResult=!0,a())},function(f){var p=o.current;p.error!==f&&(p.error=f,a())});return typeof d=="function"?d:d.unsubscribe.bind(d)},r),o.current.error)throw o.current.error;return o.current.result}function Ql(e,t,n){return Yl(function(){return De.liveQuery(e)},t||[],n)}function Jl(e,t,n){if(!e)throw new TypeError("Invalid arguments to usePermissions(): undefined or null");var r;if(arguments.length>=3){if(!("transaction"in e))throw new TypeError("Invalid arguments to usePermission(db, table, obj): 1st arg must be a Dexie instance");if(typeof t!="string")throw new TypeError("Invalid arguments to usePermission(db, table, obj): 2nd arg must be string");if(!n||typeof n!="object")throw new TypeError("Invalid arguments to usePermission(db, table, obj): 3rd arg must be an object");r=e}else{if(e instanceof De)throw new TypeError("Invalid arguments to usePermission(db, table, obj): Missing table and obj arguments.");if(typeof e.table=="function"&&typeof e.db=="object")r=e.db,n=e,t=e.table();else throw new TypeError("Invalid arguments to usePermissions(). Expected usePermissions(entity: DexieCloudEntity) or usePermissions(db: Dexie, table: string, obj: DexieCloudObject)")}if(!("cloud"in r))throw new Error("usePermissions() is only for Dexie Cloud but there's no dexie-cloud-addon active in given db.");if(!("permissions"in r.cloud))throw new Error("usePermissions() requires a newer version of dexie-cloud-addon. Please upgrade it.");return Yl(function(){return r.cloud.permissions(n,t)},[n.realmId,n.owner,t])}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(e){var t=De.DexieYProvider;t&&t.release(e)});const Xu=Math.floor,QS=Math.abs,JS=(e,t)=>e<t?e:t,lb=(e,t)=>e>t?e:t,XS=e=>e!==0?e<0:1/e<0,ab=64,Bo=128,Sh=63,Ai=127,ZS=2147483647,ub=Number.MAX_SAFE_INTEGER,eE=Number.isInteger||(e=>typeof e=="number"&&isFinite(e)&&Xu(e)===e),tE=Array.isArray,nE=e=>{const t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=t.codePointAt(i);return r},Sl=typeof TextEncoder<"u"?new TextEncoder:null,rE=e=>Sl.encode(e),iE=Sl?rE:nE;let Qs=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Qs&&Qs.decode(new Uint8Array).length===1&&(Qs=null);let oE=class{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}};const sE=e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t},lE=e=>{const t=new Uint8Array(sE(e));let n=0;for(let r=0;r<e.bufs.length;r++){const i=e.bufs[r];t.set(i,n),n+=i.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),n),t},aE=(e,t)=>{const n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(lb(n,t)*2),e.cpos=0)},Pt=(e,t)=>{const n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(n*2),e.cpos=0),e.cbuf[e.cpos++]=t},El=(e,t)=>{for(;t>Ai;)Pt(e,Bo|Ai&t),t=Xu(t/128);Pt(e,Ai&t)},uE=(e,t)=>{const n=XS(t);for(n&&(t=-t),Pt(e,(t>Sh?Bo:0)|(n?ab:0)|Sh&t),t=Xu(t/64);t>0;)Pt(e,(t>Ai?Bo:0)|Ai&t),t=Xu(t/128)},Eh=new Uint8Array(3e4),cE=Eh.length/3,dE=(e,t)=>{if(t.length<cE){const n=Sl.encodeInto(t,Eh).written||0;El(e,n);for(let r=0;r<n;r++)Pt(e,Eh[r])}else _o(e,iE(t))},fE=(e,t)=>{const n=unescape(encodeURIComponent(t)),r=n.length;El(e,r);for(let i=0;i<r;i++)Pt(e,n.codePointAt(i))},Ei=Sl&&Sl.encodeInto?dE:fE,hE=(e,t)=>{const n=e.cbuf.length,r=e.cpos,i=JS(n-r,t.length),o=t.length-i;e.cbuf.set(t.subarray(0,i),r),e.cpos+=i,o>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(lb(n*2,o)),e.cbuf.set(t.subarray(i)),e.cpos=o)},_o=(e,t)=>{El(e,t.byteLength),hE(e,t)},Uc=(e,t)=>{aE(e,t);const n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},pE=(e,t)=>Uc(e,4).setFloat32(0,t,!1),mE=(e,t)=>Uc(e,8).setFloat64(0,t,!1),yE=(e,t)=>Uc(e,8).setBigInt64(0,t,!1),vg=(e,t)=>Uc(e,8).setBigUint64(0,t,!1),wg=new DataView(new ArrayBuffer(4)),gE=e=>(wg.setFloat32(0,e),wg.getFloat32(0)===e),Js=(e,t)=>{switch(typeof t){case"string":Pt(e,119),Ei(e,t);break;case"number":eE(t)&&QS(t)<=ZS?(Pt(e,125),uE(e,t)):gE(t)?(Pt(e,124),pE(e,t)):(Pt(e,123),mE(e,t));break;case"bigint":Pt(e,122),yE(e,t);break;case"object":if(t===null)Pt(e,126);else if(tE(t)){Pt(e,117),El(e,t.length);for(let n=0;n<t.length;n++)Js(e,t[n])}else if(t instanceof Uint8Array)Pt(e,116),_o(e,t);else{Pt(e,118);const n=Object.keys(t);El(e,n.length);for(let r=0;r<n.length;r++){const i=n[r];Ei(e,i),Js(e,t[i])}}break;case"boolean":Pt(e,t?120:121);break;default:Pt(e,127)}},cb=e=>new Error(e),db=cb("Unexpected end of array"),fb=cb("Integer out of Range");let hb=class{constructor(t){this.arr=t,this.pos=0}};const vE=e=>e.pos!==e.arr.length,wE=(e,t)=>{const n=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n},ji=e=>wE(e,ec(e)),Zu=e=>e.arr[e.pos++],ec=e=>{let t=0,n=1;const r=e.arr.length;for(;e.pos<r;){const i=e.arr[e.pos++];if(t=t+(i&Ai)*n,n*=128,i<Bo)return t;if(t>ub)throw fb}throw db},bE=e=>{let t=e.arr[e.pos++],n=t&Sh,r=64;const i=(t&ab)>0?-1:1;if(!(t&Bo))return i*n;const o=e.arr.length;for(;e.pos<o;){if(t=e.arr[e.pos++],n=n+(t&Ai)*r,r*=128,t<Bo)return i*n;if(n>ub)throw fb}throw db},kE=e=>{let t=ec(e);if(t===0)return"";{let n=String.fromCodePoint(Zu(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(Zu(e));else for(;t>0;){const r=t<1e4?t:1e4,i=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,i),t-=r}return decodeURIComponent(escape(n))}},_E=e=>Qs.decode(ji(e)),Yn=Qs?_E:kE,$c=(e,t)=>{const n=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,n},xE=e=>$c(e,4).getFloat32(0,!1),SE=e=>$c(e,8).getFloat64(0,!1),EE=e=>$c(e,8).getBigInt64(0,!1),bg=e=>$c(e,8).getBigUint64(0,!1),CE=[e=>{},e=>null,bE,xE,SE,EE,e=>!1,e=>!0,Yn,e=>{const t=ec(e),n={};for(let r=0;r<t;r++){const i=Yn(e);n[i]=To(e)}return n},e=>{const t=ec(e),n=[];for(let r=0;r<t;r++)n.push(To(e));return n},ji],To=e=>CE[127-Zu(e)](e);var Ch=function(e,t){return Ch=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Ch(e,t)};function Sr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Ch(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function IE(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(f){try{d(r.next(f))}catch(p){s(p)}}function c(f){try{d(r.throw(f))}catch(p){s(p)}}function d(f){f.done?o(f.value):i(f.value).then(a,c)}d((r=r.apply(e,[])).next())})}function pb(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(d){return function(f){return c([d,f])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(d[0]===6&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(f){d=[6,f],i=0}finally{r=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Ko(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Fi(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function Vo(e,t,n){if(arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}function No(e){return this instanceof No?(this.v=e,this):new No(e)}function OE(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(m){r[m]&&(i[m]=function(v){return new Promise(function(b,x){o.push([m,v,b,x])>1||a(m,v)})})}function a(m,v){try{c(r[m](v))}catch(b){p(o[0][3],b)}}function c(m){m.value instanceof No?Promise.resolve(m.value.v).then(d,f):p(o[0][2],m)}function d(m){a("next",m)}function f(m){a("throw",m)}function p(m,v){m(v),o.shift(),o.length&&a(o[0][0],o[0][1])}}function jE(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Ko=="function"?Ko(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,c){s=e[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(d){o({value:d,done:a})},s)}}function qe(e){return typeof e=="function"}function Xp(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var uf=Xp(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function tc(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var es=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=Ko(s),c=a.next();!c.done;c=a.next()){var d=c.value;d.remove(this)}}catch(x){t={error:x}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}else s.remove(this);var f=this.initialTeardown;if(qe(f))try{f()}catch(x){o=x instanceof uf?x.errors:[x]}var p=this._finalizers;if(p){this._finalizers=null;try{for(var m=Ko(p),v=m.next();!v.done;v=m.next()){var b=v.value;try{kg(b)}catch(x){o=o??[],x instanceof uf?o=Vo(Vo([],Fi(o)),Fi(x.errors)):o.push(x)}}}catch(x){r={error:x}}finally{try{v&&!v.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}}if(o)throw new uf(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)kg(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&tc(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&tc(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),mb=es.EMPTY;function yb(e){return e instanceof es||e&&"closed"in e&&qe(e.remove)&&qe(e.add)&&qe(e.unsubscribe)}function kg(e){qe(e)?e():e.unsubscribe()}var TE={Promise:void 0},NE={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,Vo([e,t],Fi(n)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function gb(e){NE.setTimeout(function(){throw e})}function _g(){}function wu(e){e()}var Zp=function(e){Sr(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,yb(n)&&n.add(r)):r.destination=DE,r}return t.create=function(n,r,i){return new Wo(n,r,i)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(es),PE=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){Qa(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){Qa(r)}else Qa(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){Qa(n)}},e}(),Wo=function(e){Sr(t,e);function t(n,r,i){var o=e.call(this)||this,s;return qe(n)||!n?s={next:n??void 0,error:r??void 0,complete:i??void 0}:s=n,o.destination=new PE(s),o}return t}(Zp);function Qa(e){gb(e)}function AE(e){throw e}var DE={closed:!0,next:_g,error:AE,complete:_g},em=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function ts(e){return e}function LE(e){return e.length===0?ts:e.length===1?e[0]:function(n){return e.reduce(function(r,i){return i(r)},n)}}var _t=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var i=this,o=ME(t)?t:new Wo(t,n,r);return wu(function(){var s=i,a=s.operator,c=s.source;o.add(a?a.call(o,c):c?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=xg(n),new n(function(i,o){var s=new Wo({next:function(a){try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});r.subscribe(s)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[em]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return LE(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=xg(t),new t(function(r,i){var o;n.subscribe(function(s){return o=s},function(s){return i(s)},function(){return r(o)})})},e.create=function(t){return new e(t)},e}();function xg(e){var t;return(t=e??TE.Promise)!==null&&t!==void 0?t:Promise}function RE(e){return e&&qe(e.next)&&qe(e.error)&&qe(e.complete)}function ME(e){return e&&e instanceof Zp||RE(e)&&yb(e)}function UE(e){return qe(e==null?void 0:e.lift)}function wn(e){return function(t){if(UE(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function yn(e,t,n,r,i){return new $E(e,t,n,r,i)}var $E=function(e){Sr(t,e);function t(n,r,i,o,s,a){var c=e.call(this,n)||this;return c.onFinalize=s,c.shouldUnsubscribe=a,c._next=r?function(d){try{r(d)}catch(f){n.error(f)}}:e.prototype._next,c._error=o?function(d){try{o(d)}catch(f){n.error(f)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=i?function(){try{i()}catch(d){n.error(d)}finally{this.unsubscribe()}}:e.prototype._complete,c}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t}(Zp),zE=Xp(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Bi=function(e){Sr(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var r=new Sg(this,this);return r.operator=n,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new zE},t.prototype.next=function(n){var r=this;wu(function(){var i,o;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var s=Ko(r.currentObservers),a=s.next();!a.done;a=s.next()){var c=a.value;c.next(n)}}catch(d){i={error:d}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}})},t.prototype.error=function(n){var r=this;wu(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},t.prototype.complete=function(){var n=this;wu(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var r=this,i=this,o=i.hasError,s=i.isStopped,a=i.observers;return o||s?mb:(this.currentObservers=null,a.push(n),new es(function(){r.currentObservers=null,tc(a,n)}))},t.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,o=r.thrownError,s=r.isStopped;i?n.error(o):s&&n.complete()},t.prototype.asObservable=function(){var n=new _t;return n.source=this,n},t.create=function(n,r){return new Sg(n,r)},t}(_t),Sg=function(e){Sr(t,e);function t(n,r){var i=e.call(this)||this;return i.destination=n,i.source=r,i}return t.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},t.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},t.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},t.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:mb},t}(Bi),Rn=function(e){Sr(t,e);function t(n){var r=e.call(this)||this;return r._value=n,r}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(n){var r=e.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},t.prototype.getValue=function(){var n=this,r=n.hasError,i=n.thrownError,o=n._value;if(r)throw i;return this._throwIfClosed(),o},t.prototype.next=function(n){e.prototype.next.call(this,this._value=n)},t}(Bi),FE={now:function(){return Date.now()}},BE=function(e){Sr(t,e);function t(n,r){return e.call(this)||this}return t.prototype.schedule=function(n,r){return this},t}(es),Eg={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,Vo([e,t],Fi(n)))},clearInterval:function(e){return clearInterval(e)},delegate:void 0},KE=function(e){Sr(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return t.prototype.schedule=function(n,r){if(r===void 0&&(r=0),this.closed)return this;this.state=n;var i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,r)),this.pending=!0,this.delay=r,this.id=this.id||this.requestAsyncId(o,this.id,r),this},t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),Eg.setInterval(n.flush.bind(n,this),i)},t.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;Eg.clearInterval(r)},t.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(n,r){var i=!1,o;try{this.work(n)}catch(s){i=!0,o=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},t.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,tc(o,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(BE),Cg=function(){function e(t,n){n===void 0&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(t,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,t).schedule(r,n)},e.now=FE.now,e}(),VE=function(e){Sr(t,e);function t(n,r){r===void 0&&(r=Cg.now);var i=e.call(this,n,r)||this;return i.actions=[],i._active=!1,i._scheduled=void 0,i}return t.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},t}(Cg),tm=new VE(KE),WE=tm,vb=new _t(function(e){return e.complete()});function wb(e){return e&&qe(e.schedule)}function nm(e){return e[e.length-1]}function HE(e){return qe(nm(e))?e.pop():void 0}function Xl(e){return wb(nm(e))?e.pop():void 0}function qE(e,t){return typeof nm(e)=="number"?e.pop():t}var rm=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function bb(e){return qe(e==null?void 0:e.then)}function kb(e){return qe(e[em])}function _b(e){return Symbol.asyncIterator&&qe(e==null?void 0:e[Symbol.asyncIterator])}function xb(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function GE(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Sb=GE();function Eb(e){return qe(e==null?void 0:e[Sb])}function Cb(e){return OE(this,arguments,function(){var n,r,i,o;return pb(this,function(s){switch(s.label){case 0:n=e.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,No(n.read())];case 3:return r=s.sent(),i=r.value,o=r.done,o?[4,No(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,No(i)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function Ib(e){return qe(e==null?void 0:e.getReader)}function rr(e){if(e instanceof _t)return e;if(e!=null){if(kb(e))return YE(e);if(rm(e))return QE(e);if(bb(e))return JE(e);if(_b(e))return Ob(e);if(Eb(e))return XE(e);if(Ib(e))return ZE(e)}throw xb(e)}function YE(e){return new _t(function(t){var n=e[em]();if(qe(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function QE(e){return new _t(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function JE(e){return new _t(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,gb)})}function XE(e){return new _t(function(t){var n,r;try{for(var i=Ko(e),o=i.next();!o.done;o=i.next()){var s=o.value;if(t.next(s),t.closed)return}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()})}function Ob(e){return new _t(function(t){eC(e,t).catch(function(n){return t.error(n)})})}function ZE(e){return Ob(Cb(e))}function eC(e,t){var n,r,i,o;return IE(this,void 0,void 0,function(){var s,a;return pb(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=jE(e),c.label=1;case 1:return[4,n.next()];case 2:if(r=c.sent(),!!r.done)return[3,4];if(s=r.value,t.next(s),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),i={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function ti(e,t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function jb(e,t){return t===void 0&&(t=0),wn(function(n,r){n.subscribe(yn(r,function(i){return ti(r,e,function(){return r.next(i)},t)},function(){return ti(r,e,function(){return r.complete()},t)},function(i){return ti(r,e,function(){return r.error(i)},t)}))})}function Tb(e,t){return t===void 0&&(t=0),wn(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function tC(e,t){return rr(e).pipe(Tb(t),jb(t))}function nC(e,t){return rr(e).pipe(Tb(t),jb(t))}function rC(e,t){return new _t(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function iC(e,t){return new _t(function(n){var r;return ti(n,t,function(){r=e[Sb](),ti(n,t,function(){var i,o,s;try{i=r.next(),o=i.value,s=i.done}catch(a){n.error(a);return}s?n.complete():n.next(o)},0,!0)}),function(){return qe(r==null?void 0:r.return)&&r.return()}})}function Nb(e,t){if(!e)throw new Error("Iterable cannot be null");return new _t(function(n){ti(n,t,function(){var r=e[Symbol.asyncIterator]();ti(n,t,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function oC(e,t){return Nb(Cb(e),t)}function sC(e,t){if(e!=null){if(kb(e))return tC(e,t);if(rm(e))return rC(e,t);if(bb(e))return nC(e,t);if(_b(e))return Nb(e,t);if(Eb(e))return iC(e,t);if(Ib(e))return oC(e,t)}throw xb(e)}function hn(e,t){return t?sC(e,t):rr(e)}function yr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Xl(e);return hn(e,n)}function Ig(e,t){var n=qe(e)?e:function(){return e},r=function(i){return i.error(n())};return new _t(r)}var lC=Xp(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});function Ti(e,t){return new Promise(function(n,r){var i=new Wo({next:function(o){n(o),i.unsubscribe()},error:r,complete:function(){r(new lC)}});e.subscribe(i)})}function aC(e){return e instanceof Date&&!isNaN(e)}function cn(e,t){return wn(function(n,r){var i=0;n.subscribe(yn(r,function(o){r.next(e.call(t,o,i++))}))})}var uC=Array.isArray;function cC(e,t){return uC(t)?e.apply(void 0,Vo([],Fi(t))):e(t)}function Pb(e){return cn(function(t){return cC(e,t)})}var dC=Array.isArray,fC=Object.getPrototypeOf,hC=Object.prototype,pC=Object.keys;function mC(e){if(e.length===1){var t=e[0];if(dC(t))return{args:t,keys:null};if(yC(t)){var n=pC(t);return{args:n.map(function(r){return t[r]}),keys:n}}}return{args:e,keys:null}}function yC(e){return e&&typeof e=="object"&&fC(e)===hC}function gC(e,t){return e.reduce(function(n,r,i){return n[r]=t[i],n},{})}function Cl(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Xl(e),r=HE(e),i=mC(e),o=i.args,s=i.keys;if(o.length===0)return hn([],n);var a=new _t(vC(o,n,s?function(c){return gC(s,c)}:ts));return r?a.pipe(Pb(r)):a}function vC(e,t,n){return n===void 0&&(n=ts),function(r){Og(t,function(){for(var i=e.length,o=new Array(i),s=i,a=i,c=function(f){Og(t,function(){var p=hn(e[f],t),m=!1;p.subscribe(yn(r,function(v){o[f]=v,m||(m=!0,a--),a||r.next(n(o.slice()))},function(){--s||r.complete()}))},r)},d=0;d<i;d++)c(d)},r)}}function Og(e,t,n){e?ti(n,e,t):t()}function wC(e,t,n,r,i,o,s,a){var c=[],d=0,f=0,p=!1,m=function(){p&&!c.length&&!d&&t.complete()},v=function(x){return d<r?b(x):c.push(x)},b=function(x){d++;var P=!1;rr(n(x,f++)).subscribe(yn(t,function(S){t.next(S)},function(){P=!0},void 0,function(){if(P)try{d--;for(var S=function(){var k=c.shift();s||b(k)};c.length&&d<r;)S();m()}catch(k){t.error(k)}}))};return e.subscribe(yn(t,v,function(){p=!0,m()})),function(){}}function Zl(e,t,n){return n===void 0&&(n=1/0),qe(t)?Zl(function(r,i){return cn(function(o,s){return t(r,o,i,s)})(rr(e(r,i)))},n):(typeof t=="number"&&(n=t),wn(function(r,i){return wC(r,i,e,n)}))}function Ab(e){return e===void 0&&(e=1/0),Zl(ts,e)}function bC(){return Ab(1)}function jg(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return bC()(hn(e,Xl(e)))}var kC=["addListener","removeListener"],_C=["addEventListener","removeEventListener"],xC=["on","off"];function Qn(e,t,n,r){if(qe(n)&&(r=n,n=void 0),r)return Qn(e,t,n).pipe(Pb(r));var i=Fi(CC(e)?_C.map(function(a){return function(c){return e[a](t,c,n)}}):SC(e)?kC.map(Tg(e,t)):EC(e)?xC.map(Tg(e,t)):[],2),o=i[0],s=i[1];if(!o&&rm(e))return Zl(function(a){return Qn(a,t,n)})(rr(e));if(!o)throw new TypeError("Invalid event target");return new _t(function(a){var c=function(){for(var d=[],f=0;f<arguments.length;f++)d[f]=arguments[f];return a.next(1<d.length?d:d[0])};return o(c),function(){return s(c)}})}function Tg(e,t){return function(n){return function(r){return e[n](t,r)}}}function SC(e){return qe(e.addListener)&&qe(e.removeListener)}function EC(e){return qe(e.on)&&qe(e.off)}function CC(e){return qe(e.addEventListener)&&qe(e.removeEventListener)}function Db(e,t,n){e===void 0&&(e=0),n===void 0&&(n=WE);var r=-1;return t!=null&&(wb(t)?n=t:r=t),new _t(function(i){var o=aC(e)?+e-n.now():e;o<0&&(o=0);var s=0;return n.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function zc(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Xl(e),r=qE(e,1/0),i=e;return i.length?i.length===1?rr(i[0]):Ab(r)(hn(i,n)):vb}function _n(e,t){return wn(function(n,r){var i=0;n.subscribe(yn(r,function(o){return e.call(t,o,i++)&&r.next(o)}))})}function Ih(e){return wn(function(t,n){var r=null,i=!1,o;r=t.subscribe(yn(n,void 0,void 0,function(s){o=rr(e(s,Ih(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Ng(e,t){return t===void 0&&(t=tm),wn(function(n,r){var i=null,o=null,s=null,a=function(){if(i){i.unsubscribe(),i=null;var d=o;o=null,r.next(d)}};function c(){var d=s+e,f=t.now();if(f<d){i=this.schedule(void 0,d-f),r.add(i);return}a()}n.subscribe(yn(r,function(d){o=d,s=t.now(),i||(i=t.schedule(c,e),r.add(i))},function(){a(),r.complete()},void 0,function(){o=i=null}))})}function lo(e){return e<=0?function(){return vb}:wn(function(t,n){var r=0;t.subscribe(yn(n,function(i){++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function IC(e){return cn(function(){return e})}function OC(e,t){return Zl(function(n,r){return e(n,r).pipe(lo(1),IC(n))})}function Lb(e,t){t===void 0&&(t=tm);var n=Db(e,t);return OC(function(){return n})}function Rb(e,t){return t===void 0&&(t=ts),e=e??jC,wn(function(n,r){var i,o=!0;n.subscribe(yn(r,function(s){var a=t(s);(o||!e(i,a))&&(o=!1,i=a,r.next(s))}))})}function jC(e,t){return e===t}function TC(e){e===void 0&&(e={});var t=e.connector,n=t===void 0?function(){return new Bi}:t,r=e.resetOnError,i=r===void 0?!0:r,o=e.resetOnComplete,s=o===void 0?!0:o,a=e.resetOnRefCountZero,c=a===void 0?!0:a;return function(d){var f,p,m,v=0,b=!1,x=!1,P=function(){p==null||p.unsubscribe(),p=void 0},S=function(){P(),f=m=void 0,b=x=!1},k=function(){var _=f;S(),_==null||_.unsubscribe()};return wn(function(_,R){v++,!x&&!b&&P();var K=m=m??n();R.add(function(){v--,v===0&&!x&&!b&&(p=cf(k,c))}),K.subscribe(R),!f&&v>0&&(f=new Wo({next:function(B){return K.next(B)},error:function(B){x=!0,P(),p=cf(S,i,B),K.error(B)},complete:function(){b=!0,P(),p=cf(S,s),K.complete()}}),rr(_).subscribe(f))})(d)}}function cf(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(t===!0){e();return}if(t!==!1){var i=new Wo({next:function(){i.unsubscribe(),e()}});return t.apply(void 0,Vo([],Fi(n))).subscribe(i)}}function Pg(e){return _n(function(t,n){return e<=n})}function Mb(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Xl(e);return wn(function(r,i){(n?jg(e,r,n):jg(e,r)).subscribe(i)})}function Bt(e,t){return wn(function(n,r){var i=null,o=0,s=!1,a=function(){return s&&!i&&r.complete()};n.subscribe(yn(r,function(c){i==null||i.unsubscribe();var d=0,f=o++;rr(e(c,f)).subscribe(i=yn(r,function(p){return r.next(t?t(c,p,f,d++):p)},function(){i=null,a()}))},function(){s=!0,a()}))})}function Oh(e,t,n){var r=qe(e)||t||n?{next:e,error:t,complete:n}:e;return r?wn(function(i,o){var s;(s=r.subscribe)===null||s===void 0||s.call(r);var a=!0;i.subscribe(yn(o,function(c){var d;(d=r.next)===null||d===void 0||d.call(r,c),o.next(c)},function(){var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},function(c){var d;a=!1,(d=r.error)===null||d===void 0||d.call(r,c),o.error(c)},function(){var c,d;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):ts}const on=()=>new Map,jh=e=>{const t=on();return e.forEach((n,r)=>{t.set(r,n)}),t},Er=(e,t,n)=>{let r=e.get(t);return r===void 0&&e.set(t,r=n()),r},NC=(e,t)=>{const n=[];for(const[r,i]of e)n.push(t(i,r));return n},PC=(e,t)=>{for(const[n,r]of e)if(t(r,n))return!0;return!1},Ki=()=>new Set,df=e=>e[e.length-1],AC=(e,t)=>{for(let n=0;n<t.length;n++)e.push(t[n])},oi=Array.from,DC=Array.isArray;class LC{constructor(){this._observers=on()}on(t,n){return Er(this._observers,t,Ki).add(n),n}once(t,n){const r=(...i)=>{this.off(t,r),n(...i)};this.on(t,r)}off(t,n){const r=this._observers.get(t);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(t))}emit(t,n){return oi((this._observers.get(t)||on()).values()).forEach(r=>r(...n))}destroy(){this._observers=on()}}class RC{constructor(){this._observers=on()}on(t,n){Er(this._observers,t,Ki).add(n)}once(t,n){const r=(...i)=>{this.off(t,r),n(...i)};this.on(t,r)}off(t,n){const r=this._observers.get(t);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(t))}emit(t,n){return oi((this._observers.get(t)||on()).values()).forEach(r=>r(...n))}destroy(){this._observers=on()}}const _r=Math.floor,bu=Math.abs,Ub=(e,t)=>e<t?e:t,ns=(e,t)=>e>t?e:t,$b=e=>e!==0?e<0:1/e<0,Ag=1,Dg=2,ff=4,hf=8,Il=32,gr=64,pn=128,Fc=31,Th=63,Di=127,MC=2147483647,zb=Number.MAX_SAFE_INTEGER,UC=Number.isInteger||(e=>typeof e=="number"&&isFinite(e)&&_r(e)===e),$C=e=>e.toLowerCase(),zC=/^\s*/g,FC=e=>e.replace(zC,""),BC=/([A-Z])/g,Lg=(e,t)=>FC(e.replace(BC,n=>`${t}${$C(n)}`)),KC=e=>{const t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=t.codePointAt(i);return r},Ol=typeof TextEncoder<"u"?new TextEncoder:null,VC=e=>Ol.encode(e),WC=Ol?VC:KC;let Xs=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Xs&&Xs.decode(new Uint8Array).length===1&&(Xs=null);class ea{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const rs=()=>new ea,HC=e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t},On=e=>{const t=new Uint8Array(HC(e));let n=0;for(let r=0;r<e.bufs.length;r++){const i=e.bufs[r];t.set(i,n),n+=i.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),n),t},qC=(e,t)=>{const n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(ns(n,t)*2),e.cpos=0)},It=(e,t)=>{const n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(n*2),e.cpos=0),e.cbuf[e.cpos++]=t},Nh=It,je=(e,t)=>{for(;t>Di;)It(e,pn|Di&t),t=_r(t/128);It(e,Di&t)},im=(e,t)=>{const n=$b(t);for(n&&(t=-t),It(e,(t>Th?pn:0)|(n?gr:0)|Th&t),t=_r(t/64);t>0;)It(e,(t>Di?pn:0)|Di&t),t=_r(t/128)},Ph=new Uint8Array(3e4),GC=Ph.length/3,YC=(e,t)=>{if(t.length<GC){const n=Ol.encodeInto(t,Ph).written||0;je(e,n);for(let r=0;r<n;r++)It(e,Ph[r])}else an(e,WC(t))},QC=(e,t)=>{const n=unescape(encodeURIComponent(t)),r=n.length;je(e,r);for(let i=0;i<r;i++)It(e,n.codePointAt(i))},Li=Ol&&Ol.encodeInto?YC:QC,JC=(e,t)=>ta(e,On(t)),ta=(e,t)=>{const n=e.cbuf.length,r=e.cpos,i=Ub(n-r,t.length),o=t.length-i;e.cbuf.set(t.subarray(0,i),r),e.cpos+=i,o>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(ns(n*2,o)),e.cbuf.set(t.subarray(i)),e.cpos=o)},an=(e,t)=>{je(e,t.byteLength),ta(e,t)},om=(e,t)=>{qC(e,t);const n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},XC=(e,t)=>om(e,4).setFloat32(0,t,!1),ZC=(e,t)=>om(e,8).setFloat64(0,t,!1),eI=(e,t)=>om(e,8).setBigInt64(0,t,!1),Rg=new DataView(new ArrayBuffer(4)),tI=e=>(Rg.setFloat32(0,e),Rg.getFloat32(0)===e),jl=(e,t)=>{switch(typeof t){case"string":It(e,119),Li(e,t);break;case"number":UC(t)&&bu(t)<=MC?(It(e,125),im(e,t)):tI(t)?(It(e,124),XC(e,t)):(It(e,123),ZC(e,t));break;case"bigint":It(e,122),eI(e,t);break;case"object":if(t===null)It(e,126);else if(DC(t)){It(e,117),je(e,t.length);for(let n=0;n<t.length;n++)jl(e,t[n])}else if(t instanceof Uint8Array)It(e,116),an(e,t);else{It(e,118);const n=Object.keys(t);je(e,n.length);for(let r=0;r<n.length;r++){const i=n[r];Li(e,i),jl(e,t[i])}}break;case"boolean":It(e,t?120:121);break;default:It(e,127)}};class Mg extends ea{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&je(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}}const Ug=e=>{e.count>0&&(im(e.encoder,e.count===1?e.s:-e.s),e.count>1&&je(e.encoder,e.count-2))};class ku{constructor(){this.encoder=new ea,this.s=0,this.count=0}write(t){this.s===t?this.count++:(Ug(this),this.count=1,this.s=t)}toUint8Array(){return Ug(this),On(this.encoder)}}const $g=e=>{if(e.count>0){const t=e.diff*2+(e.count===1?0:1);im(e.encoder,t),e.count>1&&je(e.encoder,e.count-2)}};class pf{constructor(){this.encoder=new ea,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):($g(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return $g(this),On(this.encoder)}}class nI{constructor(){this.sarr=[],this.s="",this.lensE=new ku}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){const t=new ea;return this.sarr.push(this.s),this.s="",Li(t,this.sarr.join("")),ta(t,this.lensE.toUint8Array()),On(t)}}const si=e=>new Error(e),Zn=()=>{throw si("Method unimplemented")},er=()=>{throw si("Unexpected case")},Fb=si("Unexpected end of array"),Bb=si("Integer out of Range");class Bc{constructor(t){this.arr=t,this.pos=0}}const na=e=>new Bc(e),rI=e=>e.pos!==e.arr.length,iI=(e,t)=>{const n=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n},kn=e=>iI(e,Qe(e)),Tl=e=>e.arr[e.pos++],Qe=e=>{let t=0,n=1;const r=e.arr.length;for(;e.pos<r;){const i=e.arr[e.pos++];if(t=t+(i&Di)*n,n*=128,i<pn)return t;if(t>zb)throw Bb}throw Fb},sm=e=>{let t=e.arr[e.pos++],n=t&Th,r=64;const i=(t&gr)>0?-1:1;if(!(t&pn))return i*n;const o=e.arr.length;for(;e.pos<o;){if(t=e.arr[e.pos++],n=n+(t&Di)*r,r*=128,t<pn)return i*n;if(n>zb)throw Bb}throw Fb},oI=e=>{let t=Qe(e);if(t===0)return"";{let n=String.fromCodePoint(Tl(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(Tl(e));else for(;t>0;){const r=t<1e4?t:1e4,i=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,i),t-=r}return decodeURIComponent(escape(n))}},sI=e=>Xs.decode(kn(e)),nc=Xs?sI:oI,lm=(e,t)=>{const n=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,n},lI=e=>lm(e,4).getFloat32(0,!1),aI=e=>lm(e,8).getFloat64(0,!1),uI=e=>lm(e,8).getBigInt64(0,!1),cI=[e=>{},e=>null,sm,lI,aI,uI,e=>!1,e=>!0,nc,e=>{const t=Qe(e),n={};for(let r=0;r<t;r++){const i=nc(e);n[i]=rc(e)}return n},e=>{const t=Qe(e),n=[];for(let r=0;r<t;r++)n.push(rc(e));return n},kn],rc=e=>cI[127-Tl(e)](e);class zg extends Bc{constructor(t,n){super(t),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),rI(this)?this.count=Qe(this)+1:this.count=-1),this.count--,this.s}}class _u extends Bc{constructor(t){super(t),this.s=0,this.count=0}read(){if(this.count===0){this.s=sm(this);const t=$b(this.s);this.count=1,t&&(this.s=-this.s,this.count=Qe(this)+2)}return this.count--,this.s}}class mf extends Bc{constructor(t){super(t),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const t=sm(this),n=t&1;this.diff=_r(t/2),this.count=1,n&&(this.count=Qe(this)+2)}return this.s+=this.diff,this.count--,this.s}}class dI{constructor(t){this.decoder=new _u(t),this.str=nc(this.decoder),this.spos=0}read(){const t=this.spos+this.decoder.read(),n=this.str.slice(this.spos,t);return this.spos=t,n}}const fI=crypto.getRandomValues.bind(crypto),Kb=()=>fI(new Uint32Array(1))[0],hI="10000000-1000-4000-8000"+-1e11,pI=()=>hI.replace(/[018]/g,e=>(e^Kb()&15>>e/4).toString(16)),ic=Date.now,Fg=e=>new Promise(e);Promise.all.bind(Promise);const Bg=e=>e===void 0?null:e;class mI{constructor(){this.map=new Map}setItem(t,n){this.map.set(t,n)}getItem(t){return this.map.get(t)}}let Vb=new mI,yI=!0;try{typeof localStorage<"u"&&localStorage&&(Vb=localStorage,yI=!1)}catch{}const gI=Vb,vI=Object.assign,Wb=Object.keys,wI=(e,t)=>{for(const n in e)t(e[n],n)},Kg=e=>Wb(e).length,Vg=e=>Wb(e).length,bI=e=>{for(const t in e)return!1;return!0},kI=(e,t)=>{for(const n in e)if(!t(e[n],n))return!1;return!0},Hb=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),_I=(e,t)=>e===t||Vg(e)===Vg(t)&&kI(e,(n,r)=>(n!==void 0||Hb(t,r))&&t[r]===n),xI=Object.freeze,qb=e=>{for(const t in e){const n=e[t];(typeof n=="object"||typeof n=="function")&&qb(e[t])}return xI(e)},am=(e,t,n=0)=>{try{for(;n<e.length;n++)e[n](...t)}finally{n<e.length&&am(e,t,n+1)}},SI=(e,t)=>e===t,Zs=(e,t)=>{if(e==null||t==null)return SI(e,t);if(e.constructor!==t.constructor)return!1;if(e===t)return!0;switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:{if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;break}case Set:{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;break}case Map:{if(e.size!==t.size)return!1;for(const n of e.keys())if(!t.has(n)||!Zs(e.get(n),t.get(n)))return!1;break}case Object:if(Kg(e)!==Kg(t))return!1;for(const n in e)if(!Hb(e,n)||!Zs(e[n],t[n]))return!1;break;case Array:if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!Zs(e[n],t[n]))return!1;break;default:return!1}return!0},EI=(e,t)=>t.includes(e);var Gb={};const Nl=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";let Wn;const CI=()=>{if(Wn===void 0)if(Nl){Wn=on();const e=process.argv;let t=null;for(let n=0;n<e.length;n++){const r=e[n];r[0]==="-"?(t!==null&&Wn.set(t,""),t=r):t!==null&&(Wn.set(t,r),t=null)}t!==null&&Wn.set(t,"")}else typeof location=="object"?(Wn=on(),(location.search||"?").slice(1).split("&").forEach(e=>{if(e.length!==0){const[t,n]=e.split("=");Wn.set(`--${Lg(t,"-")}`,n),Wn.set(`-${Lg(t,"-")}`,n)}})):Wn=on();return Wn},Ah=e=>CI().has(e),oc=e=>Bg(Nl?Gb[e.toUpperCase().replaceAll("-","_")]:gI.getItem(e)),Yb=e=>Ah("--"+e)||oc(e)!==null;Yb("production");const II=Nl&&EI(Gb.FORCE_COLOR,["true","1","2"]),OI=II||!Ah("--no-colors")&&!Yb("no-color")&&(!Nl||process.stdout.isTTY)&&(!Nl||Ah("--color")||oc("COLORTERM")!==null||(oc("TERM")||"").includes("color"));class jI{constructor(t,n){this.left=t,this.right=n}}const sr=(e,t)=>new jI(e,t);typeof DOMParser<"u"&&new DOMParser;const TI=e=>NC(e,(t,n)=>`${n}:${t};`).join(""),Cr=Symbol,Qb=Cr(),Jb=Cr(),NI=Cr(),PI=Cr(),AI=Cr(),Xb=Cr(),DI=Cr(),um=Cr(),LI=Cr(),RI=e=>{var i;e.length===1&&((i=e[0])==null?void 0:i.constructor)===Function&&(e=e[0]());const t=[],n=[];let r=0;for(;r<e.length;r++){const o=e[r];if(o===void 0)break;if(o.constructor===String||o.constructor===Number)t.push(o);else if(o.constructor===Object)break}for(r>0&&n.push(t.join(""));r<e.length;r++){const o=e[r];o instanceof Symbol||n.push(o)}return n},MI={[Qb]:sr("font-weight","bold"),[Jb]:sr("font-weight","normal"),[NI]:sr("color","blue"),[AI]:sr("color","green"),[PI]:sr("color","grey"),[Xb]:sr("color","red"),[DI]:sr("color","purple"),[um]:sr("color","orange"),[LI]:sr("color","black")},UI=e=>{var s;e.length===1&&((s=e[0])==null?void 0:s.constructor)===Function&&(e=e[0]());const t=[],n=[],r=on();let i=[],o=0;for(;o<e.length;o++){const a=e[o],c=MI[a];if(c!==void 0)r.set(c.left,c.right);else{if(a===void 0)break;if(a.constructor===String||a.constructor===Number){const d=TI(r);o>0||d.length>0?(t.push("%c"+a),n.push(d)):t.push(a)}else break}}for(o>0&&(i=n,i.unshift(t.join("")));o<e.length;o++){const a=e[o];a instanceof Symbol||i.push(a)}return i},Zb=OI?UI:RI,$I=(...e)=>{console.log(...Zb(e)),ek.forEach(t=>t.print(e))},zI=(...e)=>{console.warn(...Zb(e)),e.unshift(um),ek.forEach(t=>t.print(e))},ek=Ki(),tk=e=>({[Symbol.iterator](){return this},next:e}),FI=(e,t)=>tk(()=>{let n;do n=e.next();while(!n.done&&!t(n.value));return n}),yf=(e,t)=>tk(()=>{const{done:n,value:r}=e.next();return{done:n,value:n?void 0:t(r)}});class nk{constructor(t,n){this.clock=t,this.len=n}}class Kc{constructor(){this.clients=new Map}}const rk=(e,t,n)=>t.clients.forEach((r,i)=>{const o=e.doc.store.clients.get(i);if(o!=null){const s=o[o.length-1],a=s.id.clock+s.length;for(let c=0,d=r[c];c<r.length&&d.clock<a;d=r[++c])fk(e,o,d.clock,d.len,n)}}),BI=(e,t)=>{let n=0,r=e.length-1;for(;n<=r;){const i=_r((n+r)/2),o=e[i],s=o.clock;if(s<=t){if(t<s+o.len)return i;n=i+1}else r=i-1}return null},ik=(e,t)=>{const n=e.clients.get(t.client);return n!==void 0&&BI(n,t.clock)!==null},cm=e=>{e.clients.forEach(t=>{t.sort((i,o)=>i.clock-o.clock);let n,r;for(n=1,r=1;n<t.length;n++){const i=t[r-1],o=t[n];i.clock+i.len>=o.clock?i.len=ns(i.len,o.clock+o.len-i.clock):(r<n&&(t[r]=o),r++)}t.length=r})},KI=e=>{const t=new Kc;for(let n=0;n<e.length;n++)e[n].clients.forEach((r,i)=>{if(!t.clients.has(i)){const o=r.slice();for(let s=n+1;s<e.length;s++)AC(o,e[s].clients.get(i)||[]);t.clients.set(i,o)}});return cm(t),t},sc=(e,t,n,r)=>{Er(e.clients,t,()=>[]).push(new nk(n,r))},dm=(e,t)=>{je(e.restEncoder,t.clients.size),oi(t.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{e.resetDsCurVal(),je(e.restEncoder,n);const i=r.length;je(e.restEncoder,i);for(let o=0;o<i;o++){const s=r[o];e.writeDsClock(s.clock),e.writeDsLen(s.len)}})},VI=e=>{const t=new Kc,n=Qe(e.restDecoder);for(let r=0;r<n;r++){e.resetDsCurVal();const i=Qe(e.restDecoder),o=Qe(e.restDecoder);if(o>0){const s=Er(t.clients,i,()=>[]);for(let a=0;a<o;a++)s.push(new nk(e.readDsClock(),e.readDsLen()))}}return t},Wg=(e,t,n)=>{const r=new Kc,i=Qe(e.restDecoder);for(let o=0;o<i;o++){e.resetDsCurVal();const s=Qe(e.restDecoder),a=Qe(e.restDecoder),c=n.clients.get(s)||[],d=jt(n,s);for(let f=0;f<a;f++){const p=e.readDsClock(),m=p+e.readDsLen();if(p<d){d<m&&sc(r,s,d,m-d);let v=tr(c,p),b=c[v];for(!b.deleted&&b.id.clock<p&&(c.splice(v+1,0,hc(t,b,p-b.id.clock)),v++);v<c.length&&(b=c[v++],b.id.clock<m);)b.deleted||(m<b.id.clock+b.length&&c.splice(v,0,hc(t,b,m-b.id.clock)),b.delete(t))}else sc(r,s,p,m-p)}}if(r.clients.size>0){const o=new Vc;return je(o.restEncoder,0),dm(o,r),o.toUint8Array()}return null},ok=Kb;class is extends LC{constructor({guid:t=pI(),collectionid:n=null,gc:r=!0,gcFilter:i=()=>!0,meta:o=null,autoLoad:s=!1,shouldLoad:a=!0}={}){super(),this.gc=r,this.gcFilter=i,this.clientID=ok(),this.guid=t,this.collectionid=n,this.share=new Map,this.store=new ck,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=s,this.meta=o,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=Fg(d=>{this.on("load",()=>{this.isLoaded=!0,d(this)})});const c=()=>Fg(d=>{const f=p=>{(p===void 0||p===!0)&&(this.off("sync",f),d())};this.on("sync",f)});this.on("sync",d=>{d===!1&&this.isSynced&&(this.whenSynced=c()),this.isSynced=d===void 0||d===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=c()}load(){const t=this._item;t!==null&&!this.shouldLoad&&Xe(t.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(oi(this.subdocs).map(t=>t.guid))}transact(t,n=null){return Xe(this,t,n)}get(t,n=Lt){const r=Er(this.share,t,()=>{const o=new n;return o._integrate(this,null),o}),i=r.constructor;if(n!==Lt&&i!==n)if(i===Lt){const o=new n;o._map=r._map,r._map.forEach(s=>{for(;s!==null;s=s.left)s.parent=o}),o._start=r._start;for(let s=o._start;s!==null;s=s.right)s.parent=o;return o._length=r._length,this.share.set(t,o),o._integrate(this,null),o}else throw new Error(`Type with the name ${t} has already been defined with a different constructor`);return r}getArray(t=""){return this.get(t,Ao)}getText(t=""){return this.get(t,qo)}getMap(t=""){return this.get(t,Ho)}getXmlElement(t=""){return this.get(t,Go)}getXmlFragment(t=""){return this.get(t,Vi)}toJSON(){const t={};return this.share.forEach((n,r)=>{t[r]=n.toJSON()}),t}destroy(){this.isDestroyed=!0,oi(this.subdocs).forEach(n=>n.destroy());const t=this._item;if(t!==null){this._item=null;const n=t.content;n.doc=new is({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=t,Xe(t.parent.doc,r=>{const i=n.doc;t.deleted||r.subdocsAdded.add(i),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class WI{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=Qe(this.restDecoder),this.dsCurrVal}readDsLen(){const t=Qe(this.restDecoder)+1;return this.dsCurrVal+=t,t}}class Pl extends WI{constructor(t){super(t),this.keys=[],Qe(t),this.keyClockDecoder=new mf(kn(t)),this.clientDecoder=new _u(kn(t)),this.leftClockDecoder=new mf(kn(t)),this.rightClockDecoder=new mf(kn(t)),this.infoDecoder=new zg(kn(t),Tl),this.stringDecoder=new dI(kn(t)),this.parentInfoDecoder=new zg(kn(t),Tl),this.typeRefDecoder=new _u(kn(t)),this.lenDecoder=new _u(kn(t))}readLeftID(){return new Po(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Po(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return rc(this.restDecoder)}readBuf(){return kn(this.restDecoder)}readJSON(){return rc(this.restDecoder)}readKey(){const t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class HI{constructor(){this.restEncoder=rs()}toUint8Array(){return On(this.restEncoder)}resetDsCurVal(){}writeDsClock(t){je(this.restEncoder,t)}writeDsLen(t){je(this.restEncoder,t)}}class qI extends HI{writeLeftID(t){je(this.restEncoder,t.client),je(this.restEncoder,t.clock)}writeRightID(t){je(this.restEncoder,t.client),je(this.restEncoder,t.clock)}writeClient(t){je(this.restEncoder,t)}writeInfo(t){Nh(this.restEncoder,t)}writeString(t){Li(this.restEncoder,t)}writeParentInfo(t){je(this.restEncoder,t?1:0)}writeTypeRef(t){je(this.restEncoder,t)}writeLen(t){je(this.restEncoder,t)}writeAny(t){jl(this.restEncoder,t)}writeBuf(t){an(this.restEncoder,t)}writeJSON(t){Li(this.restEncoder,JSON.stringify(t))}writeKey(t){Li(this.restEncoder,t)}}class sk{constructor(){this.restEncoder=rs(),this.dsCurrVal=0}toUint8Array(){return On(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){const n=t-this.dsCurrVal;this.dsCurrVal=t,je(this.restEncoder,n)}writeDsLen(t){t===0&&er(),je(this.restEncoder,t-1),this.dsCurrVal+=t}}class Vc extends sk{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new pf,this.clientEncoder=new ku,this.leftClockEncoder=new pf,this.rightClockEncoder=new pf,this.infoEncoder=new Mg(Nh),this.stringEncoder=new nI,this.parentInfoEncoder=new Mg(Nh),this.typeRefEncoder=new ku,this.lenEncoder=new ku}toUint8Array(){const t=rs();return je(t,0),an(t,this.keyClockEncoder.toUint8Array()),an(t,this.clientEncoder.toUint8Array()),an(t,this.leftClockEncoder.toUint8Array()),an(t,this.rightClockEncoder.toUint8Array()),an(t,On(this.infoEncoder)),an(t,this.stringEncoder.toUint8Array()),an(t,On(this.parentInfoEncoder)),an(t,this.typeRefEncoder.toUint8Array()),an(t,this.lenEncoder.toUint8Array()),ta(t,On(this.restEncoder)),On(t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){jl(this.restEncoder,t)}writeBuf(t){an(this.restEncoder,t)}writeJSON(t){jl(this.restEncoder,t)}writeKey(t){const n=this.keyMap.get(t);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(n)}}const GI=(e,t,n,r)=>{r=ns(r,t[0].id.clock);const i=tr(t,r);je(e.restEncoder,t.length-i),e.writeClient(n),je(e.restEncoder,r);const o=t[i];o.write(e,r-o.id.clock);for(let s=i+1;s<t.length;s++)t[s].write(e,0)},lk=(e,t,n)=>{const r=new Map;n.forEach((i,o)=>{jt(t,o)>i&&r.set(o,i)}),fm(t).forEach((i,o)=>{n.has(o)||r.set(o,0)}),je(e.restEncoder,r.size),oi(r.entries()).sort((i,o)=>o[0]-i[0]).forEach(([i,o])=>{GI(e,t.clients.get(i),i,o)})},YI=(e,t)=>{const n=on(),r=Qe(e.restDecoder);for(let i=0;i<r;i++){const o=Qe(e.restDecoder),s=new Array(o),a=e.readClient();let c=Qe(e.restDecoder);n.set(a,{i:0,refs:s});for(let d=0;d<o;d++){const f=e.readInfo();switch(Fc&f){case 0:{const p=e.readLen();s[d]=new En(Fe(a,c),p),c+=p;break}case 10:{const p=Qe(e.restDecoder);s[d]=new Cn(Fe(a,c),p),c+=p;break}default:{const p=(f&(gr|pn))===0,m=new kt(Fe(a,c),null,(f&pn)===pn?e.readLeftID():null,null,(f&gr)===gr?e.readRightID():null,p?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,p&&(f&Il)===Il?e.readString():null,Ak(e,f));s[d]=m,c+=m.length}}}}return n},QI=(e,t,n)=>{const r=[];let i=oi(n.keys()).sort((v,b)=>v-b);if(i.length===0)return null;const o=()=>{if(i.length===0)return null;let v=n.get(i[i.length-1]);for(;v.refs.length===v.i;)if(i.pop(),i.length>0)v=n.get(i[i.length-1]);else return null;return v};let s=o();if(s===null)return null;const a=new ck,c=new Map,d=(v,b)=>{const x=c.get(v);(x==null||x>b)&&c.set(v,b)};let f=s.refs[s.i++];const p=new Map,m=()=>{for(const v of r){const b=v.id.client,x=n.get(b);x?(x.i--,a.clients.set(b,x.refs.slice(x.i)),n.delete(b),x.i=0,x.refs=[]):a.clients.set(b,[v]),i=i.filter(P=>P!==b)}r.length=0};for(;;){if(f.constructor!==Cn){const b=Er(p,f.id.client,()=>jt(t,f.id.client))-f.id.clock;if(b<0)r.push(f),d(f.id.client,f.id.clock-1),m();else{const x=f.getMissing(e,t);if(x!==null){r.push(f);const P=n.get(x)||{refs:[],i:0};if(P.refs.length===P.i)d(x,jt(t,x)),m();else{f=P.refs[P.i++];continue}}else(b===0||b<f.length)&&(f.integrate(e,b),p.set(f.id.client,f.id.clock+f.length))}}if(r.length>0)f=r.pop();else if(s!==null&&s.i<s.refs.length)f=s.refs[s.i++];else{if(s=o(),s===null)break;f=s.refs[s.i++]}}if(a.clients.size>0){const v=new Vc;return lk(v,a,new Map),je(v.restEncoder,0),{missing:c,update:v.toUint8Array()}}return null},JI=(e,t)=>lk(e,t.doc.store,t.beforeState),XI=(e,t,n,r=new Pl(e))=>Xe(t,i=>{i.local=!1;let o=!1;const s=i.doc,a=s.store,c=YI(r,s),d=QI(i,a,c),f=a.pendingStructs;if(f){for(const[m,v]of f.missing)if(v<jt(a,m)){o=!0;break}if(d){for(const[m,v]of d.missing){const b=f.missing.get(m);(b==null||b>v)&&f.missing.set(m,v)}f.update=lc([f.update,d.update])}}else a.pendingStructs=d;const p=Wg(r,i,a);if(a.pendingDs){const m=new Pl(na(a.pendingDs));Qe(m.restDecoder);const v=Wg(m,i,a);p&&v?a.pendingDs=lc([p,v]):a.pendingDs=p||v}else a.pendingDs=p;if(o){const m=a.pendingStructs.update;a.pendingStructs=null,ak(i.doc,m)}},n,!1),ak=(e,t,n,r=Pl)=>{const i=na(t);XI(i,e,n,new r(i))};class ZI{constructor(){this.l=[]}}const Hg=()=>new ZI,qg=(e,t)=>e.l.push(t),Gg=(e,t)=>{const n=e.l,r=n.length;e.l=n.filter(i=>t!==i),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},uk=(e,t,n)=>am(e.l,[t,n]);class Po{constructor(t,n){this.client=t,this.clock=n}}const Ja=(e,t)=>e===t||e!==null&&t!==null&&e.client===t.client&&e.clock===t.clock,Fe=(e,t)=>new Po(e,t),e2=e=>{for(const[t,n]of e.doc.share.entries())if(n===e)return t;throw er()},ao=(e,t)=>t===void 0?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!ik(t.ds,e.id),Dh=(e,t)=>{const n=Er(e.meta,Dh,Ki),r=e.doc.store;n.has(t)||(t.sv.forEach((i,o)=>{i<jt(r,o)&&li(e,Fe(o,i))}),rk(e,t.ds,i=>{}),n.add(t))};class ck{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const fm=e=>{const t=new Map;return e.clients.forEach((n,r)=>{const i=n[n.length-1];t.set(r,i.id.clock+i.length)}),t},jt=(e,t)=>{const n=e.clients.get(t);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},dk=(e,t)=>{let n=e.clients.get(t.id.client);if(n===void 0)n=[],e.clients.set(t.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==t.id.clock)throw er()}n.push(t)},tr=(e,t)=>{let n=0,r=e.length-1,i=e[r],o=i.id.clock;if(o===t)return r;let s=_r(t/(o+i.length-1)*r);for(;n<=r;){if(i=e[s],o=i.id.clock,o<=t){if(t<o+i.length)return s;n=s+1}else r=s-1;s=_r((n+r)/2)}throw er()},t2=(e,t)=>{const n=e.clients.get(t.client);return n[tr(n,t.clock)]},gf=t2,Lh=(e,t,n)=>{const r=tr(t,n),i=t[r];return i.id.clock<n&&i instanceof kt?(t.splice(r+1,0,hc(e,i,n-i.id.clock)),r+1):r},li=(e,t)=>{const n=e.doc.store.clients.get(t.client);return n[Lh(e,n,t.clock)]},Yg=(e,t,n)=>{const r=t.clients.get(n.client),i=tr(r,n.clock),o=r[i];return n.clock!==o.id.clock+o.length-1&&o.constructor!==En&&r.splice(i+1,0,hc(e,o,n.clock-o.id.clock+1)),o},n2=(e,t,n)=>{const r=e.clients.get(t.id.client);r[tr(r,t.id.clock)]=n},fk=(e,t,n,r,i)=>{if(r===0)return;const o=n+r;let s=Lh(e,t,n),a;do a=t[s++],o<a.id.clock+a.length&&Lh(e,t,o),i(a);while(s<t.length&&t[s].id.clock<o)};class r2{constructor(t,n,r){this.doc=t,this.deleteSet=new Kc,this.beforeState=fm(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const Qg=(e,t)=>t.deleteSet.clients.size===0&&!PC(t.afterState,(n,r)=>t.beforeState.get(r)!==n)?!1:(cm(t.deleteSet),JI(e,t),dm(e,t.deleteSet),!0),Jg=(e,t,n)=>{const r=t._item;(r===null||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&Er(e.changed,t,Ki).add(n)},xu=(e,t)=>{let n=e[t],r=e[t-1],i=t;for(;i>0;n=r,r=e[--i-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof kt&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}const o=t-i;return o&&e.splice(t+1-o,o),o},i2=(e,t,n)=>{for(const[r,i]of e.clients.entries()){const o=t.clients.get(r);for(let s=i.length-1;s>=0;s--){const a=i[s],c=a.clock+a.len;for(let d=tr(o,a.clock),f=o[d];d<o.length&&f.id.clock<c;f=o[++d]){const p=o[d];if(a.clock+a.len<=p.id.clock)break;p instanceof kt&&p.deleted&&!p.keep&&n(p)&&p.gc(t,!1)}}}},o2=(e,t)=>{e.clients.forEach((n,r)=>{const i=t.clients.get(r);for(let o=n.length-1;o>=0;o--){const s=n[o],a=Ub(i.length-1,1+tr(i,s.clock+s.len-1));for(let c=a,d=i[c];c>0&&d.id.clock>=s.clock;d=i[c])c-=1+xu(i,c)}})},hk=(e,t)=>{if(t<e.length){const n=e[t],r=n.doc,i=r.store,o=n.deleteSet,s=n._mergeStructs;try{cm(o),n.afterState=fm(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const a=[];n.changed.forEach((c,d)=>a.push(()=>{(d._item===null||!d._item.deleted)&&d._callObserver(n,c)})),a.push(()=>{n.changedParentTypes.forEach((c,d)=>{d._dEH.l.length>0&&(d._item===null||!d._item.deleted)&&(c=c.filter(f=>f.target._item===null||!f.target._item.deleted),c.forEach(f=>{f.currentTarget=d,f._path=null}),c.sort((f,p)=>f.path.length-p.path.length),uk(d._dEH,c,n))})}),a.push(()=>r.emit("afterTransaction",[n,r])),am(a,[]),n._needFormattingCleanup&&x2(n)}finally{r.gc&&i2(o,i,r.gcFilter),o2(o,i),n.afterState.forEach((f,p)=>{const m=n.beforeState.get(p)||0;if(m!==f){const v=i.clients.get(p),b=ns(tr(v,m),1);for(let x=v.length-1;x>=b;)x-=1+xu(v,x)}});for(let f=s.length-1;f>=0;f--){const{client:p,clock:m}=s[f].id,v=i.clients.get(p),b=tr(v,m);b+1<v.length&&xu(v,b+1)>1||b>0&&xu(v,b)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&($I(um,Qb,"[yjs] ",Jb,Xb,"Changed the client-id because another client seems to be using it."),r.clientID=ok()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const f=new qI;Qg(f,n)&&r.emit("update",[f.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const f=new Vc;Qg(f,n)&&r.emit("updateV2",[f.toUint8Array(),n.origin,r,n])}const{subdocsAdded:a,subdocsLoaded:c,subdocsRemoved:d}=n;(a.size>0||d.size>0||c.size>0)&&(a.forEach(f=>{f.clientID=r.clientID,f.collectionid==null&&(f.collectionid=r.collectionid),r.subdocs.add(f)}),d.forEach(f=>r.subdocs.delete(f)),r.emit("subdocs",[{loaded:c,added:a,removed:d},r,n]),d.forEach(f=>f.destroy())),e.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,e])):hk(e,t+1)}}},Xe=(e,t,n=null,r=!0)=>{const i=e._transactionCleanups;let o=!1,s=null;e._transaction===null&&(o=!0,e._transaction=new r2(e,n,r),i.push(e._transaction),i.length===1&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{s=t(e._transaction)}finally{if(o){const a=e._transaction===i[0];e._transaction=null,a&&hk(i,0)}}return s};function*s2(e){const t=Qe(e.restDecoder);for(let n=0;n<t;n++){const r=Qe(e.restDecoder),i=e.readClient();let o=Qe(e.restDecoder);for(let s=0;s<r;s++){const a=e.readInfo();if(a===10){const c=Qe(e.restDecoder);yield new Cn(Fe(i,o),c),o+=c}else if(Fc&a){const c=(a&(gr|pn))===0,d=new kt(Fe(i,o),null,(a&pn)===pn?e.readLeftID():null,null,(a&gr)===gr?e.readRightID():null,c?e.readParentInfo()?e.readString():e.readLeftID():null,c&&(a&Il)===Il?e.readString():null,Ak(e,a));yield d,o+=d.length}else{const c=e.readLen();yield new En(Fe(i,o),c),o+=c}}}}class pk{constructor(t,n){this.gen=s2(t),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===Cn);return this.curr}}class l2{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}}const mk=(e,t=sk,n=Pl)=>{const r=new t,i=new pk(new n(na(e)),!1);let o=i.curr;if(o!==null){let s=0,a=o.id.client,c=o.id.clock!==0,d=c?0:o.id.clock+o.length;for(;o!==null;o=i.next())a!==o.id.client&&(d!==0&&(s++,je(r.restEncoder,a),je(r.restEncoder,d)),a=o.id.client,d=0,c=o.id.clock!==0),o.constructor===Cn&&(c=!0),c||(d=o.id.clock+o.length);d!==0&&(s++,je(r.restEncoder,a),je(r.restEncoder,d));const f=rs();return je(f,s),JC(f,r.restEncoder),r.restEncoder=f,r.toUint8Array()}else return je(r.restEncoder,0),r.toUint8Array()},a2=(e,t)=>{if(e.constructor===En){const{client:n,clock:r}=e.id;return new En(Fe(n,r+t),e.length-t)}else if(e.constructor===Cn){const{client:n,clock:r}=e.id;return new Cn(Fe(n,r+t),e.length-t)}else{const n=e,{client:r,clock:i}=n.id;return new kt(Fe(r,i+t),null,Fe(r,i+t-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(t))}},lc=(e,t=Pl,n=Vc)=>{if(e.length===1)return e[0];const r=e.map(f=>new t(na(f)));let i=r.map(f=>new pk(f,!0)),o=null;const s=new n,a=new l2(s);for(;i=i.filter(m=>m.curr!==null),i.sort((m,v)=>{if(m.curr.id.client===v.curr.id.client){const b=m.curr.id.clock-v.curr.id.clock;return b===0?m.curr.constructor===v.curr.constructor?0:m.curr.constructor===Cn?1:-1:b}else return v.curr.id.client-m.curr.id.client}),i.length!==0;){const f=i[0],p=f.curr.id.client;if(o!==null){let m=f.curr,v=!1;for(;m!==null&&m.id.clock+m.length<=o.struct.id.clock+o.struct.length&&m.id.client>=o.struct.id.client;)m=f.next(),v=!0;if(m===null||m.id.client!==p||v&&m.id.clock>o.struct.id.clock+o.struct.length)continue;if(p!==o.struct.id.client)Ts(a,o.struct,o.offset),o={struct:m,offset:0},f.next();else if(o.struct.id.clock+o.struct.length<m.id.clock)if(o.struct.constructor===Cn)o.struct.length=m.id.clock+m.length-o.struct.id.clock;else{Ts(a,o.struct,o.offset);const b=m.id.clock-o.struct.id.clock-o.struct.length;o={struct:new Cn(Fe(p,o.struct.id.clock+o.struct.length),b),offset:0}}else{const b=o.struct.id.clock+o.struct.length-m.id.clock;b>0&&(o.struct.constructor===Cn?o.struct.length-=b:m=a2(m,b)),o.struct.mergeWith(m)||(Ts(a,o.struct,o.offset),o={struct:m,offset:0},f.next())}}else o={struct:f.curr,offset:0},f.next();for(let m=f.curr;m!==null&&m.id.client===p&&m.id.clock===o.struct.id.clock+o.struct.length&&m.constructor!==Cn;m=f.next())Ts(a,o.struct,o.offset),o={struct:m,offset:0}}o!==null&&(Ts(a,o.struct,o.offset),o=null),u2(a);const c=r.map(f=>VI(f)),d=KI(c);return dm(s,d),s.toUint8Array()},yk=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:On(e.encoder.restEncoder)}),e.encoder.restEncoder=rs(),e.written=0)},Ts=(e,t,n)=>{e.written>0&&e.currClient!==t.id.client&&yk(e),e.written===0&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),je(e.encoder.restEncoder,t.id.clock+n)),t.write(e.encoder,n),e.written++},u2=e=>{yk(e);const t=e.encoder.restEncoder;je(t,e.clientStructs.length);for(let n=0;n<e.clientStructs.length;n++){const r=e.clientStructs[n];je(t,r.written),ta(t,r.restEncoder)}},Xg="You must not compute changes after the event-handler fired.";class Wc{constructor(t,n){this.target=t,this.currentTarget=t,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=c2(this.currentTarget,this.target))}deletes(t){return ik(this.transaction.deleteSet,t.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw si(Xg);const t=new Map,n=this.target;this.transaction.changed.get(n).forEach(i=>{if(i!==null){const o=n._map.get(i);let s,a;if(this.adds(o)){let c=o.left;for(;c!==null&&this.adds(c);)c=c.left;if(this.deletes(o))if(c!==null&&this.deletes(c))s="delete",a=df(c.content.getContent());else return;else c!==null&&this.deletes(c)?(s="update",a=df(c.content.getContent())):(s="add",a=void 0)}else if(this.deletes(o))s="delete",a=df(o.content.getContent());else return;t.set(i,{action:s,oldValue:a})}}),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(t===null){if(this.transaction.doc._transactionCleanups.length===0)throw si(Xg);const n=this.target,r=Ki(),i=Ki(),o=[];if(t={added:r,deleted:i,delta:o,keys:this.keys},this.transaction.changed.get(n).has(null)){let a=null;const c=()=>{a&&o.push(a)};for(let d=n._start;d!==null;d=d.right)d.deleted?this.deletes(d)&&!this.adds(d)&&((a===null||a.delete===void 0)&&(c(),a={delete:0}),a.delete+=d.length,i.add(d)):this.adds(d)?((a===null||a.insert===void 0)&&(c(),a={insert:[]}),a.insert=a.insert.concat(d.content.getContent()),r.add(d)):((a===null||a.retain===void 0)&&(c(),a={retain:0}),a.retain+=d.length);a!==null&&a.retain===void 0&&c()}this._changes=t}return t}}const c2=(e,t)=>{const n=[];for(;t._item!==null&&t!==e;){if(t._item.parentSub!==null)n.unshift(t._item.parentSub);else{let r=0,i=t._item.parent._start;for(;i!==t._item&&i!==null;)!i.deleted&&i.countable&&(r+=i.length),i=i.right;n.unshift(r)}t=t._item.parent}return n},Wt=()=>{zI("Invalid access: Add Yjs type to a document before reading data.")},gk=80;let hm=0;class d2{constructor(t,n){t.marker=!0,this.p=t,this.index=n,this.timestamp=hm++}}const f2=e=>{e.timestamp=hm++},vk=(e,t,n)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=hm++},h2=(e,t,n)=>{if(e.length>=gk){const r=e.reduce((i,o)=>i.timestamp<o.timestamp?i:o);return vk(r,t,n),r}else{const r=new d2(t,n);return e.push(r),r}},Hc=(e,t)=>{if(e._start===null||t===0||e._searchMarker===null)return null;const n=e._searchMarker.length===0?null:e._searchMarker.reduce((o,s)=>bu(t-o.index)<bu(t-s.index)?o:s);let r=e._start,i=0;for(n!==null&&(r=n.p,i=n.index,f2(n));r.right!==null&&i<t;){if(!r.deleted&&r.countable){if(t<i+r.length)break;i+=r.length}r=r.right}for(;r.left!==null&&i>t;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return n!==null&&bu(n.index-i)<r.parent.length/gk?(vk(n,r,i),n):h2(e._searchMarker,r,i)},Al=(e,t,n)=>{for(let r=e.length-1;r>=0;r--){const i=e[r];if(n>0){let o=i.p;for(o.marker=!1;o&&(o.deleted||!o.countable);)o=o.left,o&&!o.deleted&&o.countable&&(i.index-=o.length);if(o===null||o.marker===!0){e.splice(r,1);continue}i.p=o,o.marker=!0}(t<i.index||n>0&&t===i.index)&&(i.index=ns(t,i.index+n))}},qc=(e,t,n)=>{const r=e,i=t.changedParentTypes;for(;Er(i,e,()=>[]).push(n),e._item!==null;)e=e._item.parent;uk(r._eH,n,t)};class Lt{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=Hg(),this._dEH=Hg(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,n){this.doc=t,this._item=n}_copy(){throw Zn()}clone(){throw Zn()}_write(t){}get _first(){let t=this._start;for(;t!==null&&t.deleted;)t=t.right;return t}_callObserver(t,n){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){qg(this._eH,t)}observeDeep(t){qg(this._dEH,t)}unobserve(t){Gg(this._eH,t)}unobserveDeep(t){Gg(this._dEH,t)}toJSON(){}}const wk=(e,t,n)=>{e.doc??Wt(),t<0&&(t=e._length+t),n<0&&(n=e._length+n);let r=n-t;const i=[];let o=e._start;for(;o!==null&&r>0;){if(o.countable&&!o.deleted){const s=o.content.getContent();if(s.length<=t)t-=s.length;else{for(let a=t;a<s.length&&r>0;a++)i.push(s[a]),r--;t=0}}o=o.right}return i},bk=e=>{e.doc??Wt();const t=[];let n=e._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let i=0;i<r.length;i++)t.push(r[i])}n=n.right}return t},Dl=(e,t)=>{let n=0,r=e._start;for(e.doc??Wt();r!==null;){if(r.countable&&!r.deleted){const i=r.content.getContent();for(let o=0;o<i.length;o++)t(i[o],n++,e)}r=r.right}},kk=(e,t)=>{const n=[];return Dl(e,(r,i)=>{n.push(t(r,i,e))}),n},p2=e=>{let t=e._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;t!==null&&t.deleted;)t=t.right;if(t===null)return{done:!0,value:void 0};n=t.content.getContent(),r=0,t=t.right}const i=n[r++];return n.length<=r&&(n=null),{done:!1,value:i}}}},_k=(e,t)=>{e.doc??Wt();const n=Hc(e,t);let r=e._start;for(n!==null&&(r=n.p,t-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},ac=(e,t,n,r)=>{let i=n;const o=e.doc,s=o.clientID,a=o.store,c=n===null?t._start:n.right;let d=[];const f=()=>{d.length>0&&(i=new kt(Fe(s,jt(a,s)),i,i&&i.lastId,c,c&&c.id,t,null,new Wi(d)),i.integrate(e,0),d=[])};r.forEach(p=>{if(p===null)d.push(p);else switch(p.constructor){case Number:case Object:case Boolean:case Array:case String:d.push(p);break;default:switch(f(),p.constructor){case Uint8Array:case ArrayBuffer:i=new kt(Fe(s,jt(a,s)),i,i&&i.lastId,c,c&&c.id,t,null,new ra(new Uint8Array(p))),i.integrate(e,0);break;case is:i=new kt(Fe(s,jt(a,s)),i,i&&i.lastId,c,c&&c.id,t,null,new ia(p)),i.integrate(e,0);break;default:if(p instanceof Lt)i=new kt(Fe(s,jt(a,s)),i,i&&i.lastId,c,c&&c.id,t,null,new Ir(p)),i.integrate(e,0);else throw new Error("Unexpected content type in insert operation")}}}),f()},xk=()=>si("Length exceeded!"),Sk=(e,t,n,r)=>{if(n>t._length)throw xk();if(n===0)return t._searchMarker&&Al(t._searchMarker,n,r.length),ac(e,t,null,r);const i=n,o=Hc(t,n);let s=t._start;for(o!==null&&(s=o.p,n-=o.index,n===0&&(s=s.prev,n+=s&&s.countable&&!s.deleted?s.length:0));s!==null;s=s.right)if(!s.deleted&&s.countable){if(n<=s.length){n<s.length&&li(e,Fe(s.id.client,s.id.clock+n));break}n-=s.length}return t._searchMarker&&Al(t._searchMarker,i,r.length),ac(e,t,s,r)},m2=(e,t,n)=>{let i=(t._searchMarker||[]).reduce((o,s)=>s.index>o.index?s:o,{index:0,p:t._start}).p;if(i)for(;i.right;)i=i.right;return ac(e,t,i,n)},Ek=(e,t,n,r)=>{if(r===0)return;const i=n,o=r,s=Hc(t,n);let a=t._start;for(s!==null&&(a=s.p,n-=s.index);a!==null&&n>0;a=a.right)!a.deleted&&a.countable&&(n<a.length&&li(e,Fe(a.id.client,a.id.clock+n)),n-=a.length);for(;r>0&&a!==null;)a.deleted||(r<a.length&&li(e,Fe(a.id.client,a.id.clock+r)),a.delete(e),r-=a.length),a=a.right;if(r>0)throw xk();t._searchMarker&&Al(t._searchMarker,i,-o+r)},uc=(e,t,n)=>{const r=t._map.get(n);r!==void 0&&r.delete(e)},pm=(e,t,n,r)=>{const i=t._map.get(n)||null,o=e.doc,s=o.clientID;let a;if(r==null)a=new Wi([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:a=new Wi([r]);break;case Uint8Array:a=new ra(r);break;case is:a=new ia(r);break;default:if(r instanceof Lt)a=new Ir(r);else throw new Error("Unexpected content type")}new kt(Fe(s,jt(o.store,s)),i,i&&i.lastId,null,null,t,n,a).integrate(e,0)},mm=(e,t)=>{e.doc??Wt();const n=e._map.get(t);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},Ck=e=>{const t={};return e.doc??Wt(),e._map.forEach((n,r)=>{n.deleted||(t[r]=n.content.getContent()[n.length-1])}),t},Ik=(e,t)=>{e.doc??Wt();const n=e._map.get(t);return n!==void 0&&!n.deleted},y2=(e,t)=>{const n={};return e._map.forEach((r,i)=>{let o=r;for(;o!==null&&(!t.sv.has(o.id.client)||o.id.clock>=(t.sv.get(o.id.client)||0));)o=o.left;o!==null&&ao(o,t)&&(n[i]=o.content.getContent()[o.length-1])}),n},Xa=e=>(e.doc??Wt(),FI(e._map.entries(),t=>!t[1].deleted));class g2 extends Wc{}class Ao extends Lt{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){const n=new Ao;return n.push(t),n}_integrate(t,n){super._integrate(t,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Ao}clone(){const t=new Ao;return t.insert(0,this.toArray().map(n=>n instanceof Lt?n.clone():n)),t}get length(){return this.doc??Wt(),this._length}_callObserver(t,n){super._callObserver(t,n),qc(this,t,new g2(this,t))}insert(t,n){this.doc!==null?Xe(this.doc,r=>{Sk(r,this,t,n)}):this._prelimContent.splice(t,0,...n)}push(t){this.doc!==null?Xe(this.doc,n=>{m2(n,this,t)}):this._prelimContent.push(...t)}unshift(t){this.insert(0,t)}delete(t,n=1){this.doc!==null?Xe(this.doc,r=>{Ek(r,this,t,n)}):this._prelimContent.splice(t,n)}get(t){return _k(this,t)}toArray(){return bk(this)}slice(t=0,n=this.length){return wk(this,t,n)}toJSON(){return this.map(t=>t instanceof Lt?t.toJSON():t)}map(t){return kk(this,t)}forEach(t){Dl(this,t)}[Symbol.iterator](){return p2(this)}_write(t){t.writeTypeRef(B2)}}const v2=e=>new Ao;class w2 extends Wc{constructor(t,n,r){super(t,n),this.keysChanged=r}}class Ho extends Lt{constructor(t){super(),this._prelimContent=null,t===void 0?this._prelimContent=new Map:this._prelimContent=new Map(t)}_integrate(t,n){super._integrate(t,n),this._prelimContent.forEach((r,i)=>{this.set(i,r)}),this._prelimContent=null}_copy(){return new Ho}clone(){const t=new Ho;return this.forEach((n,r)=>{t.set(r,n instanceof Lt?n.clone():n)}),t}_callObserver(t,n){qc(this,t,new w2(this,t,n))}toJSON(){this.doc??Wt();const t={};return this._map.forEach((n,r)=>{if(!n.deleted){const i=n.content.getContent()[n.length-1];t[r]=i instanceof Lt?i.toJSON():i}}),t}get size(){return[...Xa(this)].length}keys(){return yf(Xa(this),t=>t[0])}values(){return yf(Xa(this),t=>t[1].content.getContent()[t[1].length-1])}entries(){return yf(Xa(this),t=>[t[0],t[1].content.getContent()[t[1].length-1]])}forEach(t){this.doc??Wt(),this._map.forEach((n,r)=>{n.deleted||t(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(t){this.doc!==null?Xe(this.doc,n=>{uc(n,this,t)}):this._prelimContent.delete(t)}set(t,n){return this.doc!==null?Xe(this.doc,r=>{pm(r,this,t,n)}):this._prelimContent.set(t,n),n}get(t){return mm(this,t)}has(t){return Ik(this,t)}clear(){this.doc!==null?Xe(this.doc,t=>{this.forEach(function(n,r,i){uc(t,i,r)})}):this._prelimContent.clear()}_write(t){t.writeTypeRef(K2)}}const b2=e=>new Ho,Vr=(e,t)=>e===t||typeof e=="object"&&typeof t=="object"&&e&&t&&_I(e,t);class Rh{constructor(t,n,r,i){this.left=t,this.right=n,this.index=r,this.currentAttributes=i}forward(){switch(this.right===null&&er(),this.right.content.constructor){case xt:this.right.deleted||os(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const Zg=(e,t,n)=>{for(;t.right!==null&&n>0;){switch(t.right.content.constructor){case xt:t.right.deleted||os(t.currentAttributes,t.right.content);break;default:t.right.deleted||(n<t.right.length&&li(e,Fe(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length);break}t.left=t.right,t.right=t.right.right}return t},Za=(e,t,n,r)=>{const i=new Map,o=r?Hc(t,n):null;if(o){const s=new Rh(o.p.left,o.p,o.index,i);return Zg(e,s,n-o.index)}else{const s=new Rh(null,t._start,0,i);return Zg(e,s,n)}},Ok=(e,t,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===xt&&Vr(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const i=e.doc,o=i.clientID;r.forEach((s,a)=>{const c=n.left,d=n.right,f=new kt(Fe(o,jt(i.store,o)),c,c&&c.lastId,d,d&&d.id,t,null,new xt(a,s));f.integrate(e,0),n.right=f,n.forward()})},os=(e,t)=>{const{key:n,value:r}=t;r===null?e.delete(n):e.set(n,r)},jk=(e,t)=>{for(;e.right!==null;){if(!(e.right.deleted||e.right.content.constructor===xt&&Vr(t[e.right.content.key]??null,e.right.content.value)))break;e.forward()}},Tk=(e,t,n,r)=>{const i=e.doc,o=i.clientID,s=new Map;for(const a in r){const c=r[a],d=n.currentAttributes.get(a)??null;if(!Vr(d,c)){s.set(a,d);const{left:f,right:p}=n;n.right=new kt(Fe(o,jt(i.store,o)),f,f&&f.lastId,p,p&&p.id,t,null,new xt(a,c)),n.right.integrate(e,0),n.forward()}}return s},vf=(e,t,n,r,i)=>{n.currentAttributes.forEach((m,v)=>{i[v]===void 0&&(i[v]=null)});const o=e.doc,s=o.clientID;jk(n,i);const a=Tk(e,t,n,i),c=r.constructor===String?new nr(r):r instanceof Lt?new Ir(r):new Gi(r);let{left:d,right:f,index:p}=n;t._searchMarker&&Al(t._searchMarker,n.index,c.getLength()),f=new kt(Fe(s,jt(o.store,s)),d,d&&d.lastId,f,f&&f.id,t,null,c),f.integrate(e,0),n.right=f,n.index=p,n.forward(),Ok(e,t,n,a)},ev=(e,t,n,r,i)=>{const o=e.doc,s=o.clientID;jk(n,i);const a=Tk(e,t,n,i);e:for(;n.right!==null&&(r>0||a.size>0&&(n.right.deleted||n.right.content.constructor===xt));){if(!n.right.deleted)switch(n.right.content.constructor){case xt:{const{key:c,value:d}=n.right.content,f=i[c];if(f!==void 0){if(Vr(f,d))a.delete(c);else{if(r===0)break e;a.set(c,d)}n.right.delete(e)}else n.currentAttributes.set(c,d);break}default:r<n.right.length&&li(e,Fe(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let c="";for(;r>0;r--)c+=`
`;n.right=new kt(Fe(s,jt(o.store,s)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new nr(c)),n.right.integrate(e,0),n.forward()}Ok(e,t,n,a)},Nk=(e,t,n,r,i)=>{let o=t;const s=on();for(;o&&(!o.countable||o.deleted);){if(!o.deleted&&o.content.constructor===xt){const d=o.content;s.set(d.key,d)}o=o.right}let a=0,c=!1;for(;t!==o;){if(n===t&&(c=!0),!t.deleted){const d=t.content;switch(d.constructor){case xt:{const{key:f,value:p}=d,m=r.get(f)??null;(s.get(f)!==d||m===p)&&(t.delete(e),a++,!c&&(i.get(f)??null)===p&&m!==p&&(m===null?i.delete(f):i.set(f,m))),!c&&!t.deleted&&os(i,d);break}}}t=t.right}return a},k2=(e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const n=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===xt){const r=t.content.key;n.has(r)?t.delete(e):n.add(r)}t=t.left}},_2=e=>{let t=0;return Xe(e.doc,n=>{let r=e._start,i=e._start,o=on();const s=jh(o);for(;i;){if(i.deleted===!1)switch(i.content.constructor){case xt:os(s,i.content);break;default:t+=Nk(n,r,i,o,s),o=jh(s),r=i;break}i=i.right}}),t},x2=e=>{const t=new Set,n=e.doc;for(const[r,i]of e.afterState.entries()){const o=e.beforeState.get(r)||0;i!==o&&fk(e,n.store.clients.get(r),o,i,s=>{!s.deleted&&s.content.constructor===xt&&s.constructor!==En&&t.add(s.parent)})}Xe(n,r=>{rk(e,e.deleteSet,i=>{if(i instanceof En||!i.parent._hasFormatting||t.has(i.parent))return;const o=i.parent;i.content.constructor===xt?t.add(o):k2(r,i)});for(const i of t)_2(i)})},tv=(e,t,n)=>{const r=n,i=jh(t.currentAttributes),o=t.right;for(;n>0&&t.right!==null;){if(t.right.deleted===!1)switch(t.right.content.constructor){case Ir:case Gi:case nr:n<t.right.length&&li(e,Fe(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e);break}t.forward()}o&&Nk(e,o,t.right,i,t.currentAttributes);const s=(t.left||t.right).parent;return s._searchMarker&&Al(s._searchMarker,t.index,-r+n),t};class S2 extends Wc{constructor(t,n,r){super(t,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(i=>{i===null?this.childListChanged=!0:this.keysChanged.add(i)})}get changes(){if(this._changes===null){const t={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=t}return this._changes}get delta(){if(this._delta===null){const t=this.target.doc,n=[];Xe(t,r=>{const i=new Map,o=new Map;let s=this.target._start,a=null;const c={};let d="",f=0,p=0;const m=()=>{if(a!==null){let v=null;switch(a){case"delete":p>0&&(v={delete:p}),p=0;break;case"insert":(typeof d=="object"||d.length>0)&&(v={insert:d},i.size>0&&(v.attributes={},i.forEach((b,x)=>{b!==null&&(v.attributes[x]=b)}))),d="";break;case"retain":f>0&&(v={retain:f},bI(c)||(v.attributes=vI({},c))),f=0;break}v&&n.push(v),a=null}};for(;s!==null;){switch(s.content.constructor){case Ir:case Gi:this.adds(s)?this.deletes(s)||(m(),a="insert",d=s.content.getContent()[0],m()):this.deletes(s)?(a!=="delete"&&(m(),a="delete"),p+=1):s.deleted||(a!=="retain"&&(m(),a="retain"),f+=1);break;case nr:this.adds(s)?this.deletes(s)||(a!=="insert"&&(m(),a="insert"),d+=s.content.str):this.deletes(s)?(a!=="delete"&&(m(),a="delete"),p+=s.length):s.deleted||(a!=="retain"&&(m(),a="retain"),f+=s.length);break;case xt:{const{key:v,value:b}=s.content;if(this.adds(s)){if(!this.deletes(s)){const x=i.get(v)??null;Vr(x,b)?b!==null&&s.delete(r):(a==="retain"&&m(),Vr(b,o.get(v)??null)?delete c[v]:c[v]=b)}}else if(this.deletes(s)){o.set(v,b);const x=i.get(v)??null;Vr(x,b)||(a==="retain"&&m(),c[v]=x)}else if(!s.deleted){o.set(v,b);const x=c[v];x!==void 0&&(Vr(x,b)?x!==null&&s.delete(r):(a==="retain"&&m(),b===null?delete c[v]:c[v]=b))}s.deleted||(a==="insert"&&m(),os(i,s.content));break}}s=s.right}for(m();n.length>0;){const v=n[n.length-1];if(v.retain!==void 0&&v.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class qo extends Lt{constructor(t){super(),this._pending=t!==void 0?[()=>this.insert(0,t)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??Wt(),this._length}_integrate(t,n){super._integrate(t,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new qo}clone(){const t=new qo;return t.applyDelta(this.toDelta()),t}_callObserver(t,n){super._callObserver(t,n);const r=new S2(this,t,n);qc(this,t,r),!t.local&&this._hasFormatting&&(t._needFormattingCleanup=!0)}toString(){this.doc??Wt();let t="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===nr&&(t+=n.content.str),n=n.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:n=!0}={}){this.doc!==null?Xe(this.doc,r=>{const i=new Rh(null,this._start,0,new Map);for(let o=0;o<t.length;o++){const s=t[o];if(s.insert!==void 0){const a=!n&&typeof s.insert=="string"&&o===t.length-1&&i.right===null&&s.insert.slice(-1)===`
`?s.insert.slice(0,-1):s.insert;(typeof a!="string"||a.length>0)&&vf(r,this,i,a,s.attributes||{})}else s.retain!==void 0?ev(r,this,i,s.retain,s.attributes||{}):s.delete!==void 0&&tv(r,i,s.delete)}}):this._pending.push(()=>this.applyDelta(t))}toDelta(t,n,r){this.doc??Wt();const i=[],o=new Map,s=this.doc;let a="",c=this._start;function d(){if(a.length>0){const p={};let m=!1;o.forEach((b,x)=>{m=!0,p[x]=b});const v={insert:a};m&&(v.attributes=p),i.push(v),a=""}}const f=()=>{for(;c!==null;){if(ao(c,t)||n!==void 0&&ao(c,n))switch(c.content.constructor){case nr:{const p=o.get("ychange");t!==void 0&&!ao(c,t)?(p===void 0||p.user!==c.id.client||p.type!=="removed")&&(d(),o.set("ychange",r?r("removed",c.id):{type:"removed"})):n!==void 0&&!ao(c,n)?(p===void 0||p.user!==c.id.client||p.type!=="added")&&(d(),o.set("ychange",r?r("added",c.id):{type:"added"})):p!==void 0&&(d(),o.delete("ychange")),a+=c.content.str;break}case Ir:case Gi:{d();const p={insert:c.content.getContent()[0]};if(o.size>0){const m={};p.attributes=m,o.forEach((v,b)=>{m[b]=v})}i.push(p);break}case xt:ao(c,t)&&(d(),os(o,c.content));break}c=c.right}d()};return t||n?Xe(s,p=>{t&&Dh(p,t),n&&Dh(p,n),f()},"cleanup"):f(),i}insert(t,n,r){if(n.length<=0)return;const i=this.doc;i!==null?Xe(i,o=>{const s=Za(o,this,t,!r);r||(r={},s.currentAttributes.forEach((a,c)=>{r[c]=a})),vf(o,this,s,n,r)}):this._pending.push(()=>this.insert(t,n,r))}insertEmbed(t,n,r){const i=this.doc;i!==null?Xe(i,o=>{const s=Za(o,this,t,!r);vf(o,this,s,n,r||{})}):this._pending.push(()=>this.insertEmbed(t,n,r||{}))}delete(t,n){if(n===0)return;const r=this.doc;r!==null?Xe(r,i=>{tv(i,Za(i,this,t,!0),n)}):this._pending.push(()=>this.delete(t,n))}format(t,n,r){if(n===0)return;const i=this.doc;i!==null?Xe(i,o=>{const s=Za(o,this,t,!1);s.right!==null&&ev(o,this,s,n,r)}):this._pending.push(()=>this.format(t,n,r))}removeAttribute(t){this.doc!==null?Xe(this.doc,n=>{uc(n,this,t)}):this._pending.push(()=>this.removeAttribute(t))}setAttribute(t,n){this.doc!==null?Xe(this.doc,r=>{pm(r,this,t,n)}):this._pending.push(()=>this.setAttribute(t,n))}getAttribute(t){return mm(this,t)}getAttributes(){return Ck(this)}_write(t){t.writeTypeRef(V2)}}const E2=e=>new qo;class wf{constructor(t,n=()=>!0){this._filter=n,this._root=t,this._currentNode=t._start,this._firstCall=!0,t.doc??Wt()}[Symbol.iterator](){return this}next(){let t=this._currentNode,n=t&&t.content&&t.content.type;if(t!==null&&(!this._firstCall||t.deleted||!this._filter(n)))do if(n=t.content.type,!t.deleted&&(n.constructor===Go||n.constructor===Vi)&&n._start!==null)t=n._start;else for(;t!==null;){const r=t.next;if(r!==null){t=r;break}else t.parent===this._root?t=null:t=t.parent._item}while(t!==null&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,t===null?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}}class Vi extends Lt{constructor(){super(),this._prelimContent=[]}get firstChild(){const t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,n){super._integrate(t,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Vi}clone(){const t=new Vi;return t.insert(0,this.toArray().map(n=>n instanceof Lt?n.clone():n)),t}get length(){return this.doc??Wt(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(t){return new wf(this,t)}querySelector(t){t=t.toUpperCase();const r=new wf(this,i=>i.nodeName&&i.nodeName.toUpperCase()===t).next();return r.done?null:r.value}querySelectorAll(t){return t=t.toUpperCase(),oi(new wf(this,n=>n.nodeName&&n.nodeName.toUpperCase()===t))}_callObserver(t,n){qc(this,t,new O2(this,n,t))}toString(){return kk(this,t=>t.toString()).join("")}toJSON(){return this.toString()}toDOM(t=document,n={},r){const i=t.createDocumentFragment();return r!==void 0&&r._createAssociation(i,this),Dl(this,o=>{i.insertBefore(o.toDOM(t,n,r),null)}),i}insert(t,n){this.doc!==null?Xe(this.doc,r=>{Sk(r,this,t,n)}):this._prelimContent.splice(t,0,...n)}insertAfter(t,n){if(this.doc!==null)Xe(this.doc,r=>{const i=t&&t instanceof Lt?t._item:t;ac(r,this,i,n)});else{const r=this._prelimContent,i=t===null?0:r.findIndex(o=>o===t)+1;if(i===0&&t!==null)throw si("Reference item not found");r.splice(i,0,...n)}}delete(t,n=1){this.doc!==null?Xe(this.doc,r=>{Ek(r,this,t,n)}):this._prelimContent.splice(t,n)}toArray(){return bk(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return _k(this,t)}slice(t=0,n=this.length){return wk(this,t,n)}forEach(t){Dl(this,t)}_write(t){t.writeTypeRef(H2)}}const C2=e=>new Vi;class Go extends Vi{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,n){super._integrate(t,n),this._prelimAttrs.forEach((r,i)=>{this.setAttribute(i,r)}),this._prelimAttrs=null}_copy(){return new Go(this.nodeName)}clone(){const t=new Go(this.nodeName),n=this.getAttributes();return wI(n,(r,i)=>{typeof r=="string"&&t.setAttribute(i,r)}),t.insert(0,this.toArray().map(r=>r instanceof Lt?r.clone():r)),t}toString(){const t=this.getAttributes(),n=[],r=[];for(const a in t)r.push(a);r.sort();const i=r.length;for(let a=0;a<i;a++){const c=r[a];n.push(c+'="'+t[c]+'"')}const o=this.nodeName.toLocaleLowerCase(),s=n.length>0?" "+n.join(" "):"";return`<${o}${s}>${super.toString()}</${o}>`}removeAttribute(t){this.doc!==null?Xe(this.doc,n=>{uc(n,this,t)}):this._prelimAttrs.delete(t)}setAttribute(t,n){this.doc!==null?Xe(this.doc,r=>{pm(r,this,t,n)}):this._prelimAttrs.set(t,n)}getAttribute(t){return mm(this,t)}hasAttribute(t){return Ik(this,t)}getAttributes(t){return t?y2(this,t):Ck(this)}toDOM(t=document,n={},r){const i=t.createElement(this.nodeName),o=this.getAttributes();for(const s in o){const a=o[s];typeof a=="string"&&i.setAttribute(s,a)}return Dl(this,s=>{i.appendChild(s.toDOM(t,n,r))}),r!==void 0&&r._createAssociation(i,this),i}_write(t){t.writeTypeRef(W2),t.writeKey(this.nodeName)}}const I2=e=>new Go(e.readKey());class O2 extends Wc{constructor(t,n,r){super(t,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(i=>{i===null?this.childListChanged=!0:this.attributesChanged.add(i)})}}class cc extends Ho{constructor(t){super(),this.hookName=t}_copy(){return new cc(this.hookName)}clone(){const t=new cc(this.hookName);return this.forEach((n,r)=>{t.set(r,n)}),t}toDOM(t=document,n={},r){const i=n[this.hookName];let o;return i!==void 0?o=i.createDom(this):o=document.createElement(this.hookName),o.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(o,this),o}_write(t){t.writeTypeRef(q2),t.writeKey(this.hookName)}}const j2=e=>new cc(e.readKey());class dc extends qo{get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new dc}clone(){const t=new dc;return t.applyDelta(this.toDelta()),t}toDOM(t=document,n,r){const i=t.createTextNode(this.toString());return r!==void 0&&r._createAssociation(i,this),i}toString(){return this.toDelta().map(t=>{const n=[];for(const i in t.attributes){const o=[];for(const s in t.attributes[i])o.push({key:s,value:t.attributes[i][s]});o.sort((s,a)=>s.key<a.key?-1:1),n.push({nodeName:i,attrs:o})}n.sort((i,o)=>i.nodeName<o.nodeName?-1:1);let r="";for(let i=0;i<n.length;i++){const o=n[i];r+=`<${o.nodeName}`;for(let s=0;s<o.attrs.length;s++){const a=o.attrs[s];r+=` ${a.key}="${a.value}"`}r+=">"}r+=t.insert;for(let i=n.length-1;i>=0;i--)r+=`</${n[i].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(G2)}}const T2=e=>new dc;class ym{constructor(t,n){this.id=t,this.length=n}get deleted(){throw Zn()}mergeWith(t){return!1}write(t,n,r){throw Zn()}integrate(t,n){throw Zn()}}const N2=0;class En extends ym{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,n){n>0&&(this.id.clock+=n,this.length-=n),dk(t.doc.store,this)}write(t,n){t.writeInfo(N2),t.writeLen(this.length-n)}getMissing(t,n){return null}}class ra{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new ra(this.content)}splice(t){throw Zn()}mergeWith(t){return!1}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeBuf(this.content)}getRef(){return 3}}const P2=e=>new ra(e.readBuf());class Ll{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Ll(this.len)}splice(t){const n=new Ll(this.len-t);return this.len=t,n}mergeWith(t){return this.len+=t.len,!0}integrate(t,n){sc(t.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(t){}gc(t){}write(t,n){t.writeLen(this.len-n)}getRef(){return 1}}const A2=e=>new Ll(e.readLen()),Pk=(e,t)=>new is({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class ia{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;const n={};this.opts=n,t.gc||(n.gc=!1),t.autoLoad&&(n.autoLoad=!0),t.meta!==null&&(n.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new ia(Pk(this.doc.guid,this.opts))}splice(t){throw Zn()}mergeWith(t){return!1}integrate(t,n){this.doc._item=n,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,n){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}}const D2=e=>new ia(Pk(e.readString(),e.readAny()));class Gi{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new Gi(this.embed)}splice(t){throw Zn()}mergeWith(t){return!1}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeJSON(this.embed)}getRef(){return 5}}const L2=e=>new Gi(e.readJSON());class xt{constructor(t,n){this.key=t,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new xt(this.key,this.value)}splice(t){throw Zn()}mergeWith(t){return!1}integrate(t,n){const r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(t){}gc(t){}write(t,n){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}}const R2=e=>new xt(e.readKey(),e.readJSON());class fc{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new fc(this.arr)}splice(t){const n=new fc(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){const r=this.arr.length;t.writeLen(r-n);for(let i=n;i<r;i++){const o=this.arr[i];t.writeString(o===void 0?"undefined":JSON.stringify(o))}}getRef(){return 2}}const M2=e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++){const i=e.readString();i==="undefined"?n.push(void 0):n.push(JSON.parse(i))}return new fc(n)},U2=oc("node_env")==="development";class Wi{constructor(t){this.arr=t,U2&&qb(t)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Wi(this.arr)}splice(t){const n=new Wi(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){const r=this.arr.length;t.writeLen(r-n);for(let i=n;i<r;i++){const o=this.arr[i];t.writeAny(o)}}getRef(){return 8}}const $2=e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++)n.push(e.readAny());return new Wi(n)};class nr{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new nr(this.str)}splice(t){const n=new nr(this.str.slice(t));this.str=this.str.slice(0,t);const r=this.str.charCodeAt(t-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,t-1)+"",n.str=""+n.str.slice(1)),n}mergeWith(t){return this.str+=t.str,!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const z2=e=>new nr(e.readString()),F2=[v2,b2,E2,I2,C2,j2,T2],B2=0,K2=1,V2=2,W2=3,H2=4,q2=5,G2=6;class Ir{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Ir(this.type._copy())}splice(t){throw Zn()}mergeWith(t){return!1}integrate(t,n){this.type._integrate(t.doc,n)}delete(t){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(t.beforeState.get(n.id.client)||0)&&t._mergeStructs.push(n):n.delete(t),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(t.beforeState.get(r.id.client)||0)&&t._mergeStructs.push(r):r.delete(t)}),t.changed.delete(this.type)}gc(t){let n=this.type._start;for(;n!==null;)n.gc(t,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(t,!0),r=r.left}),this.type._map=new Map}write(t,n){this.type._write(t)}getRef(){return 7}}const Y2=e=>new Ir(F2[e.readTypeRef()](e)),hc=(e,t,n)=>{const{client:r,clock:i}=t.id,o=new kt(Fe(r,i+n),t,Fe(r,i+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&o.markDeleted(),t.keep&&(o.keep=!0),t.redone!==null&&(o.redone=Fe(t.redone.client,t.redone.clock+n)),t.right=o,o.right!==null&&(o.right.left=o),e._mergeStructs.push(o),o.parentSub!==null&&o.right===null&&o.parent._map.set(o.parentSub,o),t.length=n,o};class kt extends ym{constructor(t,n,r,i,o,s,a,c){super(t,c.getLength()),this.origin=r,this.left=n,this.right=i,this.rightOrigin=o,this.parent=s,this.parentSub=a,this.redone=null,this.content=c,this.info=this.content.isCountable()?Dg:0}set marker(t){(this.info&hf)>0!==t&&(this.info^=hf)}get marker(){return(this.info&hf)>0}get keep(){return(this.info&Ag)>0}set keep(t){this.keep!==t&&(this.info^=Ag)}get countable(){return(this.info&Dg)>0}get deleted(){return(this.info&ff)>0}set deleted(t){this.deleted!==t&&(this.info^=ff)}markDeleted(){this.info|=ff}getMissing(t,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=jt(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=jt(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Po&&this.id.client!==this.parent.client&&this.parent.clock>=jt(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Yg(t,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=li(t,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===En||this.right&&this.right.constructor===En)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===kt?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===kt&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===Po){const r=gf(n,this.parent);r.constructor===En?this.parent=null:this.parent=r.content.type}return null}integrate(t,n){if(n>0&&(this.id.clock+=n,this.left=Yg(t,t.doc.store,Fe(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,i;if(r!==null)i=r.right;else if(this.parentSub!==null)for(i=this.parent._map.get(this.parentSub)||null;i!==null&&i.left!==null;)i=i.left;else i=this.parent._start;const o=new Set,s=new Set;for(;i!==null&&i!==this.right;){if(s.add(i),o.add(i),Ja(this.origin,i.origin)){if(i.id.client<this.id.client)r=i,o.clear();else if(Ja(this.rightOrigin,i.rightOrigin))break}else if(i.origin!==null&&s.has(gf(t.doc.store,i.origin)))o.has(gf(t.doc.store,i.origin))||(r=i,o.clear());else break;i=i.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(t)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),dk(t.doc.store,this),this.content.integrate(t,this),Jg(t,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(t)}else new En(this.id,this.length).integrate(t,0)}get next(){let t=this.right;for(;t!==null&&t.deleted;)t=t.right;return t}get prev(){let t=this.left;for(;t!==null&&t.deleted;)t=t.left;return t}get lastId(){return this.length===1?this.id:Fe(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&Ja(t.origin,this.lastId)&&this.right===t&&Ja(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&this.redone===null&&t.redone===null&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===t&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),t.keep&&(this.keep=!0),this.right=t.right,this.right!==null&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),sc(t.deleteSet,this.id.client,this.id.clock,this.length),Jg(t,n,this.parentSub),this.content.delete(t)}}gc(t,n){if(!this.deleted)throw er();this.content.gc(t),n?n2(t,this,new En(this.id,this.length)):this.content=new Ll(this.length)}write(t,n){const r=n>0?Fe(this.id.client,this.id.clock+n-1):this.origin,i=this.rightOrigin,o=this.parentSub,s=this.content.getRef()&Fc|(r===null?0:pn)|(i===null?0:gr)|(o===null?0:Il);if(t.writeInfo(s),r!==null&&t.writeLeftID(r),i!==null&&t.writeRightID(i),r===null&&i===null){const a=this.parent;if(a._item!==void 0){const c=a._item;if(c===null){const d=e2(a);t.writeParentInfo(!0),t.writeString(d)}else t.writeParentInfo(!1),t.writeLeftID(c.id)}else a.constructor===String?(t.writeParentInfo(!0),t.writeString(a)):a.constructor===Po?(t.writeParentInfo(!1),t.writeLeftID(a)):er();o!==null&&t.writeString(o)}this.content.write(t,n)}}const Ak=(e,t)=>Q2[t&Fc](e),Q2=[()=>{er()},A2,M2,P2,z2,L2,R2,Y2,$2,D2,()=>{er()}],J2=10;class Cn extends ym{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,n){er()}write(t,n){t.writeInfo(J2),je(t.restEncoder,this.length-n)}getMissing(t,n){return null}}const Dk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},Lk="__ $YJS$ __";Dk[Lk]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");Dk[Lk]=!0;const bf=new FinalizationRegistry(({cache:e,key:t})=>{delete e[t]});function Rk(e){var t,n;return(t=(n=e._novip)._docCache)!==null&&t!==void 0?t:n._docCache={cache:{},get size(){return Object.keys(this.cache).length},find(r,i,o){const s=kf(r,i,o),a=this.cache[s];return a?a.deref():void 0},add(r){var i;const{parentTable:o,parentId:s,parentProp:a}=r.meta;if(!o||!a||s==null)throw new Error("Missing Dexie-related metadata in Y.Doc");const c=kf(o,s,a),d=(i=this.cache[c])===null||i===void 0?void 0:i.deref();d&&bf.unregister(d),this.cache[c]=new WeakRef(r),bf.register(r,{cache:this.cache,key:c},r)},delete(r){bf.unregister(r);const i=kf(r.meta.parentTable,r.meta.parentId,r.meta.parentProp),o=this.cache[i];(o==null?void 0:o.deref())===r&&delete this.cache[i]}}}const el=new WeakSet;function Mh(e){if(el.has(e))throw new Error(`Y.Doc ${e.meta.parentId} has been destroyed`)}function kf(e,t,n){return`${e}[${t}].${n}`}function X2(e,t,n,r,i,o){let s=t.find(n,o,r);return s||(s=new is({meta:{db:e,updatesTable:i,parentProp:r,parentTable:n,parentId:o}}),t.add(s),s.on("destroy",()=>{el.add(s),t.delete(s)}),s)}const{getByKeyPath:xN}=De;let Mk=null;function nv(e){Mk=e}function Z2(e,t,n,r,i,o){let s=0,a=!0;const c=ei(()=>{Mh(t);const p=n.table(i);return Promise.all([(s>0?p.where("i").between(s,1/0,!1).toArray().then(m=>m.filter(v=>Mc(v.k,o)===0)):p.where({k:o}).toArray()).then(m=>m),n.table(r).where(":id").equals(o).toArray()])}).subscribe(([p,m])=>{if(p.length>0&&(s=p[p.length-1].i),m.length===0){t.destroy();return}Mh(t),p.length>0&&Xe(t,()=>{p.forEach(v=>{try{nv(v),ak(t,v.u)}finally{nv(null)}})},e,!1),a&&(a=!1,t.emit("load",[t]))},p=>{e.on("error").fire(p)}),d=(p,m)=>{m!==e&&n.table(i).add({k:o,u:p,f:1}).then(v=>{v===s-1&&++s}).catch(v=>{e.on("error").fire(v)})},f=()=>{c.unsubscribe(),t.off("updateV2",d),t.off("destroy",f)};return t.on("updateV2",d),t.on("destroy",f),f}function Uk(){}function eO(e,t){return e===Uk?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then(function(){return t.apply(r,o)})}return t.apply(this,arguments)}}function tO(e,t){return e===Uk?t:function(){e.apply(this,arguments),t.apply(this,arguments)}}const Ns=new WeakMap;function rv(){return De.Events(null,"load","sync","error")}class Vt{static getOrCreateDocument(t,n,r,i){var o,s;const a=Rk(t),c=(s=(o=t.table(n).schema.yProps)===null||o===void 0?void 0:o.find(d=>d.prop===r))===null||s===void 0?void 0:s.updatesTable;if(!c)throw new Error(`Updates table for ${n}.${r} not found`);return X2(t,a,n,r,c,i)}static load(t,n){var r;let i=Ns.get(t);return i?(++i.refCount,(n==null?void 0:n.gracePeriod)!=null&&i.graceTimeout<n.gracePeriod&&(i.graceTimeout=n.gracePeriod),i.graceTimer&&(clearTimeout(i.graceTimer),i.graceTimer=null)):(i=new Vt(t),i.graceTimeout=(r=n==null?void 0:n.gracePeriod)!==null&&r!==void 0?r:-1,Ns.set(t,i)),i}static release(t){if(!t||el.has(t))return;const n=Ns.get(t);n?--n.refCount<=0&&(n.graceTimeout<0?n._release():n.graceTimer||(n.graceTimer=setTimeout(()=>{n.graceTimer=null,n.refCount===0&&n._release()},n.graceTimeout))):t.destroy()}_release(){this.doc&&Promise.resolve(Vt.on("beforeunload").fire(this)).finally(()=>{var t;this.refCount===0&&((t=this.doc)===null||t===void 0||t.destroy())})}static for(t){return Ns.get(t)}static get currentUpdateRow(){return Mk}get whenLoaded(){return this._whenLoaded||(this._whenLoaded=new Promise((t,n)=>{if(!this.doc){n(new Error("No Y.Doc associated with this provider"));return}this.doc.isLoaded?t():this._error?n(this._error):el.has(this.doc)?n(new De.AbortError("Document was destroyed before loaded")):(this.on("load",t),this.on("error",n),this.doc.on("destroy",()=>n(new De.AbortError("Document was destroyed before loaded"))))})),this._whenLoaded}get whenSynced(){return this._whenSynced||(this._whenSynced=new Promise((t,n)=>{if(!this.doc){n(new Error("No Y.Doc associated with this provider"));return}this.doc.isSynced?t():this._error?n(this._error):el.has(this.doc)?n(new De.AbortError("Document was destroyed before synced")):(this.on("sync",t),this.on("error",n),this.doc.on("destroy",()=>n(new De.AbortError("Document was destroyed before synced"))))})),this._whenSynced}constructor(t){this.refCount=1,this.cleanupHandlers=[],this.graceTimeout=-1,this.doc=null,this.destroyed=!1,this.on=rv(),this.doc=t,this.off=(s,a)=>{var c;return(c=this.on[s])===null||c===void 0?void 0:c.unsubscribe(a)},"dispose"in Symbol&&(this[Symbol.dispose]=()=>Vt.release(t)),t.on("load",()=>this.on("load").fire()),t.on("sync",s=>s!==!1&&this.on("sync").fire()),t.on("destroy",this.destroy.bind(this)),this.on("error",s=>{this._error=s});const{db:n,parentTable:r,parentId:i,updatesTable:o}=t.meta||{};if(!n||!r||!o)throw new Error("Missing Dexie-related metadata in Y.Doc. Documents need to be obtained through Y.Doc properties from dexie queries.");if(!n.table(r)||!n.table(o))throw new Error(`Table ${r} or ${o} not found in db`);Mh(t),this.stopObserving=Z2(this,t,n,r,o,i),Vt.on("new").fire(this)}destroy(){var t,n,r;console.debug(`Y.Doc ${(n=(t=this.doc)===null||t===void 0?void 0:t.meta)===null||n===void 0?void 0:n.parentId} was destroyed`),Ns.delete(this.doc),this.doc=null,this.destroyed=!0,this.refCount=0,(r=this.stopObserving)===null||r===void 0||r.call(this),this.on=rv(),this.cleanupHandlers.forEach(i=>i())}addCleanupHandler(t){this.cleanupHandlers.push(typeof t=="function"?t:()=>t.unsubscribe())}}Vt.on=De.Events(null,{new:[tO],beforeunload:[eO]});Vt.getDocCache=Rk;De.DexieYProvider?Vt=De.DexieYProvider||Vt:De.DexieYProvider=Vt;const _f=3e4;class nO extends RC{constructor(t){super(),this.doc=t,this.clientID=t.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const n=ic();this.getLocalState()!==null&&_f/2<=n-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const r=[];this.meta.forEach((i,o)=>{o!==this.clientID&&_f<=n-i.lastUpdated&&this.states.has(o)&&r.push(o)}),r.length>0&&$k(this,r,"timeout")},_r(_f/10)),t.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(t){const n=this.clientID,r=this.meta.get(n),i=r===void 0?0:r.clock+1,o=this.states.get(n);t===null?this.states.delete(n):this.states.set(n,t),this.meta.set(n,{clock:i,lastUpdated:ic()});const s=[],a=[],c=[],d=[];t===null?d.push(n):o==null?t!=null&&s.push(n):(a.push(n),Zs(o,t)||c.push(n)),(s.length>0||c.length>0||d.length>0)&&this.emit("change",[{added:s,updated:c,removed:d},"local"]),this.emit("update",[{added:s,updated:a,removed:d},"local"])}setLocalStateField(t,n){const r=this.getLocalState();r!==null&&this.setLocalState({...r,[t]:n})}getStates(){return this.states}}const $k=(e,t,n)=>{const r=[];for(let i=0;i<t.length;i++){const o=t[i];if(e.states.has(o)){if(e.states.delete(o),o===e.clientID){const s=e.meta.get(o);e.meta.set(o,{clock:s.clock+1,lastUpdated:ic()})}r.push(o)}}r.length>0&&(e.emit("change",[{added:[],updated:[],removed:r},n]),e.emit("update",[{added:[],updated:[],removed:r},n]))},rO=(e,t,n=e.states)=>{const r=t.length,i=rs();je(i,r);for(let o=0;o<r;o++){const s=t[o],a=n.get(s)||null,c=e.meta.get(s).clock;je(i,s),je(i,c),Li(i,JSON.stringify(a))}return On(i)},iO=(e,t,n)=>{const r=na(t),i=ic(),o=[],s=[],a=[],c=[],d=Qe(r);for(let f=0;f<d;f++){const p=Qe(r);let m=Qe(r);const v=JSON.parse(nc(r)),b=e.meta.get(p),x=e.states.get(p),P=b===void 0?0:b.clock;(P<m||P===m&&v===null&&e.states.has(p))&&(v===null?p===e.clientID&&e.getLocalState()!=null?m++:e.states.delete(p):e.states.set(p,v),e.meta.set(p,{clock:m,lastUpdated:i}),b===void 0&&v!==null?o.push(p):b!==void 0&&v===null?c.push(p):v!==null&&(Zs(v,x)||a.push(p),s.push(p)))}(o.length>0||a.length>0||c.length>0)&&e.emit("change",[{added:o,updated:a,removed:c},n]),(o.length>0||s.length>0||c.length>0)&&e.emit("update",[{added:o,updated:s,removed:c},n])};function he(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(d){try{c(r.next(d))}catch(f){o(f)}}function a(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){var f;d.done?i(d.value):(f=d.value,f instanceof n?f:new n(function(p){p(f)})).then(s,a)}c((r=r.apply(e,t||[])).next())})}function oO(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function At(e){return this instanceof At?(this.v=e,this):new At(e)}function Uh(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(p){i[p]&&(r[p]=function(m){return new Promise(function(v,b){o.push([p,m,v,b])>1||a(p,m)})})}function a(p,m){try{(function(v){v.value instanceof At?Promise.resolve(v.value.v).then(c,d):f(o[0][2],v)})(i[p](m))}catch(v){f(o[0][3],v)}}function c(p){a("next",p)}function d(p){a("throw",p)}function f(p,m){p(m),o.shift(),o.length&&a(o[0][0],o[0][1])}}function $h(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=oO(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=e[i]&&function(o){return new Promise(function(s,a){(function(c,d,f,p){Promise.resolve(p).then(function(m){c({value:m,done:f})},d)})(s,a,(o=e[i](o)).done,o.value)})}}}const sO={}.hasOwnProperty;function pc(e,t,n){if(e&&t!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){(function(d){if(!d)throw new Error("Assertion Failed")})(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)pc(e,t[r],n[r])}else{var o=t.indexOf(".");if(o!==-1){var s=t.substr(0,o),a=t.substr(o+1);if(a==="")n===void 0?Array.isArray(e)?isNaN(parseInt(s))||e.splice(parseInt(s),1):delete e[s]:e[s]=n;else{var c=e[s];c&&function(d,f){return sO.call(d,f)}(e,s)||(c=e[s]={}),pc(c,a,n)}}else n===void 0?Array.isArray(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}const zk=typeof self<"u"&&typeof crypto<"u"?(e,t=crypto.getRandomValues.bind(crypto))=>{const n=new Uint8Array(e);return t(n),self.btoa(String.fromCharCode.apply(null,n))}:typeof Buffer<"u"?(e,t=lO)=>{const n=Buffer.alloc(e);return t(n),n.toString("base64")}:()=>{throw new Error("No implementation of randomString was found")};function lO(e){for(let t=0;t<e.length;++t)e[t]=Math.floor(256*Math.random())}function gm(e){return typeof e=="string"||!!(Array.isArray(e)&&e.some(t=>gm(t))&&e.every(Fk))}function Fk(e){return typeof e=="string"||typeof e=="number"||Array.isArray(e)&&e.every(Fk)}function aO(e,t,n){const r=e[t]||(e[t]={}),i=n.keys.map(o=>typeof o=="string"?o:JSON.stringify(o));switch(n.type){case"insert":case"upsert":i.forEach((o,s)=>{r[o]={type:"ups",val:n.values[s]}});break;case"update":case"modify":i.forEach((o,s)=>{const a=n.type==="update"?n.changeSpecs[s]:n.changeSpec,c=r[o];if(c)switch(c.type){case"ups":for(const[d,f]of Object.entries(a))pc(c.val,d,f);break;case"del":break;case"upd":Object.assign(c.mod,a)}else r[o]={type:"upd",mod:a}});break;case"delete":i.forEach(o=>{r[o]={type:"del"}})}return e}function iv(e,t){for(const{table:n,muts:r}of t)for(const i of r)aO(e,n,i)}function uO(e){return Uh(this,arguments,function*(){var t,n,r,i;let o=0,s=new Uint8Array(4),a=0,c=[],d=0;try{for(var f,p=!0,m=$h(e);!(t=(f=yield At(m.next())).done);p=!0){i=f.value,p=!1;const v=i,b=new DataView(v.buffer,v.byteOffset,v.byteLength);let x=0;for(;x<v.byteLength;)switch(o){case 0:if(x+4>v.byteLength){for(const P of v.slice(x)){if(a===4)break;s[a++]=P,++x}if(a<4)break}else if(a>0&&a<4)for(const P of v.slice(x,x+4-a))s[a++]=P,++x;case 1:d=a===4?new DataView(s.buffer,0,4).getUint32(0,!1):b.getUint32(x,!1),a?a=0:x+=4;case 2:if(x>=v.byteLength){o=2;break}if(x+d>v.byteLength)c.push(v.slice(x)),d-=v.byteLength-x,o=2,x=v.byteLength;else{if(c.length>0){const P=new Uint8Array(c.reduce((k,_)=>k+_.byteLength,d));let S=0;for(const k of c)P.set(k,S),S+=k.byteLength;P.set(v.slice(x,x+d),S),c=[],yield yield At(P)}else yield yield At(v.slice(x,x+d));x+=d,o=0}}}}catch(v){n={error:v}}finally{try{p||t||!(r=m.return)||(yield At(r.call(m)))}finally{if(n)throw n.error}}})}function Bk(e,t){return he(this,void 0,void 0,function*(){try{const n=yield navigator.serviceWorker.ready;if(t==="push"&&n.sync&&(yield n.sync.register(`dexie-cloud:${e.name}`)),!n.active)throw new Error("Failed to trigger sync - there's no active service worker");return void n.active.postMessage({type:"dexie-cloud-sync",dbName:e.name,purpose:t})}catch{}})}function pr(e,t){e.cloud.usingServiceWorker?Bk(e,t):e.localSyncEvent.next({purpose:t})}const cO="fromBase64"in Uint8Array,dO="toBase64"in Uint8Array.prototype,vm=typeof Buffer<"u"?e=>Buffer.from(e,"base64"):cO?e=>Uint8Array.fromBase64(e):e=>{const t=atob(e),n=t.length,r=new Uint8Array(n);for(var i=0;i<n;i++)r[i]=t.charCodeAt(i);return r},ss=typeof Buffer<"u"?e=>ArrayBuffer.isView(e)?Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("base64"):Buffer.from(e).toString("base64"):dO?e=>(ArrayBuffer.isView(e)?e:new Uint8Array(e)).toBase64():e=>{const t=ArrayBuffer.isView(e)?e:new Uint8Array(e),n=[];for(let r=0,i=t.length;r<i;r+=4096){const o=t.subarray(r,r+4096);n.push(String.fromCharCode.apply(null,o))}return btoa(n.join(""))};class zh extends Error{constructor({title:t,message:n,messageCode:r,messageParams:i}){super(n),this.name="TokenErrorResponseError",this.title=t,this.messageCode=r,this.messageParams=i}}function oa(e,t){return new Promise((n,r)=>{const i=Object.assign(Object.assign({submitLabel:"Submit",cancelLabel:"Cancel"},t),{onSubmit:o=>{e.next(void 0),n(o)},onCancel:()=>{e.next(void 0),r(new De.AbortError("User cancelled"))}});e.next(i)})}function Fh(e,t,...n){return oa(e,{type:"message-alert",title:t,alerts:n,fields:{},submitLabel:"OK",cancelLabel:null})}function ov(e,t,n){return he(this,void 0,void 0,function*(){let r=n||"";for(;!r||!/^[\w-+.]+@([\w-]+\.)+[\w-]{2,10}(\sas\s[\w-+.]+@([\w-]+\.)+[\w-]{2,10})?$/.test(r);)r=(yield oa(e,{type:"email",title:t,alerts:r?[{type:"error",messageCode:"INVALID_EMAIL",message:"Please enter a valid email address",messageParams:{}}]:[],fields:{email:{type:"email",placeholder:"you@somedomain.com"}}})).email;return r})}function sv(e,t,n){return he(this,void 0,void 0,function*(){const r=[{type:"info",messageCode:"OTP_SENT",message:"A One-Time password has been sent to {email}",messageParams:{email:t}}];n&&r.push(n);const{otp:i}=yield oa(e,{type:"otp",title:"Enter OTP",alerts:r,fields:{otp:{type:"otp",label:"OTP",placeholder:"Paste OTP here"}}});return i})}function Gc(e){return he(this,void 0,void 0,function*(){var t,n,r;const i=yield e.getCurrentUser(),{accessToken:o,accessTokenExpiration:s,refreshToken:a,refreshTokenExpiration:c,claims:d}=i;if(!o)return null;if(((t=s==null?void 0:s.getTime())!==null&&t!==void 0?t:1/0)>Date.now()&&(((n=i.license)===null||n===void 0?void 0:n.status)||"ok")==="ok")return i;if(!a)throw new Error("Refresh token missing");if(((r=c==null?void 0:c.getTime())!==null&&r!==void 0?r:1/0)<=Date.now())throw new Error("Refresh token has expired");const f=yield Yc(e.cloud.options.databaseUrl,i);return yield e.table("$logins").update(d.sub,{accessToken:f.accessToken,accessTokenExpiration:f.accessTokenExpiration,claims:f.claims,license:f.license,data:f.data}),f})}function fO(e,t,n,r,i){return he(this,void 0,void 0,function*(){return t.accessToken&&t.accessTokenExpiration.getTime()>Date.now()?t:t.refreshToken&&(!t.refreshTokenExpiration||t.refreshTokenExpiration.getTime()>Date.now())?yield Yc(e,t):yield function(o,s,a,c){return he(this,void 0,void 0,function*(){if(!crypto.subtle)throw typeof location<"u"&&location.protocol==="http:"?new Error("Dexie Cloud Addon needs to use WebCrypto, but your browser has disabled it due to being served from an insecure location. Please serve it from https or http://localhost:<port> (See https://stackoverflow.com/questions/46670556/how-to-enable-crypto-subtle-for-unsecure-origins-in-chrome/46671627#46671627)"):new Error("This browser does not support WebCrypto.");const{privateKey:d,publicKey:f}=yield crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!1,["sign","verify"]);if(!d||!f)throw new Error("Could not generate RSA keypair");o.nonExportablePrivateKey=d;const p=function(m){const v=ss(m);return function(b){let x=`-----BEGIN PUBLIC KEY-----
`;for(;b.length>0;)x+=b.substring(0,64)+`
`,b=b.substring(64);return x+="-----END PUBLIC KEY-----",x}(v)}(yield crypto.subtle.exportKey("spki",f));o.publicKey=f;try{const m=yield s({public_key:p,hints:c});if(m.type==="error")throw new zh(m);if(m.type!=="tokens")throw new Error(`Unexpected response type from token endpoint: ${m.type}`);return o.accessToken=m.accessToken,o.accessTokenExpiration=new Date(m.accessTokenExpiration),o.refreshToken=m.refreshToken,m.refreshTokenExpiration&&(o.refreshTokenExpiration=new Date(m.refreshTokenExpiration)),o.userId=m.claims.sub,o.email=m.claims.email,o.name=m.claims.name,o.claims=m.claims,o.license={type:m.userType,status:m.claims.license||"ok"},o.data=m.data,m.evalDaysLeft!=null&&(o.license.evalDaysLeft=m.evalDaysLeft),m.userValidUntil!=null&&(o.license.validUntil=new Date(m.userValidUntil)),m.alerts&&m.alerts.length>0&&(yield oa(a,{type:"message-alert",title:"Authentication Alert",fields:{},alerts:m.alerts})),o}catch(m){if(m instanceof zh)throw yield Fh(a,m.title,{type:"error",messageCode:m.messageCode,message:m.message,messageParams:{}}),m;let v="We're having a problem authenticating right now.";throw m instanceof TypeError&&(v=typeof navigator!==void 0&&!navigator.onLine?"You seem to be offline. Please connect to the internet and try again.":De.debug||typeof location<"u"&&(location.hostname==="localhost"||location.hostname==="127.0.0.1")?`Could not connect to server. Please verify that your origin '${location.origin}' is whitelisted using \`npx dexie-cloud whitelist\``:"Could not connect to server. Please verify the connection.",yield Fh(a,"Authentication Failed",{type:"error",messageCode:"GENERIC_ERROR",message:v,messageParams:{}}).catch(()=>{})),m}})}(t,n,r,i)})}function Yc(e,t){return he(this,void 0,void 0,function*(){if(!t.refreshToken)throw new Error("Cannot refresh token - refresh token is missing.");if(!t.nonExportablePrivateKey)throw new Error("login.nonExportablePrivateKey is missing - cannot sign refresh token without a private key.");const n=Date.now(),r="RSASSA-PKCS1-v1_5",i=new TextEncoder().encode(t.refreshToken+n),o=yield crypto.subtle.sign(r,t.nonExportablePrivateKey,i),s=ss(o),a={grant_type:"refresh_token",refresh_token:t.refreshToken,scopes:["ACCESS_DB"],signature:s,signing_algorithm:r,time_stamp:n},c=yield fetch(`${e}/token`,{body:JSON.stringify(a),method:"post",headers:{"Content-Type":"application/json"},mode:"cors"});if(c.status!==200)throw new Error(`RefreshToken: Status ${c.status} from ${e}/token`);const d=yield c.json();if(d.type==="error")throw new zh(d);return t.accessToken=d.accessToken,t.accessTokenExpiration=d.accessTokenExpiration?new Date(d.accessTokenExpiration):void 0,t.claims=d.claims,t.license={type:d.userType,status:d.claims.license||"ok"},d.evalDaysLeft!=null&&(t.license.evalDaysLeft=d.evalDaysLeft),d.userValidUntil!=null&&(t.license.validUntil=new Date(d.userValidUntil)),d.data&&(t.data=d.data),t})}const lv=new WeakMap;class wm{constructor(t,n){lv.set(this,t),Object.assign(this,n)}static load(t,n){return t.table("$logins").get(n).then(r=>new wm(t,r||{userId:n,claims:{sub:n},lastLogin:new Date(0)}))}save(){return he(this,void 0,void 0,function*(){lv.get(this).table("$logins").put(this)})}}const en={userId:"unauthorized",name:"Unauthorized",claims:{sub:"unauthorized"},lastLogin:new Date(0)};try{Object.freeze(en),Object.freeze(en.claims)}catch{}function Kk(e,t){return Ti(hn(e).pipe(_n(t)))}function Vk(e){return he(this,void 0,void 0,function*(){const t=yield Bh(e);if(t){if(!(yield function(n,r,i){return he(this,void 0,void 0,function*(){const o=[{type:"warning",messageCode:"LOGOUT_CONFIRMATION",message:`{numUnsyncedChanges} unsynced changes will get lost!
                Logout anyway?`,messageParams:{currentUserId:r,numUnsyncedChanges:i.toString()}}];return yield oa(n,{type:"logout-confirmation",title:"Confirm Logout",alerts:o,fields:{},submitLabel:"Confirm logout",cancelLabel:"Cancel"}).then(()=>!0).catch(()=>!1)})}(e.cloud.userInteraction,e.cloud.currentUserId,t)))throw new Error("User cancelled logout due to unsynced changes");yield Bh(e,{deleteUnsyncedData:!0})}})}function Bh(e){return he(this,arguments,void 0,function*(t,{deleteUnsyncedData:n=!1}={}){const[r,i]=yield t.dx.transaction("rw",t.dx.tables,o=>he(this,void 0,void 0,function*(){const s=o.idbtrans;s.disableChangeTracking=!0,s.disableAccessControl=!0;const a=o.storeNames.filter(d=>d.endsWith("_mutations")),c=(yield Promise.all(a.map(d=>o.table(d).count()))).reduce((d,f)=>d+f,0);if(c>0&&!n)return[c,!1];t.$syncState.delete("syncState");for(const d of t.dx.tables)d.name!=="$jobs"&&d.name!=="$syncState"&&d.clear();return[c,!0]}));return i&&(yield Kk(t.cloud.currentUser,o=>o.userId===en.userId),yield t.cloud.sync({purpose:"pull",wait:!0})),r})}class Kh extends Error{constructor(t,n){super(n||`${t.status} ${t.statusText}`),this.httpStatus=t.status}get name(){return"HttpError"}}function eu(e,...t){globalThis.console[e](...t)}function xf(e,t){return he(this,void 0,void 0,function*(){var n;const r=yield e.getCurrentUser(),i=r.userId;if(r.isLoggedIn&&(!t||!t.email&&!t.userId)){if((((n=r.license)===null||n===void 0?void 0:n.status)||"ok")==="ok"&&r.accessToken&&(!r.accessTokenExpiration||r.accessTokenExpiration.getTime()>Date.now()))return!1;if(r.refreshToken&&(!r.refreshTokenExpiration||r.refreshTokenExpiration.getTime()>Date.now()))return yield Gc(e),!1}const o=new wm(e,{claims:{},lastLogin:new Date(0)});return yield fO(e.cloud.options.databaseUrl,o,e.cloud.options.fetchTokens||function(s){const{userInteraction:a}=s.cloud;return function(c){return he(this,arguments,void 0,function*({public_key:d,hints:f}){var p;let m;const v=(p=s.cloud.options)===null||p===void 0?void 0:p.databaseUrl;if(!v)throw new Error("No database URL given.");if((f==null?void 0:f.grant_type)==="demo")m={demo_user:yield ov(a,"Enter a demo user email",(f==null?void 0:f.email)||(f==null?void 0:f.userId)),grant_type:"demo",scopes:["ACCESS_DB"],public_key:d};else if(f!=null&&f.otpId&&f.otp)m={grant_type:"otp",otp_id:f.otpId,otp:f.otp,scopes:["ACCESS_DB"],public_key:d};else{const P=yield ov(a,"Enter email address",f==null?void 0:f.email);m=/@demo.local$/.test(P)?{demo_user:P,grant_type:"demo",scopes:["ACCESS_DB"],public_key:d}:{email:P,grant_type:"otp",scopes:["ACCESS_DB"]}}const b=yield fetch(`${v}/token`,{body:JSON.stringify(m),method:"post",headers:{"Content-Type":"application/json",mode:"cors"}});if(b.status!==200){const P=yield b.text();throw yield Fh(a,"Token request failed",{type:"error",messageCode:"GENERIC_ERROR",message:P,messageParams:{}}).catch(()=>{}),new Kh(b,P)}const x=yield b.json();if(x.type==="tokens"||x.type==="error")return x;if(m.grant_type==="otp"&&"email"in m){if(x.type!=="otp-sent")throw new Error(`Unexpected response from ${v}/token`);const P=yield sv(a,m.email),S=Object.assign(Object.assign({},m),{otp:P||"",otp_id:x.otp_id,public_key:d});let k=yield fetch(`${v}/token`,{body:JSON.stringify(S),method:"post",headers:{"Content-Type":"application/json"},mode:"cors"});for(;k.status===401;){const _=yield k.text();S.otp=yield sv(a,m.email,{type:"error",messageCode:"INVALID_OTP",message:_,messageParams:{}}),k=yield fetch(`${v}/token`,{body:JSON.stringify(S),method:"post",headers:{"Content-Type":"application/json"},mode:"cors"})}if(k.status!==200){const _=yield k.text();throw new Kh(k,_)}return yield k.json()}throw new Error(`Unexpected response from ${v}/token`)})}}(e),e.cloud.userInteraction,t),i!==en.userId&&o.userId!==i&&(yield Vk(e)),yield function(s,a){return he(this,void 0,void 0,function*(){const c=s.table("$logins");yield s.transaction("rw",c,d=>he(this,void 0,void 0,function*(){const f=yield c.toArray();yield Promise.all(f.filter(p=>p.userId!==a.userId&&p.isLoggedIn).map(p=>(p.isLoggedIn=!1,c.put(p)))),a.isLoggedIn=!0,a.lastLogin=new Date;try{yield a.save()}catch(p){try{p.name==="DataCloneError"&&(eu("debug","Login context property names:",Object.keys(a)),eu("debug","Login context property names:",Object.keys(a)),eu("debug","Login context:",a),eu("debug","Login context JSON:",JSON.stringify(a)))}catch{}throw p}})),yield Kk(s.cloud.currentUser,d=>d.userId===a.userId)})}(e,o),pr(e,"pull"),o.userId!==i})}const Vh={},tl=typeof self<"u"&&self.document&&typeof navigator<"u"&&navigator.serviceWorker;tl&&tl.ready.then(e=>Vh.registration=e),typeof self<"u"&&"clients"in self&&!self.document&&addEventListener("message",e=>{var t,n;!((n=(t=e.data)===null||t===void 0?void 0:t.type)===null||n===void 0)&&n.startsWith("sw-broadcast-")&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(r=>{var i;return r.id!==((i=e.source)===null||i===void 0?void 0:i.id)&&r.postMessage(e.data)})});class Sf{constructor(t){this.name=t}subscribe(t){if(!tl)return()=>{};const n=r=>{var i;((i=r.data)===null||i===void 0?void 0:i.type)===`sw-broadcast-${this.name}`&&t(r.data.message)};return tl.addEventListener("message",n),()=>tl.removeEventListener("message",n)}postMessage(t){var n;typeof self.clients=="object"?[...self.clients.matchAll({includeUncontrolled:!0})].forEach(r=>r.postMessage({type:`sw-broadcast-${this.name}`,message:t})):Vh.registration&&((n=Vh.registration.active)===null||n===void 0||n.postMessage({type:`sw-broadcast-${this.name}`,message:t}))}}const Ps=globalThis["lbc-events"]||(globalThis["lbc-events"]=new Map);class tu extends _t{constructor(t){const n=typeof BroadcastChannel>"u"?new Sf(t):new BroadcastChannel(t);super(r=>{function i(a){r.next(a.detail)}function o(a){r.next(a.data)}let s;(function(a,c){Ps.has(a)?Ps.get(a).push(c):Ps.set(a,[c])})(`lbc-${t}`,i);try{n instanceof Sf?s=n.subscribe(a=>r.next(a)):n.addEventListener("message",o)}catch{}return()=>{(function(a,c){const d=Ps.get(a);if(d){const f=d.indexOf(c);f!==-1&&d.splice(f,1)}})(`lbc-${t}`,i),n instanceof Sf?s():n.removeEventListener("message",o)}}),this.name=t,this.bc=n}next(t){this.bc.postMessage(t),function(n){const r=Ps.get(n.type);r&&r.forEach(i=>{try{i(n)}catch{}})}(new CustomEvent(`lbc-${this.name}`,{detail:t}))}}function Wh(e){return he(this,arguments,void 0,function*({realms:t,inviteRealms:n}){const r=JSON.stringify([...t.map(s=>({realmId:s,accepted:!0})),...n.map(s=>({realmId:s,accepted:!1}))].sort((s,a)=>s.realmId<a.realmId?-1:s.realmId>a.realmId?1:0)),i=new TextEncoder().encode(r),o=yield crypto.subtle.digest("SHA-1",i);return ss(o)})}function Su(e){return Object.entries(e.cloud.schema||{}).filter(([,{markedForSync:t}])=>t).map(([t])=>e.tables.filter(({name:n})=>n===t)[0]).filter(t=>t)}function bm(e){return`$${e}_mutations`}function Wk(e){var t;const n=(t=/^\$(.*)_mutations$/.exec(e))===null||t===void 0?void 0:t[1];if(!n)throw new Error(`Given mutationTable ${e} is not correct`);return n}const hO=[].concat;function km(e){return hO.apply([],e)}function Hh(e,t){return he(this,arguments,void 0,function*(n,r,{since:i={},limit:o=1/0}={}){const s=yield Promise.all(n.map(p=>he(this,void 0,void 0,function*(){const m=Wk(p.name),v=i[m];let b=v?p.where("rev").above(v):p;o<1/0&&(b=b.limit(o));let x=yield b.toArray();return x=function(P){return P=P.map(S=>{if(S.type==="modify"&&S.criteria.index===null){const k=Object.assign(Object.assign({},S),{criteria:void 0,changeSpec:void 0,type:"update",keys:S.keys,changeSpecs:[S.changeSpec]});return delete k.criteria,delete k.changeSpec,k}return S}),P}(x),x=function(P){const S=new Map;for(const k of P)if(k.type==="update"){if(k.keys.length!==1||k.changeSpecs.length!==1)continue;const _=""+k.keys[0],R=k.changeSpecs[0];if(Object.values(R).some(B=>typeof B=="object"&&B&&"@@propmod"in B))continue;let K=S.get(_);K?K.push({txid:k.txid,updateSpec:R}):S.set(_,[{txid:k.txid,updateSpec:R}])}return P=P.filter(k=>{if(k.type!=="update"||k.keys.length!==1||k.changeSpecs.length!==1)return!0;const _=new Set(Object.keys(k.changeSpecs[0])),R=""+k.keys[0],K=S.get(R);for(let B=K.length-1;B>=0;--B){const{txid:q,updateSpec:H}=K[B];if(q===k.txid)break;for(const ie of Object.keys(H))_.delete(ie)}return _.size!==0}),P}(x),x.map(P=>({table:m,mut:P}))}))),a=km(s).sort((p,m)=>p.mut.txid===m.mut.txid?p.mut.opNo-m.mut.opNo:p.mut.ts-m.mut.ts),c=[];let d=null,f=null;for(const{table:p,mut:m}of a)d&&d.table===p&&f===m.txid?d.muts.push(m):(d={table:p,muts:[m]},f=m.txid,c.push(d));return c})}function Hk(e){const t=new Uint8Array(e);if(typeof crypto<"u")crypto.getRandomValues(t);else for(let n=0;n<e;n++)t[n]=Math.floor(256*Math.random());if(typeof Buffer<"u"&&Buffer.from)return Buffer.from(t).toString("base64");if(typeof btoa<"u")return btoa(String.fromCharCode.apply(null,t));throw new Error("No btoa or Buffer available")}const{toString:pO}={},av={replace:function(e){const t=Object.keys(e);let n=null;for(let i=0,o=t.length;i<o;++i)t[i][0]==="$"&&(n=n||[],n.push(t[i]));if(!n)return e;const r={...e};for(const i of n)delete r[i];for(const i of n)r["$"+i]=e[i];return r}};function qk(...e){const t=e.reduce((r,i)=>({...r,...i}),e.reduce((r,i)=>({...i,...r}),{})),n=new WeakMap;return{stringify(r,i,o){return JSON.stringify(r,function(a){const c=this[a],d=function(f){const p=typeof f;switch(typeof f){case"object":case"function":{if(f===null)return null;const v=Object.getPrototypeOf(f);if(!v)return av;let b=n.get(v);if(b!==void 0)return b;const x=(m=f,pO.call(m).slice(8,-1)),P=Object.entries(t).find(([S,k])=>{var _,R;return(R=(_=k==null?void 0:k.test)===null||_===void 0?void 0:_.call(k,f,x))!==null&&R!==void 0?R:S===x});return b=P==null?void 0:P[1],b||(b=Array.isArray(f)?null:typeof f=="function"?t.function||null:av),n.set(v,b),b}default:return t[p]}var m}(c);return d?d.replace(c,i,t):c},o)},parse(r,i){const o=[];return JSON.parse(r,function(s,a){const c=a==null?void 0:a.$t;if(c){const f=t[c];a=f?f.revive(a,i,t):a}let d=o[o.length-1];if(d&&d[0]===a){a={...a};for(const f of d[1])delete a[f];for(const[f,p]of Object.entries(d[2]))a[f]=p;o.pop()}if(a===void 0||s[0]==="$"&&s!=="$t"){let f,p;d=o[o.length-1],d&&d[0]===this?(f=d[1],p=d[2]):o.push([this,f=[],p={}]),s[0]==="$"&&s!=="$t"?(f.push(s),p[s.substr(1)]=a):p[s]=void 0}return a})}}}const mO={Blob:{test:(e,t)=>t==="Blob",replace:(e,t)=>{const n=t.length;return t.push(e),{$t:"Blob",mimeType:e.type,i:n}},revive:({i:e,mimeType:t},n)=>new Blob([n[e]],{type:t})}};var yO={number:{replace:e=>{switch(!0){case isNaN(e):return{$t:"number",v:"NaN"};case e===1/0:return{$t:"number",v:"Infinity"};case e===-1/0:return{$t:"number",v:"-Infinity"};default:return e}},revive:({v:e})=>Number(e)}};const gO={bigint:{replace:e=>({$t:"bigint",v:""+e}),revive:e=>BigInt(e.v)}};var vO={Date:{replace:e=>({$t:"Date",v:isNaN(e.getTime())?"NaN":e.toISOString()}),revive:({v:e})=>new Date(e==="NaN"?NaN:Date.parse(e))}},wO={Set:{replace:e=>({$t:"Set",v:Array.from(e.entries())}),revive:({v:e})=>new Set(e)}},bO={Map:{replace:e=>({$t:"Map",v:Array.from(e.entries())}),revive:({v:e})=>new Map(e)}};const kO=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:void 0;var _O=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","DataView","BigInt64Array","BigUint64Array"].reduce((e,t)=>({...e,[t]:{replace:(n,r,i)=>({$t:t,v:i.ArrayBuffer.replace(n.byteOffset===0&&n.byteLength===n.buffer.byteLength?n.buffer:n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength),r,i).v}),revive:({v:n},r,i)=>{const o=kO[t];return o&&new o(i.ArrayBuffer.revive({v:n},r,i))}}}),{});function Gk(e){return function(t){for(var n="",r=0,i=t.length;r<i;r++)n+=Yk[t[r]];return n}(ss(e))}function xO(e){return vm(function(t){if(typeof t!="string")throw new Error("invalid decoder input: "+t);for(var n="",r=0,i=t.length;r<i;r++)n+=qh[t[r]];return n}(e))}const qh={"-":"=",0:"A",1:"B",2:"C",3:"D",4:"E",5:"F",6:"G",7:"H",8:"I",9:"J",A:"K",B:"L",C:"M",D:"N",E:"O",F:"P",G:"Q",H:"R",I:"S",J:"T",K:"U",L:"V",M:"W",N:"X",O:"Y",P:"Z",Q:"a",R:"b",S:"c",T:"d",U:"e",V:"f",W:"g",X:"h",Y:"i",Z:"j",_:"k",a:"l",b:"m",c:"n",d:"o",e:"p",f:"q",g:"r",h:"s",i:"t",j:"u",k:"v",l:"w",m:"x",n:"y",o:"z",p:"0",q:"1",r:"2",s:"3",t:"4",u:"5",v:"6",w:"7",x:"8",y:"9",z:"+","|":"/"},Yk={};for(const e of Object.keys(qh))Yk[qh[e]]=e;var SO={ArrayBuffer:{replace:e=>({$t:"ArrayBuffer",v:Gk(e)}),revive:({v:e})=>{const t=xO(e);return t.buffer.byteLength===t.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}}};class Ef{constructor(t,n){this.buf=t,this.type=n}}function Qk(e){const t=new XMLHttpRequest;if(t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("GET",URL.createObjectURL(e),!1),t.send(),t.status!==200&&t.status!==0)throw new Error("Bad Blob access: "+t.status);return t.responseText}function Jk(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t.buffer}var EO={Blob:{test:(e,t)=>t==="Blob"||e instanceof Ef,replace:e=>({$t:"Blob",v:ss(e instanceof Ef?e.buf:Jk(Qk(e))),type:e.type}),revive:({type:e,v:t})=>{const n=vm(t);return typeof Blob!==void 0?new Blob([n]):new Ef(n.buffer,e)}}};const Xk={...yO,...gO,...vO,...wO,...bO,..._O,...SO,...EO};function uv(e){return new Promise((t,n)=>{const r=new FileReader;r.onabort=i=>n(new Error("file read aborted")),r.onerror=i=>n(i.target.error),r.onload=i=>t(i.target.result),r.readAsArrayBuffer(e)})}var CO={undefined:{replace:()=>({$t:"undefined"}),revive:()=>{}}},IO={File:{test:(e,t)=>t==="File",replace:e=>({$t:"File",v:ss(Jk(Qk(e))),type:e.type,name:e.name,lastModified:new Date(e.lastModified).toISOString()}),revive:({type:e,v:t,name:n,lastModified:r})=>{const i=vm(t);return new File([i],n,{type:e,lastModified:new Date(r).getTime()})}}};const OO=typeof BigInt=="function"&&typeof BigInt(0)=="bigint";class cv{toString(){return this.v}constructor(t){this.v=t}}const jO=OO?{}:{bigint:{test:e=>e instanceof cv,replace:e=>Object.assign({$t:"bigint"},e),revive:({v:e})=>new cv(e)}},Zk=Object.assign(Object.assign(Object.assign(Object.assign({},CO),jO),IO),{PropModification:{test:e=>e instanceof gg,replace:e=>Object.assign({$t:"PropModification"},e["@@propmod"]),revive:e=>{var t=function(n,r){var i={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&r.indexOf(o)<0&&(i[o]=n[o]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(o=Object.getOwnPropertySymbols(n);s<o.length;s++)r.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(n,o[s])&&(i[o[s]]=n[o[s]])}return i}(e,["$t"]);return new gg(t)}}}),Rl=qk(Xk,Zk),TO=function(...e){const t=qk(Xk,mO,...e);return{toBinary(n){const[r,i]=this.stringify(n),o=new ArrayBuffer(4);return new DataView(o).setUint32(0,r.size),new Blob([o,r,i])},stringify(n){const r=[],i=t.stringify(n,r);return[new Blob(r.map(s=>{const a=new ArrayBuffer(4);return new DataView(a).setUint32(0,"byteLength"in s?s.byteLength:s.size),new Blob([a,s])})),i]},async parse(n,r){let i=0;const o=[],s=await uv(r),a=new DataView(s);for(;i<s.byteLength;){const c=a.getUint32(i);i+=4;const d=s.slice(i,i+c);i+=c,o.push(d)}return t.parse(n,o)},async fromBinary(n){const r=new DataView(await uv(n.slice(0,4))).getUint32(0),i=n.slice(4,r+4),o=await function(s){return new Promise((a,c)=>{const d=new FileReader;d.onabort=f=>c(new Error("file read aborted")),d.onerror=f=>c(f.target.error),d.onload=f=>a(f.target.result),d.readAsText(s)})}(n.slice(r+4));return await this.parse(o,i)}}}(Zk);function NO(e,t,n){const r=[];for(let i of n){const{table:o,muts:s}=i,a=e.tables.find(f=>f.name===o);if(!a)throw new Error(`Internal error: table ${o} not found in DBCore schema`);const{primaryKey:c}=a;let d=i;s.forEach((f,p)=>{const m=!c.outbound&&(f.type==="upsert"||f.type==="insert");f.keys.forEach((v,b)=>{if(Array.isArray(v)){d===i&&(d=dv(i,m));const x=d.muts[p],P=JSON.stringify(v);x.keys[b]=P}else if(v[0]==="#"){d===i&&(d=dv(i,m));const x=d.muts[p];if(!t.isLoggedIn)throw new Error("Internal error: Cannot sync private IDs before authenticated");const P=`${v}:${t.userId}`;x.keys[b]=P,m&&De.setByKeyPath(x.values[b],c.keyPath,P)}})}),r.push(d)}return r}function dv(e,t){return Object.assign(Object.assign({},e),{muts:t?e.muts.map(n=>n.type!=="insert"&&n.type!=="upsert"||!n.values?Object.assign(Object.assign({},n),{keys:n.keys.slice()}):Object.assign(Object.assign({},n),{keys:n.keys.slice(),values:n.values.slice()})):e.muts.map(n=>Object.assign(Object.assign({},n),{keys:n.keys.slice()}))})}let Gh=new WeakMap;function e1(e){return he(this,void 0,void 0,function*(){var t,n;const r=((n=(t=Gh.get(e))===null||t===void 0?void 0:t.getTime())!==null&&n!==void 0?n:0)-Date.now();r>0&&(yield new Promise(i=>setTimeout(i,r)))})}function PO(e,t,n,r,i,o,s,a,c){return he(this,void 0,void 0,function*(){const d={Accept:"application/json, application/x-bison, application/x-bison-stream","Content-Type":"application/tson"},f=yield Gc(i),p=f==null?void 0:f.accessToken;p&&(d.Authorization=`Bearer ${p}`);const m={v:2,dbID:n==null?void 0:n.remoteDbId,clientIdentity:a,schema:s||{},lastPull:n?{serverRevision:n.serverRevision,yServerRevision:n.yServerRevision,realms:n.realms,inviteRealms:n.inviteRealms}:void 0,baseRevs:r,changes:NO(i.dx.core.schema,c,e),y:t,dxcv:i.cloud.version};i.syncStateChangedEvent.next({phase:"pushing"});const v=Rl.stringify(m),b=yield fetch(`${o}/sync`,{method:"post",headers:d,credentials:"include",body:v});if(i.syncStateChangedEvent.next({phase:"pulling"}),function(x,P){const S=P.headers.get("Ratelimit-Limit"),k=P.headers.get("Ratelimit-Remaining"),_=P.headers.get("Ratelimit-Reset");if(S&&k&&_){const R=Number(S),K=Math.max(0,Number(k)),B=Number(_);if(K<R/2){const q=Math.ceil(B/(K+1));Gh.set(x,new Date(Date.now()+1e3*q))}else Gh.delete(x)}}(i,b),!b.ok)throw new Kh(b);if(b.headers.get("content-type")==="application/x-bison")return TO.fromBinary(yield b.blob());{const x=yield b.text();return Rl.parse(x)}})}function As(e){if(e!=null&&e.cancelled)throw new De.AbortError("Operation was cancelled")}let Do=!1;function t1(e,t,n,r){return he(this,void 0,void 0,function*(){yield e.$baseRevs.bulkPut(Object.keys(t).filter(i=>t[i].markedForSync).map(i=>({tableName:i,clientRev:(n[i]||0)+1,serverRev:r}))),yield e.$baseRevs.where("tableName").noneOf(Object.keys(t).filter(i=>t[i].markedForSync)).delete()})}function Yh(e,t={}){for(const{table:n,muts:r}of e){const i=r.length>0?r[r.length-1].rev:null;t[n]=i||t[n]||0}return t}function AO(e,t,n){return he(this,void 0,void 0,function*(){const r=yield e.bulkGet(t),i=[],o=[];t.forEach((s,a)=>{const c=r[a];if(c){for(const[d,f]of Object.entries(n[a]))if(d===e.schema.primKey.keyPath){if(Mc(f,s)!==0)throw new Error("Cannot change primary key")}else De.setByKeyPath(c,d,f);i.push(s),o.push(c)}}),yield e.schema.primKey.keyPath==null?e.bulkPut(o,i):e.bulkPut(o)})}function n1(e,t){return he(this,void 0,void 0,function*(){for(const{table:n,muts:r}of e){if(!t.dx._allTables[n])continue;const i=t.table(n),{primaryKey:o}=i.core.schema,s=a=>{switch(a[0]){case"[":if(a.endsWith("]"))try{return JSON.parse(a)}catch{}return a;case"#":return a.endsWith(":"+t.cloud.currentUserId)?a.substr(0,a.length-t.cloud.currentUserId.length-1):a;default:return a}};for(const a of r){const c=a.keys.map(s);switch(a.type){case"insert":o.outbound?yield i.bulkAdd(a.values,c):(c.forEach((d,f)=>{De.setByKeyPath(a.values[f],o.keyPath,d)}),yield i.bulkAdd(a.values));break;case"upsert":o.outbound?yield i.bulkPut(a.values,c):(c.forEach((d,f)=>{De.setByKeyPath(a.values[f],o.keyPath,d)}),yield i.bulkPut(a.values));break;case"modify":c.length===1?yield i.update(c[0],a.changeSpec):yield i.where(":id").anyOf(c).modify(a.changeSpec);break;case"update":yield AO(i,c,a.changeSpecs);break;case"delete":yield i.bulkDelete(c)}}}})}typeof self<"u"&&typeof navigator<"u"&&(Do=navigator.onLine,self.addEventListener("online",()=>Do=!0),self.addEventListener("offline",()=>Do=!1));const ni="dexie-cloud-syncer";function r1(e,t){return e.where("i").between(t,1/0,!0).toArray()}function nl(e,t,n){var r,i,o;if(!e.dx._allTables[t])return;const s=(o=(i=(r=e.table(t))===null||r===void 0?void 0:r.schema.yProps)===null||i===void 0?void 0:i.find(a=>a.prop===n))===null||o===void 0?void 0:o.updatesTable;return s&&e.dx._allTables[s]?e.table(s):void 0}function i1(e,t){return he(this,void 0,void 0,function*(){var n;const r={};let i,o=!1;for(const s of e)try{switch(s.type){case"u-s":{const a=nl(t,s.table,s.prop);if(a){const c={k:s.k,u:s.u};s.r&&(c.r=s.r,i=s.r),r[a.name]=yield a.add(c)}break}case"u-ack":{const a=nl(t,s.table,s.prop);a&&(yield t.transaction("rw",a,c=>he(this,void 0,void 0,function*(){let d=yield c.table(a.name).get(ni);yield c.table(a.name).put(Object.assign(Object.assign({},d||{i:ni}),{unsentFrom:Math.max((d==null?void 0:d.unsentFrom)||1,s.i+1)}))})));break}case"u-reject":{const a=nl(t,s.table,s.prop);if(!a)break;const c=(n=yield a.get(s.i))===null||n===void 0?void 0:n.k;if(c!=null){yield t.transaction("rw",a,f=>(f.idbtrans._rejecting_y_ypdate=!0,a.where("i").aboveOrEqual(s.i).filter(p=>Mc(p.k,c)===0&&(1&(p.f||0))==1).delete()));const d=Vt.getDocCache(t.dx).find(s.table,c,s.prop);d&&d.destroy()}break}case"in-sync":{const a=Vt.getDocCache(t.dx).find(s.table,s.k,s.prop);a&&!a.isSynced&&a.emit("sync",[!0,a]);break}case"y-complete-sync-done":i=s.yServerRev;break;case"outdated-server-rev":o=!0}}catch{}return{receivedUntils:r,resyncNeeded:o,yServerRevision:i}})}const DO=1,LO=2,RO=3;function MO(e,t,n){return he(this,arguments,void 0,function*(r,i,{yDownloadedRealms:o,realms:s}){if(o&&s&&s.every(f=>o[f]==="*"))return;const a=yield Gc(r),c={"Content-Type":"application/json",Accept:"application/octet-stream"};a&&(c.Authorization=`Bearer ${a.accessToken}`);const d=yield fetch(`${i}/y/download`,{body:Rl.stringify({downloadedRealms:o||{}}),method:"POST",headers:c,credentials:"include"});if(!d.ok)throw new Error(`Failed to download Yjs documents from server. Status: ${d.status}`);yield async function(f,...p){var m,v,b;let x=f();for(let _=0;_<p.length;_++)x=p[_](x);try{for(var P,S=!0,k=$h(x);!(m=(P=await k.next()).done);S=!0)P.value,S=!1}catch(_){v={error:_}}finally{try{S||m||!(b=k.return)||await b.call(k)}finally{if(v)throw v.error}}}(function(f){return function(){return Uh(this,arguments,function*(){if(!f.body)throw new Error("Response body is not readable");const p=f.body.getReader();try{for(;;){const{done:m,value:v}=yield At(p.read());if(m)return yield At(void 0);yield yield At(v)}}finally{p.releaseLock()}})}}(d),uO,function(f){return Uh(this,arguments,function*(){var p,m,v,b;let x=null,P=null,S=null,k=[];function _(q){return he(this,void 0,void 0,function*(){const H=k[k.length-1];if(k.length>0){if(!x||!P||!S)throw new Error(`Protocol error from ${i}/y/download`);const ie=nl(r,P,S);ie&&(yield ie.bulkAdd(k)),k=[]}x&&(P&&S&&H||q)&&(yield r.$syncState.update("syncState",ie=>{const fe=ie.yDownloadedRealms||{};fe[x]=q?"*":{tbl:P,prop:S,key:H.k},ie.yDownloadedRealms=fe}))})}try{try{for(var R,K=!0,B=$h(f);!(p=(R=yield At(B.next())).done);K=!0){b=R.value,K=!1;const q=new hb(b);for(;vE(q);)switch(Zu(q)){case DO:yield At(_(!0)),x=Yn(q);break;case LO:yield At(_(!1)),P=Yn(q),S=Yn(q);break;case RO:{const H=To(q),ie=ji(q);k.push({k:H,u:ie});break}}yield At(_(!1))}}catch(q){m={error:q}}finally{try{K||p||!(v=B.return)||(yield At(v.call(B)))}finally{if(m)throw m.error}}yield At(_(!0))}catch(q){throw q instanceof De.DexieError||(yield At(_(!1))),q}})})})}const o1="currentSyncWorker";function Qc(e,t,n,r){return s1(e,t,n,r).then(i=>(r!=null&&r.justCheckIfNeeded||e.syncStateChangedEvent.next({phase:"in-sync"}),i)).catch(i=>he(this,void 0,void 0,function*(){return r!=null&&r.justCheckIfNeeded?Promise.reject(i):Do&&(r!=null&&r.retryImmediatelyOnFetchError)&&(i==null?void 0:i.name)==="TypeError"&&/fetch/.test(i==null?void 0:i.message)?(e.syncStateChangedEvent.next({phase:"error",error:i}),yield new Promise(o=>setTimeout(o,500)),yield Qc(e,t,n,Object.assign(Object.assign({},r),{retryImmediatelyOnFetchError:!1}))):(yield e.$syncState.update("syncState",{timestamp:new Date,error:""+i}),e.syncStateChangedEvent.next({phase:Do?"error":"offline",error:new Error(""+(i==null?void 0:i.message)||i)}),Promise.reject(i))}))}function s1(e,t,n){return he(this,arguments,void 0,function*(r,i,o,{isInitialSync:s,cancelToken:a,justCheckIfNeeded:c,purpose:d}={isInitialSync:!1}){var f;if(!(!((f=r.cloud.options)===null||f===void 0)&&f.databaseUrl))throw new Error("Internal error: sync must not be called when no databaseUrl is configured");const{databaseUrl:p}=i,m=yield r.getCurrentUser(),v=m.isLoggedIn?Su(r):[],b=v.map(Q=>r.table(bm(Q.name))),x=yield r.getPersistedSyncState(),P=m.isLoggedIn,S=P?function(Q,ae){const U=(ae==null?void 0:ae.syncedTables)||[];return Su(Q).filter(ee=>!U.includes(ee.name))}(r,x):[];As(a);const k=S.length>0;if(k){if(c)return!0;yield r.transaction("rw",S,Q=>he(this,void 0,void 0,function*(){Q.idbtrans.disableChangeTracking=!0,Q.idbtrans.disableAccessControl=!0,yield function(ae,U,ee){return he(this,void 0,void 0,function*(){const ne=new Set(ee||[]);for(const de of ae)de.name==="members"?yield de.toCollection().modify(oe=>{ne.has(oe.realmId)||oe.userId&&oe.userId!==en.userId||(oe.userId=U.userId)}):de.name==="roles"||(de.name==="realms"?yield de.toCollection().modify(oe=>{ne.has(oe.realmId)||oe.owner!==void 0&&oe.owner!==en.userId||(oe.owner=U.userId)}):yield de.toCollection().modify(oe=>{oe.realmId&&ne.has(oe.realmId)||(oe.owner&&oe.owner!==en.userId||(oe.owner=U.userId),oe.realmId&&oe.realmId!==en.userId||(oe.realmId=U.userId))}))})}(S,m,x==null?void 0:x.realms)})),As(a)}const[_,R,K,{yMessages:B,lastUpdateIds:q}]=yield r.transaction("r",r.tables,()=>he(this,void 0,void 0,function*(){const Q=yield r.getPersistedSyncState();let ae=yield r.$baseRevs.toArray();ae=ae.filter(ne=>v.some(de=>de.name===ne.tableName));let U=yield Hh(b,r);const ee=yield function(ne,de){return he(this,void 0,void 0,function*(){const oe=[],be={};for(const Ae of de)if(Ae.schema.yProps)for(const Je of Ae.schema.yProps){const $e=ne.table(Je.updatesTable),Te=yield $e.get(ni),ut=(Te==null?void 0:Te.unsentFrom)||1,le=(Te==null?void 0:Te.receivedUntil)||0,Ve=Math.min(ut,le+1),rt=yield r1($e,Ve);rt.length>0&&(be[$e.name]=rt[rt.length-1].i);const we={};for(const Re of rt){const Be=(1&(Re.f||0))==1;if(Be&&Re.i<ut)continue;const Ge=JSON.stringify(Re.k)+"/"+Be;let sn=we[Ge];sn?(sn.u.push(Re.u),sn.i=Math.max(Re.i,sn.i)):(we[Ge]=sn={i:Re.i,k:Re.k,isLocal:Be,u:[]},sn.u.push(Re.u))}for(const{k:Re,isLocal:Be,u:Ge,i:sn}of Object.values(we)){const di=Ge.length===1?Ge[0]:lc(Ge);if(Be)oe.push({type:"u-c",table:Ae.name,prop:Je.prop,k:Re,u:di,i:sn});else{const zn=mk(di);oe.push({type:"sv",table:Ae.name,prop:Je.prop,k:Re,sv:zn})}}}return{yMessages:oe,lastUpdateIds:be}})}(r,v);if(As(a),k){const ne=[...(x==null?void 0:x.realms)||[],...(x==null?void 0:x.inviteRealms)||[]],de=yield function(oe,be,Ae,Je){return he(this,void 0,void 0,function*(){const $e=`upload-${Hk(8)}`;if(be.isLoggedIn&&oe.length>0){const Te=new Set(Je||[]);return(yield Promise.all(oe.map(ut=>he(this,void 0,void 0,function*(){const{extractKey:le}=ut.core.schema.primaryKey;if(!le)return{table:ut.name,muts:[]};const Ve=Ae[ut.name],rt=Ve!=null&&Ve.generatedGlobalId?ut.filter(Re=>{return le(Re),!Te.has(Re.realmId||"")&&(Be=le(Re),!(Ge=Ve==null?void 0:Ve.idPrefix)||typeof Be=="string"&&Be.startsWith(Ge));var Be,Ge}):ut.filter(Re=>{const Be=le(Re);return!Te.has(Re.realmId||"")&&gm(Be)}),we=yield rt.toArray();if(we.length>0){const Re={type:"upsert",values:we,keys:we.map(le),userId:be.userId,txid:$e};return{table:ut.name,muts:[Re]}}return{table:ut.name,muts:[]}})))).filter(ut=>ut.muts.length>0)}return[]})}(S,m,o,ne);return As(a),U=U.concat(de),[U,Q,ae,ee]}return[U,Q,ae,ee]})),H=_.some(Q=>Q.muts.some(ae=>ae.keys.length>0))||B.some(Q=>Q.type==="u-c");if(c)return H;if(d==="push"&&!H)return!1;const ie=Yh(_,R==null?void 0:R.latestRevisions),fe=(R==null?void 0:R.clientIdentity)||zk(16);As(a);const Y=yield PO(_,B,R,K,r,p,o,fe,m),{done:ve,newSyncState:ke}=yield r.transaction("rw",r.tables,Q=>he(this,void 0,void 0,function*(){Q.idbtrans.disableChangeTracking=!0,Q.idbtrans.disableAccessControl=!0;for(const de of Object.keys(o))Y.schema[de]&&(o[de]=Y.schema[de]);yield r.$syncState.put(o,"schema");const ae=yield Hh(b,r,{since:ie});for(const de of b){const oe=Wk(de.name);if(ae.some(be=>be.table===oe&&be.muts.length>0)){if(ie[oe]){const be=ie[oe]||0;yield Promise.all([de.where("rev").belowOrEqual(be).delete(),r.$baseRevs.where(":id").between([oe,-1/0],[oe,be+1],!0,!0).reverse().offset(1).delete()])}}else yield Promise.all([de.clear(),r.$baseRevs.where({tableName:oe}).delete()])}Yh(ae,ie),yield t1(r,o,ie,Y.serverRevision);const U=yield r.getPersistedSyncState();yield function(de,oe,be){return he(this,void 0,void 0,function*(){const Ae=new Set,Je=new Set,$e=be?be.realms:[],Te=be?be.inviteRealms:[],ut=new Set(oe.realms),le=new Set(oe.realms.concat(oe.inviteRealms));for(const Ve of $e)ut.has(Ve)||(Je.add(Ve),le.has(Ve)||Ae.add(Ve));for(const Ve of Te.concat($e))le.has(Ve)||Ae.add(Ve);if(Ae.size>0||Je.size>0){const Ve=Su(de);for(const rt of Ve){let we=["realms","members","roles"].includes(rt.name)?Ae:Je;we.size!==0&&(rt.schema.indexes.some(Re=>Re.keyPath==="realmId"||Array.isArray(Re.keyPath)&&Re.keyPath[0]==="realmId")?yield rt.where("realmId").anyOf([...we]).delete():yield rt.filter(Re=>!!(Re!=null&&Re.realmId)&&we.has(Re.realmId)).delete())}}if(Je.size>0&&(be!=null&&be.yDownloadedRealms))for(const Ve of Je)delete be.yDownloadedRealms[Ve]})}(r,Y,U);const ee=U||{syncedTables:[],latestRevisions:{},realms:[],inviteRealms:[],clientIdentity:fe};P&&(ee.syncedTables=v.map(de=>de.name).concat(S.map(de=>de.name))),ee.latestRevisions=ie,ee.remoteDbId=Y.dbId,ee.initiallySynced=!0,ee.realms=Y.realms,ee.inviteRealms=Y.inviteRealms,ee.serverRevision=Y.serverRevision,ee.yServerRevision=Y.serverRevision,ee.timestamp=new Date,delete ee.error;const ne=l1(Y.changes,ae);if(yield n1(ne,r),Y.yMessages){const{receivedUntils:de,resyncNeeded:oe,yServerRevision:be}=yield i1(Y.yMessages,r);be&&(ee.yServerRevision=be),yield function(Ae,Je,$e){return he(this,void 0,void 0,function*(){var Te,ut,le,Ve,rt;const we={};for(const[Be,Ge]of Object.entries(Ae))(Te=we[Be])!==null&&Te!==void 0||(we[Be]={}),we[Be].unsentFrom=Ge+1;for(const[Be,Ge]of Object.entries(Je))(ut=we[Be])!==null&&ut!==void 0||(we[Be]={}),we[Be].receivedUntil=Ge;const Re=Object.values($e.dx._dbSchema).filter(Be=>Be.yProps).map(Be=>Be.yProps.map(Ge=>Ge.updatesTable)).flat();for(const Be of Re){const Ge=we[Be],sn=(le=Ge==null?void 0:Ge.unsentFrom)!==null&&le!==void 0?le:1,di=(rt=(Ve=Ge==null?void 0:Ge.receivedUntil)!==null&&Ve!==void 0?Ve:(yield $e.table(Be).where("i").between(1,1/0).reverse().limit(1).primaryKeys())[0])!==null&&rt!==void 0?rt:0;yield $e.transaction("rw",Be,()=>he(this,void 0,void 0,function*(){const zn=yield $e.table(Be).get(ni);zn?(zn.unsentFrom=Math.max(sn,zn.unsentFrom||1),zn.receivedUntil=Math.max(di,zn.receivedUntil||0),yield $e.table(Be).put(zn)):yield $e.table(Be).add({i:ni,unsentFrom:sn,receivedUntil:di})}))}})}(q,de,r),oe&&(ee.yDownloadedRealms={})}return r.$syncState.put(ee,"syncState"),{done:ae.length===0,newSyncState:ee}}));if(!ve)return yield e1(r),yield s1(r,i,o,{isInitialSync:s,cancelToken:a});const Ee=Object.values(o).some(Q=>{var ae;return(ae=Q.yProps)===null||ae===void 0?void 0:ae.length}),Ce=!!Y.yMessages;if(Ee&&Ce)try{yield MO(r,p,ke)}catch{}return r.syncCompleteEvent.next(),!1})}function l1(e,t){const n={};iv(n,e);const r={};return iv(r,t),function(i,o){var s,a,c;for(const[d,f]of Object.entries(o))for(const[p,m]of Object.entries(f))switch(m.type){case"ups":{const v=(s=i[d])===null||s===void 0?void 0:s[p];if(v)switch(v.type){case"ups":case"upd":delete i[d][p]}}break;case"del":(a=i[d])===null||a===void 0||delete a[p];break;case"upd":{const v=(c=i[d])===null||c===void 0?void 0:c[p];if(v)switch(v.type){case"ups":for(const[b,x]of Object.entries(m.mod))pc(v.val,b,x);break;case"del":break;case"upd":for(const b of Object.keys(m.mod))delete v.mod[b]}break}}}(n,r),function(i,o=""){o||(o=zk(16));const s={};for(const[c,d]of Object.entries(i))for(const[f,p]of Object.entries(d)){const m=s[c]||(s[c]={});(m[p.type]||(m[p.type]=[])).push(Object.assign({key:f},p))}const a=[];for(const[c,d]of Object.entries(s)){const f={table:c,muts:[]};for(const[p,m]of Object.entries(d))switch(p){case"ups":{const v={type:"upsert",keys:m.map(b=>b.key),values:m.map(b=>b.val),txid:o};f.muts.push(v);break}case"upd":{const v={type:"update",keys:m.map(b=>b.key),changeSpecs:m.map(b=>b.mod),txid:o};f.muts.push(v);break}case"del":{const v={type:"delete",keys:m.map(b=>b.key),txid:o};f.muts.push(v);break}}a.push(f)}return a}(n)}const UO=10,$O=1e4,zO=1e3;function FO(e){const t=[],n=new Rn(!0),r=new Rn(null);let i=!1,o=new Array(UO).fill(0);return r.subscribe(()=>he(this,void 0,void 0,function*(){if(!i&&t.length>0){i=!0,o.shift(),o.push(Date.now()),n.next(!1);try{yield function(){return he(this,void 0,void 0,function*(){for(var s,a,c,d,f,p;t.length>0;){const m=t.shift();try{yield Ti(e.cloud.syncState.pipe(_n(({phase:b})=>b==="in-sync"||b==="error")));const v=e.cloud.persistedSyncState.value;if(!m)continue;switch(m.type){case"token-expired":const b=e.cloud.currentUser.value,x=yield Yc(e.cloud.options.databaseUrl,b);yield e.table("$logins").update(b.userId,{accessToken:x.accessToken,accessTokenExpiration:x.accessTokenExpiration,claims:x.claims,license:x.license,data:x.data});break;case"realm-added":!((s=v==null?void 0:v.realms)===null||s===void 0)&&s.includes(m.realm)||!((a=v==null?void 0:v.inviteRealms)===null||a===void 0)&&a.includes(m.realm)||(yield e.cloud.sync({purpose:"pull",wait:!0}));break;case"realm-accepted":!((c=v==null?void 0:v.realms)===null||c===void 0)&&c.includes(m.realm)||(yield e.cloud.sync({purpose:"pull",wait:!0}));break;case"realm-removed":(!((d=v==null?void 0:v.realms)===null||d===void 0)&&d.includes(m.realm)||!((f=v==null?void 0:v.inviteRealms)===null||f===void 0)&&f.includes(m.realm))&&(yield e.cloud.sync({purpose:"pull",wait:!0}));break;case"realms-changed":yield e.cloud.sync({purpose:"pull",wait:!0});break;case"changes":if(((p=e.cloud.syncState.value)===null||p===void 0?void 0:p.phase)==="error"){pr(e,"pull");break}yield e.transaction("rw",e.dx.tables,P=>he(this,void 0,void 0,function*(){P.idbtrans.disableChangeTracking=!0,P.idbtrans.disableAccessControl=!0;const[S,k,_]=yield Promise.all([e.getSchema(),e.getPersistedSyncState(),e.getCurrentUser()]);if(!k||!S||!_)return;if(m.baseRev!==k.serverRevision)return void(typeof m.baseRev!="string"||typeof k.serverRevision!="bigint"&&typeof k.serverRevision!="object"||pr(e,"pull"));if((yield De.waitFor(Wh(k)))!==m.realmSetHash)return void pr(e,"pull");let R=[];if(_.isLoggedIn){const K=Su(e).map(B=>e.table(bm(B.name)));R=yield Hh(K,e)}if(m.changes.length>0){const K=l1(m.changes,R);yield n1(K,e)}k.latestRevisions=Yh(R,k.latestRevisions),k.serverRevision=m.newRev,yield t1(e,S,k.latestRevisions,m.newRev),yield e.$syncState.put(k,"syncState")}))}}catch{}}})}()}finally{o[o.length-1]-o[0]<$O&&(yield new Promise(s=>setTimeout(s,zO))),i=!1,n.next(!0)}}})),{enqueue:function(s){t.push(s),r.next(null)},readyToServe:n}}const fv=new WeakMap,nu={members:"@id, [userId+realmId], [email+realmId], realmId",roles:"[realmId+name]",realms:"@realmId",$jobs:"",$syncState:"",$baseRevs:"[tableName+clientRev]",$logins:"claims.sub, lastLogin"};let BO=0;function lr(e){"vip"in e&&(e=e.vip);let t=fv.get(e.cloud);if(!t){const n=new Bi;let r=new tu(`syncstatechanged-${e.name}`),i=new tu(`synccomplete-${e.name}`);n.id=++BO;let o=!1;t={get name(){return e.name},close:()=>e.close(),transaction:e.transaction.bind(e),table:e.table.bind(e),get tables(){return e.tables},cloud:e.cloud,get $jobs(){return e.table("$jobs")},get $syncState(){return e.table("$syncState")},get $baseRevs(){return e.table("$baseRevs")},get $logins(){return e.table("$logins")},get realms(){return e.realms},get members(){return e.members},get roles(){return e.roles},get initiallySynced(){return o},localSyncEvent:n,get syncStateChangedEvent(){return r},get syncCompleteEvent(){return i},dx:e},Object.assign(t,{getCurrentUser:()=>t.$logins.toArray().then(a=>a.find(c=>c.isLoggedIn)||en),getPersistedSyncState:()=>t.$syncState.get("syncState"),getSchema:()=>t.$syncState.get("schema").then(a=>{if(a)for(const d of t.tables)d.schema.primKey&&d.schema.primKey.keyPath&&a[d.name]&&(a[d.name].primaryKey=typeof(c=d.schema.primKey.keyPath)=="string"?c:c?"["+[].join.call(c,"+")+"]":"");var c;return a}),getOptions:()=>t.$syncState.get("options"),setInitiallySynced(a){o=a},reconfigure(){r=new tu(`syncstatechanged-${e.name}`),i=new tu(`synccomplete-${e.name}`)}}),t.messageConsumer=FO(t),t.messageProducer=new Bi,fv.set(e.cloud,t)}return t}const KO=typeof InstallTrigger<"u",a1=typeof navigator<"u"&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\/|Edge\//.test(navigator.userAgent),VO=a1?[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]:NaN,WO=a1&&VO<=605||KO,HO=typeof self<"u"&&"clients"in self&&!self.document,{toString:qO}={};function hv(e){return qO.call(e).slice(8,-1)}function Cf(e,t){var n;return t.type==="delete"?t.keys:((n=t.keys)===null||n===void 0?void 0:n.slice())||t.values.map(e.extractKey)}const GO=/b|c|d|f|g|h|j|k|l|m|n|p|q|r|s|t|v|x|y|z/i;let ar=0;function u1(e,t){const n=new Uint8Array(18),r=new Uint8Array(n.buffer,0,6),i=Date.now();ar>=i?++ar:ar=i,r[0]=ar/1099511627776,r[1]=ar/4294967296,r[2]=ar/16777216,r[3]=ar/65536,r[4]=ar/256,r[5]=ar;const o=new Uint8Array(n.buffer,6);return crypto.getRandomValues(o),e+Gk(new Uint8Array(n.buffer))+(t||"")}function YO(e){return{stack:"dbcore",name:"idGenerationMiddleware",level:1,create:t=>Object.assign(Object.assign({},t),{table:n=>{const r=t.table(n);return Object.assign(Object.assign({},r),{mutate:i=>{var o,s;const a=i.trans;if(a.mode==="versionchange"&&(a.disableChangeTracking=!0,a.disableAccessControl=!0),a.disableChangeTracking)return r.mutate(i);if(i.type==="add"||i.type==="put"){const c=(o=e.cloud.schema)===null||o===void 0?void 0:o[n];if(c!=null&&c.generatedGlobalId){if(!((s=e.cloud.options)===null||s===void 0)&&s.databaseUrl&&!e.initiallySynced){const d=Cf(r.schema.primaryKey,i);return r.getMany({keys:d,trans:i.trans,cache:"immutable"}).then(f=>{if(f.length<d.length)throw new Error("Unable to create new objects without an initial sync having been performed.");return r.mutate(i)})}return function(d,f){let p=null;const m=Cf(r.schema.primaryKey,d);return m.forEach((v,b)=>{if(v===void 0){const x=d.values[b].realmId||e.cloud.currentUserId,P=x.substr(x.length-3);m[b]=u1(f,P),r.schema.primaryKey.outbound||(p||(p=d.values.slice()),p[b]=De.deepClone(p[b]),De.setByKeyPath(p[b],r.schema.primaryKey.keyPath,m[b]))}else if(typeof v!="string"||!v.startsWith(f)&&!v.startsWith("#"+f))throw new De.ConstraintError(`The ID "${v}" is not valid for table "${n}". Primary '@' keys requires the key to be prefixed with "${f}" (or "#${f}).
If you want to generate IDs programmatically, remove '@' from the schema to get rid of this constraint. Dexie Cloud supports custom IDs as long as they are random and globally unique.`)}),r.mutate(Object.assign(Object.assign({},d),{keys:m,values:p||d.values}))}(i,c.idPrefix)}c!=null&&c.markedForSync&&Cf(r.schema.primaryKey,i).forEach((d,f)=>{if(!gm(d)){const p=Array.isArray(d)?d.map(hv).join(","):hv(d);throw new De.ConstraintError(`Invalid primary key type ${p} for table ${n}. Tables marked for sync has primary keys of type string or Array of string (and optional numbers)`)}})}return r.mutate(i)}})}})}}let QO=0;function Ds(e,t){return function(n){const{readers:r,writers:i}=n.trans[t]||(n.trans[t]={writers:[],readers:[]}),o=i.length,s=(o>0?i[o-1].then(()=>e(n),()=>e(n)):e(n)).finally(()=>{r.splice(r.indexOf(s))});return r.push(s),s}}function JO(e,t){return function(n){const{readers:r,writers:i}=n.trans[t]||(n.trans[t]={writers:[],readers:[]});let o=(i.length>0?i[i.length-1].then(()=>e(n),()=>e(n)):r.length>0?(s=r,new Promise(a=>{s.length===0&&a([]);let c=s.length;const d=new Array(c);s.forEach((f,p)=>Promise.resolve(f).then(m=>d[p]={status:"fulfilled",value:m},m=>d[p]={status:"rejected",reason:m}).then(()=>--c||a(d)))})).then(()=>e(n)):e(n)).finally(()=>{i.shift()});var s;return i.push(o),o}}const io=new Rn(new Set);function Ml(e){var t,n,r,i;return((t=e.cloud.options)===null||t===void 0?void 0:t.disableEagerSync)||((r=(n=e.cloud.currentUser.value)===null||n===void 0?void 0:n.license)===null||r===void 0?void 0:r.status)!=="ok"||!(!((i=e.cloud.options)===null||i===void 0)&&i.databaseUrl)}function XO({currentUserObservable:e,db:t}){return{stack:"dbcore",name:"MutationTrackingMiddleware",level:1,create:n=>{const r=new Set(n.schema.tables.map(s=>s.name)),i=n.schema.tables.filter(s=>!/^\$/.test(s.name)),o=new Map;for(const s of i){const a=`$${s.name}_mutations`;r.has(a)&&o.set(s.name,n.table(a))}return Object.assign(Object.assign({},n),{transaction:(s,a)=>{let c;if(a==="readwrite"){const d=s.filter(f=>{var p,m;return(m=(p=t.cloud.schema)===null||p===void 0?void 0:p[f])===null||m===void 0?void 0:m.markedForSync}).map(f=>bm(f));c=n.transaction([...s,...d],a)}else c=n.transaction(s,a);if(a==="readwrite"){c.txid=Hk(16),c.opCount=0,c.currentUser=e.value,io.value.add(c),io.next(io.value);const d=()=>{c.removeEventListener("complete",f),c.removeEventListener("error",d),c.removeEventListener("abort",d),io.value.delete(c),io.next(io.value)},f=()=>{c.mutationsAdded&&!Ml(t)&&pr(t,"push"),d()};c.addEventListener("complete",f),c.addEventListener("error",d),c.addEventListener("abort",d)}return c},table:s=>{const a=n.table(s);if(/^\$/.test(s))return s.endsWith("_mutations")?Object.assign(Object.assign({},a),{mutate:p=>(p.type!=="add"&&p.type!=="put"||(p.trans.mutationsAdded=!0),a.mutate(p))}):s==="$logins"?Object.assign(Object.assign({},a),{mutate:p=>a.mutate(p).then(m=>(p.trans.mutationsAdded=!0,m)).catch(m=>Promise.reject(m))}):a;const{schema:c}=a,d=o.get(s);return d?function(p){const m="$lock"+ ++QO;return Object.assign(Object.assign({},p),{count:Ds(p.count,m),get:Ds(p.get,m),getMany:Ds(p.getMany,m),openCursor:Ds(p.openCursor,m),query:Ds(p.query,m),mutate:JO(p.mutate,m)})}(Object.assign(Object.assign({},a),{mutate:p=>{var m,v,b;const x=p.trans;return x.txid?x.disableChangeTracking?a.mutate(p):!((v=(m=t.cloud.schema)===null||m===void 0?void 0:m[s])===null||v===void 0)&&v.markedForSync&&(!((b=x.currentUser)===null||b===void 0)&&b.isLoggedIn)?p.type==="deleteRange"?a.query({query:{range:p.range,index:c.primaryKey},trans:p.trans,values:!1}).then(P=>f({type:"delete",keys:P.result,trans:p.trans,criteria:{index:null,range:p.range}})):f(p):a.mutate(p):a.mutate(p)}})):a;function f(p){var m,v;const b=p.trans,x=(v=(m=t.cloud.options)===null||m===void 0?void 0:m.unsyncedProperties)===null||v===void 0?void 0:v[s],{txid:P,currentUser:{userId:S}}=b,{type:k}=p,_=++b.opCount;function R(K){if(!x)return K;let B=K;for(const q of Object.keys(K))x.some(H=>q===H||q.startsWith(H+"."))&&(B===K&&(B=Object.assign({},K)),delete B[q]);return B}return a.mutate(p).then(K=>{var B;const{numFailures:q,failures:H}=K;let ie=k==="delete"?p.keys:K.results,fe="values"in p?p.values:[],Y="changeSpec"in p?p.changeSpec:void 0,ve="updates"in p?p.updates:void 0;if(q&&(ie=ie.filter((Q,ae)=>!H[ae]),fe=fe.filter((Q,ae)=>!H[ae])),x){if(fe=fe.map(Q=>{const ae=Object.assign({},Q);for(const U of x)delete ae[U];return ae}),Y&&(Y=R(Y),Object.keys(Y).length===0))return K;if(ve){let Q=ve.changeSpecs.map(R),ae={keys:[],changeSpecs:[]};const U=new GS;let ee=!1;for(let ne=0,de=Q.length;ne<de;++ne)Object.keys(Q[ne]).length>0?(ae.keys.push(ve.keys[ne]),ae.changeSpecs.push(Q[ne]),U.addKey(ve.keys[ne])):ee=!0;if(ve=ae,ee){let ne=[],de=[];for(let oe=0,be=ie.length;oe<be;++oe)U.hasKey(ie[oe])&&(ne.push(ie[oe]),de.push(fe[oe]));ie=ne,fe=de}}}const ke=Date.now();let Ee="criteria"in p&&p.criteria?Object.assign(Object.assign({},p.criteria),{index:p.criteria.index===c.primaryKey.keyPath?null:p.criteria.index}):void 0;if(x&&(Ee!=null&&Ee.index)){const Q=(B=c.indexes.find(ae=>ae.name===Ee.index))===null||B===void 0?void 0:B.keyPath;(Q?typeof Q=="string"?[Q]:Q:[]).some(ae=>x==null?void 0:x.includes(ae))&&(Ee=void 0)}const Ce=p.type==="delete"?{type:"delete",ts:ke,opNo:_,keys:ie,criteria:Ee,txid:P,userId:S}:p.type==="add"?{type:"insert",ts:ke,opNo:_,keys:ie,txid:P,userId:S,values:fe}:Ee&&Y?{type:"modify",ts:ke,opNo:_,keys:ie,criteria:Ee,changeSpec:Y,txid:P,userId:S}:Y?{type:"update",ts:ke,opNo:_,keys:ie,changeSpecs:ie.map(()=>Y),txid:P,userId:S}:ve?{type:"update",ts:ke,opNo:_,keys:ve.keys,changeSpecs:ve.changeSpecs,txid:P,userId:S}:{type:"upsert",ts:ke,opNo:_,keys:ie,values:fe,txid:P,userId:S};return"isAdditionalChunk"in p&&p.isAdditionalChunk&&(Ce.isAdditionalChunk=!0),ie.length>0||Ee?d.mutate({type:"add",trans:b,values:[Ce]}).then(()=>(b.mutationsAdded=!0,K)):K})}}})}}}function ZO(e,t){return function(n,r){var i;const o=Object.assign(Object.assign({},nu),n);Object.keys(nu).forEach(d=>{const f=o[d];if(f==null)throw new Error(`Cannot delete table ${d} as it is needed for access control of Dexie Cloud`);if(!n[d])return;const p=f.split(",").map(b=>b.trim()),m=nu[d].split(",").map(b=>b.trim()),v=new Set(p.map(b=>b.replace(/([&*]|\+\+)/g,"")));if(p[0]!==m[0])throw new Error(`Cannot override primary key of table ${d}. Please declare it as {${d}: ${JSON.stringify(nu[d])}`);for(let b=1;b<m.length;++b){const x=m[b];v.has(x.replace(/([&*]|\+\+)/g,""))||(o[d]+=`,${x}`)}});const s=t.cloud.schema||(t.cloud.schema={}),a=new Set;Object.keys(o).forEach(d=>{const f=o[d],p=s[d]||(s[d]={});f!=null?(/^\@/.test(f)&&(o[d]=o[d].substr(1),p.generatedGlobalId=!0,p.idPrefix=function(m,v){let b=m[0].toLocaleLowerCase();for(let k=1,_=m.length;k<_&&b.length<3;++k)(GO.test(m[k])||(x=m[k])>="A"&&x<="Z")&&(b+=m[k].toLowerCase());for(var x,P,S;v.has(b);){if(/\d/g.test(b)){if(b=b.substr(0,b.length-1)+(b[b.length-1]+1),!(b.length>3))continue;b=b.substr(0,3)}else if(b.length<3){b+="2";continue}let k=1,_=b;for(;v.has(_)&&k<8;)P=b,_=(1&(S=k)?P[0].toUpperCase():P[0].toLowerCase())+(2&S?P[1].toUpperCase():P[1].toLowerCase())+(4&S?P[2].toUpperCase():P[2].toLowerCase()),++k;if(k<8)b=_;else{let R=b.charCodeAt(2)+1&127;b=b.substr(0,2)+String.fromCharCode(R)}}return b}(d,a),a.add(p.idPrefix)),/^\$/.test(d)||(o[`$${d}_mutations`]="++rev",p.markedForSync=!0),p.deleted&&(p.deleted=!1)):(p.deleted=!0,p.markedForSync=!1,o[`$${d}_mutations`]=null)});const c=e.call(this,o,r);for(const[d,f]of Object.entries(r))if(!((i=f.yProps)===null||i===void 0)&&i.length){const p=s[d];p&&(p.yProps=f.yProps.map(m=>m.prop))}return c}}function c1(e,t,n){return typeof navigator<"u"&&navigator.locks?navigator.locks.request(e.name+"|"+t,()=>n()):n()}const rl=new Rn(!0),Qh=new Rn(!0);rl.pipe(Bt(e=>e?yr(!0):yr(!1).pipe(Lb(2e4))),Rb()).subscribe(Qh);const d1=typeof document<"u"?Qn(document,"visibilitychange"):yr({}),ej=d1.pipe(_n(()=>document.visibilityState==="hidden")),tj=d1.pipe(_n(()=>document.visibilityState==="visible")),f1=typeof window<"u"?zc(tj,Qn(window,"mousedown"),Qn(window,"mousemove"),Qn(window,"keydown"),Qn(window,"wheel"),Qn(window,"touchmove")):yr({});typeof document<"u"&&zc(yr(!0),ej,f1).pipe(cn(()=>document.visibilityState==="visible"),Oh(e=>{rl.value!==e&&rl.next(e)}),Bt(e=>e?yr(0).pipe(Lb(16e4),Oh(()=>rl.next(!1))):yr(0))).subscribe(()=>{});class nj extends Error{constructor(){super(...arguments),this.name="TokenExpiredError"}}const h1=new WeakMap,pv=new WeakMap;function p1(e){let t=pv.get(e);return t||(t=new Bi,pv.set(e,t)),t}class rj extends _t{constructor(t,n,r,i,o,s,a,c){super(d=>new oj(t,n,r,i,o,c,d,s,a))}}let ij=0;class oj extends es{constructor(t,n,r,i,o,s,a,c,d){super(()=>this.teardown()),this.id=++ij,this.subscriptions=new Set,this.reconnecting=!1,this.db=t,this.databaseUrl=t.cloud.options.databaseUrl,this.rev=n,this.yrev=r,this.realmSetHash=i,this.clientIdentity=o,this.user=s,this.subscriber=a,this.lastUserActivity=new Date,this.messageProducer=c,this.webSocketStatus=d,this.connect()}teardown(){this.disconnect()}disconnect(){if(this.webSocketStatus.next("disconnected"),this.pinger&&(clearInterval(this.pinger),this.pinger=null),this.ws)try{this.ws.close()}catch{}this.ws=null;for(const t of this.subscriptions)t.unsubscribe();this.subscriptions.clear()}reconnect(){if(!this.reconnecting){this.reconnecting=!0;try{this.disconnect()}catch{}this.connect().catch(()=>{}).then(()=>this.reconnecting=!1)}}connect(){return he(this,void 0,void 0,function*(){if(this.lastServerActivity=new Date,this.pauseUntil&&this.pauseUntil>new Date)return;if(this.ws)throw new Error("Called connect() when a connection is already open");if(!this.databaseUrl)throw new Error("Cannot connect without a database URL");if(this.closed)return;const t=this.user.accessTokenExpiration;if(t&&t<new Date)return void this.subscriber.error(new nj);this.webSocketStatus.next("connecting"),this.pinger=setInterval(()=>he(this,void 0,void 0,function*(){if(this.closed)this.teardown();else if(this.ws)try{this.ws.send(JSON.stringify({type:"ping"})),setTimeout(()=>{this.pinger&&(this.closed?this.teardown():this.lastServerActivity<new Date(Date.now()-2e4)&&this.reconnect())},2e4)}catch{this.reconnect()}else this.reconnect()}),3e4);const n=new URL(this.databaseUrl);n.protocol=n.protocol==="http:"?"ws":"wss";const r=new URLSearchParams;if(this.subscriber.closed)return;r.set("v","2"),this.rev&&r.set("rev",this.rev),this.yrev&&r.set("yrev",this.yrev),r.set("realmsHash",this.realmSetHash),r.set("clientId",this.clientIdentity),r.set("dxcv",this.db.cloud.version),this.user.accessToken&&r.set("token",this.user.accessToken);const i=this.ws=new WebSocket(`${n}/changes?${r}`);i.binaryType="arraybuffer",i.onclose=o=>{this.pinger&&this.reconnect()},i.onmessage=o=>{if(this.pinger){this.lastServerActivity=new Date;try{const s=typeof o.data=="string"?Rl.parse(o.data):function(a){const c=new hb(a),d=Yn(c);if(d==="outdated-server-rev")return{type:d};if(d==="y-complete-sync-done")return{type:d,yServerRev:Yn(c)};const f=Yn(c),p=Yn(c);switch(d){case"u-ack":case"u-reject":return{type:d,table:f,prop:p,i:Number(bg(c))};default:{const m=To(c);switch(d){case"in-sync":case"doc-close":return{type:d,table:f,prop:p,k:m};case"aware":return{type:d,table:f,prop:p,k:m,u:ji(c)};case"doc-open":return{type:d,table:f,prop:p,k:m,serverRev:To(c),sv:To(c)};case"sv":return{type:d,table:f,prop:p,k:m,sv:ji(c)};case"u-c":return{type:d,table:f,prop:p,k:m,u:ji(c),i:Number(bg(c))};case"u-s":return{type:d,table:f,prop:p,k:m,u:ji(c),r:c.pos<c.arr.length&&Yn(c)||void 0};default:throw new TypeError(`Unknown message type: ${d}`)}}}}(new Uint8Array(o.data));if(s.type==="error")throw new Error(`Error message from dexie-cloud: ${s.error}`);if(s.type==="aware"){const a=Vt.getDocCache(this.db.dx).find(s.table,s.k,s.prop);if(a){const c=(d=>h1.get(d))(a);c&&iO(c,s.u,"server")}}else if(s.type!=="pong")if(s.type==="doc-open"){const a=Vt.getDocCache(this.db.dx).find(s.table,s.k,s.prop);a&&p1(a).next()}else s.type==="u-ack"||s.type==="u-reject"||s.type==="u-s"||s.type==="in-sync"||s.type==="outdated-server-rev"||s.type==="y-complete-sync-done"?i1([s],this.db).then(a=>he(this,[a],void 0,function*({resyncNeeded:c,yServerRevision:d,receivedUntils:f}){if(d&&(yield this.db.$syncState.update("syncState",{yServerRevision:d})),s.type==="u-s"&&f){const p=nl(this.db,s.table,s.prop);if(p){const m=f[p.name];m&&(yield p.update(ni,{receivedUntil:m}))}}c&&(yield this.db.cloud.sync({purpose:"pull",wait:!0}))})):this.subscriber.next(s)}catch(s){this.subscriber.error(s)}}};try{let o=!1;yield new Promise((s,a)=>{i.onopen=c=>{o=!0,s(null)},i.onerror=c=>{if(o)this.reconnect();else{const d=c.error||new Error("WebSocket Error");this.subscriber.error(d),this.webSocketStatus.next("error"),a(d)}}}),this.subscriptions.add(this.messageProducer.subscribe(s=>{var a,c;this.closed||(s.type==="ready"&&this.webSocketStatus.value!=="connected"&&this.webSocketStatus.next("connected"),s.type==="ready"?(this.rev=s.rev,(a=this.ws)===null||a===void 0||a.send(Rl.stringify(s))):(c=this.ws)===null||c===void 0||c.send(function(d){const f=new oE;switch(Ei(f,d.type),"table"in d&&Ei(f,d.table),"prop"in d&&Ei(f,d.prop),d.type){case"u-ack":case"u-reject":vg(f,BigInt(d.i));break;case"outdated-server-rev":break;case"y-complete-sync-done":Ei(f,d.yServerRev);break;default:switch(Js(f,d.k),d.type){case"aware":_o(f,d.u);break;case"doc-open":Js(f,d.serverRev),Js(f,d.sv);break;case"doc-close":break;case"sv":_o(f,d.sv);break;case"u-c":_o(f,d.u),vg(f,BigInt(d.i));break;case"u-s":_o(f,d.u),Ei(f,d.r||"")}}return lE(f)}(s)))})),this.user.isLoggedIn&&!Ml(this.db)&&this.subscriptions.add(function(s){const a=km(s.tables.filter(c=>{var d,f;return((f=(d=s.cloud.schema)===null||d===void 0?void 0:d[c.name])===null||f===void 0?void 0:f.markedForSync)&&c.schema.yProps}).map(c=>c.schema.yProps.map(d=>({table:c.name,ydocProp:d.prop,updatesTable:d.updatesTable}))));return zc(...a.map(({table:c,ydocProp:d,updatesTable:f})=>{const p=s.table(f);return hn(p.get(ni)).pipe(Bt(m=>{let v=(m==null?void 0:m.unsentFrom)||1;return hn(ei(()=>he(this,void 0,void 0,function*(){return(yield r1(p,v)).filter(b=>b.f&&1&b.f).map(b=>({type:"u-c",table:c,prop:d,k:b.k,u:b.u,i:b.i}))}))).pipe(Oh(b=>{b.length>0&&(v=b.at(-1).i+1)}))}))})).pipe(Zl(c=>c))}(this.db).subscribe(this.db.messageProducer))}catch{this.pauseUntil=new Date(Date.now()+6e4)}})}}class sj extends Error{constructor(t){super(t==="expired"?"License expired":t==="deactivated"?"User deactivated":"Invalid license"),this.name="InvalidLicenseError",t&&(this.license=t)}}function lj(e){return he(this,void 0,void 0,function*(){var t;yield(t=3e3,new Promise(n=>setTimeout(n,t))),yield Ti(f1)})}function mv(e){return he(this,void 0,void 0,function*(){var t;return!(!(!((t=e.cloud.options)===null||t===void 0)&&t.databaseUrl)||!e.cloud.schema)&&(yield Qc(e,e.cloud.options,e.cloud.schema,{justCheckIfNeeded:!0}))})}const ru=new WeakMap;function m1(e,t,n,r){const i=ru.get(e);if(i){if(i.pull||(r==null?void 0:r.purpose)==="push")return i.promise;{let s=!1;const a=e.cloud.syncState.subscribe(c=>{c.phase==="pulling"&&(s=!0)});return i.promise.then(()=>{a.unsubscribe()}).catch(c=>(a.unsubscribe(),Promise.reject(c))).then(()=>{if(!s)return m1(e,t,n,r)})}}const o=function(){return he(this,void 0,void 0,function*(){try{yield e1(e),yield c1(e,o1,()=>Qc(e,t,n,r)),ru.delete(e)}catch(s){throw ru.delete(e),s}})}();return ru.set(e,{promise:o,pull:(r==null?void 0:r.purpose)!=="push"}),o}const aj=1e3;function uj(e,t,n){let r=null,i={cancelled:!1},o=0,s=0;function a(m=1){setTimeout(()=>{const v=c?"pull":"push";s=Date.now(),m1(e,t,n,{cancelToken:i,retryImmediatelyOnFetchError:!0,purpose:v}).then(()=>{if(i.cancelled)p();else if(c||d)return c=!1,d=!1,a();f=!1,o=0,s=0}).catch(b=>{if(i.cancelled)p(),f=!1,o=0,s=0;else if(m<5){const x=[0,20,40,300,900][m]*aj;o=Date.now()+x,s=0,setTimeout(()=>a(m+1),x)}else f=!1,o=0,s=0})},0)}let c=!1,d=!1,f=!1;const p=()=>{i.cancelled=!0,r&&r.unsubscribe()};return{start:()=>{r=e.localSyncEvent.subscribe(({purpose:m})=>{(v=>{i.cancelled||(v==="pull"&&(c=!0),v==="push"&&(d=!0),f?o||s>0&&Date.now():(f=!0,a()))})(m||"pull")})},stop:p}}function If(e,t){if(e&&t&&t.unsyncedTables)for(const n of t.unsyncedTables)e[n]&&(e[n].markedForSync=!1)}var Jc,Ne,y1,il,yv,mc={},g1=[],cj=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Wr(e,t){for(var n in t)e[n]=t[n];return e}function v1(e){var t=e.parentNode;t&&t.removeChild(e)}function gt(e,t,n){var r,i,o,s={};for(o in t)o=="key"?r=t[o]:o=="ref"?i=t[o]:s[o]=t[o];if(arguments.length>2&&(s.children=arguments.length>3?Jc.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)s[o]===void 0&&(s[o]=e.defaultProps[o]);return Eu(e,s,r,i,null)}function Eu(e,t,n,r,i){var o={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i??++y1};return i==null&&Ne.vnode!=null&&Ne.vnode(o),o}function Yo(e){return e.children}function ol(e,t){this.props=e,this.context=t}function Qo(e,t){if(t==null)return e.__?Qo(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Qo(e):null}function w1(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return w1(e)}}function gv(e){(!e.__d&&(e.__d=!0)&&il.push(e)&&!yc.__r++||yv!==Ne.debounceRendering)&&((yv=Ne.debounceRendering)||setTimeout)(yc)}function yc(){for(var e;yc.__r=il.length;)e=il.sort(function(t,n){return t.__v.__b-n.__v.__b}),il=[],e.some(function(t){var n,r,i,o,s,a;t.__d&&(s=(o=(n=t).__v).__e,(a=n.__P)&&(r=[],(i=Wr({},o)).__v=o.__v+1,_m(a,o,i,n.__n,a.ownerSVGElement!==void 0,o.__h!=null?[s]:null,r,s??Qo(o),o.__h),x1(r,o),o.__e!=s&&w1(o)))})}function b1(e,t,n,r,i,o,s,a,c,d){var f,p,m,v,b,x,P,S=r&&r.__k||g1,k=S.length;for(n.__k=[],f=0;f<t.length;f++)if((v=n.__k[f]=(v=t[f])==null||typeof v=="boolean"?null:typeof v=="string"||typeof v=="number"||typeof v=="bigint"?Eu(null,v,null,null,v):Array.isArray(v)?Eu(Yo,{children:v},null,null,null):v.__b>0?Eu(v.type,v.props,v.key,null,v.__v):v)!=null){if(v.__=n,v.__b=n.__b+1,(m=S[f])===null||m&&v.key==m.key&&v.type===m.type)S[f]=void 0;else for(p=0;p<k;p++){if((m=S[p])&&v.key==m.key&&v.type===m.type){S[p]=void 0;break}m=null}_m(e,v,m=m||mc,i,o,s,a,c,d),b=v.__e,(p=v.ref)&&m.ref!=p&&(P||(P=[]),m.ref&&P.push(m.ref,null,v),P.push(p,v.__c||b,v)),b!=null?(x==null&&(x=b),typeof v.type=="function"&&v.__k===m.__k?v.__d=c=k1(v,c,e):c=_1(e,v,m,S,b,c),typeof n.type=="function"&&(n.__d=c)):c&&m.__e==c&&c.parentNode!=e&&(c=Qo(m))}for(n.__e=x,f=k;f--;)S[f]!=null&&(typeof n.type=="function"&&S[f].__e!=null&&S[f].__e==n.__d&&(n.__d=Qo(r,f+1)),E1(S[f],S[f]));if(P)for(f=0;f<P.length;f++)S1(P[f],P[++f],P[++f])}function k1(e,t,n){for(var r,i=e.__k,o=0;i&&o<i.length;o++)(r=i[o])&&(r.__=e,t=typeof r.type=="function"?k1(r,t,n):_1(n,r,r,i,r.__e,t));return t}function _1(e,t,n,r,i,o){var s,a,c;if(t.__d!==void 0)s=t.__d,t.__d=void 0;else if(n==null||i!=o||i.parentNode==null)e:if(o==null||o.parentNode!==e)e.appendChild(i),s=null;else{for(a=o,c=0;(a=a.nextSibling)&&c<r.length;c+=2)if(a==i)break e;e.insertBefore(i,o),s=o}return s!==void 0?s:i.nextSibling}function vv(e,t,n){t[0]==="-"?e.setProperty(t,n):e[t]=n==null?"":typeof n!="number"||cj.test(t)?n:n+"px"}function iu(e,t,n,r,i){var o;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||vv(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||vv(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")o=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r||e.addEventListener(t,o?bv:wv,o):e.removeEventListener(t,o?bv:wv,o);else if(t!=="dangerouslySetInnerHTML"){if(i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n!=null&&(n!==!1||t[0]==="a"&&t[1]==="r")?e.setAttribute(t,n):e.removeAttribute(t))}}function wv(e){this.l[e.type+!1](Ne.event?Ne.event(e):e)}function bv(e){this.l[e.type+!0](Ne.event?Ne.event(e):e)}function _m(e,t,n,r,i,o,s,a,c){var d,f,p,m,v,b,x,P,S,k,_,R,K,B=t.type;if(t.constructor!==void 0)return null;n.__h!=null&&(c=n.__h,a=t.__e=n.__e,t.__h=null,o=[a]),(d=Ne.__b)&&d(t);try{e:if(typeof B=="function"){if(P=t.props,S=(d=B.contextType)&&r[d.__c],k=d?S?S.props.value:d.__:r,n.__c?x=(f=t.__c=n.__c).__=f.__E:("prototype"in B&&B.prototype.render?t.__c=f=new B(P,k):(t.__c=f=new ol(P,k),f.constructor=B,f.render=fj),S&&S.sub(f),f.props=P,f.state||(f.state={}),f.context=k,f.__n=r,p=f.__d=!0,f.__h=[]),f.__s==null&&(f.__s=f.state),B.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=Wr({},f.__s)),Wr(f.__s,B.getDerivedStateFromProps(P,f.__s))),m=f.props,v=f.state,p)B.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(B.getDerivedStateFromProps==null&&P!==m&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps(P,k),!f.__e&&f.shouldComponentUpdate!=null&&f.shouldComponentUpdate(P,f.__s,k)===!1||t.__v===n.__v){f.props=P,f.state=f.__s,t.__v!==n.__v&&(f.__d=!1),f.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(q){q&&(q.__=t)}),f.__h.length&&s.push(f);break e}f.componentWillUpdate!=null&&f.componentWillUpdate(P,f.__s,k),f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(m,v,b)})}if(f.context=k,f.props=P,f.__v=t,f.__P=e,_=Ne.__r,R=0,"prototype"in B&&B.prototype.render)f.state=f.__s,f.__d=!1,_&&_(t),d=f.render(f.props,f.state,f.context);else do f.__d=!1,_&&_(t),d=f.render(f.props,f.state,f.context),f.state=f.__s;while(f.__d&&++R<25);f.state=f.__s,f.getChildContext!=null&&(r=Wr(Wr({},r),f.getChildContext())),p||f.getSnapshotBeforeUpdate==null||(b=f.getSnapshotBeforeUpdate(m,v)),K=d!=null&&d.type===Yo&&d.key==null?d.props.children:d,b1(e,Array.isArray(K)?K:[K],t,n,r,i,o,s,a,c),f.base=t.__e,t.__h=null,f.__h.length&&s.push(f),x&&(f.__E=f.__=null),f.__e=!1}else o==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=dj(n.__e,t,n,r,i,o,s,c);(d=Ne.diffed)&&d(t)}catch(q){t.__v=null,(c||o!=null)&&(t.__e=a,t.__h=!!c,o[o.indexOf(a)]=null),Ne.__e(q,t,n)}}function x1(e,t){Ne.__c&&Ne.__c(t,e),e.some(function(n){try{e=n.__h,n.__h=[],e.some(function(r){r.call(n)})}catch(r){Ne.__e(r,n.__v)}})}function dj(e,t,n,r,i,o,s,a){var c,d,f,p=n.props,m=t.props,v=t.type,b=0;if(v==="svg"&&(i=!0),o!=null){for(;b<o.length;b++)if((c=o[b])&&"setAttribute"in c==!!v&&(v?c.localName===v:c.nodeType===3)){e=c,o[b]=null;break}}if(e==null){if(v===null)return document.createTextNode(m);e=i?document.createElementNS("http://www.w3.org/2000/svg",v):document.createElement(v,m.is&&m),o=null,a=!1}if(v===null)p===m||a&&e.data===m||(e.data=m);else{if(o=o&&Jc.call(e.childNodes),d=(p=n.props||mc).dangerouslySetInnerHTML,f=m.dangerouslySetInnerHTML,!a){if(o!=null)for(p={},b=0;b<e.attributes.length;b++)p[e.attributes[b].name]=e.attributes[b].value;(f||d)&&(f&&(d&&f.__html==d.__html||f.__html===e.innerHTML)||(e.innerHTML=f&&f.__html||""))}if(function(x,P,S,k,_){var R;for(R in S)R==="children"||R==="key"||R in P||iu(x,R,null,S[R],k);for(R in P)_&&typeof P[R]!="function"||R==="children"||R==="key"||R==="value"||R==="checked"||S[R]===P[R]||iu(x,R,P[R],S[R],k)}(e,m,p,i,a),f)t.__k=[];else if(b=t.props.children,b1(e,Array.isArray(b)?b:[b],t,n,r,i&&v!=="foreignObject",o,s,o?o[0]:n.__k&&Qo(n,0),a),o!=null)for(b=o.length;b--;)o[b]!=null&&v1(o[b]);a||("value"in m&&(b=m.value)!==void 0&&(b!==e.value||v==="progress"&&!b||v==="option"&&b!==p.value)&&iu(e,"value",b,p.value,!1),"checked"in m&&(b=m.checked)!==void 0&&b!==e.checked&&iu(e,"checked",b,p.checked,!1))}return e}function S1(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){Ne.__e(r,n)}}function E1(e,t,n){var r,i;if(Ne.unmount&&Ne.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||S1(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){Ne.__e(o,t)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&E1(r[i],t,typeof e.type!="function");n||e.__e==null||v1(e.__e),e.__e=e.__d=void 0}function fj(e,t,n){return this.constructor(e,n)}function kv(e,t,n){var r,i,o;Ne.__&&Ne.__(e,t),i=(r=!1)?null:t.__k,o=[],_m(t,e=t.__k=gt(Yo,null,[e]),i||mc,mc,t.ownerSVGElement!==void 0,i?null:t.firstChild?Jc.call(t.childNodes):null,o,i?i.__e:t.firstChild,r),x1(o,e)}Jc=g1.slice,Ne={__e:function(e,t,n,r){for(var i,o,s;t=t.__;)if((i=t.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(e)),s=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,r||{}),s=i.__d),s)return i.__E=i}catch(a){e=a}throw e}},y1=0,ol.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Wr({},this.state),typeof e=="function"&&(e=e(Wr({},n),this.props)),e&&Wr(n,e),e!=null&&this.__v&&(t&&this.__h.push(t),gv(this))},ol.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),gv(this))},ol.prototype.render=Yo,il=[],yc.__r=0;const qn={Alert:{error:{color:"red",fontWeight:"bold"},warning:{color:"#f80",fontWeight:"bold"},info:{color:"black"}},Darken:{position:"fixed",top:0,left:0,opacity:.5,backgroundColor:"#000",width:"100vw",height:"100vh",zIndex:150,webkitBackdropFilter:"blur(2px)",backdropFilter:"blur(2px)"},DialogOuter:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:150,alignItems:"center",display:"flex",justifyContent:"center"},DialogInner:{position:"relative",color:"#222",backgroundColor:"#fff",padding:"30px",marginBottom:"2em",maxWidth:"90%",maxHeight:"90%",overflowY:"auto",border:"3px solid #3d3d5d",borderRadius:"8px",boxShadow:"0 0 80px 10px #666",width:"auto",fontFamily:"sans-serif"},Input:{height:"35px",width:"17em",borderColor:"#ccf4",outline:"none",fontSize:"17pt",padding:"8px"}};function hj({children:e,className:t}){return gt("div",{className:t},gt("div",{style:qn.Darken}),gt("div",{style:qn.DialogOuter},gt("div",{style:qn.DialogInner},e)))}var Xc,wt,Of,_v,gc=0,C1=[],Cu=[],xv=Ne.__b,Sv=Ne.__r,Ev=Ne.diffed,Cv=Ne.__c,Iv=Ne.unmount;function xm(e,t){Ne.__h&&Ne.__h(wt,e,gc||t),gc=0;var n=wt.__H||(wt.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:Cu}),n.__[e]}function pj(e){return gc=1,function(t,n,r){var i=xm(Xc++,2);if(i.t=t,!i.__c&&(i.__=[jv(void 0,n),function(s){var a=i.__N?i.__N[0]:i.__[0],c=i.t(a,s);a!==c&&(i.__N=[c,i.__[1]],i.__c.setState({}))}],i.__c=wt,!wt.u)){wt.u=!0;var o=wt.shouldComponentUpdate;wt.shouldComponentUpdate=function(s,a,c){if(!i.__c.__H)return!0;var d=i.__c.__H.__.filter(function(p){return p.__c});if(d.every(function(p){return!p.__N}))return!o||o.call(this,s,a,c);var f=!1;return d.forEach(function(p){if(p.__N){var m=p.__[0];p.__=p.__N,p.__N=void 0,m!==p.__[0]&&(f=!0)}}),!!f&&(!o||o.call(this,s,a,c))}}return i.__N||i.__}(jv,e)}function mj(e){return gc=5,function(t,n){var r=xm(Xc++,7);return I1(r.__H,n)?(r.__V=t(),r.i=n,r.__h=t,r.__V):r.__}(function(){return{current:e}},[])}function yj(){for(var e;e=C1.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Iu),e.__H.__h.forEach(Jh),e.__H.__h=[]}catch(t){e.__H.__h=[],Ne.__e(t,e.__v)}}Ne.__b=function(e){wt=null,xv&&xv(e)},Ne.__r=function(e){Sv&&Sv(e),Xc=0;var t=(wt=e.__c).__H;t&&(Of===wt?(t.__h=[],wt.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=Cu,n.__N=n.i=void 0})):(t.__h.forEach(Iu),t.__h.forEach(Jh),t.__h=[])),Of=wt},Ne.diffed=function(e){Ev&&Ev(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(C1.push(t)!==1&&_v===Ne.requestAnimationFrame||((_v=Ne.requestAnimationFrame)||function(n){var r,i=function(){clearTimeout(o),Ov&&cancelAnimationFrame(r),setTimeout(n)},o=setTimeout(i,100);Ov&&(r=requestAnimationFrame(i))})(yj)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==Cu&&(n.__=n.__V),n.i=void 0,n.__V=Cu})),Of=wt=null},Ne.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Iu),n.__h=n.__h.filter(function(r){return!r.__||Jh(r)})}catch(r){t.some(function(i){i.__h&&(i.__h=[])}),t=[],Ne.__e(r,n.__v)}}),Cv&&Cv(e,t)},Ne.unmount=function(e){Iv&&Iv(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Iu(r)}catch(i){t=i}}),t&&Ne.__e(t,n.__v))};var Ov=typeof requestAnimationFrame=="function";function Iu(e){var t=wt,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),wt=t}function Jh(e){var t=wt;e.__c=e.__(),wt=t}function I1(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function jv(e,t){return typeof t=="function"?t(e):t}function gj({message:e,messageCode:t,messageParams:n}){return e.replace(/\{\w+\}/gi,r=>n[r.substring(1,r.length-1)])}function vj({title:e,type:t,alerts:n,fields:r,submitLabel:i,cancelLabel:o,onCancel:s,onSubmit:a}){const[c,d]=pj({}),f=mj(null);return function(p,m){var v=xm(Xc++,4);!Ne.__s&&I1(v.__H,m)&&(v.__=p,v.i=m,wt.__h.push(v))}(()=>{var p;return(p=f.current)===null||p===void 0?void 0:p.focus()},[]),gt(hj,{className:"dxc-login-dlg"},gt(Yo,null,gt("h3",{style:qn.WindowHeader},e),n.map(p=>gt("p",{style:qn.Alert[p.type]},gj(p))),gt("form",{onSubmit:p=>{p.preventDefault(),a(c)}},Object.entries(r).map(([p,{type:m,label:v,placeholder:b}],x)=>gt("label",{style:qn.Label,key:x},v?`${v}: `:"",gt("input",{ref:x===0?f:void 0,type:m,name:p,autoComplete:"on",style:qn.Input,autoFocus:!0,placeholder:b,value:c[p]||"",onInput:P=>{var S;const k=function(R,K){switch(R){case"email":return K.toLowerCase();case"otp":return K.toUpperCase();default:return K}}(m,(S=P.target)===null||S===void 0?void 0:S.value);let _=Object.assign(Object.assign({},c),{[p]:k});d(_),m==="otp"&&(k==null?void 0:k.trim().length)===8&&a(_)}}))))),gt("div",{style:qn.ButtonsDiv},gt(Yo,null,gt("button",{type:"submit",style:qn.Button,onClick:()=>a(c)},i),o&&gt("button",{style:qn.Button,onClick:s},o))))}class Tv extends ol{constructor(t){super(t),this.observer=n=>this.setState({userInteraction:n}),this.state={userInteraction:void 0}}componentDidMount(){this.subscription=hn(this.props.db.cloud.userInteraction).subscribe(this.observer)}componentWillUnmount(){this.subscription&&(this.subscription.unsubscribe(),delete this.subscription)}render(t,{userInteraction:n}){return n?gt(vj,Object.assign({},n)):null}}function sa(e){const t=new WeakMap;return n=>{let r=t.get(n);return r||(r=e(n),t.set(n,r)),r}}const vc=sa(e=>new Rn(en));function Zc(e,t){let n=t,r=hn(e).pipe(cn(o=>n=o),TC({resetOnRefCountZero:()=>Db(1e3)}));const i=new _t(o=>{let s=!1;const a=r.subscribe({next(c){s=!0,o.next(c)},error(c){o.error(c)},complete(){o.complete()}});return s||a.closed||o.next(n),a});return i.getValue=()=>n,i}const O1=sa(e=>Zc(ei(()=>e.roles.where({realmId:"rlm-public"}).toArray().then(t=>{const n={};for(const r of t.slice().sort((i,o)=>(i.sortOrder||0)-(o.sortOrder||0)))n[r.name]=r;return n})),{})),j1=sa(e=>Zc(vc(e._novip).pipe(Bt(t=>ei(()=>e.transaction("r","realms","members",()=>Promise.all([e.members.where({userId:t.userId}).toArray(),e.realms.toArray(),t.userId]).then(([n,r,i])=>({selfMembers:n,realms:r,userId:i})))))),{selfMembers:[],realms:[],get userId(){return e.cloud.currentUserId}}));function wj(...e){return e.length===0?{}:e.reduce((n,r)=>{const i=Object.assign({},n);for(const[o,s]of Object.entries(r))if(o in i&&i[o]){if(i[o]==="*")continue;if(s==="*")i[o]="*";else if(Array.isArray(s)&&Array.isArray(i[o])){const a=i,c=a[o];a[o]=[...new Set([...c,...s])]}else if(typeof s=="object"&&s&&typeof i[o]=="object"){const a=i[o];for(const[c,d]of Object.entries(s))a[c]!=="*"&&(d==="*"?a[c]="*":Array.isArray(a[c])&&Array.isArray(d)&&(a[c]=[...new Set([...a[c],...d])]))}}else i[o]=r[o];return i})}const T1=sa(e=>function(t,n){let r;const i=t.pipe(cn(o=>r=n(o)));return i.getValue=()=>r!==void 0?r:r=n(t.getValue()),i}(Zc(Cl([j1(e._novip),O1(e._novip)]).pipe(cn(([{selfMembers:t,realms:n,userId:r},i])=>({selfMembers:t,realms:n,userId:r,globalRoles:i}))),{selfMembers:[],realms:[],userId:en.userId,globalRoles:{}}),({selfMembers:t,realms:n,userId:r,globalRoles:i})=>n.map(s=>{const a=t.filter(f=>f.realmId===s.realmId),c=a.map(f=>f.permissions).filter(f=>f),d=km(a.map(f=>f.roles).filter(f=>f)).map(f=>i[f]).filter(f=>f).map(f=>f.permissions);return Object.assign(Object.assign({},s),{permissions:s.owner===r?{manage:"*"}:wj(...c,...d)})}).reduce((s,a)=>Object.assign(Object.assign({},s),{[a.realmId]:a}),{[r]:{realmId:r,owner:r,name:r,permissions:{manage:"*"}}})));class Nv{constructor(t,n,r){this.permissions=t||{},this.tableName=n,this.isOwner=r}add(...t){var n;return this.permissions.manage==="*"||!!(!((n=this.permissions.manage)===null||n===void 0)&&n.includes(this.tableName))||this.permissions.add==="*"||!!t.every(r=>{var i;return(i=this.permissions.add)===null||i===void 0?void 0:i.includes(r)})}update(...t){var n,r;if(this.isOwner||this.permissions.manage==="*"||!((n=this.permissions.manage)===null||n===void 0)&&n.includes(this.tableName))return!0;if(this.permissions.update==="*")return t.every(o=>o!=="owner");const i=(r=this.permissions.update)===null||r===void 0?void 0:r[this.tableName];return i==="*"?t.every(o=>o!=="owner"):t.every(o=>i==null?void 0:i.some(s=>s===o||s==="*"&&o!=="owner"))}delete(){var t;return!(!this.isOwner&&this.permissions.manage!=="*")||!!(!((t=this.permissions.manage)===null||t===void 0)&&t.includes(this.tableName))}}const bj=sa(e=>{const t=vc(e._novip).pipe(Bt(i=>ei(()=>e.members.where({email:i.email||""}).toArray()))),n=T1(e._novip),r=j1(e._novip);return Zc(Cl([t,r,n]).pipe(cn(([i,o,s])=>{const a=(f,p)=>Object.assign(Object.assign({},f),{[p.id]:Object.assign(Object.assign({},p),{realm:s[p.realmId]})}),c=i.reduce(a,{}),d=o.selfMembers.reduce(a,c);return Object.values(d).filter(f=>!f.accepted).map(f=>Object.assign(Object.assign({},f),{accept(){return he(this,void 0,void 0,function*(){yield e.members.update(f.id,{accepted:new Date})})},reject(){return he(this,void 0,void 0,function*(){yield e.members.update(f.id,{rejected:new Date})})}}))})),[])});function kj(e){return t=>{var n;const r=t.doc;if(!r)throw new Error("Internal error: DexieYProvider.createYHandler called without a doc. This is unexpected.");const{parentTable:i}=r.meta||{};if(!(!((n=e.cloud.schema)===null||n===void 0)&&n[i].markedForSync))return;let o;Object.defineProperty(t,"awareness",{get:()=>o||(o=function(s,a,c){const{parentTable:d,parentId:f,parentProp:p,updatesTable:m}=a.meta,v=new nO(a),b=p1(a);return v.on("update",({added:x,updated:P,removed:S},k)=>{const _=x.concat(P).concat(S),R=s.cloud.currentUser.value;if(k!=="server"&&R.isLoggedIn&&!Ml(s)){const K=rO(v,_);s.messageProducer.next({type:"aware",table:d,prop:p,k:a.meta.parentId,u:K}),c.destroyed&&s.messageProducer.next({type:"doc-close",table:d,prop:p,k:a.meta.parentId})}}),v.on("destroy",()=>{$k(v,[a.clientID],"provider destroyed")}),he(this,void 0,void 0,function*(){if(c.destroyed)return;let x=!1,P=1;const S=Cl([s.cloud.webSocketStatus,b.pipe(Mb(null))]).subscribe(([_])=>{if(c.destroyed)return;x=_==="connected";const R=s.cloud.currentUser.value;_==="connected"&&R.isLoggedIn&&!Ml(s)&&(++P,k().catch(K=>{}))});function k(){return he(this,void 0,void 0,function*(){const _=P,R=s.table(m),K=s.$syncState,[B,q]=yield s.transaction("r",K,R,()=>he(this,void 0,void 0,function*(){const fe=yield R.get(ni),Y=yield K.get("syncState");return[(fe==null?void 0:fe.receivedUntil)||0,(Y==null?void 0:Y.yServerRevision)||(Y==null?void 0:Y.serverRevision)]}));if(c.destroyed||P!==_||!x)return;const H={type:"doc-open",table:d,prop:p,k:f,serverRev:q},ie=yield R.where("i").between(B,1/0,!1).filter(fe=>Mc(fe.k,f)===0&&(1&(fe.f||0))==0).toArray();if(!c.destroyed&&P===_&&x){if(ie.length>0){const fe=lc(ie.map(ve=>ve.u)),Y=mk(fe);H.sv=Y}s.messageProducer.next(H)}})}c.addCleanupHandler(S)}),v}(e,r,t),h1.set(r,o),o)})}}function zs(e){return"rlm~"+e}const _j={nameSuffix:!0};function Xh(e){const t=e.name,n=vc(e),r=[];let i=!1,o=null;e.on("ready",f=>he(this,void 0,void 0,function*(){try{yield function(p){return he(this,void 0,void 0,function*(){var m,v,b,x,P,S,k;s=!1;const _=lr(p);typeof window<"u"&&typeof document<"u"&&(!((m=_.cloud.options)===null||m===void 0)&&m.customLoginGui||r.push(function(Y){let ve=!1;const ke=document.createElement("div");return document.body?(document.body.appendChild(ke),kv(gt(Tv,{db:Y.vip}),ke)):addEventListener("DOMContentLoaded",()=>{ve||(document.body.appendChild(ke),kv(gt(Tv,{db:Y.vip}),ke))}),{unsubscribe(){try{ke.remove()}catch{}ve=!0},get closed(){return ve}}}(p))),_.cloud.isServiceWorkerDB||r.push(function(Y){let ve=Y.cloud.webSocketStatus.value;const ke=Y.cloud.webSocketStatus.pipe(Bt(Ee=>{const Ce=ve;ve=Ee;const Q=yr(Ee);switch(Ee){case"disconnected":return rl.value?Q.pipe(Ng(500)):Q;case"connecting":return Ce==="not-started"||Ce==="error"?Q:Q.pipe(Ng(4e3));default:return Q}}));return Cl([ke,Y.syncStateChangedEvent.pipe(Mb({phase:"initial"})),vc(Y.dx._novip),Qh]).pipe(cn(([Ee,Ce,Q,ae])=>{var U;if(!((U=Q.license)===null||U===void 0)&&U.status&&Q.license.status!=="ok")return{phase:"offline",status:"offline",license:Q.license.status};let{phase:ee,error:ne,progress:de}=Ce,oe=Ee;return ee==="error"&&(oe="error"),Ee==="not-started"&&(ee!=="pushing"&&ee!=="pulling"||(oe="connecting")),Y.cloud.syncState.value.phase!=="error"||Ce.phase!=="pushing"&&Ce.phase!=="pulling"||(oe="connecting"),ae||(oe="disconnected"),{phase:ee,error:ne,progress:de,status:Do?oe:"offline",license:"ok"}}))}(_).subscribe(p.cloud.syncState)),r.push(_.syncCompleteEvent.subscribe(c)),_.tables.every(Y=>Y.core)||function(){throw new De.SchemaError("Version increment needed to allow dexie-cloud change tracking")}();const R="serviceWorker"in navigator?yield navigator.serviceWorker.getRegistrations():[],[K,B]=yield _.transaction("rw",_.$syncState,()=>he(this,void 0,void 0,function*(){var Y,ve;const{options:ke,schema:Ee}=_.cloud,[Ce,Q,ae]=yield Promise.all([_.getOptions(),_.getSchema(),_.getPersistedSyncState()]);if(i){if(!Ce||JSON.stringify(Ce)!==JSON.stringify(ke)){if(!ke)throw new Error("Internal error");const U=Object.assign({},ke);delete U.fetchTokens,delete U.awarenessProtocol,yield _.$syncState.put(U,"options")}}else _.cloud.options=Ce||null;if(!((Y=_.cloud.options)===null||Y===void 0)&&Y.tryUseServiceWorker&&"serviceWorker"in navigator&&R.length>0&&!WO?_.cloud.usingServiceWorker=!0:(!((ve=_.cloud.options)===null||ve===void 0)&&ve.tryUseServiceWorker&&_.cloud.isServiceWorkerDB,_.cloud.usingServiceWorker=!1),If(Ee,_.cloud.options),If(Q,_.cloud.options),Ee){if(!Q||JSON.stringify(Q)!==JSON.stringify(Ee)){const U=Q||{};for(const[ee,ne]of Object.entries(Ee)){const de=U[ee];de?(de.markedForSync=ne.markedForSync,ne.deleted=de.deleted,de.generatedGlobalId=ne.generatedGlobalId):U[ee]=Object.assign({},ne)}yield _.$syncState.put(U,"schema"),Object.assign(Ee,U)}}else _.cloud.schema=Q||null;return[ae==null?void 0:ae.initiallySynced,ae==null?void 0:ae.realms]}));if(K&&_.setInitiallySynced(!0),function(Y){var ve,ke;for(const Ee of Y.tables)if(!((ke=(ve=Y.cloud.schema)===null||ve===void 0?void 0:ve[Ee.name])===null||ke===void 0)&&ke.markedForSync){if(Ee.schema.primKey.auto)throw new De.SchemaError(`Table ${Ee.name} is both autoIncremented and synced. Use db.cloud.configure({unsyncedTables: [${JSON.stringify(Ee.name)}]}) to blacklist it from sync`);if(!Ee.schema.primKey.keyPath)throw new De.SchemaError(`Table ${Ee.name} cannot be both synced and outbound. Use db.cloud.configure({unsyncedTables: [${JSON.stringify(Ee.name)}]}) to blacklist it from sync`)}}(_),a(),!_.cloud.isServiceWorkerDB){r.push(ei(()=>_.getCurrentUser()).subscribe(n)),r.push(ei(()=>_.getPersistedSyncState()).subscribe(_.cloud.persistedSyncState)),yield Ti(Cl([n.pipe(Pg(1),lo(1)),_.cloud.persistedSyncState.pipe(Pg(1),lo(1))]));const Y=kj(_);Vt.on.new.subscribe(Y),_.dx.once("close",()=>{Vt.on.new.unsubscribe(Y)})}let q=!1;const H=yield _.getCurrentUser(),ie=(v=_.cloud.options)===null||v===void 0?void 0:v.requireAuth;ie&&(_.cloud.isServiceWorkerDB?yield Ti(n.pipe(_n(Y=>!!Y.isLoggedIn),lo(1))):typeof ie=="object"?(!H.isLoggedIn||ie.userId&&H.userId!==ie.userId||ie.email&&H.email!==ie.email)&&(q=yield xf(_,ie)):H.isLoggedIn||(q=yield xf(_))),!H.isLoggedIn||B&&B.includes(H.userId)||(q=!0),o&&o.stop(),o=null,a();const fe=((b=_.cloud.options)===null||b===void 0?void 0:b.databaseUrl)&&(!K||q);fe&&(yield function(Y,ve,ke){return he(this,void 0,void 0,function*(){yield c1(Y,o1,()=>Qc(Y,ve,ke,{isInitialSync:!0}))})}(_,_.cloud.options,_.cloud.schema),_.setInitiallySynced(!0)),a(),_.cloud.usingServiceWorker&&(!((x=_.cloud.options)===null||x===void 0)&&x.databaseUrl)?(fe||Bk(_,"push").catch(()=>{}),function(Y){return he(this,void 0,void 0,function*(){var ve;try{const{periodicSync:ke}=yield navigator.serviceWorker.ready;if(ke)try{yield ke.register(`dexie-cloud:${Y.name}`,(ve=Y.cloud.options)===null||ve===void 0?void 0:ve.periodicSync)}catch{}}catch{}})}(_).catch(()=>{})):!((P=_.cloud.options)===null||P===void 0)&&P.databaseUrl&&_.cloud.schema&&!_.cloud.isServiceWorkerDB&&(o=uj(_,_.cloud.options,_.cloud.schema),o.start(),fe||pr(_,"push")),a(),_.cloud.isServiceWorkerDB||r.push(Qn(self,"online").subscribe(()=>{_.syncStateChangedEvent.next({phase:"not-in-sync"}),Ml(_)||pr(_,"push")}),Qn(self,"offline").subscribe(()=>{_.syncStateChangedEvent.next({phase:"offline"})})),!(!((S=_.cloud.options)===null||S===void 0)&&S.databaseUrl)||!((k=_.cloud.options)===null||k===void 0)&&k.disableWebSocket||HO||r.push(function(Y){var ve;if(!(!((ve=Y.cloud.options)===null||ve===void 0)&&ve.databaseUrl))throw new Error("No database URL to connect WebSocket to");const ke=Y.messageConsumer.readyToServe.pipe(_n(Ce=>Ce),Bt(()=>Y.getPersistedSyncState()),_n(Ce=>Ce&&Ce.serverRevision),Bt(Ce=>he(this,void 0,void 0,function*(){return{type:"ready",rev:Ce.serverRevision,realmSetHash:yield Wh(Ce)}}))),Ee=zc(ke,Y.messageProducer);return function Ce(){return Y.cloud.persistedSyncState.pipe(_n(Q=>Q==null?void 0:Q.serverRevision),lo(1),Bt(Q=>Y.cloud.currentUser.pipe(cn(ae=>[ae,Q]))),Bt(([Q,ae])=>Qh.pipe(cn(U=>[U?Q:null,ae]))),Bt(([Q,ae])=>Q!=null&&Q.isLoggedIn&&!(ae!=null&&ae.realms.includes(Q.userId))?Y.cloud.persistedSyncState.pipe(_n(U=>(U==null?void 0:U.realms.includes(Q.userId))||!1),lo(1),cn(U=>[Q,U])):new Rn([Q,ae])),Bt(Q=>he(this,[Q],void 0,function*([ae,U]){return[ae,yield Wh(U)]})),Rb(([Q,ae],[U,ee])=>Q===U&&ae===ee),Bt(([Q,ae])=>{var U;return!((U=Y.cloud.persistedSyncState)===null||U===void 0)&&U.value?Q?new rj(Y,Y.cloud.persistedSyncState.value.serverRevision,Y.cloud.persistedSyncState.value.yServerRevision,ae,Y.cloud.persistedSyncState.value.clientIdentity,Ee,Y.cloud.webSocketStatus,Q):hn([]):Ce()}),Ih(Q=>(Q==null?void 0:Q.name)==="TokenExpiredError"?yr(!0).pipe(Bt(()=>he(this,void 0,void 0,function*(){const ae=yield Y.getCurrentUser(),U=yield Yc(Y.cloud.options.databaseUrl,ae);yield Y.table("$logins").update(ae.userId,{accessToken:U.accessToken,accessTokenExpiration:U.accessTokenExpiration,claims:U.claims,license:U.license,data:U.data})})),Bt(()=>Ce())):Ig(()=>Q)),Ih(Q=>(Y.cloud.webSocketStatus.next("error"),Q instanceof sj?Ig(()=>Q):hn(lj()).pipe(Bt(()=>Ce())))))}().subscribe({next:Ce=>{Ce&&Y.messageConsumer.enqueue(Ce)},error:Ce=>{},complete:()=>{}})}(_))})}(f)}catch{}}),!0);let s=!1;function a(){if(s)throw new De.DatabaseClosedError}e.once("close",()=>{r.forEach(f=>f.unsubscribe()),r.splice(0,r.length),s=!0,o&&o.stop(),o=null,n.next(en)});const c=new Bi;var d;e.cloud={version:"4.2.1",options:Object.assign({},_j),schema:null,get currentUserId(){return n.value.userId||en.userId},currentUser:n,syncState:new Rn({phase:"initial",status:"not-started"}),events:{syncComplete:c},persistedSyncState:new Rn(void 0),userInteraction:new Rn(void 0),webSocketStatus:new Rn("not-started"),login(f){return he(this,void 0,void 0,function*(){const p=lr(e);yield p.cloud.sync(),yield xf(p,f)})},invites:bj(e),roles:O1(e),configure(f){f=e.cloud.options=Object.assign(Object.assign({},e.cloud.options),f),i=!0,f.databaseUrl&&f.nameSuffix&&(e.name=`${t}-${function(p){const m=new URL(p);return m.pathname==="/"?m.hostname.split(".")[0]:m.pathname.split("/")[1]}(f.databaseUrl)}`,lr(e).reconfigure()),If(e.cloud.schema,e.cloud.options)},logout(){return he(this,arguments,void 0,function*({force:f}={}){f?yield Bh(lr(e),{deleteUnsyncedData:!0}):yield Vk(lr(e))})},sync(){return he(this,arguments,void 0,function*({wait:f,purpose:p}={wait:!0,purpose:"push"}){var m;f===void 0&&(f=!0);const v=lr(e);if((((m=v.cloud.currentUser.value.license)===null||m===void 0?void 0:m.status)||"ok")!=="ok"&&(yield Gc(v)),p==="pull"){const b=v.cloud.persistedSyncState.value;if(pr(v,p),f){const x=yield Ti(v.cloud.persistedSyncState.pipe(_n(P=>(P==null?void 0:P.timestamp)!=null&&(!b||P.timestamp>b.timestamp))));if(x!=null&&x.error)throw new Error("Sync error: "+x.error)}}else if(yield mv(v)){const b=v.cloud.persistedSyncState.value;pr(v,p),f&&(yield Ti(hn(ei(()=>he(this,void 0,void 0,function*(){const x=yield mv(v),P=yield v.getPersistedSyncState();if((P==null?void 0:P.timestamp)!==(b==null?void 0:b.timestamp)&&(P!=null&&P.error))throw new Error("Sync error: "+P.error);return x}))).pipe(_n(x=>!x))))}})},permissions:(f,p)=>function(m,v,b){if(!v)throw new TypeError("Cannot check permissions of undefined or null. A Dexie Cloud object with realmId and owner expected.");const{owner:x,realmId:P}=v;if(!b){if(typeof v.table!="function")throw new TypeError("Missing 'table' argument to permissions and table could not be extracted from entity");b=v.table()}const S=T1(m),k=R=>{const K=R[P||m.cloud.currentUserId];return K?new Nv(K.permissions,b,P===void 0||P===m.cloud.currentUserId||x===m.cloud.currentUserId):new Nv({},b,!x||x===m.cloud.currentUserId)},_=S.pipe(cn(k));return _.getValue=()=>k(S.getValue()),_}(e._novip,f,p)},e.Version.prototype._parseStoresSpec=De.override(e.Version.prototype._parseStoresSpec,f=>ZO(f,e)),e.Table.prototype.newId=function({colocateWith:f}={}){const p=f&&f.substr(f.length-3);return u1(e.cloud.schema[this.name].idPrefix||"",p)},e.Table.prototype.idPrefix=function(){var f,p;return((p=(f=this.db.cloud.schema)===null||f===void 0?void 0:f[this.name])===null||p===void 0?void 0:p.idPrefix)||""},e.use(XO({currentUserObservable:e.cloud.currentUser,db:lr(e)})),e.use((d=lr(e),{stack:"dbcore",name:"implicitPropSetterMiddleware",level:1,create:f=>Object.assign(Object.assign({},f),{table:p=>{const m=f.table(p);return Object.assign(Object.assign({},m),{mutate:v=>{var b,x,P,S,k,_;const R=v.trans;if(R.disableChangeTracking)return m.mutate(v);const K=(x=(b=R.currentUser)===null||b===void 0?void 0:b.userId)!==null&&x!==void 0?x:en.userId;if(!((S=(P=d.cloud.schema)===null||P===void 0?void 0:P[p])===null||S===void 0)&&S.markedForSync&&(v.type==="add"||v.type==="put")){if(p==="members")for(const B of v.values)typeof B.email=="string"&&(B.email=B.email.trim().toLowerCase());for(const B of v.values){B.owner||(B.owner=K),B.realmId||(B.realmId=K);const q=(_=(k=m.schema.primaryKey).extractKey)===null||_===void 0?void 0:_.call(k,B);typeof q=="string"&&q[0]==="#"&&v.type==="put"&&(delete v.criteria,delete v.changeSpec,delete v.updates,B.$ts=Date.now())}}return m.mutate(v)}})}})})),e.use(YO(lr(e)))}Xh.version="4.2.1",De.Cloud=Xh;class xj extends YS{constructor(){super(...arguments);Lr(this,"id");Lr(this,"realmId");Lr(this,"owner");Lr(this,"title")}isSharable(){return this.realmId===zs(this.id)}isPrivate(){return this.id[0]==="#"}async makeSharable(){if(this.isPrivate())throw new Error("Private lists cannot be made sharable");const n=this.realmId,r=zs(this.id),{db:i}=this;return await i.transaction("rw",[i.todoLists,i.todoItems,i.realms],async()=>{await i.realms.put({realmId:r,name:this.title,represents:"a to-do list"}),await i.todoLists.update(this.id,{realmId:r}),await i.todoItems.where({realmId:n,todoListId:this.id}).modify({realmId:r})}),r}async unshareWithEveryone(){const{db:n}=this,r=zs(this.id);await n.transaction("rw",[n.todoLists,n.todoItems,n.members,n.realms],async()=>{await n.todoItems.where({realmId:r,todoListId:this.id}).modify({realmId:n.cloud.currentUserId}),await n.todoLists.update(this.id,{realmId:this.db.cloud.currentUserId}),await n.members.where("realmId").equals(r).delete(),await n.realms.delete(r)})}async shareWith(n,r,i,o){const{db:s}=this;await s.transaction("rw",[s.members,s.todoLists,s.todoItems,s.realms],async()=>{let a=this.realmId;this.isSharable()||(a=await this.makeSharable()),await s.members.add({realmId:a,name:n,email:r,invite:i,roles:o})})}async unshareWith(n){const{db:r}=this;await r.transaction("rw",[r.todoLists,r.todoItems,r.members,r.realms],async()=>{await r.members.delete(n.id),await r.members.where({realmId:this.realmId}).filter(o=>o.userId!==r.cloud.currentUserId).count()===0&&await this.unshareWithEveryone()})}async leave(){const{db:n}=this;await n.members.where({realmId:this.realmId,userId:n.cloud.currentUserId}).delete()}async delete(){const{db:n}=this;await n.transaction("rw",[n.todoLists,n.todoItems,n.members,n.realms],()=>{n.todoItems.where({todoListId:this.id}).delete(),n.todoLists.delete(this.id);const r=zs(this.id);n.realms.delete(r)})}}class Sj extends De{constructor(){super("TodoDBCloud2",{addons:[Xh],cache:"immutable"});Lr(this,"todoLists");Lr(this,"todoItems");Lr(this,"openCloseStates");this.version(14).stores({todoLists:"@id",todoItems:"@id, [todoListId+realmId]",openCloseStates:""}),this.todoLists.mapToClass(xj),this.on("populate",()=>{this.on("ready",()=>void 0)}),this.cloud.configure({unsyncedTables:["openCloseStates"],databaseUrl:"https://z0lesejpr.dexie.cloud",tryUseServiceWorker:!0,requireAuth:!1})}}const _e=new Sj;/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Cj=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),Pv=e=>{const t=Cj(e);return t.charAt(0).toUpperCase()+t.slice(1)},N1=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),Ij=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Oj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=Se.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:s,...a},c)=>Se.createElement("svg",{ref:c,...Oj,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:N1("lucide",i),...!o&&!Ij(a)&&{"aria-hidden":"true"},...a},[...s.map(([d,f])=>Se.createElement(d,f)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=(e,t)=>{const n=Se.forwardRef(({className:r,...i},o)=>Se.createElement(jj,{ref:o,iconNode:t,className:N1(`lucide-${Ej(Pv(e))}`,`lucide-${e}`,r),...i}));return n.displayName=Pv(e),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Av=St("chevron-down",Tj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Pj=St("circle-alert",Nj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=[["path",{d:"M13 16a3 3 0 0 1 0 6H7a5 5 0 1 1 4.9-6z",key:"ie2ih4"}],["path",{d:"M18.376 14.512a6 6 0 0 0 3.461-4.127c.148-.625-.659-.97-1.248-.714a4 4 0 0 1-5.259-5.26c.255-.589-.09-1.395-.716-1.248a6 6 0 0 0-4.594 5.36",key:"zwnc1e"}]],Dj=St("cloud-moon",Aj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Dv=St("cloud",Lj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Mj=St("crown",Rj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],$j=St("list",Uj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Fj=St("loader-circle",zj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Lv=St("log-out",Bj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Rv=St("mail",Kj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Wj=St("menu",Vj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],P1=St("plus",Hj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Gj=St("rotate-ccw",qj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Qj=St("share-2",Yj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ed=St("trash-2",Jj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Zj=St("user-plus",Xj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eT=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],A1=St("user",eT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tT=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],nT=St("users",tT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],iT=St("wifi-off",rT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oT=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],sT=St("wifi",oT);function D1(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=D1(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function L1(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=D1(e))&&(r&&(r+=" "),r+=t);return r}const Mv=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Uv=L1,lT=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return Uv(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:o}=t,s=Object.keys(i).map(d=>{const f=n==null?void 0:n[d],p=o==null?void 0:o[d];if(f===null)return null;const m=Mv(f)||Mv(p);return i[d][m]}),a=n&&Object.entries(n).reduce((d,f)=>{let[p,m]=f;return m===void 0||(d[p]=m),d},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((d,f)=>{let{class:p,className:m,...v}=f;return Object.entries(v).every(b=>{let[x,P]=b;return Array.isArray(P)?P.includes({...o,...a}[x]):{...o,...a}[x]===P})?[...d,p,m]:d},[]);return Uv(e,s,c,n==null?void 0:n.class,n==null?void 0:n.className)},Sm="-",aT=e=>{const t=cT(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:s=>{const a=s.split(Sm);return a[0]===""&&a.length!==1&&a.shift(),R1(a,t)||uT(s)},getConflictingClassGroupIds:(s,a)=>{const c=n[s]||[];return a&&r[s]?[...c,...r[s]]:c}}},R1=(e,t)=>{var s;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),i=r?R1(e.slice(1),r):void 0;if(i)return i;if(t.validators.length===0)return;const o=e.join(Sm);return(s=t.validators.find(({validator:a})=>a(o)))==null?void 0:s.classGroupId},$v=/^\[(.+)\]$/,uT=e=>{if($v.test(e)){const t=$v.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},cT=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const i in n)Zh(n[i],r,i,t);return r},Zh=(e,t,n,r)=>{e.forEach(i=>{if(typeof i=="string"){const o=i===""?t:zv(t,i);o.classGroupId=n;return}if(typeof i=="function"){if(dT(i)){Zh(i(r),t,n,r);return}t.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([o,s])=>{Zh(s,zv(t,o),n,r)})})},zv=(e,t)=>{let n=e;return t.split(Sm).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},dT=e=>e.isThemeGetter,fT=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const i=(o,s)=>{n.set(o,s),t++,t>e&&(t=0,r=n,n=new Map)};return{get(o){let s=n.get(o);if(s!==void 0)return s;if((s=r.get(o))!==void 0)return i(o,s),s},set(o,s){n.has(o)?n.set(o,s):i(o,s)}}},ep="!",tp=":",hT=tp.length,pT=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=i=>{const o=[];let s=0,a=0,c=0,d;for(let b=0;b<i.length;b++){let x=i[b];if(s===0&&a===0){if(x===tp){o.push(i.slice(c,b)),c=b+hT;continue}if(x==="/"){d=b;continue}}x==="["?s++:x==="]"?s--:x==="("?a++:x===")"&&a--}const f=o.length===0?i:i.substring(c),p=mT(f),m=p!==f,v=d&&d>c?d-c:void 0;return{modifiers:o,hasImportantModifier:m,baseClassName:p,maybePostfixModifierPosition:v}};if(t){const i=t+tp,o=r;r=s=>s.startsWith(i)?o(s.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:s,maybePostfixModifierPosition:void 0}}if(n){const i=r;r=o=>n({className:o,parseClassName:i})}return r},mT=e=>e.endsWith(ep)?e.substring(0,e.length-1):e.startsWith(ep)?e.substring(1):e,yT=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let o=[];return r.forEach(s=>{s[0]==="["||t[s]?(i.push(...o.sort(),s),o=[]):o.push(s)}),i.push(...o.sort()),i}},gT=e=>({cache:fT(e.cacheSize),parseClassName:pT(e),sortModifiers:yT(e),...aT(e)}),vT=/\s+/,wT=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:o}=t,s=[],a=e.trim().split(vT);let c="";for(let d=a.length-1;d>=0;d-=1){const f=a[d],{isExternal:p,modifiers:m,hasImportantModifier:v,baseClassName:b,maybePostfixModifierPosition:x}=n(f);if(p){c=f+(c.length>0?" "+c:c);continue}let P=!!x,S=r(P?b.substring(0,x):b);if(!S){if(!P){c=f+(c.length>0?" "+c:c);continue}if(S=r(b),!S){c=f+(c.length>0?" "+c:c);continue}P=!1}const k=o(m).join(":"),_=v?k+ep:k,R=_+S;if(s.includes(R))continue;s.push(R);const K=i(S,P);for(let B=0;B<K.length;++B){const q=K[B];s.push(_+q)}c=f+(c.length>0?" "+c:c)}return c};function bT(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=M1(t))&&(r&&(r+=" "),r+=n);return r}const M1=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=M1(e[r]))&&(n&&(n+=" "),n+=t);return n};function kT(e,...t){let n,r,i,o=s;function s(c){const d=t.reduce((f,p)=>p(f),e());return n=gT(d),r=n.cache.get,i=n.cache.set,o=a,a(c)}function a(c){const d=r(c);if(d)return d;const f=wT(c,n);return i(c,f),f}return function(){return o(bT.apply(null,arguments))}}const yt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},U1=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,$1=/^\((?:(\w[\w-]*):)?(.+)\)$/i,_T=/^\d+\/\d+$/,xT=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ST=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ET=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,CT=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,IT=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,oo=e=>_T.test(e),Pe=e=>!!e&&!Number.isNaN(Number(e)),Mr=e=>!!e&&Number.isInteger(Number(e)),jf=e=>e.endsWith("%")&&Pe(e.slice(0,-1)),ur=e=>xT.test(e),OT=()=>!0,jT=e=>ST.test(e)&&!ET.test(e),z1=()=>!1,TT=e=>CT.test(e),NT=e=>IT.test(e),PT=e=>!me(e)&&!ye(e),AT=e=>ls(e,K1,z1),me=e=>U1.test(e),_i=e=>ls(e,V1,jT),Tf=e=>ls(e,UT,Pe),Fv=e=>ls(e,F1,z1),DT=e=>ls(e,B1,NT),ou=e=>ls(e,W1,TT),ye=e=>$1.test(e),Ls=e=>as(e,V1),LT=e=>as(e,$T),Bv=e=>as(e,F1),RT=e=>as(e,K1),MT=e=>as(e,B1),su=e=>as(e,W1,!0),ls=(e,t,n)=>{const r=U1.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},as=(e,t,n=!1)=>{const r=$1.exec(e);return r?r[1]?t(r[1]):n:!1},F1=e=>e==="position"||e==="percentage",B1=e=>e==="image"||e==="url",K1=e=>e==="length"||e==="size"||e==="bg-size",V1=e=>e==="length",UT=e=>e==="number",$T=e=>e==="family-name",W1=e=>e==="shadow",zT=()=>{const e=yt("color"),t=yt("font"),n=yt("text"),r=yt("font-weight"),i=yt("tracking"),o=yt("leading"),s=yt("breakpoint"),a=yt("container"),c=yt("spacing"),d=yt("radius"),f=yt("shadow"),p=yt("inset-shadow"),m=yt("text-shadow"),v=yt("drop-shadow"),b=yt("blur"),x=yt("perspective"),P=yt("aspect"),S=yt("ease"),k=yt("animate"),_=()=>["auto","avoid","all","avoid-page","page","left","right","column"],R=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],K=()=>[...R(),ye,me],B=()=>["auto","hidden","clip","visible","scroll"],q=()=>["auto","contain","none"],H=()=>[ye,me,c],ie=()=>[oo,"full","auto",...H()],fe=()=>[Mr,"none","subgrid",ye,me],Y=()=>["auto",{span:["full",Mr,ye,me]},Mr,ye,me],ve=()=>[Mr,"auto",ye,me],ke=()=>["auto","min","max","fr",ye,me],Ee=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Ce=()=>["start","end","center","stretch","center-safe","end-safe"],Q=()=>["auto",...H()],ae=()=>[oo,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...H()],U=()=>[e,ye,me],ee=()=>[...R(),Bv,Fv,{position:[ye,me]}],ne=()=>["no-repeat",{repeat:["","x","y","space","round"]}],de=()=>["auto","cover","contain",RT,AT,{size:[ye,me]}],oe=()=>[jf,Ls,_i],be=()=>["","none","full",d,ye,me],Ae=()=>["",Pe,Ls,_i],Je=()=>["solid","dashed","dotted","double"],$e=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Te=()=>[Pe,jf,Bv,Fv],ut=()=>["","none",b,ye,me],le=()=>["none",Pe,ye,me],Ve=()=>["none",Pe,ye,me],rt=()=>[Pe,ye,me],we=()=>[oo,"full",...H()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ur],breakpoint:[ur],color:[OT],container:[ur],"drop-shadow":[ur],ease:["in","out","in-out"],font:[PT],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ur],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ur],shadow:[ur],spacing:["px",Pe],text:[ur],"text-shadow":[ur],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",oo,me,ye,P]}],container:["container"],columns:[{columns:[Pe,me,ye,a]}],"break-after":[{"break-after":_()}],"break-before":[{"break-before":_()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:K()}],overflow:[{overflow:B()}],"overflow-x":[{"overflow-x":B()}],"overflow-y":[{"overflow-y":B()}],overscroll:[{overscroll:q()}],"overscroll-x":[{"overscroll-x":q()}],"overscroll-y":[{"overscroll-y":q()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:ie()}],"inset-x":[{"inset-x":ie()}],"inset-y":[{"inset-y":ie()}],start:[{start:ie()}],end:[{end:ie()}],top:[{top:ie()}],right:[{right:ie()}],bottom:[{bottom:ie()}],left:[{left:ie()}],visibility:["visible","invisible","collapse"],z:[{z:[Mr,"auto",ye,me]}],basis:[{basis:[oo,"full","auto",a,...H()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Pe,oo,"auto","initial","none",me]}],grow:[{grow:["",Pe,ye,me]}],shrink:[{shrink:["",Pe,ye,me]}],order:[{order:[Mr,"first","last","none",ye,me]}],"grid-cols":[{"grid-cols":fe()}],"col-start-end":[{col:Y()}],"col-start":[{"col-start":ve()}],"col-end":[{"col-end":ve()}],"grid-rows":[{"grid-rows":fe()}],"row-start-end":[{row:Y()}],"row-start":[{"row-start":ve()}],"row-end":[{"row-end":ve()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ke()}],"auto-rows":[{"auto-rows":ke()}],gap:[{gap:H()}],"gap-x":[{"gap-x":H()}],"gap-y":[{"gap-y":H()}],"justify-content":[{justify:[...Ee(),"normal"]}],"justify-items":[{"justify-items":[...Ce(),"normal"]}],"justify-self":[{"justify-self":["auto",...Ce()]}],"align-content":[{content:["normal",...Ee()]}],"align-items":[{items:[...Ce(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Ce(),{baseline:["","last"]}]}],"place-content":[{"place-content":Ee()}],"place-items":[{"place-items":[...Ce(),"baseline"]}],"place-self":[{"place-self":["auto",...Ce()]}],p:[{p:H()}],px:[{px:H()}],py:[{py:H()}],ps:[{ps:H()}],pe:[{pe:H()}],pt:[{pt:H()}],pr:[{pr:H()}],pb:[{pb:H()}],pl:[{pl:H()}],m:[{m:Q()}],mx:[{mx:Q()}],my:[{my:Q()}],ms:[{ms:Q()}],me:[{me:Q()}],mt:[{mt:Q()}],mr:[{mr:Q()}],mb:[{mb:Q()}],ml:[{ml:Q()}],"space-x":[{"space-x":H()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":H()}],"space-y-reverse":["space-y-reverse"],size:[{size:ae()}],w:[{w:[a,"screen",...ae()]}],"min-w":[{"min-w":[a,"screen","none",...ae()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[s]},...ae()]}],h:[{h:["screen","lh",...ae()]}],"min-h":[{"min-h":["screen","lh","none",...ae()]}],"max-h":[{"max-h":["screen","lh",...ae()]}],"font-size":[{text:["base",n,Ls,_i]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,ye,Tf]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",jf,me]}],"font-family":[{font:[LT,me,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,ye,me]}],"line-clamp":[{"line-clamp":[Pe,"none",ye,Tf]}],leading:[{leading:[o,...H()]}],"list-image":[{"list-image":["none",ye,me]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ye,me]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:U()}],"text-color":[{text:U()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Je(),"wavy"]}],"text-decoration-thickness":[{decoration:[Pe,"from-font","auto",ye,_i]}],"text-decoration-color":[{decoration:U()}],"underline-offset":[{"underline-offset":[Pe,"auto",ye,me]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:H()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ye,me]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ye,me]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ee()}],"bg-repeat":[{bg:ne()}],"bg-size":[{bg:de()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Mr,ye,me],radial:["",ye,me],conic:[Mr,ye,me]},MT,DT]}],"bg-color":[{bg:U()}],"gradient-from-pos":[{from:oe()}],"gradient-via-pos":[{via:oe()}],"gradient-to-pos":[{to:oe()}],"gradient-from":[{from:U()}],"gradient-via":[{via:U()}],"gradient-to":[{to:U()}],rounded:[{rounded:be()}],"rounded-s":[{"rounded-s":be()}],"rounded-e":[{"rounded-e":be()}],"rounded-t":[{"rounded-t":be()}],"rounded-r":[{"rounded-r":be()}],"rounded-b":[{"rounded-b":be()}],"rounded-l":[{"rounded-l":be()}],"rounded-ss":[{"rounded-ss":be()}],"rounded-se":[{"rounded-se":be()}],"rounded-ee":[{"rounded-ee":be()}],"rounded-es":[{"rounded-es":be()}],"rounded-tl":[{"rounded-tl":be()}],"rounded-tr":[{"rounded-tr":be()}],"rounded-br":[{"rounded-br":be()}],"rounded-bl":[{"rounded-bl":be()}],"border-w":[{border:Ae()}],"border-w-x":[{"border-x":Ae()}],"border-w-y":[{"border-y":Ae()}],"border-w-s":[{"border-s":Ae()}],"border-w-e":[{"border-e":Ae()}],"border-w-t":[{"border-t":Ae()}],"border-w-r":[{"border-r":Ae()}],"border-w-b":[{"border-b":Ae()}],"border-w-l":[{"border-l":Ae()}],"divide-x":[{"divide-x":Ae()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Ae()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Je(),"hidden","none"]}],"divide-style":[{divide:[...Je(),"hidden","none"]}],"border-color":[{border:U()}],"border-color-x":[{"border-x":U()}],"border-color-y":[{"border-y":U()}],"border-color-s":[{"border-s":U()}],"border-color-e":[{"border-e":U()}],"border-color-t":[{"border-t":U()}],"border-color-r":[{"border-r":U()}],"border-color-b":[{"border-b":U()}],"border-color-l":[{"border-l":U()}],"divide-color":[{divide:U()}],"outline-style":[{outline:[...Je(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Pe,ye,me]}],"outline-w":[{outline:["",Pe,Ls,_i]}],"outline-color":[{outline:U()}],shadow:[{shadow:["","none",f,su,ou]}],"shadow-color":[{shadow:U()}],"inset-shadow":[{"inset-shadow":["none",p,su,ou]}],"inset-shadow-color":[{"inset-shadow":U()}],"ring-w":[{ring:Ae()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:U()}],"ring-offset-w":[{"ring-offset":[Pe,_i]}],"ring-offset-color":[{"ring-offset":U()}],"inset-ring-w":[{"inset-ring":Ae()}],"inset-ring-color":[{"inset-ring":U()}],"text-shadow":[{"text-shadow":["none",m,su,ou]}],"text-shadow-color":[{"text-shadow":U()}],opacity:[{opacity:[Pe,ye,me]}],"mix-blend":[{"mix-blend":[...$e(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":$e()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Pe]}],"mask-image-linear-from-pos":[{"mask-linear-from":Te()}],"mask-image-linear-to-pos":[{"mask-linear-to":Te()}],"mask-image-linear-from-color":[{"mask-linear-from":U()}],"mask-image-linear-to-color":[{"mask-linear-to":U()}],"mask-image-t-from-pos":[{"mask-t-from":Te()}],"mask-image-t-to-pos":[{"mask-t-to":Te()}],"mask-image-t-from-color":[{"mask-t-from":U()}],"mask-image-t-to-color":[{"mask-t-to":U()}],"mask-image-r-from-pos":[{"mask-r-from":Te()}],"mask-image-r-to-pos":[{"mask-r-to":Te()}],"mask-image-r-from-color":[{"mask-r-from":U()}],"mask-image-r-to-color":[{"mask-r-to":U()}],"mask-image-b-from-pos":[{"mask-b-from":Te()}],"mask-image-b-to-pos":[{"mask-b-to":Te()}],"mask-image-b-from-color":[{"mask-b-from":U()}],"mask-image-b-to-color":[{"mask-b-to":U()}],"mask-image-l-from-pos":[{"mask-l-from":Te()}],"mask-image-l-to-pos":[{"mask-l-to":Te()}],"mask-image-l-from-color":[{"mask-l-from":U()}],"mask-image-l-to-color":[{"mask-l-to":U()}],"mask-image-x-from-pos":[{"mask-x-from":Te()}],"mask-image-x-to-pos":[{"mask-x-to":Te()}],"mask-image-x-from-color":[{"mask-x-from":U()}],"mask-image-x-to-color":[{"mask-x-to":U()}],"mask-image-y-from-pos":[{"mask-y-from":Te()}],"mask-image-y-to-pos":[{"mask-y-to":Te()}],"mask-image-y-from-color":[{"mask-y-from":U()}],"mask-image-y-to-color":[{"mask-y-to":U()}],"mask-image-radial":[{"mask-radial":[ye,me]}],"mask-image-radial-from-pos":[{"mask-radial-from":Te()}],"mask-image-radial-to-pos":[{"mask-radial-to":Te()}],"mask-image-radial-from-color":[{"mask-radial-from":U()}],"mask-image-radial-to-color":[{"mask-radial-to":U()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":R()}],"mask-image-conic-pos":[{"mask-conic":[Pe]}],"mask-image-conic-from-pos":[{"mask-conic-from":Te()}],"mask-image-conic-to-pos":[{"mask-conic-to":Te()}],"mask-image-conic-from-color":[{"mask-conic-from":U()}],"mask-image-conic-to-color":[{"mask-conic-to":U()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ee()}],"mask-repeat":[{mask:ne()}],"mask-size":[{mask:de()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ye,me]}],filter:[{filter:["","none",ye,me]}],blur:[{blur:ut()}],brightness:[{brightness:[Pe,ye,me]}],contrast:[{contrast:[Pe,ye,me]}],"drop-shadow":[{"drop-shadow":["","none",v,su,ou]}],"drop-shadow-color":[{"drop-shadow":U()}],grayscale:[{grayscale:["",Pe,ye,me]}],"hue-rotate":[{"hue-rotate":[Pe,ye,me]}],invert:[{invert:["",Pe,ye,me]}],saturate:[{saturate:[Pe,ye,me]}],sepia:[{sepia:["",Pe,ye,me]}],"backdrop-filter":[{"backdrop-filter":["","none",ye,me]}],"backdrop-blur":[{"backdrop-blur":ut()}],"backdrop-brightness":[{"backdrop-brightness":[Pe,ye,me]}],"backdrop-contrast":[{"backdrop-contrast":[Pe,ye,me]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Pe,ye,me]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Pe,ye,me]}],"backdrop-invert":[{"backdrop-invert":["",Pe,ye,me]}],"backdrop-opacity":[{"backdrop-opacity":[Pe,ye,me]}],"backdrop-saturate":[{"backdrop-saturate":[Pe,ye,me]}],"backdrop-sepia":[{"backdrop-sepia":["",Pe,ye,me]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":H()}],"border-spacing-x":[{"border-spacing-x":H()}],"border-spacing-y":[{"border-spacing-y":H()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ye,me]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Pe,"initial",ye,me]}],ease:[{ease:["linear","initial",S,ye,me]}],delay:[{delay:[Pe,ye,me]}],animate:[{animate:["none",k,ye,me]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,ye,me]}],"perspective-origin":[{"perspective-origin":K()}],rotate:[{rotate:le()}],"rotate-x":[{"rotate-x":le()}],"rotate-y":[{"rotate-y":le()}],"rotate-z":[{"rotate-z":le()}],scale:[{scale:Ve()}],"scale-x":[{"scale-x":Ve()}],"scale-y":[{"scale-y":Ve()}],"scale-z":[{"scale-z":Ve()}],"scale-3d":["scale-3d"],skew:[{skew:rt()}],"skew-x":[{"skew-x":rt()}],"skew-y":[{"skew-y":rt()}],transform:[{transform:[ye,me,"","none","gpu","cpu"]}],"transform-origin":[{origin:K()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:we()}],"translate-x":[{"translate-x":we()}],"translate-y":[{"translate-y":we()}],"translate-z":[{"translate-z":we()}],"translate-none":["translate-none"],accent:[{accent:U()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:U()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ye,me]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":H()}],"scroll-mx":[{"scroll-mx":H()}],"scroll-my":[{"scroll-my":H()}],"scroll-ms":[{"scroll-ms":H()}],"scroll-me":[{"scroll-me":H()}],"scroll-mt":[{"scroll-mt":H()}],"scroll-mr":[{"scroll-mr":H()}],"scroll-mb":[{"scroll-mb":H()}],"scroll-ml":[{"scroll-ml":H()}],"scroll-p":[{"scroll-p":H()}],"scroll-px":[{"scroll-px":H()}],"scroll-py":[{"scroll-py":H()}],"scroll-ps":[{"scroll-ps":H()}],"scroll-pe":[{"scroll-pe":H()}],"scroll-pt":[{"scroll-pt":H()}],"scroll-pr":[{"scroll-pr":H()}],"scroll-pb":[{"scroll-pb":H()}],"scroll-pl":[{"scroll-pl":H()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ye,me]}],fill:[{fill:["none",...U()]}],"stroke-w":[{stroke:[Pe,Ls,_i,Tf]}],stroke:[{stroke:["none",...U()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},FT=kT(zT);function We(...e){return FT(L1(e))}const BT=lT("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Ye=Se.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...i},o)=>O.jsx("button",{className:We(BT({variant:t,size:n,className:e})),ref:o,...i}));Ye.displayName="Button";function KT({className:e}){return O.jsx("svg",{className:We("w-4 h-4 fill-current",e),viewBox:"0 0 20 20",children:O.jsx("path",{d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"})})}function xo(e){return(...t)=>e(...t).catch(n=>{(n==null?void 0:n.name)==="AbortError"?console.debug(n):console.error(n)})}function VT({item:e}){const t=Jl(_e,"todoItems",e),[n,r]=Se.useState(!1),[i,o]=Se.useState(!1),[s,a]=Se.useState(!1),c=v=>{_e.todoItems.update(e.id,{done:v})},d=async()=>{await _e.todoItems.delete(e.id)},f=()=>{t.update("title")&&a(!0)},p=v=>{(v.key==="Enter"||v.key==="Escape")&&(v.preventDefault(),a(!1))};Se.useEffect(()=>{let v;return n&&t.delete()?(o(!0),v=setTimeout(()=>{o(!1)},2e3)):o(!1),()=>{v&&clearTimeout(v)}},[n,t]);const m=v=>{t.delete()&&(o(!0),r(!1),setTimeout(()=>r(!0),10))};return O.jsxs("div",{className:We("group flex items-center gap-3 py-3 px-4 border-b border-blue-200/60 last:border-b-0 transition-colors",e.done?"bg-blue-50 dark:bg-blue-900/20":"bg-background hover:bg-muted/30"),onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onClick:m,children:[O.jsxs("label",{className:"relative flex items-center cursor-pointer",children:[O.jsx("input",{type:"checkbox",disabled:!t.update("done"),checked:!!e.done,onChange:v=>c(v.target.checked),className:"sr-only"}),O.jsx("div",{className:We("w-6 h-6 border-2 rounded flex items-center justify-center transition-all duration-200",e.done?"bg-blue-500 border-blue-500 text-white shadow-sm":"border-gray-300 hover:border-blue-400 bg-white",!t.update("done")&&"opacity-50 cursor-not-allowed"),children:e.done&&O.jsx(KT,{})})]}),O.jsx("div",{className:"flex-1",children:s?O.jsx("input",{type:"text",defaultValue:e.title,onChange:xo(v=>_e.todoItems.update(e.id,{title:v.target.value})),onKeyDown:p,autoFocus:!0,className:We("w-full text-sm leading-relaxed bg-transparent border-none outline-none focus:ring-1 focus:ring-blue-500 rounded px-1 py-0.5",e.done?"text-foreground/80":"text-foreground")}):O.jsx("div",{className:We("text-sm leading-relaxed cursor-pointer hover:bg-muted/30 rounded px-1 py-0.5 transition-colors",e.done?"text-foreground/80":"text-foreground",!t.update("title")&&"cursor-default hover:bg-transparent"),onClick:f,title:t.update("title")?"Click to edit":void 0,children:e.title})}),O.jsx(Ye,{variant:"ghost",size:"icon",onClick:d,title:"Delete item",className:We("h-8 w-8 text-muted-foreground hover:text-destructive transition-all duration-300",i?"opacity-100 translate-x-0":"opacity-0 translate-x-2 pointer-events-none"),children:O.jsx(ed,{className:"h-4 w-4"})})]})}const Ul=Se.forwardRef(({className:e,type:t,...n},r)=>O.jsx("input",{type:t,className:We("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...n}));Ul.displayName="Input";function WT({todoList:e}){const[t,n]=Se.useState(""),r=async i=>{i.preventDefault(),t.trim()&&(await _e.todoItems.add({todoListId:e.id,realmId:e.realmId,title:t.trim()}),n(""))};return O.jsxs("form",{onSubmit:r,className:"flex gap-2",children:[O.jsx("div",{className:"flex-1",children:O.jsx(Ul,{type:"text",placeholder:"Add todo item ...",value:t,onChange:i=>n(i.target.value)})}),O.jsx(Ye,{type:"submit",size:"icon",disabled:!t.trim(),title:"Add item",children:O.jsx(P1,{className:"h-4 w-4"})})]})}function HT({todoList:e,member:t,access:n}){const r=Yl(_e.cloud.roles)||{};return O.jsxs("select",{disabled:e.owner===t.userId&&t.userId===_e.cloud.currentUserId,style:{border:0},value:n,onChange:i=>qT(e,t,n,i.target.value),children:[O.jsx("option",{value:"owner",disabled:!t.userId,children:"Owner"}),Object.entries(r).map(([i,o])=>O.jsx("option",{value:i,children:o.displayName},i)),!r[n]&&n!=="owner"&&O.jsx("option",{children:"(unknown)"},n)]})}function qT(e,t,n,r){const i=zs(e.id);return _e.transaction("rw",_e.todoLists,_e.members,_e.realms,()=>{if(n!=="owner"&&r==="owner"){if(!t.userId)throw new Error("Cannot give ownership to user before invite is accepted.");_e.members.where({realmId:i,userId:e.owner}).modify({roles:["manager"]}),_e.members.where({realmId:i}).modify({owner:t.userId}),_e.todoLists.update(e,{owner:t.userId}),_e.realms.update(i,{owner:t.userId})}r!=="owner"&&_e.members.update(t,{permissions:{},roles:[r]}),n==="owner"&&r!=="owner"&&(_e.todoLists.update(e,{owner:_e.cloud.currentUserId}),_e.realms.update(i,{owner:_e.cloud.currentUserId}))})}function GT({member:e,todoList:t}){var d;const n=Jl(_e,"members",e),r=Yl(_e.cloud.roles),i=(d=e.roles)==null?void 0:d[0],o=i?r==null?void 0:r[i]:null,s=e.userId===t.owner?"owner":i||"readonly",a=s==="owner"?"Owner":(o==null?void 0:o.displayName)||s,c=()=>s==="owner"?O.jsx(Mj,{className:"h-4 w-4"}):O.jsx(A1,{className:"h-4 w-4"});return O.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 bg-gray-50 rounded border border-gray-200 min-w-[100px]",children:[c(),n.update("roles")?O.jsx(HT,{todoList:t,member:e,access:s}):O.jsx("span",{className:"text-sm font-medium",children:a})]})}const YT={"alice@demo.local":{},"bob@demo.local":{},"foo@demo.local":{},"bar@demo.local":{}},np={demoUsers:YT};function QT({todoList:e}){const[t,n]=Se.useState(""),[r,i]=Se.useState(""),o=Ql(async()=>await _e.members.where({realmId:e.realmId}).toArray(),[e.realmId]),[s,a]=Se.useState(!1),c=Jl(e);return O.jsxs("div",{className:"space-y-3",children:[o&&o.length>0&&O.jsxs("div",{children:[O.jsx("h4",{className:"text-sm font-medium text-foreground mb-2",children:"Shared with:"}),O.jsx("div",{className:"space-y-1",children:o==null?void 0:o.map(d=>O.jsx(JT,{todoList:e,member:d},d.id))})]}),O.jsx("div",{className:"border-t border-border pt-3",children:c.add("members")&&O.jsxs("div",{className:"space-y-3",children:[O.jsxs("h4",{className:"text-sm font-medium text-foreground flex items-center gap-2",children:[O.jsx(Zj,{className:"h-4 w-4"}),"Invite someone?"]}),O.jsx("div",{className:"space-y-1",children:Object.keys(np.demoUsers).filter(d=>d!==_e.cloud.currentUserId).map(d=>O.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-white rounded border border-blue-100",children:[O.jsx("span",{className:"text-sm text-foreground",children:d}),O.jsx(Ye,{size:"sm",variant:"outline",onClick:()=>{a(!1),e.shareWith(d,d,!0,["doer"])},className:"h-7 px-3 text-xs border-blue-200 text-blue-600 hover:bg-blue-50",children:"Invite"})]},d))}),s?O.jsxs("form",{onSubmit:d=>{d.preventDefault(),a(!1),e.shareWith(t,r,!0,["doer"]),n(""),i("")},className:"space-y-3 p-4 bg-muted/50 rounded-lg",children:[O.jsx(Ul,{type:"email",placeholder:"Email address",value:r,onChange:d=>i(d.target.value)}),O.jsx(Ul,{type:"text",placeholder:"Name",value:t,onChange:d=>n(d.target.value)}),O.jsxs("div",{className:"flex gap-2",children:[O.jsxs(Ye,{type:"submit",disabled:!/@/.test(r),size:"sm",className:"flex items-center gap-2",children:[O.jsx(Rv,{className:"h-4 w-4"}),"Send invite"]}),O.jsx(Ye,{type:"button",variant:"outline",size:"sm",onClick:()=>a(!1),children:"Cancel"})]})]}):O.jsx("div",{className:"mt-2",children:O.jsxs(Ye,{variant:"outline",size:"sm",onClick:()=>a(!0),className:"flex items-center gap-2 h-8 px-3 text-xs border-blue-200 text-blue-600 hover:bg-blue-50",children:[O.jsx(Rv,{className:"h-4 w-4"}),"Invite by email address"]})})]})})]})}function JT({member:e,todoList:t}){var s,a;const n=Jl(_e,"members",e),r=e.userId===_e.cloud.currentUserId,i=e.userId===t.owner;let o=e.name||e.email||e.userId;return r&&(o+=" (me)"),O.jsxs("div",{className:`flex items-center justify-between py-2 px-3 bg-white rounded border border-blue-100 ${e.accepted?"":"opacity-50"}`,children:[O.jsxs("div",{className:"flex-1",children:[O.jsx("span",{className:"text-sm text-foreground font-medium",children:o}),!e.rejected&&!e.accepted&&O.jsx("span",{className:"text-xs text-muted-foreground italic ml-2",children:"Pending invite"}),e.rejected&&O.jsx("span",{className:"text-xs text-muted-foreground italic ml-2",children:"Rejected"})]}),O.jsxs("div",{className:"flex items-center gap-2 min-w-[140px] justify-end",children:[O.jsx(GT,{member:e,todoList:t}),O.jsx("div",{className:"w-8 flex justify-center ml-1",children:n.delete()&&!i?O.jsx(Ye,{variant:"ghost",size:"sm",onClick:()=>t.unshareWith(e),className:"text-red-500 hover:text-red-700 hover:bg-red-50 h-8 w-8 p-0",children:O.jsx(ed,{className:"h-4 w-4"})}):!i&&e.userId===_e.cloud.currentUserId&&((((s=e.accepted)==null?void 0:s.getTime())||0)>(((a=e.rejected)==null?void 0:a.getTime())||0)?O.jsx(Ye,{variant:"outline",size:"sm",onClick:()=>t.leave(),className:"h-7 px-3 text-xs border-red-300 text-red-600 hover:bg-red-50 hover:border-red-400 min-w-[50px]",children:"Leave"}):O.jsx(Ye,{variant:"default",size:"sm",onClick:()=>_e.members.update(e.id,{accepted:new Date,rejected:void 0}),className:"h-7 px-3 text-xs bg-blue-500 hover:bg-blue-600",children:"Accept"}))})]})]})}function XT(e,t,n=!1){return[Ql(()=>_e.openCloseStates.get([e,t]),[e,t],n)??n,o=>_e.openCloseStates.put(o,[e,t])]}function ZT({todoList:e}){const[t,n]=Se.useState(!1),r=Ql(()=>_e.todoItems.where({todoListId:e.id}).toArray(),[e.id]),i=Jl(e),[o,s]=XT("sharing-menu",e.id,!1);if(!r)return null;const a=async()=>{confirm(`Are you sure you want to delete "${e.title}" and all its items?`)&&await e.delete()},c=()=>{i.update("title")&&n(!0)},d=f=>{(f.key==="Enter"||f.key==="Escape")&&(f.preventDefault(),n(!1))};return O.jsxs("div",{className:"border-b border-border bg-background",children:[O.jsxs("div",{className:"flex items-center justify-between px-4 py-4 border-b border-blue-300/70 bg-blue-500 dark:bg-blue-600",children:[O.jsx("div",{className:"flex-1 mr-4",children:t?O.jsx("input",{type:"text",defaultValue:e.title,onChange:xo(f=>_e.todoLists.update(e.id,{title:f.target.value})),onKeyDown:d,autoFocus:!0,className:We("text-lg font-semibold bg-transparent border-none outline-none focus:ring-1 focus:ring-white/50 rounded px-2 py-1 text-white placeholder-white/70 w-full")}):O.jsx("h2",{className:We("text-lg font-semibold text-white cursor-pointer hover:bg-white/10 rounded px-2 py-1 transition-colors",!i.update("title")&&"cursor-default hover:bg-transparent"),onClick:c,title:i.update("title")?"Click to edit list name":void 0,children:e.title})}),O.jsxs("div",{className:"flex items-center gap-2",children:[!e.isPrivate()&&O.jsx(Ye,{variant:"ghost",size:"icon",onClick:()=>s(!o),title:"Share list",className:We("text-white hover:bg-blue-600 transition-all duration-200",o&&"bg-blue-600/50"),children:O.jsx(Qj,{className:We("h-4 w-4 transition-transform duration-200",o&&"rotate-180")})}),i.delete()&&O.jsx(Ye,{variant:"ghost",size:"icon",onClick:a,title:"Delete list",className:"text-white hover:bg-blue-600",children:O.jsx(ed,{className:"h-4 w-4"})})]})]}),O.jsx("div",{className:We("overflow-hidden transition-all duration-300 ease-in-out",o?"max-h-96 opacity-100":"max-h-0 opacity-0"),children:O.jsx("div",{className:"px-4 py-4 bg-blue-50/70 dark:bg-blue-900/15 border-b border-blue-200/60",children:O.jsx(QT,{todoList:e})})}),O.jsxs("div",{className:"px-0 py-0",children:[r.map(f=>O.jsx(VT,{item:f},f.id)),i.add("todoItems")&&O.jsx("div",{className:"px-4 py-3 border-b border-blue-200/60 bg-background",children:O.jsx(WT,{todoList:e})})]})]})}function eN(){const e=Ql(()=>_e.todoLists.toArray());return e?O.jsx("div",{className:"w-full",children:e.map(t=>O.jsx(ZT,{todoList:t},t.id))}):null}const $l=Se.forwardRef(({className:e,...t},n)=>O.jsx("div",{ref:n,className:We("rounded-xl border bg-card text-card-foreground shadow",e),...t}));$l.displayName="Card";const zl=Se.forwardRef(({className:e,...t},n)=>O.jsx("div",{ref:n,className:We("flex flex-col space-y-1.5 p-6",e),...t}));zl.displayName="CardHeader";const Fl=Se.forwardRef(({className:e,...t},n)=>O.jsx("h3",{ref:n,className:We("font-semibold leading-none tracking-tight",e),...t}));Fl.displayName="CardTitle";const Bl=Se.forwardRef(({className:e,...t},n)=>O.jsx("p",{ref:n,className:We("text-sm text-muted-foreground",e),...t}));Bl.displayName="CardDescription";const Kl=Se.forwardRef(({className:e,...t},n)=>O.jsx("div",{ref:n,className:We("p-6 pt-0",e),...t}));Kl.displayName="CardContent";const tN=Se.forwardRef(({className:e,...t},n)=>O.jsx("div",{ref:n,className:We("flex items-center p-6 pt-0",e),...t}));tN.displayName="CardFooter";function nN(){const[e,t]=Se.useState(!1),[n,r]=Se.useState(""),i=Ql(async()=>await _e.todoLists.count()>0),o=()=>{n.trim()&&(_e.todoLists.add({title:n.trim()}),r(""),t(!1))};return e?O.jsxs($l,{className:"w-full sm:max-w-md",children:[O.jsxs(zl,{children:[O.jsxs(Fl,{className:"flex items-center gap-2",children:[O.jsx(P1,{className:"h-5 w-5"}),"New Todo List"]}),O.jsx(Bl,{children:"Give your list a name to get started"})]}),O.jsxs(Kl,{className:"space-y-4",children:[O.jsx(Ul,{type:"text",autoFocus:!0,placeholder:"Name of list...",value:n,onChange:s=>r(s.target.value),onKeyUp:s=>{s.key==="Enter"?o():s.key==="Escape"&&(t(!1),r(""))}}),O.jsxs("div",{className:"flex gap-2",children:[O.jsx(Ye,{onClick:o,disabled:!n.trim(),children:"Create List"}),O.jsx(Ye,{variant:"outline",onClick:()=>{t(!1),r("")},children:"Cancel"})]})]})]}):O.jsxs(Ye,{onClick:()=>t(!0),size:"lg",variant:"outline",className:"w-full sm:w-auto flex items-center gap-2 border-slate-300 text-slate-700 hover:bg-slate-50",children:[O.jsx($j,{className:"h-4 w-4"}),i?"Add another list":"Create ToDo List"]})}function rN(){const e=async()=>{confirm("Are you sure you want to reset the database? This will delete all your local data and reload the app.")&&(await _e.delete(),location.reload())};return O.jsxs(Ye,{variant:"outline",size:"lg",onClick:e,className:"w-full sm:w-auto flex items-center gap-2 border-red-300 text-red-700 bg-red-50 hover:bg-red-100 hover:border-red-400",children:[O.jsx(Gj,{className:"h-4 w-4"}),"Factory reset client"]})}var iN=typeof window<"u",oN=iN?Se.useLayoutEffect:Se.useEffect;function Em(e,t){var n=Se.useState(t),r=n[0],i=n[1];return oN(function(){var o=e.subscribe(i);return function(){return o.unsubscribe()}},[e]),r}function Kv({className:e}){const t=Em(_e.cloud.syncState),n=We("text-muted-foreground",e);switch(t==null?void 0:t.status){case"not-started":return O.jsx("div",{title:"Sync not started",children:O.jsx(Dv,{className:n})});case"connecting":return O.jsx("div",{title:"Connecting to cloud...",children:O.jsx(Fj,{className:We(n,"animate-spin")})});case"connected":return O.jsx("div",{title:"Connected and syncing",children:O.jsx(sT,{className:We(n,"text-green-500")})});case"disconnected":return O.jsx("div",{title:"Connection sleeping - will reconnect when active",children:O.jsx(Dj,{className:We(n,"text-blue-400")})});case"offline":return O.jsx("div",{title:t.error?String(t.error):"Offline",children:O.jsx(iT,{className:We(n,"text-orange-500")})});case"error":return O.jsx("div",{title:t.error?String(t.error):"Connection error",children:O.jsx(Pj,{className:We(n,"text-red-500")})});default:return O.jsx("div",{title:"Sync status unknown",children:O.jsx(Dv,{className:n})})}}const Vv=({children:e,...t})=>{const[n,r]=Se.useState(!1);return O.jsx("div",{className:"relative inline-block text-left",...t,children:Se.Children.map(e,i=>{if(Se.isValidElement(i)){if(i.type===wc)return Se.cloneElement(i,{onClick:()=>r(!n),"aria-expanded":n});if(i.type===bc)return Se.cloneElement(i,{isOpen:n,onClose:()=>r(!1)})}return i})})},wc=Se.forwardRef(({className:e,children:t,...n},r)=>O.jsx("button",{ref:r,className:We("inline-flex w-full justify-center gap-x-1.5 rounded-md bg-background px-3 py-2 text-sm font-semibold text-foreground shadow-sm ring-1 ring-inset ring-border hover:bg-accent",e),...n,children:t}));wc.displayName="DropdownMenuTrigger";const bc=Se.forwardRef(({className:e,align:t="end",isOpen:n,onClose:r,children:i,...o},s)=>(Se.useEffect(()=>{const a=c=>{s&&"current"in s&&s.current&&!s.current.contains(c.target)&&(r==null||r())};if(n)return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[n,r,s]),n?O.jsx("div",{ref:s,className:We("absolute z-10 mt-2 w-56 origin-top-right rounded-md bg-popover shadow-lg ring-1 ring-border ring-opacity-5 focus:outline-none",t==="end"?"right-0":"left-0",e),...o,children:Se.Children.map(i,a=>Se.isValidElement(a)&&a.type===sl?Se.cloneElement(a,{onClick:c=>{var d,f;(f=(d=a.props).onClick)==null||f.call(d,c),r==null||r()}}):a)}):null));bc.displayName="DropdownMenuContent";const sl=Se.forwardRef(({className:e,...t},n)=>O.jsx("button",{ref:n,className:We("block w-full px-4 py-2 text-left text-sm text-popover-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none",e),...t}));sl.displayName="DropdownMenuItem";const H1=Se.forwardRef(({className:e,...t},n)=>O.jsx("div",{ref:n,className:We("my-1 h-px bg-border",e),...t}));H1.displayName="DropdownMenuSeparator";const rp=Se.forwardRef(({className:e,...t},n)=>O.jsx("div",{ref:n,className:We("px-4 py-2 text-xs font-semibold text-muted-foreground",e),...t}));rp.displayName="DropdownMenuLabel";function Wv(){return _e.cloud.logout().catch(e=>{console.log("Logout cancelled",e)})}function sN(){const e=Em(_e.cloud.currentUser),[t,n]=Se.useState(!1);return O.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-background border-b border-border",children:O.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[O.jsxs("div",{className:"flex h-16 items-center justify-between",children:[O.jsx("div",{className:"flex items-center",children:O.jsx("h1",{className:"text-xl font-semibold text-foreground",children:"Dexie Cloud ToDo App"})}),O.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[O.jsx(Kv,{className:"h-5 w-5"}),e!=null&&e.isLoggedIn?O.jsxs(Vv,{children:[O.jsx(wc,{children:O.jsxs(Ye,{variant:"ghost",className:"flex items-center gap-2",children:[O.jsx(A1,{className:"h-4 w-4"}),e.name,O.jsx(Av,{className:"h-4 w-4"})]})}),O.jsx(bc,{children:O.jsxs(sl,{onClick:()=>Wv(),children:[O.jsx(Lv,{className:"mr-2 h-4 w-4"}),"Logout"]})})]}):O.jsxs(Vv,{children:[O.jsx(wc,{children:O.jsxs(Ye,{variant:"outline",className:"flex items-center gap-2",children:["Sign in or create account",O.jsx(Av,{className:"h-4 w-4"})]})}),O.jsxs(bc,{children:[O.jsx(rp,{children:"Sign in a demo user"}),Object.keys(np.demoUsers).map(r=>O.jsx(sl,{onClick:xo(()=>_e.cloud.login({grant_type:"demo",email:r})),children:r},r)),O.jsx(H1,{}),O.jsx(rp,{children:"Sign in real user"}),O.jsx(sl,{onClick:xo(()=>_e.cloud.login()),children:"Sign in / sign up yourself"})]})]})]}),O.jsxs("div",{className:"md:hidden flex items-center space-x-2",children:[O.jsx(Kv,{className:"h-5 w-5"}),O.jsx(Ye,{variant:"ghost",size:"icon",onClick:()=>n(!t),children:O.jsx(Wj,{className:"h-5 w-5"})})]})]}),t&&O.jsx("div",{className:"md:hidden border-t border-border",children:O.jsx("div",{className:"px-2 pt-2 pb-3 space-y-1",children:e!=null&&e.isLoggedIn?O.jsxs("div",{className:"space-y-1",children:[O.jsxs("div",{className:"px-3 py-2 text-sm text-muted-foreground",children:["Signed in as ",e.name]}),O.jsxs(Ye,{variant:"ghost",className:"w-full justify-start",onClick:()=>{Wv(),n(!1)},children:[O.jsx(Lv,{className:"mr-2 h-4 w-4"}),"Logout"]})]}):O.jsxs("div",{className:"space-y-1",children:[O.jsx("div",{className:"px-3 py-2 text-sm font-medium text-muted-foreground",children:"Sign in a demo user"}),Object.keys(np.demoUsers).map(r=>O.jsx(Ye,{variant:"ghost",className:"w-full justify-start",onClick:xo(async()=>{await _e.cloud.login({grant_type:"demo",email:r}),n(!1)}),children:r},r)),O.jsx("div",{className:"border-t border-border my-2"}),O.jsx("div",{className:"px-3 py-2 text-sm font-medium text-muted-foreground",children:"Sign in real user"}),O.jsx(Ye,{variant:"outline",className:"w-full justify-start",onClick:xo(async()=>{await _e.cloud.login(),n(!1)}),children:"Sign in / sign up yourself"})]})})})]})})}function lN(){const e=Em(_e.cloud.invites,[]);return e.length===0?null:O.jsxs($l,{children:[O.jsxs(zl,{children:[O.jsxs(Fl,{className:"flex items-center gap-2",children:[O.jsx(nT,{className:"h-5 w-5"}),"You've got invited!"]}),O.jsxs(Bl,{children:["You have ",e.length," pending invitation",e.length>1?"s":""]})]}),O.jsx(Kl,{children:O.jsx("div",{className:"space-y-4",children:e.map(t=>{var n,r;return O.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[O.jsxs("div",{className:"flex-1",children:[O.jsx("div",{className:"font-medium",children:(n=t.realm)==null?void 0:n.name}),O.jsxs("div",{className:"text-sm text-muted-foreground",children:["Invited by ",(r=t.invitedBy)==null?void 0:r.name]})]}),O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx(Ye,{size:"sm",onClick:()=>t.accept(),disabled:!!t.accepted,variant:t.accepted?"secondary":"default",children:t.accepted?"Accepted":"Accept"}),O.jsx(Ye,{size:"sm",variant:"outline",onClick:()=>t.reject(),disabled:!!t.rejected,children:t.rejected?"Rejected":"Reject"}),O.jsx(Ye,{size:"sm",variant:"ghost",onClick:()=>_e.members.delete(t.id),title:"Remove invite",children:O.jsx(ed,{className:"h-4 w-4"})})]})]},t.id)})})})]})}function aN(){return O.jsxs("div",{className:"min-h-screen bg-background",children:[O.jsx(sN,{}),O.jsxs("main",{className:"pt-16",children:[O.jsxs("div",{className:"max-w-4xl mx-auto px-4 pb-2",children:[O.jsx(uN,{}),O.jsx(lN,{})]}),O.jsx(eN,{}),O.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6",children:O.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[O.jsx(nN,{}),O.jsx(rN,{})]})})]})]})}function uN(){var r;const e=Yl(_e.cloud.currentUser);if(!e)return null;const{license:t}=e;if(!t||t.status==="ok"&&t.validUntil===void 0&&t.evalDaysLeft===void 0)return null;if(t.status!=="ok")return O.jsxs($l,{className:"mb-6 border-destructive",children:[O.jsx(zl,{children:O.jsx(Fl,{className:"text-destructive",children:"License Required"})}),O.jsxs(Kl,{className:"space-y-4",children:[O.jsx(Bl,{children:"No valid license. You are in offline mode until a valid license is purchased."}),O.jsxs("div",{className:"space-y-2",children:[O.jsx(Ye,{asChild:!0,children:O.jsx("a",{href:"https://example.com",children:"Purchase License"})}),O.jsx(Ye,{variant:"destructive",onClick:i=>{i.preventDefault(),i.stopPropagation(),cN(e)},children:"Delete Account & All Data"})]})]})]});let n=t.evalDaysLeft;if(n===void 0){const i=((r=t.validUntil)==null?void 0:r.getTime())??1/0;n=Math.round((i-Date.now())/(24*60*60*1e3))}return n<7?O.jsxs($l,{className:"mb-6 border-yellow-500",children:[O.jsx(zl,{children:O.jsx(Fl,{className:"text-yellow-600",children:"License Expiring Soon"})}),O.jsxs(Kl,{className:"space-y-4",children:[O.jsxs(Bl,{children:["License expires in ",n," days."]}),O.jsx(Ye,{asChild:!0,children:O.jsx("a",{href:"https://example.com",children:"Purchase Production License"})})]})]}):null}async function cN(e){var n;!(e!=null&&e.userId)||!confirm(`Are you sure you want to delete your user completely along all stored data for ${e.userId}? Private data will be deleted. Shared data will not be deleted. This action cannot be undone.`)||(await fetch(`${(n=_e.cloud.options)==null?void 0:n.databaseUrl}/users/${e.userId}`,{method:"DELETE",headers:{Authorization:`Bearer ${e.accessToken}`}}),await _e.cloud.logout({force:!0}))}function dN(e){return"serviceWorker"in navigator?window.addEventListener("load",async()=>{try{let t="./";t.endsWith("/")||(t+="/");const n=await navigator.serviceWorker.register(`${t}sw.js`,{scope:t});console.log(" Service Worker: Registration successful",n),n.addEventListener("updatefound",()=>{const r=n.installing;r&&r.addEventListener("statechange",()=>{var i,o,s,a;r.state==="installed"&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed."),(i=e==null?void 0:e.onUpdate)==null||i.call(e,n),(o=e==null?void 0:e.onNeedRefresh)==null||o.call(e)):(console.log("App ready to work offline."),(s=e==null?void 0:e.onSuccess)==null||s.call(e,n),(a=e==null?void 0:e.onOfflineReady)==null||a.call(e)))})})}catch(t){console.error(" Service worker registration failed:",t),t instanceof Error&&console.error(" Error details:",{name:t.name,message:t.message,stack:t.stack})}}):"serviceWorker"in navigator||console.log(" Service Worker: Not supported in this browser"),()=>{}}window.Dexie=De;De.debug=!0;const fN=document.getElementById("root"),hN=ob(fN);hN.render(O.jsx(so.StrictMode,{children:O.jsx(aN,{})}));dN();
//# sourceMappingURL=index-LbGsqeRS.js.map
