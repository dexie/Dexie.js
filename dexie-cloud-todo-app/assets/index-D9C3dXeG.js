var jb=Object.defineProperty;var Tb=(n,e,r)=>e in n?jb(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r;var _o=(n,e,r)=>Tb(n,typeof e!="symbol"?e+"":e,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function r(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(l){if(l.ep)return;l.ep=!0;const a=r(l);fetch(l.href,a)}})();var Pb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Kf={exports:{}},wa={},Vf={exports:{}},lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ay;function Nb(){if(ay)return lt;ay=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.iterator;function x(N){return N===null||typeof N!="object"?null:(N=w&&N[w]||N["@@iterator"],typeof N=="function"?N:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,P={};function W(N,Y,ge){this.props=N,this.context=Y,this.refs=P,this.updater=ge||C}W.prototype.isReactComponent={},W.prototype.setState=function(N,Y){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,Y,"setState")},W.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function q(){}q.prototype=W.prototype;function te(N,Y,ge){this.props=N,this.context=Y,this.refs=P,this.updater=ge||C}var fe=te.prototype=new q;fe.constructor=te,O(fe,W.prototype),fe.isPureReactComponent=!0;var G=Array.isArray,Ee=Object.prototype.hasOwnProperty,ye={current:null},he={key:!0,ref:!0,__self:!0,__source:!0};function se(N,Y,ge){var Te,Ge={},We=null,Re=null;if(Y!=null)for(Te in Y.ref!==void 0&&(Re=Y.ref),Y.key!==void 0&&(We=""+Y.key),Y)Ee.call(Y,Te)&&!he.hasOwnProperty(Te)&&(Ge[Te]=Y[Te]);var Ye=arguments.length-2;if(Ye===1)Ge.children=ge;else if(1<Ye){for(var et=Array(Ye),pe=0;pe<Ye;pe++)et[pe]=arguments[pe+2];Ge.children=et}if(N&&N.defaultProps)for(Te in Ye=N.defaultProps,Ye)Ge[Te]===void 0&&(Ge[Te]=Ye[Te]);return{$$typeof:n,type:N,key:We,ref:Re,props:Ge,_owner:ye.current}}function be(N,Y){return{$$typeof:n,type:N.type,key:Y,ref:N.ref,props:N.props,_owner:N._owner}}function _e(N){return typeof N=="object"&&N!==null&&N.$$typeof===n}function Ie(N){var Y={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(ge){return Y[ge]})}var ce=/\/+/g;function Le(N,Y){return typeof N=="object"&&N!==null&&N.key!=null?Ie(""+N.key):Y.toString(36)}function Ve(N,Y,ge,Te,Ge){var We=typeof N;(We==="undefined"||We==="boolean")&&(N=null);var Re=!1;if(N===null)Re=!0;else switch(We){case"string":case"number":Re=!0;break;case"object":switch(N.$$typeof){case n:case e:Re=!0}}if(Re)return Re=N,Ge=Ge(Re),N=Te===""?"."+Le(Re,0):Te,G(Ge)?(ge="",N!=null&&(ge=N.replace(ce,"$&/")+"/"),Ve(Ge,Y,ge,"",function(pe){return pe})):Ge!=null&&(_e(Ge)&&(Ge=be(Ge,ge+(!Ge.key||Re&&Re.key===Ge.key?"":(""+Ge.key).replace(ce,"$&/")+"/")+N)),Y.push(Ge)),1;if(Re=0,Te=Te===""?".":Te+":",G(N))for(var Ye=0;Ye<N.length;Ye++){We=N[Ye];var et=Te+Le(We,Ye);Re+=Ve(We,Y,ge,et,Ge)}else if(et=x(N),typeof et=="function")for(N=et.call(N),Ye=0;!(We=N.next()).done;)We=We.value,et=Te+Le(We,Ye++),Re+=Ve(We,Y,ge,et,Ge);else if(We==="object")throw Y=String(N),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return Re}function $e(N,Y,ge){if(N==null)return N;var Te=[],Ge=0;return Ve(N,Te,"","",function(We){return Y.call(ge,We,Ge++)}),Te}function ke(N){if(N._status===-1){var Y=N._result;Y=Y(),Y.then(function(ge){(N._status===0||N._status===-1)&&(N._status=1,N._result=ge)},function(ge){(N._status===0||N._status===-1)&&(N._status=2,N._result=ge)}),N._status===-1&&(N._status=0,N._result=Y)}if(N._status===1)return N._result.default;throw N._result}var ie={current:null},K={transition:null},re={ReactCurrentDispatcher:ie,ReactCurrentBatchConfig:K,ReactCurrentOwner:ye};function le(){throw Error("act(...) is not supported in production builds of React.")}return lt.Children={map:$e,forEach:function(N,Y,ge){$e(N,function(){Y.apply(this,arguments)},ge)},count:function(N){var Y=0;return $e(N,function(){Y++}),Y},toArray:function(N){return $e(N,function(Y){return Y})||[]},only:function(N){if(!_e(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},lt.Component=W,lt.Fragment=r,lt.Profiler=l,lt.PureComponent=te,lt.StrictMode=o,lt.Suspense=y,lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,lt.act=le,lt.cloneElement=function(N,Y,ge){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var Te=O({},N.props),Ge=N.key,We=N.ref,Re=N._owner;if(Y!=null){if(Y.ref!==void 0&&(We=Y.ref,Re=ye.current),Y.key!==void 0&&(Ge=""+Y.key),N.type&&N.type.defaultProps)var Ye=N.type.defaultProps;for(et in Y)Ee.call(Y,et)&&!he.hasOwnProperty(et)&&(Te[et]=Y[et]===void 0&&Ye!==void 0?Ye[et]:Y[et])}var et=arguments.length-2;if(et===1)Te.children=ge;else if(1<et){Ye=Array(et);for(var pe=0;pe<et;pe++)Ye[pe]=arguments[pe+2];Te.children=Ye}return{$$typeof:n,type:N.type,key:Ge,ref:We,props:Te,_owner:Re}},lt.createContext=function(N){return N={$$typeof:d,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:a,_context:N},N.Consumer=N},lt.createElement=se,lt.createFactory=function(N){var Y=se.bind(null,N);return Y.type=N,Y},lt.createRef=function(){return{current:null}},lt.forwardRef=function(N){return{$$typeof:h,render:N}},lt.isValidElement=_e,lt.lazy=function(N){return{$$typeof:_,_payload:{_status:-1,_result:N},_init:ke}},lt.memo=function(N,Y){return{$$typeof:m,type:N,compare:Y===void 0?null:Y}},lt.startTransition=function(N){var Y=K.transition;K.transition={};try{N()}finally{K.transition=Y}},lt.unstable_act=le,lt.useCallback=function(N,Y){return ie.current.useCallback(N,Y)},lt.useContext=function(N){return ie.current.useContext(N)},lt.useDebugValue=function(){},lt.useDeferredValue=function(N){return ie.current.useDeferredValue(N)},lt.useEffect=function(N,Y){return ie.current.useEffect(N,Y)},lt.useId=function(){return ie.current.useId()},lt.useImperativeHandle=function(N,Y,ge){return ie.current.useImperativeHandle(N,Y,ge)},lt.useInsertionEffect=function(N,Y){return ie.current.useInsertionEffect(N,Y)},lt.useLayoutEffect=function(N,Y){return ie.current.useLayoutEffect(N,Y)},lt.useMemo=function(N,Y){return ie.current.useMemo(N,Y)},lt.useReducer=function(N,Y,ge){return ie.current.useReducer(N,Y,ge)},lt.useRef=function(N){return ie.current.useRef(N)},lt.useState=function(N){return ie.current.useState(N)},lt.useSyncExternalStore=function(N,Y,ge){return ie.current.useSyncExternalStore(N,Y,ge)},lt.useTransition=function(){return ie.current.useTransition()},lt.version="18.3.1",lt}var uy;function qh(){return uy||(uy=1,Vf.exports=Nb()),Vf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cy;function Ab(){if(cy)return wa;cy=1;var n=qh(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,l=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function d(h,y,m){var _,w={},x=null,C=null;m!==void 0&&(x=""+m),y.key!==void 0&&(x=""+y.key),y.ref!==void 0&&(C=y.ref);for(_ in y)o.call(y,_)&&!a.hasOwnProperty(_)&&(w[_]=y[_]);if(h&&h.defaultProps)for(_ in y=h.defaultProps,y)w[_]===void 0&&(w[_]=y[_]);return{$$typeof:e,type:h,key:x,ref:C,props:w,_owner:l.current}}return wa.Fragment=r,wa.jsx=d,wa.jsxs=d,wa}var dy;function Db(){return dy||(dy=1,Kf.exports=Ab()),Kf.exports}var R=Db(),tt=qh();const ol=tv(tt);var _c={},Wf={exports:{}},Mn={},Hf={exports:{}},qf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fy;function Rb(){return fy||(fy=1,(function(n){function e(K,re){var le=K.length;K.push(re);e:for(;0<le;){var N=le-1>>>1,Y=K[N];if(0<l(Y,re))K[N]=re,K[le]=Y,le=N;else break e}}function r(K){return K.length===0?null:K[0]}function o(K){if(K.length===0)return null;var re=K[0],le=K.pop();if(le!==re){K[0]=le;e:for(var N=0,Y=K.length,ge=Y>>>1;N<ge;){var Te=2*(N+1)-1,Ge=K[Te],We=Te+1,Re=K[We];if(0>l(Ge,le))We<Y&&0>l(Re,Ge)?(K[N]=Re,K[We]=le,N=We):(K[N]=Ge,K[Te]=le,N=Te);else if(We<Y&&0>l(Re,le))K[N]=Re,K[We]=le,N=We;else break e}}return re}function l(K,re){var le=K.sortIndex-re.sortIndex;return le!==0?le:K.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var d=Date,h=d.now();n.unstable_now=function(){return d.now()-h}}var y=[],m=[],_=1,w=null,x=3,C=!1,O=!1,P=!1,W=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function fe(K){for(var re=r(m);re!==null;){if(re.callback===null)o(m);else if(re.startTime<=K)o(m),re.sortIndex=re.expirationTime,e(y,re);else break;re=r(m)}}function G(K){if(P=!1,fe(K),!O)if(r(y)!==null)O=!0,ke(Ee);else{var re=r(m);re!==null&&ie(G,re.startTime-K)}}function Ee(K,re){O=!1,P&&(P=!1,q(se),se=-1),C=!0;var le=x;try{for(fe(re),w=r(y);w!==null&&(!(w.expirationTime>re)||K&&!Ie());){var N=w.callback;if(typeof N=="function"){w.callback=null,x=w.priorityLevel;var Y=N(w.expirationTime<=re);re=n.unstable_now(),typeof Y=="function"?w.callback=Y:w===r(y)&&o(y),fe(re)}else o(y);w=r(y)}if(w!==null)var ge=!0;else{var Te=r(m);Te!==null&&ie(G,Te.startTime-re),ge=!1}return ge}finally{w=null,x=le,C=!1}}var ye=!1,he=null,se=-1,be=5,_e=-1;function Ie(){return!(n.unstable_now()-_e<be)}function ce(){if(he!==null){var K=n.unstable_now();_e=K;var re=!0;try{re=he(!0,K)}finally{re?Le():(ye=!1,he=null)}}else ye=!1}var Le;if(typeof te=="function")Le=function(){te(ce)};else if(typeof MessageChannel<"u"){var Ve=new MessageChannel,$e=Ve.port2;Ve.port1.onmessage=ce,Le=function(){$e.postMessage(null)}}else Le=function(){W(ce,0)};function ke(K){he=K,ye||(ye=!0,Le())}function ie(K,re){se=W(function(){K(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_continueExecution=function(){O||C||(O=!0,ke(Ee))},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):be=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_getFirstCallbackNode=function(){return r(y)},n.unstable_next=function(K){switch(x){case 1:case 2:case 3:var re=3;break;default:re=x}var le=x;x=re;try{return K()}finally{x=le}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(K,re){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var le=x;x=K;try{return re()}finally{x=le}},n.unstable_scheduleCallback=function(K,re,le){var N=n.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?N+le:N):le=N,K){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=le+Y,K={id:_++,callback:re,priorityLevel:K,startTime:le,expirationTime:Y,sortIndex:-1},le>N?(K.sortIndex=le,e(m,K),r(y)===null&&K===r(m)&&(P?(q(se),se=-1):P=!0,ie(G,le-N))):(K.sortIndex=Y,e(y,K),O||C||(O=!0,ke(Ee))),K},n.unstable_shouldYield=Ie,n.unstable_wrapCallback=function(K){var re=x;return function(){var le=x;x=re;try{return K.apply(this,arguments)}finally{x=le}}}})(qf)),qf}var hy;function Lb(){return hy||(hy=1,Hf.exports=Rb()),Hf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var py;function Mb(){if(py)return Mn;py=1;var n=qh(),e=Lb();function r(t){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)i+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,l={};function a(t,i){d(t,i),d(t+"Capture",i)}function d(t,i){for(l[t]=i,t=0;t<i.length;t++)o.add(i[t])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},w={};function x(t){return y.call(w,t)?!0:y.call(_,t)?!1:m.test(t)?w[t]=!0:(_[t]=!0,!1)}function C(t,i,s,c){if(s!==null&&s.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function O(t,i,s,c){if(i===null||typeof i>"u"||C(t,i,s,c))return!0;if(c)return!1;if(s!==null)switch(s.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function P(t,i,s,c,p,v,E){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=p,this.mustUseProperty=s,this.propertyName=t,this.type=i,this.sanitizeURL=v,this.removeEmptyString=E}var W={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){W[t]=new P(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var i=t[0];W[i]=new P(i,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){W[t]=new P(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){W[t]=new P(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){W[t]=new P(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){W[t]=new P(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){W[t]=new P(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){W[t]=new P(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){W[t]=new P(t,5,!1,t.toLowerCase(),null,!1,!1)});var q=/[\-:]([a-z])/g;function te(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var i=t.replace(q,te);W[i]=new P(i,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var i=t.replace(q,te);W[i]=new P(i,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var i=t.replace(q,te);W[i]=new P(i,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){W[t]=new P(t,1,!1,t.toLowerCase(),null,!1,!1)}),W.xlinkHref=new P("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){W[t]=new P(t,1,!1,t.toLowerCase(),null,!0,!0)});function fe(t,i,s,c){var p=W.hasOwnProperty(i)?W[i]:null;(p!==null?p.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(O(i,s,p,c)&&(s=null),c||p===null?x(i)&&(s===null?t.removeAttribute(i):t.setAttribute(i,""+s)):p.mustUseProperty?t[p.propertyName]=s===null?p.type===3?!1:"":s:(i=p.attributeName,c=p.attributeNamespace,s===null?t.removeAttribute(i):(p=p.type,s=p===3||p===4&&s===!0?"":""+s,c?t.setAttributeNS(c,i,s):t.setAttribute(i,s))))}var G=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ee=Symbol.for("react.element"),ye=Symbol.for("react.portal"),he=Symbol.for("react.fragment"),se=Symbol.for("react.strict_mode"),be=Symbol.for("react.profiler"),_e=Symbol.for("react.provider"),Ie=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),Le=Symbol.for("react.suspense"),Ve=Symbol.for("react.suspense_list"),$e=Symbol.for("react.memo"),ke=Symbol.for("react.lazy"),ie=Symbol.for("react.offscreen"),K=Symbol.iterator;function re(t){return t===null||typeof t!="object"?null:(t=K&&t[K]||t["@@iterator"],typeof t=="function"?t:null)}var le=Object.assign,N;function Y(t){if(N===void 0)try{throw Error()}catch(s){var i=s.stack.trim().match(/\n( *(at )?)/);N=i&&i[1]||""}return`
`+N+t}var ge=!1;function Te(t,i){if(!t||ge)return"";ge=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(ee){var c=ee}Reflect.construct(t,[],i)}else{try{i.call()}catch(ee){c=ee}t.call(i.prototype)}else{try{throw Error()}catch(ee){c=ee}t()}}catch(ee){if(ee&&c&&typeof ee.stack=="string"){for(var p=ee.stack.split(`
`),v=c.stack.split(`
`),E=p.length-1,T=v.length-1;1<=E&&0<=T&&p[E]!==v[T];)T--;for(;1<=E&&0<=T;E--,T--)if(p[E]!==v[T]){if(E!==1||T!==1)do if(E--,T--,0>T||p[E]!==v[T]){var D=`
`+p[E].replace(" at new "," at ");return t.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",t.displayName)),D}while(1<=E&&0<=T);break}}}finally{ge=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?Y(t):""}function Ge(t){switch(t.tag){case 5:return Y(t.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return t=Te(t.type,!1),t;case 11:return t=Te(t.type.render,!1),t;case 1:return t=Te(t.type,!0),t;default:return""}}function We(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case he:return"Fragment";case ye:return"Portal";case be:return"Profiler";case se:return"StrictMode";case Le:return"Suspense";case Ve:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ie:return(t.displayName||"Context")+".Consumer";case _e:return(t._context.displayName||"Context")+".Provider";case ce:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $e:return i=t.displayName||null,i!==null?i:We(t.type)||"Memo";case ke:i=t._payload,t=t._init;try{return We(t(i))}catch{}}return null}function Re(t){var i=t.type;switch(t.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=i.render,t=t.displayName||t.name||"",i.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return We(i);case 8:return i===se?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Ye(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function et(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function pe(t){var i=et(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),c=""+t[i];if(!t.hasOwnProperty(i)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var p=s.get,v=s.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return p.call(this)},set:function(E){c=""+E,v.call(this,E)}}),Object.defineProperty(t,i,{enumerable:s.enumerable}),{getValue:function(){return c},setValue:function(E){c=""+E},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function It(t){t._valueTracker||(t._valueTracker=pe(t))}function He(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var s=i.getValue(),c="";return t&&(c=et(t)?t.checked?"true":"false":t.value),t=c,t!==s?(i.setValue(t),!0):!1}function it(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ct(t,i){var s=i.checked;return le({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function vt(t,i){var s=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;s=Ye(i.value!=null?i.value:s),t._wrapperState={initialChecked:c,initialValue:s,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function gn(t,i){i=i.checked,i!=null&&fe(t,"checked",i,!1)}function cr(t,i){gn(t,i);var s=Ye(i.value),c=i.type;if(s!=null)c==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(c==="submit"||c==="reset"){t.removeAttribute("value");return}i.hasOwnProperty("value")?Nl(t,i.type,s):i.hasOwnProperty("defaultValue")&&Nl(t,i.type,Ye(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(t.defaultChecked=!!i.defaultChecked)}function Fn(t,i,s){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+t._wrapperState.initialValue,s||i===t.value||(t.value=i),t.defaultValue=i}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function Nl(t,i,s){(i!=="number"||it(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var Xr=Array.isArray;function un(t,i,s,c){if(t=t.options,i){i={};for(var p=0;p<s.length;p++)i["$"+s[p]]=!0;for(s=0;s<t.length;s++)p=i.hasOwnProperty("$"+t[s].value),t[s].selected!==p&&(t[s].selected=p),p&&c&&(t[s].defaultSelected=!0)}else{for(s=""+Ye(s),i=null,p=0;p<t.length;p++){if(t[p].value===s){t[p].selected=!0,c&&(t[p].defaultSelected=!0);return}i!==null||t[p].disabled||(i=t[p])}i!==null&&(i.selected=!0)}}function bs(t,i){if(i.dangerouslySetInnerHTML!=null)throw Error(r(91));return le({},i,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function zi(t,i){var s=i.value;if(s==null){if(s=i.children,i=i.defaultValue,s!=null){if(i!=null)throw Error(r(92));if(Xr(s)){if(1<s.length)throw Error(r(93));s=s[0]}i=s}i==null&&(i=""),s=i}t._wrapperState={initialValue:Ye(s)}}function Al(t,i){var s=Ye(i.value),c=Ye(i.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),i.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),c!=null&&(t.defaultValue=""+c)}function Fi(t){var i=t.textContent;i===t._wrapperState.initialValue&&i!==""&&i!==null&&(t.value=i)}function vn(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dr(t,i){return t==null||t==="http://www.w3.org/1999/xhtml"?vn(i):t==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Bi,$i=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,s,c,p){MSApp.execUnsafeLocalFunction(function(){return t(i,s,c,p)})}:t})(function(t,i){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=i;else{for(Bi=Bi||document.createElement("div"),Bi.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Bi.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;i.firstChild;)t.appendChild(i.firstChild)}});function Zr(t,i){if(i){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=i;return}}t.textContent=i}var Ir={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ei=["Webkit","ms","Moz","O"];Object.keys(Ir).forEach(function(t){ei.forEach(function(i){i=i+t.charAt(0).toUpperCase()+t.substring(1),Ir[i]=Ir[t]})});function No(t,i,s){return i==null||typeof i=="boolean"||i===""?"":s||typeof i!="number"||i===0||Ir.hasOwnProperty(t)&&Ir[t]?(""+i).trim():i+"px"}function _s(t,i){t=t.style;for(var s in i)if(i.hasOwnProperty(s)){var c=s.indexOf("--")===0,p=No(s,i[s],c);s==="float"&&(s="cssFloat"),c?t.setProperty(s,p):t[s]=p}}var Or=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fe(t,i){if(i){if(Or[t]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(r(137,t));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(r(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(r(61))}if(i.style!=null&&typeof i.style!="object")throw Error(r(62))}}function ti(t,i){if(t.indexOf("-")===-1)return typeof i.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fr=null;function Ki(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ce=null,jr=null,ni=null;function ks(t){if(t=ia(t)){if(typeof Ce!="function")throw Error(r(280));var i=t.stateNode;i&&(i=Lu(i),Ce(t.stateNode,t.type,i))}}function Dl(t){jr?ni?ni.push(t):ni=[t]:jr=t}function xs(){if(jr){var t=jr,i=ni;if(ni=jr=null,ks(t),i)for(t=0;t<i.length;t++)ks(i[t])}}function uu(t,i){return t(i)}function cu(){}var Tr=!1;function ri(t,i,s){if(Tr)return t(i,s);Tr=!0;try{return uu(t,i,s)}finally{Tr=!1,(jr!==null||ni!==null)&&(cu(),xs())}}function ii(t,i){var s=t.stateNode;if(s===null)return null;var c=Lu(s);if(c===null)return null;s=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(r(231,i,typeof s));return s}var Vi=!1;if(h)try{var _t={};Object.defineProperty(_t,"passive",{get:function(){Vi=!0}}),window.addEventListener("test",_t,_t),window.removeEventListener("test",_t,_t)}catch{Vi=!1}function Vt(t,i,s,c,p,v,E,T,D){var ee=Array.prototype.slice.call(arguments,3);try{i.apply(s,ee)}catch(de){this.onError(de)}}var Ao=!1,oi=null,si=!1,Wi=null,Ed={onError:function(t){Ao=!0,oi=t}};function Pr(t,i,s,c,p,v,E,T,D){Ao=!1,oi=null,Vt.apply(Ed,arguments)}function Hi(t,i,s,c,p,v,E,T,D){if(Pr.apply(this,arguments),Ao){if(Ao){var ee=oi;Ao=!1,oi=null}else throw Error(r(198));si||(si=!0,Wi=ee)}}function wn(t){var i=t,s=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(s=i.return),t=i.return;while(t)}return i.tag===3?s:null}function Do(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function du(t){if(wn(t)!==t)throw Error(r(188))}function Nr(t){var i=t.alternate;if(!i){if(i=wn(t),i===null)throw Error(r(188));return i!==t?null:t}for(var s=t,c=i;;){var p=s.return;if(p===null)break;var v=p.alternate;if(v===null){if(c=p.return,c!==null){s=c;continue}break}if(p.child===v.child){for(v=p.child;v;){if(v===s)return du(p),t;if(v===c)return du(p),i;v=v.sibling}throw Error(r(188))}if(s.return!==c.return)s=p,c=v;else{for(var E=!1,T=p.child;T;){if(T===s){E=!0,s=p,c=v;break}if(T===c){E=!0,c=p,s=v;break}T=T.sibling}if(!E){for(T=v.child;T;){if(T===s){E=!0,s=v,c=p;break}if(T===c){E=!0,c=v,s=p;break}T=T.sibling}if(!E)throw Error(r(189))}}if(s.alternate!==c)throw Error(r(190))}if(s.tag!==3)throw Error(r(188));return s.stateNode.current===s?t:i}function Rl(t){return t=Nr(t),t!==null?Ar(t):null}function Ar(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var i=Ar(t);if(i!==null)return i;t=t.sibling}return null}var Ll=e.unstable_scheduleCallback,Ss=e.unstable_cancelCallback,Mt=e.unstable_shouldYield,li=e.unstable_requestPaint,wt=e.unstable_now,fu=e.unstable_getCurrentPriorityLevel,Dr=e.unstable_ImmediatePriority,Ro=e.unstable_UserBlockingPriority,qi=e.unstable_NormalPriority,Ml=e.unstable_LowPriority,Rr=e.unstable_IdlePriority,Lo=null,In=null;function hu(t){if(In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(Lo,t,void 0,(t.current.flags&128)===128)}catch{}}var Xe=Math.clz32?Math.clz32:Es,pu=Math.log,mu=Math.LN2;function Es(t){return t>>>=0,t===0?32:31-(pu(t)/mu|0)|0}var Lr=64,Mo=4194304;function Gi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Uo(t,i){var s=t.pendingLanes;if(s===0)return 0;var c=0,p=t.suspendedLanes,v=t.pingedLanes,E=s&268435455;if(E!==0){var T=E&~p;T!==0?c=Gi(T):(v&=E,v!==0&&(c=Gi(v)))}else E=s&~p,E!==0?c=Gi(E):v!==0&&(c=Gi(v));if(c===0)return 0;if(i!==0&&i!==c&&(i&p)===0&&(p=c&-c,v=i&-i,p>=v||p===16&&(v&4194240)!==0))return i;if((c&4)!==0&&(c|=s&16),i=t.entangledLanes,i!==0)for(t=t.entanglements,i&=c;0<i;)s=31-Xe(i),p=1<<s,c|=t[s],i&=~p;return c}function St(t,i){switch(t){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zo(t,i){for(var s=t.suspendedLanes,c=t.pingedLanes,p=t.expirationTimes,v=t.pendingLanes;0<v;){var E=31-Xe(v),T=1<<E,D=p[E];D===-1?((T&s)===0||(T&c)!==0)&&(p[E]=St(T,i)):D<=i&&(t.expiredLanes|=T),v&=~T}}function ai(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ui(){var t=Lr;return Lr<<=1,(Lr&4194240)===0&&(Lr=64),t}function Fo(t){for(var i=[],s=0;31>s;s++)i.push(t);return i}function ci(t,i,s){t.pendingLanes|=i,i!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,i=31-Xe(i),t[i]=s}function Cs(t,i){var s=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;var c=t.eventTimes;for(t=t.expirationTimes;0<s;){var p=31-Xe(s),v=1<<p;i[p]=0,c[p]=-1,t[p]=-1,s&=~v}}function Is(t,i){var s=t.entangledLanes|=i;for(t=t.entanglements;s;){var c=31-Xe(s),p=1<<c;p&i|t[c]&i&&(t[c]|=i),s&=~p}}var ht=0;function Ul(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var yu,dt,zl,gu,vu,cn=!1,hr=[],Bn=null,dn=null,pr=null,Yi=new Map,Dt=new Map,qt=[],Bo="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qi(t,i){switch(t){case"focusin":case"focusout":Bn=null;break;case"dragenter":case"dragleave":dn=null;break;case"mouseover":case"mouseout":pr=null;break;case"pointerover":case"pointerout":Yi.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(i.pointerId)}}function di(t,i,s,c,p,v){return t===null||t.nativeEvent!==v?(t={blockedOn:i,domEventName:s,eventSystemFlags:c,nativeEvent:v,targetContainers:[p]},i!==null&&(i=ia(i),i!==null&&dt(i)),t):(t.eventSystemFlags|=c,i=t.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),t)}function Mr(t,i,s,c,p){switch(i){case"focusin":return Bn=di(Bn,t,i,s,c,p),!0;case"dragenter":return dn=di(dn,t,i,s,c,p),!0;case"mouseover":return pr=di(pr,t,i,s,c,p),!0;case"pointerover":var v=p.pointerId;return Yi.set(v,di(Yi.get(v)||null,t,i,s,c,p)),!0;case"gotpointercapture":return v=p.pointerId,Dt.set(v,di(Dt.get(v)||null,t,i,s,c,p)),!0}return!1}function wu(t){var i=Yo(t.target);if(i!==null){var s=wn(i);if(s!==null){if(i=s.tag,i===13){if(i=Do(s),i!==null){t.blockedOn=i,vu(t.priority,function(){zl(s)});return}}else if(i===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function On(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var s=Ji(t.domEventName,t.eventSystemFlags,i[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var c=new s.constructor(s.type,s);fr=c,s.target.dispatchEvent(c),fr=null}else return i=ia(s),i!==null&&dt(i),t.blockedOn=s,!1;i.shift()}return!0}function Os(t,i,s){On(t)&&s.delete(i)}function bu(){cn=!1,Bn!==null&&On(Bn)&&(Bn=null),dn!==null&&On(dn)&&(dn=null),pr!==null&&On(pr)&&(pr=null),Yi.forEach(Os),Dt.forEach(Os)}function fi(t,i){t.blockedOn===i&&(t.blockedOn=null,cn||(cn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,bu)))}function mr(t){function i(p){return fi(p,t)}if(0<hr.length){fi(hr[0],t);for(var s=1;s<hr.length;s++){var c=hr[s];c.blockedOn===t&&(c.blockedOn=null)}}for(Bn!==null&&fi(Bn,t),dn!==null&&fi(dn,t),pr!==null&&fi(pr,t),Yi.forEach(i),Dt.forEach(i),s=0;s<qt.length;s++)c=qt[s],c.blockedOn===t&&(c.blockedOn=null);for(;0<qt.length&&(s=qt[0],s.blockedOn===null);)wu(s),s.blockedOn===null&&qt.shift()}var Ur=G.ReactCurrentBatchConfig,$o=!0;function Cd(t,i,s,c){var p=ht,v=Ur.transition;Ur.transition=null;try{ht=1,Fl(t,i,s,c)}finally{ht=p,Ur.transition=v}}function Ko(t,i,s,c){var p=ht,v=Ur.transition;Ur.transition=null;try{ht=4,Fl(t,i,s,c)}finally{ht=p,Ur.transition=v}}function Fl(t,i,s,c){if($o){var p=Ji(t,i,s,c);if(p===null)Nd(t,i,c,js,s),Qi(t,c);else if(Mr(p,t,i,s,c))c.stopPropagation();else if(Qi(t,c),i&4&&-1<Bo.indexOf(t)){for(;p!==null;){var v=ia(p);if(v!==null&&yu(v),v=Ji(t,i,s,c),v===null&&Nd(t,i,c,js,s),v===p)break;p=v}p!==null&&c.stopPropagation()}else Nd(t,i,c,null,s)}}var js=null;function Ji(t,i,s,c){if(js=null,t=Ki(c),t=Yo(t),t!==null)if(i=wn(t),i===null)t=null;else if(s=i.tag,s===13){if(t=Do(i),t!==null)return t;t=null}else if(s===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null);return js=t,null}function Vo(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fu()){case Dr:return 1;case Ro:return 4;case qi:case Ml:return 16;case Rr:return 536870912;default:return 16}default:return 16}}var Jn=null,Bl=null,Ts=null;function _u(){if(Ts)return Ts;var t,i=Bl,s=i.length,c,p="value"in Jn?Jn.value:Jn.textContent,v=p.length;for(t=0;t<s&&i[t]===p[t];t++);var E=s-t;for(c=1;c<=E&&i[s-c]===p[v-c];c++);return Ts=p.slice(t,1<c?1-c:void 0)}function Xi(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Zi(){return!0}function $l(){return!1}function tn(t){function i(s,c,p,v,E){this._reactName=s,this._targetInst=p,this.type=c,this.nativeEvent=v,this.target=E,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(s=t[T],this[T]=s?s(v):v[T]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Zi:$l,this.isPropagationStopped=$l,this}return le(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Zi)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Zi)},persist:function(){},isPersistent:Zi}),i}var yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eo=tn(yr),to=le({},yr,{view:0,detail:0}),Id=tn(to),zr,Wo,hi,no=le({},to,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ls,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hi&&(hi&&t.type==="mousemove"?(zr=t.screenX-hi.screenX,Wo=t.screenY-hi.screenY):Wo=zr=0,hi=t),zr)},movementY:function(t){return"movementY"in t?t.movementY:Wo}}),Ps=tn(no),nn=le({},no,{dataTransfer:0}),Ho=tn(nn),qo=le({},to,{relatedTarget:0}),Ns=tn(qo),As=le({},yr,{animationName:0,elapsedTime:0,pseudoElement:0}),ku=tn(As),xu=le({},yr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ds=tn(xu),Kl=le({},yr,{data:0}),Fr=tn(Kl),Vl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rs={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hl(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Rs[t])?!!i[t]:!1}function Ls(){return Hl}var Od=le({},to,{key:function(t){if(t.key){var i=Vl[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Xi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Wl[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ls,charCode:function(t){return t.type==="keypress"?Xi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ql=tn(Od),Ms=le({},no,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Su=tn(Ms),Gl=le({},to,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ls}),Yl=tn(Gl),jd=le({},yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Eu=tn(jd),Td=le({},no,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Cu=tn(Td),Iu=[9,13,27,32],Ql=h&&"CompositionEvent"in window,ro=null;h&&"documentMode"in document&&(ro=document.documentMode);var Jl=h&&"TextEvent"in window&&!ro,Xl=h&&(!Ql||ro&&8<ro&&11>=ro),Zl=" ",Ou=!1;function ju(t,i){switch(t){case"keyup":return Iu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tu(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var gr=!1;function vr(t,i){switch(t){case"compositionend":return Tu(i);case"keypress":return i.which!==32?null:(Ou=!0,Zl);case"textInput":return t=i.data,t===Zl&&Ou?null:t;default:return null}}function Ut(t,i){if(gr)return t==="compositionend"||!Ql&&ju(t,i)?(t=_u(),Ts=Bl=Jn=null,gr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Xl&&i.locale!=="ko"?null:i.data;default:return null}}var Us={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pi(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Us[t.type]:i==="textarea"}function Pu(t,i,s,c){Dl(c),i=Au(i,"onChange"),0<i.length&&(s=new eo("onChange","change",null,s,c),t.push({event:s,listeners:i}))}var mi=null,io=null;function yi(t){Sp(t,0)}function oo(t){var i=$s(t);if(He(i))return t}function so(t,i){if(t==="change")return i}var wr=!1;if(h){var zs;if(h){var u="oninput"in document;if(!u){var f=document.createElement("div");f.setAttribute("oninput","return;"),u=typeof f.oninput=="function"}zs=u}else zs=!1;wr=zs&&(!document.documentMode||9<document.documentMode)}function g(){mi&&(mi.detachEvent("onpropertychange",b),io=mi=null)}function b(t){if(t.propertyName==="value"&&oo(io)){var i=[];Pu(i,io,t,Ki(t)),ri(yi,i)}}function k(t,i,s){t==="focusin"?(g(),mi=i,io=s,mi.attachEvent("onpropertychange",b)):t==="focusout"&&g()}function S(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return oo(io)}function I(t,i){if(t==="click")return oo(i)}function j(t,i){if(t==="input"||t==="change")return oo(i)}function z(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var V=typeof Object.is=="function"?Object.is:z;function L(t,i){if(V(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var s=Object.keys(t),c=Object.keys(i);if(s.length!==c.length)return!1;for(c=0;c<s.length;c++){var p=s[c];if(!y.call(i,p)||!V(t[p],i[p]))return!1}return!0}function A(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function F(t,i){var s=A(t);t=0;for(var c;s;){if(s.nodeType===3){if(c=t+s.textContent.length,t<=i&&c>=i)return{node:s,offset:i-t};t=c}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=A(s)}}function B(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?B(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function U(){for(var t=window,i=it();i instanceof t.HTMLIFrameElement;){try{var s=typeof i.contentWindow.location.href=="string"}catch{s=!1}if(s)t=i.contentWindow;else break;i=it(t.document)}return i}function M(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}function J(t){var i=U(),s=t.focusedElem,c=t.selectionRange;if(i!==s&&s&&s.ownerDocument&&B(s.ownerDocument.documentElement,s)){if(c!==null&&M(s)){if(i=c.start,t=c.end,t===void 0&&(t=i),"selectionStart"in s)s.selectionStart=i,s.selectionEnd=Math.min(t,s.value.length);else if(t=(i=s.ownerDocument||document)&&i.defaultView||window,t.getSelection){t=t.getSelection();var p=s.textContent.length,v=Math.min(c.start,p);c=c.end===void 0?v:Math.min(c.end,p),!t.extend&&v>c&&(p=c,c=v,v=p),p=F(s,v);var E=F(s,c);p&&E&&(t.rangeCount!==1||t.anchorNode!==p.node||t.anchorOffset!==p.offset||t.focusNode!==E.node||t.focusOffset!==E.offset)&&(i=i.createRange(),i.setStart(p.node,p.offset),t.removeAllRanges(),v>c?(t.addRange(i),t.extend(E.node,E.offset)):(i.setEnd(E.node,E.offset),t.addRange(i)))}}for(i=[],t=s;t=t.parentNode;)t.nodeType===1&&i.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<i.length;s++)t=i[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Z=h&&"documentMode"in document&&11>=document.documentMode,H=null,ne=null,oe=null,xe=!1;function Se(t,i,s){var c=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;xe||H==null||H!==it(c)||(c=H,"selectionStart"in c&&M(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),oe&&L(oe,c)||(oe=c,c=Au(ne,"onSelect"),0<c.length&&(i=new eo("onSelect","select",null,i,s),t.push({event:i,listeners:c}),i.target=H)))}function ue(t,i){var s={};return s[t.toLowerCase()]=i.toLowerCase(),s["Webkit"+t]="webkit"+i,s["Moz"+t]="moz"+i,s}var je={animationend:ue("Animation","AnimationEnd"),animationiteration:ue("Animation","AnimationIteration"),animationstart:ue("Animation","AnimationStart"),transitionend:ue("Transition","TransitionEnd")},Oe={},ve={};h&&(ve=document.createElement("div").style,"AnimationEvent"in window||(delete je.animationend.animation,delete je.animationiteration.animation,delete je.animationstart.animation),"TransitionEvent"in window||delete je.transitionend.transition);function Ne(t){if(Oe[t])return Oe[t];if(!je[t])return t;var i=je[t],s;for(s in i)if(i.hasOwnProperty(s)&&s in ve)return Oe[t]=i[s];return t}var ut=Ne("animationend"),ft=Ne("animationiteration"),qe=Ne("animationstart"),nt=Ne("transitionend"),jt=new Map,jn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bt(t,i){jt.set(t,i),a(i,[t])}for(var br=0;br<jn.length;br++){var Go=jn[br],Uw=Go.toLowerCase(),zw=Go[0].toUpperCase()+Go.slice(1);bt(Uw,"on"+zw)}bt(ut,"onAnimationEnd"),bt(ft,"onAnimationIteration"),bt(qe,"onAnimationStart"),bt("dblclick","onDoubleClick"),bt("focusin","onFocus"),bt("focusout","onBlur"),bt(nt,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ea="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fw=new Set("cancel close invalid load scroll toggle".split(" ").concat(ea));function xp(t,i,s){var c=t.type||"unknown-event";t.currentTarget=s,Hi(c,i,void 0,t),t.currentTarget=null}function Sp(t,i){i=(i&4)!==0;for(var s=0;s<t.length;s++){var c=t[s],p=c.event;c=c.listeners;e:{var v=void 0;if(i)for(var E=c.length-1;0<=E;E--){var T=c[E],D=T.instance,ee=T.currentTarget;if(T=T.listener,D!==v&&p.isPropagationStopped())break e;xp(p,T,ee),v=D}else for(E=0;E<c.length;E++){if(T=c[E],D=T.instance,ee=T.currentTarget,T=T.listener,D!==v&&p.isPropagationStopped())break e;xp(p,T,ee),v=D}}}if(si)throw t=Wi,si=!1,Wi=null,t}function Pt(t,i){var s=i[Ud];s===void 0&&(s=i[Ud]=new Set);var c=t+"__bubble";s.has(c)||(Ep(i,t,2,!1),s.add(c))}function Pd(t,i,s){var c=0;i&&(c|=4),Ep(s,t,c,i)}var Nu="_reactListening"+Math.random().toString(36).slice(2);function ta(t){if(!t[Nu]){t[Nu]=!0,o.forEach(function(s){s!=="selectionchange"&&(Fw.has(s)||Pd(s,!1,t),Pd(s,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Nu]||(i[Nu]=!0,Pd("selectionchange",!1,i))}}function Ep(t,i,s,c){switch(Vo(i)){case 1:var p=Cd;break;case 4:p=Ko;break;default:p=Fl}s=p.bind(null,i,s,t),p=void 0,!Vi||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),c?p!==void 0?t.addEventListener(i,s,{capture:!0,passive:p}):t.addEventListener(i,s,!0):p!==void 0?t.addEventListener(i,s,{passive:p}):t.addEventListener(i,s,!1)}function Nd(t,i,s,c,p){var v=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var E=c.tag;if(E===3||E===4){var T=c.stateNode.containerInfo;if(T===p||T.nodeType===8&&T.parentNode===p)break;if(E===4)for(E=c.return;E!==null;){var D=E.tag;if((D===3||D===4)&&(D=E.stateNode.containerInfo,D===p||D.nodeType===8&&D.parentNode===p))return;E=E.return}for(;T!==null;){if(E=Yo(T),E===null)return;if(D=E.tag,D===5||D===6){c=v=E;continue e}T=T.parentNode}}c=c.return}ri(function(){var ee=v,de=Ki(s),me=[];e:{var ae=jt.get(t);if(ae!==void 0){var Ae=eo,Me=t;switch(t){case"keypress":if(Xi(s)===0)break e;case"keydown":case"keyup":Ae=ql;break;case"focusin":Me="focus",Ae=Ns;break;case"focusout":Me="blur",Ae=Ns;break;case"beforeblur":case"afterblur":Ae=Ns;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ae=Ps;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ae=Ho;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ae=Yl;break;case ut:case ft:case qe:Ae=ku;break;case nt:Ae=Eu;break;case"scroll":Ae=Id;break;case"wheel":Ae=Cu;break;case"copy":case"cut":case"paste":Ae=Ds;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ae=Su}var Be=(i&4)!==0,$t=!Be&&t==="scroll",Q=Be?ae!==null?ae+"Capture":null:ae;Be=[];for(var $=ee,X;$!==null;){X=$;var we=X.stateNode;if(X.tag===5&&we!==null&&(X=we,Q!==null&&(we=ii($,Q),we!=null&&Be.push(na($,we,X)))),$t)break;$=$.return}0<Be.length&&(ae=new Ae(ae,Me,null,s,de),me.push({event:ae,listeners:Be}))}}if((i&7)===0){e:{if(ae=t==="mouseover"||t==="pointerover",Ae=t==="mouseout"||t==="pointerout",ae&&s!==fr&&(Me=s.relatedTarget||s.fromElement)&&(Yo(Me)||Me[gi]))break e;if((Ae||ae)&&(ae=de.window===de?de:(ae=de.ownerDocument)?ae.defaultView||ae.parentWindow:window,Ae?(Me=s.relatedTarget||s.toElement,Ae=ee,Me=Me?Yo(Me):null,Me!==null&&($t=wn(Me),Me!==$t||Me.tag!==5&&Me.tag!==6)&&(Me=null)):(Ae=null,Me=ee),Ae!==Me)){if(Be=Ps,we="onMouseLeave",Q="onMouseEnter",$="mouse",(t==="pointerout"||t==="pointerover")&&(Be=Su,we="onPointerLeave",Q="onPointerEnter",$="pointer"),$t=Ae==null?ae:$s(Ae),X=Me==null?ae:$s(Me),ae=new Be(we,$+"leave",Ae,s,de),ae.target=$t,ae.relatedTarget=X,we=null,Yo(de)===ee&&(Be=new Be(Q,$+"enter",Me,s,de),Be.target=X,Be.relatedTarget=$t,we=Be),$t=we,Ae&&Me)t:{for(Be=Ae,Q=Me,$=0,X=Be;X;X=Fs(X))$++;for(X=0,we=Q;we;we=Fs(we))X++;for(;0<$-X;)Be=Fs(Be),$--;for(;0<X-$;)Q=Fs(Q),X--;for(;$--;){if(Be===Q||Q!==null&&Be===Q.alternate)break t;Be=Fs(Be),Q=Fs(Q)}Be=null}else Be=null;Ae!==null&&Cp(me,ae,Ae,Be,!1),Me!==null&&$t!==null&&Cp(me,$t,Me,Be,!0)}}e:{if(ae=ee?$s(ee):window,Ae=ae.nodeName&&ae.nodeName.toLowerCase(),Ae==="select"||Ae==="input"&&ae.type==="file")var Ke=so;else if(pi(ae))if(wr)Ke=j;else{Ke=S;var Qe=k}else(Ae=ae.nodeName)&&Ae.toLowerCase()==="input"&&(ae.type==="checkbox"||ae.type==="radio")&&(Ke=I);if(Ke&&(Ke=Ke(t,ee))){Pu(me,Ke,s,de);break e}Qe&&Qe(t,ae,ee),t==="focusout"&&(Qe=ae._wrapperState)&&Qe.controlled&&ae.type==="number"&&Nl(ae,"number",ae.value)}switch(Qe=ee?$s(ee):window,t){case"focusin":(pi(Qe)||Qe.contentEditable==="true")&&(H=Qe,ne=ee,oe=null);break;case"focusout":oe=ne=H=null;break;case"mousedown":xe=!0;break;case"contextmenu":case"mouseup":case"dragend":xe=!1,Se(me,s,de);break;case"selectionchange":if(Z)break;case"keydown":case"keyup":Se(me,s,de)}var Je;if(Ql)e:{switch(t){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else gr?ju(t,s)&&(Ze="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(Ze="onCompositionStart");Ze&&(Xl&&s.locale!=="ko"&&(gr||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&gr&&(Je=_u()):(Jn=de,Bl="value"in Jn?Jn.value:Jn.textContent,gr=!0)),Qe=Au(ee,Ze),0<Qe.length&&(Ze=new Fr(Ze,t,null,s,de),me.push({event:Ze,listeners:Qe}),Je?Ze.data=Je:(Je=Tu(s),Je!==null&&(Ze.data=Je)))),(Je=Jl?vr(t,s):Ut(t,s))&&(ee=Au(ee,"onBeforeInput"),0<ee.length&&(de=new Fr("onBeforeInput","beforeinput",null,s,de),me.push({event:de,listeners:ee}),de.data=Je))}Sp(me,i)})}function na(t,i,s){return{instance:t,listener:i,currentTarget:s}}function Au(t,i){for(var s=i+"Capture",c=[];t!==null;){var p=t,v=p.stateNode;p.tag===5&&v!==null&&(p=v,v=ii(t,s),v!=null&&c.unshift(na(t,v,p)),v=ii(t,i),v!=null&&c.push(na(t,v,p))),t=t.return}return c}function Fs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Cp(t,i,s,c,p){for(var v=i._reactName,E=[];s!==null&&s!==c;){var T=s,D=T.alternate,ee=T.stateNode;if(D!==null&&D===c)break;T.tag===5&&ee!==null&&(T=ee,p?(D=ii(s,v),D!=null&&E.unshift(na(s,D,T))):p||(D=ii(s,v),D!=null&&E.push(na(s,D,T)))),s=s.return}E.length!==0&&t.push({event:i,listeners:E})}var Bw=/\r\n?/g,$w=/\u0000|\uFFFD/g;function Ip(t){return(typeof t=="string"?t:""+t).replace(Bw,`
`).replace($w,"")}function Du(t,i,s){if(i=Ip(i),Ip(t)!==i&&s)throw Error(r(425))}function Ru(){}var Ad=null,Dd=null;function Rd(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ld=typeof setTimeout=="function"?setTimeout:void 0,Kw=typeof clearTimeout=="function"?clearTimeout:void 0,Op=typeof Promise=="function"?Promise:void 0,Vw=typeof queueMicrotask=="function"?queueMicrotask:typeof Op<"u"?function(t){return Op.resolve(null).then(t).catch(Ww)}:Ld;function Ww(t){setTimeout(function(){throw t})}function Md(t,i){var s=i,c=0;do{var p=s.nextSibling;if(t.removeChild(s),p&&p.nodeType===8)if(s=p.data,s==="/$"){if(c===0){t.removeChild(p),mr(i);return}c--}else s!=="$"&&s!=="$?"&&s!=="$!"||c++;s=p}while(s);mr(i)}function lo(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return t}function jp(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(i===0)return t;i--}else s==="/$"&&i++}t=t.previousSibling}return null}var Bs=Math.random().toString(36).slice(2),Br="__reactFiber$"+Bs,ra="__reactProps$"+Bs,gi="__reactContainer$"+Bs,Ud="__reactEvents$"+Bs,Hw="__reactListeners$"+Bs,qw="__reactHandles$"+Bs;function Yo(t){var i=t[Br];if(i)return i;for(var s=t.parentNode;s;){if(i=s[gi]||s[Br]){if(s=i.alternate,i.child!==null||s!==null&&s.child!==null)for(t=jp(t);t!==null;){if(s=t[Br])return s;t=jp(t)}return i}t=s,s=t.parentNode}return null}function ia(t){return t=t[Br]||t[gi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $s(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(r(33))}function Lu(t){return t[ra]||null}var zd=[],Ks=-1;function ao(t){return{current:t}}function Nt(t){0>Ks||(t.current=zd[Ks],zd[Ks]=null,Ks--)}function Tt(t,i){Ks++,zd[Ks]=t.current,t.current=i}var uo={},bn=ao(uo),Nn=ao(!1),Qo=uo;function Vs(t,i){var s=t.type.contextTypes;if(!s)return uo;var c=t.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var p={},v;for(v in s)p[v]=i[v];return c&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=p),p}function An(t){return t=t.childContextTypes,t!=null}function Mu(){Nt(Nn),Nt(bn)}function Tp(t,i,s){if(bn.current!==uo)throw Error(r(168));Tt(bn,i),Tt(Nn,s)}function Pp(t,i,s){var c=t.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return s;c=c.getChildContext();for(var p in c)if(!(p in i))throw Error(r(108,Re(t)||"Unknown",p));return le({},s,c)}function Uu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||uo,Qo=bn.current,Tt(bn,t),Tt(Nn,Nn.current),!0}function Np(t,i,s){var c=t.stateNode;if(!c)throw Error(r(169));s?(t=Pp(t,i,Qo),c.__reactInternalMemoizedMergedChildContext=t,Nt(Nn),Nt(bn),Tt(bn,t)):Nt(Nn),Tt(Nn,s)}var vi=null,zu=!1,Fd=!1;function Ap(t){vi===null?vi=[t]:vi.push(t)}function Gw(t){zu=!0,Ap(t)}function co(){if(!Fd&&vi!==null){Fd=!0;var t=0,i=ht;try{var s=vi;for(ht=1;t<s.length;t++){var c=s[t];do c=c(!0);while(c!==null)}vi=null,zu=!1}catch(p){throw vi!==null&&(vi=vi.slice(t+1)),Ll(Dr,co),p}finally{ht=i,Fd=!1}}return null}var Ws=[],Hs=0,Fu=null,Bu=0,Xn=[],Zn=0,Jo=null,wi=1,bi="";function Xo(t,i){Ws[Hs++]=Bu,Ws[Hs++]=Fu,Fu=t,Bu=i}function Dp(t,i,s){Xn[Zn++]=wi,Xn[Zn++]=bi,Xn[Zn++]=Jo,Jo=t;var c=wi;t=bi;var p=32-Xe(c)-1;c&=~(1<<p),s+=1;var v=32-Xe(i)+p;if(30<v){var E=p-p%5;v=(c&(1<<E)-1).toString(32),c>>=E,p-=E,wi=1<<32-Xe(i)+p|s<<p|c,bi=v+t}else wi=1<<v|s<<p|c,bi=t}function Bd(t){t.return!==null&&(Xo(t,1),Dp(t,1,0))}function $d(t){for(;t===Fu;)Fu=Ws[--Hs],Ws[Hs]=null,Bu=Ws[--Hs],Ws[Hs]=null;for(;t===Jo;)Jo=Xn[--Zn],Xn[Zn]=null,bi=Xn[--Zn],Xn[Zn]=null,wi=Xn[--Zn],Xn[Zn]=null}var $n=null,Kn=null,Rt=!1,_r=null;function Rp(t,i){var s=rr(5,null,null,0);s.elementType="DELETED",s.stateNode=i,s.return=t,i=t.deletions,i===null?(t.deletions=[s],t.flags|=16):i.push(s)}function Lp(t,i){switch(t.tag){case 5:var s=t.type;return i=i.nodeType!==1||s.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(t.stateNode=i,$n=t,Kn=lo(i.firstChild),!0):!1;case 6:return i=t.pendingProps===""||i.nodeType!==3?null:i,i!==null?(t.stateNode=i,$n=t,Kn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(s=Jo!==null?{id:wi,overflow:bi}:null,t.memoizedState={dehydrated:i,treeContext:s,retryLane:1073741824},s=rr(18,null,null,0),s.stateNode=i,s.return=t,t.child=s,$n=t,Kn=null,!0):!1;default:return!1}}function Kd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Vd(t){if(Rt){var i=Kn;if(i){var s=i;if(!Lp(t,i)){if(Kd(t))throw Error(r(418));i=lo(s.nextSibling);var c=$n;i&&Lp(t,i)?Rp(c,s):(t.flags=t.flags&-4097|2,Rt=!1,$n=t)}}else{if(Kd(t))throw Error(r(418));t.flags=t.flags&-4097|2,Rt=!1,$n=t}}}function Mp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$n=t}function $u(t){if(t!==$n)return!1;if(!Rt)return Mp(t),Rt=!0,!1;var i;if((i=t.tag!==3)&&!(i=t.tag!==5)&&(i=t.type,i=i!=="head"&&i!=="body"&&!Rd(t.type,t.memoizedProps)),i&&(i=Kn)){if(Kd(t))throw Up(),Error(r(418));for(;i;)Rp(t,i),i=lo(i.nextSibling)}if(Mp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(i===0){Kn=lo(t.nextSibling);break e}i--}else s!=="$"&&s!=="$!"&&s!=="$?"||i++}t=t.nextSibling}Kn=null}}else Kn=$n?lo(t.stateNode.nextSibling):null;return!0}function Up(){for(var t=Kn;t;)t=lo(t.nextSibling)}function qs(){Kn=$n=null,Rt=!1}function Wd(t){_r===null?_r=[t]:_r.push(t)}var Yw=G.ReactCurrentBatchConfig;function oa(t,i,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(r(309));var c=s.stateNode}if(!c)throw Error(r(147,t));var p=c,v=""+t;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===v?i.ref:(i=function(E){var T=p.refs;E===null?delete T[v]:T[v]=E},i._stringRef=v,i)}if(typeof t!="string")throw Error(r(284));if(!s._owner)throw Error(r(290,t))}return t}function Ku(t,i){throw t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t))}function zp(t){var i=t._init;return i(t._payload)}function Fp(t){function i(Q,$){if(t){var X=Q.deletions;X===null?(Q.deletions=[$],Q.flags|=16):X.push($)}}function s(Q,$){if(!t)return null;for(;$!==null;)i(Q,$),$=$.sibling;return null}function c(Q,$){for(Q=new Map;$!==null;)$.key!==null?Q.set($.key,$):Q.set($.index,$),$=$.sibling;return Q}function p(Q,$){return Q=wo(Q,$),Q.index=0,Q.sibling=null,Q}function v(Q,$,X){return Q.index=X,t?(X=Q.alternate,X!==null?(X=X.index,X<$?(Q.flags|=2,$):X):(Q.flags|=2,$)):(Q.flags|=1048576,$)}function E(Q){return t&&Q.alternate===null&&(Q.flags|=2),Q}function T(Q,$,X,we){return $===null||$.tag!==6?($=Mf(X,Q.mode,we),$.return=Q,$):($=p($,X),$.return=Q,$)}function D(Q,$,X,we){var Ke=X.type;return Ke===he?de(Q,$,X.props.children,we,X.key):$!==null&&($.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===ke&&zp(Ke)===$.type)?(we=p($,X.props),we.ref=oa(Q,$,X),we.return=Q,we):(we=hc(X.type,X.key,X.props,null,Q.mode,we),we.ref=oa(Q,$,X),we.return=Q,we)}function ee(Q,$,X,we){return $===null||$.tag!==4||$.stateNode.containerInfo!==X.containerInfo||$.stateNode.implementation!==X.implementation?($=Uf(X,Q.mode,we),$.return=Q,$):($=p($,X.children||[]),$.return=Q,$)}function de(Q,$,X,we,Ke){return $===null||$.tag!==7?($=ss(X,Q.mode,we,Ke),$.return=Q,$):($=p($,X),$.return=Q,$)}function me(Q,$,X){if(typeof $=="string"&&$!==""||typeof $=="number")return $=Mf(""+$,Q.mode,X),$.return=Q,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case Ee:return X=hc($.type,$.key,$.props,null,Q.mode,X),X.ref=oa(Q,null,$),X.return=Q,X;case ye:return $=Uf($,Q.mode,X),$.return=Q,$;case ke:var we=$._init;return me(Q,we($._payload),X)}if(Xr($)||re($))return $=ss($,Q.mode,X,null),$.return=Q,$;Ku(Q,$)}return null}function ae(Q,$,X,we){var Ke=$!==null?$.key:null;if(typeof X=="string"&&X!==""||typeof X=="number")return Ke!==null?null:T(Q,$,""+X,we);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case Ee:return X.key===Ke?D(Q,$,X,we):null;case ye:return X.key===Ke?ee(Q,$,X,we):null;case ke:return Ke=X._init,ae(Q,$,Ke(X._payload),we)}if(Xr(X)||re(X))return Ke!==null?null:de(Q,$,X,we,null);Ku(Q,X)}return null}function Ae(Q,$,X,we,Ke){if(typeof we=="string"&&we!==""||typeof we=="number")return Q=Q.get(X)||null,T($,Q,""+we,Ke);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case Ee:return Q=Q.get(we.key===null?X:we.key)||null,D($,Q,we,Ke);case ye:return Q=Q.get(we.key===null?X:we.key)||null,ee($,Q,we,Ke);case ke:var Qe=we._init;return Ae(Q,$,X,Qe(we._payload),Ke)}if(Xr(we)||re(we))return Q=Q.get(X)||null,de($,Q,we,Ke,null);Ku($,we)}return null}function Me(Q,$,X,we){for(var Ke=null,Qe=null,Je=$,Ze=$=0,sn=null;Je!==null&&Ze<X.length;Ze++){Je.index>Ze?(sn=Je,Je=null):sn=Je.sibling;var gt=ae(Q,Je,X[Ze],we);if(gt===null){Je===null&&(Je=sn);break}t&&Je&&gt.alternate===null&&i(Q,Je),$=v(gt,$,Ze),Qe===null?Ke=gt:Qe.sibling=gt,Qe=gt,Je=sn}if(Ze===X.length)return s(Q,Je),Rt&&Xo(Q,Ze),Ke;if(Je===null){for(;Ze<X.length;Ze++)Je=me(Q,X[Ze],we),Je!==null&&($=v(Je,$,Ze),Qe===null?Ke=Je:Qe.sibling=Je,Qe=Je);return Rt&&Xo(Q,Ze),Ke}for(Je=c(Q,Je);Ze<X.length;Ze++)sn=Ae(Je,Q,Ze,X[Ze],we),sn!==null&&(t&&sn.alternate!==null&&Je.delete(sn.key===null?Ze:sn.key),$=v(sn,$,Ze),Qe===null?Ke=sn:Qe.sibling=sn,Qe=sn);return t&&Je.forEach(function(bo){return i(Q,bo)}),Rt&&Xo(Q,Ze),Ke}function Be(Q,$,X,we){var Ke=re(X);if(typeof Ke!="function")throw Error(r(150));if(X=Ke.call(X),X==null)throw Error(r(151));for(var Qe=Ke=null,Je=$,Ze=$=0,sn=null,gt=X.next();Je!==null&&!gt.done;Ze++,gt=X.next()){Je.index>Ze?(sn=Je,Je=null):sn=Je.sibling;var bo=ae(Q,Je,gt.value,we);if(bo===null){Je===null&&(Je=sn);break}t&&Je&&bo.alternate===null&&i(Q,Je),$=v(bo,$,Ze),Qe===null?Ke=bo:Qe.sibling=bo,Qe=bo,Je=sn}if(gt.done)return s(Q,Je),Rt&&Xo(Q,Ze),Ke;if(Je===null){for(;!gt.done;Ze++,gt=X.next())gt=me(Q,gt.value,we),gt!==null&&($=v(gt,$,Ze),Qe===null?Ke=gt:Qe.sibling=gt,Qe=gt);return Rt&&Xo(Q,Ze),Ke}for(Je=c(Q,Je);!gt.done;Ze++,gt=X.next())gt=Ae(Je,Q,Ze,gt.value,we),gt!==null&&(t&&gt.alternate!==null&&Je.delete(gt.key===null?Ze:gt.key),$=v(gt,$,Ze),Qe===null?Ke=gt:Qe.sibling=gt,Qe=gt);return t&&Je.forEach(function(Ob){return i(Q,Ob)}),Rt&&Xo(Q,Ze),Ke}function $t(Q,$,X,we){if(typeof X=="object"&&X!==null&&X.type===he&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case Ee:e:{for(var Ke=X.key,Qe=$;Qe!==null;){if(Qe.key===Ke){if(Ke=X.type,Ke===he){if(Qe.tag===7){s(Q,Qe.sibling),$=p(Qe,X.props.children),$.return=Q,Q=$;break e}}else if(Qe.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===ke&&zp(Ke)===Qe.type){s(Q,Qe.sibling),$=p(Qe,X.props),$.ref=oa(Q,Qe,X),$.return=Q,Q=$;break e}s(Q,Qe);break}else i(Q,Qe);Qe=Qe.sibling}X.type===he?($=ss(X.props.children,Q.mode,we,X.key),$.return=Q,Q=$):(we=hc(X.type,X.key,X.props,null,Q.mode,we),we.ref=oa(Q,$,X),we.return=Q,Q=we)}return E(Q);case ye:e:{for(Qe=X.key;$!==null;){if($.key===Qe)if($.tag===4&&$.stateNode.containerInfo===X.containerInfo&&$.stateNode.implementation===X.implementation){s(Q,$.sibling),$=p($,X.children||[]),$.return=Q,Q=$;break e}else{s(Q,$);break}else i(Q,$);$=$.sibling}$=Uf(X,Q.mode,we),$.return=Q,Q=$}return E(Q);case ke:return Qe=X._init,$t(Q,$,Qe(X._payload),we)}if(Xr(X))return Me(Q,$,X,we);if(re(X))return Be(Q,$,X,we);Ku(Q,X)}return typeof X=="string"&&X!==""||typeof X=="number"?(X=""+X,$!==null&&$.tag===6?(s(Q,$.sibling),$=p($,X),$.return=Q,Q=$):(s(Q,$),$=Mf(X,Q.mode,we),$.return=Q,Q=$),E(Q)):s(Q,$)}return $t}var Gs=Fp(!0),Bp=Fp(!1),Vu=ao(null),Wu=null,Ys=null,Hd=null;function qd(){Hd=Ys=Wu=null}function Gd(t){var i=Vu.current;Nt(Vu),t._currentValue=i}function Yd(t,i,s){for(;t!==null;){var c=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),t===s)break;t=t.return}}function Qs(t,i){Wu=t,Hd=Ys=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&i)!==0&&(Dn=!0),t.firstContext=null)}function er(t){var i=t._currentValue;if(Hd!==t)if(t={context:t,memoizedValue:i,next:null},Ys===null){if(Wu===null)throw Error(r(308));Ys=t,Wu.dependencies={lanes:0,firstContext:t}}else Ys=Ys.next=t;return i}var Zo=null;function Qd(t){Zo===null?Zo=[t]:Zo.push(t)}function $p(t,i,s,c){var p=i.interleaved;return p===null?(s.next=s,Qd(i)):(s.next=p.next,p.next=s),i.interleaved=s,_i(t,c)}function _i(t,i){t.lanes|=i;var s=t.alternate;for(s!==null&&(s.lanes|=i),s=t,t=t.return;t!==null;)t.childLanes|=i,s=t.alternate,s!==null&&(s.childLanes|=i),s=t,t=t.return;return s.tag===3?s.stateNode:null}var fo=!1;function Jd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kp(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ki(t,i){return{eventTime:t,lane:i,tag:0,payload:null,callback:null,next:null}}function ho(t,i,s){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(pt&2)!==0){var p=c.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),c.pending=i,_i(t,s)}return p=c.interleaved,p===null?(i.next=i,Qd(c)):(i.next=p.next,p.next=i),c.interleaved=i,_i(t,s)}function Hu(t,i,s){if(i=i.updateQueue,i!==null&&(i=i.shared,(s&4194240)!==0)){var c=i.lanes;c&=t.pendingLanes,s|=c,i.lanes=s,Is(t,s)}}function Vp(t,i){var s=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,s===c)){var p=null,v=null;if(s=s.firstBaseUpdate,s!==null){do{var E={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};v===null?p=v=E:v=v.next=E,s=s.next}while(s!==null);v===null?p=v=i:v=v.next=i}else p=v=i;s={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:v,shared:c.shared,effects:c.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=i:t.next=i,s.lastBaseUpdate=i}function qu(t,i,s,c){var p=t.updateQueue;fo=!1;var v=p.firstBaseUpdate,E=p.lastBaseUpdate,T=p.shared.pending;if(T!==null){p.shared.pending=null;var D=T,ee=D.next;D.next=null,E===null?v=ee:E.next=ee,E=D;var de=t.alternate;de!==null&&(de=de.updateQueue,T=de.lastBaseUpdate,T!==E&&(T===null?de.firstBaseUpdate=ee:T.next=ee,de.lastBaseUpdate=D))}if(v!==null){var me=p.baseState;E=0,de=ee=D=null,T=v;do{var ae=T.lane,Ae=T.eventTime;if((c&ae)===ae){de!==null&&(de=de.next={eventTime:Ae,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var Me=t,Be=T;switch(ae=i,Ae=s,Be.tag){case 1:if(Me=Be.payload,typeof Me=="function"){me=Me.call(Ae,me,ae);break e}me=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=Be.payload,ae=typeof Me=="function"?Me.call(Ae,me,ae):Me,ae==null)break e;me=le({},me,ae);break e;case 2:fo=!0}}T.callback!==null&&T.lane!==0&&(t.flags|=64,ae=p.effects,ae===null?p.effects=[T]:ae.push(T))}else Ae={eventTime:Ae,lane:ae,tag:T.tag,payload:T.payload,callback:T.callback,next:null},de===null?(ee=de=Ae,D=me):de=de.next=Ae,E|=ae;if(T=T.next,T===null){if(T=p.shared.pending,T===null)break;ae=T,T=ae.next,ae.next=null,p.lastBaseUpdate=ae,p.shared.pending=null}}while(!0);if(de===null&&(D=me),p.baseState=D,p.firstBaseUpdate=ee,p.lastBaseUpdate=de,i=p.shared.interleaved,i!==null){p=i;do E|=p.lane,p=p.next;while(p!==i)}else v===null&&(p.shared.lanes=0);ns|=E,t.lanes=E,t.memoizedState=me}}function Wp(t,i,s){if(t=i.effects,i.effects=null,t!==null)for(i=0;i<t.length;i++){var c=t[i],p=c.callback;if(p!==null){if(c.callback=null,c=s,typeof p!="function")throw Error(r(191,p));p.call(c)}}}var sa={},$r=ao(sa),la=ao(sa),aa=ao(sa);function es(t){if(t===sa)throw Error(r(174));return t}function Xd(t,i){switch(Tt(aa,i),Tt(la,t),Tt($r,sa),t=i.nodeType,t){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:dr(null,"");break;default:t=t===8?i.parentNode:i,i=t.namespaceURI||null,t=t.tagName,i=dr(i,t)}Nt($r),Tt($r,i)}function Js(){Nt($r),Nt(la),Nt(aa)}function Hp(t){es(aa.current);var i=es($r.current),s=dr(i,t.type);i!==s&&(Tt(la,t),Tt($r,s))}function Zd(t){la.current===t&&(Nt($r),Nt(la))}var zt=ao(0);function Gu(t){for(var i=t;i!==null;){if(i.tag===13){var s=i.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ef=[];function tf(){for(var t=0;t<ef.length;t++)ef[t]._workInProgressVersionPrimary=null;ef.length=0}var Yu=G.ReactCurrentDispatcher,nf=G.ReactCurrentBatchConfig,ts=0,Ft=null,Gt=null,rn=null,Qu=!1,ua=!1,ca=0,Qw=0;function _n(){throw Error(r(321))}function rf(t,i){if(i===null)return!1;for(var s=0;s<i.length&&s<t.length;s++)if(!V(t[s],i[s]))return!1;return!0}function of(t,i,s,c,p,v){if(ts=v,Ft=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Yu.current=t===null||t.memoizedState===null?eb:tb,t=s(c,p),ua){v=0;do{if(ua=!1,ca=0,25<=v)throw Error(r(301));v+=1,rn=Gt=null,i.updateQueue=null,Yu.current=nb,t=s(c,p)}while(ua)}if(Yu.current=Zu,i=Gt!==null&&Gt.next!==null,ts=0,rn=Gt=Ft=null,Qu=!1,i)throw Error(r(300));return t}function sf(){var t=ca!==0;return ca=0,t}function Kr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?Ft.memoizedState=rn=t:rn=rn.next=t,rn}function tr(){if(Gt===null){var t=Ft.alternate;t=t!==null?t.memoizedState:null}else t=Gt.next;var i=rn===null?Ft.memoizedState:rn.next;if(i!==null)rn=i,Gt=t;else{if(t===null)throw Error(r(310));Gt=t,t={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},rn===null?Ft.memoizedState=rn=t:rn=rn.next=t}return rn}function da(t,i){return typeof i=="function"?i(t):i}function lf(t){var i=tr(),s=i.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=t;var c=Gt,p=c.baseQueue,v=s.pending;if(v!==null){if(p!==null){var E=p.next;p.next=v.next,v.next=E}c.baseQueue=p=v,s.pending=null}if(p!==null){v=p.next,c=c.baseState;var T=E=null,D=null,ee=v;do{var de=ee.lane;if((ts&de)===de)D!==null&&(D=D.next={lane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),c=ee.hasEagerState?ee.eagerState:t(c,ee.action);else{var me={lane:de,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null};D===null?(T=D=me,E=c):D=D.next=me,Ft.lanes|=de,ns|=de}ee=ee.next}while(ee!==null&&ee!==v);D===null?E=c:D.next=T,V(c,i.memoizedState)||(Dn=!0),i.memoizedState=c,i.baseState=E,i.baseQueue=D,s.lastRenderedState=c}if(t=s.interleaved,t!==null){p=t;do v=p.lane,Ft.lanes|=v,ns|=v,p=p.next;while(p!==t)}else p===null&&(s.lanes=0);return[i.memoizedState,s.dispatch]}function af(t){var i=tr(),s=i.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=t;var c=s.dispatch,p=s.pending,v=i.memoizedState;if(p!==null){s.pending=null;var E=p=p.next;do v=t(v,E.action),E=E.next;while(E!==p);V(v,i.memoizedState)||(Dn=!0),i.memoizedState=v,i.baseQueue===null&&(i.baseState=v),s.lastRenderedState=v}return[v,c]}function qp(){}function Gp(t,i){var s=Ft,c=tr(),p=i(),v=!V(c.memoizedState,p);if(v&&(c.memoizedState=p,Dn=!0),c=c.queue,uf(Jp.bind(null,s,c,t),[t]),c.getSnapshot!==i||v||rn!==null&&rn.memoizedState.tag&1){if(s.flags|=2048,fa(9,Qp.bind(null,s,c,p,i),void 0,null),on===null)throw Error(r(349));(ts&30)!==0||Yp(s,i,p)}return p}function Yp(t,i,s){t.flags|=16384,t={getSnapshot:i,value:s},i=Ft.updateQueue,i===null?(i={lastEffect:null,stores:null},Ft.updateQueue=i,i.stores=[t]):(s=i.stores,s===null?i.stores=[t]:s.push(t))}function Qp(t,i,s,c){i.value=s,i.getSnapshot=c,Xp(i)&&Zp(t)}function Jp(t,i,s){return s(function(){Xp(i)&&Zp(t)})}function Xp(t){var i=t.getSnapshot;t=t.value;try{var s=i();return!V(t,s)}catch{return!0}}function Zp(t){var i=_i(t,1);i!==null&&Er(i,t,1,-1)}function em(t){var i=Kr();return typeof t=="function"&&(t=t()),i.memoizedState=i.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:t},i.queue=t,t=t.dispatch=Zw.bind(null,Ft,t),[i.memoizedState,t]}function fa(t,i,s,c){return t={tag:t,create:i,destroy:s,deps:c,next:null},i=Ft.updateQueue,i===null?(i={lastEffect:null,stores:null},Ft.updateQueue=i,i.lastEffect=t.next=t):(s=i.lastEffect,s===null?i.lastEffect=t.next=t:(c=s.next,s.next=t,t.next=c,i.lastEffect=t)),t}function tm(){return tr().memoizedState}function Ju(t,i,s,c){var p=Kr();Ft.flags|=t,p.memoizedState=fa(1|i,s,void 0,c===void 0?null:c)}function Xu(t,i,s,c){var p=tr();c=c===void 0?null:c;var v=void 0;if(Gt!==null){var E=Gt.memoizedState;if(v=E.destroy,c!==null&&rf(c,E.deps)){p.memoizedState=fa(i,s,v,c);return}}Ft.flags|=t,p.memoizedState=fa(1|i,s,v,c)}function nm(t,i){return Ju(8390656,8,t,i)}function uf(t,i){return Xu(2048,8,t,i)}function rm(t,i){return Xu(4,2,t,i)}function im(t,i){return Xu(4,4,t,i)}function om(t,i){if(typeof i=="function")return t=t(),i(t),function(){i(null)};if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function sm(t,i,s){return s=s!=null?s.concat([t]):null,Xu(4,4,om.bind(null,i,t),s)}function cf(){}function lm(t,i){var s=tr();i=i===void 0?null:i;var c=s.memoizedState;return c!==null&&i!==null&&rf(i,c[1])?c[0]:(s.memoizedState=[t,i],t)}function am(t,i){var s=tr();i=i===void 0?null:i;var c=s.memoizedState;return c!==null&&i!==null&&rf(i,c[1])?c[0]:(t=t(),s.memoizedState=[t,i],t)}function um(t,i,s){return(ts&21)===0?(t.baseState&&(t.baseState=!1,Dn=!0),t.memoizedState=s):(V(s,i)||(s=ui(),Ft.lanes|=s,ns|=s,t.baseState=!0),i)}function Jw(t,i){var s=ht;ht=s!==0&&4>s?s:4,t(!0);var c=nf.transition;nf.transition={};try{t(!1),i()}finally{ht=s,nf.transition=c}}function cm(){return tr().memoizedState}function Xw(t,i,s){var c=go(t);if(s={lane:c,action:s,hasEagerState:!1,eagerState:null,next:null},dm(t))fm(i,s);else if(s=$p(t,i,s,c),s!==null){var p=Pn();Er(s,t,c,p),hm(s,i,c)}}function Zw(t,i,s){var c=go(t),p={lane:c,action:s,hasEagerState:!1,eagerState:null,next:null};if(dm(t))fm(i,p);else{var v=t.alternate;if(t.lanes===0&&(v===null||v.lanes===0)&&(v=i.lastRenderedReducer,v!==null))try{var E=i.lastRenderedState,T=v(E,s);if(p.hasEagerState=!0,p.eagerState=T,V(T,E)){var D=i.interleaved;D===null?(p.next=p,Qd(i)):(p.next=D.next,D.next=p),i.interleaved=p;return}}catch{}finally{}s=$p(t,i,p,c),s!==null&&(p=Pn(),Er(s,t,c,p),hm(s,i,c))}}function dm(t){var i=t.alternate;return t===Ft||i!==null&&i===Ft}function fm(t,i){ua=Qu=!0;var s=t.pending;s===null?i.next=i:(i.next=s.next,s.next=i),t.pending=i}function hm(t,i,s){if((s&4194240)!==0){var c=i.lanes;c&=t.pendingLanes,s|=c,i.lanes=s,Is(t,s)}}var Zu={readContext:er,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useInsertionEffect:_n,useLayoutEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useMutableSource:_n,useSyncExternalStore:_n,useId:_n,unstable_isNewReconciler:!1},eb={readContext:er,useCallback:function(t,i){return Kr().memoizedState=[t,i===void 0?null:i],t},useContext:er,useEffect:nm,useImperativeHandle:function(t,i,s){return s=s!=null?s.concat([t]):null,Ju(4194308,4,om.bind(null,i,t),s)},useLayoutEffect:function(t,i){return Ju(4194308,4,t,i)},useInsertionEffect:function(t,i){return Ju(4,2,t,i)},useMemo:function(t,i){var s=Kr();return i=i===void 0?null:i,t=t(),s.memoizedState=[t,i],t},useReducer:function(t,i,s){var c=Kr();return i=s!==void 0?s(i):i,c.memoizedState=c.baseState=i,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},c.queue=t,t=t.dispatch=Xw.bind(null,Ft,t),[c.memoizedState,t]},useRef:function(t){var i=Kr();return t={current:t},i.memoizedState=t},useState:em,useDebugValue:cf,useDeferredValue:function(t){return Kr().memoizedState=t},useTransition:function(){var t=em(!1),i=t[0];return t=Jw.bind(null,t[1]),Kr().memoizedState=t,[i,t]},useMutableSource:function(){},useSyncExternalStore:function(t,i,s){var c=Ft,p=Kr();if(Rt){if(s===void 0)throw Error(r(407));s=s()}else{if(s=i(),on===null)throw Error(r(349));(ts&30)!==0||Yp(c,i,s)}p.memoizedState=s;var v={value:s,getSnapshot:i};return p.queue=v,nm(Jp.bind(null,c,v,t),[t]),c.flags|=2048,fa(9,Qp.bind(null,c,v,s,i),void 0,null),s},useId:function(){var t=Kr(),i=on.identifierPrefix;if(Rt){var s=bi,c=wi;s=(c&~(1<<32-Xe(c)-1)).toString(32)+s,i=":"+i+"R"+s,s=ca++,0<s&&(i+="H"+s.toString(32)),i+=":"}else s=Qw++,i=":"+i+"r"+s.toString(32)+":";return t.memoizedState=i},unstable_isNewReconciler:!1},tb={readContext:er,useCallback:lm,useContext:er,useEffect:uf,useImperativeHandle:sm,useInsertionEffect:rm,useLayoutEffect:im,useMemo:am,useReducer:lf,useRef:tm,useState:function(){return lf(da)},useDebugValue:cf,useDeferredValue:function(t){var i=tr();return um(i,Gt.memoizedState,t)},useTransition:function(){var t=lf(da)[0],i=tr().memoizedState;return[t,i]},useMutableSource:qp,useSyncExternalStore:Gp,useId:cm,unstable_isNewReconciler:!1},nb={readContext:er,useCallback:lm,useContext:er,useEffect:uf,useImperativeHandle:sm,useInsertionEffect:rm,useLayoutEffect:im,useMemo:am,useReducer:af,useRef:tm,useState:function(){return af(da)},useDebugValue:cf,useDeferredValue:function(t){var i=tr();return Gt===null?i.memoizedState=t:um(i,Gt.memoizedState,t)},useTransition:function(){var t=af(da)[0],i=tr().memoizedState;return[t,i]},useMutableSource:qp,useSyncExternalStore:Gp,useId:cm,unstable_isNewReconciler:!1};function kr(t,i){if(t&&t.defaultProps){i=le({},i),t=t.defaultProps;for(var s in t)i[s]===void 0&&(i[s]=t[s]);return i}return i}function df(t,i,s,c){i=t.memoizedState,s=s(c,i),s=s==null?i:le({},i,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var ec={isMounted:function(t){return(t=t._reactInternals)?wn(t)===t:!1},enqueueSetState:function(t,i,s){t=t._reactInternals;var c=Pn(),p=go(t),v=ki(c,p);v.payload=i,s!=null&&(v.callback=s),i=ho(t,v,p),i!==null&&(Er(i,t,p,c),Hu(i,t,p))},enqueueReplaceState:function(t,i,s){t=t._reactInternals;var c=Pn(),p=go(t),v=ki(c,p);v.tag=1,v.payload=i,s!=null&&(v.callback=s),i=ho(t,v,p),i!==null&&(Er(i,t,p,c),Hu(i,t,p))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var s=Pn(),c=go(t),p=ki(s,c);p.tag=2,i!=null&&(p.callback=i),i=ho(t,p,c),i!==null&&(Er(i,t,c,s),Hu(i,t,c))}};function pm(t,i,s,c,p,v,E){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,v,E):i.prototype&&i.prototype.isPureReactComponent?!L(s,c)||!L(p,v):!0}function mm(t,i,s){var c=!1,p=uo,v=i.contextType;return typeof v=="object"&&v!==null?v=er(v):(p=An(i)?Qo:bn.current,c=i.contextTypes,v=(c=c!=null)?Vs(t,p):uo),i=new i(s,v),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=ec,t.stateNode=i,i._reactInternals=t,c&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=p,t.__reactInternalMemoizedMaskedChildContext=v),i}function ym(t,i,s,c){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(s,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(s,c),i.state!==t&&ec.enqueueReplaceState(i,i.state,null)}function ff(t,i,s,c){var p=t.stateNode;p.props=s,p.state=t.memoizedState,p.refs={},Jd(t);var v=i.contextType;typeof v=="object"&&v!==null?p.context=er(v):(v=An(i)?Qo:bn.current,p.context=Vs(t,v)),p.state=t.memoizedState,v=i.getDerivedStateFromProps,typeof v=="function"&&(df(t,i,v,s),p.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(i=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),i!==p.state&&ec.enqueueReplaceState(p,p.state,null),qu(t,s,p,c),p.state=t.memoizedState),typeof p.componentDidMount=="function"&&(t.flags|=4194308)}function Xs(t,i){try{var s="",c=i;do s+=Ge(c),c=c.return;while(c);var p=s}catch(v){p=`
Error generating stack: `+v.message+`
`+v.stack}return{value:t,source:i,stack:p,digest:null}}function hf(t,i,s){return{value:t,source:null,stack:s??null,digest:i??null}}function pf(t,i){try{console.error(i.value)}catch(s){setTimeout(function(){throw s})}}var rb=typeof WeakMap=="function"?WeakMap:Map;function gm(t,i,s){s=ki(-1,s),s.tag=3,s.payload={element:null};var c=i.value;return s.callback=function(){lc||(lc=!0,jf=c),pf(t,i)},s}function vm(t,i,s){s=ki(-1,s),s.tag=3;var c=t.type.getDerivedStateFromError;if(typeof c=="function"){var p=i.value;s.payload=function(){return c(p)},s.callback=function(){pf(t,i)}}var v=t.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(s.callback=function(){pf(t,i),typeof c!="function"&&(mo===null?mo=new Set([this]):mo.add(this));var E=i.stack;this.componentDidCatch(i.value,{componentStack:E!==null?E:""})}),s}function wm(t,i,s){var c=t.pingCache;if(c===null){c=t.pingCache=new rb;var p=new Set;c.set(i,p)}else p=c.get(i),p===void 0&&(p=new Set,c.set(i,p));p.has(s)||(p.add(s),t=gb.bind(null,t,i,s),i.then(t,t))}function bm(t){do{var i;if((i=t.tag===13)&&(i=t.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return t;t=t.return}while(t!==null);return null}function _m(t,i,s,c,p){return(t.mode&1)===0?(t===i?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(i=ki(-1,1),i.tag=2,ho(s,i,1))),s.lanes|=1),t):(t.flags|=65536,t.lanes=p,t)}var ib=G.ReactCurrentOwner,Dn=!1;function Tn(t,i,s,c){i.child=t===null?Bp(i,null,s,c):Gs(i,t.child,s,c)}function km(t,i,s,c,p){s=s.render;var v=i.ref;return Qs(i,p),c=of(t,i,s,c,v,p),s=sf(),t!==null&&!Dn?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~p,xi(t,i,p)):(Rt&&s&&Bd(i),i.flags|=1,Tn(t,i,c,p),i.child)}function xm(t,i,s,c,p){if(t===null){var v=s.type;return typeof v=="function"&&!Lf(v)&&v.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(i.tag=15,i.type=v,Sm(t,i,v,c,p)):(t=hc(s.type,null,c,i,i.mode,p),t.ref=i.ref,t.return=i,i.child=t)}if(v=t.child,(t.lanes&p)===0){var E=v.memoizedProps;if(s=s.compare,s=s!==null?s:L,s(E,c)&&t.ref===i.ref)return xi(t,i,p)}return i.flags|=1,t=wo(v,c),t.ref=i.ref,t.return=i,i.child=t}function Sm(t,i,s,c,p){if(t!==null){var v=t.memoizedProps;if(L(v,c)&&t.ref===i.ref)if(Dn=!1,i.pendingProps=c=v,(t.lanes&p)!==0)(t.flags&131072)!==0&&(Dn=!0);else return i.lanes=t.lanes,xi(t,i,p)}return mf(t,i,s,c,p)}function Em(t,i,s){var c=i.pendingProps,p=c.children,v=t!==null?t.memoizedState:null;if(c.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tt(el,Vn),Vn|=s;else{if((s&1073741824)===0)return t=v!==null?v.baseLanes|s:s,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:t,cachePool:null,transitions:null},i.updateQueue=null,Tt(el,Vn),Vn|=t,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=v!==null?v.baseLanes:s,Tt(el,Vn),Vn|=c}else v!==null?(c=v.baseLanes|s,i.memoizedState=null):c=s,Tt(el,Vn),Vn|=c;return Tn(t,i,p,s),i.child}function Cm(t,i){var s=i.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(i.flags|=512,i.flags|=2097152)}function mf(t,i,s,c,p){var v=An(s)?Qo:bn.current;return v=Vs(i,v),Qs(i,p),s=of(t,i,s,c,v,p),c=sf(),t!==null&&!Dn?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~p,xi(t,i,p)):(Rt&&c&&Bd(i),i.flags|=1,Tn(t,i,s,p),i.child)}function Im(t,i,s,c,p){if(An(s)){var v=!0;Uu(i)}else v=!1;if(Qs(i,p),i.stateNode===null)nc(t,i),mm(i,s,c),ff(i,s,c,p),c=!0;else if(t===null){var E=i.stateNode,T=i.memoizedProps;E.props=T;var D=E.context,ee=s.contextType;typeof ee=="object"&&ee!==null?ee=er(ee):(ee=An(s)?Qo:bn.current,ee=Vs(i,ee));var de=s.getDerivedStateFromProps,me=typeof de=="function"||typeof E.getSnapshotBeforeUpdate=="function";me||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(T!==c||D!==ee)&&ym(i,E,c,ee),fo=!1;var ae=i.memoizedState;E.state=ae,qu(i,c,E,p),D=i.memoizedState,T!==c||ae!==D||Nn.current||fo?(typeof de=="function"&&(df(i,s,de,c),D=i.memoizedState),(T=fo||pm(i,s,T,c,ae,D,ee))?(me||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(i.flags|=4194308)):(typeof E.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=D),E.props=c,E.state=D,E.context=ee,c=T):(typeof E.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{E=i.stateNode,Kp(t,i),T=i.memoizedProps,ee=i.type===i.elementType?T:kr(i.type,T),E.props=ee,me=i.pendingProps,ae=E.context,D=s.contextType,typeof D=="object"&&D!==null?D=er(D):(D=An(s)?Qo:bn.current,D=Vs(i,D));var Ae=s.getDerivedStateFromProps;(de=typeof Ae=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(T!==me||ae!==D)&&ym(i,E,c,D),fo=!1,ae=i.memoizedState,E.state=ae,qu(i,c,E,p);var Me=i.memoizedState;T!==me||ae!==Me||Nn.current||fo?(typeof Ae=="function"&&(df(i,s,Ae,c),Me=i.memoizedState),(ee=fo||pm(i,s,ee,c,ae,Me,D)||!1)?(de||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(c,Me,D),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(c,Me,D)),typeof E.componentDidUpdate=="function"&&(i.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof E.componentDidUpdate!="function"||T===t.memoizedProps&&ae===t.memoizedState||(i.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&ae===t.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=Me),E.props=c,E.state=Me,E.context=D,c=ee):(typeof E.componentDidUpdate!="function"||T===t.memoizedProps&&ae===t.memoizedState||(i.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&ae===t.memoizedState||(i.flags|=1024),c=!1)}return yf(t,i,s,c,v,p)}function yf(t,i,s,c,p,v){Cm(t,i);var E=(i.flags&128)!==0;if(!c&&!E)return p&&Np(i,s,!1),xi(t,i,v);c=i.stateNode,ib.current=i;var T=E&&typeof s.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,t!==null&&E?(i.child=Gs(i,t.child,null,v),i.child=Gs(i,null,T,v)):Tn(t,i,T,v),i.memoizedState=c.state,p&&Np(i,s,!0),i.child}function Om(t){var i=t.stateNode;i.pendingContext?Tp(t,i.pendingContext,i.pendingContext!==i.context):i.context&&Tp(t,i.context,!1),Xd(t,i.containerInfo)}function jm(t,i,s,c,p){return qs(),Wd(p),i.flags|=256,Tn(t,i,s,c),i.child}var gf={dehydrated:null,treeContext:null,retryLane:0};function vf(t){return{baseLanes:t,cachePool:null,transitions:null}}function Tm(t,i,s){var c=i.pendingProps,p=zt.current,v=!1,E=(i.flags&128)!==0,T;if((T=E)||(T=t!==null&&t.memoizedState===null?!1:(p&2)!==0),T?(v=!0,i.flags&=-129):(t===null||t.memoizedState!==null)&&(p|=1),Tt(zt,p&1),t===null)return Vd(i),t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((i.mode&1)===0?i.lanes=1:t.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(E=c.children,t=c.fallback,v?(c=i.mode,v=i.child,E={mode:"hidden",children:E},(c&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=E):v=pc(E,c,0,null),t=ss(t,c,s,null),v.return=i,t.return=i,v.sibling=t,i.child=v,i.child.memoizedState=vf(s),i.memoizedState=gf,t):wf(i,E));if(p=t.memoizedState,p!==null&&(T=p.dehydrated,T!==null))return ob(t,i,E,c,T,p,s);if(v){v=c.fallback,E=i.mode,p=t.child,T=p.sibling;var D={mode:"hidden",children:c.children};return(E&1)===0&&i.child!==p?(c=i.child,c.childLanes=0,c.pendingProps=D,i.deletions=null):(c=wo(p,D),c.subtreeFlags=p.subtreeFlags&14680064),T!==null?v=wo(T,v):(v=ss(v,E,s,null),v.flags|=2),v.return=i,c.return=i,c.sibling=v,i.child=c,c=v,v=i.child,E=t.child.memoizedState,E=E===null?vf(s):{baseLanes:E.baseLanes|s,cachePool:null,transitions:E.transitions},v.memoizedState=E,v.childLanes=t.childLanes&~s,i.memoizedState=gf,c}return v=t.child,t=v.sibling,c=wo(v,{mode:"visible",children:c.children}),(i.mode&1)===0&&(c.lanes=s),c.return=i,c.sibling=null,t!==null&&(s=i.deletions,s===null?(i.deletions=[t],i.flags|=16):s.push(t)),i.child=c,i.memoizedState=null,c}function wf(t,i){return i=pc({mode:"visible",children:i},t.mode,0,null),i.return=t,t.child=i}function tc(t,i,s,c){return c!==null&&Wd(c),Gs(i,t.child,null,s),t=wf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function ob(t,i,s,c,p,v,E){if(s)return i.flags&256?(i.flags&=-257,c=hf(Error(r(422))),tc(t,i,E,c)):i.memoizedState!==null?(i.child=t.child,i.flags|=128,null):(v=c.fallback,p=i.mode,c=pc({mode:"visible",children:c.children},p,0,null),v=ss(v,p,E,null),v.flags|=2,c.return=i,v.return=i,c.sibling=v,i.child=c,(i.mode&1)!==0&&Gs(i,t.child,null,E),i.child.memoizedState=vf(E),i.memoizedState=gf,v);if((i.mode&1)===0)return tc(t,i,E,null);if(p.data==="$!"){if(c=p.nextSibling&&p.nextSibling.dataset,c)var T=c.dgst;return c=T,v=Error(r(419)),c=hf(v,c,void 0),tc(t,i,E,c)}if(T=(E&t.childLanes)!==0,Dn||T){if(c=on,c!==null){switch(E&-E){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(c.suspendedLanes|E))!==0?0:p,p!==0&&p!==v.retryLane&&(v.retryLane=p,_i(t,p),Er(c,t,p,-1))}return Rf(),c=hf(Error(r(421))),tc(t,i,E,c)}return p.data==="$?"?(i.flags|=128,i.child=t.child,i=vb.bind(null,t),p._reactRetry=i,null):(t=v.treeContext,Kn=lo(p.nextSibling),$n=i,Rt=!0,_r=null,t!==null&&(Xn[Zn++]=wi,Xn[Zn++]=bi,Xn[Zn++]=Jo,wi=t.id,bi=t.overflow,Jo=i),i=wf(i,c.children),i.flags|=4096,i)}function Pm(t,i,s){t.lanes|=i;var c=t.alternate;c!==null&&(c.lanes|=i),Yd(t.return,i,s)}function bf(t,i,s,c,p){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:s,tailMode:p}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=s,v.tailMode=p)}function Nm(t,i,s){var c=i.pendingProps,p=c.revealOrder,v=c.tail;if(Tn(t,i,c.children,s),c=zt.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Pm(t,s,i);else if(t.tag===19)Pm(t,s,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}c&=1}if(Tt(zt,c),(i.mode&1)===0)i.memoizedState=null;else switch(p){case"forwards":for(s=i.child,p=null;s!==null;)t=s.alternate,t!==null&&Gu(t)===null&&(p=s),s=s.sibling;s=p,s===null?(p=i.child,i.child=null):(p=s.sibling,s.sibling=null),bf(i,!1,p,s,v);break;case"backwards":for(s=null,p=i.child,i.child=null;p!==null;){if(t=p.alternate,t!==null&&Gu(t)===null){i.child=p;break}t=p.sibling,p.sibling=s,s=p,p=t}bf(i,!0,s,null,v);break;case"together":bf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function nc(t,i){(i.mode&1)===0&&t!==null&&(t.alternate=null,i.alternate=null,i.flags|=2)}function xi(t,i,s){if(t!==null&&(i.dependencies=t.dependencies),ns|=i.lanes,(s&i.childLanes)===0)return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,s=wo(t,t.pendingProps),i.child=s,s.return=i;t.sibling!==null;)t=t.sibling,s=s.sibling=wo(t,t.pendingProps),s.return=i;s.sibling=null}return i.child}function sb(t,i,s){switch(i.tag){case 3:Om(i),qs();break;case 5:Hp(i);break;case 1:An(i.type)&&Uu(i);break;case 4:Xd(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,p=i.memoizedProps.value;Tt(Vu,c._currentValue),c._currentValue=p;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(Tt(zt,zt.current&1),i.flags|=128,null):(s&i.child.childLanes)!==0?Tm(t,i,s):(Tt(zt,zt.current&1),t=xi(t,i,s),t!==null?t.sibling:null);Tt(zt,zt.current&1);break;case 19:if(c=(s&i.childLanes)!==0,(t.flags&128)!==0){if(c)return Nm(t,i,s);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Tt(zt,zt.current),c)break;return null;case 22:case 23:return i.lanes=0,Em(t,i,s)}return xi(t,i,s)}var Am,_f,Dm,Rm;Am=function(t,i){for(var s=i.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},_f=function(){},Dm=function(t,i,s,c){var p=t.memoizedProps;if(p!==c){t=i.stateNode,es($r.current);var v=null;switch(s){case"input":p=ct(t,p),c=ct(t,c),v=[];break;case"select":p=le({},p,{value:void 0}),c=le({},c,{value:void 0}),v=[];break;case"textarea":p=bs(t,p),c=bs(t,c),v=[];break;default:typeof p.onClick!="function"&&typeof c.onClick=="function"&&(t.onclick=Ru)}Fe(s,c);var E;s=null;for(ee in p)if(!c.hasOwnProperty(ee)&&p.hasOwnProperty(ee)&&p[ee]!=null)if(ee==="style"){var T=p[ee];for(E in T)T.hasOwnProperty(E)&&(s||(s={}),s[E]="")}else ee!=="dangerouslySetInnerHTML"&&ee!=="children"&&ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&ee!=="autoFocus"&&(l.hasOwnProperty(ee)?v||(v=[]):(v=v||[]).push(ee,null));for(ee in c){var D=c[ee];if(T=p!=null?p[ee]:void 0,c.hasOwnProperty(ee)&&D!==T&&(D!=null||T!=null))if(ee==="style")if(T){for(E in T)!T.hasOwnProperty(E)||D&&D.hasOwnProperty(E)||(s||(s={}),s[E]="");for(E in D)D.hasOwnProperty(E)&&T[E]!==D[E]&&(s||(s={}),s[E]=D[E])}else s||(v||(v=[]),v.push(ee,s)),s=D;else ee==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,T=T?T.__html:void 0,D!=null&&T!==D&&(v=v||[]).push(ee,D)):ee==="children"?typeof D!="string"&&typeof D!="number"||(v=v||[]).push(ee,""+D):ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&(l.hasOwnProperty(ee)?(D!=null&&ee==="onScroll"&&Pt("scroll",t),v||T===D||(v=[])):(v=v||[]).push(ee,D))}s&&(v=v||[]).push("style",s);var ee=v;(i.updateQueue=ee)&&(i.flags|=4)}},Rm=function(t,i,s,c){s!==c&&(i.flags|=4)};function ha(t,i){if(!Rt)switch(t.tailMode){case"hidden":i=t.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function kn(t){var i=t.alternate!==null&&t.alternate.child===t.child,s=0,c=0;if(i)for(var p=t.child;p!==null;)s|=p.lanes|p.childLanes,c|=p.subtreeFlags&14680064,c|=p.flags&14680064,p.return=t,p=p.sibling;else for(p=t.child;p!==null;)s|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=t,p=p.sibling;return t.subtreeFlags|=c,t.childLanes=s,i}function lb(t,i,s){var c=i.pendingProps;switch($d(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kn(i),null;case 1:return An(i.type)&&Mu(),kn(i),null;case 3:return c=i.stateNode,Js(),Nt(Nn),Nt(bn),tf(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(t===null||t.child===null)&&($u(i)?i.flags|=4:t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,_r!==null&&(Nf(_r),_r=null))),_f(t,i),kn(i),null;case 5:Zd(i);var p=es(aa.current);if(s=i.type,t!==null&&i.stateNode!=null)Dm(t,i,s,c,p),t.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(r(166));return kn(i),null}if(t=es($r.current),$u(i)){c=i.stateNode,s=i.type;var v=i.memoizedProps;switch(c[Br]=i,c[ra]=v,t=(i.mode&1)!==0,s){case"dialog":Pt("cancel",c),Pt("close",c);break;case"iframe":case"object":case"embed":Pt("load",c);break;case"video":case"audio":for(p=0;p<ea.length;p++)Pt(ea[p],c);break;case"source":Pt("error",c);break;case"img":case"image":case"link":Pt("error",c),Pt("load",c);break;case"details":Pt("toggle",c);break;case"input":vt(c,v),Pt("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!v.multiple},Pt("invalid",c);break;case"textarea":zi(c,v),Pt("invalid",c)}Fe(s,v),p=null;for(var E in v)if(v.hasOwnProperty(E)){var T=v[E];E==="children"?typeof T=="string"?c.textContent!==T&&(v.suppressHydrationWarning!==!0&&Du(c.textContent,T,t),p=["children",T]):typeof T=="number"&&c.textContent!==""+T&&(v.suppressHydrationWarning!==!0&&Du(c.textContent,T,t),p=["children",""+T]):l.hasOwnProperty(E)&&T!=null&&E==="onScroll"&&Pt("scroll",c)}switch(s){case"input":It(c),Fn(c,v,!0);break;case"textarea":It(c),Fi(c);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(c.onclick=Ru)}c=p,i.updateQueue=c,c!==null&&(i.flags|=4)}else{E=p.nodeType===9?p:p.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vn(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=E.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof c.is=="string"?t=E.createElement(s,{is:c.is}):(t=E.createElement(s),s==="select"&&(E=t,c.multiple?E.multiple=!0:c.size&&(E.size=c.size))):t=E.createElementNS(t,s),t[Br]=i,t[ra]=c,Am(t,i,!1,!1),i.stateNode=t;e:{switch(E=ti(s,c),s){case"dialog":Pt("cancel",t),Pt("close",t),p=c;break;case"iframe":case"object":case"embed":Pt("load",t),p=c;break;case"video":case"audio":for(p=0;p<ea.length;p++)Pt(ea[p],t);p=c;break;case"source":Pt("error",t),p=c;break;case"img":case"image":case"link":Pt("error",t),Pt("load",t),p=c;break;case"details":Pt("toggle",t),p=c;break;case"input":vt(t,c),p=ct(t,c),Pt("invalid",t);break;case"option":p=c;break;case"select":t._wrapperState={wasMultiple:!!c.multiple},p=le({},c,{value:void 0}),Pt("invalid",t);break;case"textarea":zi(t,c),p=bs(t,c),Pt("invalid",t);break;default:p=c}Fe(s,p),T=p;for(v in T)if(T.hasOwnProperty(v)){var D=T[v];v==="style"?_s(t,D):v==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&$i(t,D)):v==="children"?typeof D=="string"?(s!=="textarea"||D!=="")&&Zr(t,D):typeof D=="number"&&Zr(t,""+D):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(l.hasOwnProperty(v)?D!=null&&v==="onScroll"&&Pt("scroll",t):D!=null&&fe(t,v,D,E))}switch(s){case"input":It(t),Fn(t,c,!1);break;case"textarea":It(t),Fi(t);break;case"option":c.value!=null&&t.setAttribute("value",""+Ye(c.value));break;case"select":t.multiple=!!c.multiple,v=c.value,v!=null?un(t,!!c.multiple,v,!1):c.defaultValue!=null&&un(t,!!c.multiple,c.defaultValue,!0);break;default:typeof p.onClick=="function"&&(t.onclick=Ru)}switch(s){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return kn(i),null;case 6:if(t&&i.stateNode!=null)Rm(t,i,t.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(r(166));if(s=es(aa.current),es($r.current),$u(i)){if(c=i.stateNode,s=i.memoizedProps,c[Br]=i,(v=c.nodeValue!==s)&&(t=$n,t!==null))switch(t.tag){case 3:Du(c.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Du(c.nodeValue,s,(t.mode&1)!==0)}v&&(i.flags|=4)}else c=(s.nodeType===9?s:s.ownerDocument).createTextNode(c),c[Br]=i,i.stateNode=c}return kn(i),null;case 13:if(Nt(zt),c=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Rt&&Kn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Up(),qs(),i.flags|=98560,v=!1;else if(v=$u(i),c!==null&&c.dehydrated!==null){if(t===null){if(!v)throw Error(r(318));if(v=i.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[Br]=i}else qs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;kn(i),v=!1}else _r!==null&&(Nf(_r),_r=null),v=!0;if(!v)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=s,i):(c=c!==null,c!==(t!==null&&t.memoizedState!==null)&&c&&(i.child.flags|=8192,(i.mode&1)!==0&&(t===null||(zt.current&1)!==0?Yt===0&&(Yt=3):Rf())),i.updateQueue!==null&&(i.flags|=4),kn(i),null);case 4:return Js(),_f(t,i),t===null&&ta(i.stateNode.containerInfo),kn(i),null;case 10:return Gd(i.type._context),kn(i),null;case 17:return An(i.type)&&Mu(),kn(i),null;case 19:if(Nt(zt),v=i.memoizedState,v===null)return kn(i),null;if(c=(i.flags&128)!==0,E=v.rendering,E===null)if(c)ha(v,!1);else{if(Yt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(E=Gu(t),E!==null){for(i.flags|=128,ha(v,!1),c=E.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=s,s=i.child;s!==null;)v=s,t=c,v.flags&=14680066,E=v.alternate,E===null?(v.childLanes=0,v.lanes=t,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=E.childLanes,v.lanes=E.lanes,v.child=E.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=E.memoizedProps,v.memoizedState=E.memoizedState,v.updateQueue=E.updateQueue,v.type=E.type,t=E.dependencies,v.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return Tt(zt,zt.current&1|2),i.child}t=t.sibling}v.tail!==null&&wt()>tl&&(i.flags|=128,c=!0,ha(v,!1),i.lanes=4194304)}else{if(!c)if(t=Gu(E),t!==null){if(i.flags|=128,c=!0,s=t.updateQueue,s!==null&&(i.updateQueue=s,i.flags|=4),ha(v,!0),v.tail===null&&v.tailMode==="hidden"&&!E.alternate&&!Rt)return kn(i),null}else 2*wt()-v.renderingStartTime>tl&&s!==1073741824&&(i.flags|=128,c=!0,ha(v,!1),i.lanes=4194304);v.isBackwards?(E.sibling=i.child,i.child=E):(s=v.last,s!==null?s.sibling=E:i.child=E,v.last=E)}return v.tail!==null?(i=v.tail,v.rendering=i,v.tail=i.sibling,v.renderingStartTime=wt(),i.sibling=null,s=zt.current,Tt(zt,c?s&1|2:s&1),i):(kn(i),null);case 22:case 23:return Df(),c=i.memoizedState!==null,t!==null&&t.memoizedState!==null!==c&&(i.flags|=8192),c&&(i.mode&1)!==0?(Vn&1073741824)!==0&&(kn(i),i.subtreeFlags&6&&(i.flags|=8192)):kn(i),null;case 24:return null;case 25:return null}throw Error(r(156,i.tag))}function ab(t,i){switch($d(i),i.tag){case 1:return An(i.type)&&Mu(),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Js(),Nt(Nn),Nt(bn),tf(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 5:return Zd(i),null;case 13:if(Nt(zt),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));qs()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return Nt(zt),null;case 4:return Js(),null;case 10:return Gd(i.type._context),null;case 22:case 23:return Df(),null;case 24:return null;default:return null}}var rc=!1,xn=!1,ub=typeof WeakSet=="function"?WeakSet:Set,De=null;function Zs(t,i){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(c){Bt(t,i,c)}else s.current=null}function kf(t,i,s){try{s()}catch(c){Bt(t,i,c)}}var Lm=!1;function cb(t,i){if(Ad=$o,t=U(),M(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var c=s.getSelection&&s.getSelection();if(c&&c.rangeCount!==0){s=c.anchorNode;var p=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{s.nodeType,v.nodeType}catch{s=null;break e}var E=0,T=-1,D=-1,ee=0,de=0,me=t,ae=null;t:for(;;){for(var Ae;me!==s||p!==0&&me.nodeType!==3||(T=E+p),me!==v||c!==0&&me.nodeType!==3||(D=E+c),me.nodeType===3&&(E+=me.nodeValue.length),(Ae=me.firstChild)!==null;)ae=me,me=Ae;for(;;){if(me===t)break t;if(ae===s&&++ee===p&&(T=E),ae===v&&++de===c&&(D=E),(Ae=me.nextSibling)!==null)break;me=ae,ae=me.parentNode}me=Ae}s=T===-1||D===-1?null:{start:T,end:D}}else s=null}s=s||{start:0,end:0}}else s=null;for(Dd={focusedElem:t,selectionRange:s},$o=!1,De=i;De!==null;)if(i=De,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,De=t;else for(;De!==null;){i=De;try{var Me=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Me!==null){var Be=Me.memoizedProps,$t=Me.memoizedState,Q=i.stateNode,$=Q.getSnapshotBeforeUpdate(i.elementType===i.type?Be:kr(i.type,Be),$t);Q.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var X=i.stateNode.containerInfo;X.nodeType===1?X.textContent="":X.nodeType===9&&X.documentElement&&X.removeChild(X.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(we){Bt(i,i.return,we)}if(t=i.sibling,t!==null){t.return=i.return,De=t;break}De=i.return}return Me=Lm,Lm=!1,Me}function pa(t,i,s){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var p=c=c.next;do{if((p.tag&t)===t){var v=p.destroy;p.destroy=void 0,v!==void 0&&kf(i,s,v)}p=p.next}while(p!==c)}}function ic(t,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var c=s.create;s.destroy=c()}s=s.next}while(s!==i)}}function xf(t){var i=t.ref;if(i!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof i=="function"?i(t):i.current=t}}function Mm(t){var i=t.alternate;i!==null&&(t.alternate=null,Mm(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&(delete i[Br],delete i[ra],delete i[Ud],delete i[Hw],delete i[qw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Um(t){return t.tag===5||t.tag===3||t.tag===4}function zm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Um(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Sf(t,i,s){var c=t.tag;if(c===5||c===6)t=t.stateNode,i?s.nodeType===8?s.parentNode.insertBefore(t,i):s.insertBefore(t,i):(s.nodeType===8?(i=s.parentNode,i.insertBefore(t,s)):(i=s,i.appendChild(t)),s=s._reactRootContainer,s!=null||i.onclick!==null||(i.onclick=Ru));else if(c!==4&&(t=t.child,t!==null))for(Sf(t,i,s),t=t.sibling;t!==null;)Sf(t,i,s),t=t.sibling}function Ef(t,i,s){var c=t.tag;if(c===5||c===6)t=t.stateNode,i?s.insertBefore(t,i):s.appendChild(t);else if(c!==4&&(t=t.child,t!==null))for(Ef(t,i,s),t=t.sibling;t!==null;)Ef(t,i,s),t=t.sibling}var fn=null,xr=!1;function po(t,i,s){for(s=s.child;s!==null;)Fm(t,i,s),s=s.sibling}function Fm(t,i,s){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(Lo,s)}catch{}switch(s.tag){case 5:xn||Zs(s,i);case 6:var c=fn,p=xr;fn=null,po(t,i,s),fn=c,xr=p,fn!==null&&(xr?(t=fn,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):fn.removeChild(s.stateNode));break;case 18:fn!==null&&(xr?(t=fn,s=s.stateNode,t.nodeType===8?Md(t.parentNode,s):t.nodeType===1&&Md(t,s),mr(t)):Md(fn,s.stateNode));break;case 4:c=fn,p=xr,fn=s.stateNode.containerInfo,xr=!0,po(t,i,s),fn=c,xr=p;break;case 0:case 11:case 14:case 15:if(!xn&&(c=s.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){p=c=c.next;do{var v=p,E=v.destroy;v=v.tag,E!==void 0&&((v&2)!==0||(v&4)!==0)&&kf(s,i,E),p=p.next}while(p!==c)}po(t,i,s);break;case 1:if(!xn&&(Zs(s,i),c=s.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=s.memoizedProps,c.state=s.memoizedState,c.componentWillUnmount()}catch(T){Bt(s,i,T)}po(t,i,s);break;case 21:po(t,i,s);break;case 22:s.mode&1?(xn=(c=xn)||s.memoizedState!==null,po(t,i,s),xn=c):po(t,i,s);break;default:po(t,i,s)}}function Bm(t){var i=t.updateQueue;if(i!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new ub),i.forEach(function(c){var p=wb.bind(null,t,c);s.has(c)||(s.add(c),c.then(p,p))})}}function Sr(t,i){var s=i.deletions;if(s!==null)for(var c=0;c<s.length;c++){var p=s[c];try{var v=t,E=i,T=E;e:for(;T!==null;){switch(T.tag){case 5:fn=T.stateNode,xr=!1;break e;case 3:fn=T.stateNode.containerInfo,xr=!0;break e;case 4:fn=T.stateNode.containerInfo,xr=!0;break e}T=T.return}if(fn===null)throw Error(r(160));Fm(v,E,p),fn=null,xr=!1;var D=p.alternate;D!==null&&(D.return=null),p.return=null}catch(ee){Bt(p,i,ee)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)$m(i,t),i=i.sibling}function $m(t,i){var s=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Sr(i,t),Vr(t),c&4){try{pa(3,t,t.return),ic(3,t)}catch(Be){Bt(t,t.return,Be)}try{pa(5,t,t.return)}catch(Be){Bt(t,t.return,Be)}}break;case 1:Sr(i,t),Vr(t),c&512&&s!==null&&Zs(s,s.return);break;case 5:if(Sr(i,t),Vr(t),c&512&&s!==null&&Zs(s,s.return),t.flags&32){var p=t.stateNode;try{Zr(p,"")}catch(Be){Bt(t,t.return,Be)}}if(c&4&&(p=t.stateNode,p!=null)){var v=t.memoizedProps,E=s!==null?s.memoizedProps:v,T=t.type,D=t.updateQueue;if(t.updateQueue=null,D!==null)try{T==="input"&&v.type==="radio"&&v.name!=null&&gn(p,v),ti(T,E);var ee=ti(T,v);for(E=0;E<D.length;E+=2){var de=D[E],me=D[E+1];de==="style"?_s(p,me):de==="dangerouslySetInnerHTML"?$i(p,me):de==="children"?Zr(p,me):fe(p,de,me,ee)}switch(T){case"input":cr(p,v);break;case"textarea":Al(p,v);break;case"select":var ae=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!v.multiple;var Ae=v.value;Ae!=null?un(p,!!v.multiple,Ae,!1):ae!==!!v.multiple&&(v.defaultValue!=null?un(p,!!v.multiple,v.defaultValue,!0):un(p,!!v.multiple,v.multiple?[]:"",!1))}p[ra]=v}catch(Be){Bt(t,t.return,Be)}}break;case 6:if(Sr(i,t),Vr(t),c&4){if(t.stateNode===null)throw Error(r(162));p=t.stateNode,v=t.memoizedProps;try{p.nodeValue=v}catch(Be){Bt(t,t.return,Be)}}break;case 3:if(Sr(i,t),Vr(t),c&4&&s!==null&&s.memoizedState.isDehydrated)try{mr(i.containerInfo)}catch(Be){Bt(t,t.return,Be)}break;case 4:Sr(i,t),Vr(t);break;case 13:Sr(i,t),Vr(t),p=t.child,p.flags&8192&&(v=p.memoizedState!==null,p.stateNode.isHidden=v,!v||p.alternate!==null&&p.alternate.memoizedState!==null||(Of=wt())),c&4&&Bm(t);break;case 22:if(de=s!==null&&s.memoizedState!==null,t.mode&1?(xn=(ee=xn)||de,Sr(i,t),xn=ee):Sr(i,t),Vr(t),c&8192){if(ee=t.memoizedState!==null,(t.stateNode.isHidden=ee)&&!de&&(t.mode&1)!==0)for(De=t,de=t.child;de!==null;){for(me=De=de;De!==null;){switch(ae=De,Ae=ae.child,ae.tag){case 0:case 11:case 14:case 15:pa(4,ae,ae.return);break;case 1:Zs(ae,ae.return);var Me=ae.stateNode;if(typeof Me.componentWillUnmount=="function"){c=ae,s=ae.return;try{i=c,Me.props=i.memoizedProps,Me.state=i.memoizedState,Me.componentWillUnmount()}catch(Be){Bt(c,s,Be)}}break;case 5:Zs(ae,ae.return);break;case 22:if(ae.memoizedState!==null){Wm(me);continue}}Ae!==null?(Ae.return=ae,De=Ae):Wm(me)}de=de.sibling}e:for(de=null,me=t;;){if(me.tag===5){if(de===null){de=me;try{p=me.stateNode,ee?(v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(T=me.stateNode,D=me.memoizedProps.style,E=D!=null&&D.hasOwnProperty("display")?D.display:null,T.style.display=No("display",E))}catch(Be){Bt(t,t.return,Be)}}}else if(me.tag===6){if(de===null)try{me.stateNode.nodeValue=ee?"":me.memoizedProps}catch(Be){Bt(t,t.return,Be)}}else if((me.tag!==22&&me.tag!==23||me.memoizedState===null||me===t)&&me.child!==null){me.child.return=me,me=me.child;continue}if(me===t)break e;for(;me.sibling===null;){if(me.return===null||me.return===t)break e;de===me&&(de=null),me=me.return}de===me&&(de=null),me.sibling.return=me.return,me=me.sibling}}break;case 19:Sr(i,t),Vr(t),c&4&&Bm(t);break;case 21:break;default:Sr(i,t),Vr(t)}}function Vr(t){var i=t.flags;if(i&2){try{e:{for(var s=t.return;s!==null;){if(Um(s)){var c=s;break e}s=s.return}throw Error(r(160))}switch(c.tag){case 5:var p=c.stateNode;c.flags&32&&(Zr(p,""),c.flags&=-33);var v=zm(t);Ef(t,v,p);break;case 3:case 4:var E=c.stateNode.containerInfo,T=zm(t);Sf(t,T,E);break;default:throw Error(r(161))}}catch(D){Bt(t,t.return,D)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function db(t,i,s){De=t,Km(t)}function Km(t,i,s){for(var c=(t.mode&1)!==0;De!==null;){var p=De,v=p.child;if(p.tag===22&&c){var E=p.memoizedState!==null||rc;if(!E){var T=p.alternate,D=T!==null&&T.memoizedState!==null||xn;T=rc;var ee=xn;if(rc=E,(xn=D)&&!ee)for(De=p;De!==null;)E=De,D=E.child,E.tag===22&&E.memoizedState!==null?Hm(p):D!==null?(D.return=E,De=D):Hm(p);for(;v!==null;)De=v,Km(v),v=v.sibling;De=p,rc=T,xn=ee}Vm(t)}else(p.subtreeFlags&8772)!==0&&v!==null?(v.return=p,De=v):Vm(t)}}function Vm(t){for(;De!==null;){var i=De;if((i.flags&8772)!==0){var s=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:xn||ic(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!xn)if(s===null)c.componentDidMount();else{var p=i.elementType===i.type?s.memoizedProps:kr(i.type,s.memoizedProps);c.componentDidUpdate(p,s.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var v=i.updateQueue;v!==null&&Wp(i,v,c);break;case 3:var E=i.updateQueue;if(E!==null){if(s=null,i.child!==null)switch(i.child.tag){case 5:s=i.child.stateNode;break;case 1:s=i.child.stateNode}Wp(i,E,s)}break;case 5:var T=i.stateNode;if(s===null&&i.flags&4){s=T;var D=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&s.focus();break;case"img":D.src&&(s.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var ee=i.alternate;if(ee!==null){var de=ee.memoizedState;if(de!==null){var me=de.dehydrated;me!==null&&mr(me)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}xn||i.flags&512&&xf(i)}catch(ae){Bt(i,i.return,ae)}}if(i===t){De=null;break}if(s=i.sibling,s!==null){s.return=i.return,De=s;break}De=i.return}}function Wm(t){for(;De!==null;){var i=De;if(i===t){De=null;break}var s=i.sibling;if(s!==null){s.return=i.return,De=s;break}De=i.return}}function Hm(t){for(;De!==null;){var i=De;try{switch(i.tag){case 0:case 11:case 15:var s=i.return;try{ic(4,i)}catch(D){Bt(i,s,D)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var p=i.return;try{c.componentDidMount()}catch(D){Bt(i,p,D)}}var v=i.return;try{xf(i)}catch(D){Bt(i,v,D)}break;case 5:var E=i.return;try{xf(i)}catch(D){Bt(i,E,D)}}}catch(D){Bt(i,i.return,D)}if(i===t){De=null;break}var T=i.sibling;if(T!==null){T.return=i.return,De=T;break}De=i.return}}var fb=Math.ceil,oc=G.ReactCurrentDispatcher,Cf=G.ReactCurrentOwner,nr=G.ReactCurrentBatchConfig,pt=0,on=null,Wt=null,hn=0,Vn=0,el=ao(0),Yt=0,ma=null,ns=0,sc=0,If=0,ya=null,Rn=null,Of=0,tl=1/0,Si=null,lc=!1,jf=null,mo=null,ac=!1,yo=null,uc=0,ga=0,Tf=null,cc=-1,dc=0;function Pn(){return(pt&6)!==0?wt():cc!==-1?cc:cc=wt()}function go(t){return(t.mode&1)===0?1:(pt&2)!==0&&hn!==0?hn&-hn:Yw.transition!==null?(dc===0&&(dc=ui()),dc):(t=ht,t!==0||(t=window.event,t=t===void 0?16:Vo(t.type)),t)}function Er(t,i,s,c){if(50<ga)throw ga=0,Tf=null,Error(r(185));ci(t,s,c),((pt&2)===0||t!==on)&&(t===on&&((pt&2)===0&&(sc|=s),Yt===4&&vo(t,hn)),Ln(t,c),s===1&&pt===0&&(i.mode&1)===0&&(tl=wt()+500,zu&&co()))}function Ln(t,i){var s=t.callbackNode;zo(t,i);var c=Uo(t,t===on?hn:0);if(c===0)s!==null&&Ss(s),t.callbackNode=null,t.callbackPriority=0;else if(i=c&-c,t.callbackPriority!==i){if(s!=null&&Ss(s),i===1)t.tag===0?Gw(Gm.bind(null,t)):Ap(Gm.bind(null,t)),Vw(function(){(pt&6)===0&&co()}),s=null;else{switch(Ul(c)){case 1:s=Dr;break;case 4:s=Ro;break;case 16:s=qi;break;case 536870912:s=Rr;break;default:s=qi}s=ny(s,qm.bind(null,t))}t.callbackPriority=i,t.callbackNode=s}}function qm(t,i){if(cc=-1,dc=0,(pt&6)!==0)throw Error(r(327));var s=t.callbackNode;if(nl()&&t.callbackNode!==s)return null;var c=Uo(t,t===on?hn:0);if(c===0)return null;if((c&30)!==0||(c&t.expiredLanes)!==0||i)i=fc(t,c);else{i=c;var p=pt;pt|=2;var v=Qm();(on!==t||hn!==i)&&(Si=null,tl=wt()+500,is(t,i));do try{mb();break}catch(T){Ym(t,T)}while(!0);qd(),oc.current=v,pt=p,Wt!==null?i=0:(on=null,hn=0,i=Yt)}if(i!==0){if(i===2&&(p=ai(t),p!==0&&(c=p,i=Pf(t,p))),i===1)throw s=ma,is(t,0),vo(t,c),Ln(t,wt()),s;if(i===6)vo(t,c);else{if(p=t.current.alternate,(c&30)===0&&!hb(p)&&(i=fc(t,c),i===2&&(v=ai(t),v!==0&&(c=v,i=Pf(t,v))),i===1))throw s=ma,is(t,0),vo(t,c),Ln(t,wt()),s;switch(t.finishedWork=p,t.finishedLanes=c,i){case 0:case 1:throw Error(r(345));case 2:os(t,Rn,Si);break;case 3:if(vo(t,c),(c&130023424)===c&&(i=Of+500-wt(),10<i)){if(Uo(t,0)!==0)break;if(p=t.suspendedLanes,(p&c)!==c){Pn(),t.pingedLanes|=t.suspendedLanes&p;break}t.timeoutHandle=Ld(os.bind(null,t,Rn,Si),i);break}os(t,Rn,Si);break;case 4:if(vo(t,c),(c&4194240)===c)break;for(i=t.eventTimes,p=-1;0<c;){var E=31-Xe(c);v=1<<E,E=i[E],E>p&&(p=E),c&=~v}if(c=p,c=wt()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*fb(c/1960))-c,10<c){t.timeoutHandle=Ld(os.bind(null,t,Rn,Si),c);break}os(t,Rn,Si);break;case 5:os(t,Rn,Si);break;default:throw Error(r(329))}}}return Ln(t,wt()),t.callbackNode===s?qm.bind(null,t):null}function Pf(t,i){var s=ya;return t.current.memoizedState.isDehydrated&&(is(t,i).flags|=256),t=fc(t,i),t!==2&&(i=Rn,Rn=s,i!==null&&Nf(i)),t}function Nf(t){Rn===null?Rn=t:Rn.push.apply(Rn,t)}function hb(t){for(var i=t;;){if(i.flags&16384){var s=i.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var c=0;c<s.length;c++){var p=s[c],v=p.getSnapshot;p=p.value;try{if(!V(v(),p))return!1}catch{return!1}}}if(s=i.child,i.subtreeFlags&16384&&s!==null)s.return=i,i=s;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function vo(t,i){for(i&=~If,i&=~sc,t.suspendedLanes|=i,t.pingedLanes&=~i,t=t.expirationTimes;0<i;){var s=31-Xe(i),c=1<<s;t[s]=-1,i&=~c}}function Gm(t){if((pt&6)!==0)throw Error(r(327));nl();var i=Uo(t,0);if((i&1)===0)return Ln(t,wt()),null;var s=fc(t,i);if(t.tag!==0&&s===2){var c=ai(t);c!==0&&(i=c,s=Pf(t,c))}if(s===1)throw s=ma,is(t,0),vo(t,i),Ln(t,wt()),s;if(s===6)throw Error(r(345));return t.finishedWork=t.current.alternate,t.finishedLanes=i,os(t,Rn,Si),Ln(t,wt()),null}function Af(t,i){var s=pt;pt|=1;try{return t(i)}finally{pt=s,pt===0&&(tl=wt()+500,zu&&co())}}function rs(t){yo!==null&&yo.tag===0&&(pt&6)===0&&nl();var i=pt;pt|=1;var s=nr.transition,c=ht;try{if(nr.transition=null,ht=1,t)return t()}finally{ht=c,nr.transition=s,pt=i,(pt&6)===0&&co()}}function Df(){Vn=el.current,Nt(el)}function is(t,i){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,Kw(s)),Wt!==null)for(s=Wt.return;s!==null;){var c=s;switch($d(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Mu();break;case 3:Js(),Nt(Nn),Nt(bn),tf();break;case 5:Zd(c);break;case 4:Js();break;case 13:Nt(zt);break;case 19:Nt(zt);break;case 10:Gd(c.type._context);break;case 22:case 23:Df()}s=s.return}if(on=t,Wt=t=wo(t.current,null),hn=Vn=i,Yt=0,ma=null,If=sc=ns=0,Rn=ya=null,Zo!==null){for(i=0;i<Zo.length;i++)if(s=Zo[i],c=s.interleaved,c!==null){s.interleaved=null;var p=c.next,v=s.pending;if(v!==null){var E=v.next;v.next=p,c.next=E}s.pending=c}Zo=null}return t}function Ym(t,i){do{var s=Wt;try{if(qd(),Yu.current=Zu,Qu){for(var c=Ft.memoizedState;c!==null;){var p=c.queue;p!==null&&(p.pending=null),c=c.next}Qu=!1}if(ts=0,rn=Gt=Ft=null,ua=!1,ca=0,Cf.current=null,s===null||s.return===null){Yt=1,ma=i,Wt=null;break}e:{var v=t,E=s.return,T=s,D=i;if(i=hn,T.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var ee=D,de=T,me=de.tag;if((de.mode&1)===0&&(me===0||me===11||me===15)){var ae=de.alternate;ae?(de.updateQueue=ae.updateQueue,de.memoizedState=ae.memoizedState,de.lanes=ae.lanes):(de.updateQueue=null,de.memoizedState=null)}var Ae=bm(E);if(Ae!==null){Ae.flags&=-257,_m(Ae,E,T,v,i),Ae.mode&1&&wm(v,ee,i),i=Ae,D=ee;var Me=i.updateQueue;if(Me===null){var Be=new Set;Be.add(D),i.updateQueue=Be}else Me.add(D);break e}else{if((i&1)===0){wm(v,ee,i),Rf();break e}D=Error(r(426))}}else if(Rt&&T.mode&1){var $t=bm(E);if($t!==null){($t.flags&65536)===0&&($t.flags|=256),_m($t,E,T,v,i),Wd(Xs(D,T));break e}}v=D=Xs(D,T),Yt!==4&&(Yt=2),ya===null?ya=[v]:ya.push(v),v=E;do{switch(v.tag){case 3:v.flags|=65536,i&=-i,v.lanes|=i;var Q=gm(v,D,i);Vp(v,Q);break e;case 1:T=D;var $=v.type,X=v.stateNode;if((v.flags&128)===0&&(typeof $.getDerivedStateFromError=="function"||X!==null&&typeof X.componentDidCatch=="function"&&(mo===null||!mo.has(X)))){v.flags|=65536,i&=-i,v.lanes|=i;var we=vm(v,T,i);Vp(v,we);break e}}v=v.return}while(v!==null)}Xm(s)}catch(Ke){i=Ke,Wt===s&&s!==null&&(Wt=s=s.return);continue}break}while(!0)}function Qm(){var t=oc.current;return oc.current=Zu,t===null?Zu:t}function Rf(){(Yt===0||Yt===3||Yt===2)&&(Yt=4),on===null||(ns&268435455)===0&&(sc&268435455)===0||vo(on,hn)}function fc(t,i){var s=pt;pt|=2;var c=Qm();(on!==t||hn!==i)&&(Si=null,is(t,i));do try{pb();break}catch(p){Ym(t,p)}while(!0);if(qd(),pt=s,oc.current=c,Wt!==null)throw Error(r(261));return on=null,hn=0,Yt}function pb(){for(;Wt!==null;)Jm(Wt)}function mb(){for(;Wt!==null&&!Mt();)Jm(Wt)}function Jm(t){var i=ty(t.alternate,t,Vn);t.memoizedProps=t.pendingProps,i===null?Xm(t):Wt=i,Cf.current=null}function Xm(t){var i=t;do{var s=i.alternate;if(t=i.return,(i.flags&32768)===0){if(s=lb(s,i,Vn),s!==null){Wt=s;return}}else{if(s=ab(s,i),s!==null){s.flags&=32767,Wt=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Yt=6,Wt=null;return}}if(i=i.sibling,i!==null){Wt=i;return}Wt=i=t}while(i!==null);Yt===0&&(Yt=5)}function os(t,i,s){var c=ht,p=nr.transition;try{nr.transition=null,ht=1,yb(t,i,s,c)}finally{nr.transition=p,ht=c}return null}function yb(t,i,s,c){do nl();while(yo!==null);if((pt&6)!==0)throw Error(r(327));s=t.finishedWork;var p=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(r(177));t.callbackNode=null,t.callbackPriority=0;var v=s.lanes|s.childLanes;if(Cs(t,v),t===on&&(Wt=on=null,hn=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||ac||(ac=!0,ny(qi,function(){return nl(),null})),v=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||v){v=nr.transition,nr.transition=null;var E=ht;ht=1;var T=pt;pt|=4,Cf.current=null,cb(t,s),$m(s,t),J(Dd),$o=!!Ad,Dd=Ad=null,t.current=s,db(s),li(),pt=T,ht=E,nr.transition=v}else t.current=s;if(ac&&(ac=!1,yo=t,uc=p),v=t.pendingLanes,v===0&&(mo=null),hu(s.stateNode),Ln(t,wt()),i!==null)for(c=t.onRecoverableError,s=0;s<i.length;s++)p=i[s],c(p.value,{componentStack:p.stack,digest:p.digest});if(lc)throw lc=!1,t=jf,jf=null,t;return(uc&1)!==0&&t.tag!==0&&nl(),v=t.pendingLanes,(v&1)!==0?t===Tf?ga++:(ga=0,Tf=t):ga=0,co(),null}function nl(){if(yo!==null){var t=Ul(uc),i=nr.transition,s=ht;try{if(nr.transition=null,ht=16>t?16:t,yo===null)var c=!1;else{if(t=yo,yo=null,uc=0,(pt&6)!==0)throw Error(r(331));var p=pt;for(pt|=4,De=t.current;De!==null;){var v=De,E=v.child;if((De.flags&16)!==0){var T=v.deletions;if(T!==null){for(var D=0;D<T.length;D++){var ee=T[D];for(De=ee;De!==null;){var de=De;switch(de.tag){case 0:case 11:case 15:pa(8,de,v)}var me=de.child;if(me!==null)me.return=de,De=me;else for(;De!==null;){de=De;var ae=de.sibling,Ae=de.return;if(Mm(de),de===ee){De=null;break}if(ae!==null){ae.return=Ae,De=ae;break}De=Ae}}}var Me=v.alternate;if(Me!==null){var Be=Me.child;if(Be!==null){Me.child=null;do{var $t=Be.sibling;Be.sibling=null,Be=$t}while(Be!==null)}}De=v}}if((v.subtreeFlags&2064)!==0&&E!==null)E.return=v,De=E;else e:for(;De!==null;){if(v=De,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:pa(9,v,v.return)}var Q=v.sibling;if(Q!==null){Q.return=v.return,De=Q;break e}De=v.return}}var $=t.current;for(De=$;De!==null;){E=De;var X=E.child;if((E.subtreeFlags&2064)!==0&&X!==null)X.return=E,De=X;else e:for(E=$;De!==null;){if(T=De,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:ic(9,T)}}catch(Ke){Bt(T,T.return,Ke)}if(T===E){De=null;break e}var we=T.sibling;if(we!==null){we.return=T.return,De=we;break e}De=T.return}}if(pt=p,co(),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(Lo,t)}catch{}c=!0}return c}finally{ht=s,nr.transition=i}}return!1}function Zm(t,i,s){i=Xs(s,i),i=gm(t,i,1),t=ho(t,i,1),i=Pn(),t!==null&&(ci(t,1,i),Ln(t,i))}function Bt(t,i,s){if(t.tag===3)Zm(t,t,s);else for(;i!==null;){if(i.tag===3){Zm(i,t,s);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(mo===null||!mo.has(c))){t=Xs(s,t),t=vm(i,t,1),i=ho(i,t,1),t=Pn(),i!==null&&(ci(i,1,t),Ln(i,t));break}}i=i.return}}function gb(t,i,s){var c=t.pingCache;c!==null&&c.delete(i),i=Pn(),t.pingedLanes|=t.suspendedLanes&s,on===t&&(hn&s)===s&&(Yt===4||Yt===3&&(hn&130023424)===hn&&500>wt()-Of?is(t,0):If|=s),Ln(t,i)}function ey(t,i){i===0&&((t.mode&1)===0?i=1:(i=Mo,Mo<<=1,(Mo&130023424)===0&&(Mo=4194304)));var s=Pn();t=_i(t,i),t!==null&&(ci(t,i,s),Ln(t,s))}function vb(t){var i=t.memoizedState,s=0;i!==null&&(s=i.retryLane),ey(t,s)}function wb(t,i){var s=0;switch(t.tag){case 13:var c=t.stateNode,p=t.memoizedState;p!==null&&(s=p.retryLane);break;case 19:c=t.stateNode;break;default:throw Error(r(314))}c!==null&&c.delete(i),ey(t,s)}var ty;ty=function(t,i,s){if(t!==null)if(t.memoizedProps!==i.pendingProps||Nn.current)Dn=!0;else{if((t.lanes&s)===0&&(i.flags&128)===0)return Dn=!1,sb(t,i,s);Dn=(t.flags&131072)!==0}else Dn=!1,Rt&&(i.flags&1048576)!==0&&Dp(i,Bu,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;nc(t,i),t=i.pendingProps;var p=Vs(i,bn.current);Qs(i,s),p=of(null,i,c,t,p,s);var v=sf();return i.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,An(c)?(v=!0,Uu(i)):v=!1,i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,Jd(i),p.updater=ec,i.stateNode=p,p._reactInternals=i,ff(i,c,t,s),i=yf(null,i,c,!0,v,s)):(i.tag=0,Rt&&v&&Bd(i),Tn(null,i,p,s),i=i.child),i;case 16:c=i.elementType;e:{switch(nc(t,i),t=i.pendingProps,p=c._init,c=p(c._payload),i.type=c,p=i.tag=_b(c),t=kr(c,t),p){case 0:i=mf(null,i,c,t,s);break e;case 1:i=Im(null,i,c,t,s);break e;case 11:i=km(null,i,c,t,s);break e;case 14:i=xm(null,i,c,kr(c.type,t),s);break e}throw Error(r(306,c,""))}return i;case 0:return c=i.type,p=i.pendingProps,p=i.elementType===c?p:kr(c,p),mf(t,i,c,p,s);case 1:return c=i.type,p=i.pendingProps,p=i.elementType===c?p:kr(c,p),Im(t,i,c,p,s);case 3:e:{if(Om(i),t===null)throw Error(r(387));c=i.pendingProps,v=i.memoizedState,p=v.element,Kp(t,i),qu(i,c,null,s);var E=i.memoizedState;if(c=E.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},i.updateQueue.baseState=v,i.memoizedState=v,i.flags&256){p=Xs(Error(r(423)),i),i=jm(t,i,c,s,p);break e}else if(c!==p){p=Xs(Error(r(424)),i),i=jm(t,i,c,s,p);break e}else for(Kn=lo(i.stateNode.containerInfo.firstChild),$n=i,Rt=!0,_r=null,s=Bp(i,null,c,s),i.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(qs(),c===p){i=xi(t,i,s);break e}Tn(t,i,c,s)}i=i.child}return i;case 5:return Hp(i),t===null&&Vd(i),c=i.type,p=i.pendingProps,v=t!==null?t.memoizedProps:null,E=p.children,Rd(c,p)?E=null:v!==null&&Rd(c,v)&&(i.flags|=32),Cm(t,i),Tn(t,i,E,s),i.child;case 6:return t===null&&Vd(i),null;case 13:return Tm(t,i,s);case 4:return Xd(i,i.stateNode.containerInfo),c=i.pendingProps,t===null?i.child=Gs(i,null,c,s):Tn(t,i,c,s),i.child;case 11:return c=i.type,p=i.pendingProps,p=i.elementType===c?p:kr(c,p),km(t,i,c,p,s);case 7:return Tn(t,i,i.pendingProps,s),i.child;case 8:return Tn(t,i,i.pendingProps.children,s),i.child;case 12:return Tn(t,i,i.pendingProps.children,s),i.child;case 10:e:{if(c=i.type._context,p=i.pendingProps,v=i.memoizedProps,E=p.value,Tt(Vu,c._currentValue),c._currentValue=E,v!==null)if(V(v.value,E)){if(v.children===p.children&&!Nn.current){i=xi(t,i,s);break e}}else for(v=i.child,v!==null&&(v.return=i);v!==null;){var T=v.dependencies;if(T!==null){E=v.child;for(var D=T.firstContext;D!==null;){if(D.context===c){if(v.tag===1){D=ki(-1,s&-s),D.tag=2;var ee=v.updateQueue;if(ee!==null){ee=ee.shared;var de=ee.pending;de===null?D.next=D:(D.next=de.next,de.next=D),ee.pending=D}}v.lanes|=s,D=v.alternate,D!==null&&(D.lanes|=s),Yd(v.return,s,i),T.lanes|=s;break}D=D.next}}else if(v.tag===10)E=v.type===i.type?null:v.child;else if(v.tag===18){if(E=v.return,E===null)throw Error(r(341));E.lanes|=s,T=E.alternate,T!==null&&(T.lanes|=s),Yd(E,s,i),E=v.sibling}else E=v.child;if(E!==null)E.return=v;else for(E=v;E!==null;){if(E===i){E=null;break}if(v=E.sibling,v!==null){v.return=E.return,E=v;break}E=E.return}v=E}Tn(t,i,p.children,s),i=i.child}return i;case 9:return p=i.type,c=i.pendingProps.children,Qs(i,s),p=er(p),c=c(p),i.flags|=1,Tn(t,i,c,s),i.child;case 14:return c=i.type,p=kr(c,i.pendingProps),p=kr(c.type,p),xm(t,i,c,p,s);case 15:return Sm(t,i,i.type,i.pendingProps,s);case 17:return c=i.type,p=i.pendingProps,p=i.elementType===c?p:kr(c,p),nc(t,i),i.tag=1,An(c)?(t=!0,Uu(i)):t=!1,Qs(i,s),mm(i,c,p),ff(i,c,p,s),yf(null,i,c,!0,t,s);case 19:return Nm(t,i,s);case 22:return Em(t,i,s)}throw Error(r(156,i.tag))};function ny(t,i){return Ll(t,i)}function bb(t,i,s,c){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rr(t,i,s,c){return new bb(t,i,s,c)}function Lf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _b(t){if(typeof t=="function")return Lf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ce)return 11;if(t===$e)return 14}return 2}function wo(t,i){var s=t.alternate;return s===null?(s=rr(t.tag,i,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=i,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,i=t.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function hc(t,i,s,c,p,v){var E=2;if(c=t,typeof t=="function")Lf(t)&&(E=1);else if(typeof t=="string")E=5;else e:switch(t){case he:return ss(s.children,p,v,i);case se:E=8,p|=8;break;case be:return t=rr(12,s,i,p|2),t.elementType=be,t.lanes=v,t;case Le:return t=rr(13,s,i,p),t.elementType=Le,t.lanes=v,t;case Ve:return t=rr(19,s,i,p),t.elementType=Ve,t.lanes=v,t;case ie:return pc(s,p,v,i);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _e:E=10;break e;case Ie:E=9;break e;case ce:E=11;break e;case $e:E=14;break e;case ke:E=16,c=null;break e}throw Error(r(130,t==null?t:typeof t,""))}return i=rr(E,s,i,p),i.elementType=t,i.type=c,i.lanes=v,i}function ss(t,i,s,c){return t=rr(7,t,c,i),t.lanes=s,t}function pc(t,i,s,c){return t=rr(22,t,c,i),t.elementType=ie,t.lanes=s,t.stateNode={isHidden:!1},t}function Mf(t,i,s){return t=rr(6,t,null,i),t.lanes=s,t}function Uf(t,i,s){return i=rr(4,t.children!==null?t.children:[],t.key,i),i.lanes=s,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}function kb(t,i,s,c,p){this.tag=i,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fo(0),this.expirationTimes=Fo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fo(0),this.identifierPrefix=c,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function zf(t,i,s,c,p,v,E,T,D){return t=new kb(t,i,s,T,D),i===1?(i=1,v===!0&&(i|=8)):i=0,v=rr(3,null,null,i),t.current=v,v.stateNode=t,v.memoizedState={element:c,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jd(v),t}function xb(t,i,s){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ye,key:c==null?null:""+c,children:t,containerInfo:i,implementation:s}}function ry(t){if(!t)return uo;t=t._reactInternals;e:{if(wn(t)!==t||t.tag!==1)throw Error(r(170));var i=t;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(An(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(r(171))}if(t.tag===1){var s=t.type;if(An(s))return Pp(t,s,i)}return i}function iy(t,i,s,c,p,v,E,T,D){return t=zf(s,c,!0,t,p,v,E,T,D),t.context=ry(null),s=t.current,c=Pn(),p=go(s),v=ki(c,p),v.callback=i??null,ho(s,v,p),t.current.lanes=p,ci(t,p,c),Ln(t,c),t}function mc(t,i,s,c){var p=i.current,v=Pn(),E=go(p);return s=ry(s),i.context===null?i.context=s:i.pendingContext=s,i=ki(v,E),i.payload={element:t},c=c===void 0?null:c,c!==null&&(i.callback=c),t=ho(p,i,E),t!==null&&(Er(t,p,E,v),Hu(t,p,E)),E}function yc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function oy(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<i?s:i}}function Ff(t,i){oy(t,i),(t=t.alternate)&&oy(t,i)}function Sb(){return null}var sy=typeof reportError=="function"?reportError:function(t){console.error(t)};function Bf(t){this._internalRoot=t}gc.prototype.render=Bf.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));mc(t,i,null,null)},gc.prototype.unmount=Bf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;rs(function(){mc(null,t,null,null)}),i[gi]=null}};function gc(t){this._internalRoot=t}gc.prototype.unstable_scheduleHydration=function(t){if(t){var i=gu();t={blockedOn:null,target:t,priority:i};for(var s=0;s<qt.length&&i!==0&&i<qt[s].priority;s++);qt.splice(s,0,t),s===0&&wu(t)}};function $f(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ly(){}function Eb(t,i,s,c,p){if(p){if(typeof c=="function"){var v=c;c=function(){var ee=yc(E);v.call(ee)}}var E=iy(i,c,t,0,null,!1,!1,"",ly);return t._reactRootContainer=E,t[gi]=E.current,ta(t.nodeType===8?t.parentNode:t),rs(),E}for(;p=t.lastChild;)t.removeChild(p);if(typeof c=="function"){var T=c;c=function(){var ee=yc(D);T.call(ee)}}var D=zf(t,0,!1,null,null,!1,!1,"",ly);return t._reactRootContainer=D,t[gi]=D.current,ta(t.nodeType===8?t.parentNode:t),rs(function(){mc(i,D,s,c)}),D}function wc(t,i,s,c,p){var v=s._reactRootContainer;if(v){var E=v;if(typeof p=="function"){var T=p;p=function(){var D=yc(E);T.call(D)}}mc(i,E,t,p)}else E=Eb(s,i,t,p,c);return yc(E)}yu=function(t){switch(t.tag){case 3:var i=t.stateNode;if(i.current.memoizedState.isDehydrated){var s=Gi(i.pendingLanes);s!==0&&(Is(i,s|1),Ln(i,wt()),(pt&6)===0&&(tl=wt()+500,co()))}break;case 13:rs(function(){var c=_i(t,1);if(c!==null){var p=Pn();Er(c,t,1,p)}}),Ff(t,1)}},dt=function(t){if(t.tag===13){var i=_i(t,134217728);if(i!==null){var s=Pn();Er(i,t,134217728,s)}Ff(t,134217728)}},zl=function(t){if(t.tag===13){var i=go(t),s=_i(t,i);if(s!==null){var c=Pn();Er(s,t,i,c)}Ff(t,i)}},gu=function(){return ht},vu=function(t,i){var s=ht;try{return ht=t,i()}finally{ht=s}},Ce=function(t,i,s){switch(i){case"input":if(cr(t,s),i=s.name,s.type==="radio"&&i!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<s.length;i++){var c=s[i];if(c!==t&&c.form===t.form){var p=Lu(c);if(!p)throw Error(r(90));He(c),cr(c,p)}}}break;case"textarea":Al(t,s);break;case"select":i=s.value,i!=null&&un(t,!!s.multiple,i,!1)}},uu=Af,cu=rs;var Cb={usingClientEntryPoint:!1,Events:[ia,$s,Lu,Dl,xs,Af]},va={findFiberByHostInstance:Yo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ib={bundleType:va.bundleType,version:va.version,rendererPackageName:va.rendererPackageName,rendererConfig:va.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:G.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Rl(t),t===null?null:t.stateNode},findFiberByHostInstance:va.findFiberByHostInstance||Sb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bc.isDisabled&&bc.supportsFiber)try{Lo=bc.inject(Ib),In=bc}catch{}}return Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cb,Mn.createPortal=function(t,i){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$f(i))throw Error(r(200));return xb(t,i,null,s)},Mn.createRoot=function(t,i){if(!$f(t))throw Error(r(299));var s=!1,c="",p=sy;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(p=i.onRecoverableError)),i=zf(t,1,!1,null,null,s,!1,c,p),t[gi]=i.current,ta(t.nodeType===8?t.parentNode:t),new Bf(i)},Mn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=Rl(i),t=t===null?null:t.stateNode,t},Mn.flushSync=function(t){return rs(t)},Mn.hydrate=function(t,i,s){if(!vc(i))throw Error(r(200));return wc(null,t,i,!0,s)},Mn.hydrateRoot=function(t,i,s){if(!$f(t))throw Error(r(405));var c=s!=null&&s.hydratedSources||null,p=!1,v="",E=sy;if(s!=null&&(s.unstable_strictMode===!0&&(p=!0),s.identifierPrefix!==void 0&&(v=s.identifierPrefix),s.onRecoverableError!==void 0&&(E=s.onRecoverableError)),i=iy(i,null,t,1,s??null,p,!1,v,E),t[gi]=i.current,ta(t),c)for(t=0;t<c.length;t++)s=c[t],p=s._getVersion,p=p(s._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[s,p]:i.mutableSourceEagerHydrationData.push(s,p);return new gc(i)},Mn.render=function(t,i,s){if(!vc(i))throw Error(r(200));return wc(null,t,i,!1,s)},Mn.unmountComponentAtNode=function(t){if(!vc(t))throw Error(r(40));return t._reactRootContainer?(rs(function(){wc(null,null,t,!1,function(){t._reactRootContainer=null,t[gi]=null})}),!0):!1},Mn.unstable_batchedUpdates=Af,Mn.unstable_renderSubtreeIntoContainer=function(t,i,s,c){if(!vc(s))throw Error(r(200));if(t==null||t._reactInternals===void 0)throw Error(r(38));return wc(t,i,s,!1,c)},Mn.version="18.3.1-next-f1338f8080-20240426",Mn}var my;function Ub(){if(my)return Wf.exports;my=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Wf.exports=Mb(),Wf.exports}var yy;function zb(){if(yy)return _c;yy=1;var n=Ub();return _c.createRoot=n.createRoot,_c.hydrateRoot=n.hydrateRoot,_c}var Fb=zb(),Rc={exports:{}},Bb=Rc.exports,gy;function $b(){return gy||(gy=1,(function(n,e){((r,o)=>{n.exports=o()})(Bb,function(){var r=function(u,f){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(g,b){g.__proto__=b}:function(g,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(g[k]=b[k])}))(u,f)},o=function(){return(o=Object.assign||function(u){for(var f,g=1,b=arguments.length;g<b;g++)for(var k in f=arguments[g])Object.prototype.hasOwnProperty.call(f,k)&&(u[k]=f[k]);return u}).apply(this,arguments)};function l(u,f,g){for(var b,k=0,S=f.length;k<S;k++)!b&&k in f||((b=b||Array.prototype.slice.call(f,0,k))[k]=f[k]);return u.concat(b||Array.prototype.slice.call(f))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Pb,d=Object.keys,h=Array.isArray;function y(u,f){return typeof f=="object"&&d(f).forEach(function(g){u[g]=f[g]}),u}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var m=Object.getPrototypeOf,_={}.hasOwnProperty;function w(u,f){return _.call(u,f)}function x(u,f){typeof f=="function"&&(f=f(m(u))),(typeof Reflect>"u"?d:Reflect.ownKeys)(f).forEach(function(g){O(u,g,f[g])})}var C=Object.defineProperty;function O(u,f,g,b){C(u,f,y(g&&w(g,"get")&&typeof g.get=="function"?{get:g.get,set:g.set,configurable:!0}:{value:g,configurable:!0,writable:!0},b))}function P(u){return{from:function(f){return u.prototype=Object.create(f.prototype),O(u.prototype,"constructor",u),{extend:x.bind(null,u.prototype)}}}}var W=Object.getOwnPropertyDescriptor,q=[].slice;function te(u,f,g){return q.call(u,f,g)}function fe(u,f){return f(u)}function G(u){if(!u)throw new Error("Assertion Failed")}function Ee(u){a.setImmediate?setImmediate(u):setTimeout(u,0)}function ye(u,f){if(typeof f=="string"&&w(u,f))return u[f];if(!f)return u;if(typeof f!="string"){for(var g=[],b=0,k=f.length;b<k;++b){var S=ye(u,f[b]);g.push(S)}return g}var I,j=f.indexOf(".");return j===-1||(I=u[f.substr(0,j)])==null?void 0:ye(I,f.substr(j+1))}function he(u,f,g){if(u&&f!==void 0&&!("isFrozen"in Object&&Object.isFrozen(u)))if(typeof f!="string"&&"length"in f){G(typeof g!="string"&&"length"in g);for(var b=0,k=f.length;b<k;++b)he(u,f[b],g[b])}else{var S,I,j=f.indexOf(".");j!==-1?(S=f.substr(0,j),(j=f.substr(j+1))===""?g===void 0?h(u)&&!isNaN(parseInt(S))?u.splice(S,1):delete u[S]:u[S]=g:he(I=(I=u[S])&&w(u,S)?I:u[S]={},j,g)):g===void 0?h(u)&&!isNaN(parseInt(f))?u.splice(f,1):delete u[f]:u[f]=g}}function se(u){var f,g={};for(f in u)w(u,f)&&(g[f]=u[f]);return g}var be=[].concat;function _e(u){return be.apply([],u)}var Y="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(_e([8,16,32,64].map(function(u){return["Int","Uint","Float"].map(function(f){return f+u+"Array"})}))).filter(function(u){return a[u]}),Ie=new Set(Y.map(function(u){return a[u]})),ce=null;function Le(u){return ce=new WeakMap,u=(function f(g){if(!g||typeof g!="object")return g;var b=ce.get(g);if(b)return b;if(h(g)){b=[],ce.set(g,b);for(var k=0,S=g.length;k<S;++k)b.push(f(g[k]))}else if(Ie.has(g.constructor))b=g;else{var I,j=m(g);for(I in b=j===Object.prototype?{}:Object.create(j),ce.set(g,b),g)w(g,I)&&(b[I]=f(g[I]))}return b})(u),ce=null,u}var Ve={}.toString;function $e(u){return Ve.call(u).slice(8,-1)}var ke=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ie=typeof ke=="symbol"?function(u){var f;return u!=null&&(f=u[ke])&&f.apply(u)}:function(){return null};function K(u,f){f=u.indexOf(f),0<=f&&u.splice(f,1)}var re={};function le(u){var f,g,b,k;if(arguments.length===1){if(h(u))return u.slice();if(this===re&&typeof u=="string")return[u];if(k=ie(u))for(g=[];!(b=k.next()).done;)g.push(b.value);else{if(u==null)return[u];if(typeof(f=u.length)!="number")return[u];for(g=new Array(f);f--;)g[f]=u[f]}}else for(f=arguments.length,g=new Array(f);f--;)g[f]=arguments[f];return g}var N=typeof Symbol<"u"?function(u){return u[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Y=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],vn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Y),ge={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Te(u,f){this.name=u,this.message=f}function Ge(u,f){return u+". Errors: "+Object.keys(f).map(function(g){return f[g].toString()}).filter(function(g,b,k){return k.indexOf(g)===b}).join(`
`)}function We(u,f,g,b){this.failures=f,this.failedKeys=b,this.successCount=g,this.message=Ge(u,f)}function Re(u,f){this.name="BulkError",this.failures=Object.keys(f).map(function(g){return f[g]}),this.failuresByPos=f,this.message=Ge(u,this.failures)}P(Te).from(Error).extend({toString:function(){return this.name+": "+this.message}}),P(We).from(Te),P(Re).from(Te);var Ye=vn.reduce(function(u,f){return u[f]=f+"Error",u},{}),et=Te,pe=vn.reduce(function(u,f){var g=f+"Error";function b(k,S){this.name=g,k?typeof k=="string"?(this.message="".concat(k).concat(S?`
 `+S:""),this.inner=S||null):typeof k=="object"&&(this.message="".concat(k.name," ").concat(k.message),this.inner=k):(this.message=ge[f]||g,this.inner=null)}return P(b).from(et),u[f]=b,u},{}),It=(pe.Syntax=SyntaxError,pe.Type=TypeError,pe.Range=RangeError,Y.reduce(function(u,f){return u[f+"Error"]=pe[f],u},{}));Y=vn.reduce(function(u,f){return["Syntax","Type","Range"].indexOf(f)===-1&&(u[f+"Error"]=pe[f]),u},{});function He(){}function it(u){return u}function ct(u,f){return u==null||u===it?f:function(g){return f(u(g))}}function vt(u,f){return function(){u.apply(this,arguments),f.apply(this,arguments)}}function gn(u,f){return u===He?f:function(){var g=u.apply(this,arguments),b=(g!==void 0&&(arguments[0]=g),this.onsuccess),k=this.onerror,S=(this.onsuccess=null,this.onerror=null,f.apply(this,arguments));return b&&(this.onsuccess=this.onsuccess?vt(b,this.onsuccess):b),k&&(this.onerror=this.onerror?vt(k,this.onerror):k),S!==void 0?S:g}}function cr(u,f){return u===He?f:function(){u.apply(this,arguments);var g=this.onsuccess,b=this.onerror;this.onsuccess=this.onerror=null,f.apply(this,arguments),g&&(this.onsuccess=this.onsuccess?vt(g,this.onsuccess):g),b&&(this.onerror=this.onerror?vt(b,this.onerror):b)}}function Fn(u,f){return u===He?f:function(k){var b=u.apply(this,arguments),k=(y(k,b),this.onsuccess),S=this.onerror,I=(this.onsuccess=null,this.onerror=null,f.apply(this,arguments));return k&&(this.onsuccess=this.onsuccess?vt(k,this.onsuccess):k),S&&(this.onerror=this.onerror?vt(S,this.onerror):S),b===void 0?I===void 0?void 0:I:y(b,I)}}function Nl(u,f){return u===He?f:function(){return f.apply(this,arguments)!==!1&&u.apply(this,arguments)}}function Xr(u,f){return u===He?f:function(){var g=u.apply(this,arguments);if(g&&typeof g.then=="function"){for(var b=this,k=arguments.length,S=new Array(k);k--;)S[k]=arguments[k];return g.then(function(){return f.apply(b,S)})}return f.apply(this,arguments)}}Y.ModifyError=We,Y.DexieError=Te,Y.BulkError=Re;var un=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function bs(u){un=u}var zi={},Al=100,Fi=typeof Promise>"u"?[]:(vn=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[Fi=crypto.subtle.digest("SHA-512",new Uint8Array([0])),m(Fi),vn]:[vn,m(vn),vn]),vn=Fi[0],pi=Fi[1],pi=pi&&pi.then,dr=vn&&vn.constructor,Bi=!!Fi[2],$i=function(u,f){ti.push([u,f]),Ir&&(queueMicrotask(cu),Ir=!1)},Zr=!0,Ir=!0,ei=[],No=[],_s=it,Or={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:He,pgp:!1,env:{},finalize:He},Fe=Or,ti=[],fr=0,Ki=[];function Ce(u){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var f=this._PSD=Fe;if(typeof u!="function"){if(u!==zi)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&ks(this,this._value)}else this._state=null,this._value=null,++f.ref,(function g(b,k){try{k(function(S){if(b._state===null){if(S===b)throw new TypeError("A promise cannot be resolved with itself.");var I=b._lib&&Tr();S&&typeof S.then=="function"?g(b,function(j,z){S instanceof Ce?S._then(j,z):S.then(j,z)}):(b._state=!0,b._value=S,Dl(b)),I&&ri()}},ks.bind(null,b))}catch(S){ks(b,S)}})(this,u)}var jr={get:function(){var u=Fe,f=Wi;function g(b,k){var S=this,I=!u.global&&(u!==Fe||f!==Wi),j=I&&!wn(),z=new Ce(function(V,L){xs(S,new ni(Ll(b,u,I,j),Ll(k,u,I,j),V,L,u))});return this._consoleTask&&(z._consoleTask=this._consoleTask),z}return g.prototype=zi,g},set:function(u){O(this,"then",u&&u.prototype===zi?jr:{get:function(){return u},set:jr.set})}};function ni(u,f,g,b,k){this.onFulfilled=typeof u=="function"?u:null,this.onRejected=typeof f=="function"?f:null,this.resolve=g,this.reject=b,this.psd=k}function ks(u,f){var g,b;No.push(f),u._state===null&&(g=u._lib&&Tr(),f=_s(f),u._state=!1,u._value=f,b=u,ei.some(function(k){return k._value===b._value})||ei.push(b),Dl(u),g)&&ri()}function Dl(u){var f=u._listeners;u._listeners=[];for(var g=0,b=f.length;g<b;++g)xs(u,f[g]);var k=u._PSD;--k.ref||k.finalize(),fr===0&&(++fr,$i(function(){--fr==0&&ii()},[]))}function xs(u,f){if(u._state===null)u._listeners.push(f);else{var g=u._state?f.onFulfilled:f.onRejected;if(g===null)return(u._state?f.resolve:f.reject)(u._value);++f.psd.ref,++fr,$i(uu,[g,u,f])}}function uu(u,f,g){try{var b,k=f._value;!f._state&&No.length&&(No=[]),b=un&&f._consoleTask?f._consoleTask.run(function(){return u(k)}):u(k),f._state||No.indexOf(k)!==-1||(S=>{for(var I=ei.length;I;)if(ei[--I]._value===S._value)return ei.splice(I,1)})(f),g.resolve(b)}catch(S){g.reject(S)}finally{--fr==0&&ii(),--g.psd.ref||g.psd.finalize()}}function cu(){Ar(Or,function(){Tr()&&ri()})}function Tr(){var u=Zr;return Ir=Zr=!1,u}function ri(){var u,f,g;do for(;0<ti.length;)for(u=ti,ti=[],g=u.length,f=0;f<g;++f){var b=u[f];b[0].apply(null,b[1])}while(0<ti.length);Ir=Zr=!0}function ii(){for(var u=ei,f=(ei=[],u.forEach(function(b){b._PSD.onunhandled.call(null,b._value,b)}),Ki.slice(0)),g=f.length;g;)f[--g]()}function Vi(u){return new Ce(zi,!1,u)}function _t(u,f){var g=Fe;return function(){var b=Tr(),k=Fe;try{return Nr(g,!0),u.apply(this,arguments)}catch(S){f&&f(S)}finally{Nr(k,!1),b&&ri()}}}x(Ce.prototype,{then:jr,_then:function(u,f){xs(this,new ni(null,null,u,f,Fe))},catch:function(u){var f,g;return arguments.length===1?this.then(null,u):(f=u,g=arguments[1],typeof f=="function"?this.then(null,function(b){return(b instanceof f?g:Vi)(b)}):this.then(null,function(b){return(b&&b.name===f?g:Vi)(b)}))},finally:function(u){return this.then(function(f){return Ce.resolve(u()).then(function(){return f})},function(f){return Ce.resolve(u()).then(function(){return Vi(f)})})},timeout:function(u,f){var g=this;return u<1/0?new Ce(function(b,k){var S=setTimeout(function(){return k(new pe.Timeout(f))},u);g.then(b,k).finally(clearTimeout.bind(null,S))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&O(Ce.prototype,Symbol.toStringTag,"Dexie.Promise"),Or.env=Rl(),x(Ce,{all:function(){var u=le.apply(null,arguments).map(Do);return new Ce(function(f,g){u.length===0&&f([]);var b=u.length;u.forEach(function(k,S){return Ce.resolve(k).then(function(I){u[S]=I,--b||f(u)},g)})})},resolve:function(u){return u instanceof Ce?u:u&&typeof u.then=="function"?new Ce(function(f,g){u.then(f,g)}):new Ce(zi,!0,u)},reject:Vi,race:function(){var u=le.apply(null,arguments).map(Do);return new Ce(function(f,g){u.map(function(b){return Ce.resolve(b).then(f,g)})})},PSD:{get:function(){return Fe},set:function(u){return Fe=u}},totalEchoes:{get:function(){return Wi}},newPSD:Pr,usePSD:Ar,scheduler:{get:function(){return $i},set:function(u){$i=u}},rejectionMapper:{get:function(){return _s},set:function(u){_s=u}},follow:function(u,f){return new Ce(function(g,b){return Pr(function(k,S){var I=Fe;I.unhandleds=[],I.onunhandled=S,I.finalize=vt(function(){var j,z=this;j=function(){z.unhandleds.length===0?k():S(z.unhandleds[0])},Ki.push(function V(){j(),Ki.splice(Ki.indexOf(V),1)}),++fr,$i(function(){--fr==0&&ii()},[])},I.finalize),u()},f,g,b)})}}),dr&&(dr.allSettled&&O(Ce,"allSettled",function(){var u=le.apply(null,arguments).map(Do);return new Ce(function(f){u.length===0&&f([]);var g=u.length,b=new Array(g);u.forEach(function(k,S){return Ce.resolve(k).then(function(I){return b[S]={status:"fulfilled",value:I}},function(I){return b[S]={status:"rejected",reason:I}}).then(function(){return--g||f(b)})})})}),dr.any&&typeof AggregateError<"u"&&O(Ce,"any",function(){var u=le.apply(null,arguments).map(Do);return new Ce(function(f,g){u.length===0&&g(new AggregateError([]));var b=u.length,k=new Array(b);u.forEach(function(S,I){return Ce.resolve(S).then(function(j){return f(j)},function(j){k[I]=j,--b||g(new AggregateError(k))})})})}),dr.withResolvers)&&(Ce.withResolvers=dr.withResolvers);var Vt={awaits:0,echoes:0,id:0},Ao=0,oi=[],si=0,Wi=0,Ed=0;function Pr(u,I,g,b){var k=Fe,S=Object.create(k),I=(S.parent=k,S.ref=0,S.global=!1,S.id=++Ed,Or.env,S.env=Bi?{Promise:Ce,PromiseProp:{value:Ce,configurable:!0,writable:!0},all:Ce.all,race:Ce.race,allSettled:Ce.allSettled,any:Ce.any,resolve:Ce.resolve,reject:Ce.reject}:{},I&&y(S,I),++k.ref,S.finalize=function(){--this.parent.ref||this.parent.finalize()},Ar(S,u,g,b));return S.ref===0&&S.finalize(),I}function Hi(){return Vt.id||(Vt.id=++Ao),++Vt.awaits,Vt.echoes+=Al,Vt.id}function wn(){return!!Vt.awaits&&(--Vt.awaits==0&&(Vt.id=0),Vt.echoes=Vt.awaits*Al,!0)}function Do(u){return Vt.echoes&&u&&u.constructor===dr?(Hi(),u.then(function(f){return wn(),f},function(f){return wn(),Mt(f)})):u}function du(){var u=oi[oi.length-1];oi.pop(),Nr(u,!1)}function Nr(u,f){var g,b,k=Fe;(f?!Vt.echoes||si++&&u===Fe:!si||--si&&u===Fe)||queueMicrotask(f?(function(S){++Wi,Vt.echoes&&--Vt.echoes!=0||(Vt.echoes=Vt.awaits=Vt.id=0),oi.push(Fe),Nr(S,!0)}).bind(null,u):du),u!==Fe&&(Fe=u,k===Or&&(Or.env=Rl()),Bi)&&(g=Or.env.Promise,b=u.env,k.global||u.global)&&(Object.defineProperty(a,"Promise",b.PromiseProp),g.all=b.all,g.race=b.race,g.resolve=b.resolve,g.reject=b.reject,b.allSettled&&(g.allSettled=b.allSettled),b.any)&&(g.any=b.any)}function Rl(){var u=a.Promise;return Bi?{Promise:u,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:u.all,race:u.race,allSettled:u.allSettled,any:u.any,resolve:u.resolve,reject:u.reject}:{}}function Ar(u,f,g,b,k){var S=Fe;try{return Nr(u,!0),f(g,b,k)}finally{Nr(S,!1)}}function Ll(u,f,g,b){return typeof u!="function"?u:function(){var k=Fe;g&&Hi(),Nr(f,!0);try{return u.apply(this,arguments)}finally{Nr(k,!1),b&&queueMicrotask(wn)}}}function Ss(u){Promise===dr&&Vt.echoes===0?si===0?u():enqueueNativeMicroTask(u):setTimeout(u,0)}(""+pi).indexOf("[native code]")===-1&&(Hi=wn=He);var Mt=Ce.reject,li="",wt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",fu="String expected.",Dr=[],Ro="__dbnames",qi="readonly",Ml="readwrite";function Rr(u,f){return u?f?function(){return u.apply(this,arguments)&&f.apply(this,arguments)}:u:f}var Lo={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function In(u){return typeof u!="string"||/\./.test(u)?function(f){return f}:function(f){return f[u]===void 0&&u in f&&delete(f=Le(f))[u],f}}function hu(){throw pe.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Xe(u,f){try{var g=pu(u),b=pu(f);if(g!==b)return g==="Array"?1:b==="Array"?-1:g==="binary"?1:b==="binary"?-1:g==="string"?1:b==="string"?-1:g==="Date"?1:b!=="Date"?NaN:-1;switch(g){case"number":case"Date":case"string":return f<u?1:u<f?-1:0;case"binary":for(var k=mu(u),S=mu(f),I=k.length,j=S.length,z=I<j?I:j,V=0;V<z;++V)if(k[V]!==S[V])return k[V]<S[V]?-1:1;return I===j?0:I<j?-1:1;case"Array":for(var L=u,A=f,F=L.length,B=A.length,U=F<B?F:B,M=0;M<U;++M){var J=Xe(L[M],A[M]);if(J!==0)return J}return F===B?0:F<B?-1:1}}catch{}return NaN}function pu(u){var f=typeof u;return f=="object"&&(ArrayBuffer.isView(u)||(f=$e(u))==="ArrayBuffer")?"binary":f}function mu(u){return u instanceof Uint8Array?u:ArrayBuffer.isView(u)?new Uint8Array(u.buffer,u.byteOffset,u.byteLength):new Uint8Array(u)}function Es(u,f,g){var b=u.schema.yProps;return b?(f&&0<g.numFailures&&(f=f.filter(function(k,S){return!g.failures[S]})),Promise.all(b.map(function(k){return k=k.updatesTable,f?u.db.table(k).where("k").anyOf(f).delete():u.db.table(k).clear()})).then(function(){return g})):g}Mo.prototype.execute=function(u){var f=this["@@propmod"];if(f.add!==void 0){var g=f.add;if(h(g))return l(l([],h(u)?u:[],!0),g).sort();if(typeof g=="number")return(Number(u)||0)+g;if(typeof g=="bigint")try{return BigInt(u)+g}catch{return BigInt(0)+g}throw new TypeError("Invalid term ".concat(g))}if(f.remove!==void 0){var b=f.remove;if(h(b))return h(u)?u.filter(function(k){return!b.includes(k)}).sort():[];if(typeof b=="number")return Number(u)-b;if(typeof b=="bigint")try{return BigInt(u)-b}catch{return BigInt(0)-b}throw new TypeError("Invalid subtrahend ".concat(b))}return g=(g=f.replacePrefix)==null?void 0:g[0],g&&typeof u=="string"&&u.startsWith(g)?f.replacePrefix[1]+u.substring(g.length):u};var Lr=Mo;function Mo(u){this["@@propmod"]=u}function Gi(u,f){for(var g=d(f),b=g.length,k=!1,S=0;S<b;++S){var I=g[S],j=f[I],z=ye(u,I);j instanceof Lr?(he(u,I,j.execute(z)),k=!0):z!==j&&(he(u,I,j),k=!0)}return k}St.prototype._trans=function(u,f,g){var b=this._tx||Fe.trans,k=this.name,S=un&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(u==="readonly"?"read":"write"," ").concat(this.name));function I(V,L,A){if(A.schema[k])return f(A.idbtrans,A);throw new pe.NotFound("Table "+k+" not part of transaction")}var j=Tr();try{var z=b&&b.db._novip===this.db._novip?b===Fe.trans?b._promise(u,I,g):Pr(function(){return b._promise(u,I,g)},{trans:b,transless:Fe.transless||Fe}):(function V(L,A,F,B){if(L.idbdb&&(L._state.openComplete||Fe.letThrough||L._vip)){var U=L._createTransaction(A,F,L._dbSchema);try{U.create(),L._state.PR1398_maxLoop=3}catch(M){return M.name===Ye.InvalidState&&L.isOpen()&&0<--L._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),L.close({disableAutoOpen:!1}),L.open().then(function(){return V(L,A,F,B)})):Mt(M)}return U._promise(A,function(M,J){return Pr(function(){return Fe.trans=U,B(M,J,U)})}).then(function(M){if(A==="readwrite")try{U.idbtrans.commit()}catch{}return A==="readonly"?M:U._completion.then(function(){return M})})}if(L._state.openComplete)return Mt(new pe.DatabaseClosed(L._state.dbOpenError));if(!L._state.isBeingOpened){if(!L._state.autoOpen)return Mt(new pe.DatabaseClosed);L.open().catch(He)}return L._state.dbReadyPromise.then(function(){return V(L,A,F,B)})})(this.db,u,[this.name],I);return S&&(z._consoleTask=S,z=z.catch(function(V){return console.trace(V),Mt(V)})),z}finally{j&&ri()}},St.prototype.get=function(u,f){var g=this;return u&&u.constructor===Object?this.where(u).first(f):u==null?Mt(new pe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(b){return g.core.get({trans:b,key:u}).then(function(k){return g.hook.reading.fire(k)})}).then(f)},St.prototype.where=function(u){if(typeof u=="string")return new this.db.WhereClause(this,u);if(h(u))return new this.db.WhereClause(this,"[".concat(u.join("+"),"]"));var f=d(u);if(f.length===1)return this.where(f[0]).equals(u[f[0]]);var g=this.schema.indexes.concat(this.schema.primKey).filter(function(j){if(j.compound&&f.every(function(V){return 0<=j.keyPath.indexOf(V)})){for(var z=0;z<f.length;++z)if(f.indexOf(j.keyPath[z])===-1)return!1;return!0}return!1}).sort(function(j,z){return j.keyPath.length-z.keyPath.length})[0];if(g&&this.db._maxKey!==li)return I=g.keyPath.slice(0,f.length),this.where(I).equals(I.map(function(j){return u[j]}));!g&&un&&console.warn("The query ".concat(JSON.stringify(u)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(f.join("+"),"]"));var b=this.schema.idxByName;function k(j,z){return Xe(j,z)===0}var I=f.reduce(function(L,z){var V=L[0],L=L[1],A=b[z],F=u[z];return[V||A,V||!A?Rr(L,A&&A.multi?function(B){return B=ye(B,z),h(B)&&B.some(function(U){return k(F,U)})}:function(B){return k(F,ye(B,z))}):L]},[null,null]),S=I[0],I=I[1];return S?this.where(S.name).equals(u[S.keyPath]).filter(I):g?this.filter(I):this.where(f).equals("")},St.prototype.filter=function(u){return this.toCollection().and(u)},St.prototype.count=function(u){return this.toCollection().count(u)},St.prototype.offset=function(u){return this.toCollection().offset(u)},St.prototype.limit=function(u){return this.toCollection().limit(u)},St.prototype.each=function(u){return this.toCollection().each(u)},St.prototype.toArray=function(u){return this.toCollection().toArray(u)},St.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},St.prototype.orderBy=function(u){return new this.db.Collection(new this.db.WhereClause(this,h(u)?"[".concat(u.join("+"),"]"):u))},St.prototype.reverse=function(){return this.toCollection().reverse()},St.prototype.mapToClass=function(u){for(var f=this.db,g=this.name,b=((this.schema.mappedClass=u).prototype instanceof hu&&(u=(I=>{var j=L,z=I;if(typeof z!="function"&&z!==null)throw new TypeError("Class extends value "+String(z)+" is not a constructor or null");function V(){this.constructor=j}function L(){return I!==null&&I.apply(this,arguments)||this}return r(j,z),j.prototype=z===null?Object.create(z):(V.prototype=z.prototype,new V),Object.defineProperty(L.prototype,"db",{get:function(){return f},enumerable:!1,configurable:!0}),L.prototype.table=function(){return g},L})(u)),new Set),k=u.prototype;k;k=m(k))Object.getOwnPropertyNames(k).forEach(function(I){return b.add(I)});function S(I){if(!I)return I;var j,z=Object.create(u.prototype);for(j in I)if(!b.has(j))try{z[j]=I[j]}catch{}return z}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=S,this.hook("reading",S),u},St.prototype.defineClass=function(){return this.mapToClass(function(u){y(this,u)})},St.prototype.add=function(u,f){var g=this,b=this.schema.primKey,k=b.auto,S=b.keyPath,I=u;return S&&k&&(I=In(S)(u)),this._trans("readwrite",function(j){return g.core.mutate({trans:j,type:"add",keys:f!=null?[f]:null,values:[I]})}).then(function(j){return j.numFailures?Ce.reject(j.failures[0]):j.lastResult}).then(function(j){if(S)try{he(u,S,j)}catch{}return j})},St.prototype.upsert=function(u,f){var g=this,b=this.schema.primKey.keyPath;return this._trans("readwrite",function(k){return g.core.get({trans:k,key:u}).then(function(S){var I=S??{};return Gi(I,f),b&&he(I,b,u),g.core.mutate({trans:k,type:"put",values:[I],keys:[u],upsert:!0,updates:{keys:[u],changeSpecs:[f]}}).then(function(j){return j.numFailures?Ce.reject(j.failures[0]):!!S})})})},St.prototype.update=function(u,f){return typeof u!="object"||h(u)?this.where(":id").equals(u).modify(f):(u=ye(u,this.schema.primKey.keyPath))===void 0?Mt(new pe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(u).modify(f)},St.prototype.put=function(u,f){var g=this,b=this.schema.primKey,k=b.auto,S=b.keyPath,I=u;return S&&k&&(I=In(S)(u)),this._trans("readwrite",function(j){return g.core.mutate({trans:j,type:"put",values:[I],keys:f!=null?[f]:null})}).then(function(j){return j.numFailures?Ce.reject(j.failures[0]):j.lastResult}).then(function(j){if(S)try{he(u,S,j)}catch{}return j})},St.prototype.delete=function(u){var f=this;return this._trans("readwrite",function(g){return f.core.mutate({trans:g,type:"delete",keys:[u]}).then(function(b){return Es(f,[u],b)}).then(function(b){return b.numFailures?Ce.reject(b.failures[0]):void 0})})},St.prototype.clear=function(){var u=this;return this._trans("readwrite",function(f){return u.core.mutate({trans:f,type:"deleteRange",range:Lo}).then(function(g){return Es(u,null,g)})}).then(function(f){return f.numFailures?Ce.reject(f.failures[0]):void 0})},St.prototype.bulkGet=function(u){var f=this;return this._trans("readonly",function(g){return f.core.getMany({keys:u,trans:g}).then(function(b){return b.map(function(k){return f.hook.reading.fire(k)})})})},St.prototype.bulkAdd=function(u,f,g){var b=this,k=Array.isArray(f)?f:void 0,S=(g=g||(k?void 0:f))?g.allKeys:void 0;return this._trans("readwrite",function(I){var j=b.schema.primKey,V=j.auto,j=j.keyPath;if(j&&k)throw new pe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(k&&k.length!==u.length)throw new pe.InvalidArgument("Arguments objects and keys must have the same length");var z=u.length,V=j&&V?u.map(In(j)):u;return b.core.mutate({trans:I,type:"add",keys:k,values:V,wantResults:S}).then(function(L){var A=L.numFailures,F=L.failures;if(A===0)return S?L.results:L.lastResult;throw new Re("".concat(b.name,".bulkAdd(): ").concat(A," of ").concat(z," operations failed"),F)})})},St.prototype.bulkPut=function(u,f,g){var b=this,k=Array.isArray(f)?f:void 0,S=(g=g||(k?void 0:f))?g.allKeys:void 0;return this._trans("readwrite",function(I){var j=b.schema.primKey,V=j.auto,j=j.keyPath;if(j&&k)throw new pe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(k&&k.length!==u.length)throw new pe.InvalidArgument("Arguments objects and keys must have the same length");var z=u.length,V=j&&V?u.map(In(j)):u;return b.core.mutate({trans:I,type:"put",keys:k,values:V,wantResults:S}).then(function(L){var A=L.numFailures,F=L.failures;if(A===0)return S?L.results:L.lastResult;throw new Re("".concat(b.name,".bulkPut(): ").concat(A," of ").concat(z," operations failed"),F)})})},St.prototype.bulkUpdate=function(u){var f=this,g=this.core,b=u.map(function(I){return I.key}),k=u.map(function(I){return I.changes}),S=[];return this._trans("readwrite",function(I){return g.getMany({trans:I,keys:b,cache:"clone"}).then(function(j){var z=[],V=[],L=(u.forEach(function(A,F){var B=A.key,U=A.changes,M=j[F];if(M){for(var J=0,Z=Object.keys(U);J<Z.length;J++){var H=Z[J],ne=U[H];if(H===f.schema.primKey.keyPath){if(Xe(ne,B)!==0)throw new pe.Constraint("Cannot update primary key in bulkUpdate()")}else he(M,H,ne)}S.push(F),z.push(B),V.push(M)}}),z.length);return g.mutate({trans:I,type:"put",keys:z,values:V,updates:{keys:b,changeSpecs:k}}).then(function(A){var F=A.numFailures,B=A.failures;if(F===0)return L;for(var U=0,M=Object.keys(B);U<M.length;U++){var J,Z=M[U],H=S[Number(Z)];H!=null&&(J=B[Z],delete B[Z],B[H]=J)}throw new Re("".concat(f.name,".bulkUpdate(): ").concat(F," of ").concat(L," operations failed"),B)})})})},St.prototype.bulkDelete=function(u){var f=this,g=u.length;return this._trans("readwrite",function(b){return f.core.mutate({trans:b,type:"delete",keys:u}).then(function(k){return Es(f,u,k)})}).then(function(b){var k=b.numFailures,S=b.failures;if(k===0)return b.lastResult;throw new Re("".concat(f.name,".bulkDelete(): ").concat(k," of ").concat(g," operations failed"),S)})};var Uo=St;function St(){}function zo(u){function f(I,j){if(j){for(var z=arguments.length,V=new Array(z-1);--z;)V[z-1]=arguments[z];return g[I].subscribe.apply(null,V),u}if(typeof I=="string")return g[I]}var g={};f.addEventType=S;for(var b=1,k=arguments.length;b<k;++b)S(arguments[b]);return f;function S(I,j,z){var V,L;if(typeof I!="object")return j=j||Nl,L={subscribers:[],fire:z=z||He,subscribe:function(A){L.subscribers.indexOf(A)===-1&&(L.subscribers.push(A),L.fire=j(L.fire,A))},unsubscribe:function(A){L.subscribers=L.subscribers.filter(function(F){return F!==A}),L.fire=L.subscribers.reduce(j,z)}},g[I]=f[I]=L;d(V=I).forEach(function(A){var F=V[A];if(h(F))S(A,V[A][0],V[A][1]);else{if(F!=="asap")throw new pe.InvalidArgument("Invalid event config");var B=S(A,it,function(){for(var U=arguments.length,M=new Array(U);U--;)M[U]=arguments[U];B.subscribers.forEach(function(J){Ee(function(){J.apply(null,M)})})})}})}}function ai(u,f){return P(f).from({prototype:u}),f}function ui(u,f){return!(u.filter||u.algorithm||u.or)&&(f?u.justLimit:!u.replayFilter)}function Fo(u,f){u.filter=Rr(u.filter,f)}function ci(u,f,g){var b=u.replayFilter;u.replayFilter=b?function(){return Rr(b(),f())}:f,u.justLimit=g&&!b}function Cs(u,f){if(u.isPrimKey)return f.primaryKey;var g=f.getIndexByKeyPath(u.index);if(g)return g;throw new pe.Schema("KeyPath "+u.index+" on object store "+f.name+" is not indexed")}function Is(u,f,g){var b=Cs(u,f.schema);return f.openCursor({trans:g,values:!u.keysOnly,reverse:u.dir==="prev",unique:!!u.unique,query:{index:b,range:u.range}})}function ht(u,f,g,b){var k,S,I=u.replayFilter?Rr(u.filter,u.replayFilter()):u.filter;return u.or?(k={},S=function(j,z,V){var L,A;I&&!I(z,V,function(F){return z.stop(F)},function(F){return z.fail(F)})||((A=""+(L=z.primaryKey))=="[object ArrayBuffer]"&&(A=""+new Uint8Array(L)),w(k,A))||(k[A]=!0,f(j,z,V))},Promise.all([u.or._iterate(S,g),Ul(Is(u,b,g),u.algorithm,S,!u.keysOnly&&u.valueMapper)])):Ul(Is(u,b,g),Rr(u.algorithm,I),f,!u.keysOnly&&u.valueMapper)}function Ul(u,f,g,b){var k=_t(b?function(S,I,j){return g(b(S),I,j)}:g);return u.then(function(S){if(S)return S.start(function(){var I=function(){return S.continue()};f&&!f(S,function(j){return I=j},function(j){S.stop(j),I=He},function(j){S.fail(j),I=He})||k(S.value,S,function(j){return I=j}),I()})})}dt.prototype._read=function(u,f){var g=this._ctx;return g.error?g.table._trans(null,Mt.bind(null,g.error)):g.table._trans("readonly",u).then(f)},dt.prototype._write=function(u){var f=this._ctx;return f.error?f.table._trans(null,Mt.bind(null,f.error)):f.table._trans("readwrite",u,"locked")},dt.prototype._addAlgorithm=function(u){var f=this._ctx;f.algorithm=Rr(f.algorithm,u)},dt.prototype._iterate=function(u,f){return ht(this._ctx,u,f,this._ctx.table.core)},dt.prototype.clone=function(u){var f=Object.create(this.constructor.prototype),g=Object.create(this._ctx);return u&&y(g,u),f._ctx=g,f},dt.prototype.raw=function(){return this._ctx.valueMapper=null,this},dt.prototype.each=function(u){var f=this._ctx;return this._read(function(g){return ht(f,u,g,f.table.core)})},dt.prototype.count=function(u){var f=this;return this._read(function(g){var b,k=f._ctx,S=k.table.core;return ui(k,!0)?S.count({trans:g,query:{index:Cs(k,S.schema),range:k.range}}).then(function(I){return Math.min(I,k.limit)}):(b=0,ht(k,function(){return++b,!1},g,S).then(function(){return b}))}).then(u)},dt.prototype.sortBy=function(u,f){var g=u.split(".").reverse(),b=g[0],k=g.length-1;function S(z,V){return V?S(z[g[V]],V-1):z[b]}var I=this._ctx.dir==="next"?1:-1;function j(z,V){return Xe(S(z,k),S(V,k))*I}return this.toArray(function(z){return z.sort(j)}).then(f)},dt.prototype.toArray=function(u){var f=this;return this._read(function(g){var b,k,S,I=f._ctx;return I.dir==="next"&&ui(I,!0)&&0<I.limit?(b=I.valueMapper,k=Cs(I,I.table.core.schema),I.table.core.query({trans:g,limit:I.limit,values:!0,query:{index:k,range:I.range}}).then(function(j){return j=j.result,b?j.map(b):j})):(S=[],ht(I,function(j){return S.push(j)},g,I.table.core).then(function(){return S}))},u)},dt.prototype.offset=function(u){var f=this._ctx;return u<=0||(f.offset+=u,ui(f)?ci(f,function(){var g=u;return function(b,k){return g===0||(g===1?--g:k(function(){b.advance(g),g=0}),!1)}}):ci(f,function(){var g=u;return function(){return--g<0}})),this},dt.prototype.limit=function(u){return this._ctx.limit=Math.min(this._ctx.limit,u),ci(this._ctx,function(){var f=u;return function(g,b,k){return--f<=0&&b(k),0<=f}},!0),this},dt.prototype.until=function(u,f){return Fo(this._ctx,function(g,b,k){return!u(g.value)||(b(k),f)}),this},dt.prototype.first=function(u){return this.limit(1).toArray(function(f){return f[0]}).then(u)},dt.prototype.last=function(u){return this.reverse().first(u)},dt.prototype.filter=function(u){var f;return Fo(this._ctx,function(g){return u(g.value)}),(f=this._ctx).isMatch=Rr(f.isMatch,u),this},dt.prototype.and=function(u){return this.filter(u)},dt.prototype.or=function(u){return new this.db.WhereClause(this._ctx.table,u,this)},dt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},dt.prototype.desc=function(){return this.reverse()},dt.prototype.eachKey=function(u){var f=this._ctx;return f.keysOnly=!f.isMatch,this.each(function(g,b){u(b.key,b)})},dt.prototype.eachUniqueKey=function(u){return this._ctx.unique="unique",this.eachKey(u)},dt.prototype.eachPrimaryKey=function(u){var f=this._ctx;return f.keysOnly=!f.isMatch,this.each(function(g,b){u(b.primaryKey,b)})},dt.prototype.keys=function(u){var f=this._ctx,g=(f.keysOnly=!f.isMatch,[]);return this.each(function(b,k){g.push(k.key)}).then(function(){return g}).then(u)},dt.prototype.primaryKeys=function(u){var f=this._ctx;if(f.dir==="next"&&ui(f,!0)&&0<f.limit)return this._read(function(b){var k=Cs(f,f.table.core.schema);return f.table.core.query({trans:b,values:!1,limit:f.limit,query:{index:k,range:f.range}})}).then(function(b){return b.result}).then(u);f.keysOnly=!f.isMatch;var g=[];return this.each(function(b,k){g.push(k.primaryKey)}).then(function(){return g}).then(u)},dt.prototype.uniqueKeys=function(u){return this._ctx.unique="unique",this.keys(u)},dt.prototype.firstKey=function(u){return this.limit(1).keys(function(f){return f[0]}).then(u)},dt.prototype.lastKey=function(u){return this.reverse().firstKey(u)},dt.prototype.distinct=function(){var u,f=this._ctx,f=f.index&&f.table.schema.idxByName[f.index];return f&&f.multi&&(u={},Fo(this._ctx,function(b){var b=b.primaryKey.toString(),k=w(u,b);return u[b]=!0,!k})),this},dt.prototype.modify=function(u){var f=this,g=this._ctx;return this._write(function(b){function k(M,J){var Z=J.failures;F+=M-J.numFailures;for(var H=0,ne=d(Z);H<ne.length;H++){var oe=ne[H];A.push(Z[oe])}}var S=typeof u=="function"?u:function(M){return Gi(M,u)},I=g.table.core,L=I.schema.primaryKey,j=L.outbound,z=L.extractKey,V=200,L=f.db._options.modifyChunkSize,A=(L&&(V=typeof L=="object"?L[I.name]||L["*"]||200:L),[]),F=0,B=[],U=u===zl;return f.clone().primaryKeys().then(function(M){function J(H){var ne=Math.min(V,M.length-H),oe=M.slice(H,H+ne);return(U?Promise.resolve([]):I.getMany({trans:b,keys:oe,cache:"immutable"})).then(function(xe){var Se=[],ue=[],je=j?[]:null,Oe=U?oe:[];if(!U)for(var ve=0;ve<ne;++ve){var Ne=xe[ve],ut={value:Le(Ne),primKey:M[H+ve]};S.call(ut,ut.value,ut)!==!1&&(ut.value==null?Oe.push(M[H+ve]):j||Xe(z(Ne),z(ut.value))===0?(ue.push(ut.value),j&&je.push(M[H+ve])):(Oe.push(M[H+ve]),Se.push(ut.value)))}return Promise.resolve(0<Se.length&&I.mutate({trans:b,type:"add",values:Se}).then(function(ft){for(var qe in ft.failures)Oe.splice(parseInt(qe),1);k(Se.length,ft)})).then(function(){return(0<ue.length||Z&&typeof u=="object")&&I.mutate({trans:b,type:"put",keys:je,values:ue,criteria:Z,changeSpec:typeof u!="function"&&u,isAdditionalChunk:0<H}).then(function(ft){return k(ue.length,ft)})}).then(function(){return(0<Oe.length||Z&&U)&&I.mutate({trans:b,type:"delete",keys:Oe,criteria:Z,isAdditionalChunk:0<H}).then(function(ft){return Es(g.table,Oe,ft)}).then(function(ft){return k(Oe.length,ft)})}).then(function(){return M.length>H+ne&&J(H+V)})})}var Z=ui(g)&&g.limit===1/0&&(typeof u!="function"||U)&&{index:g.index,range:g.range};return J(0).then(function(){if(0<A.length)throw new We("Error modifying one or more objects",A,F,B);return M.length})})})},dt.prototype.delete=function(){var u=this._ctx,f=u.range;return!ui(u)||u.table.schema.yProps||!u.isPrimKey&&f.type!==3?this.modify(zl):this._write(function(g){var b=u.table.core.schema.primaryKey,k=f;return u.table.core.count({trans:g,query:{index:b,range:k}}).then(function(S){return u.table.core.mutate({trans:g,type:"deleteRange",range:k}).then(function(z){var j=z.failures,z=z.numFailures;if(z)throw new We("Could not delete some values",Object.keys(j).map(function(V){return j[V]}),S-z);return S-z})})})};var yu=dt;function dt(){}var zl=function(u,f){return f.value=null};function gu(u,f){return u<f?-1:u===f?0:1}function vu(u,f){return f<u?-1:u===f?0:1}function cn(u,f,g){return u=u instanceof Yi?new u.Collection(u):u,u._ctx.error=new(g||TypeError)(f),u}function hr(u){return new u.Collection(u,function(){return pr("")}).limit(0)}function Bn(B,f,g,b){var k,S,I,j,z,V,L,A=g.length;if(!g.every(function(M){return typeof M=="string"}))return cn(B,fu);function F(M){k=M==="next"?function(Z){return Z.toUpperCase()}:function(Z){return Z.toLowerCase()},S=M==="next"?function(Z){return Z.toLowerCase()}:function(Z){return Z.toUpperCase()},I=M==="next"?gu:vu;var J=g.map(function(Z){return{lower:S(Z),upper:k(Z)}}).sort(function(Z,H){return I(Z.lower,H.lower)});j=J.map(function(Z){return Z.upper}),z=J.map(function(Z){return Z.lower}),L=(V=M)==="next"?"":b}F("next");var B=new B.Collection(B,function(){return dn(j[0],z[A-1]+b)}),U=(B._ondirectionchange=function(M){F(M)},0);return B._addAlgorithm(function(M,J,Z){var H=M.key;if(typeof H=="string"){var ne=S(H);if(f(ne,z,U))return!0;for(var oe=null,xe=U;xe<A;++xe){var Se=((ue,je,Oe,ve,Ne,ut)=>{for(var ft=Math.min(ue.length,ve.length),qe=-1,nt=0;nt<ft;++nt){var jt=je[nt];if(jt!==ve[nt])return Ne(ue[nt],Oe[nt])<0?ue.substr(0,nt)+Oe[nt]+Oe.substr(nt+1):Ne(ue[nt],ve[nt])<0?ue.substr(0,nt)+ve[nt]+Oe.substr(nt+1):0<=qe?ue.substr(0,qe)+je[qe]+Oe.substr(qe+1):null;Ne(ue[nt],jt)<0&&(qe=nt)}return ft<ve.length&&ut==="next"?ue+Oe.substr(ue.length):ft<ue.length&&ut==="prev"?ue.substr(0,Oe.length):qe<0?null:ue.substr(0,qe)+ve[qe]+Oe.substr(qe+1)})(H,ne,j[xe],z[xe],I,V);Se===null&&oe===null?U=xe+1:(oe===null||0<I(oe,Se))&&(oe=Se)}J(oe!==null?function(){M.continue(oe+L)}:Z)}return!1}),B}function dn(u,f,g,b){return{type:2,lower:u,upper:f,lowerOpen:g,upperOpen:b}}function pr(u){return{type:1,lower:u,upper:u}}Object.defineProperty(Dt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Dt.prototype.between=function(u,f,g,b){g=g!==!1,b=b===!0;try{return 0<this._cmp(u,f)||this._cmp(u,f)===0&&(g||b)&&(!g||!b)?hr(this):new this.Collection(this,function(){return dn(u,f,!g,!b)})}catch{return cn(this,wt)}},Dt.prototype.equals=function(u){return u==null?cn(this,wt):new this.Collection(this,function(){return pr(u)})},Dt.prototype.above=function(u){return u==null?cn(this,wt):new this.Collection(this,function(){return dn(u,void 0,!0)})},Dt.prototype.aboveOrEqual=function(u){return u==null?cn(this,wt):new this.Collection(this,function(){return dn(u,void 0,!1)})},Dt.prototype.below=function(u){return u==null?cn(this,wt):new this.Collection(this,function(){return dn(void 0,u,!1,!0)})},Dt.prototype.belowOrEqual=function(u){return u==null?cn(this,wt):new this.Collection(this,function(){return dn(void 0,u)})},Dt.prototype.startsWith=function(u){return typeof u!="string"?cn(this,fu):this.between(u,u+li,!0,!0)},Dt.prototype.startsWithIgnoreCase=function(u){return u===""?this.startsWith(u):Bn(this,function(f,g){return f.indexOf(g[0])===0},[u],li)},Dt.prototype.equalsIgnoreCase=function(u){return Bn(this,function(f,g){return f===g[0]},[u],"")},Dt.prototype.anyOfIgnoreCase=function(){var u=le.apply(re,arguments);return u.length===0?hr(this):Bn(this,function(f,g){return g.indexOf(f)!==-1},u,"")},Dt.prototype.startsWithAnyOfIgnoreCase=function(){var u=le.apply(re,arguments);return u.length===0?hr(this):Bn(this,function(f,g){return g.some(function(b){return f.indexOf(b)===0})},u,li)},Dt.prototype.anyOf=function(){var u,f,g=this,b=le.apply(re,arguments),k=this._cmp;try{b.sort(k)}catch{return cn(this,wt)}return b.length===0?hr(this):((u=new this.Collection(this,function(){return dn(b[0],b[b.length-1])}))._ondirectionchange=function(S){k=S==="next"?g._ascending:g._descending,b.sort(k)},f=0,u._addAlgorithm(function(S,I,j){for(var z=S.key;0<k(z,b[f]);)if(++f===b.length)return I(j),!1;return k(z,b[f])===0||(I(function(){S.continue(b[f])}),!1)}),u)},Dt.prototype.notEqual=function(u){return this.inAnyRange([[-1/0,u],[u,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Dt.prototype.noneOf=function(){var u=le.apply(re,arguments);if(u.length===0)return new this.Collection(this);try{u.sort(this._ascending)}catch{return cn(this,wt)}var f=u.reduce(function(g,b){return g?g.concat([[g[g.length-1][1],b]]):[[-1/0,b]]},null);return f.push([u[u.length-1],this.db._maxKey]),this.inAnyRange(f,{includeLowers:!1,includeUppers:!1})},Dt.prototype.inAnyRange=function(u,Z){var g=this,b=this._cmp,k=this._ascending,S=this._descending,I=this._min,j=this._max;if(u.length===0)return hr(this);if(!u.every(function(H){return H[0]!==void 0&&H[1]!==void 0&&k(H[0],H[1])<=0}))return cn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",pe.InvalidArgument);var z=!Z||Z.includeLowers!==!1,V=Z&&Z.includeUppers===!0,L,A=k;function F(H,ne){return A(H[0],ne[0])}try{(L=u.reduce(function(H,ne){for(var oe=0,xe=H.length;oe<xe;++oe){var Se=H[oe];if(b(ne[0],Se[1])<0&&0<b(ne[1],Se[0])){Se[0]=I(Se[0],ne[0]),Se[1]=j(Se[1],ne[1]);break}}return oe===xe&&H.push(ne),H},[])).sort(F)}catch{return cn(this,wt)}var B=0,U=V?function(H){return 0<k(H,L[B][1])}:function(H){return 0<=k(H,L[B][1])},M=z?function(H){return 0<S(H,L[B][0])}:function(H){return 0<=S(H,L[B][0])},J=U,Z=new this.Collection(this,function(){return dn(L[0][0],L[L.length-1][1],!z,!V)});return Z._ondirectionchange=function(H){A=H==="next"?(J=U,k):(J=M,S),L.sort(F)},Z._addAlgorithm(function(H,ne,oe){for(var xe,Se=H.key;J(Se);)if(++B===L.length)return ne(oe),!1;return!U(xe=Se)&&!M(xe)||(g._cmp(Se,L[B][1])===0||g._cmp(Se,L[B][0])===0||ne(function(){A===k?H.continue(L[B][0]):H.continue(L[B][1])}),!1)}),Z},Dt.prototype.startsWithAnyOf=function(){var u=le.apply(re,arguments);return u.every(function(f){return typeof f=="string"})?u.length===0?hr(this):this.inAnyRange(u.map(function(f){return[f,f+li]})):cn(this,"startsWithAnyOf() only works with strings")};var Yi=Dt;function Dt(){}function qt(u){return _t(function(f){return Bo(f),u(f.target.error),!1})}function Bo(u){u.stopPropagation&&u.stopPropagation(),u.preventDefault&&u.preventDefault()}var Qi="storagemutated",di="x-storagemutated-1",Mr=zo(null,Qi),wu=(On.prototype._lock=function(){return G(!Fe.global),++this._reculock,this._reculock!==1||Fe.global||(Fe.lockOwnerFor=this),this},On.prototype._unlock=function(){if(G(!Fe.global),--this._reculock==0)for(Fe.global||(Fe.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var u=this._blockedFuncs.shift();try{Ar(u[1],u[0])}catch{}}return this},On.prototype._locked=function(){return this._reculock&&Fe.lockOwnerFor!==this},On.prototype.create=function(u){var f=this;if(this.mode){var g=this.db.idbdb,b=this.db._state.dbOpenError;if(G(!this.idbtrans),!u&&!g)switch(b&&b.name){case"DatabaseClosedError":throw new pe.DatabaseClosed(b);case"MissingAPIError":throw new pe.MissingAPI(b.message,b);default:throw new pe.OpenFailed(b)}if(!this.active)throw new pe.TransactionInactive;G(this._completion._state===null),(u=this.idbtrans=u||(this.db.core||g).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=_t(function(k){Bo(k),f._reject(u.error)}),u.onabort=_t(function(k){Bo(k),f.active&&f._reject(new pe.Abort(u.error)),f.active=!1,f.on("abort").fire(k)}),u.oncomplete=_t(function(){f.active=!1,f._resolve(),"mutatedParts"in u&&Mr.storagemutated.fire(u.mutatedParts)})}return this},On.prototype._promise=function(u,f,g){var b,k=this;return u==="readwrite"&&this.mode!=="readwrite"?Mt(new pe.ReadOnly("Transaction is readonly")):this.active?this._locked()?new Ce(function(S,I){k._blockedFuncs.push([function(){k._promise(u,f,g).then(S,I)},Fe])}):g?Pr(function(){var S=new Ce(function(I,j){k._lock();var z=f(I,j,k);z&&z.then&&z.then(I,j)});return S.finally(function(){return k._unlock()}),S._lib=!0,S}):((b=new Ce(function(S,I){var j=f(S,I,k);j&&j.then&&j.then(S,I)}))._lib=!0,b):Mt(new pe.TransactionInactive)},On.prototype._root=function(){return this.parent?this.parent._root():this},On.prototype.waitFor=function(u){var f,g=this._root(),b=Ce.resolve(u),k=(g._waitingFor?g._waitingFor=g._waitingFor.then(function(){return b}):(g._waitingFor=b,g._waitingQueue=[],f=g.idbtrans.objectStore(g.storeNames[0]),(function S(){for(++g._spinCount;g._waitingQueue.length;)g._waitingQueue.shift()();g._waitingFor&&(f.get(-1/0).onsuccess=S)})()),g._waitingFor);return new Ce(function(S,I){b.then(function(j){return g._waitingQueue.push(_t(S.bind(null,j)))},function(j){return g._waitingQueue.push(_t(I.bind(null,j)))}).finally(function(){g._waitingFor===k&&(g._waitingFor=null)})})},On.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new pe.Abort))},On.prototype.table=function(u){var f=this._memoizedTables||(this._memoizedTables={});if(w(f,u))return f[u];var g=this.schema[u];if(g)return(g=new this.db.Table(u,g,this)).core=this.db.core.table(u),f[u]=g;throw new pe.NotFound("Table "+u+" not part of transaction")},On);function On(){}function Os(u,f,g,b,k,S,I,j){return{name:u,keyPath:f,unique:g,multi:b,auto:k,compound:S,src:(g&&!I?"&":"")+(b?"*":"")+(k?"++":"")+bu(f),type:j}}function bu(u){return typeof u=="string"?u:u?"["+[].join.call(u,"+")+"]":""}function fi(u,f,g){return{name:u,primKey:f,indexes:g,mappedClass:null,idxByName:(b=function(k){return[k.name,k]},g.reduce(function(k,S,I){return S=b(S,I),S&&(k[S[0]]=S[1]),k},{}))};var b}var mr=function(u){try{return u.only([[]]),mr=function(){return[[]]},[[]]}catch{return mr=function(){return li},li}};function Ur(u){return u==null?function(){}:typeof u=="string"?(f=u).split(".").length===1?function(g){return g[f]}:function(g){return ye(g,f)}:function(g){return ye(g,u)};var f}function $o(u){return[].slice.call(u)}var Cd=0;function Ko(u){return u==null?":id":typeof u=="string"?u:"[".concat(u.join("+"),"]")}function Fl(u,f,z){function b(U){if(U.type===3)return null;if(U.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var A=U.lower,F=U.upper,B=U.lowerOpen,U=U.upperOpen;return A===void 0?F===void 0?null:f.upperBound(F,!!U):F===void 0?f.lowerBound(A,!!B):f.bound(A,F,!!B,!!U)}function k(L){var A,F=L.name;return{name:F,schema:L,mutate:function(B){var U=B.trans,M=B.type,J=B.keys,Z=B.values,H=B.range;return new Promise(function(ne,oe){ne=_t(ne);var xe=U.objectStore(F),Se=xe.keyPath==null,ue=M==="put"||M==="add";if(!ue&&M!=="delete"&&M!=="deleteRange")throw new Error("Invalid operation type: "+M);var je,Oe=(J||Z||{length:1}).length;if(J&&Z&&J.length!==Z.length)throw new Error("Given keys array must have same length as given values array.");if(Oe===0)return ne({numFailures:0,failures:{},results:[],lastResult:void 0});function ve(bt){++ft,Bo(bt)}var Ne=[],ut=[],ft=0;if(M==="deleteRange"){if(H.type===4)return ne({numFailures:ft,failures:ut,results:[],lastResult:void 0});H.type===3?Ne.push(je=xe.clear()):Ne.push(je=xe.delete(b(H)))}else{var Se=ue?Se?[Z,J]:[Z,null]:[J,null],qe=Se[0],nt=Se[1];if(ue)for(var jt=0;jt<Oe;++jt)Ne.push(je=nt&&nt[jt]!==void 0?xe[M](qe[jt],nt[jt]):xe[M](qe[jt])),je.onerror=ve;else for(jt=0;jt<Oe;++jt)Ne.push(je=xe[M](qe[jt])),je.onerror=ve}function jn(bt){bt=bt.target.result,Ne.forEach(function(br,Go){return br.error!=null&&(ut[Go]=br.error)}),ne({numFailures:ft,failures:ut,results:M==="delete"?J:Ne.map(function(br){return br.result}),lastResult:bt})}je.onerror=function(bt){ve(bt),jn(bt)},je.onsuccess=jn})},getMany:function(B){var U=B.trans,M=B.keys;return new Promise(function(J,Z){J=_t(J);for(var H,ne=U.objectStore(F),oe=M.length,xe=new Array(oe),Se=0,ue=0,je=function(Ne){Ne=Ne.target,xe[Ne._pos]=Ne.result,++ue===Se&&J(xe)},Oe=qt(Z),ve=0;ve<oe;++ve)M[ve]!=null&&((H=ne.get(M[ve]))._pos=ve,H.onsuccess=je,H.onerror=Oe,++Se);Se===0&&J(xe)})},get:function(B){var U=B.trans,M=B.key;return new Promise(function(J,Z){J=_t(J);var H=U.objectStore(F).get(M);H.onsuccess=function(ne){return J(ne.target.result)},H.onerror=qt(Z)})},query:(A=j,function(B){return new Promise(function(U,M){U=_t(U);var J,Z,H,ue=B.trans,ne=B.values,oe=B.limit,Se=B.query,xe=oe===1/0?void 0:oe,je=Se.index,Se=Se.range,ue=ue.objectStore(F),ue=je.isPrimaryKey?ue:ue.index(je.name),je=b(Se);if(oe===0)return U({result:[]});A?((Se=ne?ue.getAll(je,xe):ue.getAllKeys(je,xe)).onsuccess=function(Oe){return U({result:Oe.target.result})},Se.onerror=qt(M)):(J=0,Z=!ne&&"openKeyCursor"in ue?ue.openKeyCursor(je):ue.openCursor(je),H=[],Z.onsuccess=function(Oe){var ve=Z.result;return!ve||(H.push(ne?ve.value:ve.primaryKey),++J===oe)?U({result:H}):void ve.continue()},Z.onerror=qt(M))})}),openCursor:function(B){var U=B.trans,M=B.values,J=B.query,Z=B.reverse,H=B.unique;return new Promise(function(ne,oe){ne=_t(ne);var ue=J.index,xe=J.range,Se=U.objectStore(F),Se=ue.isPrimaryKey?Se:Se.index(ue.name),ue=Z?H?"prevunique":"prev":H?"nextunique":"next",je=!M&&"openKeyCursor"in Se?Se.openKeyCursor(b(xe),ue):Se.openCursor(b(xe),ue);je.onerror=qt(oe),je.onsuccess=_t(function(Oe){var ve,Ne,ut,ft,qe=je.result;qe?(qe.___id=++Cd,qe.done=!1,ve=qe.continue.bind(qe),Ne=(Ne=qe.continuePrimaryKey)&&Ne.bind(qe),ut=qe.advance.bind(qe),ft=function(){throw new Error("Cursor not stopped")},qe.trans=U,qe.stop=qe.continue=qe.continuePrimaryKey=qe.advance=function(){throw new Error("Cursor not started")},qe.fail=_t(oe),qe.next=function(){var nt=this,jt=1;return this.start(function(){return jt--?nt.continue():nt.stop()}).then(function(){return nt})},qe.start=function(nt){function jt(){if(je.result)try{nt()}catch(bt){qe.fail(bt)}else qe.done=!0,qe.start=function(){throw new Error("Cursor behind last entry")},qe.stop()}var jn=new Promise(function(bt,br){bt=_t(bt),je.onerror=qt(br),qe.fail=br,qe.stop=function(Go){qe.stop=qe.continue=qe.continuePrimaryKey=qe.advance=ft,bt(Go)}});return je.onsuccess=_t(function(bt){je.onsuccess=jt,jt()}),qe.continue=ve,qe.continuePrimaryKey=Ne,qe.advance=ut,jt(),jn},ne(qe)):ne(null)},oe)})},count:function(B){var U=B.query,M=B.trans,J=U.index,Z=U.range;return new Promise(function(H,ne){var oe=M.objectStore(F),oe=J.isPrimaryKey?oe:oe.index(J.name),xe=b(Z),xe=xe?oe.count(xe):oe.count();xe.onsuccess=_t(function(Se){return H(Se.target.result)}),xe.onerror=qt(ne)})}}}S=z,I=$o((z=u).objectStoreNames);var S,z={schema:{name:z.name,tables:I.map(function(L){return S.objectStore(L)}).map(function(L){var A=L.keyPath,F=L.autoIncrement,U=h(A),B={},U={name:L.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:A==null,compound:U,keyPath:A,autoIncrement:F,unique:!0,extractKey:Ur(A)},indexes:$o(L.indexNames).map(function(M){return L.index(M)}).map(function(H){var ne=H.name,J=H.unique,Z=H.multiEntry,H=H.keyPath,ne={name:ne,compound:h(H),keyPath:H,unique:J,multiEntry:Z,extractKey:Ur(H)};return B[Ko(H)]=ne}),getIndexByKeyPath:function(M){return B[Ko(M)]}};return B[":id"]=U.primaryKey,A!=null&&(B[Ko(A)]=U.primaryKey),U})},hasGetAll:0<I.length&&"getAll"in S.objectStore(I[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},I=z.schema,j=z.hasGetAll,z=I.tables.map(k),V={};return z.forEach(function(L){return V[L.name]=L}),{stack:"dbcore",transaction:u.transaction.bind(u),table:function(L){if(V[L])return V[L];throw new Error("Table '".concat(L,"' not found"))},MIN_KEY:-1/0,MAX_KEY:mr(f),schema:I}}function js(u,f,g,b){return g=g.IDBKeyRange,f=Fl(f,g,b),{dbcore:u.dbcore.reduce(function(k,S){return S=S.create,o(o({},k),S(k))},f)}}function Ji(u,f){var g=f.db,g=js(u._middlewares,g,u._deps,f);u.core=g.dbcore,u.tables.forEach(function(b){var k=b.name;u.core.schema.tables.some(function(S){return S.name===k})&&(b.core=u.core.table(k),u[k]instanceof u.Table)&&(u[k].core=b.core)})}function Vo(u,f,g,b){g.forEach(function(k){var S=b[k];f.forEach(function(I){var j=(function z(V,L){return W(V,L)||(V=m(V))&&z(V,L)})(I,k);(!j||"value"in j&&j.value===void 0)&&(I===u.Transaction.prototype||I instanceof u.Transaction?O(I,k,{get:function(){return this.table(k)},set:function(z){C(this,k,{value:z,writable:!0,configurable:!0,enumerable:!0})}}):I[k]=new u.Table(k,S))})})}function Jn(u,f){f.forEach(function(g){for(var b in g)g[b]instanceof u.Table&&delete g[b]})}function Bl(u,f){return u._cfg.version-f._cfg.version}function Ts(u,f,g,b){var k=u._dbSchema,S=(g.objectStoreNames.contains("$meta")&&!k.$meta&&(k.$meta=fi("$meta",to("")[0],[]),u._storeNames.push("$meta")),u._createTransaction("readwrite",u._storeNames,k)),I=(S.create(g),S._completion.catch(b),S._reject.bind(S)),j=Fe.transless||Fe;Pr(function(){if(Fe.trans=S,Fe.transless=j,f!==0)return Ji(u,g),V=f,((z=S).storeNames.includes("$meta")?z.table("$meta").get("version").then(function(L){return L??V}):Ce.resolve(V)).then(function(J){var A=u,F=J,B=S,U=g,M=[],J=A._versions,Z=A._dbSchema=yr(0,A.idbdb,U);return(J=J.filter(function(H){return H._cfg.version>=F})).length===0?Ce.resolve():(J.forEach(function(H){M.push(function(){var ne,oe,xe,Se=Z,ue=H._cfg.dbschema,je=(eo(A,Se,U),eo(A,ue,U),Z=A._dbSchema=ue,Xi(Se,ue)),Oe=(je.add.forEach(function(ve){Zi(U,ve[0],ve[1].primKey,ve[1].indexes)}),je.change.forEach(function(ve){if(ve.recreate)throw new pe.Upgrade("Not yet support for changing primary key");var Ne=U.objectStore(ve.name);ve.add.forEach(function(ut){return tn(Ne,ut)}),ve.change.forEach(function(ut){Ne.deleteIndex(ut.name),tn(Ne,ut)}),ve.del.forEach(function(ut){return Ne.deleteIndex(ut)})}),H._cfg.contentUpgrade);if(Oe&&H._cfg.version>F)return Ji(A,U),B._memoizedTables={},ne=se(ue),je.del.forEach(function(ve){ne[ve]=Se[ve]}),Jn(A,[A.Transaction.prototype]),Vo(A,[A.Transaction.prototype],d(ne),ne),B.schema=ne,(oe=N(Oe))&&Hi(),ue=Ce.follow(function(){var ve;(xe=Oe(B))&&oe&&(ve=wn.bind(null,null),xe.then(ve,ve))}),xe&&typeof xe.then=="function"?Ce.resolve(xe):ue.then(function(){return xe})}),M.push(function(ne){var oe,xe,Se=H._cfg.dbschema;oe=Se,xe=ne,[].slice.call(xe.db.objectStoreNames).forEach(function(ue){return oe[ue]==null&&xe.db.deleteObjectStore(ue)}),Jn(A,[A.Transaction.prototype]),Vo(A,[A.Transaction.prototype],A._storeNames,A._dbSchema),B.schema=A._dbSchema}),M.push(function(ne){A.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(A.idbdb.version/10)===H._cfg.version?(A.idbdb.deleteObjectStore("$meta"),delete A._dbSchema.$meta,A._storeNames=A._storeNames.filter(function(oe){return oe!=="$meta"})):ne.objectStore("$meta").put(H._cfg.version,"version"))})}),(function H(){return M.length?Ce.resolve(M.shift()(B.idbtrans)).then(H):Ce.resolve()})().then(function(){$l(Z,U)}))}).catch(I);var z,V;d(k).forEach(function(L){Zi(g,L,k[L].primKey,k[L].indexes)}),Ji(u,g),Ce.follow(function(){return u.on.populate.fire(S)}).catch(I)})}function _u(u,f){$l(u._dbSchema,f),f.db.version%10!=0||f.objectStoreNames.contains("$meta")||f.db.createObjectStore("$meta").add(Math.ceil(f.db.version/10-1),"version");var g=yr(0,u.idbdb,f);eo(u,u._dbSchema,f);for(var b=0,k=Xi(g,u._dbSchema).change;b<k.length;b++){var S=(I=>{if(I.change.length||I.recreate)return console.warn("Unable to patch indexes of table ".concat(I.name," because it has changes on the type of index or primary key.")),{value:void 0};var j=f.objectStore(I.name);I.add.forEach(function(z){un&&console.debug("Dexie upgrade patch: Creating missing index ".concat(I.name,".").concat(z.src)),tn(j,z)})})(k[b]);if(typeof S=="object")return S.value}}function Xi(u,f){var g,b={del:[],add:[],change:[]};for(g in u)f[g]||b.del.push(g);for(g in f){var k=u[g],S=f[g];if(k){var I={name:g,def:S,recreate:!1,del:[],add:[],change:[]};if(""+(k.primKey.keyPath||"")!=""+(S.primKey.keyPath||"")||k.primKey.auto!==S.primKey.auto)I.recreate=!0,b.change.push(I);else{var j=k.idxByName,z=S.idxByName,V=void 0;for(V in j)z[V]||I.del.push(V);for(V in z){var L=j[V],A=z[V];L?L.src!==A.src&&I.change.push(A):I.add.push(A)}(0<I.del.length||0<I.add.length||0<I.change.length)&&b.change.push(I)}}else b.add.push([g,S])}return b}function Zi(u,f,g,b){var k=u.db.createObjectStore(f,g.keyPath?{keyPath:g.keyPath,autoIncrement:g.auto}:{autoIncrement:g.auto});b.forEach(function(S){return tn(k,S)})}function $l(u,f){d(u).forEach(function(g){f.db.objectStoreNames.contains(g)||(un&&console.debug("Dexie: Creating missing table",g),Zi(f,g,u[g].primKey,u[g].indexes))})}function tn(u,f){u.createIndex(f.name,f.keyPath,{unique:f.unique,multiEntry:f.multi})}function yr(u,f,g){var b={};return te(f.objectStoreNames,0).forEach(function(k){for(var S=g.objectStore(k),I=Os(bu(V=S.keyPath),V||"",!0,!1,!!S.autoIncrement,V&&typeof V!="string",!0),j=[],z=0;z<S.indexNames.length;++z){var L=S.index(S.indexNames[z]),V=L.keyPath,L=Os(L.name,V,!!L.unique,!!L.multiEntry,!1,V&&typeof V!="string",!1);j.push(L)}b[k]=fi(k,I,j)}),b}function eo(u,f,g){for(var b=g.db.objectStoreNames,k=0;k<b.length;++k){var S=b[k],I=g.objectStore(S);u._hasGetAll="getAll"in I;for(var j=0;j<I.indexNames.length;++j){var z,V=I.indexNames[j],L=I.index(V).keyPath,L=typeof L=="string"?L:"["+te(L).join("+")+"]";f[S]&&(z=f[S].idxByName[L])&&(z.name=V,delete f[S].idxByName[L],f[S].idxByName[V]=z)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(u._hasGetAll=!1)}function to(u){return u.split(",").map(function(f,g){var k=f.split(":"),b=(b=k[1])==null?void 0:b.trim(),k=(f=k[0].trim()).replace(/([&*]|\+\+)/g,""),S=/^\[/.test(k)?k.match(/^\[(.*)\]$/)[1].split("+"):k;return Os(k,S||null,/\&/.test(f),/\*/.test(f),/\+\+/.test(f),h(S),g===0,b)})}zr.prototype._createTableSchema=fi,zr.prototype._parseIndexSyntax=to,zr.prototype._parseStoresSpec=function(u,f){var g=this;d(u).forEach(function(b){if(u[b]!==null){var k=g._parseIndexSyntax(u[b]),S=k.shift();if(!S)throw new pe.Schema("Invalid schema for table "+b+": "+u[b]);if(S.unique=!0,S.multi)throw new pe.Schema("Primary key cannot be multiEntry*");k.forEach(function(I){if(I.auto)throw new pe.Schema("Only primary key can be marked as autoIncrement (++)");if(!I.keyPath)throw new pe.Schema("Index must have a name and cannot be an empty string")}),S=g._createTableSchema(b,S,k),f[b]=S}})},zr.prototype.stores=function(g){var f=this.db,g=(this._cfg.storesSource=this._cfg.storesSource?y(this._cfg.storesSource,g):g,f._versions),b={},k={};return g.forEach(function(S){y(b,S._cfg.storesSource),k=S._cfg.dbschema={},S._parseStoresSpec(b,k)}),f._dbSchema=k,Jn(f,[f._allTables,f,f.Transaction.prototype]),Vo(f,[f._allTables,f,f.Transaction.prototype,this._cfg.tables],d(k),k),f._storeNames=d(k),this},zr.prototype.upgrade=function(u){return this._cfg.contentUpgrade=Xr(this._cfg.contentUpgrade||He,u),this};var Id=zr;function zr(){}function Wo(u,f){var g=u._dbNamesDB;return g||(g=u._dbNamesDB=new vr(Ro,{addons:[],indexedDB:u,IDBKeyRange:f})).version(1).stores({dbnames:"name"}),g.table("dbnames")}function hi(u){return u&&typeof u.databases=="function"}function no(u){return Pr(function(){return Fe.letThrough=!0,u()})}function Ps(u){return!("from"in u)}var nn=function(u,f){var g;if(!this)return g=new nn,u&&"d"in u&&y(g,u),g;y(this,arguments.length?{d:1,from:u,to:1<arguments.length?f:u}:{d:0})};function Ho(u,f,g){var b=Xe(f,g);if(!isNaN(b)){if(0<b)throw RangeError();if(Ps(u))return y(u,{from:f,to:g,d:1});var b=u.l,k=u.r;if(Xe(g,u.from)<0)return b?Ho(b,f,g):u.l={from:f,to:g,d:1,l:null,r:null},ku(u);if(0<Xe(f,u.to))return k?Ho(k,f,g):u.r={from:f,to:g,d:1,l:null,r:null},ku(u);Xe(f,u.from)<0&&(u.from=f,u.l=null,u.d=k?k.d+1:1),0<Xe(g,u.to)&&(u.to=g,u.r=null,u.d=u.l?u.l.d+1:1),f=!u.r,b&&!u.l&&qo(u,b),k&&f&&qo(u,k)}}function qo(u,f){Ps(f)||(function g(b,k){var S=k.from,I=k.l,j=k.r;Ho(b,S,k.to),I&&g(b,I),j&&g(b,j)})(u,f)}function Ns(u,f){var g=As(f),b=g.next();if(!b.done)for(var k=b.value,S=As(u),I=S.next(k.from),j=I.value;!b.done&&!I.done;){if(Xe(j.from,k.to)<=0&&0<=Xe(j.to,k.from))return!0;Xe(k.from,j.from)<0?k=(b=g.next(j.from)).value:j=(I=S.next(k.from)).value}return!1}function As(u){var f=Ps(u)?null:{s:0,n:u};return{next:function(g){for(var b=0<arguments.length;f;)switch(f.s){case 0:if(f.s=1,b)for(;f.n.l&&Xe(g,f.n.from)<0;)f={up:f,n:f.n.l,s:1};else for(;f.n.l;)f={up:f,n:f.n.l,s:1};case 1:if(f.s=2,!b||Xe(g,f.n.to)<=0)return{value:f.n,done:!1};case 2:if(f.n.r){f.s=3,f={up:f,n:f.n.r,s:0};continue}case 3:f=f.up}return{done:!0}}}}function ku(u){var f,g,b,k=(((k=u.r)==null?void 0:k.d)||0)-(((k=u.l)==null?void 0:k.d)||0),k=1<k?"r":k<-1?"l":"";k&&(f=k=="r"?"l":"r",g=o({},u),b=u[k],u.from=b.from,u.to=b.to,u[k]=b[k],g[k]=b[f],(u[f]=g).d=xu(g)),u.d=xu(u)}function xu(g){var f=g.r,g=g.l;return(f?g?Math.max(f.d,g.d):f.d:g?g.d:0)+1}function Ds(u,f){return d(f).forEach(function(g){u[g]?qo(u[g],f[g]):u[g]=(function b(k){var S,I,j={};for(S in k)w(k,S)&&(I=k[S],j[S]=!I||typeof I!="object"||Ie.has(I.constructor)?I:b(I));return j})(f[g])}),u}function Kl(u,f){return u.all||f.all||Object.keys(u).some(function(g){return f[g]&&Ns(f[g],u[g])})}x(nn.prototype,((vn={add:function(u){return qo(this,u),this},addKey:function(u){return Ho(this,u,u),this},addKeys:function(u){var f=this;return u.forEach(function(g){return Ho(f,g,g)}),this},hasKey:function(u){var f=As(this).next(u).value;return f&&Xe(f.from,u)<=0&&0<=Xe(f.to,u)}})[ke]=function(){return As(this)},vn));var Fr={},Vl={},Wl=!1;function Rs(u){Ds(Vl,u),Wl||(Wl=!0,setTimeout(function(){Wl=!1,Hl(Vl,!(Vl={}))},0))}function Hl(u,f){f===void 0&&(f=!1);var g=new Set;if(u.all)for(var b=0,k=Object.values(Fr);b<k.length;b++)Ls(j=k[b],u,g,f);else for(var S in u){var I,j,S=/^idb\:\/\/(.*)\/(.*)\//.exec(S);S&&(I=S[1],S=S[2],j=Fr["idb://".concat(I,"/").concat(S)])&&Ls(j,u,g,f)}g.forEach(function(z){return z()})}function Ls(u,f,g,b){for(var k=[],S=0,I=Object.entries(u.queries.query);S<I.length;S++){for(var j=I[S],z=j[0],V=[],L=0,A=j[1];L<A.length;L++){var F=A[L];Kl(f,F.obsSet)?F.subscribers.forEach(function(J){return g.add(J)}):b&&V.push(F)}b&&k.push([z,V])}if(b)for(var B=0,U=k;B<U.length;B++){var M=U[B],z=M[0],V=M[1];u.queries.query[z]=V}}function Od(u){var f=u._state,g=u._deps.indexedDB;if(f.isBeingOpened||u.idbdb)return f.dbReadyPromise.then(function(){return f.dbOpenError?Mt(f.dbOpenError):u});f.isBeingOpened=!0,f.dbOpenError=null,f.openComplete=!1;var b=f.openCanceller,k=Math.round(10*u.verno),S=!1;function I(){if(f.openCanceller!==b)throw new pe.DatabaseClosed("db.open() was cancelled")}function j(){return new Ce(function(F,B){if(I(),!g)throw new pe.MissingAPI;var U=u.name,M=f.autoSchema||!k?g.open(U):g.open(U,k);if(!M)throw new pe.MissingAPI;M.onerror=qt(B),M.onblocked=_t(u._fireOnBlocked),M.onupgradeneeded=_t(function(J){var Z;L=M.transaction,f.autoSchema&&!u._options.allowEmptyDB?(M.onerror=Bo,L.abort(),M.result.close(),(Z=g.deleteDatabase(U)).onsuccess=Z.onerror=_t(function(){B(new pe.NoSuchDatabase("Database ".concat(U," doesnt exist")))})):(L.onerror=qt(B),Z=J.oldVersion>Math.pow(2,62)?0:J.oldVersion,A=Z<1,u.idbdb=M.result,S&&_u(u,L),Ts(u,Z/10,L,B))},B),M.onsuccess=_t(function(){L=null;var J,Z,H,ne,oe,xe,Se=u.idbdb=M.result,ue=te(Se.objectStoreNames);if(0<ue.length)try{var je=Se.transaction((oe=ue).length===1?oe[0]:oe,"readonly");if(f.autoSchema)xe=Se,ne=je,(H=u).verno=xe.version/10,ne=H._dbSchema=yr(0,xe,ne),H._storeNames=te(xe.objectStoreNames,0),Vo(H,[H._allTables],d(ne),ne);else if(eo(u,u._dbSchema,je),Z=je,((Z=Xi(yr(0,(J=u).idbdb,Z),J._dbSchema)).add.length||Z.change.some(function(Oe){return Oe.add.length||Oe.change.length}))&&!S)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Se.close(),k=Se.version+1,S=!0,F(j());Ji(u,je)}catch{}Dr.push(u),Se.onversionchange=_t(function(Oe){f.vcFired=!0,u.on("versionchange").fire(Oe)}),Se.onclose=_t(function(){u.close({disableAutoOpen:!1})}),A&&(ue=u._deps,oe=U,hi(xe=ue.indexedDB)||oe===Ro||Wo(xe,ue.IDBKeyRange).put({name:oe}).catch(He)),F()},B)}).catch(function(F){switch(F==null?void 0:F.name){case"UnknownError":if(0<f.PR1398_maxLoop)return f.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),j();break;case"VersionError":if(0<k)return k=0,j()}return Ce.reject(F)})}var z,V=f.dbReadyResolve,L=null,A=!1;return Ce.race([b,(typeof navigator>"u"?Ce.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(F){function B(){return indexedDB.databases().finally(F)}z=setInterval(B,100),B()}).finally(function(){return clearInterval(z)}):Promise.resolve()).then(j)]).then(function(){return I(),f.onReadyBeingFired=[],Ce.resolve(no(function(){return u.on.ready.fire(u.vip)})).then(function F(){var B;if(0<f.onReadyBeingFired.length)return B=f.onReadyBeingFired.reduce(Xr,He),f.onReadyBeingFired=[],Ce.resolve(no(function(){return B(u.vip)})).then(F)})}).finally(function(){f.openCanceller===b&&(f.onReadyBeingFired=null,f.isBeingOpened=!1)}).catch(function(F){f.dbOpenError=F;try{L&&L.abort()}catch{}return b===f.openCanceller&&u._close(),Mt(F)}).finally(function(){f.openComplete=!0,V()}).then(function(){var F;return A&&(F={},u.tables.forEach(function(B){B.schema.indexes.forEach(function(U){U.name&&(F["idb://".concat(u.name,"/").concat(B.name,"/").concat(U.name)]=new nn(-1/0,[[[]]]))}),F["idb://".concat(u.name,"/").concat(B.name,"/")]=F["idb://".concat(u.name,"/").concat(B.name,"/:dels")]=new nn(-1/0,[[[]]])}),Mr(Qi).fire(F),Hl(F,!0)),u})}function ql(u){function f(S){return u.next(S)}var g=k(f),b=k(function(S){return u.throw(S)});function k(S){return function(j){var j=S(j),z=j.value;return j.done?z:z&&typeof z.then=="function"?z.then(g,b):h(z)?Promise.all(z).then(g,b):g(z)}}return k(f)()}function Ms(u,f,g){for(var b=h(u)?u.slice():[u],k=0;k<g;++k)b.push(f);return b}var Su={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(u){return o(o({},u),{table:function(b){var g=u.table(b),b=g.schema,k={},S=[];function I(F,B,U){var H=Ko(F),M=k[H]=k[H]||[],J=F==null?0:typeof F=="string"?1:F.length,Z=0<B,H=o(o({},U),{name:Z?"".concat(H,"(virtual-from:").concat(U.name,")"):U.name,lowLevelIndex:U,isVirtual:Z,keyTail:B,keyLength:J,extractKey:Ur(F),unique:!Z&&U.unique});return M.push(H),H.isPrimaryKey||S.push(H),1<J&&I(J===2?F[0]:F.slice(0,J-1),B+1,U),M.sort(function(ne,oe){return ne.keyTail-oe.keyTail}),H}var j=I(b.primaryKey.keyPath,0,b.primaryKey);k[":id"]=[j];for(var z=0,V=b.indexes;z<V.length;z++){var L=V[z];I(L.keyPath,0,L)}function A(F){var B,U=F.query.index;return U.isVirtual?o(o({},F),{query:{index:U.lowLevelIndex,range:(B=F.query.range,U=U.keyTail,{type:B.type===1?2:B.type,lower:Ms(B.lower,B.lowerOpen?u.MAX_KEY:u.MIN_KEY,U),lowerOpen:!0,upper:Ms(B.upper,B.upperOpen?u.MIN_KEY:u.MAX_KEY,U),upperOpen:!0})}}):F}return o(o({},g),{schema:o(o({},b),{primaryKey:j,indexes:S,getIndexByKeyPath:function(F){return(F=k[Ko(F)])&&F[0]}}),count:function(F){return g.count(A(F))},query:function(F){return g.query(A(F))},openCursor:function(F){var B=F.query.index,U=B.keyTail,M=B.keyLength;return B.isVirtual?g.openCursor(A(F)).then(function(Z){return Z&&J(Z)}):g.openCursor(F);function J(Z){return Object.create(Z,{continue:{value:function(H){H!=null?Z.continue(Ms(H,F.reverse?u.MAX_KEY:u.MIN_KEY,U)):F.unique?Z.continue(Z.key.slice(0,M).concat(F.reverse?u.MIN_KEY:u.MAX_KEY,U)):Z.continue()}},continuePrimaryKey:{value:function(H,ne){Z.continuePrimaryKey(Ms(H,u.MAX_KEY,U),ne)}},primaryKey:{get:function(){return Z.primaryKey}},key:{get:function(){var H=Z.key;return M===1?H[0]:H.slice(0,M)}},value:{get:function(){return Z.value}}})}}})}})}};function Gl(u,f,g,b){return g=g||{},b=b||"",d(u).forEach(function(k){var S,I,j;w(f,k)?(S=u[k],I=f[k],typeof S=="object"&&typeof I=="object"&&S&&I?(j=$e(S))!==$e(I)?g[b+k]=f[k]:j==="Object"?Gl(S,I,g,b+k+"."):S!==I&&(g[b+k]=f[k]):S!==I&&(g[b+k]=f[k])):g[b+k]=void 0}),d(f).forEach(function(k){w(u,k)||(g[b+k]=f[k])}),g}function Yl(u,f){return f.type==="delete"?f.keys:f.keys||f.values.map(u.extractKey)}var jd={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(u){return o(o({},u),{table:function(f){var g=u.table(f),b=g.schema.primaryKey;return o(o({},g),{mutate:function(k){var S=Fe.trans,I=S.table(f).hook,j=I.deleting,z=I.creating,V=I.updating;switch(k.type){case"add":if(z.fire===He)break;return S._promise("readwrite",function(){return L(k)},!0);case"put":if(z.fire===He&&V.fire===He)break;return S._promise("readwrite",function(){return L(k)},!0);case"delete":if(j.fire===He)break;return S._promise("readwrite",function(){return L(k)},!0);case"deleteRange":if(j.fire===He)break;return S._promise("readwrite",function(){return(function A(F,B,U){return g.query({trans:F,values:!1,query:{index:b,range:B},limit:U}).then(function(M){var J=M.result;return L({type:"delete",keys:J,trans:F}).then(function(Z){return 0<Z.numFailures?Promise.reject(Z.failures[0]):J.length<U?{failures:[],numFailures:0,lastResult:void 0}:A(F,o(o({},B),{lower:J[J.length-1],lowerOpen:!0}),U)})})})(k.trans,k.range,1e4)},!0)}return g.mutate(k);function L(A){var F,B,U,M=Fe.trans,J=A.keys||Yl(b,A);if(J)return(A=A.type==="add"||A.type==="put"?o(o({},A),{keys:J}):o({},A)).type!=="delete"&&(A.values=l([],A.values)),A.keys&&(A.keys=l([],A.keys)),F=g,U=J,((B=A).type==="add"?Promise.resolve([]):F.getMany({trans:B.trans,keys:U,cache:"immutable"})).then(function(Z){var H=J.map(function(ne,oe){var xe,Se,ue,je=Z[oe],Oe={onerror:null,onsuccess:null};return A.type==="delete"?j.fire.call(Oe,ne,je,M):A.type==="add"||je===void 0?(xe=z.fire.call(Oe,ne,A.values[oe],M),ne==null&&xe!=null&&(A.keys[oe]=ne=xe,b.outbound||he(A.values[oe],b.keyPath,ne))):(xe=Gl(je,A.values[oe]),(Se=V.fire.call(Oe,xe,ne,je,M))&&(ue=A.values[oe],Object.keys(Se).forEach(function(ve){w(ue,ve)?ue[ve]=Se[ve]:he(ue,ve,Se[ve])}))),Oe});return g.mutate(A).then(function(ne){for(var oe=ne.failures,xe=ne.results,Se=ne.numFailures,ne=ne.lastResult,ue=0;ue<J.length;++ue){var je=(xe||J)[ue],Oe=H[ue];je==null?Oe.onerror&&Oe.onerror(oe[ue]):Oe.onsuccess&&Oe.onsuccess(A.type==="put"&&Z[ue]?A.values[ue]:je)}return{failures:oe,results:xe,numFailures:Se,lastResult:ne}}).catch(function(ne){return H.forEach(function(oe){return oe.onerror&&oe.onerror(ne)}),Promise.reject(ne)})});throw new Error("Keys missing")}}})}})}};function Eu(u,f,g){try{if(!f||f.keys.length<u.length)return null;for(var b=[],k=0,S=0;k<f.keys.length&&S<u.length;++k)Xe(f.keys[k],u[S])===0&&(b.push(g?Le(f.values[k]):f.values[k]),++S);return b.length===u.length?b:null}catch{return null}}var Td={stack:"dbcore",level:-1,create:function(u){return{table:function(f){var g=u.table(f);return o(o({},g),{getMany:function(b){var k;return b.cache?(k=Eu(b.keys,b.trans._cache,b.cache==="clone"))?Ce.resolve(k):g.getMany(b).then(function(S){return b.trans._cache={keys:b.keys,values:b.cache==="clone"?Le(S):S},S}):g.getMany(b)},mutate:function(b){return b.type!=="add"&&(b.trans._cache=null),g.mutate(b)}})}}}};function Cu(u,f){return u.trans.mode==="readonly"&&!!u.subscr&&!u.trans.explicit&&u.trans.db._options.cache!=="disabled"&&!f.schema.primaryKey.outbound}function Iu(u,f){switch(u){case"query":return f.values&&!f.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Ql={stack:"dbcore",level:0,name:"Observability",create:function(u){var f=u.schema.name,g=new nn(u.MIN_KEY,u.MAX_KEY);return o(o({},u),{transaction:function(b,k,S){if(Fe.subscr&&k!=="readonly")throw new pe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Fe.querier));return u.transaction(b,k,S)},table:function(b){function k(J){var M,J=J.query;return[M=J.index,new nn((M=(J=J.range).lower)!=null?M:u.MIN_KEY,(M=J.upper)!=null?M:u.MAX_KEY)]}var S=u.table(b),I=S.schema,j=I.primaryKey,z=I.indexes,V=j.extractKey,L=j.outbound,A=j.autoIncrement&&z.filter(function(U){return U.compound&&U.keyPath.includes(j.keyPath)}),F=o(o({},S),{mutate:function(U){function M(Ne){return Ne="idb://".concat(f,"/").concat(b,"/").concat(Ne),oe[Ne]||(oe[Ne]=new nn)}var J,Z,H,ne=U.trans,oe=U.mutatedParts||(U.mutatedParts={}),xe=M(""),Se=M(":dels"),ue=U.type,Oe=U.type==="deleteRange"?[U.range]:U.type==="delete"?[U.keys]:U.values.length<50?[Yl(j,U).filter(function(Ne){return Ne}),U.values]:[],je=Oe[0],Oe=Oe[1],ve=U.trans._cache;return h(je)?(xe.addKeys(je),(ue=ue==="delete"||je.length===Oe.length?Eu(je,ve):null)||Se.addKeys(je),(ue||Oe)&&(J=M,Z=ue,H=Oe,I.indexes.forEach(function(Ne){var ut=J(Ne.name||"");function ft(nt){return nt!=null?Ne.extractKey(nt):null}function qe(nt){Ne.multiEntry&&h(nt)?nt.forEach(function(jt){return ut.addKey(jt)}):ut.addKey(nt)}(Z||H).forEach(function(nt,bt){var jn=Z&&ft(Z[bt]),bt=H&&ft(H[bt]);Xe(jn,bt)!==0&&(jn!=null&&qe(jn),bt!=null)&&qe(bt)})}))):je?(Oe={from:(ve=je.lower)!=null?ve:u.MIN_KEY,to:(ue=je.upper)!=null?ue:u.MAX_KEY},Se.add(Oe),xe.add(Oe)):(xe.add(g),Se.add(g),I.indexes.forEach(function(Ne){return M(Ne.name).add(g)})),S.mutate(U).then(function(Ne){return!je||U.type!=="add"&&U.type!=="put"||(xe.addKeys(Ne.results),A&&A.forEach(function(ut){for(var ft=U.values.map(function(jn){return ut.extractKey(jn)}),qe=ut.keyPath.findIndex(function(jn){return jn===j.keyPath}),nt=0,jt=Ne.results.length;nt<jt;++nt)ft[nt][qe]=Ne.results[nt];M(ut.name).addKeys(ft)})),ne.mutatedParts=Ds(ne.mutatedParts||{},oe),Ne})}}),B={get:function(U){return[j,new nn(U.key)]},getMany:function(U){return[j,new nn().addKeys(U.keys)]},count:k,query:k,openCursor:k};return d(B).forEach(function(U){F[U]=function(M){var J=Fe.subscr,Z=!!J,H=Cu(Fe,S)&&Iu(U,M)?M.obsSet={}:J;if(Z){var ne,J=function(Oe){return Oe="idb://".concat(f,"/").concat(b,"/").concat(Oe),H[Oe]||(H[Oe]=new nn)},oe=J(""),xe=J(":dels"),Z=B[U](M),Se=Z[0],Z=Z[1];if((U==="query"&&Se.isPrimaryKey&&!M.values?xe:J(Se.name||"")).add(Z),!Se.isPrimaryKey){if(U!=="count")return ne=U==="query"&&L&&M.values&&S.query(o(o({},M),{values:!1})),S[U].apply(this,arguments).then(function(Oe){if(U==="query"){if(L&&M.values)return ne.then(function(ft){return ft=ft.result,oe.addKeys(ft),Oe});var ve=M.values?Oe.result.map(V):Oe.result;(M.values?oe:xe).addKeys(ve)}else{var Ne,ut;if(U==="openCursor")return ut=M.values,(Ne=Oe)&&Object.create(Ne,{key:{get:function(){return xe.addKey(Ne.primaryKey),Ne.key}},primaryKey:{get:function(){var ft=Ne.primaryKey;return xe.addKey(ft),ft}},value:{get:function(){return ut&&oe.addKey(Ne.primaryKey),Ne.value}}})}return Oe});xe.add(g)}}return S[U].apply(this,arguments)}}),F}})}};function ro(u,f,g){var b;return g.numFailures===0?f:f.type==="deleteRange"||(b=f.keys?f.keys.length:"values"in f&&f.values?f.values.length:1,g.numFailures===b)?null:(b=o({},f),h(b.keys)&&(b.keys=b.keys.filter(function(k,S){return!(S in g.failures)})),"values"in b&&h(b.values)&&(b.values=b.values.filter(function(k,S){return!(S in g.failures)})),b)}function Jl(u,f){return g=u,((b=f).lower===void 0||(b.lowerOpen?0<Xe(g,b.lower):0<=Xe(g,b.lower)))&&(g=u,(b=f).upper===void 0||(b.upperOpen?Xe(g,b.upper)<0:Xe(g,b.upper)<=0));var g,b}function Xl(u,f,g,b,k,S){var I,j,z,V,L,A;return!g||g.length===0||(I=f.query.index,j=I.multiEntry,z=f.query.range,V=b.schema.primaryKey.extractKey,L=I.extractKey,A=(I.lowLevelIndex||I).extractKey,(b=g.reduce(function(F,B){var U=F,M=[];if(B.type==="add"||B.type==="put")for(var J=new nn,Z=B.values.length-1;0<=Z;--Z){var H,ne=B.values[Z],oe=V(ne);!J.hasKey(oe)&&(H=L(ne),j&&h(H)?H.some(function(Oe){return Jl(Oe,z)}):Jl(H,z))&&(J.addKey(oe),M.push(ne))}switch(B.type){case"add":var xe=new nn().addKeys(f.values?F.map(function(ve){return V(ve)}):F),U=F.concat(f.values?M.filter(function(ve){return ve=V(ve),!xe.hasKey(ve)&&(xe.addKey(ve),!0)}):M.map(function(ve){return V(ve)}).filter(function(ve){return!xe.hasKey(ve)&&(xe.addKey(ve),!0)}));break;case"put":var Se=new nn().addKeys(B.values.map(function(ve){return V(ve)}));U=F.filter(function(ve){return!Se.hasKey(f.values?V(ve):ve)}).concat(f.values?M:M.map(function(ve){return V(ve)}));break;case"delete":var ue=new nn().addKeys(B.keys);U=F.filter(function(ve){return!ue.hasKey(f.values?V(ve):ve)});break;case"deleteRange":var je=B.range;U=F.filter(function(ve){return!Jl(V(ve),je)})}return U},u))===u)?u:(b.sort(function(F,B){return Xe(A(F),A(B))||Xe(V(F),V(B))}),f.limit&&f.limit<1/0&&(b.length>f.limit?b.length=f.limit:u.length===f.limit&&b.length<f.limit&&(k.dirty=!0)),S?Object.freeze(b):b)}function Zl(u,f){return Xe(u.lower,f.lower)===0&&Xe(u.upper,f.upper)===0&&!!u.lowerOpen==!!f.lowerOpen&&!!u.upperOpen==!!f.upperOpen}function Ou(u,f){return((g,b,k,S)=>{if(g===void 0)return b!==void 0?-1:0;if(b===void 0)return 1;if((g=Xe(g,b))===0){if(k&&S)return 0;if(k)return 1;if(S)return-1}return g})(u.lower,f.lower,u.lowerOpen,f.lowerOpen)<=0&&0<=((g,b,k,S)=>{if(g===void 0)return b!==void 0?1:0;if(b===void 0)return-1;if((g=Xe(g,b))===0){if(k&&S)return 0;if(k)return-1;if(S)return 1}return g})(u.upper,f.upper,u.upperOpen,f.upperOpen)}function ju(u,f,g,b){u.subscribers.add(g),b.addEventListener("abort",function(){var k,S;u.subscribers.delete(g),u.subscribers.size===0&&(k=u,S=f,setTimeout(function(){k.subscribers.size===0&&K(S,k)},3e3))})}var Tu={stack:"dbcore",level:0,name:"Cache",create:function(u){var f=u.schema.name;return o(o({},u),{transaction:function(g,b,k){var S,I,j=u.transaction(g,b,k);return b==="readwrite"&&(k=(S=new AbortController).signal,j.addEventListener("abort",(I=function(z){return function(){if(S.abort(),b==="readwrite"){for(var V=new Set,L=0,A=g;L<A.length;L++){var F=A[L],B=Fr["idb://".concat(f,"/").concat(F)];if(B){var U=u.table(F),M=B.optimisticOps.filter(function(Ne){return Ne.trans===j});if(j._explicit&&z&&j.mutatedParts)for(var J=0,Z=Object.values(B.queries.query);J<Z.length;J++)for(var H=0,ne=(Se=Z[J]).slice();H<ne.length;H++)Kl((ue=ne[H]).obsSet,j.mutatedParts)&&(K(Se,ue),ue.subscribers.forEach(function(Ne){return V.add(Ne)}));else if(0<M.length){B.optimisticOps=B.optimisticOps.filter(function(Ne){return Ne.trans!==j});for(var oe=0,xe=Object.values(B.queries.query);oe<xe.length;oe++)for(var Se,ue,je,Oe=0,ve=(Se=xe[oe]).slice();Oe<ve.length;Oe++)(ue=ve[Oe]).res!=null&&j.mutatedParts&&(z&&!ue.dirty?(je=Object.isFrozen(ue.res),je=Xl(ue.res,ue.req,M,U,ue,je),ue.dirty?(K(Se,ue),ue.subscribers.forEach(function(Ne){return V.add(Ne)})):je!==ue.res&&(ue.res=je,ue.promise=Ce.resolve({result:je}))):(ue.dirty&&K(Se,ue),ue.subscribers.forEach(function(Ne){return V.add(Ne)})))}}}V.forEach(function(Ne){return Ne()})}}})(!1),{signal:k}),j.addEventListener("error",I(!1),{signal:k}),j.addEventListener("complete",I(!0),{signal:k})),j},table:function(g){var b=u.table(g),k=b.schema.primaryKey;return o(o({},b),{mutate:function(S){var I,j=Fe.trans;return!k.outbound&&j.db._options.cache!=="disabled"&&!j.explicit&&j.idbtrans.mode==="readwrite"&&(I=Fr["idb://".concat(f,"/").concat(g)])?(j=b.mutate(S),S.type!=="add"&&S.type!=="put"||!(50<=S.values.length||Yl(k,S).some(function(z){return z==null}))?(I.optimisticOps.push(S),S.mutatedParts&&Rs(S.mutatedParts),j.then(function(z){0<z.numFailures&&(K(I.optimisticOps,S),(z=ro(0,S,z))&&I.optimisticOps.push(z),S.mutatedParts)&&Rs(S.mutatedParts)}),j.catch(function(){K(I.optimisticOps,S),S.mutatedParts&&Rs(S.mutatedParts)})):j.then(function(z){var V=ro(0,o(o({},S),{values:S.values.map(function(L,A){var F;return z.failures[A]?L:(he(F=(F=k.keyPath)!=null&&F.includes(".")?Le(L):o({},L),k.keyPath,z.results[A]),F)})}),z);I.optimisticOps.push(V),queueMicrotask(function(){return S.mutatedParts&&Rs(S.mutatedParts)})}),j):b.mutate(S)},query:function(S){var I,j,z,V,L,A,F;return Cu(Fe,b)&&Iu("query",S)?(I=((z=Fe.trans)==null?void 0:z.db._options.cache)==="immutable",j=(z=Fe).requery,z=z.signal,A=((B,U,M,J)=>{var Z=Fr["idb://".concat(B,"/").concat(U)];if(!Z)return[];if(!(B=Z.queries[M]))return[null,!1,Z,null];var H=B[(J.query?J.query.index.name:null)||""];if(!H)return[null,!1,Z,null];switch(M){case"query":var ne=H.find(function(oe){return oe.req.limit===J.limit&&oe.req.values===J.values&&Zl(oe.req.query.range,J.query.range)});return ne?[ne,!0,Z,H]:[H.find(function(oe){return("limit"in oe.req?oe.req.limit:1/0)>=J.limit&&(!J.values||oe.req.values)&&Ou(oe.req.query.range,J.query.range)}),!1,Z,H];case"count":return ne=H.find(function(oe){return Zl(oe.req.query.range,J.query.range)}),[ne,!!ne,Z,H]}})(f,g,"query",S),F=A[0],V=A[2],L=A[3],F&&A[1]?F.obsSet=S.obsSet:(A=b.query(S).then(function(B){var U=B.result;if(F&&(F.res=U),I){for(var M=0,J=U.length;M<J;++M)Object.freeze(U[M]);Object.freeze(U)}else B.result=Le(U);return B}).catch(function(B){return L&&F&&K(L,F),Promise.reject(B)}),F={obsSet:S.obsSet,promise:A,subscribers:new Set,type:"query",req:S,dirty:!1},L?L.push(F):(L=[F],(V=V||(Fr["idb://".concat(f,"/").concat(g)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[S.query.index.name||""]=L)),ju(F,L,j,z),F.promise.then(function(B){return{result:Xl(B.result,S,V==null?void 0:V.optimisticOps,b,F,I)}})):b.query(S)}})}})}};function gr(u,f){return new Proxy(u,{get:function(g,b,k){return b==="db"?f:Reflect.get(g,b,k)}})}Ut.prototype.version=function(u){if(isNaN(u)||u<.1)throw new pe.Type("Given version is not a positive number");if(u=Math.round(10*u)/10,this.idbdb||this._state.isBeingOpened)throw new pe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,u);var f=this._versions,g=f.filter(function(b){return b._cfg.version===u})[0];return g||(g=new this.Version(u),f.push(g),f.sort(Bl),g.stores({}),this._state.autoSchema=!1),g},Ut.prototype._whenReady=function(u){var f=this;return this.idbdb&&(this._state.openComplete||Fe.letThrough||this._vip)?u():new Ce(function(g,b){if(f._state.openComplete)return b(new pe.DatabaseClosed(f._state.dbOpenError));if(!f._state.isBeingOpened){if(!f._state.autoOpen)return void b(new pe.DatabaseClosed);f.open().catch(He)}f._state.dbReadyPromise.then(g,b)}).then(u)},Ut.prototype.use=function(k){var f=k.stack,g=k.create,b=k.level,k=k.name,S=(k&&this.unuse({stack:f,name:k}),this._middlewares[f]||(this._middlewares[f]=[]));return S.push({stack:f,create:g,level:b??10,name:k}),S.sort(function(I,j){return I.level-j.level}),this},Ut.prototype.unuse=function(u){var f=u.stack,g=u.name,b=u.create;return f&&this._middlewares[f]&&(this._middlewares[f]=this._middlewares[f].filter(function(k){return b?k.create!==b:!!g&&k.name!==g})),this},Ut.prototype.open=function(){var u=this;return Ar(Or,function(){return Od(u)})},Ut.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var u=this._state,f=Dr.indexOf(this);if(0<=f&&Dr.splice(f,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}u.isBeingOpened||(u.dbReadyPromise=new Ce(function(g){u.dbReadyResolve=g}),u.openCanceller=new Ce(function(g,b){u.cancelOpen=b}))},Ut.prototype.close=function(f){var f=(f===void 0?{disableAutoOpen:!0}:f).disableAutoOpen,g=this._state;f?(g.isBeingOpened&&g.cancelOpen(new pe.DatabaseClosed),this._close(),g.autoOpen=!1,g.dbOpenError=new pe.DatabaseClosed):(this._close(),g.autoOpen=this._options.autoOpen||g.isBeingOpened,g.openComplete=!1,g.dbOpenError=null)},Ut.prototype.delete=function(u){var f=this,g=(u===void 0&&(u={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),b=this._state;return new Ce(function(k,S){function I(){f.close(u);var j=f._deps.indexedDB.deleteDatabase(f.name);j.onsuccess=_t(function(){var z,V,L;z=f._deps,V=f.name,hi(L=z.indexedDB)||V===Ro||Wo(L,z.IDBKeyRange).delete(V).catch(He),k()}),j.onerror=qt(S),j.onblocked=f._fireOnBlocked}if(g)throw new pe.InvalidArgument("Invalid closeOptions argument to db.delete()");b.isBeingOpened?b.dbReadyPromise.then(I):I()})},Ut.prototype.backendDB=function(){return this.idbdb},Ut.prototype.isOpen=function(){return this.idbdb!==null},Ut.prototype.hasBeenClosed=function(){var u=this._state.dbOpenError;return u&&u.name==="DatabaseClosed"},Ut.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Ut.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Ut.prototype,"tables",{get:function(){var u=this;return d(this._allTables).map(function(f){return u._allTables[f]})},enumerable:!1,configurable:!0}),Ut.prototype.transaction=function(){var u=(function(f,g,b){var k=arguments.length;if(k<2)throw new pe.InvalidArgument("Too few arguments");for(var S=new Array(k-1);--k;)S[k-1]=arguments[k];return b=S.pop(),[f,_e(S),b]}).apply(this,arguments);return this._transaction.apply(this,u)},Ut.prototype._transaction=function(u,f,g){var b,k,S=this,I=Fe.trans,j=(I&&I.db===this&&u.indexOf("!")===-1||(I=null),u.indexOf("?")!==-1);u=u.replace("!","").replace("?","");try{if(k=f.map(function(V){if(V=V instanceof S.Table?V.name:V,typeof V!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return V}),u=="r"||u===qi)b=qi;else{if(u!="rw"&&u!=Ml)throw new pe.InvalidArgument("Invalid transaction mode: "+u);b=Ml}if(I){if(I.mode===qi&&b===Ml){if(!j)throw new pe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");I=null}I&&k.forEach(function(V){if(I&&I.storeNames.indexOf(V)===-1){if(!j)throw new pe.SubTransaction("Table "+V+" not included in parent transaction.");I=null}}),j&&I&&!I.active&&(I=null)}}catch(V){return I?I._promise(null,function(L,A){A(V)}):Mt(V)}var z=(function V(L,A,F,B,U){return Ce.resolve().then(function(){var H=Fe.transless||Fe,M=L._createTransaction(A,F,L._dbSchema,B),H=(M.explicit=!0,{trans:M,transless:H});if(B)M.idbtrans=B.idbtrans;else try{M.create(),M.idbtrans._explicit=!0,L._state.PR1398_maxLoop=3}catch(ne){return ne.name===Ye.InvalidState&&L.isOpen()&&0<--L._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),L.close({disableAutoOpen:!1}),L.open().then(function(){return V(L,A,F,null,U)})):Mt(ne)}var J,Z=N(U),H=(Z&&Hi(),Ce.follow(function(){var ne;(J=U.call(M,M))&&(Z?(ne=wn.bind(null,null),J.then(ne,ne)):typeof J.next=="function"&&typeof J.throw=="function"&&(J=ql(J)))},H));return(J&&typeof J.then=="function"?Ce.resolve(J).then(function(ne){return M.active?ne:Mt(new pe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):H.then(function(){return J})).then(function(ne){return B&&M._resolve(),M._completion.then(function(){return ne})}).catch(function(ne){return M._reject(ne),Mt(ne)})})}).bind(null,this,b,k,I,g);return I?I._promise(b,z,"lock"):Fe.trans?Ar(Fe.transless,function(){return S._whenReady(z)}):this._whenReady(z)},Ut.prototype.table=function(u){if(w(this._allTables,u))return this._allTables[u];throw new pe.InvalidTable("Table ".concat(u," does not exist"))};var vr=Ut;function Ut(u,f){var g,b,k,S,I,j=this,z=(this._middlewares={},this.verno=0,Ut.dependencies),z=(this._options=f=o({addons:Ut.addons,autoOpen:!0,indexedDB:z.indexedDB,IDBKeyRange:z.IDBKeyRange,cache:"cloned"},f),this._deps={indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange},f.addons),V=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:He,dbReadyPromise:null,cancelOpen:He,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:f.autoOpen}),L=(V.dbReadyPromise=new Ce(function(A){V.dbReadyResolve=A}),V.openCanceller=new Ce(function(A,F){V.cancelOpen=F}),this._state=V,this.name=u,this.on=zo(this,"populate","blocked","versionchange","close",{ready:[Xr,He]}),this.once=function(A,F){var B=function(){for(var U=[],M=0;M<arguments.length;M++)U[M]=arguments[M];j.on(A).unsubscribe(B),F.apply(j,U)};return j.on(A,B)},this.on.ready.subscribe=fe(this.on.ready.subscribe,function(A){return function(F,B){Ut.vip(function(){var U,M=j._state;M.openComplete?(M.dbOpenError||Ce.resolve().then(F),B&&A(F)):M.onReadyBeingFired?(M.onReadyBeingFired.push(F),B&&A(F)):(A(F),U=j,B||A(function J(){U.on.ready.unsubscribe(F),U.on.ready.unsubscribe(J)}))})}}),this.Collection=(g=this,ai(yu.prototype,function(J,M){this.db=g;var B=Lo,U=null;if(M)try{B=M()}catch(H){U=H}var M=J._ctx,J=M.table,Z=J.hook.reading.fire;this._ctx={table:J,index:M.index,isPrimKey:!M.index||J.schema.primKey.keyPath&&M.index===J.schema.primKey.name,range:B,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:U,or:M.or,valueMapper:Z!==it?Z:null}})),this.Table=(b=this,ai(Uo.prototype,function(A,F,B){this.db=b,this._tx=B,this.name=A,this.schema=F,this.hook=b._allTables[A]?b._allTables[A].hook:zo(null,{creating:[gn,He],reading:[ct,it],updating:[Fn,He],deleting:[cr,He]})})),this.Transaction=(k=this,ai(wu.prototype,function(A,F,B,U,M){var J=this;A!=="readonly"&&F.forEach(function(Z){Z=(Z=B[Z])==null?void 0:Z.yProps,Z&&(F=F.concat(Z.map(function(H){return H.updatesTable})))}),this.db=k,this.mode=A,this.storeNames=F,this.schema=B,this.chromeTransactionDurability=U,this.idbtrans=null,this.on=zo(this,"complete","error","abort"),this.parent=M||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ce(function(Z,H){J._resolve=Z,J._reject=H}),this._completion.then(function(){J.active=!1,J.on.complete.fire()},function(Z){var H=J.active;return J.active=!1,J.on.error.fire(Z),J.parent?J.parent._reject(Z):H&&J.idbtrans&&J.idbtrans.abort(),Mt(Z)})})),this.Version=(S=this,ai(Id.prototype,function(A){this.db=S,this._cfg={version:A,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(I=this,ai(Yi.prototype,function(A,F,B){if(this.db=I,this._ctx={table:A,index:F===":id"?null:F,or:B},this._cmp=this._ascending=Xe,this._descending=function(U,M){return Xe(M,U)},this._max=function(U,M){return 0<Xe(U,M)?U:M},this._min=function(U,M){return Xe(U,M)<0?U:M},this._IDBKeyRange=I._deps.IDBKeyRange,!this._IDBKeyRange)throw new pe.MissingAPI})),this.on("versionchange",function(A){0<A.newVersion?console.warn("Another connection wants to upgrade database '".concat(j.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(j.name,"'. Closing db now to resume the delete request.")),j.close({disableAutoOpen:!1})}),this.on("blocked",function(A){!A.newVersion||A.newVersion<A.oldVersion?console.warn("Dexie.delete('".concat(j.name,"') was blocked")):console.warn("Upgrade '".concat(j.name,"' blocked by other connection holding version ").concat(A.oldVersion/10))}),this._maxKey=mr(f.IDBKeyRange),this._createTransaction=function(A,F,B,U){return new j.Transaction(A,F,B,j._options.chromeTransactionDurability,U)},this._fireOnBlocked=function(A){j.on("blocked").fire(A),Dr.filter(function(F){return F.name===j.name&&F!==j&&!F._state.vcFired}).map(function(F){return F.on("versionchange").fire(A)})},this.use(Td),this.use(Tu),this.use(Ql),this.use(Su),this.use(jd),new Proxy(this,{get:function(A,F,B){var U;return F==="_vip"||(F==="table"?function(M){return gr(j.table(M),L)}:(U=Reflect.get(A,F,B))instanceof Uo?gr(U,L):F==="tables"?U.map(function(M){return gr(M,L)}):F==="_createTransaction"?function(){return gr(U.apply(this,arguments),L)}:U)}}));this.vip=L,z.forEach(function(A){return A(j)})}var Us,pi=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Pu=(mi.prototype.subscribe=function(u,f,g){return this._subscribe(u&&typeof u!="function"?u:{next:u,error:f,complete:g})},mi.prototype[pi]=function(){return this},mi);function mi(u){this._subscribe=u}try{Us={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{Us={indexedDB:null,IDBKeyRange:null}}function io(u){var f,g=!1,b=new Pu(function(k){var S=N(u),I,j=!1,z={},V={},L={get closed(){return j},unsubscribe:function(){j||(j=!0,I&&I.abort(),A&&Mr.storagemutated.unsubscribe(B))}},A=(k.start&&k.start(L),!1),F=function(){return Ss(U)},B=function(M){Ds(z,M),Kl(V,z)&&F()},U=function(){var M,J,Z;!j&&Us.indexedDB&&(z={},M={},I&&I.abort(),I=new AbortController,Z=(H=>{var ne=Tr();try{S&&Hi();var oe=Pr(u,H);return oe=S?oe.finally(wn):oe}finally{ne&&ri()}})(J={subscr:M,signal:I.signal,requery:F,querier:u,trans:null}),Promise.resolve(Z).then(function(H){g=!0,f=H,j||J.signal.aborted||(z={},(ne=>{for(var oe in ne)if(w(ne,oe))return;return 1})(V=M)||A||(Mr(Qi,B),A=!0),Ss(function(){return!j&&k.next&&k.next(H)}))},function(H){g=!1,["DatabaseClosedError","AbortError"].includes(H==null?void 0:H.name)||j||Ss(function(){j||k.error&&k.error(H)})}))};return setTimeout(F,0),L});return b.hasValue=function(){return g},b.getValue=function(){return f},b}var yi=vr;function oo(u){var f=wr;try{wr=!0,Mr.storagemutated.fire(u),Hl(u,!0)}finally{wr=f}}x(yi,o(o({},Y),{delete:function(u){return new yi(u,{addons:[]}).delete()},exists:function(u){return new yi(u,{addons:[]}).open().then(function(f){return f.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(u){try{return f=yi.dependencies,g=f.indexedDB,f=f.IDBKeyRange,(hi(g)?Promise.resolve(g.databases()).then(function(b){return b.map(function(k){return k.name}).filter(function(k){return k!==Ro})}):Wo(g,f).toCollection().primaryKeys()).then(u)}catch{return Mt(new pe.MissingAPI)}var f,g},defineClass:function(){return function(u){y(this,u)}},ignoreTransaction:function(u){return Fe.trans?Ar(Fe.transless,u):u()},vip:no,async:function(u){return function(){try{var f=ql(u.apply(this,arguments));return f&&typeof f.then=="function"?f:Ce.resolve(f)}catch(g){return Mt(g)}}},spawn:function(u,f,g){try{var b=ql(u.apply(g,f||[]));return b&&typeof b.then=="function"?b:Ce.resolve(b)}catch(k){return Mt(k)}},currentTransaction:{get:function(){return Fe.trans||null}},waitFor:function(u,f){return u=Ce.resolve(typeof u=="function"?yi.ignoreTransaction(u):u).timeout(f||6e4),Fe.trans?Fe.trans.waitFor(u):u},Promise:Ce,debug:{get:function(){return un},set:function(u){bs(u)}},derive:P,extend:y,props:x,override:fe,Events:zo,on:Mr,liveQuery:io,extendObservabilitySet:Ds,getByKeyPath:ye,setByKeyPath:he,delByKeyPath:function(u,f){typeof f=="string"?he(u,f,void 0):"length"in f&&[].map.call(f,function(g){he(u,g,void 0)})},shallowClone:se,deepClone:Le,getObjectDiff:Gl,cmp:Xe,asap:Ee,minKey:-1/0,addons:[],connections:Dr,errnames:Ye,dependencies:Us,cache:Fr,semVer:"4.3.0",version:"4.3.0".split(".").map(function(u){return parseInt(u)}).reduce(function(u,f,g){return u+f/Math.pow(10,2*g)})})),yi.maxKey=mr(yi.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Mr(Qi,function(u){wr||(u=new CustomEvent(di,{detail:u}),wr=!0,dispatchEvent(u),wr=!1)}),addEventListener(di,function(u){u=u.detail,wr||oo(u)}));var so,wr=!1,zs=function(){};return typeof BroadcastChannel<"u"&&((zs=function(){(so=new BroadcastChannel(di)).onmessage=function(u){return u.data&&oo(u.data)}})(),typeof so.unref=="function"&&so.unref(),Mr(Qi,function(u){wr||so.postMessage(u)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(u){if(!vr.disableBfCache&&u.persisted){un&&console.debug("Dexie: handling persisted pagehide"),so!=null&&so.close();for(var f=0,g=Dr;f<g.length;f++)g[f].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(u){!vr.disableBfCache&&u.persisted&&(un&&console.debug("Dexie: handling persisted pageshow"),zs(),oo({all:new nn(-1/0,[[]])}))})),Ce.rejectionMapper=function(u,f){return!u||u instanceof Te||u instanceof TypeError||u instanceof SyntaxError||!u.name||!It[u.name]?u:(f=new It[u.name](f||u.message,u),"stack"in u&&O(f,"stack",{get:function(){return this.inner.stack}}),f)},bs(un),o(vr,Object.freeze({__proto__:null,Dexie:vr,Entity:hu,PropModification:Lr,RangeSet:nn,add:function(u){return new Lr({add:u})},cmp:Xe,default:vr,liveQuery:io,mergeRanges:qo,rangesOverlap:Ns,remove:function(u){return new Lr({remove:u})},replacePrefix:function(u,f){return new Lr({replacePrefix:[u,f]})}}),{default:vr}),vr})})(Rc)),Rc.exports}var Kb=$b();const yh=tv(Kb),vy=Symbol.for("Dexie"),st=globalThis[vy]||(globalThis[vy]=yh);if(yh.semVer!==st.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${yh.semVer} and ${st.semVer}`);const{liveQuery:So,mergeRanges:WC,rangesOverlap:HC,RangeSet:Vb,cmp:ad,Entity:Wb,PropModification:wy,replacePrefix:qC,add:GC,remove:YC,DexieYProvider:QC}=st;function Xa(n,e,r){var o,l;typeof n=="function"?(o=e||[],l=r):(o=[],l=e);var a=ol.useRef({hasResult:!1,result:l,error:null}),d=ol.useReducer(function(m){return m+1},0);d[0];var h=d[1],y=ol.useMemo(function(){var m=typeof n=="function"?n():n;if(!m||typeof m.subscribe!="function")throw n===m?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!a.current.hasResult&&typeof window<"u"&&(typeof m.hasValue!="function"||m.hasValue()))if(typeof m.getValue=="function")a.current.result=m.getValue(),a.current.hasResult=!0;else{var _=m.subscribe(function(w){a.current.result=w,a.current.hasResult=!0});typeof _=="function"?_():_.unsubscribe()}return m},o);if(ol.useDebugValue(a.current.result),ol.useEffect(function(){var m=y.subscribe(function(_){var w=a.current;(w.error!==null||w.result!==_)&&(w.error=null,w.result=_,w.hasResult=!0,h())},function(_){var w=a.current;w.error!==_&&(w.error=_,h())});return typeof m=="function"?m:m.unsubscribe.bind(m)},o),a.current.error)throw a.current.error;return a.current.result}function Za(n,e,r){return Xa(function(){return st.liveQuery(n)},e||[],r)}function eu(n,e,r){if(!n)throw new TypeError("Invalid arguments to usePermissions(): undefined or null");var o;if(arguments.length>=3){if(!("transaction"in n))throw new TypeError("Invalid arguments to usePermission(db, table, obj): 1st arg must be a Dexie instance");if(typeof e!="string")throw new TypeError("Invalid arguments to usePermission(db, table, obj): 2nd arg must be string");if(!r||typeof r!="object")throw new TypeError("Invalid arguments to usePermission(db, table, obj): 3rd arg must be an object");o=n}else{if(n instanceof st)throw new TypeError("Invalid arguments to usePermission(db, table, obj): Missing table and obj arguments.");if(typeof n.table=="function"&&typeof n.db=="object")o=n.db,r=n,e=n.table();else throw new TypeError("Invalid arguments to usePermissions(). Expected usePermissions(entity: DexieCloudEntity) or usePermissions(db: Dexie, table: string, obj: DexieCloudObject)")}if(!("cloud"in o))throw new Error("usePermissions() is only for Dexie Cloud but there's no dexie-cloud-addon active in given db.");if(!("permissions"in o.cloud))throw new Error("usePermissions() requires a newer version of dexie-cloud-addon. Please upgrade it.");return Xa(function(){return o.cloud.permissions(r,e)},[r.realmId,r.owner,e])}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(n){var e=st.DexieYProvider;e&&e.release(n)});const Di=Math.floor,Lc=Math.abs,nv=(n,e)=>n<e?n:e,_l=(n,e)=>n>e?n:e,rv=n=>n!==0?n<0:1/n<0,by=1,_y=2,Gf=4,Yf=8,Da=32,Ni=64,qn=128,ud=31,gh=63,fs=127,Hb=2147483647,iv=Number.MAX_SAFE_INTEGER,qb=Number.isInteger||(n=>typeof n=="number"&&isFinite(n)&&Di(n)===n),ps=()=>new Set,Qf=n=>n[n.length-1],Gb=(n,e)=>{for(let r=0;r<e.length;r++)n.push(e[r])},jo=Array.from,Yb=Array.isArray,Qb=n=>n.toLowerCase(),Jb=/^\s*/g,Xb=n=>n.replace(Jb,""),Zb=/([A-Z])/g,ky=(n,e)=>Xb(n.replace(Zb,r=>`${e}${Qb(r)}`)),e_=n=>{const e=unescape(encodeURIComponent(n)),r=e.length,o=new Uint8Array(r);for(let l=0;l<r;l++)o[l]=e.codePointAt(l);return o},Ra=typeof TextEncoder<"u"?new TextEncoder:null,t_=n=>Ra.encode(n),n_=Ra?t_:e_;let Ca=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Ca&&Ca.decode(new Uint8Array).length===1&&(Ca=null);class kl{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const xl=()=>new kl,r_=n=>{let e=n.cpos;for(let r=0;r<n.bufs.length;r++)e+=n.bufs[r].length;return e},Hn=n=>{const e=new Uint8Array(r_(n));let r=0;for(let o=0;o<n.bufs.length;o++){const l=n.bufs[o];e.set(l,r),r+=l.length}return e.set(new Uint8Array(n.cbuf.buffer,0,n.cpos),r),e},i_=(n,e)=>{const r=n.cbuf.length;r-n.cpos<e&&(n.bufs.push(new Uint8Array(n.cbuf.buffer,0,n.cpos)),n.cbuf=new Uint8Array(_l(r,e)*2),n.cpos=0)},ln=(n,e)=>{const r=n.cbuf.length;n.cpos===r&&(n.bufs.push(n.cbuf),n.cbuf=new Uint8Array(r*2),n.cpos=0),n.cbuf[n.cpos++]=e},vh=ln,rt=(n,e)=>{for(;e>fs;)ln(n,qn|fs&e),e=Di(e/128);ln(n,fs&e)},Gh=(n,e)=>{const r=rv(e);for(r&&(e=-e),ln(n,(e>gh?qn:0)|(r?Ni:0)|gh&e),e=Di(e/64);e>0;)ln(n,(e>fs?qn:0)|fs&e),e=Di(e/128)},wh=new Uint8Array(3e4),o_=wh.length/3,s_=(n,e)=>{if(e.length<o_){const r=Ra.encodeInto(e,wh).written||0;rt(n,r);for(let o=0;o<r;o++)ln(n,wh[o])}else pn(n,n_(e))},l_=(n,e)=>{const r=unescape(encodeURIComponent(e)),o=r.length;rt(n,o);for(let l=0;l<o;l++)ln(n,r.codePointAt(l))},or=Ra&&Ra.encodeInto?s_:l_,a_=(n,e)=>tu(n,Hn(e)),tu=(n,e)=>{const r=n.cbuf.length,o=n.cpos,l=nv(r-o,e.length),a=e.length-l;n.cbuf.set(e.subarray(0,l),o),n.cpos+=l,a>0&&(n.bufs.push(n.cbuf),n.cbuf=new Uint8Array(_l(r*2,a)),n.cbuf.set(e.subarray(l)),n.cpos=a)},pn=(n,e)=>{rt(n,e.byteLength),tu(n,e)},cd=(n,e)=>{i_(n,e);const r=new DataView(n.cbuf.buffer,n.cpos,e);return n.cpos+=e,r},u_=(n,e)=>cd(n,4).setFloat32(0,e,!1),c_=(n,e)=>cd(n,8).setFloat64(0,e,!1),d_=(n,e)=>cd(n,8).setBigInt64(0,e,!1),xy=(n,e)=>cd(n,8).setBigUint64(0,e,!1),Sy=new DataView(new ArrayBuffer(4)),f_=n=>(Sy.setFloat32(0,n),Sy.getFloat32(0)===n),Eo=(n,e)=>{switch(typeof e){case"string":ln(n,119),or(n,e);break;case"number":qb(e)&&Lc(e)<=Hb?(ln(n,125),Gh(n,e)):f_(e)?(ln(n,124),u_(n,e)):(ln(n,123),c_(n,e));break;case"bigint":ln(n,122),d_(n,e);break;case"object":if(e===null)ln(n,126);else if(Yb(e)){ln(n,117),rt(n,e.length);for(let r=0;r<e.length;r++)Eo(n,e[r])}else if(e instanceof Uint8Array)ln(n,116),pn(n,e);else{ln(n,118);const r=Object.keys(e);rt(n,r.length);for(let o=0;o<r.length;o++){const l=r[o];or(n,l),Eo(n,e[l])}}break;case"boolean":ln(n,e?120:121);break;default:ln(n,127)}};class Ey extends kl{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&rt(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const Cy=n=>{n.count>0&&(Gh(n.encoder,n.count===1?n.s:-n.s),n.count>1&&rt(n.encoder,n.count-2))};class Mc{constructor(){this.encoder=new kl,this.s=0,this.count=0}write(e){this.s===e?this.count++:(Cy(this),this.count=1,this.s=e)}toUint8Array(){return Cy(this),Hn(this.encoder)}}const Iy=n=>{if(n.count>0){const e=n.diff*2+(n.count===1?0:1);Gh(n.encoder,e),n.count>1&&rt(n.encoder,n.count-2)}};class Jf{constructor(){this.encoder=new kl,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(Iy(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return Iy(this),Hn(this.encoder)}}class h_{constructor(){this.sarr=[],this.s="",this.lensE=new Mc}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new kl;return this.sarr.push(this.s),this.s="",or(e,this.sarr.join("")),tu(e,this.lensE.toUint8Array()),Hn(e)}}const To=n=>new Error(n),Gr=()=>{throw To("Method unimplemented")},Yr=()=>{throw To("Unexpected case")},ov=To("Unexpected end of array"),sv=To("Integer out of Range");class Sl{constructor(e){this.arr=e,this.pos=0}}const nu=n=>new Sl(n),lv=n=>n.pos!==n.arr.length,p_=(n,e)=>{const r=new Uint8Array(n.arr.buffer,n.pos+n.arr.byteOffset,e);return n.pos+=e,r},mn=n=>p_(n,Ct(n)),hl=n=>n.arr[n.pos++],Ct=n=>{let e=0,r=1;const o=n.arr.length;for(;n.pos<o;){const l=n.arr[n.pos++];if(e=e+(l&fs)*r,r*=128,l<qn)return e;if(e>iv)throw sv}throw ov},Yh=n=>{let e=n.arr[n.pos++],r=e&gh,o=64;const l=(e&Ni)>0?-1:1;if((e&qn)===0)return l*r;const a=n.arr.length;for(;n.pos<a;){if(e=n.arr[n.pos++],r=r+(e&fs)*o,o*=128,e<qn)return l*r;if(r>iv)throw sv}throw ov},m_=n=>{let e=Ct(n);if(e===0)return"";{let r=String.fromCodePoint(hl(n));if(--e<100)for(;e--;)r+=String.fromCodePoint(hl(n));else for(;e>0;){const o=e<1e4?e:1e4,l=n.arr.subarray(n.pos,n.pos+o);n.pos+=o,r+=String.fromCodePoint.apply(null,l),e-=o}return decodeURIComponent(escape(r))}},y_=n=>Ca.decode(mn(n)),sr=Ca?y_:m_,dd=(n,e)=>{const r=new DataView(n.arr.buffer,n.arr.byteOffset+n.pos,e);return n.pos+=e,r},g_=n=>dd(n,4).getFloat32(0,!1),v_=n=>dd(n,8).getFloat64(0,!1),w_=n=>dd(n,8).getBigInt64(0,!1),Oy=n=>dd(n,8).getBigUint64(0,!1),b_=[n=>{},n=>null,Yh,g_,v_,w_,n=>!1,n=>!0,sr,n=>{const e=Ct(n),r={};for(let o=0;o<e;o++){const l=sr(n);r[l]=Co(n)}return r},n=>{const e=Ct(n),r=[];for(let o=0;o<e;o++)r.push(Co(n));return r},mn],Co=n=>b_[127-hl(n)](n);class jy extends Sl{constructor(e,r){super(e),this.reader=r,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),lv(this)?this.count=Ct(this)+1:this.count=-1),this.count--,this.s}}class Uc extends Sl{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=Yh(this);const e=rv(this.s);this.count=1,e&&(this.s=-this.s,this.count=Ct(this)+2)}return this.count--,this.s}}class Xf extends Sl{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=Yh(this),r=e&1;this.diff=Di(e/2),this.count=1,r&&(this.count=Ct(this)+2)}return this.s+=this.diff,this.count--,this.s}}class __{constructor(e){this.decoder=new Uc(e),this.str=sr(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),r=this.str.slice(this.spos,e);return this.spos=e,r}}var bh=function(n,e){return bh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},bh(n,e)};function Ri(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");bh(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function k_(n,e,r,o){function l(a){return a instanceof r?a:new r(function(d){d(a)})}return new(r||(r=Promise))(function(a,d){function h(_){try{m(o.next(_))}catch(w){d(w)}}function y(_){try{m(o.throw(_))}catch(w){d(w)}}function m(_){_.done?a(_.value):l(_.value).then(h,y)}m((o=o.apply(n,e||[])).next())})}function av(n,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},o,l,a,d=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return d.next=h(0),d.throw=h(1),d.return=h(2),typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function h(m){return function(_){return y([m,_])}}function y(m){if(o)throw new TypeError("Generator is already executing.");for(;d&&(d=0,m[0]&&(r=0)),r;)try{if(o=1,l&&(a=m[0]&2?l.return:m[0]?l.throw||((a=l.return)&&a.call(l),0):l.next)&&!(a=a.call(l,m[1])).done)return a;switch(l=0,a&&(m=[m[0]&2,a.value]),m[0]){case 0:case 1:a=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,l=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!a||m[1]>a[0]&&m[1]<a[3])){r.label=m[1];break}if(m[0]===6&&r.label<a[1]){r.label=a[1],a=m;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(m);break}a[2]&&r.ops.pop(),r.trys.pop();continue}m=e.call(n,r)}catch(_){m=[6,_],l=0}finally{o=a=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}function pl(n){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&n[e],o=0;if(r)return r.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ms(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var o=r.call(n),l,a=[],d;try{for(;(e===void 0||e-- >0)&&!(l=o.next()).done;)a.push(l.value)}catch(h){d={error:h}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(d)throw d.error}}return a}function ml(n,e,r){if(r||arguments.length===2)for(var o=0,l=e.length,a;o<l;o++)(a||!(o in e))&&(a||(a=Array.prototype.slice.call(e,0,o)),a[o]=e[o]);return n.concat(a||Array.prototype.slice.call(e))}function ul(n){return this instanceof ul?(this.v=n,this):new ul(n)}function x_(n,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=r.apply(n,e||[]),l,a=[];return l=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",d),l[Symbol.asyncIterator]=function(){return this},l;function d(C){return function(O){return Promise.resolve(O).then(C,w)}}function h(C,O){o[C]&&(l[C]=function(P){return new Promise(function(W,q){a.push([C,P,W,q])>1||y(C,P)})},O&&(l[C]=O(l[C])))}function y(C,O){try{m(o[C](O))}catch(P){x(a[0][3],P)}}function m(C){C.value instanceof ul?Promise.resolve(C.value.v).then(_,w):x(a[0][2],C)}function _(C){y("next",C)}function w(C){y("throw",C)}function x(C,O){C(O),a.shift(),a.length&&y(a[0][0],a[0][1])}}function S_(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],r;return e?e.call(n):(n=typeof pl=="function"?pl(n):n[Symbol.iterator](),r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r);function o(a){r[a]=n[a]&&function(d){return new Promise(function(h,y){d=n[a](d),l(h,y,d.done,d.value)})}}function l(a,d,h,y){Promise.resolve(y).then(function(m){a({value:m,done:h})},d)}}function xt(n){return typeof n=="function"}function Qh(n){var e=function(o){Error.call(o),o.stack=new Error().stack},r=n(e);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var Zf=Qh(function(n){return function(r){n(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(o,l){return l+1+") "+o.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function Vc(n,e){if(n){var r=n.indexOf(e);0<=r&&n.splice(r,1)}}var El=(function(){function n(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return n.prototype.unsubscribe=function(){var e,r,o,l,a;if(!this.closed){this.closed=!0;var d=this._parentage;if(d)if(this._parentage=null,Array.isArray(d))try{for(var h=pl(d),y=h.next();!y.done;y=h.next()){var m=y.value;m.remove(this)}}catch(P){e={error:P}}finally{try{y&&!y.done&&(r=h.return)&&r.call(h)}finally{if(e)throw e.error}}else d.remove(this);var _=this.initialTeardown;if(xt(_))try{_()}catch(P){a=P instanceof Zf?P.errors:[P]}var w=this._finalizers;if(w){this._finalizers=null;try{for(var x=pl(w),C=x.next();!C.done;C=x.next()){var O=C.value;try{Ty(O)}catch(P){a=a??[],P instanceof Zf?a=ml(ml([],ms(a)),ms(P.errors)):a.push(P)}}}catch(P){o={error:P}}finally{try{C&&!C.done&&(l=x.return)&&l.call(x)}finally{if(o)throw o.error}}}if(a)throw new Zf(a)}},n.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)Ty(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(e)}},n.prototype._hasParent=function(e){var r=this._parentage;return r===e||Array.isArray(r)&&r.includes(e)},n.prototype._addParent=function(e){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(e),r):r?[r,e]:e},n.prototype._removeParent=function(e){var r=this._parentage;r===e?this._parentage=null:Array.isArray(r)&&Vc(r,e)},n.prototype.remove=function(e){var r=this._finalizers;r&&Vc(r,e),e instanceof n&&e._removeParent(this)},n.EMPTY=(function(){var e=new n;return e.closed=!0,e})(),n})(),uv=El.EMPTY;function cv(n){return n instanceof El||n&&"closed"in n&&xt(n.remove)&&xt(n.add)&&xt(n.unsubscribe)}function Ty(n){xt(n)?n():n.unsubscribe()}var E_={Promise:void 0},C_={setTimeout:function(n,e){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return setTimeout.apply(void 0,ml([n,e],ms(r)))},clearTimeout:function(n){return clearTimeout(n)},delegate:void 0};function dv(n){C_.setTimeout(function(){throw n})}function Py(){}function zc(n){n()}var Jh=(function(n){Ri(e,n);function e(r){var o=n.call(this)||this;return o.isStopped=!1,r?(o.destination=r,cv(r)&&r.add(o)):o.destination=j_,o}return e.create=function(r,o,l){return new yl(r,o,l)},e.prototype.next=function(r){this.isStopped||this._next(r)},e.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(r){this.destination.next(r)},e.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e})(El),I_=(function(){function n(e){this.partialObserver=e}return n.prototype.next=function(e){var r=this.partialObserver;if(r.next)try{r.next(e)}catch(o){kc(o)}},n.prototype.error=function(e){var r=this.partialObserver;if(r.error)try{r.error(e)}catch(o){kc(o)}else kc(e)},n.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(r){kc(r)}},n})(),yl=(function(n){Ri(e,n);function e(r,o,l){var a=n.call(this)||this,d;return xt(r)||!r?d={next:r??void 0,error:o??void 0,complete:l??void 0}:d=r,a.destination=new I_(d),a}return e})(Jh);function kc(n){dv(n)}function O_(n){throw n}var j_={closed:!0,next:Py,error:O_,complete:Py},Xh=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();function Cl(n){return n}function T_(n){return n.length===0?Cl:n.length===1?n[0]:function(r){return n.reduce(function(o,l){return l(o)},r)}}var Xt=(function(){function n(e){e&&(this._subscribe=e)}return n.prototype.lift=function(e){var r=new n;return r.source=this,r.operator=e,r},n.prototype.subscribe=function(e,r,o){var l=this,a=N_(e)?e:new yl(e,r,o);return zc(function(){var d=l,h=d.operator,y=d.source;a.add(h?h.call(a,y):y?l._subscribe(a):l._trySubscribe(a))}),a},n.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){e.error(r)}},n.prototype.forEach=function(e,r){var o=this;return r=Ny(r),new r(function(l,a){var d=new yl({next:function(h){try{e(h)}catch(y){a(y),d.unsubscribe()}},error:a,complete:l});o.subscribe(d)})},n.prototype._subscribe=function(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)},n.prototype[Xh]=function(){return this},n.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return T_(e)(this)},n.prototype.toPromise=function(e){var r=this;return e=Ny(e),new e(function(o,l){var a;r.subscribe(function(d){return a=d},function(d){return l(d)},function(){return o(a)})})},n.create=function(e){return new n(e)},n})();function Ny(n){var e;return(e=n??E_.Promise)!==null&&e!==void 0?e:Promise}function P_(n){return n&&xt(n.next)&&xt(n.error)&&xt(n.complete)}function N_(n){return n&&n instanceof Jh||P_(n)&&cv(n)}function A_(n){return xt(n==null?void 0:n.lift)}function Qn(n){return function(e){if(A_(e))return e.lift(function(r){try{return n(r,this)}catch(o){this.error(o)}});throw new TypeError("Unable to lift unknown Observable type")}}function Yn(n,e,r,o,l){return new D_(n,e,r,o,l)}var D_=(function(n){Ri(e,n);function e(r,o,l,a,d,h){var y=n.call(this,r)||this;return y.onFinalize=d,y.shouldUnsubscribe=h,y._next=o?function(m){try{o(m)}catch(_){r.error(_)}}:n.prototype._next,y._error=a?function(m){try{a(m)}catch(_){r.error(_)}finally{this.unsubscribe()}}:n.prototype._error,y._complete=l?function(){try{l()}catch(m){r.error(m)}finally{this.unsubscribe()}}:n.prototype._complete,y}return e.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var o=this.closed;n.prototype.unsubscribe.call(this),!o&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},e})(Jh),R_=Qh(function(n){return function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),ys=(function(n){Ri(e,n);function e(){var r=n.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return e.prototype.lift=function(r){var o=new Ay(this,this);return o.operator=r,o},e.prototype._throwIfClosed=function(){if(this.closed)throw new R_},e.prototype.next=function(r){var o=this;zc(function(){var l,a;if(o._throwIfClosed(),!o.isStopped){o.currentObservers||(o.currentObservers=Array.from(o.observers));try{for(var d=pl(o.currentObservers),h=d.next();!h.done;h=d.next()){var y=h.value;y.next(r)}}catch(m){l={error:m}}finally{try{h&&!h.done&&(a=d.return)&&a.call(d)}finally{if(l)throw l.error}}}})},e.prototype.error=function(r){var o=this;zc(function(){if(o._throwIfClosed(),!o.isStopped){o.hasError=o.isStopped=!0,o.thrownError=r;for(var l=o.observers;l.length;)l.shift().error(r)}})},e.prototype.complete=function(){var r=this;zc(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var o=r.observers;o.length;)o.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(r){return this._throwIfClosed(),n.prototype._trySubscribe.call(this,r)},e.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},e.prototype._innerSubscribe=function(r){var o=this,l=this,a=l.hasError,d=l.isStopped,h=l.observers;return a||d?uv:(this.currentObservers=null,h.push(r),new El(function(){o.currentObservers=null,Vc(h,r)}))},e.prototype._checkFinalizedStatuses=function(r){var o=this,l=o.hasError,a=o.thrownError,d=o.isStopped;l?r.error(a):d&&r.complete()},e.prototype.asObservable=function(){var r=new Xt;return r.source=this,r},e.create=function(r,o){return new Ay(r,o)},e})(Xt),Ay=(function(n){Ri(e,n);function e(r,o){var l=n.call(this)||this;return l.destination=r,l.source=o,l}return e.prototype.next=function(r){var o,l;(l=(o=this.destination)===null||o===void 0?void 0:o.next)===null||l===void 0||l.call(o,r)},e.prototype.error=function(r){var o,l;(l=(o=this.destination)===null||o===void 0?void 0:o.error)===null||l===void 0||l.call(o,r)},e.prototype.complete=function(){var r,o;(o=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||o===void 0||o.call(r)},e.prototype._subscribe=function(r){var o,l;return(l=(o=this.source)===null||o===void 0?void 0:o.subscribe(r))!==null&&l!==void 0?l:uv},e})(ys),Cr=(function(n){Ri(e,n);function e(r){var o=n.call(this)||this;return o._value=r,o}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(r){var o=n.prototype._subscribe.call(this,r);return!o.closed&&r.next(this._value),o},e.prototype.getValue=function(){var r=this,o=r.hasError,l=r.thrownError,a=r._value;if(o)throw l;return this._throwIfClosed(),a},e.prototype.next=function(r){n.prototype.next.call(this,this._value=r)},e})(ys),L_={now:function(){return Date.now()}},M_=(function(n){Ri(e,n);function e(r,o){return n.call(this)||this}return e.prototype.schedule=function(r,o){return this},e})(El),Dy={setInterval:function(n,e){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return setInterval.apply(void 0,ml([n,e],ms(r)))},clearInterval:function(n){return clearInterval(n)},delegate:void 0},U_=(function(n){Ri(e,n);function e(r,o){var l=n.call(this,r,o)||this;return l.scheduler=r,l.work=o,l.pending=!1,l}return e.prototype.schedule=function(r,o){var l;if(o===void 0&&(o=0),this.closed)return this;this.state=r;var a=this.id,d=this.scheduler;return a!=null&&(this.id=this.recycleAsyncId(d,a,o)),this.pending=!0,this.delay=o,this.id=(l=this.id)!==null&&l!==void 0?l:this.requestAsyncId(d,this.id,o),this},e.prototype.requestAsyncId=function(r,o,l){return l===void 0&&(l=0),Dy.setInterval(r.flush.bind(r,this),l)},e.prototype.recycleAsyncId=function(r,o,l){if(l===void 0&&(l=0),l!=null&&this.delay===l&&this.pending===!1)return o;o!=null&&Dy.clearInterval(o)},e.prototype.execute=function(r,o){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var l=this._execute(r,o);if(l)return l;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(r,o){var l=!1,a;try{this.work(r)}catch(d){l=!0,a=d||new Error("Scheduled action threw falsy error")}if(l)return this.unsubscribe(),a},e.prototype.unsubscribe=function(){if(!this.closed){var r=this,o=r.id,l=r.scheduler,a=l.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Vc(a,this),o!=null&&(this.id=this.recycleAsyncId(l,o,null)),this.delay=null,n.prototype.unsubscribe.call(this)}},e})(M_),Ry=(function(){function n(e,r){r===void 0&&(r=n.now),this.schedulerActionCtor=e,this.now=r}return n.prototype.schedule=function(e,r,o){return r===void 0&&(r=0),new this.schedulerActionCtor(this,e).schedule(o,r)},n.now=L_.now,n})(),z_=(function(n){Ri(e,n);function e(r,o){o===void 0&&(o=Ry.now);var l=n.call(this,r,o)||this;return l.actions=[],l._active=!1,l}return e.prototype.flush=function(r){var o=this.actions;if(this._active){o.push(r);return}var l;this._active=!0;do if(l=r.execute(r.state,r.delay))break;while(r=o.shift());if(this._active=!1,l){for(;r=o.shift();)r.unsubscribe();throw l}},e})(Ry),Zh=new z_(U_),F_=Zh,fv=new Xt(function(n){return n.complete()});function hv(n){return n&&xt(n.schedule)}function ep(n){return n[n.length-1]}function B_(n){return xt(ep(n))?n.pop():void 0}function ru(n){return hv(ep(n))?n.pop():void 0}function $_(n,e){return typeof ep(n)=="number"?n.pop():e}var tp=(function(n){return n&&typeof n.length=="number"&&typeof n!="function"});function pv(n){return xt(n==null?void 0:n.then)}function mv(n){return xt(n[Xh])}function yv(n){return Symbol.asyncIterator&&xt(n==null?void 0:n[Symbol.asyncIterator])}function gv(n){return new TypeError("You provided "+(n!==null&&typeof n=="object"?"an invalid object":"'"+n+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function K_(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var vv=K_();function wv(n){return xt(n==null?void 0:n[vv])}function bv(n){return x_(this,arguments,function(){var r,o,l,a;return av(this,function(d){switch(d.label){case 0:r=n.getReader(),d.label=1;case 1:d.trys.push([1,,9,10]),d.label=2;case 2:return[4,ul(r.read())];case 3:return o=d.sent(),l=o.value,a=o.done,a?[4,ul(void 0)]:[3,5];case 4:return[2,d.sent()];case 5:return[4,ul(l)];case 6:return[4,d.sent()];case 7:return d.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}function _v(n){return xt(n==null?void 0:n.getReader)}function ur(n){if(n instanceof Xt)return n;if(n!=null){if(mv(n))return V_(n);if(tp(n))return W_(n);if(pv(n))return H_(n);if(yv(n))return kv(n);if(wv(n))return q_(n);if(_v(n))return G_(n)}throw gv(n)}function V_(n){return new Xt(function(e){var r=n[Xh]();if(xt(r.subscribe))return r.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function W_(n){return new Xt(function(e){for(var r=0;r<n.length&&!e.closed;r++)e.next(n[r]);e.complete()})}function H_(n){return new Xt(function(e){n.then(function(r){e.closed||(e.next(r),e.complete())},function(r){return e.error(r)}).then(null,dv)})}function q_(n){return new Xt(function(e){var r,o;try{for(var l=pl(n),a=l.next();!a.done;a=l.next()){var d=a.value;if(e.next(d),e.closed)return}}catch(h){r={error:h}}finally{try{a&&!a.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}e.complete()})}function kv(n){return new Xt(function(e){Y_(n,e).catch(function(r){return e.error(r)})})}function G_(n){return kv(bv(n))}function Y_(n,e){var r,o,l,a;return k_(this,void 0,void 0,function(){var d,h;return av(this,function(y){switch(y.label){case 0:y.trys.push([0,5,6,11]),r=S_(n),y.label=1;case 1:return[4,r.next()];case 2:if(o=y.sent(),!!o.done)return[3,4];if(d=o.value,e.next(d),e.closed)return[2];y.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return h=y.sent(),l={error:h},[3,11];case 6:return y.trys.push([6,,9,10]),o&&!o.done&&(a=r.return)?[4,a.call(r)]:[3,8];case 7:y.sent(),y.label=8;case 8:return[3,10];case 9:if(l)throw l.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function Io(n,e,r,o,l){o===void 0&&(o=0),l===void 0&&(l=!1);var a=e.schedule(function(){r(),l?n.add(this.schedule(null,o)):this.unsubscribe()},o);if(n.add(a),!l)return a}function xv(n,e){return e===void 0&&(e=0),Qn(function(r,o){r.subscribe(Yn(o,function(l){return Io(o,n,function(){return o.next(l)},e)},function(){return Io(o,n,function(){return o.complete()},e)},function(l){return Io(o,n,function(){return o.error(l)},e)}))})}function Sv(n,e){return e===void 0&&(e=0),Qn(function(r,o){o.add(n.schedule(function(){return r.subscribe(o)},e))})}function Q_(n,e){return ur(n).pipe(Sv(e),xv(e))}function J_(n,e){return ur(n).pipe(Sv(e),xv(e))}function X_(n,e){return new Xt(function(r){var o=0;return e.schedule(function(){o===n.length?r.complete():(r.next(n[o++]),r.closed||this.schedule())})})}function Z_(n,e){return new Xt(function(r){var o;return Io(r,e,function(){o=n[vv](),Io(r,e,function(){var l,a,d;try{l=o.next(),a=l.value,d=l.done}catch(h){r.error(h);return}d?r.complete():r.next(a)},0,!0)}),function(){return xt(o==null?void 0:o.return)&&o.return()}})}function Ev(n,e){if(!n)throw new Error("Iterable cannot be null");return new Xt(function(r){Io(r,e,function(){var o=n[Symbol.asyncIterator]();Io(r,e,function(){o.next().then(function(l){l.done?r.complete():r.next(l.value)})},0,!0)})})}function ek(n,e){return Ev(bv(n),e)}function tk(n,e){if(n!=null){if(mv(n))return Q_(n,e);if(tp(n))return X_(n,e);if(pv(n))return J_(n,e);if(yv(n))return Ev(n,e);if(wv(n))return Z_(n,e);if(_v(n))return ek(n,e)}throw gv(n)}function Gn(n,e){return e?tk(n,e):ur(n)}function Ai(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=ru(n);return Gn(n,r)}function Ly(n,e){var r=xt(n)?n:function(){return n},o=function(l){return l.error(r())};return new Xt(o)}var nk=Qh(function(n){return function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}});function cs(n,e){return new Promise(function(r,o){var l=new yl({next:function(a){r(a),l.unsubscribe()},error:o,complete:function(){o(new nk)}});n.subscribe(l)})}function rk(n){return n instanceof Date&&!isNaN(n)}function Wn(n,e){return Qn(function(r,o){var l=0;r.subscribe(Yn(o,function(a){o.next(n.call(e,a,l++))}))})}var ik=Array.isArray;function ok(n,e){return ik(e)?n.apply(void 0,ml([],ms(e))):n(e)}function Cv(n){return Wn(function(e){return ok(n,e)})}var sk=Array.isArray,lk=Object.getPrototypeOf,ak=Object.prototype,uk=Object.keys;function ck(n){if(n.length===1){var e=n[0];if(sk(e))return{args:e,keys:null};if(dk(e)){var r=uk(e);return{args:r.map(function(o){return e[o]}),keys:r}}}return{args:n,keys:null}}function dk(n){return n&&typeof n=="object"&&lk(n)===ak}function fk(n,e){return n.reduce(function(r,o,l){return r[o]=e[l],r},{})}function La(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=ru(n),o=B_(n),l=ck(n),a=l.args,d=l.keys;if(a.length===0)return Gn([],r);var h=new Xt(hk(a,r,d?function(y){return fk(d,y)}:Cl));return o?h.pipe(Cv(o)):h}function hk(n,e,r){return r===void 0&&(r=Cl),function(o){My(e,function(){for(var l=n.length,a=new Array(l),d=l,h=l,y=function(_){My(e,function(){var w=Gn(n[_],e),x=!1;w.subscribe(Yn(o,function(C){a[_]=C,x||(x=!0,h--),h||o.next(r(a.slice()))},function(){--d||o.complete()}))},o)},m=0;m<l;m++)y(m)},o)}}function My(n,e,r){n?Io(r,n,e):e()}function pk(n,e,r,o,l,a,d,h){var y=[],m=0,_=0,w=!1,x=function(){w&&!y.length&&!m&&e.complete()},C=function(P){return m<o?O(P):y.push(P)},O=function(P){m++;var W=!1;ur(r(P,_++)).subscribe(Yn(e,function(q){e.next(q)},function(){W=!0},void 0,function(){if(W)try{m--;for(var q=function(){var te=y.shift();d||O(te)};y.length&&m<o;)q();x()}catch(te){e.error(te)}}))};return n.subscribe(Yn(e,C,function(){w=!0,x()})),function(){}}function iu(n,e,r){return r===void 0&&(r=1/0),xt(e)?iu(function(o,l){return Wn(function(a,d){return e(o,a,l,d)})(ur(n(o,l)))},r):(typeof e=="number"&&(r=e),Qn(function(o,l){return pk(o,l,n,r)}))}function Iv(n){return n===void 0&&(n=1/0),iu(Cl,n)}function mk(){return Iv(1)}function Uy(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return mk()(Gn(n,ru(n)))}var yk=["addListener","removeListener"],gk=["addEventListener","removeEventListener"],vk=["on","off"];function qr(n,e,r,o){if(xt(r)&&(o=r,r=void 0),o)return qr(n,e,r).pipe(Cv(o));var l=ms(_k(n)?gk.map(function(h){return function(y){return n[h](e,y,r)}}):wk(n)?yk.map(zy(n,e)):bk(n)?vk.map(zy(n,e)):[],2),a=l[0],d=l[1];if(!a&&tp(n))return iu(function(h){return qr(h,e,r)})(ur(n));if(!a)throw new TypeError("Invalid event target");return new Xt(function(h){var y=function(){for(var m=[],_=0;_<arguments.length;_++)m[_]=arguments[_];return h.next(1<m.length?m:m[0])};return a(y),function(){return d(y)}})}function zy(n,e){return function(r){return function(o){return n[r](e,o)}}}function wk(n){return xt(n.addListener)&&xt(n.removeListener)}function bk(n){return xt(n.on)&&xt(n.off)}function _k(n){return xt(n.addEventListener)&&xt(n.removeEventListener)}function Ov(n,e,r){n===void 0&&(n=0),r===void 0&&(r=F_);var o=-1;return e!=null&&(hv(e)?r=e:o=e),new Xt(function(l){var a=rk(n)?+n-r.now():n;a<0&&(a=0);var d=0;return r.schedule(function(){l.closed||(l.next(d++),0<=o?this.schedule(void 0,o):l.complete())},a)})}function fd(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=ru(n),o=$_(n,1/0),l=n;return l.length?l.length===1?ur(l[0]):Iv(o)(Gn(l,r)):fv}function ir(n,e){return Qn(function(r,o){var l=0;r.subscribe(Yn(o,function(a){return n.call(e,a,l++)&&o.next(a)}))})}function _h(n){return Qn(function(e,r){var o=null,l=!1,a;o=e.subscribe(Yn(r,void 0,void 0,function(d){a=ur(n(d,_h(n)(e))),o?(o.unsubscribe(),o=null,a.subscribe(r)):l=!0})),l&&(o.unsubscribe(),o=null,a.subscribe(r))})}function Fy(n,e){return e===void 0&&(e=Zh),Qn(function(r,o){var l=null,a=null,d=null,h=function(){if(l){l.unsubscribe(),l=null;var m=a;a=null,o.next(m)}};function y(){var m=d+n,_=e.now();if(_<m){l=this.schedule(void 0,m-_),o.add(l);return}h()}r.subscribe(Yn(o,function(m){a=m,d=e.now(),l||(l=e.schedule(y,n),o.add(l))},function(){h(),o.complete()},void 0,function(){a=l=null}))})}function sl(n){return n<=0?function(){return fv}:Qn(function(e,r){var o=0;e.subscribe(Yn(r,function(l){++o<=n&&(r.next(l),n<=o&&r.complete())}))})}function kk(n){return Wn(function(){return n})}function xk(n,e){return iu(function(r,o){return ur(n(r,o)).pipe(sl(1),kk(r))})}function jv(n,e){e===void 0&&(e=Zh);var r=Ov(n,e);return xk(function(){return r})}function Tv(n,e){return e===void 0&&(e=Cl),n=n??Sk,Qn(function(r,o){var l,a=!0;r.subscribe(Yn(o,function(d){var h=e(d);(a||!n(l,h))&&(a=!1,l=h,o.next(d))}))})}function Sk(n,e){return n===e}function Ek(n){n===void 0&&(n={});var e=n.connector,r=e===void 0?function(){return new ys}:e,o=n.resetOnError,l=o===void 0?!0:o,a=n.resetOnComplete,d=a===void 0?!0:a,h=n.resetOnRefCountZero,y=h===void 0?!0:h;return function(m){var _,w,x,C=0,O=!1,P=!1,W=function(){w==null||w.unsubscribe(),w=void 0},q=function(){W(),_=x=void 0,O=P=!1},te=function(){var fe=_;q(),fe==null||fe.unsubscribe()};return Qn(function(fe,G){C++,!P&&!O&&W();var Ee=x=x??r();G.add(function(){C--,C===0&&!P&&!O&&(w=eh(te,y))}),Ee.subscribe(G),!_&&C>0&&(_=new yl({next:function(ye){return Ee.next(ye)},error:function(ye){P=!0,W(),w=eh(q,l,ye),Ee.error(ye)},complete:function(){O=!0,W(),w=eh(q,d),Ee.complete()}}),ur(fe).subscribe(_))})(m)}}function eh(n,e){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];if(e===!0){n();return}if(e!==!1){var l=new yl({next:function(){l.unsubscribe(),n()}});return ur(e.apply(void 0,ml([],ms(r)))).subscribe(l)}}function By(n){return ir(function(e,r){return n<=r})}function Pv(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=ru(n);return Qn(function(o,l){(r?Uy(n,o,r):Uy(n,o)).subscribe(l)})}function Sn(n,e){return Qn(function(r,o){var l=null,a=0,d=!1,h=function(){return d&&!l&&o.complete()};r.subscribe(Yn(o,function(y){l==null||l.unsubscribe();var m=0,_=a++;ur(n(y,_)).subscribe(l=Yn(o,function(w){return o.next(e?e(y,w,_,m++):w)},function(){l=null,h()}))},function(){d=!0,h()}))})}function kh(n,e,r){var o=xt(n)||e||r?{next:n,error:e,complete:r}:n;return o?Qn(function(l,a){var d;(d=o.subscribe)===null||d===void 0||d.call(o);var h=!0;l.subscribe(Yn(a,function(y){var m;(m=o.next)===null||m===void 0||m.call(o,y),a.next(y)},function(){var y;h=!1,(y=o.complete)===null||y===void 0||y.call(o),a.complete()},function(y){var m;h=!1,(m=o.error)===null||m===void 0||m.call(o,y),a.error(y)},function(){var y,m;h&&((y=o.unsubscribe)===null||y===void 0||y.call(o)),(m=o.finalize)===null||m===void 0||m.call(o)}))}):Cl}const zn=()=>new Map,xh=n=>{const e=zn();return n.forEach((r,o)=>{e.set(o,r)}),e},Li=(n,e,r)=>{let o=n.get(e);return o===void 0&&n.set(e,o=r()),o},Ck=(n,e)=>{const r=[];for(const[o,l]of n)r.push(e(l,o));return r},Ik=(n,e)=>{for(const[r,o]of n)if(e(o,r))return!0;return!1};class Ok{constructor(){this._observers=zn()}on(e,r){return Li(this._observers,e,ps).add(r),r}once(e,r){const o=(...l)=>{this.off(e,o),r(...l)};this.on(e,o)}off(e,r){const o=this._observers.get(e);o!==void 0&&(o.delete(r),o.size===0&&this._observers.delete(e))}emit(e,r){return jo((this._observers.get(e)||zn()).values()).forEach(o=>o(...r))}destroy(){this._observers=zn()}}class jk{constructor(){this._observers=zn()}on(e,r){Li(this._observers,e,ps).add(r)}once(e,r){const o=(...l)=>{this.off(e,o),r(...l)};this.on(e,o)}off(e,r){const o=this._observers.get(e);o!==void 0&&(o.delete(r),o.size===0&&this._observers.delete(e))}emit(e,r){return jo((this._observers.get(e)||zn()).values()).forEach(o=>o(...r))}destroy(){this._observers=zn()}}const Tk=crypto.getRandomValues.bind(crypto),Nv=()=>Tk(new Uint32Array(1))[0],Pk="10000000-1000-4000-8000"+-1e11,Nk=()=>Pk.replace(/[018]/g,n=>(n^Nv()&15>>n/4).toString(16)),Wc=Date.now,$y=n=>new Promise(n);Promise.all.bind(Promise);const Ky=n=>n===void 0?null:n;class Ak{constructor(){this.map=new Map}setItem(e,r){this.map.set(e,r)}getItem(e){return this.map.get(e)}}let Av=new Ak,Dk=!0;try{typeof localStorage<"u"&&localStorage&&(Av=localStorage,Dk=!1)}catch{}const Rk=Av,Lk=Object.assign,Dv=Object.keys,Mk=(n,e)=>{for(const r in n)e(n[r],r)},Vy=n=>Dv(n).length,Wy=n=>Dv(n).length,Uk=n=>{for(const e in n)return!1;return!0},zk=(n,e)=>{for(const r in n)if(!e(n[r],r))return!1;return!0},Rv=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),Fk=(n,e)=>n===e||Wy(n)===Wy(e)&&zk(n,(r,o)=>(r!==void 0||Rv(e,o))&&e[o]===r),Bk=Object.freeze,Lv=n=>{for(const e in n){const r=n[e];(typeof r=="object"||typeof r=="function")&&Lv(n[e])}return Bk(n)},Hy=Symbol("Equality"),np=(n,e,r=0)=>{try{for(;r<n.length;r++)n[r](...e)}finally{r<n.length&&np(n,e,r+1)}},Ia=(n,e)=>{if(n===e)return!0;if(n==null||e==null||n.constructor!==e.constructor)return!1;if(n[Hy]!=null)return n[Hy](e);switch(n.constructor){case ArrayBuffer:n=new Uint8Array(n),e=new Uint8Array(e);case Uint8Array:{if(n.byteLength!==e.byteLength)return!1;for(let r=0;r<n.length;r++)if(n[r]!==e[r])return!1;break}case Set:{if(n.size!==e.size)return!1;for(const r of n)if(!e.has(r))return!1;break}case Map:{if(n.size!==e.size)return!1;for(const r of n.keys())if(!e.has(r)||!Ia(n.get(r),e.get(r)))return!1;break}case Object:if(Vy(n)!==Vy(e))return!1;for(const r in n)if(!Rv(n,r)||!Ia(n[r],e[r]))return!1;break;case Array:if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++)if(!Ia(n[r],e[r]))return!1;break;default:return!1}return!0},$k=(n,e)=>e.includes(n);var Mv={};const Ma=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";let Wr;const Kk=()=>{if(Wr===void 0)if(Ma){Wr=zn();const n=process.argv;let e=null;for(let r=0;r<n.length;r++){const o=n[r];o[0]==="-"?(e!==null&&Wr.set(e,""),e=o):e!==null&&(Wr.set(e,o),e=null)}e!==null&&Wr.set(e,"")}else typeof location=="object"?(Wr=zn(),(location.search||"?").slice(1).split("&").forEach(n=>{if(n.length!==0){const[e,r]=n.split("=");Wr.set(`--${ky(e,"-")}`,r),Wr.set(`-${ky(e,"-")}`,r)}})):Wr=zn();return Wr},Sh=n=>Kk().has(n),Hc=n=>Ky(Ma?Mv[n.toUpperCase().replaceAll("-","_")]:Rk.getItem(n)),Uv=n=>Sh("--"+n)||Hc(n)!==null;Uv("production");const Vk=Ma&&$k(Mv.FORCE_COLOR,["true","1","2"]),Wk=Vk||!Sh("--no-colors")&&!Uv("no-color")&&(!Ma||process.stdout.isTTY)&&(!Ma||Sh("--color")||Hc("COLORTERM")!==null||(Hc("TERM")||"").includes("color"));class Hk{constructor(e,r){this.left=e,this.right=r}}const Ei=(n,e)=>new Hk(n,e);typeof DOMParser<"u"&&new DOMParser;const qk=n=>Ck(n,(e,r)=>`${r}:${e};`).join(""),Mi=Symbol,zv=Mi(),Fv=Mi(),Gk=Mi(),Yk=Mi(),Qk=Mi(),Bv=Mi(),Jk=Mi(),rp=Mi(),Xk=Mi(),Zk=n=>{var l;n.length===1&&((l=n[0])==null?void 0:l.constructor)===Function&&(n=n[0]());const e=[],r=[];let o=0;for(;o<n.length;o++){const a=n[o];if(a===void 0)break;if(a.constructor===String||a.constructor===Number)e.push(a);else if(a.constructor===Object)break}for(o>0&&r.push(e.join(""));o<n.length;o++){const a=n[o];a instanceof Symbol||r.push(a)}return r},e1={[zv]:Ei("font-weight","bold"),[Fv]:Ei("font-weight","normal"),[Gk]:Ei("color","blue"),[Qk]:Ei("color","green"),[Yk]:Ei("color","grey"),[Bv]:Ei("color","red"),[Jk]:Ei("color","purple"),[rp]:Ei("color","orange"),[Xk]:Ei("color","black")},t1=n=>{var d;n.length===1&&((d=n[0])==null?void 0:d.constructor)===Function&&(n=n[0]());const e=[],r=[],o=zn();let l=[],a=0;for(;a<n.length;a++){const h=n[a],y=e1[h];if(y!==void 0)o.set(y.left,y.right);else{if(h===void 0)break;if(h.constructor===String||h.constructor===Number){const m=qk(o);a>0||m.length>0?(e.push("%c"+h),r.push(m)):e.push(h)}else break}}for(a>0&&(l=r,l.unshift(e.join("")));a<n.length;a++){const h=n[a];h instanceof Symbol||l.push(h)}return l},$v=Wk?t1:Zk,n1=(...n)=>{console.log(...$v(n)),Kv.forEach(e=>e.print(n))},r1=(...n)=>{console.warn(...$v(n)),n.unshift(rp),Kv.forEach(e=>e.print(n))},Kv=ps(),Vv=n=>({[Symbol.iterator](){return this},next:n}),i1=(n,e)=>Vv(()=>{let r;do r=n.next();while(!r.done&&!e(r.value));return r}),th=(n,e)=>Vv(()=>{const{done:r,value:o}=n.next();return{done:r,value:r?void 0:e(o)}});class Wv{constructor(e,r){this.clock=e,this.len=r}}class hd{constructor(){this.clients=new Map}}const Hv=(n,e,r)=>e.clients.forEach((o,l)=>{const a=n.doc.store.clients.get(l);if(a!=null){const d=a[a.length-1],h=d.id.clock+d.length;for(let y=0,m=o[y];y<o.length&&m.clock<h;m=o[++y])t0(n,a,m.clock,m.len,r)}}),o1=(n,e)=>{let r=0,o=n.length-1;for(;r<=o;){const l=Di((r+o)/2),a=n[l],d=a.clock;if(d<=e){if(e<d+a.len)return l;r=l+1}else o=l-1}return null},qv=(n,e)=>{const r=n.clients.get(e.client);return r!==void 0&&o1(r,e.clock)!==null},ip=n=>{n.clients.forEach(e=>{e.sort((l,a)=>l.clock-a.clock);let r,o;for(r=1,o=1;r<e.length;r++){const l=e[o-1],a=e[r];l.clock+l.len>=a.clock?l.len=_l(l.len,a.clock+a.len-l.clock):(o<r&&(e[o]=a),o++)}e.length=o})},s1=n=>{const e=new hd;for(let r=0;r<n.length;r++)n[r].clients.forEach((o,l)=>{if(!e.clients.has(l)){const a=o.slice();for(let d=r+1;d<n.length;d++)Gb(a,n[d].clients.get(l)||[]);e.clients.set(l,a)}});return ip(e),e},qc=(n,e,r,o)=>{Li(n.clients,e,()=>[]).push(new Wv(r,o))},op=(n,e)=>{rt(n.restEncoder,e.clients.size),jo(e.clients.entries()).sort((r,o)=>o[0]-r[0]).forEach(([r,o])=>{n.resetDsCurVal(),rt(n.restEncoder,r);const l=o.length;rt(n.restEncoder,l);for(let a=0;a<l;a++){const d=o[a];n.writeDsClock(d.clock),n.writeDsLen(d.len)}})},l1=n=>{const e=new hd,r=Ct(n.restDecoder);for(let o=0;o<r;o++){n.resetDsCurVal();const l=Ct(n.restDecoder),a=Ct(n.restDecoder);if(a>0){const d=Li(e.clients,l,()=>[]);for(let h=0;h<a;h++)d.push(new Wv(n.readDsClock(),n.readDsLen()))}}return e},qy=(n,e,r)=>{const o=new hd,l=Ct(n.restDecoder);for(let a=0;a<l;a++){n.resetDsCurVal();const d=Ct(n.restDecoder),h=Ct(n.restDecoder),y=r.clients.get(d)||[],m=an(r,d);for(let _=0;_<h;_++){const w=n.readDsClock(),x=w+n.readDsLen();if(w<m){m<x&&qc(o,d,m,x-m);let C=Qr(y,w),O=y[C];for(!O.deleted&&O.id.clock<w&&(y.splice(C+1,0,ed(e,O,w-O.id.clock)),C++);C<y.length&&(O=y[C++],O.id.clock<x);)O.deleted||(x<O.id.clock+O.length&&y.splice(C,0,ed(e,O,x-O.id.clock)),O.delete(e))}else qc(o,d,w,x-w)}}if(o.clients.size>0){const a=new pd;return rt(a.restEncoder,0),op(a,o),a.toUint8Array()}return null},Gv=Nv;class Il extends Ok{constructor({guid:e=Nk(),collectionid:r=null,gc:o=!0,gcFilter:l=()=>!0,meta:a=null,autoLoad:d=!1,shouldLoad:h=!0}={}){super(),this.gc=o,this.gcFilter=l,this.clientID=Gv(),this.guid=e,this.collectionid=r,this.share=new Map,this.store=new Zv,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=h,this.autoLoad=d,this.meta=a,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=$y(m=>{this.on("load",()=>{this.isLoaded=!0,m(this)})});const y=()=>$y(m=>{const _=w=>{(w===void 0||w===!0)&&(this.off("sync",_),m())};this.on("sync",_)});this.on("sync",m=>{m===!1&&this.isSynced&&(this.whenSynced=y()),this.isSynced=m===void 0||m===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=y()}load(){const e=this._item;e!==null&&!this.shouldLoad&&Ot(e.parent.doc,r=>{r.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(jo(this.subdocs).map(e=>e.guid))}transact(e,r=null){return Ot(this,e,r)}get(e,r=yn){const o=Li(this.share,e,()=>{const a=new r;return a._integrate(this,null),a}),l=o.constructor;if(r!==yn&&l!==r)if(l===yn){const a=new r;a._map=o._map,o._map.forEach(d=>{for(;d!==null;d=d.left)d.parent=a}),a._start=o._start;for(let d=a._start;d!==null;d=d.right)d.parent=a;return a._length=o._length,this.share.set(e,a),a._integrate(this,null),a}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return o}getArray(e=""){return this.get(e,dl)}getText(e=""){return this.get(e,vl)}getMap(e=""){return this.get(e,gl)}getXmlElement(e=""){return this.get(e,wl)}getXmlFragment(e=""){return this.get(e,gs)}toJSON(){const e={};return this.share.forEach((r,o)=>{e[o]=r.toJSON()}),e}destroy(){this.isDestroyed=!0,jo(this.subdocs).forEach(r=>r.destroy());const e=this._item;if(e!==null){this._item=null;const r=e.content;r.doc=new Il({guid:this.guid,...r.opts,shouldLoad:!1}),r.doc._item=e,Ot(e.parent.doc,o=>{const l=r.doc;e.deleted||o.subdocsAdded.add(l),o.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class a1{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=Ct(this.restDecoder),this.dsCurrVal}readDsLen(){const e=Ct(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class Ua extends a1{constructor(e){super(e),this.keys=[],Ct(e),this.keyClockDecoder=new Xf(mn(e)),this.clientDecoder=new Uc(mn(e)),this.leftClockDecoder=new Xf(mn(e)),this.rightClockDecoder=new Xf(mn(e)),this.infoDecoder=new jy(mn(e),hl),this.stringDecoder=new __(mn(e)),this.parentInfoDecoder=new jy(mn(e),hl),this.typeRefDecoder=new Uc(mn(e)),this.lenDecoder=new Uc(mn(e))}readLeftID(){return new cl(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new cl(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return Co(this.restDecoder)}readBuf(){return mn(this.restDecoder)}readJSON(){return Co(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const r=this.stringDecoder.read();return this.keys.push(r),r}}}class u1{constructor(){this.restEncoder=xl()}toUint8Array(){return Hn(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){rt(this.restEncoder,e)}writeDsLen(e){rt(this.restEncoder,e)}}class c1 extends u1{writeLeftID(e){rt(this.restEncoder,e.client),rt(this.restEncoder,e.clock)}writeRightID(e){rt(this.restEncoder,e.client),rt(this.restEncoder,e.clock)}writeClient(e){rt(this.restEncoder,e)}writeInfo(e){vh(this.restEncoder,e)}writeString(e){or(this.restEncoder,e)}writeParentInfo(e){rt(this.restEncoder,e?1:0)}writeTypeRef(e){rt(this.restEncoder,e)}writeLen(e){rt(this.restEncoder,e)}writeAny(e){Eo(this.restEncoder,e)}writeBuf(e){pn(this.restEncoder,e)}writeJSON(e){or(this.restEncoder,JSON.stringify(e))}writeKey(e){or(this.restEncoder,e)}}class Yv{constructor(){this.restEncoder=xl(),this.dsCurrVal=0}toUint8Array(){return Hn(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const r=e-this.dsCurrVal;this.dsCurrVal=e,rt(this.restEncoder,r)}writeDsLen(e){e===0&&Yr(),rt(this.restEncoder,e-1),this.dsCurrVal+=e}}class pd extends Yv{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new Jf,this.clientEncoder=new Mc,this.leftClockEncoder=new Jf,this.rightClockEncoder=new Jf,this.infoEncoder=new Ey(vh),this.stringEncoder=new h_,this.parentInfoEncoder=new Ey(vh),this.typeRefEncoder=new Mc,this.lenEncoder=new Mc}toUint8Array(){const e=xl();return rt(e,0),pn(e,this.keyClockEncoder.toUint8Array()),pn(e,this.clientEncoder.toUint8Array()),pn(e,this.leftClockEncoder.toUint8Array()),pn(e,this.rightClockEncoder.toUint8Array()),pn(e,Hn(this.infoEncoder)),pn(e,this.stringEncoder.toUint8Array()),pn(e,Hn(this.parentInfoEncoder)),pn(e,this.typeRefEncoder.toUint8Array()),pn(e,this.lenEncoder.toUint8Array()),tu(e,Hn(this.restEncoder)),Hn(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){Eo(this.restEncoder,e)}writeBuf(e){pn(this.restEncoder,e)}writeJSON(e){Eo(this.restEncoder,e)}writeKey(e){const r=this.keyMap.get(e);r===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(r)}}const d1=(n,e,r,o)=>{o=_l(o,e[0].id.clock);const l=Qr(e,o);rt(n.restEncoder,e.length-l),n.writeClient(r),rt(n.restEncoder,o);const a=e[l];a.write(n,o-a.id.clock);for(let d=l+1;d<e.length;d++)e[d].write(n,0)},Qv=(n,e,r)=>{const o=new Map;r.forEach((l,a)=>{an(e,a)>l&&o.set(a,l)}),sp(e).forEach((l,a)=>{r.has(a)||o.set(a,0)}),rt(n.restEncoder,o.size),jo(o.entries()).sort((l,a)=>a[0]-l[0]).forEach(([l,a])=>{d1(n,e.clients.get(l),l,a)})},f1=(n,e)=>{const r=zn(),o=Ct(n.restDecoder);for(let l=0;l<o;l++){const a=Ct(n.restDecoder),d=new Array(a),h=n.readClient();let y=Ct(n.restDecoder);r.set(h,{i:0,refs:d});for(let m=0;m<a;m++){const _=n.readInfo();switch(ud&_){case 0:{const w=n.readLen();d[m]=new lr(yt(h,y),w),y+=w;break}case 10:{const w=Ct(n.restDecoder);d[m]=new ar(yt(h,y),w),y+=w;break}default:{const w=(_&(Ni|qn))===0,x=new Jt(yt(h,y),null,(_&qn)===qn?n.readLeftID():null,null,(_&Ni)===Ni?n.readRightID():null,w?n.readParentInfo()?e.get(n.readString()):n.readLeftID():null,w&&(_&Da)===Da?n.readString():null,k0(n,_));d[m]=x,y+=x.length}}}}return r},h1=(n,e,r)=>{const o=[];let l=jo(r.keys()).sort((C,O)=>C-O);if(l.length===0)return null;const a=()=>{if(l.length===0)return null;let C=r.get(l[l.length-1]);for(;C.refs.length===C.i;)if(l.pop(),l.length>0)C=r.get(l[l.length-1]);else return null;return C};let d=a();if(d===null)return null;const h=new Zv,y=new Map,m=(C,O)=>{const P=y.get(C);(P==null||P>O)&&y.set(C,O)};let _=d.refs[d.i++];const w=new Map,x=()=>{for(const C of o){const O=C.id.client,P=r.get(O);P?(P.i--,h.clients.set(O,P.refs.slice(P.i)),r.delete(O),P.i=0,P.refs=[]):h.clients.set(O,[C]),l=l.filter(W=>W!==O)}o.length=0};for(;;){if(_.constructor!==ar){const O=Li(w,_.id.client,()=>an(e,_.id.client))-_.id.clock;if(O<0)o.push(_),m(_.id.client,_.id.clock-1),x();else{const P=_.getMissing(n,e);if(P!==null){o.push(_);const W=r.get(P)||{refs:[],i:0};if(W.refs.length===W.i)m(P,an(e,P)),x();else{_=W.refs[W.i++];continue}}else(O===0||O<_.length)&&(_.integrate(n,O),w.set(_.id.client,_.id.clock+_.length))}}if(o.length>0)_=o.pop();else if(d!==null&&d.i<d.refs.length)_=d.refs[d.i++];else{if(d=a(),d===null)break;_=d.refs[d.i++]}}if(h.clients.size>0){const C=new pd;return Qv(C,h,new Map),rt(C.restEncoder,0),{missing:y,update:C.toUint8Array()}}return null},p1=(n,e)=>Qv(n,e.doc.store,e.beforeState),m1=(n,e,r,o=new Ua(n))=>Ot(e,l=>{l.local=!1;let a=!1;const d=l.doc,h=d.store,y=f1(o,d),m=h1(l,h,y),_=h.pendingStructs;if(_){for(const[x,C]of _.missing)if(C<an(h,x)){a=!0;break}if(m){for(const[x,C]of m.missing){const O=_.missing.get(x);(O==null||O>C)&&_.missing.set(x,C)}_.update=Gc([_.update,m.update])}}else h.pendingStructs=m;const w=qy(o,l,h);if(h.pendingDs){const x=new Ua(nu(h.pendingDs));Ct(x.restDecoder);const C=qy(x,l,h);w&&C?h.pendingDs=Gc([w,C]):h.pendingDs=w||C}else h.pendingDs=w;if(a){const x=h.pendingStructs.update;h.pendingStructs=null,Jv(l.doc,x)}},r,!1),Jv=(n,e,r,o=Ua)=>{const l=nu(e);m1(l,n,r,new o(l))};class y1{constructor(){this.l=[]}}const Gy=()=>new y1,Yy=(n,e)=>n.l.push(e),Qy=(n,e)=>{const r=n.l,o=r.length;n.l=r.filter(l=>e!==l),o===n.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},Xv=(n,e,r)=>np(n.l,[e,r]);class cl{constructor(e,r){this.client=e,this.clock=r}}const xc=(n,e)=>n===e||n!==null&&e!==null&&n.client===e.client&&n.clock===e.clock,yt=(n,e)=>new cl(n,e),g1=n=>{for(const[e,r]of n.doc.share.entries())if(r===n)return e;throw Yr()},ll=(n,e)=>e===void 0?!n.deleted:e.sv.has(n.id.client)&&(e.sv.get(n.id.client)||0)>n.id.clock&&!qv(e.ds,n.id),Eh=(n,e)=>{const r=Li(n.meta,Eh,ps),o=n.doc.store;r.has(e)||(e.sv.forEach((l,a)=>{l<an(o,a)&&Po(n,yt(a,l))}),Hv(n,e.ds,l=>{}),r.add(e))};class Zv{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const sp=n=>{const e=new Map;return n.clients.forEach((r,o)=>{const l=r[r.length-1];e.set(o,l.id.clock+l.length)}),e},an=(n,e)=>{const r=n.clients.get(e);if(r===void 0)return 0;const o=r[r.length-1];return o.id.clock+o.length},e0=(n,e)=>{let r=n.clients.get(e.id.client);if(r===void 0)r=[],n.clients.set(e.id.client,r);else{const o=r[r.length-1];if(o.id.clock+o.length!==e.id.clock)throw Yr()}r.push(e)},Qr=(n,e)=>{let r=0,o=n.length-1,l=n[o],a=l.id.clock;if(a===e)return o;let d=Di(e/(a+l.length-1)*o);for(;r<=o;){if(l=n[d],a=l.id.clock,a<=e){if(e<a+l.length)return d;r=d+1}else o=d-1;d=Di((r+o)/2)}throw Yr()},v1=(n,e)=>{const r=n.clients.get(e.client);return r[Qr(r,e.clock)]},nh=v1,Ch=(n,e,r)=>{const o=Qr(e,r),l=e[o];return l.id.clock<r&&l instanceof Jt?(e.splice(o+1,0,ed(n,l,r-l.id.clock)),o+1):o},Po=(n,e)=>{const r=n.doc.store.clients.get(e.client);return r[Ch(n,r,e.clock)]},Jy=(n,e,r)=>{const o=e.clients.get(r.client),l=Qr(o,r.clock),a=o[l];return r.clock!==a.id.clock+a.length-1&&a.constructor!==lr&&o.splice(l+1,0,ed(n,a,r.clock-a.id.clock+1)),a},w1=(n,e,r)=>{const o=n.clients.get(e.id.client);o[Qr(o,e.id.clock)]=r},t0=(n,e,r,o,l)=>{if(o===0)return;const a=r+o;let d=Ch(n,e,r),h;do h=e[d++],a<h.id.clock+h.length&&Ch(n,e,a),l(h);while(d<e.length&&e[d].id.clock<a)};class b1{constructor(e,r,o){this.doc=e,this.deleteSet=new hd,this.beforeState=sp(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=r,this.meta=new Map,this.local=o,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const Xy=(n,e)=>e.deleteSet.clients.size===0&&!Ik(e.afterState,(r,o)=>e.beforeState.get(o)!==r)?!1:(ip(e.deleteSet),p1(n,e),op(n,e.deleteSet),!0),Zy=(n,e,r)=>{const o=e._item;(o===null||o.id.clock<(n.beforeState.get(o.id.client)||0)&&!o.deleted)&&Li(n.changed,e,ps).add(r)},Fc=(n,e)=>{let r=n[e],o=n[e-1],l=e;for(;l>0;r=o,o=n[--l-1]){if(o.deleted===r.deleted&&o.constructor===r.constructor&&o.mergeWith(r)){r instanceof Jt&&r.parentSub!==null&&r.parent._map.get(r.parentSub)===r&&r.parent._map.set(r.parentSub,o);continue}break}const a=e-l;return a&&n.splice(e+1-a,a),a},_1=(n,e,r)=>{for(const[o,l]of n.clients.entries()){const a=e.clients.get(o);for(let d=l.length-1;d>=0;d--){const h=l[d],y=h.clock+h.len;for(let m=Qr(a,h.clock),_=a[m];m<a.length&&_.id.clock<y;_=a[++m]){const w=a[m];if(h.clock+h.len<=w.id.clock)break;w instanceof Jt&&w.deleted&&!w.keep&&r(w)&&w.gc(e,!1)}}}},k1=(n,e)=>{n.clients.forEach((r,o)=>{const l=e.clients.get(o);for(let a=r.length-1;a>=0;a--){const d=r[a],h=nv(l.length-1,1+Qr(l,d.clock+d.len-1));for(let y=h,m=l[y];y>0&&m.id.clock>=d.clock;m=l[y])y-=1+Fc(l,y)}})},n0=(n,e)=>{if(e<n.length){const r=n[e],o=r.doc,l=o.store,a=r.deleteSet,d=r._mergeStructs;try{ip(a),r.afterState=sp(r.doc.store),o.emit("beforeObserverCalls",[r,o]);const h=[];r.changed.forEach((y,m)=>h.push(()=>{(m._item===null||!m._item.deleted)&&m._callObserver(r,y)})),h.push(()=>{r.changedParentTypes.forEach((y,m)=>{m._dEH.l.length>0&&(m._item===null||!m._item.deleted)&&(y=y.filter(_=>_.target._item===null||!_.target._item.deleted),y.forEach(_=>{_.currentTarget=m,_._path=null}),y.sort((_,w)=>_.path.length-w.path.length),Xv(m._dEH,y,r))})}),h.push(()=>o.emit("afterTransaction",[r,o])),np(h,[]),r._needFormattingCleanup&&F1(r)}finally{o.gc&&_1(a,l,o.gcFilter),k1(a,l),r.afterState.forEach((_,w)=>{const x=r.beforeState.get(w)||0;if(x!==_){const C=l.clients.get(w),O=_l(Qr(C,x),1);for(let P=C.length-1;P>=O;)P-=1+Fc(C,P)}});for(let _=d.length-1;_>=0;_--){const{client:w,clock:x}=d[_].id,C=l.clients.get(w),O=Qr(C,x);O+1<C.length&&Fc(C,O+1)>1||O>0&&Fc(C,O)}if(!r.local&&r.afterState.get(o.clientID)!==r.beforeState.get(o.clientID)&&(n1(rp,zv,"[yjs] ",Fv,Bv,"Changed the client-id because another client seems to be using it."),o.clientID=Gv()),o.emit("afterTransactionCleanup",[r,o]),o._observers.has("update")){const _=new c1;Xy(_,r)&&o.emit("update",[_.toUint8Array(),r.origin,o,r])}if(o._observers.has("updateV2")){const _=new pd;Xy(_,r)&&o.emit("updateV2",[_.toUint8Array(),r.origin,o,r])}const{subdocsAdded:h,subdocsLoaded:y,subdocsRemoved:m}=r;(h.size>0||m.size>0||y.size>0)&&(h.forEach(_=>{_.clientID=o.clientID,_.collectionid==null&&(_.collectionid=o.collectionid),o.subdocs.add(_)}),m.forEach(_=>o.subdocs.delete(_)),o.emit("subdocs",[{loaded:y,added:h,removed:m},o,r]),m.forEach(_=>_.destroy())),n.length<=e+1?(o._transactionCleanups=[],o.emit("afterAllTransactions",[o,n])):n0(n,e+1)}}},Ot=(n,e,r=null,o=!0)=>{const l=n._transactionCleanups;let a=!1,d=null;n._transaction===null&&(a=!0,n._transaction=new b1(n,r,o),l.push(n._transaction),l.length===1&&n.emit("beforeAllTransactions",[n]),n.emit("beforeTransaction",[n._transaction,n]));try{d=e(n._transaction)}finally{if(a){const h=n._transaction===l[0];n._transaction=null,h&&n0(l,0)}}return d};function*x1(n){const e=Ct(n.restDecoder);for(let r=0;r<e;r++){const o=Ct(n.restDecoder),l=n.readClient();let a=Ct(n.restDecoder);for(let d=0;d<o;d++){const h=n.readInfo();if(h===10){const y=Ct(n.restDecoder);yield new ar(yt(l,a),y),a+=y}else if((ud&h)!==0){const y=(h&(Ni|qn))===0,m=new Jt(yt(l,a),null,(h&qn)===qn?n.readLeftID():null,null,(h&Ni)===Ni?n.readRightID():null,y?n.readParentInfo()?n.readString():n.readLeftID():null,y&&(h&Da)===Da?n.readString():null,k0(n,h));yield m,a+=m.length}else{const y=n.readLen();yield new lr(yt(l,a),y),a+=y}}}}class r0{constructor(e,r){this.gen=x1(e),this.curr=null,this.done=!1,this.filterSkips=r,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===ar);return this.curr}}class S1{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const i0=(n,e=Yv,r=Ua)=>{const o=new e,l=new r0(new r(nu(n)),!1);let a=l.curr;if(a!==null){let d=0,h=a.id.client,y=a.id.clock!==0,m=y?0:a.id.clock+a.length;for(;a!==null;a=l.next())h!==a.id.client&&(m!==0&&(d++,rt(o.restEncoder,h),rt(o.restEncoder,m)),h=a.id.client,m=0,y=a.id.clock!==0),a.constructor===ar&&(y=!0),y||(m=a.id.clock+a.length);m!==0&&(d++,rt(o.restEncoder,h),rt(o.restEncoder,m));const _=xl();return rt(_,d),a_(_,o.restEncoder),o.restEncoder=_,o.toUint8Array()}else return rt(o.restEncoder,0),o.toUint8Array()},E1=(n,e)=>{if(n.constructor===lr){const{client:r,clock:o}=n.id;return new lr(yt(r,o+e),n.length-e)}else if(n.constructor===ar){const{client:r,clock:o}=n.id;return new ar(yt(r,o+e),n.length-e)}else{const r=n,{client:o,clock:l}=r.id;return new Jt(yt(o,l+e),null,yt(o,l+e-1),null,r.rightOrigin,r.parent,r.parentSub,r.content.splice(e))}},Gc=(n,e=Ua,r=pd)=>{if(n.length===1)return n[0];const o=n.map(_=>new e(nu(_)));let l=o.map(_=>new r0(_,!0)),a=null;const d=new r,h=new S1(d);for(;l=l.filter(x=>x.curr!==null),l.sort((x,C)=>{if(x.curr.id.client===C.curr.id.client){const O=x.curr.id.clock-C.curr.id.clock;return O===0?x.curr.constructor===C.curr.constructor?0:x.curr.constructor===ar?1:-1:O}else return C.curr.id.client-x.curr.id.client}),l.length!==0;){const _=l[0],w=_.curr.id.client;if(a!==null){let x=_.curr,C=!1;for(;x!==null&&x.id.clock+x.length<=a.struct.id.clock+a.struct.length&&x.id.client>=a.struct.id.client;)x=_.next(),C=!0;if(x===null||x.id.client!==w||C&&x.id.clock>a.struct.id.clock+a.struct.length)continue;if(w!==a.struct.id.client)ba(h,a.struct,a.offset),a={struct:x,offset:0},_.next();else if(a.struct.id.clock+a.struct.length<x.id.clock)if(a.struct.constructor===ar)a.struct.length=x.id.clock+x.length-a.struct.id.clock;else{ba(h,a.struct,a.offset);const O=x.id.clock-a.struct.id.clock-a.struct.length;a={struct:new ar(yt(w,a.struct.id.clock+a.struct.length),O),offset:0}}else{const O=a.struct.id.clock+a.struct.length-x.id.clock;O>0&&(a.struct.constructor===ar?a.struct.length-=O:x=E1(x,O)),a.struct.mergeWith(x)||(ba(h,a.struct,a.offset),a={struct:x,offset:0},_.next())}}else a={struct:_.curr,offset:0},_.next();for(let x=_.curr;x!==null&&x.id.client===w&&x.id.clock===a.struct.id.clock+a.struct.length&&x.constructor!==ar;x=_.next())ba(h,a.struct,a.offset),a={struct:x,offset:0}}a!==null&&(ba(h,a.struct,a.offset),a=null),C1(h);const y=o.map(_=>l1(_)),m=s1(y);return op(d,m),d.toUint8Array()},o0=n=>{n.written>0&&(n.clientStructs.push({written:n.written,restEncoder:Hn(n.encoder.restEncoder)}),n.encoder.restEncoder=xl(),n.written=0)},ba=(n,e,r)=>{n.written>0&&n.currClient!==e.id.client&&o0(n),n.written===0&&(n.currClient=e.id.client,n.encoder.writeClient(e.id.client),rt(n.encoder.restEncoder,e.id.clock+r)),e.write(n.encoder,r),n.written++},C1=n=>{o0(n);const e=n.encoder.restEncoder;rt(e,n.clientStructs.length);for(let r=0;r<n.clientStructs.length;r++){const o=n.clientStructs[r];rt(e,o.written),tu(e,o.restEncoder)}},eg="You must not compute changes after the event-handler fired.";class md{constructor(e,r){this.target=e,this.currentTarget=e,this.transaction=r,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=I1(this.currentTarget,this.target))}deletes(e){return qv(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw To(eg);const e=new Map,r=this.target;this.transaction.changed.get(r).forEach(l=>{if(l!==null){const a=r._map.get(l);let d,h;if(this.adds(a)){let y=a.left;for(;y!==null&&this.adds(y);)y=y.left;if(this.deletes(a))if(y!==null&&this.deletes(y))d="delete",h=Qf(y.content.getContent());else return;else y!==null&&this.deletes(y)?(d="update",h=Qf(y.content.getContent())):(d="add",h=void 0)}else if(this.deletes(a))d="delete",h=Qf(a.content.getContent());else return;e.set(l,{action:d,oldValue:h})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw To(eg);const r=this.target,o=ps(),l=ps(),a=[];if(e={added:o,deleted:l,delta:a,keys:this.keys},this.transaction.changed.get(r).has(null)){let h=null;const y=()=>{h&&a.push(h)};for(let m=r._start;m!==null;m=m.right)m.deleted?this.deletes(m)&&!this.adds(m)&&((h===null||h.delete===void 0)&&(y(),h={delete:0}),h.delete+=m.length,l.add(m)):this.adds(m)?((h===null||h.insert===void 0)&&(y(),h={insert:[]}),h.insert=h.insert.concat(m.content.getContent()),o.add(m)):((h===null||h.retain===void 0)&&(y(),h={retain:0}),h.retain+=m.length);h!==null&&h.retain===void 0&&y()}this._changes=e}return e}}const I1=(n,e)=>{const r=[];for(;e._item!==null&&e!==n;){if(e._item.parentSub!==null)r.unshift(e._item.parentSub);else{let o=0,l=e._item.parent._start;for(;l!==e._item&&l!==null;)!l.deleted&&l.countable&&(o+=l.length),l=l.right;r.unshift(o)}e=e._item.parent}return r},Cn=()=>{r1("Invalid access: Add Yjs type to a document before reading data.")},s0=80;let lp=0;class O1{constructor(e,r){e.marker=!0,this.p=e,this.index=r,this.timestamp=lp++}}const j1=n=>{n.timestamp=lp++},l0=(n,e,r)=>{n.p.marker=!1,n.p=e,e.marker=!0,n.index=r,n.timestamp=lp++},T1=(n,e,r)=>{if(n.length>=s0){const o=n.reduce((l,a)=>l.timestamp<a.timestamp?l:a);return l0(o,e,r),o}else{const o=new O1(e,r);return n.push(o),o}},yd=(n,e)=>{if(n._start===null||e===0||n._searchMarker===null)return null;const r=n._searchMarker.length===0?null:n._searchMarker.reduce((a,d)=>Lc(e-a.index)<Lc(e-d.index)?a:d);let o=n._start,l=0;for(r!==null&&(o=r.p,l=r.index,j1(r));o.right!==null&&l<e;){if(!o.deleted&&o.countable){if(e<l+o.length)break;l+=o.length}o=o.right}for(;o.left!==null&&l>e;)o=o.left,!o.deleted&&o.countable&&(l-=o.length);for(;o.left!==null&&o.left.id.client===o.id.client&&o.left.id.clock+o.left.length===o.id.clock;)o=o.left,!o.deleted&&o.countable&&(l-=o.length);return r!==null&&Lc(r.index-l)<o.parent.length/s0?(l0(r,o,l),r):T1(n._searchMarker,o,l)},za=(n,e,r)=>{for(let o=n.length-1;o>=0;o--){const l=n[o];if(r>0){let a=l.p;for(a.marker=!1;a&&(a.deleted||!a.countable);)a=a.left,a&&!a.deleted&&a.countable&&(l.index-=a.length);if(a===null||a.marker===!0){n.splice(o,1);continue}l.p=a,a.marker=!0}(e<l.index||r>0&&e===l.index)&&(l.index=_l(e,l.index+r))}},gd=(n,e,r)=>{const o=n,l=e.changedParentTypes;for(;Li(l,n,()=>[]).push(r),n._item!==null;)n=n._item.parent;Xv(o._eH,r,e)};class yn{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=Gy(),this._dEH=Gy(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,r){this.doc=e,this._item=r}_copy(){throw Gr()}clone(){throw Gr()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,r){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){Yy(this._eH,e)}observeDeep(e){Yy(this._dEH,e)}unobserve(e){Qy(this._eH,e)}unobserveDeep(e){Qy(this._dEH,e)}toJSON(){}}const a0=(n,e,r)=>{n.doc??Cn(),e<0&&(e=n._length+e),r<0&&(r=n._length+r);let o=r-e;const l=[];let a=n._start;for(;a!==null&&o>0;){if(a.countable&&!a.deleted){const d=a.content.getContent();if(d.length<=e)e-=d.length;else{for(let h=e;h<d.length&&o>0;h++)l.push(d[h]),o--;e=0}}a=a.right}return l},u0=n=>{n.doc??Cn();const e=[];let r=n._start;for(;r!==null;){if(r.countable&&!r.deleted){const o=r.content.getContent();for(let l=0;l<o.length;l++)e.push(o[l])}r=r.right}return e},Fa=(n,e)=>{let r=0,o=n._start;for(n.doc??Cn();o!==null;){if(o.countable&&!o.deleted){const l=o.content.getContent();for(let a=0;a<l.length;a++)e(l[a],r++,n)}o=o.right}},c0=(n,e)=>{const r=[];return Fa(n,(o,l)=>{r.push(e(o,l,n))}),r},P1=n=>{let e=n._start,r=null,o=0;return{[Symbol.iterator](){return this},next:()=>{if(r===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};r=e.content.getContent(),o=0,e=e.right}const l=r[o++];return r.length<=o&&(r=null),{done:!1,value:l}}}},d0=(n,e)=>{n.doc??Cn();const r=yd(n,e);let o=n._start;for(r!==null&&(o=r.p,e-=r.index);o!==null;o=o.right)if(!o.deleted&&o.countable){if(e<o.length)return o.content.getContent()[e];e-=o.length}},Yc=(n,e,r,o)=>{let l=r;const a=n.doc,d=a.clientID,h=a.store,y=r===null?e._start:r.right;let m=[];const _=()=>{m.length>0&&(l=new Jt(yt(d,an(h,d)),l,l&&l.lastId,y,y&&y.id,e,null,new vs(m)),l.integrate(n,0),m=[])};o.forEach(w=>{if(w===null)m.push(w);else switch(w.constructor){case Number:case Object:case Boolean:case Array:case String:m.push(w);break;default:switch(_(),w.constructor){case Uint8Array:case ArrayBuffer:l=new Jt(yt(d,an(h,d)),l,l&&l.lastId,y,y&&y.id,e,null,new ou(new Uint8Array(w))),l.integrate(n,0);break;case Il:l=new Jt(yt(d,an(h,d)),l,l&&l.lastId,y,y&&y.id,e,null,new su(w)),l.integrate(n,0);break;default:if(w instanceof yn)l=new Jt(yt(d,an(h,d)),l,l&&l.lastId,y,y&&y.id,e,null,new Ui(w)),l.integrate(n,0);else throw new Error("Unexpected content type in insert operation")}}}),_()},f0=()=>To("Length exceeded!"),h0=(n,e,r,o)=>{if(r>e._length)throw f0();if(r===0)return e._searchMarker&&za(e._searchMarker,r,o.length),Yc(n,e,null,o);const l=r,a=yd(e,r);let d=e._start;for(a!==null&&(d=a.p,r-=a.index,r===0&&(d=d.prev,r+=d&&d.countable&&!d.deleted?d.length:0));d!==null;d=d.right)if(!d.deleted&&d.countable){if(r<=d.length){r<d.length&&Po(n,yt(d.id.client,d.id.clock+r));break}r-=d.length}return e._searchMarker&&za(e._searchMarker,l,o.length),Yc(n,e,d,o)},N1=(n,e,r)=>{let l=(e._searchMarker||[]).reduce((a,d)=>d.index>a.index?d:a,{index:0,p:e._start}).p;if(l)for(;l.right;)l=l.right;return Yc(n,e,l,r)},p0=(n,e,r,o)=>{if(o===0)return;const l=r,a=o,d=yd(e,r);let h=e._start;for(d!==null&&(h=d.p,r-=d.index);h!==null&&r>0;h=h.right)!h.deleted&&h.countable&&(r<h.length&&Po(n,yt(h.id.client,h.id.clock+r)),r-=h.length);for(;o>0&&h!==null;)h.deleted||(o<h.length&&Po(n,yt(h.id.client,h.id.clock+o)),h.delete(n),o-=h.length),h=h.right;if(o>0)throw f0();e._searchMarker&&za(e._searchMarker,l,-a+o)},Qc=(n,e,r)=>{const o=e._map.get(r);o!==void 0&&o.delete(n)},ap=(n,e,r,o)=>{const l=e._map.get(r)||null,a=n.doc,d=a.clientID;let h;if(o==null)h=new vs([o]);else switch(o.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:h=new vs([o]);break;case Uint8Array:h=new ou(o);break;case Il:h=new su(o);break;default:if(o instanceof yn)h=new Ui(o);else throw new Error("Unexpected content type")}new Jt(yt(d,an(a.store,d)),l,l&&l.lastId,null,null,e,r,h).integrate(n,0)},up=(n,e)=>{n.doc??Cn();const r=n._map.get(e);return r!==void 0&&!r.deleted?r.content.getContent()[r.length-1]:void 0},m0=n=>{const e={};return n.doc??Cn(),n._map.forEach((r,o)=>{r.deleted||(e[o]=r.content.getContent()[r.length-1])}),e},y0=(n,e)=>{n.doc??Cn();const r=n._map.get(e);return r!==void 0&&!r.deleted},A1=(n,e)=>{const r={};return n._map.forEach((o,l)=>{let a=o;for(;a!==null&&(!e.sv.has(a.id.client)||a.id.clock>=(e.sv.get(a.id.client)||0));)a=a.left;a!==null&&ll(a,e)&&(r[l]=a.content.getContent()[a.length-1])}),r},Sc=n=>(n.doc??Cn(),i1(n._map.entries(),e=>!e[1].deleted));class D1 extends md{}class dl extends yn{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const r=new dl;return r.push(e),r}_integrate(e,r){super._integrate(e,r),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new dl}clone(){const e=new dl;return e.insert(0,this.toArray().map(r=>r instanceof yn?r.clone():r)),e}get length(){return this.doc??Cn(),this._length}_callObserver(e,r){super._callObserver(e,r),gd(this,e,new D1(this,e))}insert(e,r){this.doc!==null?Ot(this.doc,o=>{h0(o,this,e,r)}):this._prelimContent.splice(e,0,...r)}push(e){this.doc!==null?Ot(this.doc,r=>{N1(r,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,r=1){this.doc!==null?Ot(this.doc,o=>{p0(o,this,e,r)}):this._prelimContent.splice(e,r)}get(e){return d0(this,e)}toArray(){return u0(this)}slice(e=0,r=this.length){return a0(this,e,r)}toJSON(){return this.map(e=>e instanceof yn?e.toJSON():e)}map(e){return c0(this,e)}forEach(e){Fa(this,e)}[Symbol.iterator](){return P1(this)}_write(e){e.writeTypeRef(ox)}}const R1=n=>new dl;class L1 extends md{constructor(e,r,o){super(e,r),this.keysChanged=o}}class gl extends yn{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,r){super._integrate(e,r),this._prelimContent.forEach((o,l)=>{this.set(l,o)}),this._prelimContent=null}_copy(){return new gl}clone(){const e=new gl;return this.forEach((r,o)=>{e.set(o,r instanceof yn?r.clone():r)}),e}_callObserver(e,r){gd(this,e,new L1(this,e,r))}toJSON(){this.doc??Cn();const e={};return this._map.forEach((r,o)=>{if(!r.deleted){const l=r.content.getContent()[r.length-1];e[o]=l instanceof yn?l.toJSON():l}}),e}get size(){return[...Sc(this)].length}keys(){return th(Sc(this),e=>e[0])}values(){return th(Sc(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return th(Sc(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??Cn(),this._map.forEach((r,o)=>{r.deleted||e(r.content.getContent()[r.length-1],o,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?Ot(this.doc,r=>{Qc(r,this,e)}):this._prelimContent.delete(e)}set(e,r){return this.doc!==null?Ot(this.doc,o=>{ap(o,this,e,r)}):this._prelimContent.set(e,r),r}get(e){return up(this,e)}has(e){return y0(this,e)}clear(){this.doc!==null?Ot(this.doc,e=>{this.forEach(function(r,o,l){Qc(e,l,o)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(sx)}}const M1=n=>new gl,xo=(n,e)=>n===e||typeof n=="object"&&typeof e=="object"&&n&&e&&Fk(n,e);class Ih{constructor(e,r,o,l){this.left=e,this.right=r,this.index=o,this.currentAttributes=l}forward(){switch(this.right===null&&Yr(),this.right.content.constructor){case Zt:this.right.deleted||Ol(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const tg=(n,e,r)=>{for(;e.right!==null&&r>0;){switch(e.right.content.constructor){case Zt:e.right.deleted||Ol(e.currentAttributes,e.right.content);break;default:e.right.deleted||(r<e.right.length&&Po(n,yt(e.right.id.client,e.right.id.clock+r)),e.index+=e.right.length,r-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},Ec=(n,e,r,o)=>{const l=new Map,a=o?yd(e,r):null;if(a){const d=new Ih(a.p.left,a.p,a.index,l);return tg(n,d,r-a.index)}else{const d=new Ih(null,e._start,0,l);return tg(n,d,r)}},g0=(n,e,r,o)=>{for(;r.right!==null&&(r.right.deleted===!0||r.right.content.constructor===Zt&&xo(o.get(r.right.content.key),r.right.content.value));)r.right.deleted||o.delete(r.right.content.key),r.forward();const l=n.doc,a=l.clientID;o.forEach((d,h)=>{const y=r.left,m=r.right,_=new Jt(yt(a,an(l.store,a)),y,y&&y.lastId,m,m&&m.id,e,null,new Zt(h,d));_.integrate(n,0),r.right=_,r.forward()})},Ol=(n,e)=>{const{key:r,value:o}=e;o===null?n.delete(r):n.set(r,o)},v0=(n,e)=>{for(;n.right!==null;){if(!(n.right.deleted||n.right.content.constructor===Zt&&xo(e[n.right.content.key]??null,n.right.content.value)))break;n.forward()}},w0=(n,e,r,o)=>{const l=n.doc,a=l.clientID,d=new Map;for(const h in o){const y=o[h],m=r.currentAttributes.get(h)??null;if(!xo(m,y)){d.set(h,m);const{left:_,right:w}=r;r.right=new Jt(yt(a,an(l.store,a)),_,_&&_.lastId,w,w&&w.id,e,null,new Zt(h,y)),r.right.integrate(n,0),r.forward()}}return d},rh=(n,e,r,o,l)=>{r.currentAttributes.forEach((x,C)=>{l[C]===void 0&&(l[C]=null)});const a=n.doc,d=a.clientID;v0(r,l);const h=w0(n,e,r,l),y=o.constructor===String?new Jr(o):o instanceof yn?new Ui(o):new ws(o);let{left:m,right:_,index:w}=r;e._searchMarker&&za(e._searchMarker,r.index,y.getLength()),_=new Jt(yt(d,an(a.store,d)),m,m&&m.lastId,_,_&&_.id,e,null,y),_.integrate(n,0),r.right=_,r.index=w,r.forward(),g0(n,e,r,h)},ng=(n,e,r,o,l)=>{const a=n.doc,d=a.clientID;v0(r,l);const h=w0(n,e,r,l);e:for(;r.right!==null&&(o>0||h.size>0&&(r.right.deleted||r.right.content.constructor===Zt));){if(!r.right.deleted)switch(r.right.content.constructor){case Zt:{const{key:y,value:m}=r.right.content,_=l[y];if(_!==void 0){if(xo(_,m))h.delete(y);else{if(o===0)break e;h.set(y,m)}r.right.delete(n)}else r.currentAttributes.set(y,m);break}default:o<r.right.length&&Po(n,yt(r.right.id.client,r.right.id.clock+o)),o-=r.right.length;break}r.forward()}if(o>0){let y="";for(;o>0;o--)y+=`
`;r.right=new Jt(yt(d,an(a.store,d)),r.left,r.left&&r.left.lastId,r.right,r.right&&r.right.id,e,null,new Jr(y)),r.right.integrate(n,0),r.forward()}g0(n,e,r,h)},b0=(n,e,r,o,l)=>{let a=e;const d=zn();for(;a&&(!a.countable||a.deleted);){if(!a.deleted&&a.content.constructor===Zt){const m=a.content;d.set(m.key,m)}a=a.right}let h=0,y=!1;for(;e!==a;){if(r===e&&(y=!0),!e.deleted){const m=e.content;switch(m.constructor){case Zt:{const{key:_,value:w}=m,x=o.get(_)??null;(d.get(_)!==m||x===w)&&(e.delete(n),h++,!y&&(l.get(_)??null)===w&&x!==w&&(x===null?l.delete(_):l.set(_,x))),!y&&!e.deleted&&Ol(l,m);break}}}e=e.right}return h},U1=(n,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const r=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===Zt){const o=e.content.key;r.has(o)?e.delete(n):r.add(o)}e=e.left}},z1=n=>{let e=0;return Ot(n.doc,r=>{let o=n._start,l=n._start,a=zn();const d=xh(a);for(;l;){if(l.deleted===!1)switch(l.content.constructor){case Zt:Ol(d,l.content);break;default:e+=b0(r,o,l,a,d),a=xh(d),o=l;break}l=l.right}}),e},F1=n=>{const e=new Set,r=n.doc;for(const[o,l]of n.afterState.entries()){const a=n.beforeState.get(o)||0;l!==a&&t0(n,r.store.clients.get(o),a,l,d=>{!d.deleted&&d.content.constructor===Zt&&d.constructor!==lr&&e.add(d.parent)})}Ot(r,o=>{Hv(n,n.deleteSet,l=>{if(l instanceof lr||!l.parent._hasFormatting||e.has(l.parent))return;const a=l.parent;l.content.constructor===Zt?e.add(a):U1(o,l)});for(const l of e)z1(l)})},rg=(n,e,r)=>{const o=r,l=xh(e.currentAttributes),a=e.right;for(;r>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case Ui:case ws:case Jr:r<e.right.length&&Po(n,yt(e.right.id.client,e.right.id.clock+r)),r-=e.right.length,e.right.delete(n);break}e.forward()}a&&b0(n,a,e.right,l,e.currentAttributes);const d=(e.left||e.right).parent;return d._searchMarker&&za(d._searchMarker,e.index,-o+r),e};class B1 extends md{constructor(e,r,o){super(e,r),this.childListChanged=!1,this.keysChanged=new Set,o.forEach(l=>{l===null?this.childListChanged=!0:this.keysChanged.add(l)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,r=[];Ot(e,o=>{const l=new Map,a=new Map;let d=this.target._start,h=null;const y={};let m="",_=0,w=0;const x=()=>{if(h!==null){let C=null;switch(h){case"delete":w>0&&(C={delete:w}),w=0;break;case"insert":(typeof m=="object"||m.length>0)&&(C={insert:m},l.size>0&&(C.attributes={},l.forEach((O,P)=>{O!==null&&(C.attributes[P]=O)}))),m="";break;case"retain":_>0&&(C={retain:_},Uk(y)||(C.attributes=Lk({},y))),_=0;break}C&&r.push(C),h=null}};for(;d!==null;){switch(d.content.constructor){case Ui:case ws:this.adds(d)?this.deletes(d)||(x(),h="insert",m=d.content.getContent()[0],x()):this.deletes(d)?(h!=="delete"&&(x(),h="delete"),w+=1):d.deleted||(h!=="retain"&&(x(),h="retain"),_+=1);break;case Jr:this.adds(d)?this.deletes(d)||(h!=="insert"&&(x(),h="insert"),m+=d.content.str):this.deletes(d)?(h!=="delete"&&(x(),h="delete"),w+=d.length):d.deleted||(h!=="retain"&&(x(),h="retain"),_+=d.length);break;case Zt:{const{key:C,value:O}=d.content;if(this.adds(d)){if(!this.deletes(d)){const P=l.get(C)??null;xo(P,O)?O!==null&&d.delete(o):(h==="retain"&&x(),xo(O,a.get(C)??null)?delete y[C]:y[C]=O)}}else if(this.deletes(d)){a.set(C,O);const P=l.get(C)??null;xo(P,O)||(h==="retain"&&x(),y[C]=P)}else if(!d.deleted){a.set(C,O);const P=y[C];P!==void 0&&(xo(P,O)?P!==null&&d.delete(o):(h==="retain"&&x(),O===null?delete y[C]:y[C]=O))}d.deleted||(h==="insert"&&x(),Ol(l,d.content));break}}d=d.right}for(x();r.length>0;){const C=r[r.length-1];if(C.retain!==void 0&&C.attributes===void 0)r.pop();else break}}),this._delta=r}return this._delta}}class vl extends yn{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??Cn(),this._length}_integrate(e,r){super._integrate(e,r);try{this._pending.forEach(o=>o())}catch(o){console.error(o)}this._pending=null}_copy(){return new vl}clone(){const e=new vl;return e.applyDelta(this.toDelta()),e}_callObserver(e,r){super._callObserver(e,r);const o=new B1(this,e,r);gd(this,e,o),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??Cn();let e="",r=this._start;for(;r!==null;)!r.deleted&&r.countable&&r.content.constructor===Jr&&(e+=r.content.str),r=r.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:r=!0}={}){this.doc!==null?Ot(this.doc,o=>{const l=new Ih(null,this._start,0,new Map);for(let a=0;a<e.length;a++){const d=e[a];if(d.insert!==void 0){const h=!r&&typeof d.insert=="string"&&a===e.length-1&&l.right===null&&d.insert.slice(-1)===`
`?d.insert.slice(0,-1):d.insert;(typeof h!="string"||h.length>0)&&rh(o,this,l,h,d.attributes||{})}else d.retain!==void 0?ng(o,this,l,d.retain,d.attributes||{}):d.delete!==void 0&&rg(o,l,d.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,r,o){this.doc??Cn();const l=[],a=new Map,d=this.doc;let h="",y=this._start;function m(){if(h.length>0){const w={};let x=!1;a.forEach((O,P)=>{x=!0,w[P]=O});const C={insert:h};x&&(C.attributes=w),l.push(C),h=""}}const _=()=>{for(;y!==null;){if(ll(y,e)||r!==void 0&&ll(y,r))switch(y.content.constructor){case Jr:{const w=a.get("ychange");e!==void 0&&!ll(y,e)?(w===void 0||w.user!==y.id.client||w.type!=="removed")&&(m(),a.set("ychange",o?o("removed",y.id):{type:"removed"})):r!==void 0&&!ll(y,r)?(w===void 0||w.user!==y.id.client||w.type!=="added")&&(m(),a.set("ychange",o?o("added",y.id):{type:"added"})):w!==void 0&&(m(),a.delete("ychange")),h+=y.content.str;break}case Ui:case ws:{m();const w={insert:y.content.getContent()[0]};if(a.size>0){const x={};w.attributes=x,a.forEach((C,O)=>{x[O]=C})}l.push(w);break}case Zt:ll(y,e)&&(m(),Ol(a,y.content));break}y=y.right}m()};return e||r?Ot(d,w=>{e&&Eh(w,e),r&&Eh(w,r),_()},"cleanup"):_(),l}insert(e,r,o){if(r.length<=0)return;const l=this.doc;l!==null?Ot(l,a=>{const d=Ec(a,this,e,!o);o||(o={},d.currentAttributes.forEach((h,y)=>{o[y]=h})),rh(a,this,d,r,o)}):this._pending.push(()=>this.insert(e,r,o))}insertEmbed(e,r,o){const l=this.doc;l!==null?Ot(l,a=>{const d=Ec(a,this,e,!o);rh(a,this,d,r,o||{})}):this._pending.push(()=>this.insertEmbed(e,r,o||{}))}delete(e,r){if(r===0)return;const o=this.doc;o!==null?Ot(o,l=>{rg(l,Ec(l,this,e,!0),r)}):this._pending.push(()=>this.delete(e,r))}format(e,r,o){if(r===0)return;const l=this.doc;l!==null?Ot(l,a=>{const d=Ec(a,this,e,!1);d.right!==null&&ng(a,this,d,r,o)}):this._pending.push(()=>this.format(e,r,o))}removeAttribute(e){this.doc!==null?Ot(this.doc,r=>{Qc(r,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,r){this.doc!==null?Ot(this.doc,o=>{ap(o,this,e,r)}):this._pending.push(()=>this.setAttribute(e,r))}getAttribute(e){return up(this,e)}getAttributes(){return m0(this)}_write(e){e.writeTypeRef(lx)}}const $1=n=>new vl;class ih{constructor(e,r=()=>!0){this._filter=r,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??Cn()}[Symbol.iterator](){return this}next(){let e=this._currentNode,r=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(r)))do if(r=e.content.type,!e.deleted&&(r.constructor===wl||r.constructor===gs)&&r._start!==null)e=r._start;else for(;e!==null;){const o=e.next;if(o!==null){e=o;break}else e.parent===this._root?e=null:e=e.parent._item}while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class gs extends yn{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,r){super._integrate(e,r),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new gs}clone(){const e=new gs;return e.insert(0,this.toArray().map(r=>r instanceof yn?r.clone():r)),e}get length(){return this.doc??Cn(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new ih(this,e)}querySelector(e){e=e.toUpperCase();const o=new ih(this,l=>l.nodeName&&l.nodeName.toUpperCase()===e).next();return o.done?null:o.value}querySelectorAll(e){return e=e.toUpperCase(),jo(new ih(this,r=>r.nodeName&&r.nodeName.toUpperCase()===e))}_callObserver(e,r){gd(this,e,new W1(this,r,e))}toString(){return c0(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,r={},o){const l=e.createDocumentFragment();return o!==void 0&&o._createAssociation(l,this),Fa(this,a=>{l.insertBefore(a.toDOM(e,r,o),null)}),l}insert(e,r){this.doc!==null?Ot(this.doc,o=>{h0(o,this,e,r)}):this._prelimContent.splice(e,0,...r)}insertAfter(e,r){if(this.doc!==null)Ot(this.doc,o=>{const l=e&&e instanceof yn?e._item:e;Yc(o,this,l,r)});else{const o=this._prelimContent,l=e===null?0:o.findIndex(a=>a===e)+1;if(l===0&&e!==null)throw To("Reference item not found");o.splice(l,0,...r)}}delete(e,r=1){this.doc!==null?Ot(this.doc,o=>{p0(o,this,e,r)}):this._prelimContent.splice(e,r)}toArray(){return u0(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return d0(this,e)}slice(e=0,r=this.length){return a0(this,e,r)}forEach(e){Fa(this,e)}_write(e){e.writeTypeRef(ux)}}const K1=n=>new gs;class wl extends gs{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,r){super._integrate(e,r),this._prelimAttrs.forEach((o,l)=>{this.setAttribute(l,o)}),this._prelimAttrs=null}_copy(){return new wl(this.nodeName)}clone(){const e=new wl(this.nodeName),r=this.getAttributes();return Mk(r,(o,l)=>{typeof o=="string"&&e.setAttribute(l,o)}),e.insert(0,this.toArray().map(o=>o instanceof yn?o.clone():o)),e}toString(){const e=this.getAttributes(),r=[],o=[];for(const h in e)o.push(h);o.sort();const l=o.length;for(let h=0;h<l;h++){const y=o[h];r.push(y+'="'+e[y]+'"')}const a=this.nodeName.toLocaleLowerCase(),d=r.length>0?" "+r.join(" "):"";return`<${a}${d}>${super.toString()}</${a}>`}removeAttribute(e){this.doc!==null?Ot(this.doc,r=>{Qc(r,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,r){this.doc!==null?Ot(this.doc,o=>{ap(o,this,e,r)}):this._prelimAttrs.set(e,r)}getAttribute(e){return up(this,e)}hasAttribute(e){return y0(this,e)}getAttributes(e){return e?A1(this,e):m0(this)}toDOM(e=document,r={},o){const l=e.createElement(this.nodeName),a=this.getAttributes();for(const d in a){const h=a[d];typeof h=="string"&&l.setAttribute(d,h)}return Fa(this,d=>{l.appendChild(d.toDOM(e,r,o))}),o!==void 0&&o._createAssociation(l,this),l}_write(e){e.writeTypeRef(ax),e.writeKey(this.nodeName)}}const V1=n=>new wl(n.readKey());class W1 extends md{constructor(e,r,o){super(e,o),this.childListChanged=!1,this.attributesChanged=new Set,r.forEach(l=>{l===null?this.childListChanged=!0:this.attributesChanged.add(l)})}}class Jc extends gl{constructor(e){super(),this.hookName=e}_copy(){return new Jc(this.hookName)}clone(){const e=new Jc(this.hookName);return this.forEach((r,o)=>{e.set(o,r)}),e}toDOM(e=document,r={},o){const l=r[this.hookName];let a;return l!==void 0?a=l.createDom(this):a=document.createElement(this.hookName),a.setAttribute("data-yjs-hook",this.hookName),o!==void 0&&o._createAssociation(a,this),a}_write(e){e.writeTypeRef(cx),e.writeKey(this.hookName)}}const H1=n=>new Jc(n.readKey());class Xc extends vl{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new Xc}clone(){const e=new Xc;return e.applyDelta(this.toDelta()),e}toDOM(e=document,r,o){const l=e.createTextNode(this.toString());return o!==void 0&&o._createAssociation(l,this),l}toString(){return this.toDelta().map(e=>{const r=[];for(const l in e.attributes){const a=[];for(const d in e.attributes[l])a.push({key:d,value:e.attributes[l][d]});a.sort((d,h)=>d.key<h.key?-1:1),r.push({nodeName:l,attrs:a})}r.sort((l,a)=>l.nodeName<a.nodeName?-1:1);let o="";for(let l=0;l<r.length;l++){const a=r[l];o+=`<${a.nodeName}`;for(let d=0;d<a.attrs.length;d++){const h=a.attrs[d];o+=` ${h.key}="${h.value}"`}o+=">"}o+=e.insert;for(let l=r.length-1;l>=0;l--)o+=`</${r[l].nodeName}>`;return o}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(dx)}}const q1=n=>new Xc;class cp{constructor(e,r){this.id=e,this.length=r}get deleted(){throw Gr()}mergeWith(e){return!1}write(e,r,o){throw Gr()}integrate(e,r){throw Gr()}}const G1=0;class lr extends cp{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,r){r>0&&(this.id.clock+=r,this.length-=r),e0(e.doc.store,this)}write(e,r){e.writeInfo(G1),e.writeLen(this.length-r)}getMissing(e,r){return null}}class ou{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new ou(this.content)}splice(e){throw Gr()}mergeWith(e){return!1}integrate(e,r){}delete(e){}gc(e){}write(e,r){e.writeBuf(this.content)}getRef(){return 3}}const Y1=n=>new ou(n.readBuf());class Ba{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Ba(this.len)}splice(e){const r=new Ba(this.len-e);return this.len=e,r}mergeWith(e){return this.len+=e.len,!0}integrate(e,r){qc(e.deleteSet,r.id.client,r.id.clock,this.len),r.markDeleted()}delete(e){}gc(e){}write(e,r){e.writeLen(this.len-r)}getRef(){return 1}}const Q1=n=>new Ba(n.readLen()),_0=(n,e)=>new Il({guid:n,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class su{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const r={};this.opts=r,e.gc||(r.gc=!1),e.autoLoad&&(r.autoLoad=!0),e.meta!==null&&(r.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new su(_0(this.doc.guid,this.opts))}splice(e){throw Gr()}mergeWith(e){return!1}integrate(e,r){this.doc._item=r,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,r){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const J1=n=>new su(_0(n.readString(),n.readAny()));class ws{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new ws(this.embed)}splice(e){throw Gr()}mergeWith(e){return!1}integrate(e,r){}delete(e){}gc(e){}write(e,r){e.writeJSON(this.embed)}getRef(){return 5}}const X1=n=>new ws(n.readJSON());class Zt{constructor(e,r){this.key=e,this.value=r}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new Zt(this.key,this.value)}splice(e){throw Gr()}mergeWith(e){return!1}integrate(e,r){const o=r.parent;o._searchMarker=null,o._hasFormatting=!0}delete(e){}gc(e){}write(e,r){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const Z1=n=>new Zt(n.readKey(),n.readJSON());class Zc{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Zc(this.arr)}splice(e){const r=new Zc(this.arr.slice(e));return this.arr=this.arr.slice(0,e),r}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,r){}delete(e){}gc(e){}write(e,r){const o=this.arr.length;e.writeLen(o-r);for(let l=r;l<o;l++){const a=this.arr[l];e.writeString(a===void 0?"undefined":JSON.stringify(a))}}getRef(){return 2}}const ex=n=>{const e=n.readLen(),r=[];for(let o=0;o<e;o++){const l=n.readString();l==="undefined"?r.push(void 0):r.push(JSON.parse(l))}return new Zc(r)},tx=Hc("node_env")==="development";class vs{constructor(e){this.arr=e,tx&&Lv(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new vs(this.arr)}splice(e){const r=new vs(this.arr.slice(e));return this.arr=this.arr.slice(0,e),r}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,r){}delete(e){}gc(e){}write(e,r){const o=this.arr.length;e.writeLen(o-r);for(let l=r;l<o;l++){const a=this.arr[l];e.writeAny(a)}}getRef(){return 8}}const nx=n=>{const e=n.readLen(),r=[];for(let o=0;o<e;o++)r.push(n.readAny());return new vs(r)};class Jr{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Jr(this.str)}splice(e){const r=new Jr(this.str.slice(e));this.str=this.str.slice(0,e);const o=this.str.charCodeAt(e-1);return o>=55296&&o<=56319&&(this.str=this.str.slice(0,e-1)+"",r.str=""+r.str.slice(1)),r}mergeWith(e){return this.str+=e.str,!0}integrate(e,r){}delete(e){}gc(e){}write(e,r){e.writeString(r===0?this.str:this.str.slice(r))}getRef(){return 4}}const rx=n=>new Jr(n.readString()),ix=[R1,M1,$1,V1,K1,H1,q1],ox=0,sx=1,lx=2,ax=3,ux=4,cx=5,dx=6;class Ui{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Ui(this.type._copy())}splice(e){throw Gr()}mergeWith(e){return!1}integrate(e,r){this.type._integrate(e.doc,r)}delete(e){let r=this.type._start;for(;r!==null;)r.deleted?r.id.clock<(e.beforeState.get(r.id.client)||0)&&e._mergeStructs.push(r):r.delete(e),r=r.right;this.type._map.forEach(o=>{o.deleted?o.id.clock<(e.beforeState.get(o.id.client)||0)&&e._mergeStructs.push(o):o.delete(e)}),e.changed.delete(this.type)}gc(e){let r=this.type._start;for(;r!==null;)r.gc(e,!0),r=r.right;this.type._start=null,this.type._map.forEach(o=>{for(;o!==null;)o.gc(e,!0),o=o.left}),this.type._map=new Map}write(e,r){this.type._write(e)}getRef(){return 7}}const fx=n=>new Ui(ix[n.readTypeRef()](n)),ed=(n,e,r)=>{const{client:o,clock:l}=e.id,a=new Jt(yt(o,l+r),e,yt(o,l+r-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(r));return e.deleted&&a.markDeleted(),e.keep&&(a.keep=!0),e.redone!==null&&(a.redone=yt(e.redone.client,e.redone.clock+r)),e.right=a,a.right!==null&&(a.right.left=a),n._mergeStructs.push(a),a.parentSub!==null&&a.right===null&&a.parent._map.set(a.parentSub,a),e.length=r,a};class Jt extends cp{constructor(e,r,o,l,a,d,h,y){super(e,y.getLength()),this.origin=o,this.left=r,this.right=l,this.rightOrigin=a,this.parent=d,this.parentSub=h,this.redone=null,this.content=y,this.info=this.content.isCountable()?_y:0}set marker(e){(this.info&Yf)>0!==e&&(this.info^=Yf)}get marker(){return(this.info&Yf)>0}get keep(){return(this.info&by)>0}set keep(e){this.keep!==e&&(this.info^=by)}get countable(){return(this.info&_y)>0}get deleted(){return(this.info&Gf)>0}set deleted(e){this.deleted!==e&&(this.info^=Gf)}markDeleted(){this.info|=Gf}getMissing(e,r){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=an(r,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=an(r,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===cl&&this.id.client!==this.parent.client&&this.parent.clock>=an(r,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Jy(e,r,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Po(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===lr||this.right&&this.right.constructor===lr)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===Jt?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===Jt&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===cl){const o=nh(r,this.parent);o.constructor===lr?this.parent=null:this.parent=o.content.type}return null}integrate(e,r){if(r>0&&(this.id.clock+=r,this.left=Jy(e,e.doc.store,yt(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(r),this.length-=r),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let o=this.left,l;if(o!==null)l=o.right;else if(this.parentSub!==null)for(l=this.parent._map.get(this.parentSub)||null;l!==null&&l.left!==null;)l=l.left;else l=this.parent._start;const a=new Set,d=new Set;for(;l!==null&&l!==this.right;){if(d.add(l),a.add(l),xc(this.origin,l.origin)){if(l.id.client<this.id.client)o=l,a.clear();else if(xc(this.rightOrigin,l.rightOrigin))break}else if(l.origin!==null&&d.has(nh(e.doc.store,l.origin)))a.has(nh(e.doc.store,l.origin))||(o=l,a.clear());else break;l=l.right}this.left=o}if(this.left!==null){const o=this.left.right;this.right=o,this.left.right=this}else{let o;if(this.parentSub!==null)for(o=this.parent._map.get(this.parentSub)||null;o!==null&&o.left!==null;)o=o.left;else o=this.parent._start,this.parent._start=this;this.right=o}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),e0(e.doc.store,this),this.content.integrate(e,this),Zy(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new lr(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:yt(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&xc(e.origin,this.lastId)&&this.right===e&&xc(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const r=this.parent._searchMarker;return r&&r.forEach(o=>{o.p===e&&(o.p=this,!this.deleted&&this.countable&&(o.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const r=this.parent;this.countable&&this.parentSub===null&&(r._length-=this.length),this.markDeleted(),qc(e.deleteSet,this.id.client,this.id.clock,this.length),Zy(e,r,this.parentSub),this.content.delete(e)}}gc(e,r){if(!this.deleted)throw Yr();this.content.gc(e),r?w1(e,this,new lr(this.id,this.length)):this.content=new Ba(this.length)}write(e,r){const o=r>0?yt(this.id.client,this.id.clock+r-1):this.origin,l=this.rightOrigin,a=this.parentSub,d=this.content.getRef()&ud|(o===null?0:qn)|(l===null?0:Ni)|(a===null?0:Da);if(e.writeInfo(d),o!==null&&e.writeLeftID(o),l!==null&&e.writeRightID(l),o===null&&l===null){const h=this.parent;if(h._item!==void 0){const y=h._item;if(y===null){const m=g1(h);e.writeParentInfo(!0),e.writeString(m)}else e.writeParentInfo(!1),e.writeLeftID(y.id)}else h.constructor===String?(e.writeParentInfo(!0),e.writeString(h)):h.constructor===cl?(e.writeParentInfo(!1),e.writeLeftID(h)):Yr();a!==null&&e.writeString(a)}this.content.write(e,r)}}const k0=(n,e)=>hx[e&ud](n),hx=[()=>{Yr()},Q1,ex,Y1,rx,X1,Z1,fx,nx,J1,()=>{Yr()}],px=10;class ar extends cp{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,r){Yr()}write(e,r){e.writeInfo(px),rt(e.restEncoder,this.length-r)}getMissing(e,r){return null}}const x0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},S0="__ $YJS$ __";x0[S0]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");x0[S0]=!0;const oh=new FinalizationRegistry(({cache:n,key:e})=>{delete n[e]});function E0(n){var e,r;return(e=(r=n._novip)._docCache)!==null&&e!==void 0?e:r._docCache={cache:{},get size(){return Object.keys(this.cache).length},find(o,l,a){const d=sh(o,l,a),h=this.cache[d];return h?h.deref():void 0},add(o){var l;const{parentTable:a,parentId:d,parentProp:h}=o.meta;if(!a||!h||d==null)throw new Error("Missing Dexie-related metadata in Y.Doc");const y=sh(a,d,h),m=(l=this.cache[y])===null||l===void 0?void 0:l.deref();m&&oh.unregister(m),this.cache[y]=new WeakRef(o),oh.register(o,{cache:this.cache,key:y},o)},delete(o){oh.unregister(o);const l=sh(o.meta.parentTable,o.meta.parentId,o.meta.parentProp),a=this.cache[l];(a==null?void 0:a.deref())===o&&delete this.cache[l]}}}const Oa=new WeakSet;function Oh(n){if(Oa.has(n))throw new Error(`Y.Doc ${n.meta.parentId} has been destroyed`)}function sh(n,e,r){return`${n}[${e}].${r}`}function mx(n,e,r,o,l,a){let d=e.find(r,a,o);return d||(d=new Il({meta:{db:n,updatesTable:l,parentProp:o,parentTable:r,parentId:a}}),e.add(d),d.on("destroy",()=>{Oa.add(d),e.delete(d)}),d)}const{getByKeyPath:JC}=st;let C0=null;function ig(n){C0=n}function yx(n,e,r,o,l,a){let d=0,h=!0;const y=So(()=>{Oh(e);const w=r.table(l);return Promise.all([(d>0?w.where("i").between(d,1/0,!1).toArray().then(x=>x.filter(C=>ad(C.k,a)===0)):w.where({k:a}).toArray()).then(x=>x),r.table(o).where(":id").equals(a).toArray()])}).subscribe(([w,x])=>{if(w.length>0&&(d=w[w.length-1].i),x.length===0){e.destroy();return}Oh(e),w.length>0&&Ot(e,()=>{w.forEach(C=>{try{ig(C),Jv(e,C.u)}finally{ig(null)}})},n,!1),h&&(h=!1,e.emit("load",[e]))},w=>{n.on("error").fire(w)}),m=(w,x)=>{x!==n&&r.table(l).add({k:a,u:w,f:1}).then(C=>{C===d-1&&++d}).catch(C=>{n.on("error").fire(C)})},_=()=>{y.unsubscribe(),e.off("updateV2",m),e.off("destroy",_)};return e.on("updateV2",m),e.on("destroy",_),_}function I0(){}function gx(n,e){return n===I0?e:function(){var r=n.apply(this,arguments);if(r&&typeof r.then=="function"){for(var o=this,l=arguments.length,a=new Array(l);l--;)a[l]=arguments[l];return r.then(function(){return e.apply(o,a)})}return e.apply(this,arguments)}}function vx(n,e){return n===I0?e:function(){n.apply(this,arguments),e.apply(this,arguments)}}const _a=new WeakMap;function og(){return st.Events(null,"load","sync","error")}class En{static getOrCreateDocument(e,r,o,l){var a,d;const h=E0(e),y=(d=(a=e.table(r).schema.yProps)===null||a===void 0?void 0:a.find(m=>m.prop===o))===null||d===void 0?void 0:d.updatesTable;if(!y)throw new Error(`Updates table for ${r}.${o} not found`);return mx(e,h,r,o,y,l)}static load(e,r){var o;let l=_a.get(e);return l?(++l.refCount,(r==null?void 0:r.gracePeriod)!=null&&l.graceTimeout<r.gracePeriod&&(l.graceTimeout=r.gracePeriod),l.graceTimer&&(clearTimeout(l.graceTimer),l.graceTimer=null)):(l=new En(e),l.graceTimeout=(o=r==null?void 0:r.gracePeriod)!==null&&o!==void 0?o:-1,_a.set(e,l)),l}static release(e){if(!e||Oa.has(e))return;const r=_a.get(e);r?--r.refCount<=0&&(r.graceTimeout<0?r._release():r.graceTimer||(r.graceTimer=setTimeout(()=>{r.graceTimer=null,r.refCount===0&&r._release()},r.graceTimeout))):e.destroy()}_release(){this.doc&&Promise.resolve(En.on("beforeunload").fire(this)).finally(()=>{var e;this.refCount===0&&((e=this.doc)===null||e===void 0||e.destroy())})}static for(e){return _a.get(e)}static get currentUpdateRow(){return C0}get whenLoaded(){return this._whenLoaded||(this._whenLoaded=new Promise((e,r)=>{if(!this.doc){r(new Error("No Y.Doc associated with this provider"));return}this.doc.isLoaded?e():this._error?r(this._error):Oa.has(this.doc)?r(new st.AbortError("Document was destroyed before loaded")):(this.on("load",e),this.on("error",r),this.doc.on("destroy",()=>r(new st.AbortError("Document was destroyed before loaded"))))})),this._whenLoaded}get whenSynced(){return this._whenSynced||(this._whenSynced=new Promise((e,r)=>{if(!this.doc){r(new Error("No Y.Doc associated with this provider"));return}this.doc.isSynced?e():this._error?r(this._error):Oa.has(this.doc)?r(new st.AbortError("Document was destroyed before synced")):(this.on("sync",e),this.on("error",r),this.doc.on("destroy",()=>r(new st.AbortError("Document was destroyed before synced"))))})),this._whenSynced}constructor(e){this.refCount=1,this.cleanupHandlers=[],this.graceTimeout=-1,this.doc=null,this.destroyed=!1,this.on=og(),this.doc=e,this.off=(d,h)=>{var y;return(y=this.on[d])===null||y===void 0?void 0:y.unsubscribe(h)},"dispose"in Symbol&&(this[Symbol.dispose]=()=>En.release(e)),e.on("load",()=>this.on("load").fire()),e.on("sync",d=>d!==!1&&this.on("sync").fire()),e.on("destroy",this.destroy.bind(this)),this.on("error",d=>{this._error=d});const{db:r,parentTable:o,parentId:l,updatesTable:a}=e.meta||{};if(!r||!o||!a)throw new Error("Missing Dexie-related metadata in Y.Doc. Documents need to be obtained through Y.Doc properties from dexie queries.");if(!r.table(o)||!r.table(a))throw new Error(`Table ${o} or ${a} not found in db`);Oh(e),this.stopObserving=yx(this,e,r,o,a,l),En.on("new").fire(this)}destroy(){var e,r,o;console.debug(`Y.Doc ${(r=(e=this.doc)===null||e===void 0?void 0:e.meta)===null||r===void 0?void 0:r.parentId} was destroyed`),_a.delete(this.doc),this.doc=null,this.destroyed=!0,this.refCount=0,(o=this.stopObserving)===null||o===void 0||o.call(this),this.on=og(),this.cleanupHandlers.forEach(l=>l())}addCleanupHandler(e){this.cleanupHandlers.push(typeof e=="function"?e:()=>e.unsubscribe())}}En.on=st.Events(null,{new:[vx],beforeunload:[gx]});En.getDocCache=E0;st.DexieYProvider?En=st.DexieYProvider||En:st.DexieYProvider=En;const lh=3e4;class wx extends jk{constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const r=Wc();this.getLocalState()!==null&&lh/2<=r-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const o=[];this.meta.forEach((l,a)=>{a!==this.clientID&&lh<=r-l.lastUpdated&&this.states.has(a)&&o.push(a)}),o.length>0&&O0(this,o,"timeout")},Di(lh/10)),e.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){const r=this.clientID,o=this.meta.get(r),l=o===void 0?0:o.clock+1,a=this.states.get(r);e===null?this.states.delete(r):this.states.set(r,e),this.meta.set(r,{clock:l,lastUpdated:Wc()});const d=[],h=[],y=[],m=[];e===null?m.push(r):a==null?e!=null&&d.push(r):(h.push(r),Ia(a,e)||y.push(r)),(d.length>0||y.length>0||m.length>0)&&this.emit("change",[{added:d,updated:y,removed:m},"local"]),this.emit("update",[{added:d,updated:h,removed:m},"local"])}setLocalStateField(e,r){const o=this.getLocalState();o!==null&&this.setLocalState({...o,[e]:r})}getStates(){return this.states}}const O0=(n,e,r)=>{const o=[];for(let l=0;l<e.length;l++){const a=e[l];if(n.states.has(a)){if(n.states.delete(a),a===n.clientID){const d=n.meta.get(a);n.meta.set(a,{clock:d.clock+1,lastUpdated:Wc()})}o.push(a)}}o.length>0&&(n.emit("change",[{added:[],updated:[],removed:o},r]),n.emit("update",[{added:[],updated:[],removed:o},r]))},bx=(n,e,r=n.states)=>{const o=e.length,l=xl();rt(l,o);for(let a=0;a<o;a++){const d=e[a],h=r.get(d)||null,y=n.meta.get(d).clock;rt(l,d),rt(l,y),or(l,JSON.stringify(h))}return Hn(l)},_x=(n,e,r)=>{const o=nu(e),l=Wc(),a=[],d=[],h=[],y=[],m=Ct(o);for(let _=0;_<m;_++){const w=Ct(o);let x=Ct(o);const C=JSON.parse(sr(o)),O=n.meta.get(w),P=n.states.get(w),W=O===void 0?0:O.clock;(W<x||W===x&&C===null&&n.states.has(w))&&(C===null?w===n.clientID&&n.getLocalState()!=null?x++:n.states.delete(w):n.states.set(w,C),n.meta.set(w,{clock:x,lastUpdated:l}),O===void 0&&C!==null?a.push(w):O!==void 0&&C===null?y.push(w):C!==null&&(Ia(C,P)||h.push(w),d.push(w)))}(a.length>0||h.length>0||y.length>0)&&n.emit("change",[{added:a,updated:h,removed:y},r]),(a.length>0||d.length>0||y.length>0)&&n.emit("update",[{added:a,updated:d,removed:y},r])};function Pe(n,e,r,o){return new(r||(r=Promise))(function(l,a){function d(m){try{y(o.next(m))}catch(_){a(_)}}function h(m){try{y(o.throw(m))}catch(_){a(_)}}function y(m){var _;m.done?l(m.value):(_=m.value,_ instanceof r?_:new r(function(w){w(_)})).then(d,h)}y((o=o.apply(n,e||[])).next())})}function kx(n){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&n[e],o=0;if(r)return r.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Hr(n){return this instanceof Hr?(this.v=n,this):new Hr(n)}function xx(n,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,l=r.apply(n,e||[]),a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",function(w){return function(x){return Promise.resolve(x).then(w,m)}}),o[Symbol.asyncIterator]=function(){return this},o;function d(w,x){l[w]&&(o[w]=function(C){return new Promise(function(O,P){a.push([w,C,O,P])>1||h(w,C)})},x&&(o[w]=x(o[w])))}function h(w,x){try{(function(C){C.value instanceof Hr?Promise.resolve(C.value.v).then(y,m):_(a[0][2],C)})(l[w](x))}catch(C){_(a[0][3],C)}}function y(w){h("next",w)}function m(w){h("throw",w)}function _(w,x){w(x),a.shift(),a.length&&h(a[0][0],a[0][1])}}function Sx(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=n[Symbol.asyncIterator];return r?r.call(n):(n=kx(n),e={},o("next"),o("throw"),o("return"),e[Symbol.asyncIterator]=function(){return this},e);function o(l){e[l]=n[l]&&function(a){return new Promise(function(d,h){(function(y,m,_,w){Promise.resolve(w).then(function(x){y({value:x,done:_})},m)})(d,h,(a=n[l](a)).done,a.value)})}}}const Ex={}.hasOwnProperty;function td(n,e,r){if(n&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(n)))if(typeof e!="string"&&"length"in e){(function(m){if(!m)throw new Error("Assertion Failed")})(typeof r!="string"&&"length"in r);for(var o=0,l=e.length;o<l;++o)td(n,e[o],r[o])}else{var a=e.indexOf(".");if(a!==-1){var d=e.substr(0,a),h=e.substr(a+1);if(h==="")r===void 0?Array.isArray(n)?isNaN(parseInt(d))||n.splice(parseInt(d),1):delete n[d]:n[d]=r;else{var y=n[d];y&&(function(m,_){return Ex.call(m,_)})(n,d)||(y=n[d]={}),td(y,h,r)}}else r===void 0?Array.isArray(n)&&!isNaN(parseInt(e))?n.splice(e,1):delete n[e]:n[e]=r}}const Cx=typeof self<"u"&&typeof crypto<"u"?(n,e=crypto.getRandomValues.bind(crypto))=>{const r=new Uint8Array(n);return e(r),self.btoa(String.fromCharCode.apply(null,r))}:typeof Buffer<"u"?(n,e=Ix)=>{const r=Buffer.alloc(n);return e(r),r.toString("base64")}:()=>{throw new Error("No implementation of randomString was found")};function Ix(n){for(let e=0;e<n.length;++e)n[e]=Math.floor(256*Math.random())}function dp(n){return typeof n=="string"||!!(Array.isArray(n)&&n.some(e=>dp(e))&&n.every(j0))}function j0(n){return typeof n=="string"||typeof n=="number"||Array.isArray(n)&&n.every(j0)}function Ox(n,e,r){const o=n[e]||(n[e]={}),l=r.keys.map(a=>typeof a=="string"?a:JSON.stringify(a));switch(r.type){case"insert":case"upsert":l.forEach((a,d)=>{o[a]={type:"ups",val:r.values[d]}});break;case"update":case"modify":l.forEach((a,d)=>{const h=r.type==="update"?r.changeSpecs[d]:r.changeSpec,y=o[a];if(y)switch(y.type){case"ups":for(const[m,_]of Object.entries(h))td(y.val,m,_);break;case"del":break;case"upd":Object.assign(y.mod,h)}else o[a]={type:"upd",mod:h}});break;case"delete":l.forEach(a=>{o[a]={type:"del"}})}return n}function sg(n,e){for(const{table:r,muts:o}of e)for(const l of o)Ox(n,r,l)}async function*jx(n){let e=0,r=new Uint8Array(4),o=0,l=[],a=0;for await(const d of n){const h=new DataView(d.buffer,d.byteOffset,d.byteLength);let y=0;for(;y<d.byteLength;)switch(e){case 0:if(y+4>d.byteLength){for(const m of d.slice(y)){if(o===4)break;r[o++]=m,++y}if(o<4)break}else if(o>0&&o<4)for(const m of d.slice(y,y+4-o))r[o++]=m,++y;case 1:a=o===4?new DataView(r.buffer,0,4).getUint32(0,!1):h.getUint32(y,!1),o?o=0:y+=4;case 2:if(y>=d.byteLength){e=2;break}if(y+a>d.byteLength)l.push(d.slice(y)),a-=d.byteLength-y,e=2,y=d.byteLength;else{if(l.length>0){const m=new Uint8Array(l.reduce((w,x)=>w+x.byteLength,a));let _=0;for(const w of l)m.set(w,_),_+=w.byteLength;m.set(d.slice(y,y+a),_),l=[],yield m}else yield d.slice(y,y+a);y+=a,e=0}}}}function T0(n,e){return Pe(this,void 0,void 0,function*(){try{const r=yield navigator.serviceWorker.ready;if(e==="push"&&r.sync&&(yield r.sync.register(`dexie-cloud:${n.name}`)),!r.active)throw new Error("Failed to trigger sync - there's no active service worker");return void r.active.postMessage({type:"dexie-cloud-sync",dbName:n.name,purpose:e})}catch{}})}function Ti(n,e){n.cloud.usingServiceWorker?T0(n,e):n.localSyncEvent.next({purpose:e})}const Tx="fromBase64"in Uint8Array,Px="toBase64"in Uint8Array.prototype,fp=typeof Buffer<"u"?n=>Buffer.from(n,"base64"):Tx?n=>Uint8Array.fromBase64(n):n=>{const e=atob(n),r=e.length,o=new Uint8Array(r);for(var l=0;l<r;l++)o[l]=e.charCodeAt(l);return o},jl=typeof Buffer<"u"?n=>ArrayBuffer.isView(n)?Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("base64"):Buffer.from(n).toString("base64"):Px?n=>(ArrayBuffer.isView(n)?n:new Uint8Array(n)).toBase64():n=>{const e=ArrayBuffer.isView(n)?n:new Uint8Array(n),r=[];for(let o=0,l=e.length;o<l;o+=4096){const a=e.subarray(o,o+4096);r.push(String.fromCharCode.apply(null,a))}return btoa(r.join(""))};class ds extends Error{constructor({title:e,message:r,messageCode:o,messageParams:l}){super(r),this.name="TokenErrorResponseError",this.title=e,this.messageCode=o,this.messageParams=l}}const ah={},lg={google:'<svg viewBox="0 0 24 24" width="20" height="20"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>',github:'<svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/></svg>',microsoft:'<svg viewBox="0 0 24 24" width="20" height="20"><rect fill="#F25022" x="1" y="1" width="10" height="10"/><rect fill="#00A4EF" x="1" y="13" width="10" height="10"/><rect fill="#7FBA00" x="13" y="1" width="10" height="10"/><rect fill="#FFB900" x="13" y="13" width="10" height="10"/></svg>',apple:'<svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/></svg>'};function Nx(n){return Pe(this,void 0,void 0,function*(){var e;let r;if(lg[n.type])r=lg[n.type];else if(!((e=n.iconUrl)===null||e===void 0)&&e.toLowerCase().endsWith(".svg")){const o=yield(function(l){return Pe(this,void 0,void 0,function*(){if(ah[l])return ah[l];try{const a=yield fetch(l);if(a.ok){const d=yield a.text();if(d.includes("<svg"))return ah[l]=d,d}}catch{}return null})})(n.iconUrl);o&&(r=o)}return{name:"provider",value:n.name,displayName:`Continue with ${n.displayName}`,iconSvg:r,iconUrl:!r&&n.iconUrl?n.iconUrl:void 0,styleHint:n.type}})}function lu(n,e){return new Promise((r,o)=>{const l=Object.assign(Object.assign({submitLabel:"Submit",cancelLabel:"Cancel"},e),{onSubmit:a=>{n.next(void 0),r(a)},onCancel:()=>{n.next(void 0),o(new st.AbortError("User cancelled"))}});n.next(l)})}function jh(n,e,...r){return lu(n,{type:"message-alert",title:e,alerts:r,fields:{},submitLabel:"OK",cancelLabel:null})}function ag(n,e,r){return Pe(this,void 0,void 0,function*(){let o=r||"";for(;!o||!/^[\w-+.]+@([\w-]+\.)+[\w-]{2,10}(\sas\s[\w-+.]+@([\w-]+\.)+[\w-]{2,10})?$/.test(o);)o=(yield lu(n,{type:"email",title:e,alerts:o?[{type:"error",messageCode:"INVALID_EMAIL",message:"Please enter a valid email address",messageParams:{}}]:[],fields:{email:{type:"email",placeholder:"you@somedomain.com"}}})).email;return o})}function ug(n,e,r){return Pe(this,void 0,void 0,function*(){const o=[{type:"info",messageCode:"OTP_SENT",message:"A One-Time password has been sent to {email}",messageParams:{email:e}}];r&&o.push(r);const{otp:l}=yield lu(n,{type:"otp",title:"Enter OTP",alerts:o,fields:{otp:{type:"otp",label:"OTP",placeholder:"Paste OTP here"}}});return l})}function vd(n){return Pe(this,void 0,void 0,function*(){var e,r,o;const l=yield n.getCurrentUser(),{accessToken:a,accessTokenExpiration:d,refreshToken:h,refreshTokenExpiration:y,claims:m}=l;if(!a)return null;if(((e=d==null?void 0:d.getTime())!==null&&e!==void 0?e:1/0)>Date.now()&&(((r=l.license)===null||r===void 0?void 0:r.status)||"ok")==="ok")return l;if(!h)throw new Error("Refresh token missing");if(((o=y==null?void 0:y.getTime())!==null&&o!==void 0?o:1/0)<=Date.now())throw new Error("Refresh token has expired");const _=yield wd(n.cloud.options.databaseUrl,l);return yield n.table("$logins").update(m.sub,{accessToken:_.accessToken,accessTokenExpiration:_.accessTokenExpiration,claims:_.claims,license:_.license,data:_.data}),_})}function Ax(n,e,r,o,l){return Pe(this,void 0,void 0,function*(){return e.accessToken&&e.accessTokenExpiration.getTime()>Date.now()?e:e.refreshToken&&(!e.refreshTokenExpiration||e.refreshTokenExpiration.getTime()>Date.now())?yield wd(n,e):yield(function(a,d,h,y){return Pe(this,void 0,void 0,function*(){if(!crypto.subtle)throw typeof location<"u"&&location.protocol==="http:"?new Error("Dexie Cloud Addon needs to use WebCrypto, but your browser has disabled it due to being served from an insecure location. Please serve it from https or http://localhost:<port> (See https://stackoverflow.com/questions/46670556/how-to-enable-crypto-subtle-for-unsecure-origins-in-chrome/46671627#46671627)"):new Error("This browser does not support WebCrypto.");const{privateKey:m,publicKey:_}=yield crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!1,["sign","verify"]);if(!m||!_)throw new Error("Could not generate RSA keypair");a.nonExportablePrivateKey=m;const w=(function(x){const C=jl(x);return(function(O){let P=`-----BEGIN PUBLIC KEY-----
`;for(;O.length>0;)P+=O.substring(0,64)+`
`,O=O.substring(64);return P+="-----END PUBLIC KEY-----",P})(C)})(yield crypto.subtle.exportKey("spki",_));a.publicKey=_;try{const x=yield d({public_key:w,hints:y});if(x.type==="error")throw new ds(x);if(x.type!=="tokens")throw new Error(`Unexpected response type from token endpoint: ${x.type}`);return a.accessToken=x.accessToken,a.accessTokenExpiration=new Date(x.accessTokenExpiration),a.refreshToken=x.refreshToken,x.refreshTokenExpiration&&(a.refreshTokenExpiration=new Date(x.refreshTokenExpiration)),a.userId=x.claims.sub,a.email=x.claims.email,a.name=x.claims.name,a.claims=x.claims,a.license={type:x.userType,status:x.claims.license||"ok"},a.data=x.data,x.evalDaysLeft!=null&&(a.license.evalDaysLeft=x.evalDaysLeft),x.userValidUntil!=null&&(a.license.validUntil=new Date(x.userValidUntil)),x.alerts&&x.alerts.length>0&&(yield lu(h,{type:"message-alert",title:"Authentication Alert",fields:{},alerts:x.alerts})),a}catch(x){if(x instanceof ds)throw yield jh(h,x.title,{type:"error",messageCode:x.messageCode,message:x.message,messageParams:{}}),x;let C="We're having a problem authenticating right now.";throw x instanceof TypeError&&(C=typeof navigator!==void 0&&!navigator.onLine?"You seem to be offline. Please connect to the internet and try again.":st.debug||typeof location<"u"&&(location.hostname==="localhost"||location.hostname==="127.0.0.1")?`Could not connect to server. Please verify that your origin '${location.origin}' is whitelisted using \`npx dexie-cloud whitelist\``:"Could not connect to server. Please verify the connection.",yield jh(h,"Authentication Failed",{type:"error",messageCode:"GENERIC_ERROR",message:C,messageParams:{}}).catch(()=>{})),x}})})(e,r,o,l)})}function wd(n,e){return Pe(this,void 0,void 0,function*(){if(!e.refreshToken)throw new Error("Cannot refresh token - refresh token is missing.");if(!e.nonExportablePrivateKey)throw new Error("login.nonExportablePrivateKey is missing - cannot sign refresh token without a private key.");const r=Date.now(),o="RSASSA-PKCS1-v1_5",l=new TextEncoder().encode(e.refreshToken+r),a=yield crypto.subtle.sign(o,e.nonExportablePrivateKey,l),d=jl(a),h={grant_type:"refresh_token",refresh_token:e.refreshToken,scopes:["ACCESS_DB"],signature:d,signing_algorithm:o,time_stamp:r},y=yield fetch(`${n}/token`,{body:JSON.stringify(h),method:"post",headers:{"Content-Type":"application/json"},mode:"cors"});if(y.status!==200)throw new Error(`RefreshToken: Status ${y.status} from ${n}/token`);const m=yield y.json();if(m.type==="error")throw new ds(m);return e.accessToken=m.accessToken,e.accessTokenExpiration=m.accessTokenExpiration?new Date(m.accessTokenExpiration):void 0,e.claims=m.claims,e.license={type:m.userType,status:m.claims.license||"ok"},m.evalDaysLeft!=null&&(e.license.evalDaysLeft=m.evalDaysLeft),m.userValidUntil!=null&&(e.license.validUntil=new Date(m.userValidUntil)),m.data&&(e.data=m.data),e})}const cg=new WeakMap;class hp{constructor(e,r){cg.set(this,e),Object.assign(this,r)}static load(e,r){return e.table("$logins").get(r).then(o=>new hp(e,o||{userId:r,claims:{sub:r},lastLogin:new Date(0)}))}save(){return Pe(this,void 0,void 0,function*(){cg.get(this).table("$logins").put(this)})}}const Un={userId:"unauthorized",name:"Unauthorized",claims:{sub:"unauthorized"},lastLogin:new Date(0)};try{Object.freeze(Un),Object.freeze(Un.claims)}catch{}function P0(n,e){return cs(Gn(n).pipe(ir(e)))}function N0(n){return Pe(this,void 0,void 0,function*(){const e=yield Th(n);if(e){if(!(yield(function(r,o,l){return Pe(this,void 0,void 0,function*(){const a=[{type:"warning",messageCode:"LOGOUT_CONFIRMATION",message:`{numUnsyncedChanges} unsynced changes will get lost!
                Logout anyway?`,messageParams:{currentUserId:o,numUnsyncedChanges:l.toString()}}];return yield lu(r,{type:"logout-confirmation",title:"Confirm Logout",alerts:a,fields:{},submitLabel:"Confirm logout",cancelLabel:"Cancel"}).then(()=>!0).catch(()=>!1)})})(n.cloud.userInteraction,n.cloud.currentUserId,e)))throw new Error("User cancelled logout due to unsynced changes");yield Th(n,{deleteUnsyncedData:!0})}})}function Th(n){return Pe(this,arguments,void 0,function*(e,{deleteUnsyncedData:r=!1}={}){const[o,l]=yield e.dx.transaction("rw",e.dx.tables,a=>Pe(this,void 0,void 0,function*(){const d=a.idbtrans;d.disableChangeTracking=!0,d.disableAccessControl=!0;const h=a.storeNames.filter(m=>m.endsWith("_mutations")),y=(yield Promise.all(h.map(m=>a.table(m).count()))).reduce((m,_)=>m+_,0);if(y>0&&!r)return[y,!1];e.$syncState.delete("syncState");for(const m of e.dx.tables)m.name!=="$jobs"&&m.name!=="$syncState"&&m.clear();return[y,!0]}));return l&&(yield P0(e.cloud.currentUser,a=>a.userId===Un.userId),yield e.cloud.sync({purpose:"pull",wait:!0})),o})}class Ph extends Error{constructor(e,r){super(r||`${e.status} ${e.statusText}`),this.httpStatus=e.status}get name(){return"HttpError"}}const dg={access_denied:"Access was denied by the authentication provider.",invalid_state:"The authentication response could not be verified. Please try again.",email_not_verified:"Your email address must be verified before you can log in.",expired_code:"The authentication code has expired. Please try again.",provider_error:"An error occurred with the authentication provider.",network_error:"A network error occurred during authentication. Please check your connection and try again."};class ji extends Error{constructor(e,r,o){super(o||dg[e]),this.name="OAuthError",this.code=e,this.provider=r}get userMessage(){return dg[this.code]||this.message}}const Cc={providers:[],otpEnabled:!0};function Dx(n){typeof sessionStorage<"u"&&sessionStorage.setItem("dexie-cloud-oauth-provider",n.provider);const e=(function(r){const o=new URL(`${r.databaseUrl}/oauth/login/${r.provider}`),l=r.redirectUri||(typeof window<"u"?window.location.href:"");return l&&o.searchParams.set("redirect_uri",l),o.toString()})(n);window.location.href=e}function Rx(n){const{userInteraction:e}=n.cloud;return function(r){return Pe(this,arguments,void 0,function*({public_key:o,hints:l}){var a,d;let h;const y=(a=n.cloud.options)===null||a===void 0?void 0:a.databaseUrl;if(!y)throw new Error("No database URL given.");if(l!=null&&l.oauthCode&&l.provider)return yield(function(w){return Pe(this,void 0,void 0,function*(){const{databaseUrl:x,code:C,publicKey:O,scopes:P=["ACCESS_DB"]}=w,W={grant_type:"authorization_code",code:C,public_key:O,scopes:P};try{const q=yield fetch(`${x}/token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(W),mode:"cors"});if(!q.ok){if(q.status===400||q.status===401)try{const G=yield q.json();if(G.type==="error")throw G.messageCode==="INVALID_OTP"?new ji("expired_code",void 0,G.message):new ds(G)}catch(G){if(G instanceof ji||G instanceof ds)throw G}const fe=yield q.text().catch(()=>q.statusText);throw new ji("provider_error",void 0,`Token exchange failed: ${q.status} ${fe}`)}const te=yield q.json();if(te.type==="error")throw new ds(te);if(te.type!=="tokens")throw new ji("provider_error",void 0,`Unexpected response type: ${te.type}`);return te}catch(q){throw q instanceof ji||q instanceof ds?q:q instanceof TypeError?new ji("network_error"):q}})})({databaseUrl:y,code:l.oauthCode,publicKey:o,scopes:["ACCESS_DB"]});if(l!=null&&l.provider)throw fg(n,l.provider),new Error("OAuth redirect initiated");if((l==null?void 0:l.grant_type)==="demo")h={demo_user:yield ag(e,"Enter a demo user email",(l==null?void 0:l.email)||(l==null?void 0:l.userId)),grant_type:"demo",scopes:["ACCESS_DB"],public_key:o};else if(l!=null&&l.otpId&&l.otp)h={grant_type:"otp",otp_id:l.otpId,otp:l.otp,scopes:["ACCESS_DB"],public_key:o};else{const w=((d=n.cloud.options)===null||d===void 0?void 0:d.socialAuth)!==!1,x=yield(function(O){return Pe(this,arguments,void 0,function*(P,W=!0){if(!W)return Cc;try{const q=yield fetch(`${P}/auth-providers`,{method:"GET",headers:{Accept:"application/json"},mode:"cors"});return q.status===404?Cc:q.ok?yield q.json():Cc}catch{return Cc}})})(y,w);if(x.providers.length>0){const O=yield(function(P,W,q){return Pe(this,arguments,void 0,function*(te,fe,G,Ee="Choose login method",ye=[]){const he=[...yield Promise.all(fe.map(Nx))];return G&&he.push({name:"otp",value:"email",displayName:"Continue with email",iconSvg:'<svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="4" width="20" height="16" rx="2"/><path d="M22 6L12 13 2 6"/></svg>',styleHint:"otp"}),new Promise((se,be)=>{const _e={type:"generic",title:Ee,alerts:ye,options:he,fields:{},submitLabel:"",cancelLabel:"Cancel",onSubmit:Ie=>{te.next(void 0),se("otp"in Ie?{type:"otp"}:"provider"in Ie?{type:"provider",provider:Ie.provider}:{type:"otp"})},onCancel:()=>{te.next(void 0),be(new st.AbortError("User cancelled"))}};te.next(_e)})})})(e,x.providers,x.otpEnabled,"Sign in");if(O.type==="provider")throw fg(n,O.provider),new Error("OAuth redirect initiated")}const C=yield ag(e,"Enter email address",l==null?void 0:l.email);h=/@demo.local$/.test(C)?{demo_user:C,grant_type:"demo",scopes:["ACCESS_DB"],public_key:o}:{email:C,grant_type:"otp",scopes:["ACCESS_DB"]}}const m=yield fetch(`${y}/token`,{body:JSON.stringify(h),method:"post",headers:{"Content-Type":"application/json",mode:"cors"}});if(m.status!==200){const w=yield m.text();throw yield jh(e,"Token request failed",{type:"error",messageCode:"GENERIC_ERROR",message:w,messageParams:{}}).catch(()=>{}),new Ph(m,w)}const _=yield m.json();if(_.type==="tokens"||_.type==="error")return _;if(h.grant_type==="otp"&&"email"in h){if(_.type!=="otp-sent")throw new Error(`Unexpected response from ${y}/token`);const w=yield ug(e,h.email),x=Object.assign(Object.assign({},h),{otp:w||"",otp_id:_.otp_id,public_key:o});let C=yield fetch(`${y}/token`,{body:JSON.stringify(x),method:"post",headers:{"Content-Type":"application/json"},mode:"cors"});for(;C.status===401;){const O=yield C.text();x.otp=yield ug(e,h.email,{type:"error",messageCode:"INVALID_OTP",message:O,messageParams:{}}),C=yield fetch(`${y}/token`,{body:JSON.stringify(x),method:"post",headers:{"Content-Type":"application/json"},mode:"cors"})}if(C.status!==200){const O=yield C.text();throw new Ph(C,O)}return yield C.json()}throw new Error(`Unexpected response from ${y}/token`)})}}function fg(n,e){var r,o;const l=(r=n.cloud.options)===null||r===void 0?void 0:r.databaseUrl;if(!l)throw new Error("No database URL given.");Dx({databaseUrl:l,provider:e,redirectUri:((o=n.cloud.options)===null||o===void 0?void 0:o.oauthRedirectUri)||(typeof window<"u"?window.location.href:void 0)})}function Ic(n,...e){globalThis.console[n](...e)}function Oc(n,e){return Pe(this,void 0,void 0,function*(){var r;const o=yield n.getCurrentUser(),l=o.userId;if(o.isLoggedIn&&(!e||!e.email&&!e.userId)){if((((r=o.license)===null||r===void 0?void 0:r.status)||"ok")==="ok"&&o.accessToken&&(!o.accessTokenExpiration||o.accessTokenExpiration.getTime()>Date.now()))return!1;if(o.refreshToken&&(!o.refreshTokenExpiration||o.refreshTokenExpiration.getTime()>Date.now()))return yield vd(n),!1}const a=new hp(n,{claims:{},lastLogin:new Date(0)});return yield Ax(n.cloud.options.databaseUrl,a,n.cloud.options.fetchTokens||Rx(n),n.cloud.userInteraction,e),l!==Un.userId&&a.userId!==l&&(yield N0(n)),yield(function(d,h){return Pe(this,void 0,void 0,function*(){const y=d.table("$logins");yield d.transaction("rw",y,m=>Pe(this,void 0,void 0,function*(){const _=yield y.toArray();yield Promise.all(_.filter(w=>w.userId!==h.userId&&w.isLoggedIn).map(w=>(w.isLoggedIn=!1,y.put(w)))),h.isLoggedIn=!0,h.lastLogin=new Date;try{yield h.save()}catch(w){try{w.name==="DataCloneError"&&(Ic("debug","Login context property names:",Object.keys(h)),Ic("debug","Login context property names:",Object.keys(h)),Ic("debug","Login context:",h),Ic("debug","Login context JSON:",JSON.stringify(h)))}catch{}throw w}})),yield P0(d.cloud.currentUser,m=>m.userId===h.userId)})})(n,a),Ti(n,"pull"),a.userId!==l})}const Nh={},ja=typeof self<"u"&&self.document&&typeof navigator<"u"&&navigator.serviceWorker;ja&&ja.ready.then(n=>Nh.registration=n),typeof self<"u"&&"clients"in self&&!self.document&&addEventListener("message",n=>{var e,r;!((r=(e=n.data)===null||e===void 0?void 0:e.type)===null||r===void 0)&&r.startsWith("sw-broadcast-")&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(o=>{var l;return o.id!==((l=n.source)===null||l===void 0?void 0:l.id)&&o.postMessage(n.data)})});class uh{constructor(e){this.name=e}subscribe(e){if(!ja)return()=>{};const r=o=>{var l;((l=o.data)===null||l===void 0?void 0:l.type)===`sw-broadcast-${this.name}`&&e(o.data.message)};return ja.addEventListener("message",r),()=>ja.removeEventListener("message",r)}postMessage(e){var r;typeof self.clients=="object"?[...self.clients.matchAll({includeUncontrolled:!0})].forEach(o=>o.postMessage({type:`sw-broadcast-${this.name}`,message:e})):Nh.registration&&((r=Nh.registration.active)===null||r===void 0||r.postMessage({type:`sw-broadcast-${this.name}`,message:e}))}}const ka=globalThis["lbc-events"]||(globalThis["lbc-events"]=new Map);class jc extends Xt{constructor(e){const r=typeof BroadcastChannel>"u"?new uh(e):new BroadcastChannel(e);super(o=>{function l(h){o.next(h.detail)}function a(h){o.next(h.data)}let d;(function(h,y){ka.has(h)?ka.get(h).push(y):ka.set(h,[y])})(`lbc-${e}`,l);try{r instanceof uh?d=r.subscribe(h=>o.next(h)):r.addEventListener("message",a)}catch{}return()=>{(function(h,y){const m=ka.get(h);if(m){const _=m.indexOf(y);_!==-1&&m.splice(_,1)}})(`lbc-${e}`,l),r instanceof uh?d():r.removeEventListener("message",a)}}),this.name=e,this.bc=r}next(e){this.bc.postMessage(e),(function(r){const o=ka.get(r.type);o&&o.forEach(l=>{try{l(r)}catch{}})})(new CustomEvent(`lbc-${this.name}`,{detail:e}))}}function Ah(n){return Pe(this,arguments,void 0,function*({realms:e,inviteRealms:r}){const o=JSON.stringify([...e.map(d=>({realmId:d,accepted:!0})),...r.map(d=>({realmId:d,accepted:!1}))].sort((d,h)=>d.realmId<h.realmId?-1:d.realmId>h.realmId?1:0)),l=new TextEncoder().encode(o),a=yield crypto.subtle.digest("SHA-1",l);return jl(a)})}function Bc(n){return Object.entries(n.cloud.schema||{}).filter(([,{markedForSync:e}])=>e).map(([e])=>n.tables.filter(({name:r})=>r===e)[0]).filter(e=>e)}function pp(n){return`$${n}_mutations`}function A0(n){var e;const r=(e=/^\$(.*)_mutations$/.exec(n))===null||e===void 0?void 0:e[1];if(!r)throw new Error(`Given mutationTable ${n} is not correct`);return r}const Lx=[].concat;function mp(n){return Lx.apply([],n)}function Dh(n,e){return Pe(this,arguments,void 0,function*(r,o,{since:l={},limit:a=1/0}={}){const d=yield Promise.all(r.map(w=>Pe(this,void 0,void 0,function*(){const x=A0(w.name),C=l[x];let O=C?w.where("rev").above(C):w;a<1/0&&(O=O.limit(a));let P=yield O.toArray();return P=(function(W){return W=W.map(q=>{if(q.type==="modify"&&q.criteria.index===null){const te=Object.assign(Object.assign({},q),{criteria:void 0,changeSpec:void 0,type:"update",keys:q.keys,changeSpecs:[q.changeSpec]});return delete te.criteria,delete te.changeSpec,te}return q}),W})(P),P=(function(W){const q=new Map;for(const te of W)if(te.type==="update"){if(te.keys.length!==1||te.changeSpecs.length!==1)continue;const fe=""+te.keys[0],G=te.changeSpecs[0];if(Object.values(G).some(ye=>typeof ye=="object"&&ye&&"@@propmod"in ye))continue;let Ee=q.get(fe);Ee?Ee.push({txid:te.txid,updateSpec:G}):q.set(fe,[{txid:te.txid,updateSpec:G}])}return W=W.filter(te=>{if(te.type!=="update"||te.keys.length!==1||te.changeSpecs.length!==1)return!0;const fe=te.changeSpecs[0];if(Object.values(fe).some(he=>typeof he=="object"&&he&&"@@propmod"in he))return!0;const G=new Set(Object.keys(te.changeSpecs[0])),Ee=""+te.keys[0],ye=q.get(Ee);if(!ye)return!0;for(let he=ye.length-1;he>=0;--he){const{txid:se,updateSpec:be}=ye[he];if(se===te.txid)break;for(const _e of Object.keys(be))G.delete(_e)}return G.size!==0}),W})(P),P.map(W=>({table:x,mut:W}))}))),h=mp(d).sort((w,x)=>w.mut.txid===x.mut.txid?w.mut.opNo-x.mut.opNo:w.mut.ts-x.mut.ts),y=[];let m=null,_=null;for(const{table:w,mut:x}of h)m&&m.table===w&&_===x.txid?m.muts.push(x):(m={table:w,muts:[x]},_=x.txid,y.push(m));return y})}function D0(n){const e=new Uint8Array(n);if(typeof crypto<"u")crypto.getRandomValues(e);else for(let r=0;r<n;r++)e[r]=Math.floor(256*Math.random());if(typeof Buffer<"u"&&Buffer.from)return Buffer.from(e).toString("base64");if(typeof btoa<"u")return btoa(String.fromCharCode.apply(null,e));throw new Error("No btoa or Buffer available")}const{toString:Mx}={},hg={replace:function(n){const e=Object.keys(n);let r=null;for(let l=0,a=e.length;l<a;++l)e[l][0]==="$"&&(r=r||[],r.push(e[l]));if(!r)return n;const o={...n};for(const l of r)delete o[l];for(const l of r)o["$"+l]=n[l];return o}};function R0(...n){const e=n.reduce((o,l)=>({...o,...l}),n.reduce((o,l)=>({...l,...o}),{})),r=new WeakMap;return{stringify(o,l,a){return JSON.stringify(o,function(h){const y=this[h],m=(function(_){const w=typeof _;switch(typeof _){case"object":case"function":{if(_===null)return null;const C=Object.getPrototypeOf(_);if(!C)return hg;let O=r.get(C);if(O!==void 0)return O;const P=(x=_,Mx.call(x).slice(8,-1)),W=Object.entries(e).find(([q,te])=>{var fe,G;return(G=(fe=te==null?void 0:te.test)===null||fe===void 0?void 0:fe.call(te,_,P))!==null&&G!==void 0?G:q===P});return O=W==null?void 0:W[1],O||(O=Array.isArray(_)?null:typeof _=="function"?e.function||null:hg),r.set(C,O),O}default:return e[w]}var x})(y);return m?m.replace(y,l,e):y},a)},parse(o,l){const a=[];return JSON.parse(o,function(d,h){const y=h==null?void 0:h.$t;if(y){const _=e[y];h=_?_.revive(h,l,e):h}let m=a[a.length-1];if(m&&m[0]===h){h={...h};for(const _ of m[1])delete h[_];for(const[_,w]of Object.entries(m[2]))h[_]=w;a.pop()}if(h===void 0||d[0]==="$"&&d!=="$t"){let _,w;m=a[a.length-1],m&&m[0]===this?(_=m[1],w=m[2]):a.push([this,_=[],w={}]),d[0]==="$"&&d!=="$t"?(_.push(d),w[d.substr(1)]=h):w[d]=void 0}return h})}}}const Ux={Blob:{test:(n,e)=>e==="Blob",replace:(n,e)=>{const r=e.length;return e.push(n),{$t:"Blob",mimeType:n.type,i:r}},revive:({i:n,mimeType:e},r)=>new Blob([r[n]],{type:e})}};var zx={number:{replace:n=>{switch(!0){case isNaN(n):return{$t:"number",v:"NaN"};case n===1/0:return{$t:"number",v:"Infinity"};case n===-1/0:return{$t:"number",v:"-Infinity"};default:return n}},revive:({v:n})=>Number(n)}};const Fx={bigint:{replace:n=>({$t:"bigint",v:""+n}),revive:n=>BigInt(n.v)}};var Bx={Date:{replace:n=>({$t:"Date",v:isNaN(n.getTime())?"NaN":n.toISOString()}),revive:({v:n})=>new Date(n==="NaN"?NaN:Date.parse(n))}},$x={Set:{replace:n=>({$t:"Set",v:Array.from(n.entries())}),revive:({v:n})=>new Set(n)}},Kx={Map:{replace:n=>({$t:"Map",v:Array.from(n.entries())}),revive:({v:n})=>new Map(n)}};const Vx=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:void 0;var Wx=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","DataView","BigInt64Array","BigUint64Array"].reduce((n,e)=>({...n,[e]:{replace:(r,o,l)=>({$t:e,v:l.ArrayBuffer.replace(r.byteOffset===0&&r.byteLength===r.buffer.byteLength?r.buffer:r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength),o,l).v}),revive:({v:r},o,l)=>{const a=Vx[e];return a&&new a(l.ArrayBuffer.revive({v:r},o,l))}}}),{});function L0(n){return(function(e){for(var r="",o=0,l=e.length;o<l;o++)r+=M0[e[o]];return r})(jl(n))}function Hx(n){return fp((function(e){if(typeof e!="string")throw new Error("invalid decoder input: "+e);for(var r="",o=0,l=e.length;o<l;o++)r+=Rh[e[o]];return r})(n))}const Rh={"-":"=",0:"A",1:"B",2:"C",3:"D",4:"E",5:"F",6:"G",7:"H",8:"I",9:"J",A:"K",B:"L",C:"M",D:"N",E:"O",F:"P",G:"Q",H:"R",I:"S",J:"T",K:"U",L:"V",M:"W",N:"X",O:"Y",P:"Z",Q:"a",R:"b",S:"c",T:"d",U:"e",V:"f",W:"g",X:"h",Y:"i",Z:"j",_:"k",a:"l",b:"m",c:"n",d:"o",e:"p",f:"q",g:"r",h:"s",i:"t",j:"u",k:"v",l:"w",m:"x",n:"y",o:"z",p:"0",q:"1",r:"2",s:"3",t:"4",u:"5",v:"6",w:"7",x:"8",y:"9",z:"+","|":"/"},M0={};for(const n of Object.keys(Rh))M0[Rh[n]]=n;var qx={ArrayBuffer:{replace:n=>({$t:"ArrayBuffer",v:L0(n)}),revive:({v:n})=>{const e=Hx(n);return e.buffer.byteLength===e.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}}};class ch{constructor(e,r){this.buf=e,this.type=r}}function U0(n){const e=new XMLHttpRequest;if(e.overrideMimeType("text/plain; charset=x-user-defined"),e.open("GET",URL.createObjectURL(n),!1),e.send(),e.status!==200&&e.status!==0)throw new Error("Bad Blob access: "+e.status);return e.responseText}function z0(n){const e=new Uint8Array(n.length);for(let r=0;r<n.length;++r)e[r]=n.charCodeAt(r);return e.buffer}var Gx={Blob:{test:(n,e)=>e==="Blob"||n instanceof ch,replace:n=>({$t:"Blob",v:jl(n instanceof ch?n.buf:z0(U0(n))),type:n.type}),revive:({type:n,v:e})=>{const r=fp(e);return typeof Blob!==void 0?new Blob([r]):new ch(r.buffer,n)}}};const F0={...zx,...Fx,...Bx,...$x,...Kx,...Wx,...qx,...Gx};function pg(n){return new Promise((e,r)=>{const o=new FileReader;o.onabort=l=>r(new Error("file read aborted")),o.onerror=l=>r(l.target.error),o.onload=l=>e(l.target.result),o.readAsArrayBuffer(n)})}var Yx={undefined:{replace:()=>({$t:"undefined"}),revive:()=>{}}},Qx={File:{test:(n,e)=>e==="File",replace:n=>({$t:"File",v:jl(z0(U0(n))),type:n.type,name:n.name,lastModified:new Date(n.lastModified).toISOString()}),revive:({type:n,v:e,name:r,lastModified:o})=>{const l=fp(e);return new File([l],r,{type:n,lastModified:new Date(o).getTime()})}}};const Jx=typeof BigInt=="function"&&typeof BigInt(0)=="bigint";class mg{toString(){return this.v}constructor(e){this.v=e}}const Xx=Jx?{}:{bigint:{test:n=>n instanceof mg,replace:n=>Object.assign({$t:"bigint"},n),revive:({v:n})=>new mg(n)}},B0=Object.assign(Object.assign(Object.assign(Object.assign({},Yx),Xx),Qx),{PropModification:{test:n=>n instanceof wy,replace:n=>Object.assign({$t:"PropModification"},n["@@propmod"]),revive:n=>{var{$t:e}=n,r=(function(o,l){var a={};for(var d in o)Object.prototype.hasOwnProperty.call(o,d)&&l.indexOf(d)<0&&(a[d]=o[d]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function"){var h=0;for(d=Object.getOwnPropertySymbols(o);h<d.length;h++)l.indexOf(d[h])<0&&Object.prototype.propertyIsEnumerable.call(o,d[h])&&(a[d[h]]=o[d[h]])}return a})(n,["$t"]);return new wy(r)}}}),$a=R0(F0,B0),Zx=(function(...n){const e=R0(F0,Ux,...n);return{toBinary(r){const[o,l]=this.stringify(r),a=new ArrayBuffer(4);return new DataView(a).setUint32(0,o.size),new Blob([a,o,l])},stringify(r){const o=[],l=e.stringify(r,o);return[new Blob(o.map(a=>{const d=new ArrayBuffer(4);return new DataView(d).setUint32(0,"byteLength"in a?a.byteLength:a.size),new Blob([d,a])})),l]},async parse(r,o){let l=0;const a=[],d=await pg(o),h=new DataView(d);for(;l<d.byteLength;){const y=h.getUint32(l);l+=4;const m=d.slice(l,l+y);l+=y,a.push(m)}return e.parse(r,a)},async fromBinary(r){const o=new DataView(await pg(r.slice(0,4))).getUint32(0),l=r.slice(4,o+4),a=await(function(d){return new Promise((h,y)=>{const m=new FileReader;m.onabort=_=>y(new Error("file read aborted")),m.onerror=_=>y(_.target.error),m.onload=_=>h(_.target.result),m.readAsText(d)})})(r.slice(o+4));return await this.parse(a,l)}}})(B0);function eS(n,e,r){const o=[];for(let l of r){const{table:a,muts:d}=l,h=n.tables.find(_=>_.name===a);if(!h)throw new Error(`Internal error: table ${a} not found in DBCore schema`);const{primaryKey:y}=h;let m=l;d.forEach((_,w)=>{const x=!y.outbound&&(_.type==="upsert"||_.type==="insert");_.keys.forEach((C,O)=>{if(Array.isArray(C)){m===l&&(m=yg(l,x));const P=m.muts[w],W=JSON.stringify(C);P.keys[O]=W}else if(C[0]==="#"){m===l&&(m=yg(l,x));const P=m.muts[w];if(!e.isLoggedIn)throw new Error("Internal error: Cannot sync private IDs before authenticated");const W=`${C}:${e.userId}`;P.keys[O]=W,x&&st.setByKeyPath(P.values[O],y.keyPath,W)}})}),o.push(m)}return o}function yg(n,e){return Object.assign(Object.assign({},n),{muts:e?n.muts.map(r=>r.type!=="insert"&&r.type!=="upsert"||!r.values?Object.assign(Object.assign({},r),{keys:r.keys.slice()}):Object.assign(Object.assign({},r),{keys:r.keys.slice(),values:r.values.slice()})):n.muts.map(r=>Object.assign(Object.assign({},r),{keys:r.keys.slice()}))})}let Lh=new WeakMap;function $0(n){return Pe(this,void 0,void 0,function*(){var e,r;const o=((r=(e=Lh.get(n))===null||e===void 0?void 0:e.getTime())!==null&&r!==void 0?r:0)-Date.now();o>0&&(yield new Promise(l=>setTimeout(l,o)))})}function tS(n,e,r,o,l,a,d,h,y){return Pe(this,void 0,void 0,function*(){const m={Accept:"application/json, application/x-bison, application/x-bison-stream","Content-Type":"application/tson"},_=yield vd(l),w=_==null?void 0:_.accessToken;w&&(m.Authorization=`Bearer ${w}`);const x={v:2,dbID:r==null?void 0:r.remoteDbId,clientIdentity:h,schema:d||{},lastPull:r?{serverRevision:r.serverRevision,yServerRevision:r.yServerRevision,realms:r.realms,inviteRealms:r.inviteRealms}:void 0,baseRevs:o,changes:eS(l.dx.core.schema,y,n),y:e,dxcv:l.cloud.version};l.syncStateChangedEvent.next({phase:"pushing"});const C=$a.stringify(x),O=yield fetch(`${a}/sync`,{method:"post",headers:m,credentials:"include",body:C});if(l.syncStateChangedEvent.next({phase:"pulling"}),(function(P,W){const q=W.headers.get("Ratelimit-Limit"),te=W.headers.get("Ratelimit-Remaining"),fe=W.headers.get("Ratelimit-Reset");if(q&&te&&fe){const G=Number(q),Ee=Math.max(0,Number(te)),ye=Number(fe);if(Ee<G/2){const he=Math.ceil(ye/(Ee+1));Lh.set(P,new Date(Date.now()+1e3*he))}else Lh.delete(P)}})(l,O),!O.ok)throw new Ph(O);if(O.headers.get("content-type")==="application/x-bison")return Zx.fromBinary(yield O.blob());{const P=yield O.text();return $a.parse(P)}})}function xa(n){if(n!=null&&n.cancelled)throw new st.AbortError("Operation was cancelled")}let fl=!1;function K0(n,e,r,o){return Pe(this,void 0,void 0,function*(){yield n.$baseRevs.bulkPut(Object.keys(e).filter(l=>e[l].markedForSync).map(l=>({tableName:l,clientRev:(r[l]||0)+1,serverRev:o}))),yield n.$baseRevs.where("tableName").noneOf(Object.keys(e).filter(l=>e[l].markedForSync)).delete()})}function Mh(n,e={}){for(const{table:r,muts:o}of n){const l=o.length>0?o[o.length-1].rev:null;e[r]=l||e[r]||0}return e}function nS(n,e,r){return Pe(this,void 0,void 0,function*(){const o=yield n.bulkGet(e),l=[],a=[];e.forEach((d,h)=>{const y=o[h];if(y){for(const[m,_]of Object.entries(r[h]))if(m===n.schema.primKey.keyPath){if(ad(_,d)!==0)throw new Error("Cannot change primary key")}else st.setByKeyPath(y,m,_);l.push(d),a.push(y)}}),yield n.schema.primKey.keyPath==null?n.bulkPut(a,l):n.bulkPut(a)})}function V0(n,e){return Pe(this,void 0,void 0,function*(){for(const{table:r,muts:o}of n){if(!e.dx._allTables[r])continue;const l=e.table(r),{primaryKey:a}=l.core.schema,d=h=>{switch(h[0]){case"[":if(h.endsWith("]"))try{return JSON.parse(h)}catch{}return h;case"#":return h.endsWith(":"+e.cloud.currentUserId)?h.substr(0,h.length-e.cloud.currentUserId.length-1):h;default:return h}};for(const h of o){const y=h.keys.map(d);switch(h.type){case"insert":a.outbound?yield l.bulkAdd(h.values,y):(y.forEach((m,_)=>{st.setByKeyPath(h.values[_],a.keyPath,m)}),yield l.bulkAdd(h.values));break;case"upsert":a.outbound?yield l.bulkPut(h.values,y):(y.forEach((m,_)=>{st.setByKeyPath(h.values[_],a.keyPath,m)}),yield l.bulkPut(h.values));break;case"modify":y.length===1?yield l.update(y[0],h.changeSpec):yield l.where(":id").anyOf(y).modify(h.changeSpec);break;case"update":yield nS(l,y,h.changeSpecs);break;case"delete":yield l.bulkDelete(y)}}}})}typeof self<"u"&&typeof navigator<"u"&&(fl=navigator.onLine,self.addEventListener("online",()=>fl=!0),self.addEventListener("offline",()=>fl=!1));const Oo="dexie-cloud-syncer";function W0(n,e){return n.where("i").between(e,1/0,!0).toArray()}function Ta(n,e,r){var o,l,a;if(!n.dx._allTables[e])return;const d=(a=(l=(o=n.table(e))===null||o===void 0?void 0:o.schema.yProps)===null||l===void 0?void 0:l.find(h=>h.prop===r))===null||a===void 0?void 0:a.updatesTable;return d&&n.dx._allTables[d]?n.table(d):void 0}function H0(n,e){return Pe(this,void 0,void 0,function*(){var r;const o={};let l,a=!1;for(const d of n)try{switch(d.type){case"u-s":{const h=Ta(e,d.table,d.prop);if(h){const y={k:d.k,u:d.u};d.r&&(y.r=d.r,l=d.r),o[h.name]=yield h.add(y)}break}case"u-ack":{const h=Ta(e,d.table,d.prop);h&&(yield e.transaction("rw",h,y=>Pe(this,void 0,void 0,function*(){let m=yield y.table(h.name).get(Oo);yield y.table(h.name).put(Object.assign(Object.assign({},m||{i:Oo}),{unsentFrom:Math.max((m==null?void 0:m.unsentFrom)||1,d.i+1)}))})));break}case"u-reject":{const h=Ta(e,d.table,d.prop);if(!h)break;const y=(r=yield h.get(d.i))===null||r===void 0?void 0:r.k;if(y!=null){yield e.transaction("rw",h,_=>(_.idbtrans._rejecting_y_ypdate=!0,h.where("i").aboveOrEqual(d.i).filter(w=>ad(w.k,y)===0&&!(1&~(w.f||0))).delete()));const m=En.getDocCache(e.dx).find(d.table,y,d.prop);m&&m.destroy()}break}case"in-sync":{const h=En.getDocCache(e.dx).find(d.table,d.k,d.prop);h&&!h.isSynced&&h.emit("sync",[!0,h]);break}case"y-complete-sync-done":l=d.yServerRev;break;case"outdated-server-rev":a=!0}}catch{}return{receivedUntils:o,resyncNeeded:a,yServerRevision:l}})}function rS(n,e,r){return Pe(this,arguments,void 0,function*(o,l,{yDownloadedRealms:a,realms:d}){if(a&&d&&d.every(_=>a[_]==="*"))return;const h=yield vd(o),y={"Content-Type":"application/json",Accept:"application/octet-stream"};h&&(y.Authorization=`Bearer ${h.accessToken}`);const m=yield fetch(`${l}/y/download`,{body:$a.stringify({downloadedRealms:a||{}}),method:"POST",headers:y,credentials:"include"});if(!m.ok)throw new Error(`Failed to download Yjs documents from server. Status: ${m.status}`);yield(async function(_,...w){let x=_();for(let C=0;C<w.length;C++)x=w[C](x);for await(const C of x);})((function(_){return async function*(){if(!_.body)throw new Error("Response body is not readable");const w=_.body.getReader();try{for(;;){const{done:x,value:C}=await w.read();if(x)return;yield C}}finally{w.releaseLock()}}})(m),jx,function(_){return xx(this,arguments,function*(){var w,x,C,O;let P=null,W=null,q=null,te=[];function fe(he){return Pe(this,void 0,void 0,function*(){const se=te[te.length-1];if(te.length>0){if(!P||!W||!q)throw new Error(`Protocol error from ${l}/y/download`);const be=Ta(o,W,q);be&&(yield be.bulkAdd(te)),te=[]}P&&(W&&q&&se||he)&&(yield o.$syncState.update("syncState",be=>{const _e=be.yDownloadedRealms||{};_e[P]=he?"*":{tbl:W,prop:q,key:se.k},be.yDownloadedRealms=_e}))})}try{try{for(var G,Ee=!0,ye=Sx(_);!(w=(G=yield Hr(ye.next())).done);Ee=!0){O=G.value,Ee=!1;const he=new Sl(O);for(;lv(he);)switch(hl(he)){case 1:yield Hr(fe(!0)),P=sr(he);break;case 2:yield Hr(fe(!1)),W=sr(he),q=sr(he);break;case 3:{const se=Co(he),be=mn(he);te.push({k:se,u:be});break}}yield Hr(fe(!1))}}catch(he){x={error:he}}finally{try{Ee||w||!(C=ye.return)||(yield Hr(C.call(ye)))}finally{if(x)throw x.error}}yield Hr(fe(!0))}catch(he){throw he instanceof st.DexieError||(yield Hr(fe(!1))),he}})})})}const q0="currentSyncWorker";function bd(n,e,r,o){return G0(n,e,r,o).then(l=>(o!=null&&o.justCheckIfNeeded||n.syncStateChangedEvent.next({phase:"in-sync"}),l)).catch(l=>Pe(this,void 0,void 0,function*(){return o!=null&&o.justCheckIfNeeded?Promise.reject(l):fl&&(o!=null&&o.retryImmediatelyOnFetchError)&&(l==null?void 0:l.name)==="TypeError"&&/fetch/.test(l==null?void 0:l.message)?(n.syncStateChangedEvent.next({phase:"error",error:l}),yield new Promise(a=>setTimeout(a,500)),yield bd(n,e,r,Object.assign(Object.assign({},o),{retryImmediatelyOnFetchError:!1}))):(yield n.$syncState.update("syncState",{timestamp:new Date,error:""+l}),n.syncStateChangedEvent.next({phase:fl?"error":"offline",error:new Error(""+(l==null?void 0:l.message)||l)}),Promise.reject(l))}))}function G0(n,e,r){return Pe(this,arguments,void 0,function*(o,l,a,{isInitialSync:d,cancelToken:h,justCheckIfNeeded:y,purpose:m}={isInitialSync:!1}){var _;if(!(!((_=o.cloud.options)===null||_===void 0)&&_.databaseUrl))throw new Error("Internal error: sync must not be called when no databaseUrl is configured");const{databaseUrl:w}=l,x=yield o.getCurrentUser(),C=x.isLoggedIn?Bc(o):[],O=C.map(ke=>o.table(pp(ke.name))),P=yield o.getPersistedSyncState(),W=x.isLoggedIn,q=W?(function(ke,ie){const K=(ie==null?void 0:ie.syncedTables)||[];return Bc(ke).filter(re=>!K.includes(re.name))})(o,P):[];xa(h);const te=q.length>0;if(te){if(y)return!0;yield o.transaction("rw",q,ke=>Pe(this,void 0,void 0,function*(){ke.idbtrans.disableChangeTracking=!0,ke.idbtrans.disableAccessControl=!0,yield(function(ie,K,re){return Pe(this,void 0,void 0,function*(){const le=new Set(re||[]);for(const N of ie)N.name==="members"?yield N.toCollection().modify(Y=>{le.has(Y.realmId)||Y.userId&&Y.userId!==Un.userId||(Y.userId=K.userId)}):N.name==="roles"||(N.name==="realms"?yield N.toCollection().modify(Y=>{le.has(Y.realmId)||Y.owner!==void 0&&Y.owner!==Un.userId||(Y.owner=K.userId)}):yield N.toCollection().modify(Y=>{Y.realmId&&le.has(Y.realmId)||(Y.owner&&Y.owner!==Un.userId||(Y.owner=K.userId),Y.realmId&&Y.realmId!==Un.userId||(Y.realmId=K.userId))}))})})(q,x,P==null?void 0:P.realms)})),xa(h)}const[fe,G,Ee,{yMessages:ye,lastUpdateIds:he}]=yield o.transaction("r",o.tables,()=>Pe(this,void 0,void 0,function*(){const ke=yield o.getPersistedSyncState();let ie=yield o.$baseRevs.toArray();ie=ie.filter(le=>C.some(N=>N.name===le.tableName));let K=yield Dh(O,o);const re=yield(function(le,N){return Pe(this,void 0,void 0,function*(){const Y=[],ge={};for(const Te of N)if(Te.schema.yProps)for(const Ge of Te.schema.yProps){const We=le.table(Ge.updatesTable),Re=yield We.get(Oo),Ye=(Re==null?void 0:Re.unsentFrom)||1,et=(Re==null?void 0:Re.receivedUntil)||0,pe=Math.min(Ye,et+1),It=yield W0(We,pe);It.length>0&&(ge[We.name]=It[It.length-1].i);const He={};for(const it of It){const ct=!(1&~(it.f||0));if(ct&&it.i<Ye)continue;const vt=JSON.stringify(it.k)+"/"+ct;let gn=He[vt];gn?(gn.u.push(it.u),gn.i=Math.max(it.i,gn.i)):(He[vt]=gn={i:it.i,k:it.k,isLocal:ct,u:[]},gn.u.push(it.u))}for(const{k:it,isLocal:ct,u:vt,i:gn}of Object.values(He)){const cr=vt.length===1?vt[0]:Gc(vt);if(ct)Y.push({type:"u-c",table:Te.name,prop:Ge.prop,k:it,u:cr,i:gn});else{const Fn=i0(cr);Y.push({type:"sv",table:Te.name,prop:Ge.prop,k:it,sv:Fn})}}}return{yMessages:Y,lastUpdateIds:ge}})})(o,C);if(xa(h),te){const le=[...(P==null?void 0:P.realms)||[],...(P==null?void 0:P.inviteRealms)||[]],N=yield(function(Y,ge,Te,Ge){return Pe(this,void 0,void 0,function*(){const We=`upload-${D0(8)}`;if(ge.isLoggedIn&&Y.length>0){const Re=new Set(Ge||[]);return(yield Promise.all(Y.map(Ye=>Pe(this,void 0,void 0,function*(){const{extractKey:et}=Ye.core.schema.primaryKey;if(!et)return{table:Ye.name,muts:[]};const pe=Te[Ye.name],It=pe!=null&&pe.generatedGlobalId?Ye.filter(it=>{return et(it),!Re.has(it.realmId||"")&&(ct=et(it),!(vt=pe==null?void 0:pe.idPrefix)||typeof ct=="string"&&ct.startsWith(vt));var ct,vt}):Ye.filter(it=>{const ct=et(it);return!Re.has(it.realmId||"")&&dp(ct)}),He=yield It.toArray();if(He.length>0){const it={type:"upsert",values:He,keys:He.map(et),userId:ge.userId,txid:We};return{table:Ye.name,muts:[it]}}return{table:Ye.name,muts:[]}})))).filter(Ye=>Ye.muts.length>0)}return[]})})(q,x,a,le);return xa(h),K=K.concat(N),[K,ke,ie,re]}return[K,ke,ie,re]})),se=fe.some(ke=>ke.muts.some(ie=>ie.keys.length>0))||ye.some(ke=>ke.type==="u-c");if(y)return se;if(m==="push"&&!se)return!1;const be=Mh(fe,G==null?void 0:G.latestRevisions),_e=(G==null?void 0:G.clientIdentity)||Cx(16);xa(h);const Ie=yield tS(fe,ye,G,Ee,o,w,a,_e,x),{done:ce,newSyncState:Le}=yield o.transaction("rw",o.tables,ke=>Pe(this,void 0,void 0,function*(){ke.idbtrans.disableChangeTracking=!0,ke.idbtrans.disableAccessControl=!0;for(const N of Object.keys(a))Ie.schema[N]&&(a[N]=Ie.schema[N]);yield o.$syncState.put(a,"schema");const ie=yield Dh(O,o,{since:be});for(const N of O){const Y=A0(N.name);if(ie.some(ge=>ge.table===Y&&ge.muts.length>0)){if(be[Y]){const ge=be[Y]||0;yield Promise.all([N.where("rev").belowOrEqual(ge).delete(),o.$baseRevs.where(":id").between([Y,-1/0],[Y,ge+1],!0,!0).reverse().offset(1).delete()])}}else yield Promise.all([N.clear(),o.$baseRevs.where({tableName:Y}).delete()])}Mh(ie,be),yield K0(o,a,be,Ie.serverRevision);const K=yield o.getPersistedSyncState();yield(function(N,Y,ge){return Pe(this,void 0,void 0,function*(){const Te=new Set,Ge=new Set,We=ge?ge.realms:[],Re=ge?ge.inviteRealms:[],Ye=new Set(Y.realms),et=new Set(Y.realms.concat(Y.inviteRealms));for(const pe of We)Ye.has(pe)||(Ge.add(pe),et.has(pe)||Te.add(pe));for(const pe of Re.concat(We))et.has(pe)||Te.add(pe);if(Te.size>0||Ge.size>0){const pe=Bc(N);for(const It of pe){let He=["realms","members","roles"].includes(It.name)?Te:Ge;He.size!==0&&(It.schema.indexes.some(it=>it.keyPath==="realmId"||Array.isArray(it.keyPath)&&it.keyPath[0]==="realmId")?yield It.where("realmId").anyOf([...He]).delete():yield It.filter(it=>!!(it!=null&&it.realmId)&&He.has(it.realmId)).delete())}}if(Ge.size>0&&(ge!=null&&ge.yDownloadedRealms))for(const pe of Ge)delete ge.yDownloadedRealms[pe]})})(o,Ie,K);const re=K||{syncedTables:[],latestRevisions:{},realms:[],inviteRealms:[],clientIdentity:_e};W&&(re.syncedTables=C.map(N=>N.name).concat(q.map(N=>N.name))),re.latestRevisions=be,re.remoteDbId=Ie.dbId,re.initiallySynced=!0,re.realms=Ie.realms,re.inviteRealms=Ie.inviteRealms,re.serverRevision=Ie.serverRevision,re.yServerRevision=Ie.serverRevision,re.timestamp=new Date,delete re.error;const le=Y0(Ie.changes,ie);if(yield V0(le,o),Ie.yMessages){const{receivedUntils:N,resyncNeeded:Y,yServerRevision:ge}=yield H0(Ie.yMessages,o);ge&&(re.yServerRevision=ge),yield(function(Te,Ge,We){return Pe(this,void 0,void 0,function*(){var Re,Ye,et,pe,It;const He={};for(const[ct,vt]of Object.entries(Te))(Re=He[ct])!==null&&Re!==void 0||(He[ct]={}),He[ct].unsentFrom=vt+1;for(const[ct,vt]of Object.entries(Ge))(Ye=He[ct])!==null&&Ye!==void 0||(He[ct]={}),He[ct].receivedUntil=vt;const it=Object.values(We.dx._dbSchema).filter(ct=>ct.yProps).map(ct=>ct.yProps.map(vt=>vt.updatesTable)).flat();for(const ct of it){const vt=He[ct],gn=(et=vt==null?void 0:vt.unsentFrom)!==null&&et!==void 0?et:1,cr=(It=(pe=vt==null?void 0:vt.receivedUntil)!==null&&pe!==void 0?pe:(yield We.table(ct).where("i").between(1,1/0).reverse().limit(1).primaryKeys())[0])!==null&&It!==void 0?It:0;yield We.transaction("rw",ct,()=>Pe(this,void 0,void 0,function*(){const Fn=yield We.table(ct).get(Oo);Fn?(Fn.unsentFrom=Math.max(gn,Fn.unsentFrom||1),Fn.receivedUntil=Math.max(cr,Fn.receivedUntil||0),yield We.table(ct).put(Fn)):yield We.table(ct).add({i:Oo,unsentFrom:gn,receivedUntil:cr})}))}})})(he,N,o),Y&&(re.yDownloadedRealms={})}return o.$syncState.put(re,"syncState"),{done:ie.length===0,newSyncState:re}}));if(!ce)return yield $0(o),yield G0(o,l,a,{isInitialSync:d,cancelToken:h});const Ve=Object.values(a).some(ke=>{var ie;return(ie=ke.yProps)===null||ie===void 0?void 0:ie.length}),$e=!!Ie.yMessages;if(Ve&&$e)try{yield rS(o,w,Le)}catch{}return o.syncCompleteEvent.next(),!1})}function Y0(n,e){const r={};sg(r,n);const o={};return sg(o,e),(function(l,a){var d,h,y;for(const[m,_]of Object.entries(a))for(const[w,x]of Object.entries(_))switch(x.type){case"ups":{const C=(d=l[m])==null?void 0:d[w];if(C)switch(C.type){case"ups":case"upd":delete l[m][w]}}break;case"del":(h=l[m])==null||delete h[w];break;case"upd":{const C=(y=l[m])==null?void 0:y[w];if(C)switch(C.type){case"ups":for(const[O,P]of Object.entries(x.mod))td(C.val,O,P);break;case"del":break;case"upd":for(const O of Object.keys(x.mod))delete C.mod[O]}break}}})(r,o),(function(l,a){const d={};for(const[y,m]of Object.entries(l))for(const[_,w]of Object.entries(m)){const x=d[y]||(d[y]={});(x[w.type]||(x[w.type]=[])).push({key:_,...w})}const h=[];for(const[y,m]of Object.entries(d)){const _={table:y,muts:[]};for(const[w,x]of Object.entries(m))switch(w){case"ups":{const C={type:"upsert",keys:x.map(O=>O.key),values:x.map(O=>O.val),txid:a};_.muts.push(C);break}case"upd":{const C={type:"update",keys:x.map(O=>O.key),changeSpecs:x.map(O=>O.mod),txid:a};_.muts.push(C);break}case"del":{const C={type:"delete",keys:x.map(O=>O.key),txid:a};_.muts.push(C);break}}h.push(_)}return h})(r)}function iS(n){const e=[],r=new Cr(!0),o=new Cr(null);let l=!1,a=new Array(10).fill(0);return o.subscribe(()=>Pe(this,void 0,void 0,function*(){if(!l&&e.length>0){l=!0,a.shift(),a.push(Date.now()),r.next(!1);try{yield(function(){return Pe(this,void 0,void 0,function*(){for(var d,h,y,m,_,w;e.length>0;){const x=e.shift();try{yield cs(n.cloud.syncState.pipe(ir(({phase:O})=>O==="in-sync"||O==="error")));const C=n.cloud.persistedSyncState.value;if(!x)continue;switch(x.type){case"token-expired":const O=n.cloud.currentUser.value,P=yield wd(n.cloud.options.databaseUrl,O);yield n.table("$logins").update(O.userId,{accessToken:P.accessToken,accessTokenExpiration:P.accessTokenExpiration,claims:P.claims,license:P.license,data:P.data});break;case"realm-added":!((d=C==null?void 0:C.realms)===null||d===void 0)&&d.includes(x.realm)||!((h=C==null?void 0:C.inviteRealms)===null||h===void 0)&&h.includes(x.realm)||(yield n.cloud.sync({purpose:"pull",wait:!0}));break;case"realm-accepted":!((y=C==null?void 0:C.realms)===null||y===void 0)&&y.includes(x.realm)||(yield n.cloud.sync({purpose:"pull",wait:!0}));break;case"realm-removed":(!((m=C==null?void 0:C.realms)===null||m===void 0)&&m.includes(x.realm)||!((_=C==null?void 0:C.inviteRealms)===null||_===void 0)&&_.includes(x.realm))&&(yield n.cloud.sync({purpose:"pull",wait:!0}));break;case"realms-changed":yield n.cloud.sync({purpose:"pull",wait:!0});break;case"changes":if(((w=n.cloud.syncState.value)===null||w===void 0?void 0:w.phase)==="error"){Ti(n,"pull");break}yield n.transaction("rw",n.dx.tables,W=>Pe(this,void 0,void 0,function*(){W.idbtrans.disableChangeTracking=!0,W.idbtrans.disableAccessControl=!0;const[q,te,fe]=yield Promise.all([n.getSchema(),n.getPersistedSyncState(),n.getCurrentUser()]);if(!te||!q||!fe)return;if(x.baseRev!==te.serverRevision)return void(typeof x.baseRev!="string"||typeof te.serverRevision!="bigint"&&typeof te.serverRevision!="object"||Ti(n,"pull"));if((yield st.waitFor(Ah(te)))!==x.realmSetHash)return void Ti(n,"pull");let G=[];if(fe.isLoggedIn){const Ee=Bc(n).map(ye=>n.table(pp(ye.name)));G=yield Dh(Ee,n)}if(x.changes.length>0){const Ee=Y0(x.changes,G);yield V0(Ee,n)}te.latestRevisions=Mh(G,te.latestRevisions),te.serverRevision=x.newRev,yield K0(n,q,te.latestRevisions,x.newRev),yield n.$syncState.put(te,"syncState")}))}}catch{}}})})()}finally{a[a.length-1]-a[0]<1e4&&(yield new Promise(d=>setTimeout(d,1e3))),l=!1,r.next(!0)}}})),{enqueue:function(d){e.push(d),o.next(null)},readyToServe:r}}const gg=new WeakMap,Tc={members:"@id, [userId+realmId], [email+realmId], realmId",roles:"[realmId+name]",realms:"@realmId",$jobs:"",$syncState:"",$baseRevs:"[tableName+clientRev]",$logins:"claims.sub, lastLogin"};let oS=0;function Ci(n){"vip"in n&&(n=n.vip);let e=gg.get(n.cloud);if(!e){const r=new ys;let o=new jc(`syncstatechanged-${n.name}`),l=new jc(`synccomplete-${n.name}`);r.id=++oS;let a=!1;e={get name(){return n.name},close:()=>n.close(),transaction:n.transaction.bind(n),table:n.table.bind(n),get tables(){return n.tables},cloud:n.cloud,get $jobs(){return n.table("$jobs")},get $syncState(){return n.table("$syncState")},get $baseRevs(){return n.table("$baseRevs")},get $logins(){return n.table("$logins")},get realms(){return n.realms},get members(){return n.members},get roles(){return n.roles},get initiallySynced(){return a},localSyncEvent:r,get syncStateChangedEvent(){return o},get syncCompleteEvent(){return l},dx:n},Object.assign(e,{getCurrentUser:()=>e.$logins.toArray().then(h=>h.find(y=>y.isLoggedIn)||Un),getPersistedSyncState:()=>e.$syncState.get("syncState"),getSchema:()=>e.$syncState.get("schema").then(h=>{if(h)for(const y of e.tables)y.schema.primKey&&y.schema.primKey.keyPath&&h[y.name]&&(h[y.name].primaryKey=sS(y.schema.primKey.keyPath));return h}),getOptions:()=>e.$syncState.get("options"),setInitiallySynced(h){a=h},reconfigure(){o=new jc(`syncstatechanged-${n.name}`),l=new jc(`synccomplete-${n.name}`)}}),e.messageConsumer=iS(e),e.messageProducer=new ys,gg.set(n.cloud,e)}return e}function sS(n){return typeof n=="string"?n:n?"["+[].join.call(n,"+")+"]":""}const lS=typeof InstallTrigger<"u",Q0=typeof navigator<"u"&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\/|Edge\//.test(navigator.userAgent),aS=Q0?[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]:NaN,uS=Q0&&aS<=605||lS,cS=typeof self<"u"&&"clients"in self&&!self.document,{toString:dS}={};function vg(n){return dS.call(n).slice(8,-1)}function dh(n,e){var r;return e.type==="delete"?e.keys:((r=e.keys)===null||r===void 0?void 0:r.slice())||e.values.map(n.extractKey)}function fS(n,e){return(1&e?n[0].toUpperCase():n[0].toLowerCase())+(2&e?n[1].toUpperCase():n[1].toLowerCase())+(4&e?n[2].toUpperCase():n[2].toLowerCase())}const hS=/b|c|d|f|g|h|j|k|l|m|n|p|q|r|s|t|v|x|y|z/i;function pS(n){return n>="A"&&n<="Z"}let Ii=0;function J0(n,e){const r=new Uint8Array(18),o=new Uint8Array(r.buffer,0,6),l=Date.now();Ii>=l?++Ii:Ii=l,o[0]=Ii/1099511627776,o[1]=Ii/4294967296,o[2]=Ii/16777216,o[3]=Ii/65536,o[4]=Ii/256,o[5]=Ii;const a=new Uint8Array(r.buffer,6);return crypto.getRandomValues(a),n+L0(new Uint8Array(r.buffer))+(e||"")}function mS(n){return{stack:"dbcore",name:"idGenerationMiddleware",level:1,create:e=>Object.assign(Object.assign({},e),{table:r=>{const o=e.table(r);return Object.assign(Object.assign({},o),{mutate:l=>{var a,d;const h=l.trans;if(h.mode==="versionchange"&&(h.disableChangeTracking=!0,h.disableAccessControl=!0),h.disableChangeTracking)return o.mutate(l);if(l.type==="add"||l.type==="put"){const y=(a=n.cloud.schema)===null||a===void 0?void 0:a[r];if(y!=null&&y.generatedGlobalId){if(!((d=n.cloud.options)===null||d===void 0)&&d.databaseUrl&&!n.initiallySynced){const m=dh(o.schema.primaryKey,l);return o.getMany({keys:m,trans:l.trans,cache:"immutable"}).then(_=>{if(_.length<m.length)throw new Error("Unable to create new objects without an initial sync having been performed.");return o.mutate(l)})}return(function(m,_){let w=null;const x=dh(o.schema.primaryKey,m);return x.forEach((C,O)=>{if(C===void 0){const P=m.values[O].realmId||n.cloud.currentUserId,W=P.substr(P.length-3);x[O]=J0(_,W),o.schema.primaryKey.outbound||(w||(w=m.values.slice()),w[O]=st.deepClone(w[O]),st.setByKeyPath(w[O],o.schema.primaryKey.keyPath,x[O]))}else if(typeof C!="string"||!C.startsWith(_)&&!C.startsWith("#"+_))throw new st.ConstraintError(`The ID "${C}" is not valid for table "${r}". Primary '@' keys requires the key to be prefixed with "${_}" (or "#${_}).
If you want to generate IDs programmatically, remove '@' from the schema to get rid of this constraint. Dexie Cloud supports custom IDs as long as they are random and globally unique.`)}),o.mutate(Object.assign(Object.assign({},m),{keys:x,values:w||m.values}))})(l,y.idPrefix)}y!=null&&y.markedForSync&&dh(o.schema.primaryKey,l).forEach((m,_)=>{if(!dp(m)){const w=Array.isArray(m)?m.map(vg).join(","):vg(m);throw new st.ConstraintError(`Invalid primary key type ${w} for table ${r}. Tables marked for sync has primary keys of type string or Array of string (and optional numbers)`)}})}return o.mutate(l)}})}})}}let yS=0;function Sa(n,e){return function(r){const{readers:o,writers:l}=r.trans[e]||(r.trans[e]={writers:[],readers:[]}),a=l.length,d=(a>0?l[a-1].then(()=>n(r),()=>n(r)):n(r)).finally(()=>{o.splice(o.indexOf(d))});return o.push(d),d}}function gS(n,e){return function(r){const{readers:o,writers:l}=r.trans[e]||(r.trans[e]={writers:[],readers:[]});let a=(l.length>0?l[l.length-1].then(()=>n(r),()=>n(r)):o.length>0?(d=o,new Promise(h=>{d.length===0&&h([]);let y=d.length;const m=new Array(y);d.forEach((_,w)=>Promise.resolve(_).then(x=>m[w]={status:"fulfilled",value:x},x=>m[w]={status:"rejected",reason:x}).then(()=>--y||h(m)))})).then(()=>n(r)):n(r)).finally(()=>{l.shift()});var d;return l.push(a),a}}const rl=new Cr(new Set);function Ka(n){var e,r,o,l;return((e=n.cloud.options)===null||e===void 0?void 0:e.disableEagerSync)||((o=(r=n.cloud.currentUser.value)===null||r===void 0?void 0:r.license)===null||o===void 0?void 0:o.status)!=="ok"||!(!((l=n.cloud.options)===null||l===void 0)&&l.databaseUrl)}function vS({currentUserObservable:n,db:e}){return{stack:"dbcore",name:"MutationTrackingMiddleware",level:1,create:r=>{const o=new Set(r.schema.tables.map(d=>d.name)),l=r.schema.tables.filter(d=>!/^\$/.test(d.name)),a=new Map;for(const d of l){const h=`$${d.name}_mutations`;o.has(h)&&a.set(d.name,r.table(h))}return Object.assign(Object.assign({},r),{transaction:(d,h)=>{let y;if(h==="readwrite"){const m=d.filter(_=>{var w,x;return(x=(w=e.cloud.schema)===null||w===void 0?void 0:w[_])===null||x===void 0?void 0:x.markedForSync}).map(_=>pp(_));y=r.transaction([...d,...m],h)}else y=r.transaction(d,h);if(h==="readwrite"){y.txid=D0(16),y.opCount=0,y.currentUser=n.value,rl.value.add(y),rl.next(rl.value);const m=()=>{y.removeEventListener("complete",_),y.removeEventListener("error",m),y.removeEventListener("abort",m),rl.value.delete(y),rl.next(rl.value)},_=()=>{y.mutationsAdded&&!Ka(e)&&Ti(e,"push"),m()};y.addEventListener("complete",_),y.addEventListener("error",m),y.addEventListener("abort",m)}return y},table:d=>{const h=r.table(d);if(/^\$/.test(d))return d.endsWith("_mutations")?Object.assign(Object.assign({},h),{mutate:w=>(w.type!=="add"&&w.type!=="put"||(w.trans.mutationsAdded=!0),h.mutate(w))}):d==="$logins"?Object.assign(Object.assign({},h),{mutate:w=>h.mutate(w).then(x=>(w.trans.mutationsAdded=!0,x)).catch(x=>Promise.reject(x))}):h;const{schema:y}=h,m=a.get(d);return m?(function(w){const x="$lock"+ ++yS;return Object.assign(Object.assign({},w),{count:Sa(w.count,x),get:Sa(w.get,x),getMany:Sa(w.getMany,x),openCursor:Sa(w.openCursor,x),query:Sa(w.query,x),mutate:gS(w.mutate,x)})})(Object.assign(Object.assign({},h),{mutate:w=>{var x,C,O;const P=w.trans;return P.txid?P.disableChangeTracking?h.mutate(w):!((C=(x=e.cloud.schema)===null||x===void 0?void 0:x[d])===null||C===void 0)&&C.markedForSync&&(!((O=P.currentUser)===null||O===void 0)&&O.isLoggedIn)?w.type==="deleteRange"?h.query({query:{range:w.range,index:y.primaryKey},trans:w.trans,values:!1}).then(W=>_({type:"delete",keys:W.result,trans:w.trans,criteria:{index:null,range:w.range}})):_(w):h.mutate(w):h.mutate(w)}})):h;function _(w){var x,C;const O=w.trans,P=(C=(x=e.cloud.options)===null||x===void 0?void 0:x.unsyncedProperties)===null||C===void 0?void 0:C[d],{txid:W,currentUser:{userId:q}}=O,{type:te}=w,fe=++O.opCount;function G(Ee){if(!P)return Ee;let ye=Ee;for(const he of Object.keys(Ee))P.some(se=>he===se||he.startsWith(se+"."))&&(ye===Ee&&(ye=Object.assign({},Ee)),delete ye[he]);return ye}return h.mutate(w).then(Ee=>{var ye;const{numFailures:he,failures:se}=Ee;let be=te==="delete"?w.keys:Ee.results,_e="values"in w?w.values:[],Ie="changeSpec"in w?w.changeSpec:void 0,ce="updates"in w?w.updates:void 0,Le=!(!ce||!("upsert"in w))&&w.upsert;if(he&&(be=be.filter((ie,K)=>!se[K]),_e=_e.filter((ie,K)=>!se[K])),P){if(_e=_e.map(ie=>{const K=Object.assign({},ie);for(const re of P)delete K[re];return K}),Ie&&(Ie=G(Ie),Object.keys(Ie).length===0))return Ee;if(ce){let ie=ce.changeSpecs.map(G),K={keys:[],changeSpecs:[]};const re=new Vb;let le=!1;if(!Le){for(let N=0,Y=ie.length;N<Y;++N)Object.keys(ie[N]).length>0?(K.keys.push(ce.keys[N]),K.changeSpecs.push(ie[N]),re.addKey(ce.keys[N])):le=!0;if(ce=K,le){let N=[],Y=[];for(let ge=0,Te=be.length;ge<Te;++ge)re.hasKey(be[ge])&&(N.push(be[ge]),Y.push(_e[ge]));be=N,_e=Y}}}}const Ve=Date.now();let $e="criteria"in w&&w.criteria?Object.assign(Object.assign({},w.criteria),{index:w.criteria.index===y.primaryKey.keyPath?null:w.criteria.index}):void 0;if(P&&($e!=null&&$e.index)){const ie=(ye=y.indexes.find(K=>K.name===$e.index))===null||ye===void 0?void 0:ye.keyPath;(ie?typeof ie=="string"?[ie]:ie:[]).some(K=>P==null?void 0:P.includes(K))&&($e=void 0)}const ke=w.type==="delete"?{type:"delete",ts:Ve,opNo:fe,keys:be,criteria:$e,txid:W,userId:q}:w.type==="add"?{type:"insert",ts:Ve,opNo:fe,keys:be,txid:W,userId:q,values:_e}:Le&&ce?{type:"upsert",ts:Ve,opNo:fe,keys:be,values:_e,changeSpecs:ce.changeSpecs.filter((ie,K)=>!se[K]),txid:W,userId:q}:$e&&Ie?{type:"modify",ts:Ve,opNo:fe,keys:be,criteria:$e,changeSpec:Ie,txid:W,userId:q}:Ie?{type:"update",ts:Ve,opNo:fe,keys:be,changeSpecs:be.map(()=>Ie),txid:W,userId:q}:ce?{type:"update",ts:Ve,opNo:fe,keys:ce.keys,changeSpecs:ce.changeSpecs,txid:W,userId:q}:{type:"upsert",ts:Ve,opNo:fe,keys:be,values:_e,txid:W,userId:q};return"isAdditionalChunk"in w&&w.isAdditionalChunk&&(ke.isAdditionalChunk=!0),be.length>0||$e?m.mutate({type:"add",trans:O,values:[ke]}).then(()=>(O.mutationsAdded=!0,Ee)):Ee})}}})}}}function wS(n,e){return function(r,o){var l;const a=Object.assign(Object.assign({},Tc),r);Object.keys(Tc).forEach(m=>{const _=a[m];if(_==null)throw new Error(`Cannot delete table ${m} as it is needed for access control of Dexie Cloud`);if(!r[m])return;const w=_.split(",").map(O=>O.trim()),x=Tc[m].split(",").map(O=>O.trim()),C=new Set(w.map(O=>O.replace(/([&*]|\+\+)/g,"")));if(w[0]!==x[0])throw new Error(`Cannot override primary key of table ${m}. Please declare it as {${m}: ${JSON.stringify(Tc[m])}`);for(let O=1;O<x.length;++O){const P=x[O];C.has(P.replace(/([&*]|\+\+)/g,""))||(a[m]+=`,${P}`)}});const d=e.cloud.schema||(e.cloud.schema={}),h=new Set;Object.keys(a).forEach(m=>{var _;const w=(_=a[m])===null||_===void 0?void 0:_.trim(),x=d[m]||(d[m]={});w!=null?(/^\@/.test(w)&&(a[m]=a[m].substr(1),x.generatedGlobalId=!0,x.idPrefix=(function(C,O){let P=C[0].toLocaleLowerCase();for(let W=1,q=C.length;W<q&&P.length<3;++W)(hS.test(C[W])||pS(C[W]))&&(P+=C[W].toLowerCase());for(;O.has(P);){if(/\d/g.test(P)){if(P=P.substr(0,P.length-1)+(P[P.length-1]+1),!(P.length>3))continue;P=P.substr(0,3)}else if(P.length<3){P+="2";continue}let W=1,q=P;for(;O.has(q)&&W<8;)q=fS(P,W),++W;if(W<8)P=q;else{let te=P.charCodeAt(2)+1&127;P=P.substr(0,2)+String.fromCharCode(te)}}return P})(m,h),h.add(x.idPrefix)),/^\$/.test(m)||(a[`$${m}_mutations`]="++rev",x.markedForSync=!0),x.deleted&&(x.deleted=!1)):(x.deleted=!0,x.markedForSync=!1,a[`$${m}_mutations`]=null)});const y=n.call(this,a,o);for(const[m,_]of Object.entries(o))if(!((l=_.yProps)===null||l===void 0)&&l.length){const w=d[m];w&&(w.yProps=_.yProps.map(x=>x.prop))}return y}}function X0(n,e,r){return typeof navigator<"u"&&navigator.locks?navigator.locks.request(n.name+"|"+e,r):r()}const Pa=new Cr(!0),Uh=new Cr(!0);Pa.pipe(Sn(n=>n?Ai(!0):Ai(!1).pipe(jv(2e4))),Tv()).subscribe(Uh);const Z0=typeof document<"u"?qr(document,"visibilitychange"):Ai({}),bS=Z0.pipe(ir(()=>document.visibilityState==="hidden")),_S=Z0.pipe(ir(()=>document.visibilityState==="visible")),ew=typeof window<"u"?fd(_S,qr(window,"mousedown"),qr(window,"mousemove"),qr(window,"keydown"),qr(window,"wheel"),qr(window,"touchmove")):Ai({});typeof document<"u"&&fd(Ai(!0),bS,ew).pipe(Wn(()=>document.visibilityState==="visible"),kh(n=>{Pa.value!==n&&Pa.next(n)}),Sn(n=>n?Ai(0).pipe(jv(16e4),kh(()=>Pa.next(!1))):Ai(0))).subscribe(()=>{});class kS extends Error{constructor(){super(...arguments),this.name="TokenExpiredError"}}const tw=new WeakMap,wg=new WeakMap;function nw(n){let e=wg.get(n);return e||(e=new ys,wg.set(n,e)),e}class xS extends Xt{constructor(e,r,o,l,a,d,h,y){super(m=>new ES(e,r,o,l,a,y,m,d,h))}}let SS=0;class ES extends El{constructor(e,r,o,l,a,d,h,y,m){super(()=>this.teardown()),this.id=++SS,this.subscriptions=new Set,this.reconnecting=!1,this.db=e,this.databaseUrl=e.cloud.options.databaseUrl,this.rev=r,this.yrev=o,this.realmSetHash=l,this.clientIdentity=a,this.user=d,this.subscriber=h,this.lastUserActivity=new Date,this.messageProducer=y,this.webSocketStatus=m,this.connect()}teardown(){this.disconnect()}disconnect(){if(this.webSocketStatus.next("disconnected"),this.pinger&&(clearInterval(this.pinger),this.pinger=null),this.ws)try{this.ws.close()}catch{}this.ws=null;for(const e of this.subscriptions)e.unsubscribe();this.subscriptions.clear()}reconnect(){if(!this.reconnecting){this.reconnecting=!0;try{this.disconnect()}catch{}this.connect().catch(()=>{}).then(()=>this.reconnecting=!1)}}connect(){return Pe(this,void 0,void 0,function*(){if(this.lastServerActivity=new Date,this.pauseUntil&&this.pauseUntil>new Date)return;if(this.ws)throw new Error("Called connect() when a connection is already open");if(!this.databaseUrl)throw new Error("Cannot connect without a database URL");if(this.closed)return;const e=this.user.accessTokenExpiration;if(e&&e<new Date)return void this.subscriber.error(new kS);this.webSocketStatus.next("connecting"),this.pinger=setInterval(()=>Pe(this,void 0,void 0,function*(){if(this.closed)this.teardown();else if(this.ws)try{this.ws.send(JSON.stringify({type:"ping"})),setTimeout(()=>{this.pinger&&(this.closed?this.teardown():this.lastServerActivity<new Date(Date.now()-2e4)&&this.reconnect())},2e4)}catch{this.reconnect()}else this.reconnect()}),3e4);const r=new URL(this.databaseUrl);r.protocol=r.protocol==="http:"?"ws":"wss";const o=new URLSearchParams;if(this.subscriber.closed)return;o.set("v","2"),this.rev&&o.set("rev",this.rev),this.yrev&&o.set("yrev",this.yrev),o.set("realmsHash",this.realmSetHash),o.set("clientId",this.clientIdentity),o.set("dxcv",this.db.cloud.version),this.user.accessToken&&o.set("token",this.user.accessToken);const l=this.ws=new WebSocket(`${r}/changes?${o}`);l.binaryType="arraybuffer",l.onclose=a=>{this.pinger&&this.reconnect()},l.onmessage=a=>{if(this.pinger){this.lastServerActivity=new Date;try{const d=typeof a.data=="string"?$a.parse(a.data):(function(h){const y=new Sl(h),m=sr(y);if(m==="outdated-server-rev")return{type:m};if(m==="y-complete-sync-done")return{type:m,yServerRev:sr(y)};const _=sr(y),w=sr(y);switch(m){case"u-ack":case"u-reject":return{type:m,table:_,prop:w,i:Number(Oy(y))};default:{const x=Co(y);switch(m){case"in-sync":case"doc-close":return{type:m,table:_,prop:w,k:x};case"aware":return{type:m,table:_,prop:w,k:x,u:mn(y)};case"doc-open":return{type:m,table:_,prop:w,k:x,serverRev:Co(y),sv:Co(y)};case"sv":return{type:m,table:_,prop:w,k:x,sv:mn(y)};case"u-c":return{type:m,table:_,prop:w,k:x,u:mn(y),i:Number(Oy(y))};case"u-s":return{type:m,table:_,prop:w,k:x,u:mn(y),r:y.pos<y.arr.length&&sr(y)||void 0};default:throw new TypeError(`Unknown message type: ${m}`)}}}})(new Uint8Array(a.data));if(d.type==="error")throw new Error(`Error message from dexie-cloud: ${d.error}`);if(d.type==="aware"){const h=En.getDocCache(this.db.dx).find(d.table,d.k,d.prop);if(h){const y=(m=>tw.get(m))(h);y&&_x(y,d.u,"server")}}else if(d.type!=="pong")if(d.type==="doc-open"){const h=En.getDocCache(this.db.dx).find(d.table,d.k,d.prop);h&&nw(h).next()}else d.type==="u-ack"||d.type==="u-reject"||d.type==="u-s"||d.type==="in-sync"||d.type==="outdated-server-rev"||d.type==="y-complete-sync-done"?H0([d],this.db).then(h=>Pe(this,[h],void 0,function*({resyncNeeded:y,yServerRevision:m,receivedUntils:_}){if(m&&(yield this.db.$syncState.update("syncState",{yServerRevision:m})),d.type==="u-s"&&_){const w=Ta(this.db,d.table,d.prop);if(w){const x=_[w.name];x&&(yield w.update(Oo,{receivedUntil:x}))}}y&&(yield this.db.cloud.sync({purpose:"pull",wait:!0}))})):this.subscriber.next(d)}catch(d){this.subscriber.error(d)}}};try{let a=!1;yield new Promise((d,h)=>{l.onopen=y=>{a=!0,d(null)},l.onerror=y=>{if(a)this.reconnect();else{const m=y.error||new Error("WebSocket Error");this.subscriber.error(m),this.webSocketStatus.next("error"),h(m)}}}),this.subscriptions.add(this.messageProducer.subscribe(d=>{var h,y;this.closed||(d.type==="ready"&&this.webSocketStatus.value!=="connected"&&this.webSocketStatus.next("connected"),d.type==="ready"?(this.rev=d.rev,(h=this.ws)===null||h===void 0||h.send($a.stringify(d))):(y=this.ws)===null||y===void 0||y.send((function(m){const _=new kl;switch(or(_,m.type),"table"in m&&or(_,m.table),"prop"in m&&or(_,m.prop),m.type){case"u-ack":case"u-reject":xy(_,BigInt(m.i));break;case"outdated-server-rev":break;case"y-complete-sync-done":or(_,m.yServerRev);break;default:switch(Eo(_,m.k),m.type){case"aware":pn(_,m.u);break;case"doc-open":Eo(_,m.serverRev),Eo(_,m.sv);break;case"doc-close":break;case"sv":pn(_,m.sv);break;case"u-c":pn(_,m.u),xy(_,BigInt(m.i));break;case"u-s":pn(_,m.u),or(_,m.r||"")}}return Hn(_)})(d)))})),this.user.isLoggedIn&&!Ka(this.db)&&this.subscriptions.add((function(d){const h=mp(d.tables.filter(y=>{var m,_;return((_=(m=d.cloud.schema)===null||m===void 0?void 0:m[y.name])===null||_===void 0?void 0:_.markedForSync)&&y.schema.yProps}).map(y=>y.schema.yProps.map(m=>({table:y.name,ydocProp:m.prop,updatesTable:m.updatesTable}))));return fd(...h.map(({table:y,ydocProp:m,updatesTable:_})=>{const w=d.table(_);return Gn(w.get(Oo)).pipe(Sn(x=>{let C=(x==null?void 0:x.unsentFrom)||1;return Gn(So(()=>Pe(this,void 0,void 0,function*(){return(yield W0(w,C)).filter(O=>O.f&&1&O.f).map(O=>({type:"u-c",table:y,prop:m,k:O.k,u:O.u,i:O.i}))}))).pipe(kh(O=>{O.length>0&&(C=O.at(-1).i+1)}))}))})).pipe(iu(y=>y))})(this.db).subscribe(this.db.messageProducer))}catch{this.pauseUntil=new Date(Date.now()+6e4)}})}}class CS extends Error{constructor(e){super(e==="expired"?"License expired":e==="deactivated"?"User deactivated":"Invalid license"),this.name="InvalidLicenseError",e&&(this.license=e)}}function IS(n){return Pe(this,void 0,void 0,function*(){var e;yield(e=3e3,new Promise(r=>setTimeout(r,e))),yield cs(ew)})}function bg(n){return Pe(this,void 0,void 0,function*(){var e;return!(!(!((e=n.cloud.options)===null||e===void 0)&&e.databaseUrl)||!n.cloud.schema)&&(yield bd(n,n.cloud.options,n.cloud.schema,{justCheckIfNeeded:!0}))})}const Pc=new WeakMap;function rw(n,e,r,o){const l=Pc.get(n);if(l){if(l.pull||(o==null?void 0:o.purpose)==="push")return l.promise;{let d=!1;const h=n.cloud.syncState.subscribe(y=>{y.phase==="pulling"&&(d=!0)});return l.promise.then(()=>{h.unsubscribe()}).catch(y=>(h.unsubscribe(),Promise.reject(y))).then(()=>{if(!d)return rw(n,e,r,o)})}}const a=(function(){return Pe(this,void 0,void 0,function*(){try{yield $0(n),yield X0(n,q0,()=>bd(n,e,r,o)),Pc.delete(n)}catch(d){throw Pc.delete(n),d}})})();return Pc.set(n,{promise:a,pull:(o==null?void 0:o.purpose)!=="push"}),a}function OS(n,e,r){let o=null,l={cancelled:!1},a=0,d=0;function h(x=1){setTimeout(()=>{const C=y?"pull":"push";d=Date.now(),rw(n,e,r,{cancelToken:l,retryImmediatelyOnFetchError:!0,purpose:C}).then(()=>{if(l.cancelled)w();else if(y||m)return y=!1,m=!1,h();_=!1,a=0,d=0}).catch(O=>{if(l.cancelled)w(),_=!1,a=0,d=0;else if(x<5){const P=1e3*[0,20,40,300,900][x];a=Date.now()+P,d=0,setTimeout(()=>h(x+1),P)}else _=!1,a=0,d=0})},0)}let y=!1,m=!1,_=!1;const w=()=>{l.cancelled=!0,o&&o.unsubscribe()};return{start:()=>{o=n.localSyncEvent.subscribe(({purpose:x})=>{(C=>{l.cancelled||(C==="pull"&&(y=!0),C==="push"&&(m=!0),_?a||d>0&&Date.now():(_=!0,h()))})(x||"pull")})},stop:w}}function fh(n,e){if(n&&e&&e.unsyncedTables)for(const r of e.unsyncedTables)n[r]&&(n[r].markedForSync=!1)}var _d,At,iw,us,_g,ow,sw,lw,yp,zh,Fh,Va={},aw=[],jS=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,kd=Array.isArray;function Pi(n,e){for(var r in e)n[r]=e[r];return n}function gp(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function mt(n,e,r){var o,l,a,d={};for(a in e)a=="key"?o=e[a]:a=="ref"?l=e[a]:d[a]=e[a];if(arguments.length>2&&(d.children=arguments.length>3?_d.call(arguments,2):r),typeof n=="function"&&n.defaultProps!=null)for(a in n.defaultProps)d[a]===void 0&&(d[a]=n.defaultProps[a]);return $c(n,d,o,l,null)}function $c(n,e,r,o,l){var a={type:n,props:e,key:r,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:l??++iw,__i:-1,__u:0};return l==null&&At.vnode!=null&&At.vnode(a),a}function hs(n){return n.children}function Na(n,e){this.props=n,this.context=e}function bl(n,e){if(e==null)return n.__?bl(n.__,n.__i+1):null;for(var r;e<n.__k.length;e++)if((r=n.__k[e])!=null&&r.__e!=null)return r.__e;return typeof n.type=="function"?bl(n):null}function uw(n){var e,r;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((r=n.__k[e])!=null&&r.__e!=null){n.__e=n.__c.base=r.__e;break}return uw(n)}}function kg(n){(!n.__d&&(n.__d=!0)&&us.push(n)&&!nd.__r++||_g!=At.debounceRendering)&&((_g=At.debounceRendering)||ow)(nd)}function nd(){for(var n,e,r,o,l,a,d,h=1;us.length;)us.length>h&&us.sort(sw),n=us.shift(),h=us.length,n.__d&&(r=void 0,o=void 0,l=(o=(e=n).__v).__e,a=[],d=[],e.__P&&((r=Pi({},o)).__v=o.__v+1,At.vnode&&At.vnode(r),vp(e.__P,r,o,e.__n,e.__P.namespaceURI,32&o.__u?[l]:null,a,l??bl(o),!!(32&o.__u),d),r.__v=o.__v,r.__.__k[r.__i]=r,fw(a,r,d),o.__e=o.__=null,r.__e!=l&&uw(r)));nd.__r=0}function cw(n,e,r,o,l,a,d,h,y,m,_){var w,x,C,O,P,W,q,te=o&&o.__k||aw,fe=e.length;for(y=(function(G,Ee,ye,he,se){var be,_e,Ie,ce,Le,Ve=ye.length,$e=Ve,ke=0;for(G.__k=new Array(se),be=0;be<se;be++)(_e=Ee[be])!=null&&typeof _e!="boolean"&&typeof _e!="function"?(typeof _e=="string"||typeof _e=="number"||typeof _e=="bigint"||_e.constructor==String?_e=G.__k[be]=$c(null,_e,null,null,null):kd(_e)?_e=G.__k[be]=$c(hs,{children:_e},null,null,null):_e.constructor==null&&_e.__b>0?_e=G.__k[be]=$c(_e.type,_e.props,_e.key,_e.ref?_e.ref:null,_e.__v):G.__k[be]=_e,ce=be+ke,_e.__=G,_e.__b=G.__b+1,(Le=_e.__i=TS(_e,ye,ce,$e))!=-1&&($e--,(Ie=ye[Le])&&(Ie.__u|=2)),Ie==null||Ie.__v==null?(Le==-1&&(se>Ve?ke--:se<Ve&&ke++),typeof _e.type!="function"&&(_e.__u|=4)):Le!=ce&&(Le==ce-1?ke--:Le==ce+1?ke++:(Le>ce?ke--:ke++,_e.__u|=4))):G.__k[be]=null;if($e)for(be=0;be<Ve;be++)(Ie=ye[be])!=null&&!(2&Ie.__u)&&(Ie.__e==he&&(he=bl(Ie)),pw(Ie,Ie));return he})(r,e,te,y,fe),w=0;w<fe;w++)(C=r.__k[w])!=null&&(x=C.__i==-1?Va:te[C.__i]||Va,C.__i=w,W=vp(n,C,x,l,a,d,h,y,m,_),O=C.__e,C.ref&&x.ref!=C.ref&&(x.ref&&wp(x.ref,null,C),_.push(C.ref,C.__c||O,C)),P==null&&O!=null&&(P=O),(q=!!(4&C.__u))||x.__k===C.__k?y=dw(C,y,n,q):typeof C.type=="function"&&W!==void 0?y=W:O&&(y=O.nextSibling),C.__u&=-7);return r.__e=P,y}function dw(n,e,r,o){var l,a;if(typeof n.type=="function"){for(l=n.__k,a=0;l&&a<l.length;a++)l[a]&&(l[a].__=n,e=dw(l[a],e,r,o));return e}n.__e!=e&&(o&&(e&&n.type&&!e.parentNode&&(e=bl(n)),r.insertBefore(n.__e,e||null)),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function TS(n,e,r,o){var l,a,d,h=n.key,y=n.type,m=e[r],_=m!=null&&!(2&m.__u);if(m===null&&h==null||_&&h==m.key&&y==m.type)return r;if(o>(_?1:0)){for(l=r-1,a=r+1;l>=0||a<e.length;)if((m=e[d=l>=0?l--:a++])!=null&&!(2&m.__u)&&h==m.key&&y==m.type)return d}return-1}function xg(n,e,r){e[0]=="-"?n.setProperty(e,r??""):n[e]=r==null?"":typeof r!="number"||jS.test(e)?r:r+"px"}function Nc(n,e,r,o,l){var a,d;e:if(e=="style")if(typeof r=="string")n.style.cssText=r;else{if(typeof o=="string"&&(n.style.cssText=o=""),o)for(e in o)r&&e in r||xg(n.style,e,"");if(r)for(e in r)o&&r[e]==o[e]||xg(n.style,e,r[e])}else if(e[0]=="o"&&e[1]=="n")a=e!=(e=e.replace(lw,"$1")),d=e.toLowerCase(),e=d in n||e=="onFocusOut"||e=="onFocusIn"?d.slice(2):e.slice(2),n.l||(n.l={}),n.l[e+a]=r,r?o?r.u=o.u:(r.u=yp,n.addEventListener(e,a?Fh:zh,a)):n.removeEventListener(e,a?Fh:zh,a);else{if(l=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in n)try{n[e]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&e[4]!="-"?n.removeAttribute(e):n.setAttribute(e,e=="popover"&&r==1?"":r))}}function Sg(n){return function(e){if(this.l){var r=this.l[e.type+n];if(e.t==null)e.t=yp++;else if(e.t<r.u)return;return r(At.event?At.event(e):e)}}}function vp(n,e,r,o,l,a,d,h,y,m){var _,w,x,C,O,P,W,q,te,fe,G,Ee,ye,he,se,be,_e,Ie=e.type;if(e.constructor!=null)return null;128&r.__u&&(y=!!(32&r.__u),a=[h=e.__e=r.__e]),(_=At.__b)&&_(e);e:if(typeof Ie=="function")try{if(q=e.props,te="prototype"in Ie&&Ie.prototype.render,fe=(_=Ie.contextType)&&o[_.__c],G=_?fe?fe.props.value:_.__:o,r.__c?W=(w=e.__c=r.__c).__=w.__E:(te?e.__c=w=new Ie(q,G):(e.__c=w=new Na(q,G),w.constructor=Ie,w.render=NS),fe&&fe.sub(w),w.state||(w.state={}),w.__n=o,x=w.__d=!0,w.__h=[],w._sb=[]),te&&w.__s==null&&(w.__s=w.state),te&&Ie.getDerivedStateFromProps!=null&&(w.__s==w.state&&(w.__s=Pi({},w.__s)),Pi(w.__s,Ie.getDerivedStateFromProps(q,w.__s))),C=w.props,O=w.state,w.__v=e,x)te&&Ie.getDerivedStateFromProps==null&&w.componentWillMount!=null&&w.componentWillMount(),te&&w.componentDidMount!=null&&w.__h.push(w.componentDidMount);else{if(te&&Ie.getDerivedStateFromProps==null&&q!==C&&w.componentWillReceiveProps!=null&&w.componentWillReceiveProps(q,G),e.__v==r.__v||!w.__e&&w.shouldComponentUpdate!=null&&w.shouldComponentUpdate(q,w.__s,G)===!1){for(e.__v!=r.__v&&(w.props=q,w.state=w.__s,w.__d=!1),e.__e=r.__e,e.__k=r.__k,e.__k.some(function(ce){ce&&(ce.__=e)}),Ee=0;Ee<w._sb.length;Ee++)w.__h.push(w._sb[Ee]);w._sb=[],w.__h.length&&d.push(w);break e}w.componentWillUpdate!=null&&w.componentWillUpdate(q,w.__s,G),te&&w.componentDidUpdate!=null&&w.__h.push(function(){w.componentDidUpdate(C,O,P)})}if(w.context=G,w.props=q,w.__P=n,w.__e=!1,ye=At.__r,he=0,te){for(w.state=w.__s,w.__d=!1,ye&&ye(e),_=w.render(w.props,w.state,w.context),se=0;se<w._sb.length;se++)w.__h.push(w._sb[se]);w._sb=[]}else do w.__d=!1,ye&&ye(e),_=w.render(w.props,w.state,w.context),w.state=w.__s;while(w.__d&&++he<25);w.state=w.__s,w.getChildContext!=null&&(o=Pi(Pi({},o),w.getChildContext())),te&&!x&&w.getSnapshotBeforeUpdate!=null&&(P=w.getSnapshotBeforeUpdate(C,O)),be=_,_!=null&&_.type===hs&&_.key==null&&(be=hw(_.props.children)),h=cw(n,kd(be)?be:[be],e,r,o,l,a,d,h,y,m),w.base=e.__e,e.__u&=-161,w.__h.length&&d.push(w),W&&(w.__E=w.__=null)}catch(ce){if(e.__v=null,y||a!=null)if(ce.then){for(e.__u|=y?160:128;h&&h.nodeType==8&&h.nextSibling;)h=h.nextSibling;a[a.indexOf(h)]=null,e.__e=h}else{for(_e=a.length;_e--;)gp(a[_e]);Bh(e)}else e.__e=r.__e,e.__k=r.__k,ce.then||Bh(e);At.__e(ce,e,r)}else a==null&&e.__v==r.__v?(e.__k=r.__k,e.__e=r.__e):h=e.__e=PS(r.__e,e,r,o,l,a,d,y,m);return(_=At.diffed)&&_(e),128&e.__u?void 0:h}function Bh(n){n&&n.__c&&(n.__c.__e=!0),n&&n.__k&&n.__k.forEach(Bh)}function fw(n,e,r){for(var o=0;o<r.length;o++)wp(r[o],r[++o],r[++o]);At.__c&&At.__c(e,n),n.some(function(l){try{n=l.__h,l.__h=[],n.some(function(a){a.call(l)})}catch(a){At.__e(a,l.__v)}})}function hw(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:kd(n)?n.map(hw):Pi({},n)}function PS(n,e,r,o,l,a,d,h,y){var m,_,w,x,C,O,P,W=r.props||Va,q=e.props,te=e.type;if(te=="svg"?l="http://www.w3.org/2000/svg":te=="math"?l="http://www.w3.org/1998/Math/MathML":l||(l="http://www.w3.org/1999/xhtml"),a!=null){for(m=0;m<a.length;m++)if((C=a[m])&&"setAttribute"in C==!!te&&(te?C.localName==te:C.nodeType==3)){n=C,a[m]=null;break}}if(n==null){if(te==null)return document.createTextNode(q);n=document.createElementNS(l,te,q.is&&q),h&&(At.__m&&At.__m(e,a),h=!1),a=null}if(te==null)W===q||h&&n.data==q||(n.data=q);else{if(a=a&&_d.call(n.childNodes),!h&&a!=null)for(W={},m=0;m<n.attributes.length;m++)W[(C=n.attributes[m]).name]=C.value;for(m in W)if(C=W[m],m!="children"){if(m=="dangerouslySetInnerHTML")w=C;else if(!(m in q)){if(m=="value"&&"defaultValue"in q||m=="checked"&&"defaultChecked"in q)continue;Nc(n,m,null,C,l)}}for(m in q)C=q[m],m=="children"?x=C:m=="dangerouslySetInnerHTML"?_=C:m=="value"?O=C:m=="checked"?P=C:h&&typeof C!="function"||W[m]===C||Nc(n,m,C,W[m],l);if(_)h||w&&(_.__html==w.__html||_.__html==n.innerHTML)||(n.innerHTML=_.__html),e.__k=[];else if(w&&(n.innerHTML=""),cw(e.type=="template"?n.content:n,kd(x)?x:[x],e,r,o,te=="foreignObject"?"http://www.w3.org/1999/xhtml":l,a,d,a?a[0]:r.__k&&bl(r,0),h,y),a!=null)for(m=a.length;m--;)gp(a[m]);h||(m="value",te=="progress"&&O==null?n.removeAttribute("value"):O!=null&&(O!==n[m]||te=="progress"&&!O||te=="option"&&O!=W[m])&&Nc(n,m,O,W[m],l),m="checked",P!=null&&P!=n[m]&&Nc(n,m,P,W[m],l))}return n}function wp(n,e,r){try{if(typeof n=="function"){var o=typeof n.__u=="function";o&&n.__u(),o&&e==null||(n.__u=n(e))}else n.current=e}catch(l){At.__e(l,r)}}function pw(n,e,r){var o,l;if(At.unmount&&At.unmount(n),(o=n.ref)&&(o.current&&o.current!=n.__e||wp(o,null,e)),(o=n.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(a){At.__e(a,e)}o.base=o.__P=null}if(o=n.__k)for(l=0;l<o.length;l++)o[l]&&pw(o[l],e,r||typeof n.type!="function");r||gp(n.__e),n.__c=n.__=n.__e=void 0}function NS(n,e,r){return this.constructor(n,r)}function Eg(n,e,r){var o,l,a;e==document&&(e=document.documentElement),At.__&&At.__(n,e),o=e.__k,l=[],a=[],vp(e,n=e.__k=mt(hs,null,[n]),o||Va,Va,e.namespaceURI,o?null:e.firstChild?_d.call(e.childNodes):null,l,o?o.__e:e.firstChild,!1,a),fw(l,n,a)}_d=aw.slice,At={__e:function(n,e,r,o){for(var l,a,d;e=e.__;)if((l=e.__c)&&!l.__)try{if((a=l.constructor)&&a.getDerivedStateFromError!=null&&(l.setState(a.getDerivedStateFromError(n)),d=l.__d),l.componentDidCatch!=null&&(l.componentDidCatch(n,o||{}),d=l.__d),d)return l.__E=l}catch(h){n=h}throw n}},iw=0,Na.prototype.setState=function(n,e){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Pi({},this.state),typeof n=="function"&&(n=n(Pi({},r),this.props)),n&&Pi(r,n),n!=null&&this.__v&&(e&&this._sb.push(e),kg(this))},Na.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),kg(this))},Na.prototype.render=hs,us=[],ow=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,sw=function(n,e){return n.__v.__b-e.__v.__b},nd.__r=0,lw=/(PointerCapture)$|Capture$/i,yp=0,zh=Sg(!1),Fh=Sg(!0);const Lt={Alert:{error:{color:"red",fontWeight:"bold"},warning:{color:"#f80",fontWeight:"bold"},info:{color:"black"}},Darken:{position:"fixed",top:0,left:0,opacity:.5,backgroundColor:"#000",width:"100vw",height:"100vh",zIndex:150,webkitBackdropFilter:"blur(2px)",backdropFilter:"blur(2px)"},DialogOuter:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:150,alignItems:"center",display:"flex",justifyContent:"center",padding:"16px",boxSizing:"border-box"},DialogInner:{position:"relative",color:"#222",backgroundColor:"#fff",padding:"24px",marginBottom:"2em",maxWidth:"400px",width:"100%",maxHeight:"90%",overflowY:"auto",border:"3px solid #3d3d5d",borderRadius:"8px",boxShadow:"0 0 80px 10px #666",fontFamily:"sans-serif",boxSizing:"border-box"},Input:{height:"35px",width:"100%",maxWidth:"100%",borderColor:"#ccf4",outline:"none",fontSize:"16px",padding:"8px",boxSizing:"border-box",backgroundColor:"#f9f9f9",borderRadius:"4px",border:"1px solid #ccc",marginTop:"6px",fontFamily:"inherit"},Button:{padding:"10px 20px",margin:"0 4px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:"#ffffff",cursor:"pointer",fontSize:"14px",fontWeight:"500",color:"#374151",transition:"all 0.2s ease"},PrimaryButton:{padding:"10px 20px",margin:"0 4px",border:"1px solid #3b82f6",borderRadius:"6px",backgroundColor:"#3b82f6",color:"white",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s ease"},ButtonsDiv:{display:"flex",justifyContent:"flex-end",gap:"12px",marginTop:"24px",paddingTop:"20px"},Label:{display:"block",marginBottom:"12px",fontSize:"14px",fontWeight:"500",color:"#333"},WindowHeader:{margin:"0 0 20px 0",fontSize:"18px",fontWeight:"600",color:"#333",borderBottom:"1px solid #eee",paddingBottom:"10px"},ProviderButton:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",padding:"12px 16px",marginBottom:"10px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:"#ffffff",cursor:"pointer",fontSize:"14px",fontWeight:"500",color:"#374151",transition:"all 0.2s ease",gap:"12px"},ProviderButtonIcon:{width:"20px",height:"20px",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center"},ProviderButtonText:{flex:1,textAlign:"left"},ProviderGoogle:{backgroundColor:"#ffffff",border:"1px solid #dadce0",color:"#3c4043"},ProviderGitHub:{backgroundColor:"#24292e",border:"1px solid #24292e",color:"#ffffff"},ProviderMicrosoft:{backgroundColor:"#ffffff",border:"1px solid #8c8c8c",color:"#5e5e5e"},ProviderApple:{backgroundColor:"#000000",border:"1px solid #000000",color:"#ffffff"},ProviderCustom:{backgroundColor:"#4f46e5",border:"1px solid #4f46e5",color:"#ffffff"},Divider:{display:"flex",alignItems:"center",margin:"20px 0",color:"#6b7280",fontSize:"13px"},DividerLine:{flex:1,height:"1px",backgroundColor:"#e5e7eb"},DividerText:{padding:"0 12px",color:"#9ca3af"},OtpButton:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",padding:"12px 16px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:"#f9fafb",cursor:"pointer",fontSize:"14px",fontWeight:"500",color:"#374151",transition:"all 0.2s ease",gap:"12px"}};function AS({children:n,className:e}){return mt("div",{className:`dexie-dialog ${e||""}`},mt("div",{style:Lt.Darken}),mt("div",{style:Lt.DialogOuter},mt("div",{style:Lt.DialogInner},n)))}var Wa,Kt,hh,Cg,rd=0,mw=[],Ht=At,Ig=Ht.__b,Og=Ht.__r,jg=Ht.diffed,Tg=Ht.__c,Pg=Ht.unmount,Ng=Ht.__;function bp(n,e){Ht.__h&&Ht.__h(Kt,n,rd||e),rd=0;var r=Kt.__H||(Kt.__H={__:[],__h:[]});return n>=r.__.length&&r.__.push({}),r.__[n]}function DS(n){return rd=1,(function(e,r){var o=bp(Wa++,2);if(o.t=e,!o.__c&&(o.__=[Dg(void 0,r),function(h){var y=o.__N?o.__N[0]:o.__[0],m=o.t(y,h);y!==m&&(o.__N=[m,o.__[1]],o.__c.setState({}))}],o.__c=Kt,!Kt.__f)){var l=function(h,y,m){if(!o.__c.__H)return!0;var _=o.__c.__H.__.filter(function(x){return!!x.__c});if(_.every(function(x){return!x.__N}))return!a||a.call(this,h,y,m);var w=o.__c.props!==h;return _.forEach(function(x){if(x.__N){var C=x.__[0];x.__=x.__N,x.__N=void 0,C!==x.__[0]&&(w=!0)}}),a&&a.call(this,h,y,m)||w};Kt.__f=!0;var a=Kt.shouldComponentUpdate,d=Kt.componentWillUpdate;Kt.componentWillUpdate=function(h,y,m){if(this.__e){var _=a;a=void 0,l(h,y,m),a=_}d&&d.call(this,h,y,m)},Kt.shouldComponentUpdate=l}return o.__N||o.__})(Dg,n)}function RS(n){return rd=5,(function(e,r){var o=bp(Wa++,7);return yw(o.__H,r)&&(o.__=e(),o.__H=r,o.__h=e),o.__})(function(){return{current:n}},[])}function LS(){for(var n;n=mw.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(Kc),n.__H.__h.forEach($h),n.__H.__h=[]}catch(e){n.__H.__h=[],Ht.__e(e,n.__v)}}Ht.__b=function(n){Kt=null,Ig&&Ig(n)},Ht.__=function(n,e){n&&e.__k&&e.__k.__m&&(n.__m=e.__k.__m),Ng&&Ng(n,e)},Ht.__r=function(n){Og&&Og(n),Wa=0;var e=(Kt=n.__c).__H;e&&(hh===Kt?(e.__h=[],Kt.__h=[],e.__.forEach(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(e.__h.forEach(Kc),e.__h.forEach($h),e.__h=[],Wa=0)),hh=Kt},Ht.diffed=function(n){jg&&jg(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(mw.push(e)!==1&&Cg===Ht.requestAnimationFrame||((Cg=Ht.requestAnimationFrame)||MS)(LS)),e.__H.__.forEach(function(r){r.u&&(r.__H=r.u),r.u=void 0})),hh=Kt=null},Ht.__c=function(n,e){e.some(function(r){try{r.__h.forEach(Kc),r.__h=r.__h.filter(function(o){return!o.__||$h(o)})}catch(o){e.some(function(l){l.__h&&(l.__h=[])}),e=[],Ht.__e(o,r.__v)}}),Tg&&Tg(n,e)},Ht.unmount=function(n){Pg&&Pg(n);var e,r=n.__c;r&&r.__H&&(r.__H.__.forEach(function(o){try{Kc(o)}catch(l){e=l}}),r.__H=void 0,e&&Ht.__e(e,r.__v))};var Ag=typeof requestAnimationFrame=="function";function MS(n){var e,r=function(){clearTimeout(o),Ag&&cancelAnimationFrame(e),setTimeout(n)},o=setTimeout(r,35);Ag&&(e=requestAnimationFrame(r))}function Kc(n){var e=Kt,r=n.__c;typeof r=="function"&&(n.__c=void 0,r()),Kt=e}function $h(n){var e=Kt;n.__c=n.__(),Kt=e}function yw(n,e){return!n||n.length!==e.length||e.some(function(r,o){return r!==n[o]})}function Dg(n,e){return typeof e=="function"?e(n):e}function US({message:n,messageCode:e,messageParams:r}){return n.replace(/\{\w+\}/gi,o=>r[o.substring(1,o.length-1)])}function Rg({option:n,onClick:e}){const{displayName:r,iconUrl:o,iconSvg:l,styleHint:a,value:d}=n,h=(function(_){const w=Object.assign({},Lt.ProviderButton);if(!_)return w;switch(_){case"google":return Object.assign(Object.assign({},w),Lt.ProviderGoogle);case"github":return Object.assign(Object.assign({},w),Lt.ProviderGitHub);case"microsoft":return Object.assign(Object.assign({},w),Lt.ProviderMicrosoft);case"apple":return Object.assign(Object.assign({},w),Lt.ProviderApple);case"otp":return Object.assign({},Lt.OtpButton);case"custom-oauth2":return Object.assign(Object.assign({},w),Lt.ProviderCustom);default:return w}})(a),y=h.color||"#000000",m=l?l.replace(/fill="currentColor"/gi,`fill="${y}"`).replace(/fill='currentColor'/gi,`fill='${y}'`).replace(/stroke="currentColor"/gi,`stroke="${y}"`).replace(/stroke='currentColor'/gi,`stroke='${y}'`):null;return mt("button",{type:"button",style:h,onClick:e,class:"dxc-option-btn"+(a?` dxc-option-${a}`:""),"aria-label":r},m?mt("span",{style:Lt.ProviderButtonIcon,"aria-hidden":"true",dangerouslySetInnerHTML:{__html:m}}):o?mt("img",{src:o,alt:"",style:Lt.ProviderButtonIcon,"aria-hidden":"true"}):null,mt("span",{style:Lt.ProviderButtonText},r))}function Lg(){return mt("div",{style:Lt.Divider},mt("div",{style:Lt.DividerLine}),mt("span",{style:Lt.DividerText},"or"),mt("div",{style:Lt.DividerLine}))}function zS({title:n,alerts:e,fields:r,options:o,submitLabel:l,cancelLabel:a,onCancel:d,onSubmit:h}){const[y,m]=DS({}),_=RS(null);(function(q,te){var fe=bp(Wa++,4);!Ht.__s&&yw(fe.__H,te)&&(fe.__=q,fe.u=te,Kt.__h.push(fe))})(()=>{var q;return(q=_.current)===null||q===void 0?void 0:q.focus()},[]);const w=Object.entries(r||{}),x=w.length>0,C=o&&o.length>0,O=new Map;if(o)for(const q of o){const te=O.get(q.name)||[];te.push(q),O.set(q.name,te)}const P=O.size>1,W=q=>{h({[q.name]:q.value})};return mt(AS,{className:"dxc-login-dlg"},mt(hs,null,mt("h3",{style:Lt.WindowHeader},n),e.map((q,te)=>mt("p",{key:te,style:Lt.Alert[q.type]},US(q))),C&&mt("div",{class:"dxc-options"},P?Array.from(O.entries()).map(([q,te],fe)=>mt(hs,{key:q},fe>0&&mt(Lg,null),te.map(G=>mt(Rg,{key:`${G.name}-${G.value}`,option:G,onClick:()=>W(G)})))):o.map(q=>mt(Rg,{key:`${q.name}-${q.value}`,option:q,onClick:()=>W(q)}))),C&&x&&mt(Lg,null),x&&mt("form",{onSubmit:q=>{q.preventDefault(),h(y)}},w.map(([q,{type:te,label:fe,placeholder:G}],Ee)=>mt("label",{style:Lt.Label,key:Ee},fe?`${fe}: `:"",mt("input",{ref:Ee===0?_:void 0,type:te,name:q,autoComplete:"on",style:Lt.Input,autoFocus:!0,placeholder:G,value:y[q]||"",onInput:ye=>{var he;const se=(function(_e,Ie){switch(_e){case"email":return Ie.toLowerCase();case"otp":return Ie.toUpperCase();default:return Ie}})(te,(he=ye.target)===null||he===void 0?void 0:he.value);let be=Object.assign(Object.assign({},y),{[q]:se});m(be),te==="otp"&&(se==null?void 0:se.trim().length)===8&&h(be)}}))))),mt("div",{style:Lt.ButtonsDiv},mt(hs,null,x&&l&&mt("button",{type:"submit",style:Lt.PrimaryButton,onClick:()=>h(y)},l),a&&mt("button",{style:Lt.Button,onClick:d},a))))}class Mg extends Na{constructor(e){super(e),this.observer=r=>this.setState({userInteraction:r}),this.state={userInteraction:void 0}}componentDidMount(){this.subscription=Gn(this.props.db.cloud.userInteraction).subscribe(this.observer)}componentWillUnmount(){this.subscription&&(this.subscription.unsubscribe(),delete this.subscription)}render(e,{userInteraction:r}){return r?mt(zS,Object.assign({},r)):null}}function au(n){const e=new WeakMap;return r=>{let o=e.get(r);return o||(o=n(r),e.set(r,o)),o}}const id=au(n=>new Cr(Un));function xd(n,e){let r=e,o=Gn(n).pipe(Wn(a=>r=a),Ek({resetOnRefCountZero:()=>Ov(1e3)}));const l=new Xt(a=>{let d=!1;const h=o.subscribe({next(y){d=!0,a.next(y)},error(y){a.error(y)},complete(){a.complete()}});return d||h.closed||a.next(r),h});return l.getValue=()=>r,l}const gw=au(n=>xd(So(()=>n.roles.where({realmId:"rlm-public"}).toArray().then(e=>{const r={};for(const o of e.slice().sort((l,a)=>(l.sortOrder||0)-(a.sortOrder||0)))r[o.name]=o;return r})),{})),vw=au(n=>xd(id(n._novip).pipe(Sn(e=>So(()=>n.transaction("r","realms","members",()=>Promise.all([n.members.where({userId:e.userId}).toArray(),n.realms.toArray(),e.userId]).then(([r,o,l])=>({selfMembers:r,realms:o,userId:l})))))),{selfMembers:[],realms:[],get userId(){return n.cloud.currentUserId}}));function FS(...n){return n.length===0?{}:n.reduce((r,o)=>{const l=Object.assign({},r);for(const[a,d]of Object.entries(o))if(a in l&&l[a]){if(l[a]==="*")continue;if(d==="*")l[a]="*";else if(Array.isArray(d)&&Array.isArray(l[a])){const h=l,y=h[a];h[a]=[...new Set([...y,...d])]}else if(typeof d=="object"&&d&&typeof l[a]=="object"){const h=l[a];for(const[y,m]of Object.entries(d))h[y]!=="*"&&(m==="*"?h[y]="*":Array.isArray(h[y])&&Array.isArray(m)&&(h[y]=[...new Set([...h[y],...m])]))}}else l[a]=o[a];return l})}const ww=au(n=>(function(e,r){let o;const l=e.pipe(Wn(a=>o=r(a)));return l.getValue=()=>o!==void 0?o:o=r(e.getValue()),l})(xd(La([vw(n._novip),gw(n._novip)]).pipe(Wn(([{selfMembers:e,realms:r,userId:o},l])=>({selfMembers:e,realms:r,userId:o,globalRoles:l}))),{selfMembers:[],realms:[],userId:Un.userId,globalRoles:{}}),({selfMembers:e,realms:r,userId:o,globalRoles:l})=>r.map(d=>{const h=e.filter(_=>_.realmId===d.realmId),y=h.map(_=>_.permissions).filter(_=>_),m=mp(h.map(_=>_.roles).filter(_=>_)).map(_=>l[_]).filter(_=>_).map(_=>_.permissions);return Object.assign(Object.assign({},d),{permissions:d.owner===o?{manage:"*"}:FS(...y,...m)})}).reduce((d,h)=>Object.assign(Object.assign({},d),{[h.realmId]:h}),{[o]:{realmId:o,owner:o,name:o,permissions:{manage:"*"}}})));class Ug{constructor(e,r,o){this.permissions=e||{},this.tableName=r,this.isOwner=o}add(...e){var r;return this.permissions.manage==="*"||!!(!((r=this.permissions.manage)===null||r===void 0)&&r.includes(this.tableName))||this.permissions.add==="*"||!!e.every(o=>{var l;return(l=this.permissions.add)===null||l===void 0?void 0:l.includes(o)})}update(...e){var r,o;if(this.isOwner||this.permissions.manage==="*"||!((r=this.permissions.manage)===null||r===void 0)&&r.includes(this.tableName))return!0;if(this.permissions.update==="*")return e.every(a=>a!=="owner");const l=(o=this.permissions.update)===null||o===void 0?void 0:o[this.tableName];return l==="*"?e.every(a=>a!=="owner"):e.every(a=>l==null?void 0:l.some(d=>d===a||d==="*"&&a!=="owner"))}delete(){var e;return!(!this.isOwner&&this.permissions.manage!=="*")||!!(!((e=this.permissions.manage)===null||e===void 0)&&e.includes(this.tableName))}}const BS=au(n=>{const e=id(n._novip).pipe(Sn(l=>So(()=>n.members.where({email:l.email||""}).toArray()))),r=ww(n._novip),o=vw(n._novip);return xd(La([e,o,r]).pipe(Wn(([l,a,d])=>{const h=(_,w)=>Object.assign(Object.assign({},_),{[w.id]:Object.assign(Object.assign({},w),{realm:d[w.realmId]})}),y=l.reduce(h,{}),m=a.selfMembers.reduce(h,y);return Object.values(m).filter(_=>!_.accepted).map(_=>Object.assign(Object.assign({},_),{accept(){return Pe(this,void 0,void 0,function*(){yield n.members.update(_.id,{accepted:new Date})})},reject(){return Pe(this,void 0,void 0,function*(){yield n.members.update(_.id,{rejected:new Date})})}}))})),[])});function $S(n){return e=>{var r;const o=e.doc;if(!o)throw new Error("Internal error: DexieYProvider.createYHandler called without a doc. This is unexpected.");const{parentTable:l}=o.meta||{};if(!(!((r=n.cloud.schema)===null||r===void 0)&&r[l].markedForSync))return;let a;Object.defineProperty(e,"awareness",{get:()=>a||(a=(function(d,h,y){const{parentTable:m,parentId:_,parentProp:w,updatesTable:x}=h.meta,C=new wx(h),O=nw(h);return C.on("update",({added:P,updated:W,removed:q},te)=>{const fe=P.concat(W).concat(q),G=d.cloud.currentUser.value;if(te!=="server"&&G.isLoggedIn&&!Ka(d)){const Ee=bx(C,fe);d.messageProducer.next({type:"aware",table:m,prop:w,k:h.meta.parentId,u:Ee}),y.destroyed&&d.messageProducer.next({type:"doc-close",table:m,prop:w,k:h.meta.parentId})}}),C.on("destroy",()=>{O0(C,[h.clientID],"provider destroyed")}),Pe(this,void 0,void 0,function*(){if(y.destroyed)return;let P=!1,W=1;const q=La([d.cloud.webSocketStatus,O.pipe(Pv(null))]).subscribe(([fe])=>{if(y.destroyed)return;P=fe==="connected";const G=d.cloud.currentUser.value;fe==="connected"&&G.isLoggedIn&&!Ka(d)&&(++W,te().catch(Ee=>{}))});function te(){return Pe(this,void 0,void 0,function*(){const fe=W,G=d.table(x),Ee=d.$syncState,[ye,he]=yield d.transaction("r",Ee,G,()=>Pe(this,void 0,void 0,function*(){const _e=yield G.get(Oo),Ie=yield Ee.get("syncState");return[(_e==null?void 0:_e.receivedUntil)||0,(Ie==null?void 0:Ie.yServerRevision)||(Ie==null?void 0:Ie.serverRevision)]}));if(y.destroyed||W!==fe||!P)return;const se={type:"doc-open",table:m,prop:w,k:_,serverRev:he},be=yield G.where("i").between(ye,1/0,!1).filter(_e=>ad(_e.k,_)===0&&!(1&(_e.f||0))).toArray();if(!y.destroyed&&W===fe&&P){if(be.length>0){const _e=Gc(be.map(ce=>ce.u)),Ie=i0(_e);se.sv=Ie}d.messageProducer.next(se)}})}y.addCleanupHandler(q)}),C})(n,o,e),tw.set(o,a),a)})}}function KS(n){const e=typeof window<"u"?window.location.href:"";if(!e)return null;const r=new URL(e).searchParams.get("dxc-auth");if(!r)return null;let o;try{const y=(function(m){const _=(m+"=".repeat((4-m.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/");return atob(_)})(r);o=JSON.parse(y)}catch{return null}const{code:l,provider:a,state:d,error:h}=o;if(h)throw h.toLowerCase().includes("access_denied")||h.toLowerCase().includes("access denied")?new ji("access_denied",a,h):h.toLowerCase().includes("email")&&h.toLowerCase().includes("verif")?new ji("email_not_verified",a,h):new ji("provider_error",a,h);return l&&a&&d?{code:l,provider:a,state:d}:null}function zg(){var n;if(typeof window>"u"||!(!((n=window.history)===null||n===void 0)&&n.replaceState))return;const e=new URL(window.location.href);if(!e.searchParams.has("dxc-auth"))return;e.searchParams.delete("dxc-auth");const r=e.pathname+(e.searchParams.toString()?`?${e.searchParams.toString()}`:"")+e.hash;window.history.replaceState(null,"",r)}function ls(n){return"rlm~"+n}const VS={nameSuffix:!0};function Kh(n){const e=n.name,r=id(n),o=[];let l=!1,a=null,d=null;n.on("ready",w=>Pe(this,void 0,void 0,function*(){try{yield(function(x){return Pe(this,void 0,void 0,function*(){var C,O,P,W,q,te,fe;h=!1;const G=Ci(x);typeof window<"u"&&typeof document<"u"&&(!((C=G.cloud.options)===null||C===void 0)&&C.customLoginGui||o.push((function(ce){let Le=!1;const Ve=document.createElement("div");return document.body?(document.body.appendChild(Ve),Eg(mt(Mg,{db:ce.vip}),Ve)):addEventListener("DOMContentLoaded",()=>{Le||(document.body.appendChild(Ve),Eg(mt(Mg,{db:ce.vip}),Ve))}),{unsubscribe(){try{Ve.remove()}catch{}Le=!0},get closed(){return Le}}})(x))),G.cloud.isServiceWorkerDB||o.push((function(ce){let Le=ce.cloud.webSocketStatus.value;const Ve=ce.cloud.webSocketStatus.pipe(Sn($e=>{const ke=Le;Le=$e;const ie=Ai($e);switch($e){case"disconnected":return Pa.value?ie.pipe(Fy(500)):ie;case"connecting":return ke==="not-started"||ke==="error"?ie:ie.pipe(Fy(4e3));default:return ie}}));return La([Ve,ce.syncStateChangedEvent.pipe(Pv({phase:"initial"})),id(ce.dx._novip),Uh]).pipe(Wn(([$e,ke,ie,K])=>{var re;if(!((re=ie.license)===null||re===void 0)&&re.status&&ie.license.status!=="ok")return{phase:"offline",status:"offline",license:ie.license.status};let{phase:le,error:N,progress:Y}=ke,ge=$e;return le==="error"&&(ge="error"),$e==="not-started"&&(le!=="pushing"&&le!=="pulling"||(ge="connecting")),ce.cloud.syncState.value.phase!=="error"||ke.phase!=="pushing"&&ke.phase!=="pulling"||(ge="connecting"),K||(ge="disconnected"),{phase:le,error:N,progress:Y,status:fl?ge:"offline",license:"ok"}}))})(G).subscribe(x.cloud.syncState)),o.push(G.syncCompleteEvent.subscribe(m)),G.tables.every(ce=>ce.core)||(function(){throw new st.SchemaError("Version increment needed to allow dexie-cloud change tracking")})();const Ee="serviceWorker"in navigator?yield navigator.serviceWorker.getRegistrations():[],[ye,he]=yield G.transaction("rw",G.$syncState,()=>Pe(this,void 0,void 0,function*(){var ce,Le;const{options:Ve,schema:$e}=G.cloud,[ke,ie,K]=yield Promise.all([G.getOptions(),G.getSchema(),G.getPersistedSyncState()]);if(l){if(!ke||JSON.stringify(ke)!==JSON.stringify(Ve)){if(!Ve)throw new Error("Internal error");const re=Object.assign({},Ve);delete re.fetchTokens,delete re.awarenessProtocol,yield G.$syncState.put(re,"options")}}else G.cloud.options=ke||null;if(!((ce=G.cloud.options)===null||ce===void 0)&&ce.tryUseServiceWorker&&"serviceWorker"in navigator&&Ee.length>0&&!uS?G.cloud.usingServiceWorker=!0:(!((Le=G.cloud.options)===null||Le===void 0)&&Le.tryUseServiceWorker&&G.cloud.isServiceWorkerDB,G.cloud.usingServiceWorker=!1),fh($e,G.cloud.options),fh(ie,G.cloud.options),$e){if(!ie||JSON.stringify(ie)!==JSON.stringify($e)){const re=ie||{};for(const[le,N]of Object.entries($e)){const Y=re[le];Y?(Y.markedForSync=N.markedForSync,N.deleted=Y.deleted,Y.generatedGlobalId=N.generatedGlobalId):re[le]=Object.assign({},N)}yield G.$syncState.put(re,"schema"),Object.assign($e,re)}}else G.cloud.schema=ie||null;return[K==null?void 0:K.initiallySynced,K==null?void 0:K.realms]}));if(ye&&G.setInitiallySynced(!0),(function(ce){var Le,Ve;for(const $e of ce.tables)if(!((Ve=(Le=ce.cloud.schema)===null||Le===void 0?void 0:Le[$e.name])===null||Ve===void 0)&&Ve.markedForSync){if($e.schema.primKey.auto)throw new st.SchemaError(`Table ${$e.name} is both autoIncremented and synced. Use db.cloud.configure({unsyncedTables: [${JSON.stringify($e.name)}]}) to blacklist it from sync`);if(!$e.schema.primKey.keyPath)throw new st.SchemaError(`Table ${$e.name} cannot be both synced and outbound. Use db.cloud.configure({unsyncedTables: [${JSON.stringify($e.name)}]}) to blacklist it from sync`)}})(G),y(),!G.cloud.isServiceWorkerDB){o.push(So(()=>G.getCurrentUser()).subscribe(r)),o.push(So(()=>G.getPersistedSyncState()).subscribe(G.cloud.persistedSyncState)),yield cs(La([r.pipe(By(1),sl(1)),G.cloud.persistedSyncState.pipe(By(1),sl(1))]));const ce=$S(G);En.on.new.subscribe(ce),G.dx.once("close",()=>{En.on.new.unsubscribe(ce)})}let se=!1;const be=yield G.getCurrentUser();if(a&&!G.cloud.isServiceWorkerDB){const{code:ce,provider:Le}=a;a=null;try{se=yield Oc(G,{oauthCode:ce,provider:Le})}catch{}}const _e=(O=G.cloud.options)===null||O===void 0?void 0:O.requireAuth;_e&&(G.cloud.isServiceWorkerDB?yield cs(r.pipe(ir(ce=>!!ce.isLoggedIn),sl(1))):typeof _e=="object"?(!be.isLoggedIn||_e.userId&&be.userId!==_e.userId||_e.email&&be.email!==_e.email)&&(se=yield Oc(G,_e)):be.isLoggedIn||(se=yield Oc(G))),!be.isLoggedIn||he&&he.includes(be.userId)||(se=!0),d&&d.stop(),d=null,y();const Ie=((P=G.cloud.options)===null||P===void 0?void 0:P.databaseUrl)&&(!ye||se);Ie&&(yield(function(ce,Le,Ve){return Pe(this,void 0,void 0,function*(){yield X0(ce,q0,()=>bd(ce,Le,Ve,{isInitialSync:!0}))})})(G,G.cloud.options,G.cloud.schema),G.setInitiallySynced(!0)),y(),G.cloud.usingServiceWorker&&(!((W=G.cloud.options)===null||W===void 0)&&W.databaseUrl)?(Ie||T0(G,"push").catch(()=>{}),(function(ce){return Pe(this,void 0,void 0,function*(){var Le;try{const{periodicSync:Ve}=yield navigator.serviceWorker.ready;if(Ve)try{yield Ve.register(`dexie-cloud:${ce.name}`,(Le=ce.cloud.options)===null||Le===void 0?void 0:Le.periodicSync)}catch{}}catch{}})})(G).catch(()=>{})):!((q=G.cloud.options)===null||q===void 0)&&q.databaseUrl&&G.cloud.schema&&!G.cloud.isServiceWorkerDB&&(d=OS(G,G.cloud.options,G.cloud.schema),d.start(),Ie||Ti(G,"push")),y(),G.cloud.isServiceWorkerDB||o.push(qr(self,"online").subscribe(()=>{G.syncStateChangedEvent.next({phase:"not-in-sync"}),Ka(G)||Ti(G,"push")}),qr(self,"offline").subscribe(()=>{G.syncStateChangedEvent.next({phase:"offline"})})),!(!((te=G.cloud.options)===null||te===void 0)&&te.databaseUrl)||!((fe=G.cloud.options)===null||fe===void 0)&&fe.disableWebSocket||cS||o.push((function(ce){var Le;if(!(!((Le=ce.cloud.options)===null||Le===void 0)&&Le.databaseUrl))throw new Error("No database URL to connect WebSocket to");const Ve=ce.messageConsumer.readyToServe.pipe(ir(ke=>ke),Sn(()=>ce.getPersistedSyncState()),ir(ke=>ke&&ke.serverRevision),Sn(ke=>Pe(this,void 0,void 0,function*(){return{type:"ready",rev:ke.serverRevision,realmSetHash:yield Ah(ke)}}))),$e=fd(Ve,ce.messageProducer);return(function ke(){return ce.cloud.persistedSyncState.pipe(ir(ie=>ie==null?void 0:ie.serverRevision),sl(1),Sn(ie=>ce.cloud.currentUser.pipe(Wn(K=>[K,ie]))),Sn(([ie,K])=>Uh.pipe(Wn(re=>[re?ie:null,K]))),Sn(([ie,K])=>ie!=null&&ie.isLoggedIn&&!(K!=null&&K.realms.includes(ie.userId))?ce.cloud.persistedSyncState.pipe(ir(re=>(re==null?void 0:re.realms.includes(ie.userId))||!1),sl(1),Wn(re=>[ie,re])):new Cr([ie,K])),Sn(ie=>Pe(this,[ie],void 0,function*([K,re]){return[K,yield Ah(re)]})),Tv(([ie,K],[re,le])=>ie===re&&K===le),Sn(([ie,K])=>{var re;return!((re=ce.cloud.persistedSyncState)===null||re===void 0)&&re.value?ie?new xS(ce,ce.cloud.persistedSyncState.value.serverRevision,ce.cloud.persistedSyncState.value.yServerRevision,K,ce.cloud.persistedSyncState.value.clientIdentity,$e,ce.cloud.webSocketStatus,ie):Gn([]):ke()}),_h(ie=>(ie==null?void 0:ie.name)==="TokenExpiredError"?Ai(!0).pipe(Sn(()=>Pe(this,void 0,void 0,function*(){const K=yield ce.getCurrentUser(),re=yield wd(ce.cloud.options.databaseUrl,K);yield ce.table("$logins").update(K.userId,{accessToken:re.accessToken,accessTokenExpiration:re.accessTokenExpiration,claims:re.claims,license:re.license,data:re.data})})),Sn(()=>ke())):Ly(()=>ie)),_h(ie=>(ce.cloud.webSocketStatus.next("error"),ie instanceof CS?Ly(()=>ie):Gn(IS()).pipe(Sn(()=>ke())))))})().subscribe({next:ke=>{ke&&ce.messageConsumer.enqueue(ke)},error:ke=>{},complete:()=>{}})})(G))})})(w)}catch{}}),!0);let h=!1;function y(){if(h)throw new st.DatabaseClosedError}n.once("close",()=>{o.forEach(w=>w.unsubscribe()),o.splice(0,o.length),h=!0,d&&d.stop(),d=null,r.next(Un)});const m=new ys;var _;n.cloud={version:"4.3.2",options:Object.assign({},VS),schema:null,get currentUserId(){return r.value.userId||Un.userId},currentUser:r,syncState:new Cr({phase:"initial",status:"not-started"}),events:{syncComplete:m},persistedSyncState:new Cr(void 0),userInteraction:new Cr(void 0),webSocketStatus:new Cr("not-started"),login(w){return Pe(this,void 0,void 0,function*(){const x=Ci(n);yield x.cloud.sync(),yield Oc(x,w)})},invites:BS(n),roles:gw(n),configure(w){if(w=n.cloud.options=Object.assign(Object.assign({},n.cloud.options),w),l=!0,w.databaseUrl&&w.nameSuffix&&(n.name=`${e}-${(function(x){const C=new URL(x);return C.pathname==="/"?C.hostname.split(".")[0]:C.pathname.split("/")[1]})(w.databaseUrl)}`,Ci(n).reconfigure()),fh(n.cloud.schema,n.cloud.options),typeof window<"u"&&window.location)try{const x=KS();x&&(zg(),a={code:x.code,provider:x.provider})}catch{zg()}},logout(){return Pe(this,arguments,void 0,function*({force:w}={}){w?yield Th(Ci(n),{deleteUnsyncedData:!0}):yield N0(Ci(n))})},sync(){return Pe(this,arguments,void 0,function*({wait:w,purpose:x}={wait:!0,purpose:"push"}){var C;w===void 0&&(w=!0);const O=Ci(n);if((((C=O.cloud.currentUser.value.license)===null||C===void 0?void 0:C.status)||"ok")!=="ok"&&(yield vd(O)),x==="pull"){const P=O.cloud.persistedSyncState.value;if(Ti(O,x),w){const W=yield cs(O.cloud.persistedSyncState.pipe(ir(q=>(q==null?void 0:q.timestamp)!=null&&(!P||q.timestamp>P.timestamp))));if(W!=null&&W.error)throw new Error("Sync error: "+W.error)}}else if(yield bg(O)){const P=O.cloud.persistedSyncState.value;Ti(O,x),w&&(yield cs(Gn(So(()=>Pe(this,void 0,void 0,function*(){const W=yield bg(O),q=yield O.getPersistedSyncState();if((q==null?void 0:q.timestamp)!==(P==null?void 0:P.timestamp)&&(q!=null&&q.error))throw new Error("Sync error: "+q.error);return W}))).pipe(ir(W=>!W))))}})},permissions:(w,x)=>(function(C,O,P){if(!O)throw new TypeError("Cannot check permissions of undefined or null. A Dexie Cloud object with realmId and owner expected.");const{owner:W,realmId:q}=O;if(!P){if(typeof O.table!="function")throw new TypeError("Missing 'table' argument to permissions and table could not be extracted from entity");P=O.table()}const te=ww(C),fe=Ee=>{const ye=Ee[q||C.cloud.currentUserId];return ye?new Ug(ye.permissions,P,q===void 0||q===C.cloud.currentUserId||W===C.cloud.currentUserId):new Ug({},P,!W||W===C.cloud.currentUserId)},G=te.pipe(Wn(fe));return G.getValue=()=>fe(te.getValue()),G})(n._novip,w,x)},n.Version.prototype._parseStoresSpec=st.override(n.Version.prototype._parseStoresSpec,w=>wS(w,n)),n.Table.prototype.newId=function({colocateWith:w}={}){const x=w&&w.substr(w.length-3);return J0(n.cloud.schema[this.name].idPrefix||"",x)},n.Table.prototype.idPrefix=function(){var w,x;return((x=(w=this.db.cloud.schema)===null||w===void 0?void 0:w[this.name])===null||x===void 0?void 0:x.idPrefix)||""},n.use(vS({currentUserObservable:n.cloud.currentUser,db:Ci(n)})),n.use((_=Ci(n),{stack:"dbcore",name:"implicitPropSetterMiddleware",level:1,create:w=>Object.assign(Object.assign({},w),{table:x=>{const C=w.table(x);return Object.assign(Object.assign({},C),{mutate:O=>{var P,W,q,te,fe,G;const Ee=O.trans;if(Ee.disableChangeTracking)return C.mutate(O);const ye=(W=(P=Ee.currentUser)===null||P===void 0?void 0:P.userId)!==null&&W!==void 0?W:Un.userId;if(!((te=(q=_.cloud.schema)===null||q===void 0?void 0:q[x])===null||te===void 0)&&te.markedForSync&&(O.type==="add"||O.type==="put")){if(x==="members")for(const he of O.values)typeof he.email=="string"&&(he.email=he.email.trim().toLowerCase());for(const he of O.values){he.owner||(he.owner=ye),he.realmId||(he.realmId=ye);const se=(G=(fe=C.schema.primaryKey).extractKey)===null||G===void 0?void 0:G.call(fe,he);typeof se=="string"&&se[0]==="#"&&O.type==="put"&&(delete O.criteria,delete O.changeSpec,O.upsert||delete O.updates,he.$ts=Date.now())}}return C.mutate(O)}})}})})),n.use(mS(Ci(n)))}Kh.version="4.3.2",st.Cloud=Kh;class WS extends Wb{constructor(){super(...arguments);_o(this,"id");_o(this,"realmId");_o(this,"owner");_o(this,"title")}isSharable(){return this.realmId===ls(this.id)}async makeSharable(){const r=ls(this.id),o=this.db;return await o.transaction("rw",[o.todoLists,o.todoItems,o.realms],()=>{o.realms.upsert(r,{name:this.title,represents:"a to-do list"}),o.todoLists.update(this.id,{realmId:r}),o.todoItems.where({todoListId:this.id}).modify({realmId:r})}),r}async makePrivate(){const r=ls(this.id),o=this.db;await o.transaction("rw",[o.todoLists,o.todoItems,o.members,o.realms],async()=>{await o.todoItems.where({realmId:r,todoListId:this.id}).modify({realmId:o.cloud.currentUserId,owner:o.cloud.currentUserId}),await o.todoLists.update(this.id,{realmId:this.db.cloud.currentUserId,owner:this.db.cloud.currentUserId}),await o.members.where("realmId").equals(r).delete(),await o.realms.delete(r)})}async shareWith(r,o,l,a){const{db:d}=this;await d.transaction("rw",[d.members,d.todoLists,d.todoItems,d.realms],async()=>{const h=await this.makeSharable();await d.members.add({realmId:h,name:r,email:o,invite:l,roles:a})})}async unshareWith(r){await this.db.members.delete(r.id)}async leaveList(){const{db:r}=this;await r.members.where({realmId:ls(this.id),userId:r.cloud.currentUserId}).delete()}async deleteList(){const{db:r}=this;await r.transaction("rw",[r.todoLists,r.todoItems,r.members,r.realms],()=>{r.todoItems.where({todoListId:this.id,realmId:ls(this.id)}).delete(),r.todoItems.where({todoListId:this.id,realmId:r.cloud.currentUserId}).delete(),r.todoLists.delete(this.id);const o=ls(this.id);r.realms.delete(o)})}async changeOwner(r){const{db:o}=this,l=ls(this.id);if(!r)throw new Error("Cannot give ownership to user before invite is accepted.");return o.transaction("rw",o.todoLists,o.members,o.realms,()=>{o.members.where({realmId:l,userId:this.owner}).modify({roles:["manager"]}),o.members.where({realmId:l}).modify({owner:r}),o.todoLists.where({realmId:l,id:this.id}).modify({owner:r}),o.realms.update(l,{owner:r})})}async changeMemberRole(r,o){await this.db.members.update(r.id,{permissions:{},roles:[o]})}}class HS extends st{constructor(){super("TodoDBCloud2",{addons:[Kh],cache:"immutable"});_o(this,"todoLists");_o(this,"todoItems");_o(this,"openCloseStates");this.version(15).stores({todoLists:"@id, [realmId+id]",todoItems:"@id, realmId, [todoListId+realmId]",openCloseStates:""}),this.todoLists.mapToClass(WS),this.cloud.configure({unsyncedTables:["openCloseStates"],databaseUrl:"https://z0lesejpr.dexie.cloud",tryUseServiceWorker:!0,requireAuth:!1})}}const at=new HS;/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),GS=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,o)=>o?o.toUpperCase():r.toLowerCase()),Fg=n=>{const e=GS(n);return e.charAt(0).toUpperCase()+e.slice(1)},bw=(...n)=>n.filter((e,r,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===r).join(" ").trim(),YS=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var QS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=tt.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:l="",children:a,iconNode:d,...h},y)=>tt.createElement("svg",{ref:y,...QS,width:e,height:e,stroke:n,strokeWidth:o?Number(r)*24/Number(e):r,className:bw("lucide",l),...!a&&!YS(h)&&{"aria-hidden":"true"},...h},[...d.map(([m,_])=>tt.createElement(m,_)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=(n,e)=>{const r=tt.forwardRef(({className:o,...l},a)=>tt.createElement(JS,{ref:a,iconNode:e,className:bw(`lucide-${qS(Fg(n))}`,`lucide-${n}`,o),...l}));return r.displayName=Fg(n),r};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Bg=en("chevron-down",XS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],eE=en("circle-alert",ZS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=[["path",{d:"M13 16a3 3 0 0 1 0 6H7a5 5 0 1 1 4.9-6z",key:"ie2ih4"}],["path",{d:"M18.376 14.512a6 6 0 0 0 3.461-4.127c.148-.625-.659-.97-1.248-.714a4 4 0 0 1-5.259-5.26c.255-.589-.09-1.395-.716-1.248a6 6 0 0 0-4.594 5.36",key:"zwnc1e"}]],nE=en("cloud-moon",tE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rE=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],$g=en("cloud",rE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],oE=en("crown",iE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sE=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],lE=en("list",sE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],uE=en("loader-circle",aE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Kg=en("log-out",cE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Vg=en("mail",dE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],hE=en("menu",fE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],_w=en("plus",pE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],yE=en("rotate-ccw",mE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],vE=en("share-2",gE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wE=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Sd=en("trash-2",wE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],_E=en("user-plus",bE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],kw=en("user",kE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],SE=en("users",xE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EE=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],CE=en("wifi-off",EE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IE=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],OE=en("wifi",IE);function xw(n){var e,r,o="";if(typeof n=="string"||typeof n=="number")o+=n;else if(typeof n=="object")if(Array.isArray(n)){var l=n.length;for(e=0;e<l;e++)n[e]&&(r=xw(n[e]))&&(o&&(o+=" "),o+=r)}else for(r in n)n[r]&&(o&&(o+=" "),o+=r);return o}function Sw(){for(var n,e,r=0,o="",l=arguments.length;r<l;r++)(n=arguments[r])&&(e=xw(n))&&(o&&(o+=" "),o+=e);return o}const Wg=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,Hg=Sw,jE=(n,e)=>r=>{var o;if((e==null?void 0:e.variants)==null)return Hg(n,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:l,defaultVariants:a}=e,d=Object.keys(l).map(m=>{const _=r==null?void 0:r[m],w=a==null?void 0:a[m];if(_===null)return null;const x=Wg(_)||Wg(w);return l[m][x]}),h=r&&Object.entries(r).reduce((m,_)=>{let[w,x]=_;return x===void 0||(m[w]=x),m},{}),y=e==null||(o=e.compoundVariants)===null||o===void 0?void 0:o.reduce((m,_)=>{let{class:w,className:x,...C}=_;return Object.entries(C).every(O=>{let[P,W]=O;return Array.isArray(W)?W.includes({...a,...h}[P]):{...a,...h}[P]===W})?[...m,w,x]:m},[]);return Hg(n,d,y,r==null?void 0:r.class,r==null?void 0:r.className)},TE=(n,e)=>{const r=new Array(n.length+e.length);for(let o=0;o<n.length;o++)r[o]=n[o];for(let o=0;o<e.length;o++)r[n.length+o]=e[o];return r},PE=(n,e)=>({classGroupId:n,validator:e}),Ew=(n=new Map,e=null,r)=>({nextPart:n,validators:e,classGroupId:r}),od="-",qg=[],NE="arbitrary..",AE=n=>{const e=RE(n),{conflictingClassGroups:r,conflictingClassGroupModifiers:o}=n;return{getClassGroupId:d=>{if(d.startsWith("[")&&d.endsWith("]"))return DE(d);const h=d.split(od),y=h[0]===""&&h.length>1?1:0;return Cw(h,y,e)},getConflictingClassGroupIds:(d,h)=>{if(h){const y=o[d],m=r[d];return y?m?TE(m,y):y:m||qg}return r[d]||qg}}},Cw=(n,e,r)=>{if(n.length-e===0)return r.classGroupId;const l=n[e],a=r.nextPart.get(l);if(a){const m=Cw(n,e+1,a);if(m)return m}const d=r.validators;if(d===null)return;const h=e===0?n.join(od):n.slice(e).join(od),y=d.length;for(let m=0;m<y;m++){const _=d[m];if(_.validator(h))return _.classGroupId}},DE=n=>n.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=n.slice(1,-1),r=e.indexOf(":"),o=e.slice(0,r);return o?NE+o:void 0})(),RE=n=>{const{theme:e,classGroups:r}=n;return LE(r,e)},LE=(n,e)=>{const r=Ew();for(const o in n){const l=n[o];_p(l,r,o,e)}return r},_p=(n,e,r,o)=>{const l=n.length;for(let a=0;a<l;a++){const d=n[a];ME(d,e,r,o)}},ME=(n,e,r,o)=>{if(typeof n=="string"){UE(n,e,r);return}if(typeof n=="function"){zE(n,e,r,o);return}FE(n,e,r,o)},UE=(n,e,r)=>{const o=n===""?e:Iw(e,n);o.classGroupId=r},zE=(n,e,r,o)=>{if(BE(n)){_p(n(o),e,r,o);return}e.validators===null&&(e.validators=[]),e.validators.push(PE(r,n))},FE=(n,e,r,o)=>{const l=Object.entries(n),a=l.length;for(let d=0;d<a;d++){const[h,y]=l[d];_p(y,Iw(e,h),r,o)}},Iw=(n,e)=>{let r=n;const o=e.split(od),l=o.length;for(let a=0;a<l;a++){const d=o[a];let h=r.nextPart.get(d);h||(h=Ew(),r.nextPart.set(d,h)),r=h}return r},BE=n=>"isThemeGetter"in n&&n.isThemeGetter===!0,$E=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,r=Object.create(null),o=Object.create(null);const l=(a,d)=>{r[a]=d,e++,e>n&&(e=0,o=r,r=Object.create(null))};return{get(a){let d=r[a];if(d!==void 0)return d;if((d=o[a])!==void 0)return l(a,d),d},set(a,d){a in r?r[a]=d:l(a,d)}}},Vh="!",Gg=":",KE=[],Yg=(n,e,r,o,l)=>({modifiers:n,hasImportantModifier:e,baseClassName:r,maybePostfixModifierPosition:o,isExternal:l}),VE=n=>{const{prefix:e,experimentalParseClassName:r}=n;let o=l=>{const a=[];let d=0,h=0,y=0,m;const _=l.length;for(let P=0;P<_;P++){const W=l[P];if(d===0&&h===0){if(W===Gg){a.push(l.slice(y,P)),y=P+1;continue}if(W==="/"){m=P;continue}}W==="["?d++:W==="]"?d--:W==="("?h++:W===")"&&h--}const w=a.length===0?l:l.slice(y);let x=w,C=!1;w.endsWith(Vh)?(x=w.slice(0,-1),C=!0):w.startsWith(Vh)&&(x=w.slice(1),C=!0);const O=m&&m>y?m-y:void 0;return Yg(a,C,x,O)};if(e){const l=e+Gg,a=o;o=d=>d.startsWith(l)?a(d.slice(l.length)):Yg(KE,!1,d,void 0,!0)}if(r){const l=o;o=a=>r({className:a,parseClassName:l})}return o},WE=n=>{const e=new Map;return n.orderSensitiveModifiers.forEach((r,o)=>{e.set(r,1e6+o)}),r=>{const o=[];let l=[];for(let a=0;a<r.length;a++){const d=r[a],h=d[0]==="[",y=e.has(d);h||y?(l.length>0&&(l.sort(),o.push(...l),l=[]),o.push(d)):l.push(d)}return l.length>0&&(l.sort(),o.push(...l)),o}},HE=n=>({cache:$E(n.cacheSize),parseClassName:VE(n),sortModifiers:WE(n),...AE(n)}),qE=/\s+/,GE=(n,e)=>{const{parseClassName:r,getClassGroupId:o,getConflictingClassGroupIds:l,sortModifiers:a}=e,d=[],h=n.trim().split(qE);let y="";for(let m=h.length-1;m>=0;m-=1){const _=h[m],{isExternal:w,modifiers:x,hasImportantModifier:C,baseClassName:O,maybePostfixModifierPosition:P}=r(_);if(w){y=_+(y.length>0?" "+y:y);continue}let W=!!P,q=o(W?O.substring(0,P):O);if(!q){if(!W){y=_+(y.length>0?" "+y:y);continue}if(q=o(O),!q){y=_+(y.length>0?" "+y:y);continue}W=!1}const te=x.length===0?"":x.length===1?x[0]:a(x).join(":"),fe=C?te+Vh:te,G=fe+q;if(d.indexOf(G)>-1)continue;d.push(G);const Ee=l(q,W);for(let ye=0;ye<Ee.length;++ye){const he=Ee[ye];d.push(fe+he)}y=_+(y.length>0?" "+y:y)}return y},YE=(...n)=>{let e=0,r,o,l="";for(;e<n.length;)(r=n[e++])&&(o=Ow(r))&&(l&&(l+=" "),l+=o);return l},Ow=n=>{if(typeof n=="string")return n;let e,r="";for(let o=0;o<n.length;o++)n[o]&&(e=Ow(n[o]))&&(r&&(r+=" "),r+=e);return r},QE=(n,...e)=>{let r,o,l,a;const d=y=>{const m=e.reduce((_,w)=>w(_),n());return r=HE(m),o=r.cache.get,l=r.cache.set,a=h,h(y)},h=y=>{const m=o(y);if(m)return m;const _=GE(y,r);return l(y,_),_};return a=d,(...y)=>a(YE(...y))},JE=[],Qt=n=>{const e=r=>r[n]||JE;return e.isThemeGetter=!0,e},jw=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Tw=/^\((?:(\w[\w-]*):)?(.+)\)$/i,XE=/^\d+\/\d+$/,ZE=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,eC=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,tC=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,nC=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,rC=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,il=n=>XE.test(n),ot=n=>!!n&&!Number.isNaN(Number(n)),ko=n=>!!n&&Number.isInteger(Number(n)),ph=n=>n.endsWith("%")&&ot(n.slice(0,-1)),Oi=n=>ZE.test(n),iC=()=>!0,oC=n=>eC.test(n)&&!tC.test(n),Pw=()=>!1,sC=n=>nC.test(n),lC=n=>rC.test(n),aC=n=>!Ue(n)&&!ze(n),uC=n=>Tl(n,Dw,Pw),Ue=n=>jw.test(n),as=n=>Tl(n,Rw,oC),mh=n=>Tl(n,pC,ot),Qg=n=>Tl(n,Nw,Pw),cC=n=>Tl(n,Aw,lC),Ac=n=>Tl(n,Lw,sC),ze=n=>Tw.test(n),Ea=n=>Pl(n,Rw),dC=n=>Pl(n,mC),Jg=n=>Pl(n,Nw),fC=n=>Pl(n,Dw),hC=n=>Pl(n,Aw),Dc=n=>Pl(n,Lw,!0),Tl=(n,e,r)=>{const o=jw.exec(n);return o?o[1]?e(o[1]):r(o[2]):!1},Pl=(n,e,r=!1)=>{const o=Tw.exec(n);return o?o[1]?e(o[1]):r:!1},Nw=n=>n==="position"||n==="percentage",Aw=n=>n==="image"||n==="url",Dw=n=>n==="length"||n==="size"||n==="bg-size",Rw=n=>n==="length",pC=n=>n==="number",mC=n=>n==="family-name",Lw=n=>n==="shadow",yC=()=>{const n=Qt("color"),e=Qt("font"),r=Qt("text"),o=Qt("font-weight"),l=Qt("tracking"),a=Qt("leading"),d=Qt("breakpoint"),h=Qt("container"),y=Qt("spacing"),m=Qt("radius"),_=Qt("shadow"),w=Qt("inset-shadow"),x=Qt("text-shadow"),C=Qt("drop-shadow"),O=Qt("blur"),P=Qt("perspective"),W=Qt("aspect"),q=Qt("ease"),te=Qt("animate"),fe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],G=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],Ee=()=>[...G(),ze,Ue],ye=()=>["auto","hidden","clip","visible","scroll"],he=()=>["auto","contain","none"],se=()=>[ze,Ue,y],be=()=>[il,"full","auto",...se()],_e=()=>[ko,"none","subgrid",ze,Ue],Ie=()=>["auto",{span:["full",ko,ze,Ue]},ko,ze,Ue],ce=()=>[ko,"auto",ze,Ue],Le=()=>["auto","min","max","fr",ze,Ue],Ve=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],$e=()=>["start","end","center","stretch","center-safe","end-safe"],ke=()=>["auto",...se()],ie=()=>[il,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...se()],K=()=>[n,ze,Ue],re=()=>[...G(),Jg,Qg,{position:[ze,Ue]}],le=()=>["no-repeat",{repeat:["","x","y","space","round"]}],N=()=>["auto","cover","contain",fC,uC,{size:[ze,Ue]}],Y=()=>[ph,Ea,as],ge=()=>["","none","full",m,ze,Ue],Te=()=>["",ot,Ea,as],Ge=()=>["solid","dashed","dotted","double"],We=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Re=()=>[ot,ph,Jg,Qg],Ye=()=>["","none",O,ze,Ue],et=()=>["none",ot,ze,Ue],pe=()=>["none",ot,ze,Ue],It=()=>[ot,ze,Ue],He=()=>[il,"full",...se()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Oi],breakpoint:[Oi],color:[iC],container:[Oi],"drop-shadow":[Oi],ease:["in","out","in-out"],font:[aC],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Oi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Oi],shadow:[Oi],spacing:["px",ot],text:[Oi],"text-shadow":[Oi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",il,Ue,ze,W]}],container:["container"],columns:[{columns:[ot,Ue,ze,h]}],"break-after":[{"break-after":fe()}],"break-before":[{"break-before":fe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:Ee()}],overflow:[{overflow:ye()}],"overflow-x":[{"overflow-x":ye()}],"overflow-y":[{"overflow-y":ye()}],overscroll:[{overscroll:he()}],"overscroll-x":[{"overscroll-x":he()}],"overscroll-y":[{"overscroll-y":he()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:be()}],"inset-x":[{"inset-x":be()}],"inset-y":[{"inset-y":be()}],start:[{start:be()}],end:[{end:be()}],top:[{top:be()}],right:[{right:be()}],bottom:[{bottom:be()}],left:[{left:be()}],visibility:["visible","invisible","collapse"],z:[{z:[ko,"auto",ze,Ue]}],basis:[{basis:[il,"full","auto",h,...se()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ot,il,"auto","initial","none",Ue]}],grow:[{grow:["",ot,ze,Ue]}],shrink:[{shrink:["",ot,ze,Ue]}],order:[{order:[ko,"first","last","none",ze,Ue]}],"grid-cols":[{"grid-cols":_e()}],"col-start-end":[{col:Ie()}],"col-start":[{"col-start":ce()}],"col-end":[{"col-end":ce()}],"grid-rows":[{"grid-rows":_e()}],"row-start-end":[{row:Ie()}],"row-start":[{"row-start":ce()}],"row-end":[{"row-end":ce()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Le()}],"auto-rows":[{"auto-rows":Le()}],gap:[{gap:se()}],"gap-x":[{"gap-x":se()}],"gap-y":[{"gap-y":se()}],"justify-content":[{justify:[...Ve(),"normal"]}],"justify-items":[{"justify-items":[...$e(),"normal"]}],"justify-self":[{"justify-self":["auto",...$e()]}],"align-content":[{content:["normal",...Ve()]}],"align-items":[{items:[...$e(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...$e(),{baseline:["","last"]}]}],"place-content":[{"place-content":Ve()}],"place-items":[{"place-items":[...$e(),"baseline"]}],"place-self":[{"place-self":["auto",...$e()]}],p:[{p:se()}],px:[{px:se()}],py:[{py:se()}],ps:[{ps:se()}],pe:[{pe:se()}],pt:[{pt:se()}],pr:[{pr:se()}],pb:[{pb:se()}],pl:[{pl:se()}],m:[{m:ke()}],mx:[{mx:ke()}],my:[{my:ke()}],ms:[{ms:ke()}],me:[{me:ke()}],mt:[{mt:ke()}],mr:[{mr:ke()}],mb:[{mb:ke()}],ml:[{ml:ke()}],"space-x":[{"space-x":se()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":se()}],"space-y-reverse":["space-y-reverse"],size:[{size:ie()}],w:[{w:[h,"screen",...ie()]}],"min-w":[{"min-w":[h,"screen","none",...ie()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[d]},...ie()]}],h:[{h:["screen","lh",...ie()]}],"min-h":[{"min-h":["screen","lh","none",...ie()]}],"max-h":[{"max-h":["screen","lh",...ie()]}],"font-size":[{text:["base",r,Ea,as]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[o,ze,mh]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ph,Ue]}],"font-family":[{font:[dC,Ue,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[l,ze,Ue]}],"line-clamp":[{"line-clamp":[ot,"none",ze,mh]}],leading:[{leading:[a,...se()]}],"list-image":[{"list-image":["none",ze,Ue]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ze,Ue]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:K()}],"text-color":[{text:K()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ge(),"wavy"]}],"text-decoration-thickness":[{decoration:[ot,"from-font","auto",ze,as]}],"text-decoration-color":[{decoration:K()}],"underline-offset":[{"underline-offset":[ot,"auto",ze,Ue]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:se()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ze,Ue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ze,Ue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:re()}],"bg-repeat":[{bg:le()}],"bg-size":[{bg:N()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ko,ze,Ue],radial:["",ze,Ue],conic:[ko,ze,Ue]},hC,cC]}],"bg-color":[{bg:K()}],"gradient-from-pos":[{from:Y()}],"gradient-via-pos":[{via:Y()}],"gradient-to-pos":[{to:Y()}],"gradient-from":[{from:K()}],"gradient-via":[{via:K()}],"gradient-to":[{to:K()}],rounded:[{rounded:ge()}],"rounded-s":[{"rounded-s":ge()}],"rounded-e":[{"rounded-e":ge()}],"rounded-t":[{"rounded-t":ge()}],"rounded-r":[{"rounded-r":ge()}],"rounded-b":[{"rounded-b":ge()}],"rounded-l":[{"rounded-l":ge()}],"rounded-ss":[{"rounded-ss":ge()}],"rounded-se":[{"rounded-se":ge()}],"rounded-ee":[{"rounded-ee":ge()}],"rounded-es":[{"rounded-es":ge()}],"rounded-tl":[{"rounded-tl":ge()}],"rounded-tr":[{"rounded-tr":ge()}],"rounded-br":[{"rounded-br":ge()}],"rounded-bl":[{"rounded-bl":ge()}],"border-w":[{border:Te()}],"border-w-x":[{"border-x":Te()}],"border-w-y":[{"border-y":Te()}],"border-w-s":[{"border-s":Te()}],"border-w-e":[{"border-e":Te()}],"border-w-t":[{"border-t":Te()}],"border-w-r":[{"border-r":Te()}],"border-w-b":[{"border-b":Te()}],"border-w-l":[{"border-l":Te()}],"divide-x":[{"divide-x":Te()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Te()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ge(),"hidden","none"]}],"divide-style":[{divide:[...Ge(),"hidden","none"]}],"border-color":[{border:K()}],"border-color-x":[{"border-x":K()}],"border-color-y":[{"border-y":K()}],"border-color-s":[{"border-s":K()}],"border-color-e":[{"border-e":K()}],"border-color-t":[{"border-t":K()}],"border-color-r":[{"border-r":K()}],"border-color-b":[{"border-b":K()}],"border-color-l":[{"border-l":K()}],"divide-color":[{divide:K()}],"outline-style":[{outline:[...Ge(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ot,ze,Ue]}],"outline-w":[{outline:["",ot,Ea,as]}],"outline-color":[{outline:K()}],shadow:[{shadow:["","none",_,Dc,Ac]}],"shadow-color":[{shadow:K()}],"inset-shadow":[{"inset-shadow":["none",w,Dc,Ac]}],"inset-shadow-color":[{"inset-shadow":K()}],"ring-w":[{ring:Te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:K()}],"ring-offset-w":[{"ring-offset":[ot,as]}],"ring-offset-color":[{"ring-offset":K()}],"inset-ring-w":[{"inset-ring":Te()}],"inset-ring-color":[{"inset-ring":K()}],"text-shadow":[{"text-shadow":["none",x,Dc,Ac]}],"text-shadow-color":[{"text-shadow":K()}],opacity:[{opacity:[ot,ze,Ue]}],"mix-blend":[{"mix-blend":[...We(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":We()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ot]}],"mask-image-linear-from-pos":[{"mask-linear-from":Re()}],"mask-image-linear-to-pos":[{"mask-linear-to":Re()}],"mask-image-linear-from-color":[{"mask-linear-from":K()}],"mask-image-linear-to-color":[{"mask-linear-to":K()}],"mask-image-t-from-pos":[{"mask-t-from":Re()}],"mask-image-t-to-pos":[{"mask-t-to":Re()}],"mask-image-t-from-color":[{"mask-t-from":K()}],"mask-image-t-to-color":[{"mask-t-to":K()}],"mask-image-r-from-pos":[{"mask-r-from":Re()}],"mask-image-r-to-pos":[{"mask-r-to":Re()}],"mask-image-r-from-color":[{"mask-r-from":K()}],"mask-image-r-to-color":[{"mask-r-to":K()}],"mask-image-b-from-pos":[{"mask-b-from":Re()}],"mask-image-b-to-pos":[{"mask-b-to":Re()}],"mask-image-b-from-color":[{"mask-b-from":K()}],"mask-image-b-to-color":[{"mask-b-to":K()}],"mask-image-l-from-pos":[{"mask-l-from":Re()}],"mask-image-l-to-pos":[{"mask-l-to":Re()}],"mask-image-l-from-color":[{"mask-l-from":K()}],"mask-image-l-to-color":[{"mask-l-to":K()}],"mask-image-x-from-pos":[{"mask-x-from":Re()}],"mask-image-x-to-pos":[{"mask-x-to":Re()}],"mask-image-x-from-color":[{"mask-x-from":K()}],"mask-image-x-to-color":[{"mask-x-to":K()}],"mask-image-y-from-pos":[{"mask-y-from":Re()}],"mask-image-y-to-pos":[{"mask-y-to":Re()}],"mask-image-y-from-color":[{"mask-y-from":K()}],"mask-image-y-to-color":[{"mask-y-to":K()}],"mask-image-radial":[{"mask-radial":[ze,Ue]}],"mask-image-radial-from-pos":[{"mask-radial-from":Re()}],"mask-image-radial-to-pos":[{"mask-radial-to":Re()}],"mask-image-radial-from-color":[{"mask-radial-from":K()}],"mask-image-radial-to-color":[{"mask-radial-to":K()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":G()}],"mask-image-conic-pos":[{"mask-conic":[ot]}],"mask-image-conic-from-pos":[{"mask-conic-from":Re()}],"mask-image-conic-to-pos":[{"mask-conic-to":Re()}],"mask-image-conic-from-color":[{"mask-conic-from":K()}],"mask-image-conic-to-color":[{"mask-conic-to":K()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:re()}],"mask-repeat":[{mask:le()}],"mask-size":[{mask:N()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ze,Ue]}],filter:[{filter:["","none",ze,Ue]}],blur:[{blur:Ye()}],brightness:[{brightness:[ot,ze,Ue]}],contrast:[{contrast:[ot,ze,Ue]}],"drop-shadow":[{"drop-shadow":["","none",C,Dc,Ac]}],"drop-shadow-color":[{"drop-shadow":K()}],grayscale:[{grayscale:["",ot,ze,Ue]}],"hue-rotate":[{"hue-rotate":[ot,ze,Ue]}],invert:[{invert:["",ot,ze,Ue]}],saturate:[{saturate:[ot,ze,Ue]}],sepia:[{sepia:["",ot,ze,Ue]}],"backdrop-filter":[{"backdrop-filter":["","none",ze,Ue]}],"backdrop-blur":[{"backdrop-blur":Ye()}],"backdrop-brightness":[{"backdrop-brightness":[ot,ze,Ue]}],"backdrop-contrast":[{"backdrop-contrast":[ot,ze,Ue]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ot,ze,Ue]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ot,ze,Ue]}],"backdrop-invert":[{"backdrop-invert":["",ot,ze,Ue]}],"backdrop-opacity":[{"backdrop-opacity":[ot,ze,Ue]}],"backdrop-saturate":[{"backdrop-saturate":[ot,ze,Ue]}],"backdrop-sepia":[{"backdrop-sepia":["",ot,ze,Ue]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":se()}],"border-spacing-x":[{"border-spacing-x":se()}],"border-spacing-y":[{"border-spacing-y":se()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ze,Ue]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ot,"initial",ze,Ue]}],ease:[{ease:["linear","initial",q,ze,Ue]}],delay:[{delay:[ot,ze,Ue]}],animate:[{animate:["none",te,ze,Ue]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[P,ze,Ue]}],"perspective-origin":[{"perspective-origin":Ee()}],rotate:[{rotate:et()}],"rotate-x":[{"rotate-x":et()}],"rotate-y":[{"rotate-y":et()}],"rotate-z":[{"rotate-z":et()}],scale:[{scale:pe()}],"scale-x":[{"scale-x":pe()}],"scale-y":[{"scale-y":pe()}],"scale-z":[{"scale-z":pe()}],"scale-3d":["scale-3d"],skew:[{skew:It()}],"skew-x":[{"skew-x":It()}],"skew-y":[{"skew-y":It()}],transform:[{transform:[ze,Ue,"","none","gpu","cpu"]}],"transform-origin":[{origin:Ee()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:He()}],"translate-x":[{"translate-x":He()}],"translate-y":[{"translate-y":He()}],"translate-z":[{"translate-z":He()}],"translate-none":["translate-none"],accent:[{accent:K()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:K()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ze,Ue]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":se()}],"scroll-mx":[{"scroll-mx":se()}],"scroll-my":[{"scroll-my":se()}],"scroll-ms":[{"scroll-ms":se()}],"scroll-me":[{"scroll-me":se()}],"scroll-mt":[{"scroll-mt":se()}],"scroll-mr":[{"scroll-mr":se()}],"scroll-mb":[{"scroll-mb":se()}],"scroll-ml":[{"scroll-ml":se()}],"scroll-p":[{"scroll-p":se()}],"scroll-px":[{"scroll-px":se()}],"scroll-py":[{"scroll-py":se()}],"scroll-ps":[{"scroll-ps":se()}],"scroll-pe":[{"scroll-pe":se()}],"scroll-pt":[{"scroll-pt":se()}],"scroll-pr":[{"scroll-pr":se()}],"scroll-pb":[{"scroll-pb":se()}],"scroll-pl":[{"scroll-pl":se()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ze,Ue]}],fill:[{fill:["none",...K()]}],"stroke-w":[{stroke:[ot,Ea,as,mh]}],stroke:[{stroke:["none",...K()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},gC=QE(yC);function kt(...n){return gC(Sw(n))}const vC=jE("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Et=tt.forwardRef(({className:n,variant:e,size:r,asChild:o=!1,...l},a)=>R.jsx("button",{className:kt(vC({variant:e,size:r,className:n})),ref:a,...l}));Et.displayName="Button";function wC({className:n}){return R.jsx("svg",{className:kt("w-4 h-4 fill-current",n),viewBox:"0 0 20 20",children:R.jsx("path",{d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"})})}function al(n){return(...e)=>n(...e).catch(r=>{(r==null?void 0:r.name)==="AbortError"?console.debug(r):console.error(r)})}function bC({item:n}){const e=eu(at,"todoItems",n),[r,o]=tt.useState(!1),[l,a]=tt.useState(!1),[d,h]=tt.useState(!1),y=C=>{at.todoItems.update(n.id,{done:C})},m=async()=>{await at.todoItems.delete(n.id)},_=()=>{e.update("title")&&h(!0)},w=C=>{(C.key==="Enter"||C.key==="Escape")&&(C.preventDefault(),h(!1))};tt.useEffect(()=>{let C;return r&&e.delete()?(a(!0),C=setTimeout(()=>{a(!1)},2e3)):a(!1),()=>{C&&clearTimeout(C)}},[r,e]);const x=C=>{e.delete()&&(a(!0),o(!1),setTimeout(()=>o(!0),10))};return R.jsxs("div",{className:kt("group flex items-center gap-3 py-3 px-4 border-b border-blue-200/60 last:border-b-0 transition-colors",n.done?"bg-blue-50 dark:bg-blue-900/20":"bg-background hover:bg-muted/30"),onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),onClick:x,children:[R.jsxs("label",{className:"relative flex items-center cursor-pointer",children:[R.jsx("input",{type:"checkbox",disabled:!e.update("done"),checked:!!n.done,onChange:C=>y(C.target.checked),className:"sr-only"}),R.jsx("div",{className:kt("w-6 h-6 border-2 rounded flex items-center justify-center transition-all duration-200",n.done?"bg-blue-500 border-blue-500 text-white shadow-sm":"border-gray-300 hover:border-blue-400 bg-white",!e.update("done")&&"opacity-50 cursor-not-allowed"),children:n.done&&R.jsx(wC,{})})]}),R.jsx("div",{className:"flex-1",children:d?R.jsx("input",{type:"text",defaultValue:n.title,onChange:al(C=>at.todoItems.update(n.id,{title:C.target.value})),onKeyDown:w,onBlur:()=>h(!1),autoFocus:!0,className:kt("w-full text-sm leading-relaxed bg-transparent border-none outline-none focus:ring-1 focus:ring-blue-500 rounded px-1 py-0.5",n.done?"text-foreground/80":"text-foreground")}):R.jsx("div",{className:kt("text-sm leading-relaxed cursor-pointer hover:bg-muted/30 rounded px-1 py-0.5 transition-colors",n.done?"text-foreground/80":"text-foreground",!e.update("title")&&"cursor-default hover:bg-transparent"),onClick:_,title:e.update("title")?"Click to edit":void 0,children:n.title})}),R.jsx(Et,{variant:"ghost",size:"icon",onClick:m,title:"Delete item",className:kt("h-8 w-8 text-muted-foreground hover:text-destructive transition-all duration-300",l?"opacity-100 translate-x-0":"opacity-0 translate-x-2 pointer-events-none"),children:R.jsx(Sd,{className:"h-4 w-4"})})]})}const Ha=tt.forwardRef(({className:n,type:e,...r},o)=>R.jsx("input",{type:e,className:kt("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",n),ref:o,...r}));Ha.displayName="Input";function _C({todoList:n,autoFocus:e}){const[r,o]=tt.useState(""),l=async a=>{a.preventDefault(),r.trim()&&(await at.todoItems.add({todoListId:n.id,realmId:n.realmId,title:r.trim()}),o(""))};return R.jsxs("form",{onSubmit:l,className:"flex gap-2",children:[R.jsx("div",{className:"flex-1",children:R.jsx(Ha,{type:"text",placeholder:"Add todo item ...",value:r,autoFocus:e,onChange:a=>o(a.target.value)})}),R.jsx(Et,{type:"submit",size:"icon",disabled:!r.trim(),title:"Add item",children:R.jsx(_w,{className:"h-4 w-4"})})]})}function kC({todoList:n,member:e,access:r}){const o=Xa(at.cloud.roles)||{};return R.jsxs("select",{disabled:n.owner===e.userId&&e.userId===at.cloud.currentUserId,style:{border:0},value:r,onChange:l=>xC(n,e,r,l.target.value),children:[R.jsx("option",{value:"owner",disabled:!e.userId,children:"Owner"}),Object.entries(o).map(([l,a])=>R.jsx("option",{value:l,children:a.displayName},l)),!o[r]&&r!=="owner"&&R.jsx("option",{children:"(unknown)"},r)]})}async function xC(n,e,r,o){if(o==="owner"){if(!e.userId)throw new Error("Cannot give ownership to user before invite is accepted.");return r==="owner"?void 0:n.changeOwner(e.userId)}else e.userId===n.owner&&await n.changeOwner(at.cloud.currentUserId),await n.changeMemberRole(e,o)}function SC({member:n,todoList:e}){var m;const r=eu(at,"members",n),o=Xa(at.cloud.roles),l=(m=n.roles)==null?void 0:m[0],a=l?o==null?void 0:o[l]:null,d=n.userId===e.owner?"owner":l||"readonly",h=d==="owner"?"Owner":(a==null?void 0:a.displayName)||d,y=()=>d==="owner"?R.jsx(oE,{className:"h-4 w-4"}):R.jsx(kw,{className:"h-4 w-4"});return R.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 bg-gray-50 rounded border border-gray-200 min-w-[100px]",children:[y(),r.update("roles")?R.jsx(kC,{todoList:e,member:n,access:d}):R.jsx("span",{className:"text-sm font-medium",children:h})]})}const EC={"alice@demo.local":{},"bob@demo.local":{},"foo@demo.local":{},"bar@demo.local":{}},Wh={demoUsers:EC};function CC({todoList:n}){const[e,r]=tt.useState(""),[o,l]=tt.useState(""),a=Za(async()=>await at.members.where({realmId:n.realmId}).toArray(),[n.realmId]),[d,h]=tt.useState(!1),y=eu(n);return R.jsxs("div",{className:"space-y-3",children:[a&&a.length>0&&R.jsxs("div",{children:[R.jsx("h4",{className:"text-sm font-medium text-foreground mb-2",children:"Shared with:"}),R.jsx("div",{className:"space-y-1",children:a==null?void 0:a.map(m=>R.jsx(IC,{todoList:n,member:m},m.id))})]}),R.jsx("div",{className:"border-t border-border pt-3",children:y.add("members")&&R.jsxs("div",{className:"space-y-3",children:[R.jsxs("h4",{className:"text-sm font-medium text-foreground flex items-center gap-2",children:[R.jsx(_E,{className:"h-4 w-4"}),"Invite someone?"]}),R.jsx("div",{className:"space-y-1",children:Object.keys(Wh.demoUsers).filter(m=>m!==at.cloud.currentUserId).map(m=>R.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-white rounded border border-blue-100",children:[R.jsx("span",{className:"text-sm text-foreground",children:m}),R.jsx(Et,{size:"sm",variant:"outline",onClick:()=>{h(!1),n.shareWith(m,m,!0,["doer"])},className:"h-7 px-3 text-xs border-blue-200 text-blue-600 hover:bg-blue-50",children:"Invite"})]},m))}),d?R.jsxs("form",{onSubmit:m=>{m.preventDefault(),h(!1),n.shareWith(e,o,!0,["doer"]),r(""),l("")},className:"space-y-3 p-4 bg-muted/50 rounded-lg",children:[R.jsx(Ha,{type:"email",placeholder:"Email address",value:o,onChange:m=>l(m.target.value)}),R.jsx(Ha,{type:"text",placeholder:"Name",value:e,onChange:m=>r(m.target.value)}),R.jsxs("div",{className:"flex gap-2",children:[R.jsxs(Et,{type:"submit",disabled:!/@/.test(o),size:"sm",className:"flex items-center gap-2",children:[R.jsx(Vg,{className:"h-4 w-4"}),"Send invite"]}),R.jsx(Et,{type:"button",variant:"outline",size:"sm",onClick:()=>h(!1),children:"Cancel"})]})]}):R.jsx("div",{className:"mt-2",children:R.jsxs(Et,{variant:"outline",size:"sm",onClick:()=>h(!0),className:"flex items-center gap-2 h-8 px-3 text-xs border-blue-200 text-blue-600 hover:bg-blue-50",children:[R.jsx(Vg,{className:"h-4 w-4"}),"Invite by email address"]})})]})})]})}function IC({member:n,todoList:e}){var h,y;const r=eu(at,"members",n),o=n.userId===at.cloud.currentUserId,l=n.userId===e.owner;let a=n.name||n.email||n.userId;o&&(a+=" (me)");const d=async m=>{await e.unshareWith(m),await at.members.where({realmId:e.realmId}).filter(w=>w.userId!==at.cloud.currentUserId).count()===0&&await e.makePrivate()};return R.jsxs("div",{className:`flex items-center justify-between py-2 px-3 bg-white rounded border border-blue-100 ${n.accepted?"":"opacity-50"}`,children:[R.jsxs("div",{className:"flex-1",children:[R.jsx("span",{className:"text-sm text-foreground font-medium",children:a}),!n.rejected&&!n.accepted&&R.jsx("span",{className:"text-xs text-muted-foreground italic ml-2",children:"Pending invite"}),n.rejected&&R.jsx("span",{className:"text-xs text-muted-foreground italic ml-2",children:"Rejected"})]}),R.jsxs("div",{className:"flex items-center gap-2 min-w-[140px] justify-end",children:[R.jsx(SC,{member:n,todoList:e}),R.jsx("div",{className:"w-8 flex justify-center ml-1",children:r.delete()&&!l?R.jsx(Et,{variant:"ghost",size:"sm",onClick:()=>d(n),className:"text-red-500 hover:text-red-700 hover:bg-red-50 h-8 w-8 p-0",children:R.jsx(Sd,{className:"h-4 w-4"})}):!l&&n.userId===at.cloud.currentUserId&&((((h=n.accepted)==null?void 0:h.getTime())||0)>(((y=n.rejected)==null?void 0:y.getTime())||0)?R.jsx(Et,{variant:"outline",size:"sm",onClick:()=>e.leaveList(),className:"h-7 px-3 text-xs border-red-300 text-red-600 hover:bg-red-50 hover:border-red-400 min-w-[50px]",children:"Leave"}):R.jsx(Et,{variant:"default",size:"sm",onClick:()=>at.members.update(n.id,{accepted:new Date,rejected:void 0}),className:"h-7 px-3 text-xs bg-blue-500 hover:bg-blue-600",children:"Accept"}))})]})]})}function OC(n,e,r=!1){return[Za(()=>at.openCloseStates.get([n,e]),[n,e],r)??r,a=>at.openCloseStates.put(a,[n,e])]}function jC({todoList:n,autoFocus:e}){const[r,o]=tt.useState(!1),l=Za(()=>at.todoItems.where({todoListId:n.id}).reverse().toArray(),[n.id]),a=eu(n),[d,h]=OC("sharing-menu",n.id,!1);if(!l)return null;const y=async()=>{confirm(`Are you sure you want to delete "${n.title}" and all its items?`)&&await n.deleteList()},m=()=>{a.update("title")&&o(!0)},_=w=>{(w.key==="Enter"||w.key==="Escape")&&(w.preventDefault(),o(!1))};return R.jsxs("div",{className:"border-b border-border bg-background",children:[R.jsxs("div",{className:"flex items-center justify-between px-4 py-4 border-b border-blue-300/70 bg-blue-500 dark:bg-blue-600",children:[R.jsx("div",{className:"flex-1 mr-4",children:r?R.jsx("input",{type:"text",defaultValue:n.title,onChange:al(w=>at.todoLists.update(n.id,{title:w.target.value})),onKeyDown:_,onBlur:()=>o(!1),autoFocus:!0,className:kt("text-lg font-semibold bg-transparent border-none outline-none focus:ring-1 focus:ring-white/50 rounded px-2 py-1 text-white placeholder-white/70 w-full")}):R.jsx("h2",{className:kt("text-lg font-semibold text-white cursor-pointer hover:bg-white/10 rounded px-2 py-1 transition-colors",!a.update("title")&&"cursor-default hover:bg-transparent"),onClick:m,title:a.update("title")?"Click to edit list name":void 0,children:n.title})}),R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx(Et,{variant:"ghost",size:"icon",onClick:()=>h(!d),title:"Share list",className:kt("text-white hover:bg-blue-600 transition-all duration-200",d&&"bg-blue-600/50"),children:R.jsx(vE,{className:kt("h-4 w-4 transition-transform duration-200",d&&"rotate-180")})}),a.delete()&&R.jsx(Et,{variant:"ghost",size:"icon",onClick:y,title:"Delete list",className:"text-white hover:bg-blue-600",children:R.jsx(Sd,{className:"h-4 w-4"})})]})]}),R.jsx("div",{className:kt("overflow-hidden transition-all duration-300 ease-in-out",d?"max-h-[600px] opacity-100":"max-h-0 opacity-0"),children:R.jsx("div",{className:"px-4 py-4 bg-blue-50/70 dark:bg-blue-900/15 border-b border-blue-200/60",children:R.jsx(CC,{todoList:n})})}),R.jsxs("div",{className:"px-0 py-0",children:[a.add("todoItems")&&R.jsx("div",{className:"px-4 py-3 border-b border-blue-200/60 bg-background",children:R.jsx(_C,{todoList:n,autoFocus:e})}),l.map(w=>R.jsx(bC,{item:w},w.id))]})]})}function TC(){const n=Za(()=>at.todoLists.reverse().toArray());return n?R.jsx("div",{className:"w-full",children:n.map((e,r)=>R.jsx(jC,{todoList:e,autoFocus:r===0},e.id))}):null}const qa=tt.forwardRef(({className:n,...e},r)=>R.jsx("div",{ref:r,className:kt("rounded-xl border bg-card text-card-foreground shadow",n),...e}));qa.displayName="Card";const Ga=tt.forwardRef(({className:n,...e},r)=>R.jsx("div",{ref:r,className:kt("flex flex-col space-y-1.5 p-6",n),...e}));Ga.displayName="CardHeader";const Ya=tt.forwardRef(({className:n,...e},r)=>R.jsx("h3",{ref:r,className:kt("font-semibold leading-none tracking-tight",n),...e}));Ya.displayName="CardTitle";const Qa=tt.forwardRef(({className:n,...e},r)=>R.jsx("p",{ref:r,className:kt("text-sm text-muted-foreground",n),...e}));Qa.displayName="CardDescription";const Ja=tt.forwardRef(({className:n,...e},r)=>R.jsx("div",{ref:r,className:kt("p-6 pt-0",n),...e}));Ja.displayName="CardContent";const PC=tt.forwardRef(({className:n,...e},r)=>R.jsx("div",{ref:r,className:kt("flex items-center p-6 pt-0",n),...e}));PC.displayName="CardFooter";function NC(){const[n,e]=tt.useState(!1),[r,o]=tt.useState(""),l=Za(async()=>await at.todoLists.count()>0),a=()=>{r.trim()&&(at.todoLists.add({title:r.trim()}),o(""),e(!1))};return n?R.jsxs(qa,{className:"w-full sm:max-w-md",children:[R.jsxs(Ga,{children:[R.jsxs(Ya,{className:"flex items-center gap-2",children:[R.jsx(_w,{className:"h-5 w-5"}),"New Todo List"]}),R.jsx(Qa,{children:"Give your list a name to get started"})]}),R.jsxs(Ja,{className:"space-y-4",children:[R.jsx(Ha,{type:"text",autoFocus:!0,placeholder:"Name of list...",value:r,onChange:d=>o(d.target.value),onKeyUp:d=>{d.key==="Enter"?a():d.key==="Escape"&&(e(!1),o(""))}}),R.jsxs("div",{className:"flex gap-2",children:[R.jsx(Et,{onClick:a,disabled:!r.trim(),children:"Create List"}),R.jsx(Et,{variant:"outline",onClick:()=>{e(!1),o("")},children:"Cancel"})]})]})]}):R.jsxs(Et,{onClick:()=>e(!0),size:"lg",variant:"outline",className:"w-full sm:w-auto flex items-center gap-2 border-slate-300 text-slate-700 hover:bg-slate-50",children:[R.jsx(lE,{className:"h-4 w-4"}),l?"Add another list":"Create ToDo List"]})}function AC(){const n=async()=>{confirm("Are you sure you want to reset the database? This will delete all your local data and reload the app.")&&(await at.delete(),location.reload())};return R.jsxs(Et,{variant:"outline",size:"lg",onClick:n,className:"w-full sm:w-auto flex items-center gap-2 border-red-300 text-red-700 bg-red-50 hover:bg-red-100 hover:border-red-400",children:[R.jsx(yE,{className:"h-4 w-4"}),"Factory reset client"]})}var DC=typeof window<"u",RC=DC?tt.useLayoutEffect:tt.useEffect;function kp(n,e){var r=tt.useState(e),o=r[0],l=r[1];return RC(function(){var a=n.subscribe(l);return function(){return a.unsubscribe()}},[n]),o}function Xg({className:n}){const e=kp(at.cloud.syncState),r=kt("text-muted-foreground",n);switch(e==null?void 0:e.status){case"not-started":return R.jsx("div",{title:"Sync not started",children:R.jsx($g,{className:r})});case"connecting":return R.jsx("div",{title:"Connecting to cloud...",children:R.jsx(uE,{className:kt(r,"animate-spin")})});case"connected":return R.jsx("div",{title:"Connected and syncing",children:R.jsx(OE,{className:kt(r,"text-green-500")})});case"disconnected":return R.jsx("div",{title:"Connection sleeping - will reconnect when active",children:R.jsx(nE,{className:kt(r,"text-blue-400")})});case"offline":return R.jsx("div",{title:e.error?String(e.error):"Offline",children:R.jsx(CE,{className:kt(r,"text-orange-500")})});case"error":return R.jsx("div",{title:e.error?String(e.error):"Connection error",children:R.jsx(eE,{className:kt(r,"text-red-500")})});default:return R.jsx("div",{title:"Sync status unknown",children:R.jsx($g,{className:r})})}}const Zg=({children:n,...e})=>{const[r,o]=tt.useState(!1);return R.jsx("div",{className:"relative inline-block text-left",...e,children:tt.Children.map(n,l=>{if(tt.isValidElement(l)){if(l.type===sd)return tt.cloneElement(l,{onClick:()=>o(!r),"aria-expanded":r});if(l.type===ld)return tt.cloneElement(l,{isOpen:r,onClose:()=>o(!1)})}return l})})},sd=tt.forwardRef(({className:n,children:e,...r},o)=>R.jsx("button",{ref:o,className:kt("inline-flex w-full justify-center gap-x-1.5 rounded-md bg-background px-3 py-2 text-sm font-semibold text-foreground shadow-sm ring-1 ring-inset ring-border hover:bg-accent",n),...r,children:e}));sd.displayName="DropdownMenuTrigger";const ld=tt.forwardRef(({className:n,align:e="end",isOpen:r,onClose:o,children:l,...a},d)=>(tt.useEffect(()=>{const h=y=>{d&&"current"in d&&d.current&&!d.current.contains(y.target)&&(o==null||o())};if(r)return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[r,o,d]),r?R.jsx("div",{ref:d,className:kt("absolute z-10 mt-2 w-56 origin-top-right rounded-md bg-popover shadow-lg ring-1 ring-border ring-opacity-5 focus:outline-none",e==="end"?"right-0":"left-0",n),...a,children:tt.Children.map(l,h=>tt.isValidElement(h)&&h.type===Aa?tt.cloneElement(h,{onClick:y=>{var m,_;(_=(m=h.props).onClick)==null||_.call(m,y),o==null||o()}}):h)}):null));ld.displayName="DropdownMenuContent";const Aa=tt.forwardRef(({className:n,...e},r)=>R.jsx("button",{ref:r,className:kt("block w-full px-4 py-2 text-left text-sm text-popover-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none",n),...e}));Aa.displayName="DropdownMenuItem";const Mw=tt.forwardRef(({className:n,...e},r)=>R.jsx("div",{ref:r,className:kt("my-1 h-px bg-border",n),...e}));Mw.displayName="DropdownMenuSeparator";const Hh=tt.forwardRef(({className:n,...e},r)=>R.jsx("div",{ref:r,className:kt("px-4 py-2 text-xs font-semibold text-muted-foreground",n),...e}));Hh.displayName="DropdownMenuLabel";function ev(){return at.cloud.logout().catch(n=>{console.log("Logout cancelled",n)})}function LC(){const n=kp(at.cloud.currentUser),[e,r]=tt.useState(!1);return R.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-background border-b border-border",children:R.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[R.jsxs("div",{className:"flex h-16 items-center justify-between",children:[R.jsx("div",{className:"flex items-center",children:R.jsx("h1",{className:"text-xl font-semibold text-foreground",children:"Dexie Cloud ToDo App"})}),R.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[R.jsx(Xg,{className:"h-5 w-5"}),n!=null&&n.isLoggedIn?R.jsxs(Zg,{children:[R.jsx(sd,{children:R.jsxs(Et,{variant:"ghost",className:"flex items-center gap-2",children:[R.jsx(kw,{className:"h-4 w-4"}),n.name,R.jsx(Bg,{className:"h-4 w-4"})]})}),R.jsx(ld,{children:R.jsxs(Aa,{onClick:()=>ev(),children:[R.jsx(Kg,{className:"mr-2 h-4 w-4"}),"Logout"]})})]}):R.jsxs(Zg,{children:[R.jsx(sd,{children:R.jsxs(Et,{variant:"outline",className:"flex items-center gap-2",children:["Sign in or create account",R.jsx(Bg,{className:"h-4 w-4"})]})}),R.jsxs(ld,{children:[R.jsx(Hh,{children:"Sign in a demo user"}),Object.keys(Wh.demoUsers).map(o=>R.jsx(Aa,{onClick:al(()=>at.cloud.login({grant_type:"demo",email:o})),children:o},o)),R.jsx(Mw,{}),R.jsx(Hh,{children:"Sign in real user"}),R.jsx(Aa,{onClick:al(()=>at.cloud.login()),children:"Sign in / sign up yourself"})]})]})]}),R.jsxs("div",{className:"md:hidden flex items-center space-x-2",children:[R.jsx(Xg,{className:"h-5 w-5"}),R.jsx(Et,{variant:"ghost",size:"icon",onClick:()=>r(!e),children:R.jsx(hE,{className:"h-5 w-5"})})]})]}),e&&R.jsx("div",{className:"md:hidden border-t border-border",children:R.jsx("div",{className:"px-2 pt-2 pb-3 space-y-1",children:n!=null&&n.isLoggedIn?R.jsxs("div",{className:"space-y-1",children:[R.jsxs("div",{className:"px-3 py-2 text-sm text-muted-foreground",children:["Signed in as ",n.name]}),R.jsxs(Et,{variant:"ghost",className:"w-full justify-start",onClick:()=>{ev(),r(!1)},children:[R.jsx(Kg,{className:"mr-2 h-4 w-4"}),"Logout"]})]}):R.jsxs("div",{className:"space-y-1",children:[R.jsx("div",{className:"px-3 py-2 text-sm font-medium text-muted-foreground",children:"Sign in a demo user"}),Object.keys(Wh.demoUsers).map(o=>R.jsx(Et,{variant:"ghost",className:"w-full justify-start",onClick:al(async()=>{await at.cloud.login({grant_type:"demo",email:o}),r(!1)}),children:o},o)),R.jsx("div",{className:"border-t border-border my-2"}),R.jsx("div",{className:"px-3 py-2 text-sm font-medium text-muted-foreground",children:"Sign in real user"}),R.jsx(Et,{variant:"outline",className:"w-full justify-start",onClick:al(async()=>{await at.cloud.login(),r(!1)}),children:"Sign in / sign up yourself"})]})})})]})})}function MC(){const n=kp(at.cloud.invites,[]);return n.length===0?null:R.jsxs(qa,{children:[R.jsxs(Ga,{children:[R.jsxs(Ya,{className:"flex items-center gap-2",children:[R.jsx(SE,{className:"h-5 w-5"}),"You've got invited!"]}),R.jsxs(Qa,{children:["You have ",n.length," pending invitation",n.length>1?"s":""]})]}),R.jsx(Ja,{children:R.jsx("div",{className:"space-y-4",children:n.map(e=>{var r,o;return R.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[R.jsxs("div",{className:"flex-1",children:[R.jsx("div",{className:"font-medium",children:(r=e.realm)==null?void 0:r.name}),R.jsxs("div",{className:"text-sm text-muted-foreground",children:["Invited by ",(o=e.invitedBy)==null?void 0:o.name]})]}),R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx(Et,{size:"sm",onClick:()=>e.accept(),disabled:!!e.accepted,variant:e.accepted?"secondary":"default",children:e.accepted?"Accepted":"Accept"}),R.jsx(Et,{size:"sm",variant:"outline",onClick:()=>e.reject(),disabled:!!e.rejected,children:e.rejected?"Rejected":"Reject"}),R.jsx(Et,{size:"sm",variant:"ghost",onClick:()=>at.members.delete(e.id),title:"Remove invite",children:R.jsx(Sd,{className:"h-4 w-4"})})]})]},e.id)})})})]})}function UC(){return R.jsxs("div",{className:"min-h-screen bg-background",children:[R.jsx(LC,{}),R.jsxs("main",{className:"pt-16",children:[R.jsxs("div",{className:"max-w-4xl mx-auto px-4 pb-2",children:[R.jsx(zC,{}),R.jsx(MC,{})]}),R.jsx(TC,{}),R.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6",children:R.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[R.jsx(NC,{}),R.jsx(AC,{})]})})]})]})}function zC(){var o;const n=Xa(at.cloud.currentUser);if(!n)return null;const{license:e}=n;if(!e||e.status==="ok"&&e.validUntil===void 0&&e.evalDaysLeft===void 0)return null;if(e.status!=="ok")return R.jsxs(qa,{className:"mb-6 border-destructive",children:[R.jsx(Ga,{children:R.jsx(Ya,{className:"text-destructive",children:"License Required"})}),R.jsxs(Ja,{className:"space-y-4",children:[R.jsx(Qa,{children:"No valid license. You are in offline mode until a valid license is purchased."}),R.jsxs("div",{className:"space-y-2",children:[R.jsx(Et,{asChild:!0,children:R.jsx("a",{href:"https://example.com",children:"Purchase License"})}),R.jsx(Et,{variant:"destructive",onClick:l=>{l.preventDefault(),l.stopPropagation(),FC(n)},children:"Delete Account & All Data"})]})]})]});let r=e.evalDaysLeft;if(r===void 0){const l=((o=e.validUntil)==null?void 0:o.getTime())??1/0;r=Math.round((l-Date.now())/(1440*60*1e3))}return r<7?R.jsxs(qa,{className:"mb-6 border-yellow-500",children:[R.jsx(Ga,{children:R.jsx(Ya,{className:"text-yellow-600",children:"License Expiring Soon"})}),R.jsxs(Ja,{className:"space-y-4",children:[R.jsxs(Qa,{children:["License expires in ",r," days."]}),R.jsx(Et,{asChild:!0,children:R.jsx("a",{href:"https://example.com",children:"Purchase Production License"})})]})]}):null}async function FC(n){var r;!(n!=null&&n.userId)||!confirm(`Are you sure you want to delete your user completely along all stored data for ${n.userId}? Private data will be deleted. Shared data will not be deleted. This action cannot be undone.`)||(await fetch(`${(r=at.cloud.options)==null?void 0:r.databaseUrl}/users/${n.userId}`,{method:"DELETE",headers:{Authorization:`Bearer ${n.accessToken}`}}),await at.cloud.logout({force:!0}))}function BC(n){return"serviceWorker"in navigator?window.addEventListener("load",async()=>{try{let e="./";e.endsWith("/")||(e+="/");const r=await navigator.serviceWorker.register(`${e}sw.js`,{scope:e});console.log(" Service Worker: Registration successful",r),r.addEventListener("updatefound",()=>{const o=r.installing;o&&o.addEventListener("statechange",()=>{var l,a,d,h;o.state==="installed"&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed."),(l=n==null?void 0:n.onUpdate)==null||l.call(n,r),(a=n==null?void 0:n.onNeedRefresh)==null||a.call(n)):(console.log("App ready to work offline."),(d=n==null?void 0:n.onSuccess)==null||d.call(n,r),(h=n==null?void 0:n.onOfflineReady)==null||h.call(n)))})})}catch(e){console.error(" Service worker registration failed:",e),e instanceof Error&&console.error(" Error details:",{name:e.name,message:e.message,stack:e.stack})}}):"serviceWorker"in navigator||console.log(" Service Worker: Not supported in this browser"),()=>{}}window.Dexie=st;st.debug=!0;const $C=document.getElementById("root"),KC=Fb.createRoot($C);KC.render(R.jsx(ol.StrictMode,{children:R.jsx(UC,{})}));BC();
//# sourceMappingURL=index-D9C3dXeG.js.map
