var Tb=Object.defineProperty;var Pb=(n,e,r)=>e in n?Tb(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r;var _o=(n,e,r)=>Pb(n,typeof e!="symbol"?e+"":e,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function r(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(l){if(l.ep)return;l.ep=!0;const a=r(l);fetch(l.href,a)}})();var Nb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Vf={exports:{}},wa={},Wf={exports:{}},lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uy;function Ab(){if(uy)return lt;uy=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),b=Symbol.iterator;function x(N){return N===null||typeof N!="object"?null:(N=b&&N[b]||N["@@iterator"],typeof N=="function"?N:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,T={};function W(N,G,ye){this.props=N,this.context=G,this.refs=T,this.updater=ye||C}W.prototype.isReactComponent={},W.prototype.setState=function(N,G){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,G,"setState")},W.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function q(){}q.prototype=W.prototype;function X(N,G,ye){this.props=N,this.context=G,this.refs=T,this.updater=ye||C}var ce=X.prototype=new q;ce.constructor=X,j(ce,W.prototype),ce.isPureReactComponent=!0;var ie=Array.isArray,ee=Object.prototype.hasOwnProperty,ve={current:null},pe={key:!0,ref:!0,__self:!0,__source:!0};function se(N,G,ye){var Ie,Ge={},Ve=null,Re=null;if(G!=null)for(Ie in G.ref!==void 0&&(Re=G.ref),G.key!==void 0&&(Ve=""+G.key),G)ee.call(G,Ie)&&!pe.hasOwnProperty(Ie)&&(Ge[Ie]=G[Ie]);var Ye=arguments.length-2;if(Ye===1)Ge.children=ye;else if(1<Ye){for(var et=Array(Ye),fe=0;fe<Ye;fe++)et[fe]=arguments[fe+2];Ge.children=et}if(N&&N.defaultProps)for(Ie in Ye=N.defaultProps,Ye)Ge[Ie]===void 0&&(Ge[Ie]=Ye[Ie]);return{$$typeof:n,type:N,key:Ve,ref:Re,props:Ge,_owner:ve.current}}function we(N,G){return{$$typeof:n,type:N.type,key:G,ref:N.ref,props:N.props,_owner:N._owner}}function ke(N){return typeof N=="object"&&N!==null&&N.$$typeof===n}function Ce(N){var G={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(ye){return G[ye]})}var He=/\/+/g;function be(N,G){return typeof N=="object"&&N!==null&&N.key!=null?Ce(""+N.key):G.toString(36)}function Ke(N,G,ye,Ie,Ge){var Ve=typeof N;(Ve==="undefined"||Ve==="boolean")&&(N=null);var Re=!1;if(N===null)Re=!0;else switch(Ve){case"string":case"number":Re=!0;break;case"object":switch(N.$$typeof){case n:case e:Re=!0}}if(Re)return Re=N,Ge=Ge(Re),N=Ie===""?"."+be(Re,0):Ie,ie(Ge)?(ye="",N!=null&&(ye=N.replace(He,"$&/")+"/"),Ke(Ge,G,ye,"",function(fe){return fe})):Ge!=null&&(ke(Ge)&&(Ge=we(Ge,ye+(!Ge.key||Re&&Re.key===Ge.key?"":(""+Ge.key).replace(He,"$&/")+"/")+N)),G.push(Ge)),1;if(Re=0,Ie=Ie===""?".":Ie+":",ie(N))for(var Ye=0;Ye<N.length;Ye++){Ve=N[Ye];var et=Ie+be(Ve,Ye);Re+=Ke(Ve,G,ye,et,Ge)}else if(et=x(N),typeof et=="function")for(N=et.call(N),Ye=0;!(Ve=N.next()).done;)Ve=Ve.value,et=Ie+be(Ve,Ye++),Re+=Ke(Ve,G,ye,et,Ge);else if(Ve==="object")throw G=String(N),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return Re}function Be(N,G,ye){if(N==null)return N;var Ie=[],Ge=0;return Ke(N,Ie,"","",function(Ve){return G.call(ye,Ve,Ge++)}),Ie}function Ee(N){if(N._status===-1){var G=N._result;G=G(),G.then(function(ye){(N._status===0||N._status===-1)&&(N._status=1,N._result=ye)},function(ye){(N._status===0||N._status===-1)&&(N._status=2,N._result=ye)}),N._status===-1&&(N._status=0,N._result=G)}if(N._status===1)return N._result.default;throw N._result}var me={current:null},U={transition:null},oe={ReactCurrentDispatcher:me,ReactCurrentBatchConfig:U,ReactCurrentOwner:ve};function ne(){throw Error("act(...) is not supported in production builds of React.")}return lt.Children={map:Be,forEach:function(N,G,ye){Be(N,function(){G.apply(this,arguments)},ye)},count:function(N){var G=0;return Be(N,function(){G++}),G},toArray:function(N){return Be(N,function(G){return G})||[]},only:function(N){if(!ke(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},lt.Component=W,lt.Fragment=r,lt.Profiler=l,lt.PureComponent=X,lt.StrictMode=o,lt.Suspense=y,lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oe,lt.act=ne,lt.cloneElement=function(N,G,ye){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var Ie=j({},N.props),Ge=N.key,Ve=N.ref,Re=N._owner;if(G!=null){if(G.ref!==void 0&&(Ve=G.ref,Re=ve.current),G.key!==void 0&&(Ge=""+G.key),N.type&&N.type.defaultProps)var Ye=N.type.defaultProps;for(et in G)ee.call(G,et)&&!pe.hasOwnProperty(et)&&(Ie[et]=G[et]===void 0&&Ye!==void 0?Ye[et]:G[et])}var et=arguments.length-2;if(et===1)Ie.children=ye;else if(1<et){Ye=Array(et);for(var fe=0;fe<et;fe++)Ye[fe]=arguments[fe+2];Ie.children=Ye}return{$$typeof:n,type:N.type,key:Ge,ref:Ve,props:Ie,_owner:Re}},lt.createContext=function(N){return N={$$typeof:d,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:a,_context:N},N.Consumer=N},lt.createElement=se,lt.createFactory=function(N){var G=se.bind(null,N);return G.type=N,G},lt.createRef=function(){return{current:null}},lt.forwardRef=function(N){return{$$typeof:h,render:N}},lt.isValidElement=ke,lt.lazy=function(N){return{$$typeof:_,_payload:{_status:-1,_result:N},_init:Ee}},lt.memo=function(N,G){return{$$typeof:m,type:N,compare:G===void 0?null:G}},lt.startTransition=function(N){var G=U.transition;U.transition={};try{N()}finally{U.transition=G}},lt.unstable_act=ne,lt.useCallback=function(N,G){return me.current.useCallback(N,G)},lt.useContext=function(N){return me.current.useContext(N)},lt.useDebugValue=function(){},lt.useDeferredValue=function(N){return me.current.useDeferredValue(N)},lt.useEffect=function(N,G){return me.current.useEffect(N,G)},lt.useId=function(){return me.current.useId()},lt.useImperativeHandle=function(N,G,ye){return me.current.useImperativeHandle(N,G,ye)},lt.useInsertionEffect=function(N,G){return me.current.useInsertionEffect(N,G)},lt.useLayoutEffect=function(N,G){return me.current.useLayoutEffect(N,G)},lt.useMemo=function(N,G){return me.current.useMemo(N,G)},lt.useReducer=function(N,G,ye){return me.current.useReducer(N,G,ye)},lt.useRef=function(N){return me.current.useRef(N)},lt.useState=function(N){return me.current.useState(N)},lt.useSyncExternalStore=function(N,G,ye){return me.current.useSyncExternalStore(N,G,ye)},lt.useTransition=function(){return me.current.useTransition()},lt.version="18.3.1",lt}var cy;function Gh(){return cy||(cy=1,Wf.exports=Ab()),Wf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dy;function Db(){if(dy)return wa;dy=1;var n=Gh(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,l=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function d(h,y,m){var _,b={},x=null,C=null;m!==void 0&&(x=""+m),y.key!==void 0&&(x=""+y.key),y.ref!==void 0&&(C=y.ref);for(_ in y)o.call(y,_)&&!a.hasOwnProperty(_)&&(b[_]=y[_]);if(h&&h.defaultProps)for(_ in y=h.defaultProps,y)b[_]===void 0&&(b[_]=y[_]);return{$$typeof:e,type:h,key:x,ref:C,props:b,_owner:l.current}}return wa.Fragment=r,wa.jsx=d,wa.jsxs=d,wa}var fy;function Rb(){return fy||(fy=1,Vf.exports=Db()),Vf.exports}var R=Rb(),tt=Gh();const ol=nv(tt);var _c={},Hf={exports:{}},Mn={},qf={exports:{}},Gf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hy;function Lb(){return hy||(hy=1,(function(n){function e(U,oe){var ne=U.length;U.push(oe);e:for(;0<ne;){var N=ne-1>>>1,G=U[N];if(0<l(G,oe))U[N]=oe,U[ne]=G,ne=N;else break e}}function r(U){return U.length===0?null:U[0]}function o(U){if(U.length===0)return null;var oe=U[0],ne=U.pop();if(ne!==oe){U[0]=ne;e:for(var N=0,G=U.length,ye=G>>>1;N<ye;){var Ie=2*(N+1)-1,Ge=U[Ie],Ve=Ie+1,Re=U[Ve];if(0>l(Ge,ne))Ve<G&&0>l(Re,Ge)?(U[N]=Re,U[Ve]=ne,N=Ve):(U[N]=Ge,U[Ie]=ne,N=Ie);else if(Ve<G&&0>l(Re,ne))U[N]=Re,U[Ve]=ne,N=Ve;else break e}}return oe}function l(U,oe){var ne=U.sortIndex-oe.sortIndex;return ne!==0?ne:U.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var d=Date,h=d.now();n.unstable_now=function(){return d.now()-h}}var y=[],m=[],_=1,b=null,x=3,C=!1,j=!1,T=!1,W=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ce(U){for(var oe=r(m);oe!==null;){if(oe.callback===null)o(m);else if(oe.startTime<=U)o(m),oe.sortIndex=oe.expirationTime,e(y,oe);else break;oe=r(m)}}function ie(U){if(T=!1,ce(U),!j)if(r(y)!==null)j=!0,Ee(ee);else{var oe=r(m);oe!==null&&me(ie,oe.startTime-U)}}function ee(U,oe){j=!1,T&&(T=!1,q(se),se=-1),C=!0;var ne=x;try{for(ce(oe),b=r(y);b!==null&&(!(b.expirationTime>oe)||U&&!Ce());){var N=b.callback;if(typeof N=="function"){b.callback=null,x=b.priorityLevel;var G=N(b.expirationTime<=oe);oe=n.unstable_now(),typeof G=="function"?b.callback=G:b===r(y)&&o(y),ce(oe)}else o(y);b=r(y)}if(b!==null)var ye=!0;else{var Ie=r(m);Ie!==null&&me(ie,Ie.startTime-oe),ye=!1}return ye}finally{b=null,x=ne,C=!1}}var ve=!1,pe=null,se=-1,we=5,ke=-1;function Ce(){return!(n.unstable_now()-ke<we)}function He(){if(pe!==null){var U=n.unstable_now();ke=U;var oe=!0;try{oe=pe(!0,U)}finally{oe?be():(ve=!1,pe=null)}}else ve=!1}var be;if(typeof X=="function")be=function(){X(He)};else if(typeof MessageChannel<"u"){var Ke=new MessageChannel,Be=Ke.port2;Ke.port1.onmessage=He,be=function(){Be.postMessage(null)}}else be=function(){W(He,0)};function Ee(U){pe=U,ve||(ve=!0,be())}function me(U,oe){se=W(function(){U(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_continueExecution=function(){j||C||(j=!0,Ee(ee))},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):we=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_getFirstCallbackNode=function(){return r(y)},n.unstable_next=function(U){switch(x){case 1:case 2:case 3:var oe=3;break;default:oe=x}var ne=x;x=oe;try{return U()}finally{x=ne}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(U,oe){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ne=x;x=U;try{return oe()}finally{x=ne}},n.unstable_scheduleCallback=function(U,oe,ne){var N=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?N+ne:N):ne=N,U){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ne+G,U={id:_++,callback:oe,priorityLevel:U,startTime:ne,expirationTime:G,sortIndex:-1},ne>N?(U.sortIndex=ne,e(m,U),r(y)===null&&U===r(m)&&(T?(q(se),se=-1):T=!0,me(ie,ne-N))):(U.sortIndex=G,e(y,U),j||C||(j=!0,Ee(ee))),U},n.unstable_shouldYield=Ce,n.unstable_wrapCallback=function(U){var oe=x;return function(){var ne=x;x=oe;try{return U.apply(this,arguments)}finally{x=ne}}}})(Gf)),Gf}var py;function Mb(){return py||(py=1,qf.exports=Lb()),qf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var my;function Ub(){if(my)return Mn;my=1;var n=Gh(),e=Mb();function r(t){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)i+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,l={};function a(t,i){d(t,i),d(t+"Capture",i)}function d(t,i){for(l[t]=i,t=0;t<i.length;t++)o.add(i[t])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},b={};function x(t){return y.call(b,t)?!0:y.call(_,t)?!1:m.test(t)?b[t]=!0:(_[t]=!0,!1)}function C(t,i,s,c){if(s!==null&&s.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function j(t,i,s,c){if(i===null||typeof i>"u"||C(t,i,s,c))return!0;if(c)return!1;if(s!==null)switch(s.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function T(t,i,s,c,p,v,E){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=p,this.mustUseProperty=s,this.propertyName=t,this.type=i,this.sanitizeURL=v,this.removeEmptyString=E}var W={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){W[t]=new T(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var i=t[0];W[i]=new T(i,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){W[t]=new T(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){W[t]=new T(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){W[t]=new T(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){W[t]=new T(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){W[t]=new T(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){W[t]=new T(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){W[t]=new T(t,5,!1,t.toLowerCase(),null,!1,!1)});var q=/[\-:]([a-z])/g;function X(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var i=t.replace(q,X);W[i]=new T(i,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var i=t.replace(q,X);W[i]=new T(i,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var i=t.replace(q,X);W[i]=new T(i,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){W[t]=new T(t,1,!1,t.toLowerCase(),null,!1,!1)}),W.xlinkHref=new T("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){W[t]=new T(t,1,!1,t.toLowerCase(),null,!0,!0)});function ce(t,i,s,c){var p=W.hasOwnProperty(i)?W[i]:null;(p!==null?p.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(j(i,s,p,c)&&(s=null),c||p===null?x(i)&&(s===null?t.removeAttribute(i):t.setAttribute(i,""+s)):p.mustUseProperty?t[p.propertyName]=s===null?p.type===3?!1:"":s:(i=p.attributeName,c=p.attributeNamespace,s===null?t.removeAttribute(i):(p=p.type,s=p===3||p===4&&s===!0?"":""+s,c?t.setAttributeNS(c,i,s):t.setAttribute(i,s))))}var ie=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ee=Symbol.for("react.element"),ve=Symbol.for("react.portal"),pe=Symbol.for("react.fragment"),se=Symbol.for("react.strict_mode"),we=Symbol.for("react.profiler"),ke=Symbol.for("react.provider"),Ce=Symbol.for("react.context"),He=Symbol.for("react.forward_ref"),be=Symbol.for("react.suspense"),Ke=Symbol.for("react.suspense_list"),Be=Symbol.for("react.memo"),Ee=Symbol.for("react.lazy"),me=Symbol.for("react.offscreen"),U=Symbol.iterator;function oe(t){return t===null||typeof t!="object"?null:(t=U&&t[U]||t["@@iterator"],typeof t=="function"?t:null)}var ne=Object.assign,N;function G(t){if(N===void 0)try{throw Error()}catch(s){var i=s.stack.trim().match(/\n( *(at )?)/);N=i&&i[1]||""}return`
`+N+t}var ye=!1;function Ie(t,i){if(!t||ye)return"";ye=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(te){var c=te}Reflect.construct(t,[],i)}else{try{i.call()}catch(te){c=te}t.call(i.prototype)}else{try{throw Error()}catch(te){c=te}t()}}catch(te){if(te&&c&&typeof te.stack=="string"){for(var p=te.stack.split(`
`),v=c.stack.split(`
`),E=p.length-1,P=v.length-1;1<=E&&0<=P&&p[E]!==v[P];)P--;for(;1<=E&&0<=P;E--,P--)if(p[E]!==v[P]){if(E!==1||P!==1)do if(E--,P--,0>P||p[E]!==v[P]){var D=`
`+p[E].replace(" at new "," at ");return t.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",t.displayName)),D}while(1<=E&&0<=P);break}}}finally{ye=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?G(t):""}function Ge(t){switch(t.tag){case 5:return G(t.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return t=Ie(t.type,!1),t;case 11:return t=Ie(t.type.render,!1),t;case 1:return t=Ie(t.type,!0),t;default:return""}}function Ve(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case pe:return"Fragment";case ve:return"Portal";case we:return"Profiler";case se:return"StrictMode";case be:return"Suspense";case Ke:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ce:return(t.displayName||"Context")+".Consumer";case ke:return(t._context.displayName||"Context")+".Provider";case He:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Be:return i=t.displayName||null,i!==null?i:Ve(t.type)||"Memo";case Ee:i=t._payload,t=t._init;try{return Ve(t(i))}catch{}}return null}function Re(t){var i=t.type;switch(t.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=i.render,t=t.displayName||t.name||"",i.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ve(i);case 8:return i===se?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Ye(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function et(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function fe(t){var i=et(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),c=""+t[i];if(!t.hasOwnProperty(i)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var p=s.get,v=s.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return p.call(this)},set:function(E){c=""+E,v.call(this,E)}}),Object.defineProperty(t,i,{enumerable:s.enumerable}),{getValue:function(){return c},setValue:function(E){c=""+E},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function It(t){t._valueTracker||(t._valueTracker=fe(t))}function We(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var s=i.getValue(),c="";return t&&(c=et(t)?t.checked?"true":"false":t.value),t=c,t!==s?(i.setValue(t),!0):!1}function it(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ct(t,i){var s=i.checked;return ne({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function vt(t,i){var s=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;s=Ye(i.value!=null?i.value:s),t._wrapperState={initialChecked:c,initialValue:s,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function gn(t,i){i=i.checked,i!=null&&ce(t,"checked",i,!1)}function cr(t,i){gn(t,i);var s=Ye(i.value),c=i.type;if(s!=null)c==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(c==="submit"||c==="reset"){t.removeAttribute("value");return}i.hasOwnProperty("value")?Nl(t,i.type,s):i.hasOwnProperty("defaultValue")&&Nl(t,i.type,Ye(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(t.defaultChecked=!!i.defaultChecked)}function Fn(t,i,s){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+t._wrapperState.initialValue,s||i===t.value||(t.value=i),t.defaultValue=i}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function Nl(t,i,s){(i!=="number"||it(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var Zr=Array.isArray;function un(t,i,s,c){if(t=t.options,i){i={};for(var p=0;p<s.length;p++)i["$"+s[p]]=!0;for(s=0;s<t.length;s++)p=i.hasOwnProperty("$"+t[s].value),t[s].selected!==p&&(t[s].selected=p),p&&c&&(t[s].defaultSelected=!0)}else{for(s=""+Ye(s),i=null,p=0;p<t.length;p++){if(t[p].value===s){t[p].selected=!0,c&&(t[p].defaultSelected=!0);return}i!==null||t[p].disabled||(i=t[p])}i!==null&&(i.selected=!0)}}function bs(t,i){if(i.dangerouslySetInnerHTML!=null)throw Error(r(91));return ne({},i,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function zi(t,i){var s=i.value;if(s==null){if(s=i.children,i=i.defaultValue,s!=null){if(i!=null)throw Error(r(92));if(Zr(s)){if(1<s.length)throw Error(r(93));s=s[0]}i=s}i==null&&(i=""),s=i}t._wrapperState={initialValue:Ye(s)}}function Al(t,i){var s=Ye(i.value),c=Ye(i.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),i.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),c!=null&&(t.defaultValue=""+c)}function Fi(t){var i=t.textContent;i===t._wrapperState.initialValue&&i!==""&&i!==null&&(t.value=i)}function vn(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dr(t,i){return t==null||t==="http://www.w3.org/1999/xhtml"?vn(i):t==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Bi,$i=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,s,c,p){MSApp.execUnsafeLocalFunction(function(){return t(i,s,c,p)})}:t})(function(t,i){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=i;else{for(Bi=Bi||document.createElement("div"),Bi.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Bi.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;i.firstChild;)t.appendChild(i.firstChild)}});function ei(t,i){if(i){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=i;return}}t.textContent=i}var Ir={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ti=["Webkit","ms","Moz","O"];Object.keys(Ir).forEach(function(t){ti.forEach(function(i){i=i+t.charAt(0).toUpperCase()+t.substring(1),Ir[i]=Ir[t]})});function No(t,i,s){return i==null||typeof i=="boolean"||i===""?"":s||typeof i!="number"||i===0||Ir.hasOwnProperty(t)&&Ir[t]?(""+i).trim():i+"px"}function _s(t,i){t=t.style;for(var s in i)if(i.hasOwnProperty(s)){var c=s.indexOf("--")===0,p=No(s,i[s],c);s==="float"&&(s="cssFloat"),c?t.setProperty(s,p):t[s]=p}}var Or=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ze(t,i){if(i){if(Or[t]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(r(137,t));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(r(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(r(61))}if(i.style!=null&&typeof i.style!="object")throw Error(r(62))}}function ni(t,i){if(t.indexOf("-")===-1)return typeof i.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fr=null;function Ki(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Oe=null,jr=null,ri=null;function ks(t){if(t=ia(t)){if(typeof Oe!="function")throw Error(r(280));var i=t.stateNode;i&&(i=Lu(i),Oe(t.stateNode,t.type,i))}}function Dl(t){jr?ri?ri.push(t):ri=[t]:jr=t}function xs(){if(jr){var t=jr,i=ri;if(ri=jr=null,ks(t),i)for(t=0;t<i.length;t++)ks(i[t])}}function uu(t,i){return t(i)}function cu(){}var Tr=!1;function ii(t,i,s){if(Tr)return t(i,s);Tr=!0;try{return uu(t,i,s)}finally{Tr=!1,(jr!==null||ri!==null)&&(cu(),xs())}}function oi(t,i){var s=t.stateNode;if(s===null)return null;var c=Lu(s);if(c===null)return null;s=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(r(231,i,typeof s));return s}var Vi=!1;if(h)try{var _t={};Object.defineProperty(_t,"passive",{get:function(){Vi=!0}}),window.addEventListener("test",_t,_t),window.removeEventListener("test",_t,_t)}catch{Vi=!1}function Vt(t,i,s,c,p,v,E,P,D){var te=Array.prototype.slice.call(arguments,3);try{i.apply(s,te)}catch(de){this.onError(de)}}var Ao=!1,si=null,li=!1,Wi=null,Cd={onError:function(t){Ao=!0,si=t}};function Pr(t,i,s,c,p,v,E,P,D){Ao=!1,si=null,Vt.apply(Cd,arguments)}function Hi(t,i,s,c,p,v,E,P,D){if(Pr.apply(this,arguments),Ao){if(Ao){var te=si;Ao=!1,si=null}else throw Error(r(198));li||(li=!0,Wi=te)}}function wn(t){var i=t,s=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(s=i.return),t=i.return;while(t)}return i.tag===3?s:null}function Do(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function du(t){if(wn(t)!==t)throw Error(r(188))}function Nr(t){var i=t.alternate;if(!i){if(i=wn(t),i===null)throw Error(r(188));return i!==t?null:t}for(var s=t,c=i;;){var p=s.return;if(p===null)break;var v=p.alternate;if(v===null){if(c=p.return,c!==null){s=c;continue}break}if(p.child===v.child){for(v=p.child;v;){if(v===s)return du(p),t;if(v===c)return du(p),i;v=v.sibling}throw Error(r(188))}if(s.return!==c.return)s=p,c=v;else{for(var E=!1,P=p.child;P;){if(P===s){E=!0,s=p,c=v;break}if(P===c){E=!0,c=p,s=v;break}P=P.sibling}if(!E){for(P=v.child;P;){if(P===s){E=!0,s=v,c=p;break}if(P===c){E=!0,c=v,s=p;break}P=P.sibling}if(!E)throw Error(r(189))}}if(s.alternate!==c)throw Error(r(190))}if(s.tag!==3)throw Error(r(188));return s.stateNode.current===s?t:i}function Rl(t){return t=Nr(t),t!==null?Ar(t):null}function Ar(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var i=Ar(t);if(i!==null)return i;t=t.sibling}return null}var Ll=e.unstable_scheduleCallback,Ss=e.unstable_cancelCallback,Mt=e.unstable_shouldYield,ai=e.unstable_requestPaint,wt=e.unstable_now,fu=e.unstable_getCurrentPriorityLevel,Dr=e.unstable_ImmediatePriority,Ro=e.unstable_UserBlockingPriority,qi=e.unstable_NormalPriority,Ml=e.unstable_LowPriority,Rr=e.unstable_IdlePriority,Lo=null,In=null;function hu(t){if(In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(Lo,t,void 0,(t.current.flags&128)===128)}catch{}}var Xe=Math.clz32?Math.clz32:Es,pu=Math.log,mu=Math.LN2;function Es(t){return t>>>=0,t===0?32:31-(pu(t)/mu|0)|0}var Lr=64,Mo=4194304;function Gi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Uo(t,i){var s=t.pendingLanes;if(s===0)return 0;var c=0,p=t.suspendedLanes,v=t.pingedLanes,E=s&268435455;if(E!==0){var P=E&~p;P!==0?c=Gi(P):(v&=E,v!==0&&(c=Gi(v)))}else E=s&~p,E!==0?c=Gi(E):v!==0&&(c=Gi(v));if(c===0)return 0;if(i!==0&&i!==c&&(i&p)===0&&(p=c&-c,v=i&-i,p>=v||p===16&&(v&4194240)!==0))return i;if((c&4)!==0&&(c|=s&16),i=t.entangledLanes,i!==0)for(t=t.entanglements,i&=c;0<i;)s=31-Xe(i),p=1<<s,c|=t[s],i&=~p;return c}function St(t,i){switch(t){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zo(t,i){for(var s=t.suspendedLanes,c=t.pingedLanes,p=t.expirationTimes,v=t.pendingLanes;0<v;){var E=31-Xe(v),P=1<<E,D=p[E];D===-1?((P&s)===0||(P&c)!==0)&&(p[E]=St(P,i)):D<=i&&(t.expiredLanes|=P),v&=~P}}function ui(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ci(){var t=Lr;return Lr<<=1,(Lr&4194240)===0&&(Lr=64),t}function Fo(t){for(var i=[],s=0;31>s;s++)i.push(t);return i}function di(t,i,s){t.pendingLanes|=i,i!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,i=31-Xe(i),t[i]=s}function Cs(t,i){var s=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;var c=t.eventTimes;for(t=t.expirationTimes;0<s;){var p=31-Xe(s),v=1<<p;i[p]=0,c[p]=-1,t[p]=-1,s&=~v}}function Is(t,i){var s=t.entangledLanes|=i;for(t=t.entanglements;s;){var c=31-Xe(s),p=1<<c;p&i|t[c]&i&&(t[c]|=i),s&=~p}}var ht=0;function Ul(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var yu,dt,zl,gu,vu,cn=!1,hr=[],Bn=null,dn=null,pr=null,Yi=new Map,Dt=new Map,qt=[],Bo="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qi(t,i){switch(t){case"focusin":case"focusout":Bn=null;break;case"dragenter":case"dragleave":dn=null;break;case"mouseover":case"mouseout":pr=null;break;case"pointerover":case"pointerout":Yi.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(i.pointerId)}}function fi(t,i,s,c,p,v){return t===null||t.nativeEvent!==v?(t={blockedOn:i,domEventName:s,eventSystemFlags:c,nativeEvent:v,targetContainers:[p]},i!==null&&(i=ia(i),i!==null&&dt(i)),t):(t.eventSystemFlags|=c,i=t.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),t)}function Mr(t,i,s,c,p){switch(i){case"focusin":return Bn=fi(Bn,t,i,s,c,p),!0;case"dragenter":return dn=fi(dn,t,i,s,c,p),!0;case"mouseover":return pr=fi(pr,t,i,s,c,p),!0;case"pointerover":var v=p.pointerId;return Yi.set(v,fi(Yi.get(v)||null,t,i,s,c,p)),!0;case"gotpointercapture":return v=p.pointerId,Dt.set(v,fi(Dt.get(v)||null,t,i,s,c,p)),!0}return!1}function wu(t){var i=Yo(t.target);if(i!==null){var s=wn(i);if(s!==null){if(i=s.tag,i===13){if(i=Do(s),i!==null){t.blockedOn=i,vu(t.priority,function(){zl(s)});return}}else if(i===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function On(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var s=Ji(t.domEventName,t.eventSystemFlags,i[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var c=new s.constructor(s.type,s);fr=c,s.target.dispatchEvent(c),fr=null}else return i=ia(s),i!==null&&dt(i),t.blockedOn=s,!1;i.shift()}return!0}function Os(t,i,s){On(t)&&s.delete(i)}function bu(){cn=!1,Bn!==null&&On(Bn)&&(Bn=null),dn!==null&&On(dn)&&(dn=null),pr!==null&&On(pr)&&(pr=null),Yi.forEach(Os),Dt.forEach(Os)}function hi(t,i){t.blockedOn===i&&(t.blockedOn=null,cn||(cn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,bu)))}function mr(t){function i(p){return hi(p,t)}if(0<hr.length){hi(hr[0],t);for(var s=1;s<hr.length;s++){var c=hr[s];c.blockedOn===t&&(c.blockedOn=null)}}for(Bn!==null&&hi(Bn,t),dn!==null&&hi(dn,t),pr!==null&&hi(pr,t),Yi.forEach(i),Dt.forEach(i),s=0;s<qt.length;s++)c=qt[s],c.blockedOn===t&&(c.blockedOn=null);for(;0<qt.length&&(s=qt[0],s.blockedOn===null);)wu(s),s.blockedOn===null&&qt.shift()}var Ur=ie.ReactCurrentBatchConfig,$o=!0;function Id(t,i,s,c){var p=ht,v=Ur.transition;Ur.transition=null;try{ht=1,Fl(t,i,s,c)}finally{ht=p,Ur.transition=v}}function Ko(t,i,s,c){var p=ht,v=Ur.transition;Ur.transition=null;try{ht=4,Fl(t,i,s,c)}finally{ht=p,Ur.transition=v}}function Fl(t,i,s,c){if($o){var p=Ji(t,i,s,c);if(p===null)Ad(t,i,c,js,s),Qi(t,c);else if(Mr(p,t,i,s,c))c.stopPropagation();else if(Qi(t,c),i&4&&-1<Bo.indexOf(t)){for(;p!==null;){var v=ia(p);if(v!==null&&yu(v),v=Ji(t,i,s,c),v===null&&Ad(t,i,c,js,s),v===p)break;p=v}p!==null&&c.stopPropagation()}else Ad(t,i,c,null,s)}}var js=null;function Ji(t,i,s,c){if(js=null,t=Ki(c),t=Yo(t),t!==null)if(i=wn(t),i===null)t=null;else if(s=i.tag,s===13){if(t=Do(i),t!==null)return t;t=null}else if(s===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null);return js=t,null}function Vo(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fu()){case Dr:return 1;case Ro:return 4;case qi:case Ml:return 16;case Rr:return 536870912;default:return 16}default:return 16}}var Jn=null,Bl=null,Ts=null;function _u(){if(Ts)return Ts;var t,i=Bl,s=i.length,c,p="value"in Jn?Jn.value:Jn.textContent,v=p.length;for(t=0;t<s&&i[t]===p[t];t++);var E=s-t;for(c=1;c<=E&&i[s-c]===p[v-c];c++);return Ts=p.slice(t,1<c?1-c:void 0)}function Xi(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Zi(){return!0}function $l(){return!1}function tn(t){function i(s,c,p,v,E){this._reactName=s,this._targetInst=p,this.type=c,this.nativeEvent=v,this.target=E,this.currentTarget=null;for(var P in t)t.hasOwnProperty(P)&&(s=t[P],this[P]=s?s(v):v[P]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Zi:$l,this.isPropagationStopped=$l,this}return ne(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Zi)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Zi)},persist:function(){},isPersistent:Zi}),i}var yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eo=tn(yr),to=ne({},yr,{view:0,detail:0}),Od=tn(to),zr,Wo,pi,no=ne({},to,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ls,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==pi&&(pi&&t.type==="mousemove"?(zr=t.screenX-pi.screenX,Wo=t.screenY-pi.screenY):Wo=zr=0,pi=t),zr)},movementY:function(t){return"movementY"in t?t.movementY:Wo}}),Ps=tn(no),nn=ne({},no,{dataTransfer:0}),Ho=tn(nn),qo=ne({},to,{relatedTarget:0}),Ns=tn(qo),As=ne({},yr,{animationName:0,elapsedTime:0,pseudoElement:0}),ku=tn(As),xu=ne({},yr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ds=tn(xu),Kl=ne({},yr,{data:0}),Fr=tn(Kl),Vl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rs={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hl(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Rs[t])?!!i[t]:!1}function Ls(){return Hl}var jd=ne({},to,{key:function(t){if(t.key){var i=Vl[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Xi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Wl[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ls,charCode:function(t){return t.type==="keypress"?Xi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ql=tn(jd),Ms=ne({},no,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Su=tn(Ms),Gl=ne({},to,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ls}),Yl=tn(Gl),Td=ne({},yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Eu=tn(Td),Pd=ne({},no,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Cu=tn(Pd),Iu=[9,13,27,32],Ql=h&&"CompositionEvent"in window,ro=null;h&&"documentMode"in document&&(ro=document.documentMode);var Jl=h&&"TextEvent"in window&&!ro,Xl=h&&(!Ql||ro&&8<ro&&11>=ro),Zl=" ",Ou=!1;function ju(t,i){switch(t){case"keyup":return Iu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tu(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var gr=!1;function vr(t,i){switch(t){case"compositionend":return Tu(i);case"keypress":return i.which!==32?null:(Ou=!0,Zl);case"textInput":return t=i.data,t===Zl&&Ou?null:t;default:return null}}function Ut(t,i){if(gr)return t==="compositionend"||!Ql&&ju(t,i)?(t=_u(),Ts=Bl=Jn=null,gr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Xl&&i.locale!=="ko"?null:i.data;default:return null}}var Us={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mi(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Us[t.type]:i==="textarea"}function Pu(t,i,s,c){Dl(c),i=Au(i,"onChange"),0<i.length&&(s=new eo("onChange","change",null,s,c),t.push({event:s,listeners:i}))}var yi=null,io=null;function gi(t){Ep(t,0)}function oo(t){var i=$s(t);if(We(i))return t}function so(t,i){if(t==="change")return i}var wr=!1;if(h){var zs;if(h){var u="oninput"in document;if(!u){var f=document.createElement("div");f.setAttribute("oninput","return;"),u=typeof f.oninput=="function"}zs=u}else zs=!1;wr=zs&&(!document.documentMode||9<document.documentMode)}function g(){yi&&(yi.detachEvent("onpropertychange",w),io=yi=null)}function w(t){if(t.propertyName==="value"&&oo(io)){var i=[];Pu(i,io,t,Ki(t)),ii(gi,i)}}function k(t,i,s){t==="focusin"?(g(),yi=i,io=s,yi.attachEvent("onpropertychange",w)):t==="focusout"&&g()}function S(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return oo(io)}function I(t,i){if(t==="click")return oo(i)}function O(t,i){if(t==="input"||t==="change")return oo(i)}function F(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var V=typeof Object.is=="function"?Object.is:F;function L(t,i){if(V(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var s=Object.keys(t),c=Object.keys(i);if(s.length!==c.length)return!1;for(c=0;c<s.length;c++){var p=s[c];if(!y.call(i,p)||!V(t[p],i[p]))return!1}return!0}function A(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function B(t,i){var s=A(t);t=0;for(var c;s;){if(s.nodeType===3){if(c=t+s.textContent.length,t<=i&&c>=i)return{node:s,offset:i-t};t=c}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=A(s)}}function $(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?$(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function z(){for(var t=window,i=it();i instanceof t.HTMLIFrameElement;){try{var s=typeof i.contentWindow.location.href=="string"}catch{s=!1}if(s)t=i.contentWindow;else break;i=it(t.document)}return i}function M(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}function Q(t){var i=z(),s=t.focusedElem,c=t.selectionRange;if(i!==s&&s&&s.ownerDocument&&$(s.ownerDocument.documentElement,s)){if(c!==null&&M(s)){if(i=c.start,t=c.end,t===void 0&&(t=i),"selectionStart"in s)s.selectionStart=i,s.selectionEnd=Math.min(t,s.value.length);else if(t=(i=s.ownerDocument||document)&&i.defaultView||window,t.getSelection){t=t.getSelection();var p=s.textContent.length,v=Math.min(c.start,p);c=c.end===void 0?v:Math.min(c.end,p),!t.extend&&v>c&&(p=c,c=v,v=p),p=B(s,v);var E=B(s,c);p&&E&&(t.rangeCount!==1||t.anchorNode!==p.node||t.anchorOffset!==p.offset||t.focusNode!==E.node||t.focusOffset!==E.offset)&&(i=i.createRange(),i.setStart(p.node,p.offset),t.removeAllRanges(),v>c?(t.addRange(i),t.extend(E.node,E.offset)):(i.setEnd(E.node,E.offset),t.addRange(i)))}}for(i=[],t=s;t=t.parentNode;)t.nodeType===1&&i.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<i.length;s++)t=i[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Z=h&&"documentMode"in document&&11>=document.documentMode,H=null,re=null,le=null,xe=!1;function Se(t,i,s){var c=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;xe||H==null||H!==it(c)||(c=H,"selectionStart"in c&&M(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),le&&L(le,c)||(le=c,c=Au(re,"onSelect"),0<c.length&&(i=new eo("onSelect","select",null,i,s),t.push({event:i,listeners:c}),i.target=H)))}function ue(t,i){var s={};return s[t.toLowerCase()]=i.toLowerCase(),s["Webkit"+t]="webkit"+i,s["Moz"+t]="moz"+i,s}var Te={animationend:ue("Animation","AnimationEnd"),animationiteration:ue("Animation","AnimationIteration"),animationstart:ue("Animation","AnimationStart"),transitionend:ue("Transition","TransitionEnd")},je={},ge={};h&&(ge=document.createElement("div").style,"AnimationEvent"in window||(delete Te.animationend.animation,delete Te.animationiteration.animation,delete Te.animationstart.animation),"TransitionEvent"in window||delete Te.transitionend.transition);function Ne(t){if(je[t])return je[t];if(!Te[t])return t;var i=Te[t],s;for(s in i)if(i.hasOwnProperty(s)&&s in ge)return je[t]=i[s];return t}var ut=Ne("animationend"),ft=Ne("animationiteration"),qe=Ne("animationstart"),nt=Ne("transitionend"),jt=new Map,jn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bt(t,i){jt.set(t,i),a(i,[t])}for(var br=0;br<jn.length;br++){var Go=jn[br],zw=Go.toLowerCase(),Fw=Go[0].toUpperCase()+Go.slice(1);bt(zw,"on"+Fw)}bt(ut,"onAnimationEnd"),bt(ft,"onAnimationIteration"),bt(qe,"onAnimationStart"),bt("dblclick","onDoubleClick"),bt("focusin","onFocus"),bt("focusout","onBlur"),bt(nt,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ea="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bw=new Set("cancel close invalid load scroll toggle".split(" ").concat(ea));function Sp(t,i,s){var c=t.type||"unknown-event";t.currentTarget=s,Hi(c,i,void 0,t),t.currentTarget=null}function Ep(t,i){i=(i&4)!==0;for(var s=0;s<t.length;s++){var c=t[s],p=c.event;c=c.listeners;e:{var v=void 0;if(i)for(var E=c.length-1;0<=E;E--){var P=c[E],D=P.instance,te=P.currentTarget;if(P=P.listener,D!==v&&p.isPropagationStopped())break e;Sp(p,P,te),v=D}else for(E=0;E<c.length;E++){if(P=c[E],D=P.instance,te=P.currentTarget,P=P.listener,D!==v&&p.isPropagationStopped())break e;Sp(p,P,te),v=D}}}if(li)throw t=Wi,li=!1,Wi=null,t}function Pt(t,i){var s=i[zd];s===void 0&&(s=i[zd]=new Set);var c=t+"__bubble";s.has(c)||(Cp(i,t,2,!1),s.add(c))}function Nd(t,i,s){var c=0;i&&(c|=4),Cp(s,t,c,i)}var Nu="_reactListening"+Math.random().toString(36).slice(2);function ta(t){if(!t[Nu]){t[Nu]=!0,o.forEach(function(s){s!=="selectionchange"&&(Bw.has(s)||Nd(s,!1,t),Nd(s,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Nu]||(i[Nu]=!0,Nd("selectionchange",!1,i))}}function Cp(t,i,s,c){switch(Vo(i)){case 1:var p=Id;break;case 4:p=Ko;break;default:p=Fl}s=p.bind(null,i,s,t),p=void 0,!Vi||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),c?p!==void 0?t.addEventListener(i,s,{capture:!0,passive:p}):t.addEventListener(i,s,!0):p!==void 0?t.addEventListener(i,s,{passive:p}):t.addEventListener(i,s,!1)}function Ad(t,i,s,c,p){var v=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var E=c.tag;if(E===3||E===4){var P=c.stateNode.containerInfo;if(P===p||P.nodeType===8&&P.parentNode===p)break;if(E===4)for(E=c.return;E!==null;){var D=E.tag;if((D===3||D===4)&&(D=E.stateNode.containerInfo,D===p||D.nodeType===8&&D.parentNode===p))return;E=E.return}for(;P!==null;){if(E=Yo(P),E===null)return;if(D=E.tag,D===5||D===6){c=v=E;continue e}P=P.parentNode}}c=c.return}ii(function(){var te=v,de=Ki(s),he=[];e:{var ae=jt.get(t);if(ae!==void 0){var Ae=eo,Le=t;switch(t){case"keypress":if(Xi(s)===0)break e;case"keydown":case"keyup":Ae=ql;break;case"focusin":Le="focus",Ae=Ns;break;case"focusout":Le="blur",Ae=Ns;break;case"beforeblur":case"afterblur":Ae=Ns;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ae=Ps;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ae=Ho;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ae=Yl;break;case ut:case ft:case qe:Ae=ku;break;case nt:Ae=Eu;break;case"scroll":Ae=Od;break;case"wheel":Ae=Cu;break;case"copy":case"cut":case"paste":Ae=Ds;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ae=Su}var Fe=(i&4)!==0,$t=!Fe&&t==="scroll",Y=Fe?ae!==null?ae+"Capture":null:ae;Fe=[];for(var K=te,J;K!==null;){J=K;var _e=J.stateNode;if(J.tag===5&&_e!==null&&(J=_e,Y!==null&&(_e=oi(K,Y),_e!=null&&Fe.push(na(K,_e,J)))),$t)break;K=K.return}0<Fe.length&&(ae=new Ae(ae,Le,null,s,de),he.push({event:ae,listeners:Fe}))}}if((i&7)===0){e:{if(ae=t==="mouseover"||t==="pointerover",Ae=t==="mouseout"||t==="pointerout",ae&&s!==fr&&(Le=s.relatedTarget||s.fromElement)&&(Yo(Le)||Le[vi]))break e;if((Ae||ae)&&(ae=de.window===de?de:(ae=de.ownerDocument)?ae.defaultView||ae.parentWindow:window,Ae?(Le=s.relatedTarget||s.toElement,Ae=te,Le=Le?Yo(Le):null,Le!==null&&($t=wn(Le),Le!==$t||Le.tag!==5&&Le.tag!==6)&&(Le=null)):(Ae=null,Le=te),Ae!==Le)){if(Fe=Ps,_e="onMouseLeave",Y="onMouseEnter",K="mouse",(t==="pointerout"||t==="pointerover")&&(Fe=Su,_e="onPointerLeave",Y="onPointerEnter",K="pointer"),$t=Ae==null?ae:$s(Ae),J=Le==null?ae:$s(Le),ae=new Fe(_e,K+"leave",Ae,s,de),ae.target=$t,ae.relatedTarget=J,_e=null,Yo(de)===te&&(Fe=new Fe(Y,K+"enter",Le,s,de),Fe.target=J,Fe.relatedTarget=$t,_e=Fe),$t=_e,Ae&&Le)t:{for(Fe=Ae,Y=Le,K=0,J=Fe;J;J=Fs(J))K++;for(J=0,_e=Y;_e;_e=Fs(_e))J++;for(;0<K-J;)Fe=Fs(Fe),K--;for(;0<J-K;)Y=Fs(Y),J--;for(;K--;){if(Fe===Y||Y!==null&&Fe===Y.alternate)break t;Fe=Fs(Fe),Y=Fs(Y)}Fe=null}else Fe=null;Ae!==null&&Ip(he,ae,Ae,Fe,!1),Le!==null&&$t!==null&&Ip(he,$t,Le,Fe,!0)}}e:{if(ae=te?$s(te):window,Ae=ae.nodeName&&ae.nodeName.toLowerCase(),Ae==="select"||Ae==="input"&&ae.type==="file")var $e=so;else if(mi(ae))if(wr)$e=O;else{$e=S;var Qe=k}else(Ae=ae.nodeName)&&Ae.toLowerCase()==="input"&&(ae.type==="checkbox"||ae.type==="radio")&&($e=I);if($e&&($e=$e(t,te))){Pu(he,$e,s,de);break e}Qe&&Qe(t,ae,te),t==="focusout"&&(Qe=ae._wrapperState)&&Qe.controlled&&ae.type==="number"&&Nl(ae,"number",ae.value)}switch(Qe=te?$s(te):window,t){case"focusin":(mi(Qe)||Qe.contentEditable==="true")&&(H=Qe,re=te,le=null);break;case"focusout":le=re=H=null;break;case"mousedown":xe=!0;break;case"contextmenu":case"mouseup":case"dragend":xe=!1,Se(he,s,de);break;case"selectionchange":if(Z)break;case"keydown":case"keyup":Se(he,s,de)}var Je;if(Ql)e:{switch(t){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else gr?ju(t,s)&&(Ze="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(Ze="onCompositionStart");Ze&&(Xl&&s.locale!=="ko"&&(gr||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&gr&&(Je=_u()):(Jn=de,Bl="value"in Jn?Jn.value:Jn.textContent,gr=!0)),Qe=Au(te,Ze),0<Qe.length&&(Ze=new Fr(Ze,t,null,s,de),he.push({event:Ze,listeners:Qe}),Je?Ze.data=Je:(Je=Tu(s),Je!==null&&(Ze.data=Je)))),(Je=Jl?vr(t,s):Ut(t,s))&&(te=Au(te,"onBeforeInput"),0<te.length&&(de=new Fr("onBeforeInput","beforeinput",null,s,de),he.push({event:de,listeners:te}),de.data=Je))}Ep(he,i)})}function na(t,i,s){return{instance:t,listener:i,currentTarget:s}}function Au(t,i){for(var s=i+"Capture",c=[];t!==null;){var p=t,v=p.stateNode;p.tag===5&&v!==null&&(p=v,v=oi(t,s),v!=null&&c.unshift(na(t,v,p)),v=oi(t,i),v!=null&&c.push(na(t,v,p))),t=t.return}return c}function Fs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ip(t,i,s,c,p){for(var v=i._reactName,E=[];s!==null&&s!==c;){var P=s,D=P.alternate,te=P.stateNode;if(D!==null&&D===c)break;P.tag===5&&te!==null&&(P=te,p?(D=oi(s,v),D!=null&&E.unshift(na(s,D,P))):p||(D=oi(s,v),D!=null&&E.push(na(s,D,P)))),s=s.return}E.length!==0&&t.push({event:i,listeners:E})}var $w=/\r\n?/g,Kw=/\u0000|\uFFFD/g;function Op(t){return(typeof t=="string"?t:""+t).replace($w,`
`).replace(Kw,"")}function Du(t,i,s){if(i=Op(i),Op(t)!==i&&s)throw Error(r(425))}function Ru(){}var Dd=null,Rd=null;function Ld(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Md=typeof setTimeout=="function"?setTimeout:void 0,Vw=typeof clearTimeout=="function"?clearTimeout:void 0,jp=typeof Promise=="function"?Promise:void 0,Ww=typeof queueMicrotask=="function"?queueMicrotask:typeof jp<"u"?function(t){return jp.resolve(null).then(t).catch(Hw)}:Md;function Hw(t){setTimeout(function(){throw t})}function Ud(t,i){var s=i,c=0;do{var p=s.nextSibling;if(t.removeChild(s),p&&p.nodeType===8)if(s=p.data,s==="/$"){if(c===0){t.removeChild(p),mr(i);return}c--}else s!=="$"&&s!=="$?"&&s!=="$!"||c++;s=p}while(s);mr(i)}function lo(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return t}function Tp(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(i===0)return t;i--}else s==="/$"&&i++}t=t.previousSibling}return null}var Bs=Math.random().toString(36).slice(2),Br="__reactFiber$"+Bs,ra="__reactProps$"+Bs,vi="__reactContainer$"+Bs,zd="__reactEvents$"+Bs,qw="__reactListeners$"+Bs,Gw="__reactHandles$"+Bs;function Yo(t){var i=t[Br];if(i)return i;for(var s=t.parentNode;s;){if(i=s[vi]||s[Br]){if(s=i.alternate,i.child!==null||s!==null&&s.child!==null)for(t=Tp(t);t!==null;){if(s=t[Br])return s;t=Tp(t)}return i}t=s,s=t.parentNode}return null}function ia(t){return t=t[Br]||t[vi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $s(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(r(33))}function Lu(t){return t[ra]||null}var Fd=[],Ks=-1;function ao(t){return{current:t}}function Nt(t){0>Ks||(t.current=Fd[Ks],Fd[Ks]=null,Ks--)}function Tt(t,i){Ks++,Fd[Ks]=t.current,t.current=i}var uo={},bn=ao(uo),Nn=ao(!1),Qo=uo;function Vs(t,i){var s=t.type.contextTypes;if(!s)return uo;var c=t.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var p={},v;for(v in s)p[v]=i[v];return c&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=p),p}function An(t){return t=t.childContextTypes,t!=null}function Mu(){Nt(Nn),Nt(bn)}function Pp(t,i,s){if(bn.current!==uo)throw Error(r(168));Tt(bn,i),Tt(Nn,s)}function Np(t,i,s){var c=t.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return s;c=c.getChildContext();for(var p in c)if(!(p in i))throw Error(r(108,Re(t)||"Unknown",p));return ne({},s,c)}function Uu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||uo,Qo=bn.current,Tt(bn,t),Tt(Nn,Nn.current),!0}function Ap(t,i,s){var c=t.stateNode;if(!c)throw Error(r(169));s?(t=Np(t,i,Qo),c.__reactInternalMemoizedMergedChildContext=t,Nt(Nn),Nt(bn),Tt(bn,t)):Nt(Nn),Tt(Nn,s)}var wi=null,zu=!1,Bd=!1;function Dp(t){wi===null?wi=[t]:wi.push(t)}function Yw(t){zu=!0,Dp(t)}function co(){if(!Bd&&wi!==null){Bd=!0;var t=0,i=ht;try{var s=wi;for(ht=1;t<s.length;t++){var c=s[t];do c=c(!0);while(c!==null)}wi=null,zu=!1}catch(p){throw wi!==null&&(wi=wi.slice(t+1)),Ll(Dr,co),p}finally{ht=i,Bd=!1}}return null}var Ws=[],Hs=0,Fu=null,Bu=0,Xn=[],Zn=0,Jo=null,bi=1,_i="";function Xo(t,i){Ws[Hs++]=Bu,Ws[Hs++]=Fu,Fu=t,Bu=i}function Rp(t,i,s){Xn[Zn++]=bi,Xn[Zn++]=_i,Xn[Zn++]=Jo,Jo=t;var c=bi;t=_i;var p=32-Xe(c)-1;c&=~(1<<p),s+=1;var v=32-Xe(i)+p;if(30<v){var E=p-p%5;v=(c&(1<<E)-1).toString(32),c>>=E,p-=E,bi=1<<32-Xe(i)+p|s<<p|c,_i=v+t}else bi=1<<v|s<<p|c,_i=t}function $d(t){t.return!==null&&(Xo(t,1),Rp(t,1,0))}function Kd(t){for(;t===Fu;)Fu=Ws[--Hs],Ws[Hs]=null,Bu=Ws[--Hs],Ws[Hs]=null;for(;t===Jo;)Jo=Xn[--Zn],Xn[Zn]=null,_i=Xn[--Zn],Xn[Zn]=null,bi=Xn[--Zn],Xn[Zn]=null}var $n=null,Kn=null,Rt=!1,_r=null;function Lp(t,i){var s=rr(5,null,null,0);s.elementType="DELETED",s.stateNode=i,s.return=t,i=t.deletions,i===null?(t.deletions=[s],t.flags|=16):i.push(s)}function Mp(t,i){switch(t.tag){case 5:var s=t.type;return i=i.nodeType!==1||s.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(t.stateNode=i,$n=t,Kn=lo(i.firstChild),!0):!1;case 6:return i=t.pendingProps===""||i.nodeType!==3?null:i,i!==null?(t.stateNode=i,$n=t,Kn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(s=Jo!==null?{id:bi,overflow:_i}:null,t.memoizedState={dehydrated:i,treeContext:s,retryLane:1073741824},s=rr(18,null,null,0),s.stateNode=i,s.return=t,t.child=s,$n=t,Kn=null,!0):!1;default:return!1}}function Vd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Wd(t){if(Rt){var i=Kn;if(i){var s=i;if(!Mp(t,i)){if(Vd(t))throw Error(r(418));i=lo(s.nextSibling);var c=$n;i&&Mp(t,i)?Lp(c,s):(t.flags=t.flags&-4097|2,Rt=!1,$n=t)}}else{if(Vd(t))throw Error(r(418));t.flags=t.flags&-4097|2,Rt=!1,$n=t}}}function Up(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$n=t}function $u(t){if(t!==$n)return!1;if(!Rt)return Up(t),Rt=!0,!1;var i;if((i=t.tag!==3)&&!(i=t.tag!==5)&&(i=t.type,i=i!=="head"&&i!=="body"&&!Ld(t.type,t.memoizedProps)),i&&(i=Kn)){if(Vd(t))throw zp(),Error(r(418));for(;i;)Lp(t,i),i=lo(i.nextSibling)}if(Up(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(i===0){Kn=lo(t.nextSibling);break e}i--}else s!=="$"&&s!=="$!"&&s!=="$?"||i++}t=t.nextSibling}Kn=null}}else Kn=$n?lo(t.stateNode.nextSibling):null;return!0}function zp(){for(var t=Kn;t;)t=lo(t.nextSibling)}function qs(){Kn=$n=null,Rt=!1}function Hd(t){_r===null?_r=[t]:_r.push(t)}var Qw=ie.ReactCurrentBatchConfig;function oa(t,i,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(r(309));var c=s.stateNode}if(!c)throw Error(r(147,t));var p=c,v=""+t;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===v?i.ref:(i=function(E){var P=p.refs;E===null?delete P[v]:P[v]=E},i._stringRef=v,i)}if(typeof t!="string")throw Error(r(284));if(!s._owner)throw Error(r(290,t))}return t}function Ku(t,i){throw t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t))}function Fp(t){var i=t._init;return i(t._payload)}function Bp(t){function i(Y,K){if(t){var J=Y.deletions;J===null?(Y.deletions=[K],Y.flags|=16):J.push(K)}}function s(Y,K){if(!t)return null;for(;K!==null;)i(Y,K),K=K.sibling;return null}function c(Y,K){for(Y=new Map;K!==null;)K.key!==null?Y.set(K.key,K):Y.set(K.index,K),K=K.sibling;return Y}function p(Y,K){return Y=wo(Y,K),Y.index=0,Y.sibling=null,Y}function v(Y,K,J){return Y.index=J,t?(J=Y.alternate,J!==null?(J=J.index,J<K?(Y.flags|=2,K):J):(Y.flags|=2,K)):(Y.flags|=1048576,K)}function E(Y){return t&&Y.alternate===null&&(Y.flags|=2),Y}function P(Y,K,J,_e){return K===null||K.tag!==6?(K=Uf(J,Y.mode,_e),K.return=Y,K):(K=p(K,J),K.return=Y,K)}function D(Y,K,J,_e){var $e=J.type;return $e===pe?de(Y,K,J.props.children,_e,J.key):K!==null&&(K.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===Ee&&Fp($e)===K.type)?(_e=p(K,J.props),_e.ref=oa(Y,K,J),_e.return=Y,_e):(_e=hc(J.type,J.key,J.props,null,Y.mode,_e),_e.ref=oa(Y,K,J),_e.return=Y,_e)}function te(Y,K,J,_e){return K===null||K.tag!==4||K.stateNode.containerInfo!==J.containerInfo||K.stateNode.implementation!==J.implementation?(K=zf(J,Y.mode,_e),K.return=Y,K):(K=p(K,J.children||[]),K.return=Y,K)}function de(Y,K,J,_e,$e){return K===null||K.tag!==7?(K=ss(J,Y.mode,_e,$e),K.return=Y,K):(K=p(K,J),K.return=Y,K)}function he(Y,K,J){if(typeof K=="string"&&K!==""||typeof K=="number")return K=Uf(""+K,Y.mode,J),K.return=Y,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case ee:return J=hc(K.type,K.key,K.props,null,Y.mode,J),J.ref=oa(Y,null,K),J.return=Y,J;case ve:return K=zf(K,Y.mode,J),K.return=Y,K;case Ee:var _e=K._init;return he(Y,_e(K._payload),J)}if(Zr(K)||oe(K))return K=ss(K,Y.mode,J,null),K.return=Y,K;Ku(Y,K)}return null}function ae(Y,K,J,_e){var $e=K!==null?K.key:null;if(typeof J=="string"&&J!==""||typeof J=="number")return $e!==null?null:P(Y,K,""+J,_e);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case ee:return J.key===$e?D(Y,K,J,_e):null;case ve:return J.key===$e?te(Y,K,J,_e):null;case Ee:return $e=J._init,ae(Y,K,$e(J._payload),_e)}if(Zr(J)||oe(J))return $e!==null?null:de(Y,K,J,_e,null);Ku(Y,J)}return null}function Ae(Y,K,J,_e,$e){if(typeof _e=="string"&&_e!==""||typeof _e=="number")return Y=Y.get(J)||null,P(K,Y,""+_e,$e);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case ee:return Y=Y.get(_e.key===null?J:_e.key)||null,D(K,Y,_e,$e);case ve:return Y=Y.get(_e.key===null?J:_e.key)||null,te(K,Y,_e,$e);case Ee:var Qe=_e._init;return Ae(Y,K,J,Qe(_e._payload),$e)}if(Zr(_e)||oe(_e))return Y=Y.get(J)||null,de(K,Y,_e,$e,null);Ku(K,_e)}return null}function Le(Y,K,J,_e){for(var $e=null,Qe=null,Je=K,Ze=K=0,sn=null;Je!==null&&Ze<J.length;Ze++){Je.index>Ze?(sn=Je,Je=null):sn=Je.sibling;var gt=ae(Y,Je,J[Ze],_e);if(gt===null){Je===null&&(Je=sn);break}t&&Je&&gt.alternate===null&&i(Y,Je),K=v(gt,K,Ze),Qe===null?$e=gt:Qe.sibling=gt,Qe=gt,Je=sn}if(Ze===J.length)return s(Y,Je),Rt&&Xo(Y,Ze),$e;if(Je===null){for(;Ze<J.length;Ze++)Je=he(Y,J[Ze],_e),Je!==null&&(K=v(Je,K,Ze),Qe===null?$e=Je:Qe.sibling=Je,Qe=Je);return Rt&&Xo(Y,Ze),$e}for(Je=c(Y,Je);Ze<J.length;Ze++)sn=Ae(Je,Y,Ze,J[Ze],_e),sn!==null&&(t&&sn.alternate!==null&&Je.delete(sn.key===null?Ze:sn.key),K=v(sn,K,Ze),Qe===null?$e=sn:Qe.sibling=sn,Qe=sn);return t&&Je.forEach(function(bo){return i(Y,bo)}),Rt&&Xo(Y,Ze),$e}function Fe(Y,K,J,_e){var $e=oe(J);if(typeof $e!="function")throw Error(r(150));if(J=$e.call(J),J==null)throw Error(r(151));for(var Qe=$e=null,Je=K,Ze=K=0,sn=null,gt=J.next();Je!==null&&!gt.done;Ze++,gt=J.next()){Je.index>Ze?(sn=Je,Je=null):sn=Je.sibling;var bo=ae(Y,Je,gt.value,_e);if(bo===null){Je===null&&(Je=sn);break}t&&Je&&bo.alternate===null&&i(Y,Je),K=v(bo,K,Ze),Qe===null?$e=bo:Qe.sibling=bo,Qe=bo,Je=sn}if(gt.done)return s(Y,Je),Rt&&Xo(Y,Ze),$e;if(Je===null){for(;!gt.done;Ze++,gt=J.next())gt=he(Y,gt.value,_e),gt!==null&&(K=v(gt,K,Ze),Qe===null?$e=gt:Qe.sibling=gt,Qe=gt);return Rt&&Xo(Y,Ze),$e}for(Je=c(Y,Je);!gt.done;Ze++,gt=J.next())gt=Ae(Je,Y,Ze,gt.value,_e),gt!==null&&(t&&gt.alternate!==null&&Je.delete(gt.key===null?Ze:gt.key),K=v(gt,K,Ze),Qe===null?$e=gt:Qe.sibling=gt,Qe=gt);return t&&Je.forEach(function(jb){return i(Y,jb)}),Rt&&Xo(Y,Ze),$e}function $t(Y,K,J,_e){if(typeof J=="object"&&J!==null&&J.type===pe&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case ee:e:{for(var $e=J.key,Qe=K;Qe!==null;){if(Qe.key===$e){if($e=J.type,$e===pe){if(Qe.tag===7){s(Y,Qe.sibling),K=p(Qe,J.props.children),K.return=Y,Y=K;break e}}else if(Qe.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===Ee&&Fp($e)===Qe.type){s(Y,Qe.sibling),K=p(Qe,J.props),K.ref=oa(Y,Qe,J),K.return=Y,Y=K;break e}s(Y,Qe);break}else i(Y,Qe);Qe=Qe.sibling}J.type===pe?(K=ss(J.props.children,Y.mode,_e,J.key),K.return=Y,Y=K):(_e=hc(J.type,J.key,J.props,null,Y.mode,_e),_e.ref=oa(Y,K,J),_e.return=Y,Y=_e)}return E(Y);case ve:e:{for(Qe=J.key;K!==null;){if(K.key===Qe)if(K.tag===4&&K.stateNode.containerInfo===J.containerInfo&&K.stateNode.implementation===J.implementation){s(Y,K.sibling),K=p(K,J.children||[]),K.return=Y,Y=K;break e}else{s(Y,K);break}else i(Y,K);K=K.sibling}K=zf(J,Y.mode,_e),K.return=Y,Y=K}return E(Y);case Ee:return Qe=J._init,$t(Y,K,Qe(J._payload),_e)}if(Zr(J))return Le(Y,K,J,_e);if(oe(J))return Fe(Y,K,J,_e);Ku(Y,J)}return typeof J=="string"&&J!==""||typeof J=="number"?(J=""+J,K!==null&&K.tag===6?(s(Y,K.sibling),K=p(K,J),K.return=Y,Y=K):(s(Y,K),K=Uf(J,Y.mode,_e),K.return=Y,Y=K),E(Y)):s(Y,K)}return $t}var Gs=Bp(!0),$p=Bp(!1),Vu=ao(null),Wu=null,Ys=null,qd=null;function Gd(){qd=Ys=Wu=null}function Yd(t){var i=Vu.current;Nt(Vu),t._currentValue=i}function Qd(t,i,s){for(;t!==null;){var c=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),t===s)break;t=t.return}}function Qs(t,i){Wu=t,qd=Ys=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&i)!==0&&(Dn=!0),t.firstContext=null)}function er(t){var i=t._currentValue;if(qd!==t)if(t={context:t,memoizedValue:i,next:null},Ys===null){if(Wu===null)throw Error(r(308));Ys=t,Wu.dependencies={lanes:0,firstContext:t}}else Ys=Ys.next=t;return i}var Zo=null;function Jd(t){Zo===null?Zo=[t]:Zo.push(t)}function Kp(t,i,s,c){var p=i.interleaved;return p===null?(s.next=s,Jd(i)):(s.next=p.next,p.next=s),i.interleaved=s,ki(t,c)}function ki(t,i){t.lanes|=i;var s=t.alternate;for(s!==null&&(s.lanes|=i),s=t,t=t.return;t!==null;)t.childLanes|=i,s=t.alternate,s!==null&&(s.childLanes|=i),s=t,t=t.return;return s.tag===3?s.stateNode:null}var fo=!1;function Xd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vp(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xi(t,i){return{eventTime:t,lane:i,tag:0,payload:null,callback:null,next:null}}function ho(t,i,s){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(pt&2)!==0){var p=c.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),c.pending=i,ki(t,s)}return p=c.interleaved,p===null?(i.next=i,Jd(c)):(i.next=p.next,p.next=i),c.interleaved=i,ki(t,s)}function Hu(t,i,s){if(i=i.updateQueue,i!==null&&(i=i.shared,(s&4194240)!==0)){var c=i.lanes;c&=t.pendingLanes,s|=c,i.lanes=s,Is(t,s)}}function Wp(t,i){var s=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,s===c)){var p=null,v=null;if(s=s.firstBaseUpdate,s!==null){do{var E={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};v===null?p=v=E:v=v.next=E,s=s.next}while(s!==null);v===null?p=v=i:v=v.next=i}else p=v=i;s={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:v,shared:c.shared,effects:c.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=i:t.next=i,s.lastBaseUpdate=i}function qu(t,i,s,c){var p=t.updateQueue;fo=!1;var v=p.firstBaseUpdate,E=p.lastBaseUpdate,P=p.shared.pending;if(P!==null){p.shared.pending=null;var D=P,te=D.next;D.next=null,E===null?v=te:E.next=te,E=D;var de=t.alternate;de!==null&&(de=de.updateQueue,P=de.lastBaseUpdate,P!==E&&(P===null?de.firstBaseUpdate=te:P.next=te,de.lastBaseUpdate=D))}if(v!==null){var he=p.baseState;E=0,de=te=D=null,P=v;do{var ae=P.lane,Ae=P.eventTime;if((c&ae)===ae){de!==null&&(de=de.next={eventTime:Ae,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});e:{var Le=t,Fe=P;switch(ae=i,Ae=s,Fe.tag){case 1:if(Le=Fe.payload,typeof Le=="function"){he=Le.call(Ae,he,ae);break e}he=Le;break e;case 3:Le.flags=Le.flags&-65537|128;case 0:if(Le=Fe.payload,ae=typeof Le=="function"?Le.call(Ae,he,ae):Le,ae==null)break e;he=ne({},he,ae);break e;case 2:fo=!0}}P.callback!==null&&P.lane!==0&&(t.flags|=64,ae=p.effects,ae===null?p.effects=[P]:ae.push(P))}else Ae={eventTime:Ae,lane:ae,tag:P.tag,payload:P.payload,callback:P.callback,next:null},de===null?(te=de=Ae,D=he):de=de.next=Ae,E|=ae;if(P=P.next,P===null){if(P=p.shared.pending,P===null)break;ae=P,P=ae.next,ae.next=null,p.lastBaseUpdate=ae,p.shared.pending=null}}while(!0);if(de===null&&(D=he),p.baseState=D,p.firstBaseUpdate=te,p.lastBaseUpdate=de,i=p.shared.interleaved,i!==null){p=i;do E|=p.lane,p=p.next;while(p!==i)}else v===null&&(p.shared.lanes=0);ns|=E,t.lanes=E,t.memoizedState=he}}function Hp(t,i,s){if(t=i.effects,i.effects=null,t!==null)for(i=0;i<t.length;i++){var c=t[i],p=c.callback;if(p!==null){if(c.callback=null,c=s,typeof p!="function")throw Error(r(191,p));p.call(c)}}}var sa={},$r=ao(sa),la=ao(sa),aa=ao(sa);function es(t){if(t===sa)throw Error(r(174));return t}function Zd(t,i){switch(Tt(aa,i),Tt(la,t),Tt($r,sa),t=i.nodeType,t){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:dr(null,"");break;default:t=t===8?i.parentNode:i,i=t.namespaceURI||null,t=t.tagName,i=dr(i,t)}Nt($r),Tt($r,i)}function Js(){Nt($r),Nt(la),Nt(aa)}function qp(t){es(aa.current);var i=es($r.current),s=dr(i,t.type);i!==s&&(Tt(la,t),Tt($r,s))}function ef(t){la.current===t&&(Nt($r),Nt(la))}var zt=ao(0);function Gu(t){for(var i=t;i!==null;){if(i.tag===13){var s=i.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var tf=[];function nf(){for(var t=0;t<tf.length;t++)tf[t]._workInProgressVersionPrimary=null;tf.length=0}var Yu=ie.ReactCurrentDispatcher,rf=ie.ReactCurrentBatchConfig,ts=0,Ft=null,Gt=null,rn=null,Qu=!1,ua=!1,ca=0,Jw=0;function _n(){throw Error(r(321))}function of(t,i){if(i===null)return!1;for(var s=0;s<i.length&&s<t.length;s++)if(!V(t[s],i[s]))return!1;return!0}function sf(t,i,s,c,p,v){if(ts=v,Ft=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Yu.current=t===null||t.memoizedState===null?tb:nb,t=s(c,p),ua){v=0;do{if(ua=!1,ca=0,25<=v)throw Error(r(301));v+=1,rn=Gt=null,i.updateQueue=null,Yu.current=rb,t=s(c,p)}while(ua)}if(Yu.current=Zu,i=Gt!==null&&Gt.next!==null,ts=0,rn=Gt=Ft=null,Qu=!1,i)throw Error(r(300));return t}function lf(){var t=ca!==0;return ca=0,t}function Kr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?Ft.memoizedState=rn=t:rn=rn.next=t,rn}function tr(){if(Gt===null){var t=Ft.alternate;t=t!==null?t.memoizedState:null}else t=Gt.next;var i=rn===null?Ft.memoizedState:rn.next;if(i!==null)rn=i,Gt=t;else{if(t===null)throw Error(r(310));Gt=t,t={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},rn===null?Ft.memoizedState=rn=t:rn=rn.next=t}return rn}function da(t,i){return typeof i=="function"?i(t):i}function af(t){var i=tr(),s=i.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=t;var c=Gt,p=c.baseQueue,v=s.pending;if(v!==null){if(p!==null){var E=p.next;p.next=v.next,v.next=E}c.baseQueue=p=v,s.pending=null}if(p!==null){v=p.next,c=c.baseState;var P=E=null,D=null,te=v;do{var de=te.lane;if((ts&de)===de)D!==null&&(D=D.next={lane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),c=te.hasEagerState?te.eagerState:t(c,te.action);else{var he={lane:de,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null};D===null?(P=D=he,E=c):D=D.next=he,Ft.lanes|=de,ns|=de}te=te.next}while(te!==null&&te!==v);D===null?E=c:D.next=P,V(c,i.memoizedState)||(Dn=!0),i.memoizedState=c,i.baseState=E,i.baseQueue=D,s.lastRenderedState=c}if(t=s.interleaved,t!==null){p=t;do v=p.lane,Ft.lanes|=v,ns|=v,p=p.next;while(p!==t)}else p===null&&(s.lanes=0);return[i.memoizedState,s.dispatch]}function uf(t){var i=tr(),s=i.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=t;var c=s.dispatch,p=s.pending,v=i.memoizedState;if(p!==null){s.pending=null;var E=p=p.next;do v=t(v,E.action),E=E.next;while(E!==p);V(v,i.memoizedState)||(Dn=!0),i.memoizedState=v,i.baseQueue===null&&(i.baseState=v),s.lastRenderedState=v}return[v,c]}function Gp(){}function Yp(t,i){var s=Ft,c=tr(),p=i(),v=!V(c.memoizedState,p);if(v&&(c.memoizedState=p,Dn=!0),c=c.queue,cf(Xp.bind(null,s,c,t),[t]),c.getSnapshot!==i||v||rn!==null&&rn.memoizedState.tag&1){if(s.flags|=2048,fa(9,Jp.bind(null,s,c,p,i),void 0,null),on===null)throw Error(r(349));(ts&30)!==0||Qp(s,i,p)}return p}function Qp(t,i,s){t.flags|=16384,t={getSnapshot:i,value:s},i=Ft.updateQueue,i===null?(i={lastEffect:null,stores:null},Ft.updateQueue=i,i.stores=[t]):(s=i.stores,s===null?i.stores=[t]:s.push(t))}function Jp(t,i,s,c){i.value=s,i.getSnapshot=c,Zp(i)&&em(t)}function Xp(t,i,s){return s(function(){Zp(i)&&em(t)})}function Zp(t){var i=t.getSnapshot;t=t.value;try{var s=i();return!V(t,s)}catch{return!0}}function em(t){var i=ki(t,1);i!==null&&Er(i,t,1,-1)}function tm(t){var i=Kr();return typeof t=="function"&&(t=t()),i.memoizedState=i.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:t},i.queue=t,t=t.dispatch=eb.bind(null,Ft,t),[i.memoizedState,t]}function fa(t,i,s,c){return t={tag:t,create:i,destroy:s,deps:c,next:null},i=Ft.updateQueue,i===null?(i={lastEffect:null,stores:null},Ft.updateQueue=i,i.lastEffect=t.next=t):(s=i.lastEffect,s===null?i.lastEffect=t.next=t:(c=s.next,s.next=t,t.next=c,i.lastEffect=t)),t}function nm(){return tr().memoizedState}function Ju(t,i,s,c){var p=Kr();Ft.flags|=t,p.memoizedState=fa(1|i,s,void 0,c===void 0?null:c)}function Xu(t,i,s,c){var p=tr();c=c===void 0?null:c;var v=void 0;if(Gt!==null){var E=Gt.memoizedState;if(v=E.destroy,c!==null&&of(c,E.deps)){p.memoizedState=fa(i,s,v,c);return}}Ft.flags|=t,p.memoizedState=fa(1|i,s,v,c)}function rm(t,i){return Ju(8390656,8,t,i)}function cf(t,i){return Xu(2048,8,t,i)}function im(t,i){return Xu(4,2,t,i)}function om(t,i){return Xu(4,4,t,i)}function sm(t,i){if(typeof i=="function")return t=t(),i(t),function(){i(null)};if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function lm(t,i,s){return s=s!=null?s.concat([t]):null,Xu(4,4,sm.bind(null,i,t),s)}function df(){}function am(t,i){var s=tr();i=i===void 0?null:i;var c=s.memoizedState;return c!==null&&i!==null&&of(i,c[1])?c[0]:(s.memoizedState=[t,i],t)}function um(t,i){var s=tr();i=i===void 0?null:i;var c=s.memoizedState;return c!==null&&i!==null&&of(i,c[1])?c[0]:(t=t(),s.memoizedState=[t,i],t)}function cm(t,i,s){return(ts&21)===0?(t.baseState&&(t.baseState=!1,Dn=!0),t.memoizedState=s):(V(s,i)||(s=ci(),Ft.lanes|=s,ns|=s,t.baseState=!0),i)}function Xw(t,i){var s=ht;ht=s!==0&&4>s?s:4,t(!0);var c=rf.transition;rf.transition={};try{t(!1),i()}finally{ht=s,rf.transition=c}}function dm(){return tr().memoizedState}function Zw(t,i,s){var c=go(t);if(s={lane:c,action:s,hasEagerState:!1,eagerState:null,next:null},fm(t))hm(i,s);else if(s=Kp(t,i,s,c),s!==null){var p=Pn();Er(s,t,c,p),pm(s,i,c)}}function eb(t,i,s){var c=go(t),p={lane:c,action:s,hasEagerState:!1,eagerState:null,next:null};if(fm(t))hm(i,p);else{var v=t.alternate;if(t.lanes===0&&(v===null||v.lanes===0)&&(v=i.lastRenderedReducer,v!==null))try{var E=i.lastRenderedState,P=v(E,s);if(p.hasEagerState=!0,p.eagerState=P,V(P,E)){var D=i.interleaved;D===null?(p.next=p,Jd(i)):(p.next=D.next,D.next=p),i.interleaved=p;return}}catch{}finally{}s=Kp(t,i,p,c),s!==null&&(p=Pn(),Er(s,t,c,p),pm(s,i,c))}}function fm(t){var i=t.alternate;return t===Ft||i!==null&&i===Ft}function hm(t,i){ua=Qu=!0;var s=t.pending;s===null?i.next=i:(i.next=s.next,s.next=i),t.pending=i}function pm(t,i,s){if((s&4194240)!==0){var c=i.lanes;c&=t.pendingLanes,s|=c,i.lanes=s,Is(t,s)}}var Zu={readContext:er,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useInsertionEffect:_n,useLayoutEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useMutableSource:_n,useSyncExternalStore:_n,useId:_n,unstable_isNewReconciler:!1},tb={readContext:er,useCallback:function(t,i){return Kr().memoizedState=[t,i===void 0?null:i],t},useContext:er,useEffect:rm,useImperativeHandle:function(t,i,s){return s=s!=null?s.concat([t]):null,Ju(4194308,4,sm.bind(null,i,t),s)},useLayoutEffect:function(t,i){return Ju(4194308,4,t,i)},useInsertionEffect:function(t,i){return Ju(4,2,t,i)},useMemo:function(t,i){var s=Kr();return i=i===void 0?null:i,t=t(),s.memoizedState=[t,i],t},useReducer:function(t,i,s){var c=Kr();return i=s!==void 0?s(i):i,c.memoizedState=c.baseState=i,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},c.queue=t,t=t.dispatch=Zw.bind(null,Ft,t),[c.memoizedState,t]},useRef:function(t){var i=Kr();return t={current:t},i.memoizedState=t},useState:tm,useDebugValue:df,useDeferredValue:function(t){return Kr().memoizedState=t},useTransition:function(){var t=tm(!1),i=t[0];return t=Xw.bind(null,t[1]),Kr().memoizedState=t,[i,t]},useMutableSource:function(){},useSyncExternalStore:function(t,i,s){var c=Ft,p=Kr();if(Rt){if(s===void 0)throw Error(r(407));s=s()}else{if(s=i(),on===null)throw Error(r(349));(ts&30)!==0||Qp(c,i,s)}p.memoizedState=s;var v={value:s,getSnapshot:i};return p.queue=v,rm(Xp.bind(null,c,v,t),[t]),c.flags|=2048,fa(9,Jp.bind(null,c,v,s,i),void 0,null),s},useId:function(){var t=Kr(),i=on.identifierPrefix;if(Rt){var s=_i,c=bi;s=(c&~(1<<32-Xe(c)-1)).toString(32)+s,i=":"+i+"R"+s,s=ca++,0<s&&(i+="H"+s.toString(32)),i+=":"}else s=Jw++,i=":"+i+"r"+s.toString(32)+":";return t.memoizedState=i},unstable_isNewReconciler:!1},nb={readContext:er,useCallback:am,useContext:er,useEffect:cf,useImperativeHandle:lm,useInsertionEffect:im,useLayoutEffect:om,useMemo:um,useReducer:af,useRef:nm,useState:function(){return af(da)},useDebugValue:df,useDeferredValue:function(t){var i=tr();return cm(i,Gt.memoizedState,t)},useTransition:function(){var t=af(da)[0],i=tr().memoizedState;return[t,i]},useMutableSource:Gp,useSyncExternalStore:Yp,useId:dm,unstable_isNewReconciler:!1},rb={readContext:er,useCallback:am,useContext:er,useEffect:cf,useImperativeHandle:lm,useInsertionEffect:im,useLayoutEffect:om,useMemo:um,useReducer:uf,useRef:nm,useState:function(){return uf(da)},useDebugValue:df,useDeferredValue:function(t){var i=tr();return Gt===null?i.memoizedState=t:cm(i,Gt.memoizedState,t)},useTransition:function(){var t=uf(da)[0],i=tr().memoizedState;return[t,i]},useMutableSource:Gp,useSyncExternalStore:Yp,useId:dm,unstable_isNewReconciler:!1};function kr(t,i){if(t&&t.defaultProps){i=ne({},i),t=t.defaultProps;for(var s in t)i[s]===void 0&&(i[s]=t[s]);return i}return i}function ff(t,i,s,c){i=t.memoizedState,s=s(c,i),s=s==null?i:ne({},i,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var ec={isMounted:function(t){return(t=t._reactInternals)?wn(t)===t:!1},enqueueSetState:function(t,i,s){t=t._reactInternals;var c=Pn(),p=go(t),v=xi(c,p);v.payload=i,s!=null&&(v.callback=s),i=ho(t,v,p),i!==null&&(Er(i,t,p,c),Hu(i,t,p))},enqueueReplaceState:function(t,i,s){t=t._reactInternals;var c=Pn(),p=go(t),v=xi(c,p);v.tag=1,v.payload=i,s!=null&&(v.callback=s),i=ho(t,v,p),i!==null&&(Er(i,t,p,c),Hu(i,t,p))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var s=Pn(),c=go(t),p=xi(s,c);p.tag=2,i!=null&&(p.callback=i),i=ho(t,p,c),i!==null&&(Er(i,t,c,s),Hu(i,t,c))}};function mm(t,i,s,c,p,v,E){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,v,E):i.prototype&&i.prototype.isPureReactComponent?!L(s,c)||!L(p,v):!0}function ym(t,i,s){var c=!1,p=uo,v=i.contextType;return typeof v=="object"&&v!==null?v=er(v):(p=An(i)?Qo:bn.current,c=i.contextTypes,v=(c=c!=null)?Vs(t,p):uo),i=new i(s,v),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=ec,t.stateNode=i,i._reactInternals=t,c&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=p,t.__reactInternalMemoizedMaskedChildContext=v),i}function gm(t,i,s,c){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(s,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(s,c),i.state!==t&&ec.enqueueReplaceState(i,i.state,null)}function hf(t,i,s,c){var p=t.stateNode;p.props=s,p.state=t.memoizedState,p.refs={},Xd(t);var v=i.contextType;typeof v=="object"&&v!==null?p.context=er(v):(v=An(i)?Qo:bn.current,p.context=Vs(t,v)),p.state=t.memoizedState,v=i.getDerivedStateFromProps,typeof v=="function"&&(ff(t,i,v,s),p.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(i=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),i!==p.state&&ec.enqueueReplaceState(p,p.state,null),qu(t,s,p,c),p.state=t.memoizedState),typeof p.componentDidMount=="function"&&(t.flags|=4194308)}function Xs(t,i){try{var s="",c=i;do s+=Ge(c),c=c.return;while(c);var p=s}catch(v){p=`
Error generating stack: `+v.message+`
`+v.stack}return{value:t,source:i,stack:p,digest:null}}function pf(t,i,s){return{value:t,source:null,stack:s??null,digest:i??null}}function mf(t,i){try{console.error(i.value)}catch(s){setTimeout(function(){throw s})}}var ib=typeof WeakMap=="function"?WeakMap:Map;function vm(t,i,s){s=xi(-1,s),s.tag=3,s.payload={element:null};var c=i.value;return s.callback=function(){lc||(lc=!0,Tf=c),mf(t,i)},s}function wm(t,i,s){s=xi(-1,s),s.tag=3;var c=t.type.getDerivedStateFromError;if(typeof c=="function"){var p=i.value;s.payload=function(){return c(p)},s.callback=function(){mf(t,i)}}var v=t.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(s.callback=function(){mf(t,i),typeof c!="function"&&(mo===null?mo=new Set([this]):mo.add(this));var E=i.stack;this.componentDidCatch(i.value,{componentStack:E!==null?E:""})}),s}function bm(t,i,s){var c=t.pingCache;if(c===null){c=t.pingCache=new ib;var p=new Set;c.set(i,p)}else p=c.get(i),p===void 0&&(p=new Set,c.set(i,p));p.has(s)||(p.add(s),t=vb.bind(null,t,i,s),i.then(t,t))}function _m(t){do{var i;if((i=t.tag===13)&&(i=t.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return t;t=t.return}while(t!==null);return null}function km(t,i,s,c,p){return(t.mode&1)===0?(t===i?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(i=xi(-1,1),i.tag=2,ho(s,i,1))),s.lanes|=1),t):(t.flags|=65536,t.lanes=p,t)}var ob=ie.ReactCurrentOwner,Dn=!1;function Tn(t,i,s,c){i.child=t===null?$p(i,null,s,c):Gs(i,t.child,s,c)}function xm(t,i,s,c,p){s=s.render;var v=i.ref;return Qs(i,p),c=sf(t,i,s,c,v,p),s=lf(),t!==null&&!Dn?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~p,Si(t,i,p)):(Rt&&s&&$d(i),i.flags|=1,Tn(t,i,c,p),i.child)}function Sm(t,i,s,c,p){if(t===null){var v=s.type;return typeof v=="function"&&!Mf(v)&&v.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(i.tag=15,i.type=v,Em(t,i,v,c,p)):(t=hc(s.type,null,c,i,i.mode,p),t.ref=i.ref,t.return=i,i.child=t)}if(v=t.child,(t.lanes&p)===0){var E=v.memoizedProps;if(s=s.compare,s=s!==null?s:L,s(E,c)&&t.ref===i.ref)return Si(t,i,p)}return i.flags|=1,t=wo(v,c),t.ref=i.ref,t.return=i,i.child=t}function Em(t,i,s,c,p){if(t!==null){var v=t.memoizedProps;if(L(v,c)&&t.ref===i.ref)if(Dn=!1,i.pendingProps=c=v,(t.lanes&p)!==0)(t.flags&131072)!==0&&(Dn=!0);else return i.lanes=t.lanes,Si(t,i,p)}return yf(t,i,s,c,p)}function Cm(t,i,s){var c=i.pendingProps,p=c.children,v=t!==null?t.memoizedState:null;if(c.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tt(el,Vn),Vn|=s;else{if((s&1073741824)===0)return t=v!==null?v.baseLanes|s:s,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:t,cachePool:null,transitions:null},i.updateQueue=null,Tt(el,Vn),Vn|=t,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=v!==null?v.baseLanes:s,Tt(el,Vn),Vn|=c}else v!==null?(c=v.baseLanes|s,i.memoizedState=null):c=s,Tt(el,Vn),Vn|=c;return Tn(t,i,p,s),i.child}function Im(t,i){var s=i.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(i.flags|=512,i.flags|=2097152)}function yf(t,i,s,c,p){var v=An(s)?Qo:bn.current;return v=Vs(i,v),Qs(i,p),s=sf(t,i,s,c,v,p),c=lf(),t!==null&&!Dn?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~p,Si(t,i,p)):(Rt&&c&&$d(i),i.flags|=1,Tn(t,i,s,p),i.child)}function Om(t,i,s,c,p){if(An(s)){var v=!0;Uu(i)}else v=!1;if(Qs(i,p),i.stateNode===null)nc(t,i),ym(i,s,c),hf(i,s,c,p),c=!0;else if(t===null){var E=i.stateNode,P=i.memoizedProps;E.props=P;var D=E.context,te=s.contextType;typeof te=="object"&&te!==null?te=er(te):(te=An(s)?Qo:bn.current,te=Vs(i,te));var de=s.getDerivedStateFromProps,he=typeof de=="function"||typeof E.getSnapshotBeforeUpdate=="function";he||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(P!==c||D!==te)&&gm(i,E,c,te),fo=!1;var ae=i.memoizedState;E.state=ae,qu(i,c,E,p),D=i.memoizedState,P!==c||ae!==D||Nn.current||fo?(typeof de=="function"&&(ff(i,s,de,c),D=i.memoizedState),(P=fo||mm(i,s,P,c,ae,D,te))?(he||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(i.flags|=4194308)):(typeof E.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=D),E.props=c,E.state=D,E.context=te,c=P):(typeof E.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{E=i.stateNode,Vp(t,i),P=i.memoizedProps,te=i.type===i.elementType?P:kr(i.type,P),E.props=te,he=i.pendingProps,ae=E.context,D=s.contextType,typeof D=="object"&&D!==null?D=er(D):(D=An(s)?Qo:bn.current,D=Vs(i,D));var Ae=s.getDerivedStateFromProps;(de=typeof Ae=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(P!==he||ae!==D)&&gm(i,E,c,D),fo=!1,ae=i.memoizedState,E.state=ae,qu(i,c,E,p);var Le=i.memoizedState;P!==he||ae!==Le||Nn.current||fo?(typeof Ae=="function"&&(ff(i,s,Ae,c),Le=i.memoizedState),(te=fo||mm(i,s,te,c,ae,Le,D)||!1)?(de||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(c,Le,D),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(c,Le,D)),typeof E.componentDidUpdate=="function"&&(i.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof E.componentDidUpdate!="function"||P===t.memoizedProps&&ae===t.memoizedState||(i.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||P===t.memoizedProps&&ae===t.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=Le),E.props=c,E.state=Le,E.context=D,c=te):(typeof E.componentDidUpdate!="function"||P===t.memoizedProps&&ae===t.memoizedState||(i.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||P===t.memoizedProps&&ae===t.memoizedState||(i.flags|=1024),c=!1)}return gf(t,i,s,c,v,p)}function gf(t,i,s,c,p,v){Im(t,i);var E=(i.flags&128)!==0;if(!c&&!E)return p&&Ap(i,s,!1),Si(t,i,v);c=i.stateNode,ob.current=i;var P=E&&typeof s.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,t!==null&&E?(i.child=Gs(i,t.child,null,v),i.child=Gs(i,null,P,v)):Tn(t,i,P,v),i.memoizedState=c.state,p&&Ap(i,s,!0),i.child}function jm(t){var i=t.stateNode;i.pendingContext?Pp(t,i.pendingContext,i.pendingContext!==i.context):i.context&&Pp(t,i.context,!1),Zd(t,i.containerInfo)}function Tm(t,i,s,c,p){return qs(),Hd(p),i.flags|=256,Tn(t,i,s,c),i.child}var vf={dehydrated:null,treeContext:null,retryLane:0};function wf(t){return{baseLanes:t,cachePool:null,transitions:null}}function Pm(t,i,s){var c=i.pendingProps,p=zt.current,v=!1,E=(i.flags&128)!==0,P;if((P=E)||(P=t!==null&&t.memoizedState===null?!1:(p&2)!==0),P?(v=!0,i.flags&=-129):(t===null||t.memoizedState!==null)&&(p|=1),Tt(zt,p&1),t===null)return Wd(i),t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((i.mode&1)===0?i.lanes=1:t.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(E=c.children,t=c.fallback,v?(c=i.mode,v=i.child,E={mode:"hidden",children:E},(c&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=E):v=pc(E,c,0,null),t=ss(t,c,s,null),v.return=i,t.return=i,v.sibling=t,i.child=v,i.child.memoizedState=wf(s),i.memoizedState=vf,t):bf(i,E));if(p=t.memoizedState,p!==null&&(P=p.dehydrated,P!==null))return sb(t,i,E,c,P,p,s);if(v){v=c.fallback,E=i.mode,p=t.child,P=p.sibling;var D={mode:"hidden",children:c.children};return(E&1)===0&&i.child!==p?(c=i.child,c.childLanes=0,c.pendingProps=D,i.deletions=null):(c=wo(p,D),c.subtreeFlags=p.subtreeFlags&14680064),P!==null?v=wo(P,v):(v=ss(v,E,s,null),v.flags|=2),v.return=i,c.return=i,c.sibling=v,i.child=c,c=v,v=i.child,E=t.child.memoizedState,E=E===null?wf(s):{baseLanes:E.baseLanes|s,cachePool:null,transitions:E.transitions},v.memoizedState=E,v.childLanes=t.childLanes&~s,i.memoizedState=vf,c}return v=t.child,t=v.sibling,c=wo(v,{mode:"visible",children:c.children}),(i.mode&1)===0&&(c.lanes=s),c.return=i,c.sibling=null,t!==null&&(s=i.deletions,s===null?(i.deletions=[t],i.flags|=16):s.push(t)),i.child=c,i.memoizedState=null,c}function bf(t,i){return i=pc({mode:"visible",children:i},t.mode,0,null),i.return=t,t.child=i}function tc(t,i,s,c){return c!==null&&Hd(c),Gs(i,t.child,null,s),t=bf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function sb(t,i,s,c,p,v,E){if(s)return i.flags&256?(i.flags&=-257,c=pf(Error(r(422))),tc(t,i,E,c)):i.memoizedState!==null?(i.child=t.child,i.flags|=128,null):(v=c.fallback,p=i.mode,c=pc({mode:"visible",children:c.children},p,0,null),v=ss(v,p,E,null),v.flags|=2,c.return=i,v.return=i,c.sibling=v,i.child=c,(i.mode&1)!==0&&Gs(i,t.child,null,E),i.child.memoizedState=wf(E),i.memoizedState=vf,v);if((i.mode&1)===0)return tc(t,i,E,null);if(p.data==="$!"){if(c=p.nextSibling&&p.nextSibling.dataset,c)var P=c.dgst;return c=P,v=Error(r(419)),c=pf(v,c,void 0),tc(t,i,E,c)}if(P=(E&t.childLanes)!==0,Dn||P){if(c=on,c!==null){switch(E&-E){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(c.suspendedLanes|E))!==0?0:p,p!==0&&p!==v.retryLane&&(v.retryLane=p,ki(t,p),Er(c,t,p,-1))}return Lf(),c=pf(Error(r(421))),tc(t,i,E,c)}return p.data==="$?"?(i.flags|=128,i.child=t.child,i=wb.bind(null,t),p._reactRetry=i,null):(t=v.treeContext,Kn=lo(p.nextSibling),$n=i,Rt=!0,_r=null,t!==null&&(Xn[Zn++]=bi,Xn[Zn++]=_i,Xn[Zn++]=Jo,bi=t.id,_i=t.overflow,Jo=i),i=bf(i,c.children),i.flags|=4096,i)}function Nm(t,i,s){t.lanes|=i;var c=t.alternate;c!==null&&(c.lanes|=i),Qd(t.return,i,s)}function _f(t,i,s,c,p){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:s,tailMode:p}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=s,v.tailMode=p)}function Am(t,i,s){var c=i.pendingProps,p=c.revealOrder,v=c.tail;if(Tn(t,i,c.children,s),c=zt.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Nm(t,s,i);else if(t.tag===19)Nm(t,s,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}c&=1}if(Tt(zt,c),(i.mode&1)===0)i.memoizedState=null;else switch(p){case"forwards":for(s=i.child,p=null;s!==null;)t=s.alternate,t!==null&&Gu(t)===null&&(p=s),s=s.sibling;s=p,s===null?(p=i.child,i.child=null):(p=s.sibling,s.sibling=null),_f(i,!1,p,s,v);break;case"backwards":for(s=null,p=i.child,i.child=null;p!==null;){if(t=p.alternate,t!==null&&Gu(t)===null){i.child=p;break}t=p.sibling,p.sibling=s,s=p,p=t}_f(i,!0,s,null,v);break;case"together":_f(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function nc(t,i){(i.mode&1)===0&&t!==null&&(t.alternate=null,i.alternate=null,i.flags|=2)}function Si(t,i,s){if(t!==null&&(i.dependencies=t.dependencies),ns|=i.lanes,(s&i.childLanes)===0)return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,s=wo(t,t.pendingProps),i.child=s,s.return=i;t.sibling!==null;)t=t.sibling,s=s.sibling=wo(t,t.pendingProps),s.return=i;s.sibling=null}return i.child}function lb(t,i,s){switch(i.tag){case 3:jm(i),qs();break;case 5:qp(i);break;case 1:An(i.type)&&Uu(i);break;case 4:Zd(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,p=i.memoizedProps.value;Tt(Vu,c._currentValue),c._currentValue=p;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(Tt(zt,zt.current&1),i.flags|=128,null):(s&i.child.childLanes)!==0?Pm(t,i,s):(Tt(zt,zt.current&1),t=Si(t,i,s),t!==null?t.sibling:null);Tt(zt,zt.current&1);break;case 19:if(c=(s&i.childLanes)!==0,(t.flags&128)!==0){if(c)return Am(t,i,s);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Tt(zt,zt.current),c)break;return null;case 22:case 23:return i.lanes=0,Cm(t,i,s)}return Si(t,i,s)}var Dm,kf,Rm,Lm;Dm=function(t,i){for(var s=i.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},kf=function(){},Rm=function(t,i,s,c){var p=t.memoizedProps;if(p!==c){t=i.stateNode,es($r.current);var v=null;switch(s){case"input":p=ct(t,p),c=ct(t,c),v=[];break;case"select":p=ne({},p,{value:void 0}),c=ne({},c,{value:void 0}),v=[];break;case"textarea":p=bs(t,p),c=bs(t,c),v=[];break;default:typeof p.onClick!="function"&&typeof c.onClick=="function"&&(t.onclick=Ru)}ze(s,c);var E;s=null;for(te in p)if(!c.hasOwnProperty(te)&&p.hasOwnProperty(te)&&p[te]!=null)if(te==="style"){var P=p[te];for(E in P)P.hasOwnProperty(E)&&(s||(s={}),s[E]="")}else te!=="dangerouslySetInnerHTML"&&te!=="children"&&te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&te!=="autoFocus"&&(l.hasOwnProperty(te)?v||(v=[]):(v=v||[]).push(te,null));for(te in c){var D=c[te];if(P=p!=null?p[te]:void 0,c.hasOwnProperty(te)&&D!==P&&(D!=null||P!=null))if(te==="style")if(P){for(E in P)!P.hasOwnProperty(E)||D&&D.hasOwnProperty(E)||(s||(s={}),s[E]="");for(E in D)D.hasOwnProperty(E)&&P[E]!==D[E]&&(s||(s={}),s[E]=D[E])}else s||(v||(v=[]),v.push(te,s)),s=D;else te==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,P=P?P.__html:void 0,D!=null&&P!==D&&(v=v||[]).push(te,D)):te==="children"?typeof D!="string"&&typeof D!="number"||(v=v||[]).push(te,""+D):te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&(l.hasOwnProperty(te)?(D!=null&&te==="onScroll"&&Pt("scroll",t),v||P===D||(v=[])):(v=v||[]).push(te,D))}s&&(v=v||[]).push("style",s);var te=v;(i.updateQueue=te)&&(i.flags|=4)}},Lm=function(t,i,s,c){s!==c&&(i.flags|=4)};function ha(t,i){if(!Rt)switch(t.tailMode){case"hidden":i=t.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function kn(t){var i=t.alternate!==null&&t.alternate.child===t.child,s=0,c=0;if(i)for(var p=t.child;p!==null;)s|=p.lanes|p.childLanes,c|=p.subtreeFlags&14680064,c|=p.flags&14680064,p.return=t,p=p.sibling;else for(p=t.child;p!==null;)s|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=t,p=p.sibling;return t.subtreeFlags|=c,t.childLanes=s,i}function ab(t,i,s){var c=i.pendingProps;switch(Kd(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kn(i),null;case 1:return An(i.type)&&Mu(),kn(i),null;case 3:return c=i.stateNode,Js(),Nt(Nn),Nt(bn),nf(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(t===null||t.child===null)&&($u(i)?i.flags|=4:t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,_r!==null&&(Af(_r),_r=null))),kf(t,i),kn(i),null;case 5:ef(i);var p=es(aa.current);if(s=i.type,t!==null&&i.stateNode!=null)Rm(t,i,s,c,p),t.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(r(166));return kn(i),null}if(t=es($r.current),$u(i)){c=i.stateNode,s=i.type;var v=i.memoizedProps;switch(c[Br]=i,c[ra]=v,t=(i.mode&1)!==0,s){case"dialog":Pt("cancel",c),Pt("close",c);break;case"iframe":case"object":case"embed":Pt("load",c);break;case"video":case"audio":for(p=0;p<ea.length;p++)Pt(ea[p],c);break;case"source":Pt("error",c);break;case"img":case"image":case"link":Pt("error",c),Pt("load",c);break;case"details":Pt("toggle",c);break;case"input":vt(c,v),Pt("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!v.multiple},Pt("invalid",c);break;case"textarea":zi(c,v),Pt("invalid",c)}ze(s,v),p=null;for(var E in v)if(v.hasOwnProperty(E)){var P=v[E];E==="children"?typeof P=="string"?c.textContent!==P&&(v.suppressHydrationWarning!==!0&&Du(c.textContent,P,t),p=["children",P]):typeof P=="number"&&c.textContent!==""+P&&(v.suppressHydrationWarning!==!0&&Du(c.textContent,P,t),p=["children",""+P]):l.hasOwnProperty(E)&&P!=null&&E==="onScroll"&&Pt("scroll",c)}switch(s){case"input":It(c),Fn(c,v,!0);break;case"textarea":It(c),Fi(c);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(c.onclick=Ru)}c=p,i.updateQueue=c,c!==null&&(i.flags|=4)}else{E=p.nodeType===9?p:p.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vn(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=E.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof c.is=="string"?t=E.createElement(s,{is:c.is}):(t=E.createElement(s),s==="select"&&(E=t,c.multiple?E.multiple=!0:c.size&&(E.size=c.size))):t=E.createElementNS(t,s),t[Br]=i,t[ra]=c,Dm(t,i,!1,!1),i.stateNode=t;e:{switch(E=ni(s,c),s){case"dialog":Pt("cancel",t),Pt("close",t),p=c;break;case"iframe":case"object":case"embed":Pt("load",t),p=c;break;case"video":case"audio":for(p=0;p<ea.length;p++)Pt(ea[p],t);p=c;break;case"source":Pt("error",t),p=c;break;case"img":case"image":case"link":Pt("error",t),Pt("load",t),p=c;break;case"details":Pt("toggle",t),p=c;break;case"input":vt(t,c),p=ct(t,c),Pt("invalid",t);break;case"option":p=c;break;case"select":t._wrapperState={wasMultiple:!!c.multiple},p=ne({},c,{value:void 0}),Pt("invalid",t);break;case"textarea":zi(t,c),p=bs(t,c),Pt("invalid",t);break;default:p=c}ze(s,p),P=p;for(v in P)if(P.hasOwnProperty(v)){var D=P[v];v==="style"?_s(t,D):v==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&$i(t,D)):v==="children"?typeof D=="string"?(s!=="textarea"||D!=="")&&ei(t,D):typeof D=="number"&&ei(t,""+D):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(l.hasOwnProperty(v)?D!=null&&v==="onScroll"&&Pt("scroll",t):D!=null&&ce(t,v,D,E))}switch(s){case"input":It(t),Fn(t,c,!1);break;case"textarea":It(t),Fi(t);break;case"option":c.value!=null&&t.setAttribute("value",""+Ye(c.value));break;case"select":t.multiple=!!c.multiple,v=c.value,v!=null?un(t,!!c.multiple,v,!1):c.defaultValue!=null&&un(t,!!c.multiple,c.defaultValue,!0);break;default:typeof p.onClick=="function"&&(t.onclick=Ru)}switch(s){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return kn(i),null;case 6:if(t&&i.stateNode!=null)Lm(t,i,t.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(r(166));if(s=es(aa.current),es($r.current),$u(i)){if(c=i.stateNode,s=i.memoizedProps,c[Br]=i,(v=c.nodeValue!==s)&&(t=$n,t!==null))switch(t.tag){case 3:Du(c.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Du(c.nodeValue,s,(t.mode&1)!==0)}v&&(i.flags|=4)}else c=(s.nodeType===9?s:s.ownerDocument).createTextNode(c),c[Br]=i,i.stateNode=c}return kn(i),null;case 13:if(Nt(zt),c=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Rt&&Kn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)zp(),qs(),i.flags|=98560,v=!1;else if(v=$u(i),c!==null&&c.dehydrated!==null){if(t===null){if(!v)throw Error(r(318));if(v=i.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[Br]=i}else qs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;kn(i),v=!1}else _r!==null&&(Af(_r),_r=null),v=!0;if(!v)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=s,i):(c=c!==null,c!==(t!==null&&t.memoizedState!==null)&&c&&(i.child.flags|=8192,(i.mode&1)!==0&&(t===null||(zt.current&1)!==0?Yt===0&&(Yt=3):Lf())),i.updateQueue!==null&&(i.flags|=4),kn(i),null);case 4:return Js(),kf(t,i),t===null&&ta(i.stateNode.containerInfo),kn(i),null;case 10:return Yd(i.type._context),kn(i),null;case 17:return An(i.type)&&Mu(),kn(i),null;case 19:if(Nt(zt),v=i.memoizedState,v===null)return kn(i),null;if(c=(i.flags&128)!==0,E=v.rendering,E===null)if(c)ha(v,!1);else{if(Yt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(E=Gu(t),E!==null){for(i.flags|=128,ha(v,!1),c=E.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=s,s=i.child;s!==null;)v=s,t=c,v.flags&=14680066,E=v.alternate,E===null?(v.childLanes=0,v.lanes=t,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=E.childLanes,v.lanes=E.lanes,v.child=E.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=E.memoizedProps,v.memoizedState=E.memoizedState,v.updateQueue=E.updateQueue,v.type=E.type,t=E.dependencies,v.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return Tt(zt,zt.current&1|2),i.child}t=t.sibling}v.tail!==null&&wt()>tl&&(i.flags|=128,c=!0,ha(v,!1),i.lanes=4194304)}else{if(!c)if(t=Gu(E),t!==null){if(i.flags|=128,c=!0,s=t.updateQueue,s!==null&&(i.updateQueue=s,i.flags|=4),ha(v,!0),v.tail===null&&v.tailMode==="hidden"&&!E.alternate&&!Rt)return kn(i),null}else 2*wt()-v.renderingStartTime>tl&&s!==1073741824&&(i.flags|=128,c=!0,ha(v,!1),i.lanes=4194304);v.isBackwards?(E.sibling=i.child,i.child=E):(s=v.last,s!==null?s.sibling=E:i.child=E,v.last=E)}return v.tail!==null?(i=v.tail,v.rendering=i,v.tail=i.sibling,v.renderingStartTime=wt(),i.sibling=null,s=zt.current,Tt(zt,c?s&1|2:s&1),i):(kn(i),null);case 22:case 23:return Rf(),c=i.memoizedState!==null,t!==null&&t.memoizedState!==null!==c&&(i.flags|=8192),c&&(i.mode&1)!==0?(Vn&1073741824)!==0&&(kn(i),i.subtreeFlags&6&&(i.flags|=8192)):kn(i),null;case 24:return null;case 25:return null}throw Error(r(156,i.tag))}function ub(t,i){switch(Kd(i),i.tag){case 1:return An(i.type)&&Mu(),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Js(),Nt(Nn),Nt(bn),nf(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 5:return ef(i),null;case 13:if(Nt(zt),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));qs()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return Nt(zt),null;case 4:return Js(),null;case 10:return Yd(i.type._context),null;case 22:case 23:return Rf(),null;case 24:return null;default:return null}}var rc=!1,xn=!1,cb=typeof WeakSet=="function"?WeakSet:Set,De=null;function Zs(t,i){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(c){Bt(t,i,c)}else s.current=null}function xf(t,i,s){try{s()}catch(c){Bt(t,i,c)}}var Mm=!1;function db(t,i){if(Dd=$o,t=z(),M(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var c=s.getSelection&&s.getSelection();if(c&&c.rangeCount!==0){s=c.anchorNode;var p=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{s.nodeType,v.nodeType}catch{s=null;break e}var E=0,P=-1,D=-1,te=0,de=0,he=t,ae=null;t:for(;;){for(var Ae;he!==s||p!==0&&he.nodeType!==3||(P=E+p),he!==v||c!==0&&he.nodeType!==3||(D=E+c),he.nodeType===3&&(E+=he.nodeValue.length),(Ae=he.firstChild)!==null;)ae=he,he=Ae;for(;;){if(he===t)break t;if(ae===s&&++te===p&&(P=E),ae===v&&++de===c&&(D=E),(Ae=he.nextSibling)!==null)break;he=ae,ae=he.parentNode}he=Ae}s=P===-1||D===-1?null:{start:P,end:D}}else s=null}s=s||{start:0,end:0}}else s=null;for(Rd={focusedElem:t,selectionRange:s},$o=!1,De=i;De!==null;)if(i=De,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,De=t;else for(;De!==null;){i=De;try{var Le=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Le!==null){var Fe=Le.memoizedProps,$t=Le.memoizedState,Y=i.stateNode,K=Y.getSnapshotBeforeUpdate(i.elementType===i.type?Fe:kr(i.type,Fe),$t);Y.__reactInternalSnapshotBeforeUpdate=K}break;case 3:var J=i.stateNode.containerInfo;J.nodeType===1?J.textContent="":J.nodeType===9&&J.documentElement&&J.removeChild(J.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(_e){Bt(i,i.return,_e)}if(t=i.sibling,t!==null){t.return=i.return,De=t;break}De=i.return}return Le=Mm,Mm=!1,Le}function pa(t,i,s){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var p=c=c.next;do{if((p.tag&t)===t){var v=p.destroy;p.destroy=void 0,v!==void 0&&xf(i,s,v)}p=p.next}while(p!==c)}}function ic(t,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var c=s.create;s.destroy=c()}s=s.next}while(s!==i)}}function Sf(t){var i=t.ref;if(i!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof i=="function"?i(t):i.current=t}}function Um(t){var i=t.alternate;i!==null&&(t.alternate=null,Um(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&(delete i[Br],delete i[ra],delete i[zd],delete i[qw],delete i[Gw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function zm(t){return t.tag===5||t.tag===3||t.tag===4}function Fm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||zm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ef(t,i,s){var c=t.tag;if(c===5||c===6)t=t.stateNode,i?s.nodeType===8?s.parentNode.insertBefore(t,i):s.insertBefore(t,i):(s.nodeType===8?(i=s.parentNode,i.insertBefore(t,s)):(i=s,i.appendChild(t)),s=s._reactRootContainer,s!=null||i.onclick!==null||(i.onclick=Ru));else if(c!==4&&(t=t.child,t!==null))for(Ef(t,i,s),t=t.sibling;t!==null;)Ef(t,i,s),t=t.sibling}function Cf(t,i,s){var c=t.tag;if(c===5||c===6)t=t.stateNode,i?s.insertBefore(t,i):s.appendChild(t);else if(c!==4&&(t=t.child,t!==null))for(Cf(t,i,s),t=t.sibling;t!==null;)Cf(t,i,s),t=t.sibling}var fn=null,xr=!1;function po(t,i,s){for(s=s.child;s!==null;)Bm(t,i,s),s=s.sibling}function Bm(t,i,s){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(Lo,s)}catch{}switch(s.tag){case 5:xn||Zs(s,i);case 6:var c=fn,p=xr;fn=null,po(t,i,s),fn=c,xr=p,fn!==null&&(xr?(t=fn,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):fn.removeChild(s.stateNode));break;case 18:fn!==null&&(xr?(t=fn,s=s.stateNode,t.nodeType===8?Ud(t.parentNode,s):t.nodeType===1&&Ud(t,s),mr(t)):Ud(fn,s.stateNode));break;case 4:c=fn,p=xr,fn=s.stateNode.containerInfo,xr=!0,po(t,i,s),fn=c,xr=p;break;case 0:case 11:case 14:case 15:if(!xn&&(c=s.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){p=c=c.next;do{var v=p,E=v.destroy;v=v.tag,E!==void 0&&((v&2)!==0||(v&4)!==0)&&xf(s,i,E),p=p.next}while(p!==c)}po(t,i,s);break;case 1:if(!xn&&(Zs(s,i),c=s.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=s.memoizedProps,c.state=s.memoizedState,c.componentWillUnmount()}catch(P){Bt(s,i,P)}po(t,i,s);break;case 21:po(t,i,s);break;case 22:s.mode&1?(xn=(c=xn)||s.memoizedState!==null,po(t,i,s),xn=c):po(t,i,s);break;default:po(t,i,s)}}function $m(t){var i=t.updateQueue;if(i!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new cb),i.forEach(function(c){var p=bb.bind(null,t,c);s.has(c)||(s.add(c),c.then(p,p))})}}function Sr(t,i){var s=i.deletions;if(s!==null)for(var c=0;c<s.length;c++){var p=s[c];try{var v=t,E=i,P=E;e:for(;P!==null;){switch(P.tag){case 5:fn=P.stateNode,xr=!1;break e;case 3:fn=P.stateNode.containerInfo,xr=!0;break e;case 4:fn=P.stateNode.containerInfo,xr=!0;break e}P=P.return}if(fn===null)throw Error(r(160));Bm(v,E,p),fn=null,xr=!1;var D=p.alternate;D!==null&&(D.return=null),p.return=null}catch(te){Bt(p,i,te)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Km(i,t),i=i.sibling}function Km(t,i){var s=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Sr(i,t),Vr(t),c&4){try{pa(3,t,t.return),ic(3,t)}catch(Fe){Bt(t,t.return,Fe)}try{pa(5,t,t.return)}catch(Fe){Bt(t,t.return,Fe)}}break;case 1:Sr(i,t),Vr(t),c&512&&s!==null&&Zs(s,s.return);break;case 5:if(Sr(i,t),Vr(t),c&512&&s!==null&&Zs(s,s.return),t.flags&32){var p=t.stateNode;try{ei(p,"")}catch(Fe){Bt(t,t.return,Fe)}}if(c&4&&(p=t.stateNode,p!=null)){var v=t.memoizedProps,E=s!==null?s.memoizedProps:v,P=t.type,D=t.updateQueue;if(t.updateQueue=null,D!==null)try{P==="input"&&v.type==="radio"&&v.name!=null&&gn(p,v),ni(P,E);var te=ni(P,v);for(E=0;E<D.length;E+=2){var de=D[E],he=D[E+1];de==="style"?_s(p,he):de==="dangerouslySetInnerHTML"?$i(p,he):de==="children"?ei(p,he):ce(p,de,he,te)}switch(P){case"input":cr(p,v);break;case"textarea":Al(p,v);break;case"select":var ae=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!v.multiple;var Ae=v.value;Ae!=null?un(p,!!v.multiple,Ae,!1):ae!==!!v.multiple&&(v.defaultValue!=null?un(p,!!v.multiple,v.defaultValue,!0):un(p,!!v.multiple,v.multiple?[]:"",!1))}p[ra]=v}catch(Fe){Bt(t,t.return,Fe)}}break;case 6:if(Sr(i,t),Vr(t),c&4){if(t.stateNode===null)throw Error(r(162));p=t.stateNode,v=t.memoizedProps;try{p.nodeValue=v}catch(Fe){Bt(t,t.return,Fe)}}break;case 3:if(Sr(i,t),Vr(t),c&4&&s!==null&&s.memoizedState.isDehydrated)try{mr(i.containerInfo)}catch(Fe){Bt(t,t.return,Fe)}break;case 4:Sr(i,t),Vr(t);break;case 13:Sr(i,t),Vr(t),p=t.child,p.flags&8192&&(v=p.memoizedState!==null,p.stateNode.isHidden=v,!v||p.alternate!==null&&p.alternate.memoizedState!==null||(jf=wt())),c&4&&$m(t);break;case 22:if(de=s!==null&&s.memoizedState!==null,t.mode&1?(xn=(te=xn)||de,Sr(i,t),xn=te):Sr(i,t),Vr(t),c&8192){if(te=t.memoizedState!==null,(t.stateNode.isHidden=te)&&!de&&(t.mode&1)!==0)for(De=t,de=t.child;de!==null;){for(he=De=de;De!==null;){switch(ae=De,Ae=ae.child,ae.tag){case 0:case 11:case 14:case 15:pa(4,ae,ae.return);break;case 1:Zs(ae,ae.return);var Le=ae.stateNode;if(typeof Le.componentWillUnmount=="function"){c=ae,s=ae.return;try{i=c,Le.props=i.memoizedProps,Le.state=i.memoizedState,Le.componentWillUnmount()}catch(Fe){Bt(c,s,Fe)}}break;case 5:Zs(ae,ae.return);break;case 22:if(ae.memoizedState!==null){Hm(he);continue}}Ae!==null?(Ae.return=ae,De=Ae):Hm(he)}de=de.sibling}e:for(de=null,he=t;;){if(he.tag===5){if(de===null){de=he;try{p=he.stateNode,te?(v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(P=he.stateNode,D=he.memoizedProps.style,E=D!=null&&D.hasOwnProperty("display")?D.display:null,P.style.display=No("display",E))}catch(Fe){Bt(t,t.return,Fe)}}}else if(he.tag===6){if(de===null)try{he.stateNode.nodeValue=te?"":he.memoizedProps}catch(Fe){Bt(t,t.return,Fe)}}else if((he.tag!==22&&he.tag!==23||he.memoizedState===null||he===t)&&he.child!==null){he.child.return=he,he=he.child;continue}if(he===t)break e;for(;he.sibling===null;){if(he.return===null||he.return===t)break e;de===he&&(de=null),he=he.return}de===he&&(de=null),he.sibling.return=he.return,he=he.sibling}}break;case 19:Sr(i,t),Vr(t),c&4&&$m(t);break;case 21:break;default:Sr(i,t),Vr(t)}}function Vr(t){var i=t.flags;if(i&2){try{e:{for(var s=t.return;s!==null;){if(zm(s)){var c=s;break e}s=s.return}throw Error(r(160))}switch(c.tag){case 5:var p=c.stateNode;c.flags&32&&(ei(p,""),c.flags&=-33);var v=Fm(t);Cf(t,v,p);break;case 3:case 4:var E=c.stateNode.containerInfo,P=Fm(t);Ef(t,P,E);break;default:throw Error(r(161))}}catch(D){Bt(t,t.return,D)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function fb(t,i,s){De=t,Vm(t)}function Vm(t,i,s){for(var c=(t.mode&1)!==0;De!==null;){var p=De,v=p.child;if(p.tag===22&&c){var E=p.memoizedState!==null||rc;if(!E){var P=p.alternate,D=P!==null&&P.memoizedState!==null||xn;P=rc;var te=xn;if(rc=E,(xn=D)&&!te)for(De=p;De!==null;)E=De,D=E.child,E.tag===22&&E.memoizedState!==null?qm(p):D!==null?(D.return=E,De=D):qm(p);for(;v!==null;)De=v,Vm(v),v=v.sibling;De=p,rc=P,xn=te}Wm(t)}else(p.subtreeFlags&8772)!==0&&v!==null?(v.return=p,De=v):Wm(t)}}function Wm(t){for(;De!==null;){var i=De;if((i.flags&8772)!==0){var s=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:xn||ic(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!xn)if(s===null)c.componentDidMount();else{var p=i.elementType===i.type?s.memoizedProps:kr(i.type,s.memoizedProps);c.componentDidUpdate(p,s.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var v=i.updateQueue;v!==null&&Hp(i,v,c);break;case 3:var E=i.updateQueue;if(E!==null){if(s=null,i.child!==null)switch(i.child.tag){case 5:s=i.child.stateNode;break;case 1:s=i.child.stateNode}Hp(i,E,s)}break;case 5:var P=i.stateNode;if(s===null&&i.flags&4){s=P;var D=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&s.focus();break;case"img":D.src&&(s.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var te=i.alternate;if(te!==null){var de=te.memoizedState;if(de!==null){var he=de.dehydrated;he!==null&&mr(he)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}xn||i.flags&512&&Sf(i)}catch(ae){Bt(i,i.return,ae)}}if(i===t){De=null;break}if(s=i.sibling,s!==null){s.return=i.return,De=s;break}De=i.return}}function Hm(t){for(;De!==null;){var i=De;if(i===t){De=null;break}var s=i.sibling;if(s!==null){s.return=i.return,De=s;break}De=i.return}}function qm(t){for(;De!==null;){var i=De;try{switch(i.tag){case 0:case 11:case 15:var s=i.return;try{ic(4,i)}catch(D){Bt(i,s,D)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var p=i.return;try{c.componentDidMount()}catch(D){Bt(i,p,D)}}var v=i.return;try{Sf(i)}catch(D){Bt(i,v,D)}break;case 5:var E=i.return;try{Sf(i)}catch(D){Bt(i,E,D)}}}catch(D){Bt(i,i.return,D)}if(i===t){De=null;break}var P=i.sibling;if(P!==null){P.return=i.return,De=P;break}De=i.return}}var hb=Math.ceil,oc=ie.ReactCurrentDispatcher,If=ie.ReactCurrentOwner,nr=ie.ReactCurrentBatchConfig,pt=0,on=null,Wt=null,hn=0,Vn=0,el=ao(0),Yt=0,ma=null,ns=0,sc=0,Of=0,ya=null,Rn=null,jf=0,tl=1/0,Ei=null,lc=!1,Tf=null,mo=null,ac=!1,yo=null,uc=0,ga=0,Pf=null,cc=-1,dc=0;function Pn(){return(pt&6)!==0?wt():cc!==-1?cc:cc=wt()}function go(t){return(t.mode&1)===0?1:(pt&2)!==0&&hn!==0?hn&-hn:Qw.transition!==null?(dc===0&&(dc=ci()),dc):(t=ht,t!==0||(t=window.event,t=t===void 0?16:Vo(t.type)),t)}function Er(t,i,s,c){if(50<ga)throw ga=0,Pf=null,Error(r(185));di(t,s,c),((pt&2)===0||t!==on)&&(t===on&&((pt&2)===0&&(sc|=s),Yt===4&&vo(t,hn)),Ln(t,c),s===1&&pt===0&&(i.mode&1)===0&&(tl=wt()+500,zu&&co()))}function Ln(t,i){var s=t.callbackNode;zo(t,i);var c=Uo(t,t===on?hn:0);if(c===0)s!==null&&Ss(s),t.callbackNode=null,t.callbackPriority=0;else if(i=c&-c,t.callbackPriority!==i){if(s!=null&&Ss(s),i===1)t.tag===0?Yw(Ym.bind(null,t)):Dp(Ym.bind(null,t)),Ww(function(){(pt&6)===0&&co()}),s=null;else{switch(Ul(c)){case 1:s=Dr;break;case 4:s=Ro;break;case 16:s=qi;break;case 536870912:s=Rr;break;default:s=qi}s=ry(s,Gm.bind(null,t))}t.callbackPriority=i,t.callbackNode=s}}function Gm(t,i){if(cc=-1,dc=0,(pt&6)!==0)throw Error(r(327));var s=t.callbackNode;if(nl()&&t.callbackNode!==s)return null;var c=Uo(t,t===on?hn:0);if(c===0)return null;if((c&30)!==0||(c&t.expiredLanes)!==0||i)i=fc(t,c);else{i=c;var p=pt;pt|=2;var v=Jm();(on!==t||hn!==i)&&(Ei=null,tl=wt()+500,is(t,i));do try{yb();break}catch(P){Qm(t,P)}while(!0);Gd(),oc.current=v,pt=p,Wt!==null?i=0:(on=null,hn=0,i=Yt)}if(i!==0){if(i===2&&(p=ui(t),p!==0&&(c=p,i=Nf(t,p))),i===1)throw s=ma,is(t,0),vo(t,c),Ln(t,wt()),s;if(i===6)vo(t,c);else{if(p=t.current.alternate,(c&30)===0&&!pb(p)&&(i=fc(t,c),i===2&&(v=ui(t),v!==0&&(c=v,i=Nf(t,v))),i===1))throw s=ma,is(t,0),vo(t,c),Ln(t,wt()),s;switch(t.finishedWork=p,t.finishedLanes=c,i){case 0:case 1:throw Error(r(345));case 2:os(t,Rn,Ei);break;case 3:if(vo(t,c),(c&130023424)===c&&(i=jf+500-wt(),10<i)){if(Uo(t,0)!==0)break;if(p=t.suspendedLanes,(p&c)!==c){Pn(),t.pingedLanes|=t.suspendedLanes&p;break}t.timeoutHandle=Md(os.bind(null,t,Rn,Ei),i);break}os(t,Rn,Ei);break;case 4:if(vo(t,c),(c&4194240)===c)break;for(i=t.eventTimes,p=-1;0<c;){var E=31-Xe(c);v=1<<E,E=i[E],E>p&&(p=E),c&=~v}if(c=p,c=wt()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*hb(c/1960))-c,10<c){t.timeoutHandle=Md(os.bind(null,t,Rn,Ei),c);break}os(t,Rn,Ei);break;case 5:os(t,Rn,Ei);break;default:throw Error(r(329))}}}return Ln(t,wt()),t.callbackNode===s?Gm.bind(null,t):null}function Nf(t,i){var s=ya;return t.current.memoizedState.isDehydrated&&(is(t,i).flags|=256),t=fc(t,i),t!==2&&(i=Rn,Rn=s,i!==null&&Af(i)),t}function Af(t){Rn===null?Rn=t:Rn.push.apply(Rn,t)}function pb(t){for(var i=t;;){if(i.flags&16384){var s=i.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var c=0;c<s.length;c++){var p=s[c],v=p.getSnapshot;p=p.value;try{if(!V(v(),p))return!1}catch{return!1}}}if(s=i.child,i.subtreeFlags&16384&&s!==null)s.return=i,i=s;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function vo(t,i){for(i&=~Of,i&=~sc,t.suspendedLanes|=i,t.pingedLanes&=~i,t=t.expirationTimes;0<i;){var s=31-Xe(i),c=1<<s;t[s]=-1,i&=~c}}function Ym(t){if((pt&6)!==0)throw Error(r(327));nl();var i=Uo(t,0);if((i&1)===0)return Ln(t,wt()),null;var s=fc(t,i);if(t.tag!==0&&s===2){var c=ui(t);c!==0&&(i=c,s=Nf(t,c))}if(s===1)throw s=ma,is(t,0),vo(t,i),Ln(t,wt()),s;if(s===6)throw Error(r(345));return t.finishedWork=t.current.alternate,t.finishedLanes=i,os(t,Rn,Ei),Ln(t,wt()),null}function Df(t,i){var s=pt;pt|=1;try{return t(i)}finally{pt=s,pt===0&&(tl=wt()+500,zu&&co())}}function rs(t){yo!==null&&yo.tag===0&&(pt&6)===0&&nl();var i=pt;pt|=1;var s=nr.transition,c=ht;try{if(nr.transition=null,ht=1,t)return t()}finally{ht=c,nr.transition=s,pt=i,(pt&6)===0&&co()}}function Rf(){Vn=el.current,Nt(el)}function is(t,i){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,Vw(s)),Wt!==null)for(s=Wt.return;s!==null;){var c=s;switch(Kd(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Mu();break;case 3:Js(),Nt(Nn),Nt(bn),nf();break;case 5:ef(c);break;case 4:Js();break;case 13:Nt(zt);break;case 19:Nt(zt);break;case 10:Yd(c.type._context);break;case 22:case 23:Rf()}s=s.return}if(on=t,Wt=t=wo(t.current,null),hn=Vn=i,Yt=0,ma=null,Of=sc=ns=0,Rn=ya=null,Zo!==null){for(i=0;i<Zo.length;i++)if(s=Zo[i],c=s.interleaved,c!==null){s.interleaved=null;var p=c.next,v=s.pending;if(v!==null){var E=v.next;v.next=p,c.next=E}s.pending=c}Zo=null}return t}function Qm(t,i){do{var s=Wt;try{if(Gd(),Yu.current=Zu,Qu){for(var c=Ft.memoizedState;c!==null;){var p=c.queue;p!==null&&(p.pending=null),c=c.next}Qu=!1}if(ts=0,rn=Gt=Ft=null,ua=!1,ca=0,If.current=null,s===null||s.return===null){Yt=1,ma=i,Wt=null;break}e:{var v=t,E=s.return,P=s,D=i;if(i=hn,P.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var te=D,de=P,he=de.tag;if((de.mode&1)===0&&(he===0||he===11||he===15)){var ae=de.alternate;ae?(de.updateQueue=ae.updateQueue,de.memoizedState=ae.memoizedState,de.lanes=ae.lanes):(de.updateQueue=null,de.memoizedState=null)}var Ae=_m(E);if(Ae!==null){Ae.flags&=-257,km(Ae,E,P,v,i),Ae.mode&1&&bm(v,te,i),i=Ae,D=te;var Le=i.updateQueue;if(Le===null){var Fe=new Set;Fe.add(D),i.updateQueue=Fe}else Le.add(D);break e}else{if((i&1)===0){bm(v,te,i),Lf();break e}D=Error(r(426))}}else if(Rt&&P.mode&1){var $t=_m(E);if($t!==null){($t.flags&65536)===0&&($t.flags|=256),km($t,E,P,v,i),Hd(Xs(D,P));break e}}v=D=Xs(D,P),Yt!==4&&(Yt=2),ya===null?ya=[v]:ya.push(v),v=E;do{switch(v.tag){case 3:v.flags|=65536,i&=-i,v.lanes|=i;var Y=vm(v,D,i);Wp(v,Y);break e;case 1:P=D;var K=v.type,J=v.stateNode;if((v.flags&128)===0&&(typeof K.getDerivedStateFromError=="function"||J!==null&&typeof J.componentDidCatch=="function"&&(mo===null||!mo.has(J)))){v.flags|=65536,i&=-i,v.lanes|=i;var _e=wm(v,P,i);Wp(v,_e);break e}}v=v.return}while(v!==null)}Zm(s)}catch($e){i=$e,Wt===s&&s!==null&&(Wt=s=s.return);continue}break}while(!0)}function Jm(){var t=oc.current;return oc.current=Zu,t===null?Zu:t}function Lf(){(Yt===0||Yt===3||Yt===2)&&(Yt=4),on===null||(ns&268435455)===0&&(sc&268435455)===0||vo(on,hn)}function fc(t,i){var s=pt;pt|=2;var c=Jm();(on!==t||hn!==i)&&(Ei=null,is(t,i));do try{mb();break}catch(p){Qm(t,p)}while(!0);if(Gd(),pt=s,oc.current=c,Wt!==null)throw Error(r(261));return on=null,hn=0,Yt}function mb(){for(;Wt!==null;)Xm(Wt)}function yb(){for(;Wt!==null&&!Mt();)Xm(Wt)}function Xm(t){var i=ny(t.alternate,t,Vn);t.memoizedProps=t.pendingProps,i===null?Zm(t):Wt=i,If.current=null}function Zm(t){var i=t;do{var s=i.alternate;if(t=i.return,(i.flags&32768)===0){if(s=ab(s,i,Vn),s!==null){Wt=s;return}}else{if(s=ub(s,i),s!==null){s.flags&=32767,Wt=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Yt=6,Wt=null;return}}if(i=i.sibling,i!==null){Wt=i;return}Wt=i=t}while(i!==null);Yt===0&&(Yt=5)}function os(t,i,s){var c=ht,p=nr.transition;try{nr.transition=null,ht=1,gb(t,i,s,c)}finally{nr.transition=p,ht=c}return null}function gb(t,i,s,c){do nl();while(yo!==null);if((pt&6)!==0)throw Error(r(327));s=t.finishedWork;var p=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(r(177));t.callbackNode=null,t.callbackPriority=0;var v=s.lanes|s.childLanes;if(Cs(t,v),t===on&&(Wt=on=null,hn=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||ac||(ac=!0,ry(qi,function(){return nl(),null})),v=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||v){v=nr.transition,nr.transition=null;var E=ht;ht=1;var P=pt;pt|=4,If.current=null,db(t,s),Km(s,t),Q(Rd),$o=!!Dd,Rd=Dd=null,t.current=s,fb(s),ai(),pt=P,ht=E,nr.transition=v}else t.current=s;if(ac&&(ac=!1,yo=t,uc=p),v=t.pendingLanes,v===0&&(mo=null),hu(s.stateNode),Ln(t,wt()),i!==null)for(c=t.onRecoverableError,s=0;s<i.length;s++)p=i[s],c(p.value,{componentStack:p.stack,digest:p.digest});if(lc)throw lc=!1,t=Tf,Tf=null,t;return(uc&1)!==0&&t.tag!==0&&nl(),v=t.pendingLanes,(v&1)!==0?t===Pf?ga++:(ga=0,Pf=t):ga=0,co(),null}function nl(){if(yo!==null){var t=Ul(uc),i=nr.transition,s=ht;try{if(nr.transition=null,ht=16>t?16:t,yo===null)var c=!1;else{if(t=yo,yo=null,uc=0,(pt&6)!==0)throw Error(r(331));var p=pt;for(pt|=4,De=t.current;De!==null;){var v=De,E=v.child;if((De.flags&16)!==0){var P=v.deletions;if(P!==null){for(var D=0;D<P.length;D++){var te=P[D];for(De=te;De!==null;){var de=De;switch(de.tag){case 0:case 11:case 15:pa(8,de,v)}var he=de.child;if(he!==null)he.return=de,De=he;else for(;De!==null;){de=De;var ae=de.sibling,Ae=de.return;if(Um(de),de===te){De=null;break}if(ae!==null){ae.return=Ae,De=ae;break}De=Ae}}}var Le=v.alternate;if(Le!==null){var Fe=Le.child;if(Fe!==null){Le.child=null;do{var $t=Fe.sibling;Fe.sibling=null,Fe=$t}while(Fe!==null)}}De=v}}if((v.subtreeFlags&2064)!==0&&E!==null)E.return=v,De=E;else e:for(;De!==null;){if(v=De,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:pa(9,v,v.return)}var Y=v.sibling;if(Y!==null){Y.return=v.return,De=Y;break e}De=v.return}}var K=t.current;for(De=K;De!==null;){E=De;var J=E.child;if((E.subtreeFlags&2064)!==0&&J!==null)J.return=E,De=J;else e:for(E=K;De!==null;){if(P=De,(P.flags&2048)!==0)try{switch(P.tag){case 0:case 11:case 15:ic(9,P)}}catch($e){Bt(P,P.return,$e)}if(P===E){De=null;break e}var _e=P.sibling;if(_e!==null){_e.return=P.return,De=_e;break e}De=P.return}}if(pt=p,co(),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(Lo,t)}catch{}c=!0}return c}finally{ht=s,nr.transition=i}}return!1}function ey(t,i,s){i=Xs(s,i),i=vm(t,i,1),t=ho(t,i,1),i=Pn(),t!==null&&(di(t,1,i),Ln(t,i))}function Bt(t,i,s){if(t.tag===3)ey(t,t,s);else for(;i!==null;){if(i.tag===3){ey(i,t,s);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(mo===null||!mo.has(c))){t=Xs(s,t),t=wm(i,t,1),i=ho(i,t,1),t=Pn(),i!==null&&(di(i,1,t),Ln(i,t));break}}i=i.return}}function vb(t,i,s){var c=t.pingCache;c!==null&&c.delete(i),i=Pn(),t.pingedLanes|=t.suspendedLanes&s,on===t&&(hn&s)===s&&(Yt===4||Yt===3&&(hn&130023424)===hn&&500>wt()-jf?is(t,0):Of|=s),Ln(t,i)}function ty(t,i){i===0&&((t.mode&1)===0?i=1:(i=Mo,Mo<<=1,(Mo&130023424)===0&&(Mo=4194304)));var s=Pn();t=ki(t,i),t!==null&&(di(t,i,s),Ln(t,s))}function wb(t){var i=t.memoizedState,s=0;i!==null&&(s=i.retryLane),ty(t,s)}function bb(t,i){var s=0;switch(t.tag){case 13:var c=t.stateNode,p=t.memoizedState;p!==null&&(s=p.retryLane);break;case 19:c=t.stateNode;break;default:throw Error(r(314))}c!==null&&c.delete(i),ty(t,s)}var ny;ny=function(t,i,s){if(t!==null)if(t.memoizedProps!==i.pendingProps||Nn.current)Dn=!0;else{if((t.lanes&s)===0&&(i.flags&128)===0)return Dn=!1,lb(t,i,s);Dn=(t.flags&131072)!==0}else Dn=!1,Rt&&(i.flags&1048576)!==0&&Rp(i,Bu,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;nc(t,i),t=i.pendingProps;var p=Vs(i,bn.current);Qs(i,s),p=sf(null,i,c,t,p,s);var v=lf();return i.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,An(c)?(v=!0,Uu(i)):v=!1,i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,Xd(i),p.updater=ec,i.stateNode=p,p._reactInternals=i,hf(i,c,t,s),i=gf(null,i,c,!0,v,s)):(i.tag=0,Rt&&v&&$d(i),Tn(null,i,p,s),i=i.child),i;case 16:c=i.elementType;e:{switch(nc(t,i),t=i.pendingProps,p=c._init,c=p(c._payload),i.type=c,p=i.tag=kb(c),t=kr(c,t),p){case 0:i=yf(null,i,c,t,s);break e;case 1:i=Om(null,i,c,t,s);break e;case 11:i=xm(null,i,c,t,s);break e;case 14:i=Sm(null,i,c,kr(c.type,t),s);break e}throw Error(r(306,c,""))}return i;case 0:return c=i.type,p=i.pendingProps,p=i.elementType===c?p:kr(c,p),yf(t,i,c,p,s);case 1:return c=i.type,p=i.pendingProps,p=i.elementType===c?p:kr(c,p),Om(t,i,c,p,s);case 3:e:{if(jm(i),t===null)throw Error(r(387));c=i.pendingProps,v=i.memoizedState,p=v.element,Vp(t,i),qu(i,c,null,s);var E=i.memoizedState;if(c=E.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},i.updateQueue.baseState=v,i.memoizedState=v,i.flags&256){p=Xs(Error(r(423)),i),i=Tm(t,i,c,s,p);break e}else if(c!==p){p=Xs(Error(r(424)),i),i=Tm(t,i,c,s,p);break e}else for(Kn=lo(i.stateNode.containerInfo.firstChild),$n=i,Rt=!0,_r=null,s=$p(i,null,c,s),i.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(qs(),c===p){i=Si(t,i,s);break e}Tn(t,i,c,s)}i=i.child}return i;case 5:return qp(i),t===null&&Wd(i),c=i.type,p=i.pendingProps,v=t!==null?t.memoizedProps:null,E=p.children,Ld(c,p)?E=null:v!==null&&Ld(c,v)&&(i.flags|=32),Im(t,i),Tn(t,i,E,s),i.child;case 6:return t===null&&Wd(i),null;case 13:return Pm(t,i,s);case 4:return Zd(i,i.stateNode.containerInfo),c=i.pendingProps,t===null?i.child=Gs(i,null,c,s):Tn(t,i,c,s),i.child;case 11:return c=i.type,p=i.pendingProps,p=i.elementType===c?p:kr(c,p),xm(t,i,c,p,s);case 7:return Tn(t,i,i.pendingProps,s),i.child;case 8:return Tn(t,i,i.pendingProps.children,s),i.child;case 12:return Tn(t,i,i.pendingProps.children,s),i.child;case 10:e:{if(c=i.type._context,p=i.pendingProps,v=i.memoizedProps,E=p.value,Tt(Vu,c._currentValue),c._currentValue=E,v!==null)if(V(v.value,E)){if(v.children===p.children&&!Nn.current){i=Si(t,i,s);break e}}else for(v=i.child,v!==null&&(v.return=i);v!==null;){var P=v.dependencies;if(P!==null){E=v.child;for(var D=P.firstContext;D!==null;){if(D.context===c){if(v.tag===1){D=xi(-1,s&-s),D.tag=2;var te=v.updateQueue;if(te!==null){te=te.shared;var de=te.pending;de===null?D.next=D:(D.next=de.next,de.next=D),te.pending=D}}v.lanes|=s,D=v.alternate,D!==null&&(D.lanes|=s),Qd(v.return,s,i),P.lanes|=s;break}D=D.next}}else if(v.tag===10)E=v.type===i.type?null:v.child;else if(v.tag===18){if(E=v.return,E===null)throw Error(r(341));E.lanes|=s,P=E.alternate,P!==null&&(P.lanes|=s),Qd(E,s,i),E=v.sibling}else E=v.child;if(E!==null)E.return=v;else for(E=v;E!==null;){if(E===i){E=null;break}if(v=E.sibling,v!==null){v.return=E.return,E=v;break}E=E.return}v=E}Tn(t,i,p.children,s),i=i.child}return i;case 9:return p=i.type,c=i.pendingProps.children,Qs(i,s),p=er(p),c=c(p),i.flags|=1,Tn(t,i,c,s),i.child;case 14:return c=i.type,p=kr(c,i.pendingProps),p=kr(c.type,p),Sm(t,i,c,p,s);case 15:return Em(t,i,i.type,i.pendingProps,s);case 17:return c=i.type,p=i.pendingProps,p=i.elementType===c?p:kr(c,p),nc(t,i),i.tag=1,An(c)?(t=!0,Uu(i)):t=!1,Qs(i,s),ym(i,c,p),hf(i,c,p,s),gf(null,i,c,!0,t,s);case 19:return Am(t,i,s);case 22:return Cm(t,i,s)}throw Error(r(156,i.tag))};function ry(t,i){return Ll(t,i)}function _b(t,i,s,c){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rr(t,i,s,c){return new _b(t,i,s,c)}function Mf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function kb(t){if(typeof t=="function")return Mf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===He)return 11;if(t===Be)return 14}return 2}function wo(t,i){var s=t.alternate;return s===null?(s=rr(t.tag,i,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=i,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,i=t.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function hc(t,i,s,c,p,v){var E=2;if(c=t,typeof t=="function")Mf(t)&&(E=1);else if(typeof t=="string")E=5;else e:switch(t){case pe:return ss(s.children,p,v,i);case se:E=8,p|=8;break;case we:return t=rr(12,s,i,p|2),t.elementType=we,t.lanes=v,t;case be:return t=rr(13,s,i,p),t.elementType=be,t.lanes=v,t;case Ke:return t=rr(19,s,i,p),t.elementType=Ke,t.lanes=v,t;case me:return pc(s,p,v,i);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ke:E=10;break e;case Ce:E=9;break e;case He:E=11;break e;case Be:E=14;break e;case Ee:E=16,c=null;break e}throw Error(r(130,t==null?t:typeof t,""))}return i=rr(E,s,i,p),i.elementType=t,i.type=c,i.lanes=v,i}function ss(t,i,s,c){return t=rr(7,t,c,i),t.lanes=s,t}function pc(t,i,s,c){return t=rr(22,t,c,i),t.elementType=me,t.lanes=s,t.stateNode={isHidden:!1},t}function Uf(t,i,s){return t=rr(6,t,null,i),t.lanes=s,t}function zf(t,i,s){return i=rr(4,t.children!==null?t.children:[],t.key,i),i.lanes=s,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}function xb(t,i,s,c,p){this.tag=i,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fo(0),this.expirationTimes=Fo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fo(0),this.identifierPrefix=c,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function Ff(t,i,s,c,p,v,E,P,D){return t=new xb(t,i,s,P,D),i===1?(i=1,v===!0&&(i|=8)):i=0,v=rr(3,null,null,i),t.current=v,v.stateNode=t,v.memoizedState={element:c,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xd(v),t}function Sb(t,i,s){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ve,key:c==null?null:""+c,children:t,containerInfo:i,implementation:s}}function iy(t){if(!t)return uo;t=t._reactInternals;e:{if(wn(t)!==t||t.tag!==1)throw Error(r(170));var i=t;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(An(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(r(171))}if(t.tag===1){var s=t.type;if(An(s))return Np(t,s,i)}return i}function oy(t,i,s,c,p,v,E,P,D){return t=Ff(s,c,!0,t,p,v,E,P,D),t.context=iy(null),s=t.current,c=Pn(),p=go(s),v=xi(c,p),v.callback=i??null,ho(s,v,p),t.current.lanes=p,di(t,p,c),Ln(t,c),t}function mc(t,i,s,c){var p=i.current,v=Pn(),E=go(p);return s=iy(s),i.context===null?i.context=s:i.pendingContext=s,i=xi(v,E),i.payload={element:t},c=c===void 0?null:c,c!==null&&(i.callback=c),t=ho(p,i,E),t!==null&&(Er(t,p,E,v),Hu(t,p,E)),E}function yc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function sy(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<i?s:i}}function Bf(t,i){sy(t,i),(t=t.alternate)&&sy(t,i)}function Eb(){return null}var ly=typeof reportError=="function"?reportError:function(t){console.error(t)};function $f(t){this._internalRoot=t}gc.prototype.render=$f.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));mc(t,i,null,null)},gc.prototype.unmount=$f.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;rs(function(){mc(null,t,null,null)}),i[vi]=null}};function gc(t){this._internalRoot=t}gc.prototype.unstable_scheduleHydration=function(t){if(t){var i=gu();t={blockedOn:null,target:t,priority:i};for(var s=0;s<qt.length&&i!==0&&i<qt[s].priority;s++);qt.splice(s,0,t),s===0&&wu(t)}};function Kf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ay(){}function Cb(t,i,s,c,p){if(p){if(typeof c=="function"){var v=c;c=function(){var te=yc(E);v.call(te)}}var E=oy(i,c,t,0,null,!1,!1,"",ay);return t._reactRootContainer=E,t[vi]=E.current,ta(t.nodeType===8?t.parentNode:t),rs(),E}for(;p=t.lastChild;)t.removeChild(p);if(typeof c=="function"){var P=c;c=function(){var te=yc(D);P.call(te)}}var D=Ff(t,0,!1,null,null,!1,!1,"",ay);return t._reactRootContainer=D,t[vi]=D.current,ta(t.nodeType===8?t.parentNode:t),rs(function(){mc(i,D,s,c)}),D}function wc(t,i,s,c,p){var v=s._reactRootContainer;if(v){var E=v;if(typeof p=="function"){var P=p;p=function(){var D=yc(E);P.call(D)}}mc(i,E,t,p)}else E=Cb(s,i,t,p,c);return yc(E)}yu=function(t){switch(t.tag){case 3:var i=t.stateNode;if(i.current.memoizedState.isDehydrated){var s=Gi(i.pendingLanes);s!==0&&(Is(i,s|1),Ln(i,wt()),(pt&6)===0&&(tl=wt()+500,co()))}break;case 13:rs(function(){var c=ki(t,1);if(c!==null){var p=Pn();Er(c,t,1,p)}}),Bf(t,1)}},dt=function(t){if(t.tag===13){var i=ki(t,134217728);if(i!==null){var s=Pn();Er(i,t,134217728,s)}Bf(t,134217728)}},zl=function(t){if(t.tag===13){var i=go(t),s=ki(t,i);if(s!==null){var c=Pn();Er(s,t,i,c)}Bf(t,i)}},gu=function(){return ht},vu=function(t,i){var s=ht;try{return ht=t,i()}finally{ht=s}},Oe=function(t,i,s){switch(i){case"input":if(cr(t,s),i=s.name,s.type==="radio"&&i!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<s.length;i++){var c=s[i];if(c!==t&&c.form===t.form){var p=Lu(c);if(!p)throw Error(r(90));We(c),cr(c,p)}}}break;case"textarea":Al(t,s);break;case"select":i=s.value,i!=null&&un(t,!!s.multiple,i,!1)}},uu=Df,cu=rs;var Ib={usingClientEntryPoint:!1,Events:[ia,$s,Lu,Dl,xs,Df]},va={findFiberByHostInstance:Yo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ob={bundleType:va.bundleType,version:va.version,rendererPackageName:va.rendererPackageName,rendererConfig:va.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ie.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Rl(t),t===null?null:t.stateNode},findFiberByHostInstance:va.findFiberByHostInstance||Eb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bc.isDisabled&&bc.supportsFiber)try{Lo=bc.inject(Ob),In=bc}catch{}}return Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ib,Mn.createPortal=function(t,i){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kf(i))throw Error(r(200));return Sb(t,i,null,s)},Mn.createRoot=function(t,i){if(!Kf(t))throw Error(r(299));var s=!1,c="",p=ly;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(p=i.onRecoverableError)),i=Ff(t,1,!1,null,null,s,!1,c,p),t[vi]=i.current,ta(t.nodeType===8?t.parentNode:t),new $f(i)},Mn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=Rl(i),t=t===null?null:t.stateNode,t},Mn.flushSync=function(t){return rs(t)},Mn.hydrate=function(t,i,s){if(!vc(i))throw Error(r(200));return wc(null,t,i,!0,s)},Mn.hydrateRoot=function(t,i,s){if(!Kf(t))throw Error(r(405));var c=s!=null&&s.hydratedSources||null,p=!1,v="",E=ly;if(s!=null&&(s.unstable_strictMode===!0&&(p=!0),s.identifierPrefix!==void 0&&(v=s.identifierPrefix),s.onRecoverableError!==void 0&&(E=s.onRecoverableError)),i=oy(i,null,t,1,s??null,p,!1,v,E),t[vi]=i.current,ta(t),c)for(t=0;t<c.length;t++)s=c[t],p=s._getVersion,p=p(s._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[s,p]:i.mutableSourceEagerHydrationData.push(s,p);return new gc(i)},Mn.render=function(t,i,s){if(!vc(i))throw Error(r(200));return wc(null,t,i,!1,s)},Mn.unmountComponentAtNode=function(t){if(!vc(t))throw Error(r(40));return t._reactRootContainer?(rs(function(){wc(null,null,t,!1,function(){t._reactRootContainer=null,t[vi]=null})}),!0):!1},Mn.unstable_batchedUpdates=Df,Mn.unstable_renderSubtreeIntoContainer=function(t,i,s,c){if(!vc(s))throw Error(r(200));if(t==null||t._reactInternals===void 0)throw Error(r(38));return wc(t,i,s,!1,c)},Mn.version="18.3.1-next-f1338f8080-20240426",Mn}var yy;function zb(){if(yy)return Hf.exports;yy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Hf.exports=Ub(),Hf.exports}var gy;function Fb(){if(gy)return _c;gy=1;var n=zb();return _c.createRoot=n.createRoot,_c.hydrateRoot=n.hydrateRoot,_c}var Bb=Fb(),Rc={exports:{}},$b=Rc.exports,vy;function Kb(){return vy||(vy=1,(function(n,e){((r,o)=>{n.exports=o()})($b,function(){var r=function(u,f){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(g,w){g.__proto__=w}:function(g,w){for(var k in w)Object.prototype.hasOwnProperty.call(w,k)&&(g[k]=w[k])}))(u,f)},o=function(){return(o=Object.assign||function(u){for(var f,g=1,w=arguments.length;g<w;g++)for(var k in f=arguments[g])Object.prototype.hasOwnProperty.call(f,k)&&(u[k]=f[k]);return u}).apply(this,arguments)};function l(u,f,g){for(var w,k=0,S=f.length;k<S;k++)!w&&k in f||((w=w||Array.prototype.slice.call(f,0,k))[k]=f[k]);return u.concat(w||Array.prototype.slice.call(f))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Nb,d=Object.keys,h=Array.isArray;function y(u,f){return typeof f=="object"&&d(f).forEach(function(g){u[g]=f[g]}),u}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var m=Object.getPrototypeOf,_={}.hasOwnProperty;function b(u,f){return _.call(u,f)}function x(u,f){typeof f=="function"&&(f=f(m(u))),(typeof Reflect>"u"?d:Reflect.ownKeys)(f).forEach(function(g){j(u,g,f[g])})}var C=Object.defineProperty;function j(u,f,g,w){C(u,f,y(g&&b(g,"get")&&typeof g.get=="function"?{get:g.get,set:g.set,configurable:!0}:{value:g,configurable:!0,writable:!0},w))}function T(u){return{from:function(f){return u.prototype=Object.create(f.prototype),j(u.prototype,"constructor",u),{extend:x.bind(null,u.prototype)}}}}var W=Object.getOwnPropertyDescriptor,q=[].slice;function X(u,f,g){return q.call(u,f,g)}function ce(u,f){return f(u)}function ie(u){if(!u)throw new Error("Assertion Failed")}function ee(u){a.setImmediate?setImmediate(u):setTimeout(u,0)}function ve(u,f){if(typeof f=="string"&&b(u,f))return u[f];if(!f)return u;if(typeof f!="string"){for(var g=[],w=0,k=f.length;w<k;++w){var S=ve(u,f[w]);g.push(S)}return g}var I,O=f.indexOf(".");return O===-1||(I=u[f.substr(0,O)])==null?void 0:ve(I,f.substr(O+1))}function pe(u,f,g){if(u&&f!==void 0&&!("isFrozen"in Object&&Object.isFrozen(u)))if(typeof f!="string"&&"length"in f){ie(typeof g!="string"&&"length"in g);for(var w=0,k=f.length;w<k;++w)pe(u,f[w],g[w])}else{var S,I,O=f.indexOf(".");O!==-1?(S=f.substr(0,O),(O=f.substr(O+1))===""?g===void 0?h(u)&&!isNaN(parseInt(S))?u.splice(S,1):delete u[S]:u[S]=g:pe(I=(I=u[S])&&b(u,S)?I:u[S]={},O,g)):g===void 0?h(u)&&!isNaN(parseInt(f))?u.splice(f,1):delete u[f]:u[f]=g}}function se(u){var f,g={};for(f in u)b(u,f)&&(g[f]=u[f]);return g}var we=[].concat;function ke(u){return we.apply([],u)}var G="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ke([8,16,32,64].map(function(u){return["Int","Uint","Float"].map(function(f){return f+u+"Array"})}))).filter(function(u){return a[u]}),Ce=new Set(G.map(function(u){return a[u]})),He=null;function be(u){return He=new WeakMap,u=(function f(g){if(!g||typeof g!="object")return g;var w=He.get(g);if(w)return w;if(h(g)){w=[],He.set(g,w);for(var k=0,S=g.length;k<S;++k)w.push(f(g[k]))}else if(Ce.has(g.constructor))w=g;else{var I,O=m(g);for(I in w=O===Object.prototype?{}:Object.create(O),He.set(g,w),g)b(g,I)&&(w[I]=f(g[I]))}return w})(u),He=null,u}var Ke={}.toString;function Be(u){return Ke.call(u).slice(8,-1)}var Ee=typeof Symbol<"u"?Symbol.iterator:"@@iterator",me=typeof Ee=="symbol"?function(u){var f;return u!=null&&(f=u[Ee])&&f.apply(u)}:function(){return null};function U(u,f){f=u.indexOf(f),0<=f&&u.splice(f,1)}var oe={};function ne(u){var f,g,w,k;if(arguments.length===1){if(h(u))return u.slice();if(this===oe&&typeof u=="string")return[u];if(k=me(u))for(g=[];!(w=k.next()).done;)g.push(w.value);else{if(u==null)return[u];if(typeof(f=u.length)!="number")return[u];for(g=new Array(f);f--;)g[f]=u[f]}}else for(f=arguments.length,g=new Array(f);f--;)g[f]=arguments[f];return g}var N=typeof Symbol<"u"?function(u){return u[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},G=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],vn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(G),ye={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ie(u,f){this.name=u,this.message=f}function Ge(u,f){return u+". Errors: "+Object.keys(f).map(function(g){return f[g].toString()}).filter(function(g,w,k){return k.indexOf(g)===w}).join(`
`)}function Ve(u,f,g,w){this.failures=f,this.failedKeys=w,this.successCount=g,this.message=Ge(u,f)}function Re(u,f){this.name="BulkError",this.failures=Object.keys(f).map(function(g){return f[g]}),this.failuresByPos=f,this.message=Ge(u,this.failures)}T(Ie).from(Error).extend({toString:function(){return this.name+": "+this.message}}),T(Ve).from(Ie),T(Re).from(Ie);var Ye=vn.reduce(function(u,f){return u[f]=f+"Error",u},{}),et=Ie,fe=vn.reduce(function(u,f){var g=f+"Error";function w(k,S){this.name=g,k?typeof k=="string"?(this.message="".concat(k).concat(S?`
 `+S:""),this.inner=S||null):typeof k=="object"&&(this.message="".concat(k.name," ").concat(k.message),this.inner=k):(this.message=ye[f]||g,this.inner=null)}return T(w).from(et),u[f]=w,u},{}),It=(fe.Syntax=SyntaxError,fe.Type=TypeError,fe.Range=RangeError,G.reduce(function(u,f){return u[f+"Error"]=fe[f],u},{}));G=vn.reduce(function(u,f){return["Syntax","Type","Range"].indexOf(f)===-1&&(u[f+"Error"]=fe[f]),u},{});function We(){}function it(u){return u}function ct(u,f){return u==null||u===it?f:function(g){return f(u(g))}}function vt(u,f){return function(){u.apply(this,arguments),f.apply(this,arguments)}}function gn(u,f){return u===We?f:function(){var g=u.apply(this,arguments),w=(g!==void 0&&(arguments[0]=g),this.onsuccess),k=this.onerror,S=(this.onsuccess=null,this.onerror=null,f.apply(this,arguments));return w&&(this.onsuccess=this.onsuccess?vt(w,this.onsuccess):w),k&&(this.onerror=this.onerror?vt(k,this.onerror):k),S!==void 0?S:g}}function cr(u,f){return u===We?f:function(){u.apply(this,arguments);var g=this.onsuccess,w=this.onerror;this.onsuccess=this.onerror=null,f.apply(this,arguments),g&&(this.onsuccess=this.onsuccess?vt(g,this.onsuccess):g),w&&(this.onerror=this.onerror?vt(w,this.onerror):w)}}function Fn(u,f){return u===We?f:function(k){var w=u.apply(this,arguments),k=(y(k,w),this.onsuccess),S=this.onerror,I=(this.onsuccess=null,this.onerror=null,f.apply(this,arguments));return k&&(this.onsuccess=this.onsuccess?vt(k,this.onsuccess):k),S&&(this.onerror=this.onerror?vt(S,this.onerror):S),w===void 0?I===void 0?void 0:I:y(w,I)}}function Nl(u,f){return u===We?f:function(){return f.apply(this,arguments)!==!1&&u.apply(this,arguments)}}function Zr(u,f){return u===We?f:function(){var g=u.apply(this,arguments);if(g&&typeof g.then=="function"){for(var w=this,k=arguments.length,S=new Array(k);k--;)S[k]=arguments[k];return g.then(function(){return f.apply(w,S)})}return f.apply(this,arguments)}}G.ModifyError=Ve,G.DexieError=Ie,G.BulkError=Re;var un=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function bs(u){un=u}var zi={},Al=100,Fi=typeof Promise>"u"?[]:(vn=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[Fi=crypto.subtle.digest("SHA-512",new Uint8Array([0])),m(Fi),vn]:[vn,m(vn),vn]),vn=Fi[0],mi=Fi[1],mi=mi&&mi.then,dr=vn&&vn.constructor,Bi=!!Fi[2],$i=function(u,f){ni.push([u,f]),Ir&&(queueMicrotask(cu),Ir=!1)},ei=!0,Ir=!0,ti=[],No=[],_s=it,Or={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:We,pgp:!1,env:{},finalize:We},ze=Or,ni=[],fr=0,Ki=[];function Oe(u){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var f=this._PSD=ze;if(typeof u!="function"){if(u!==zi)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&ks(this,this._value)}else this._state=null,this._value=null,++f.ref,(function g(w,k){try{k(function(S){if(w._state===null){if(S===w)throw new TypeError("A promise cannot be resolved with itself.");var I=w._lib&&Tr();S&&typeof S.then=="function"?g(w,function(O,F){S instanceof Oe?S._then(O,F):S.then(O,F)}):(w._state=!0,w._value=S,Dl(w)),I&&ii()}},ks.bind(null,w))}catch(S){ks(w,S)}})(this,u)}var jr={get:function(){var u=ze,f=Wi;function g(w,k){var S=this,I=!u.global&&(u!==ze||f!==Wi),O=I&&!wn(),F=new Oe(function(V,L){xs(S,new ri(Ll(w,u,I,O),Ll(k,u,I,O),V,L,u))});return this._consoleTask&&(F._consoleTask=this._consoleTask),F}return g.prototype=zi,g},set:function(u){j(this,"then",u&&u.prototype===zi?jr:{get:function(){return u},set:jr.set})}};function ri(u,f,g,w,k){this.onFulfilled=typeof u=="function"?u:null,this.onRejected=typeof f=="function"?f:null,this.resolve=g,this.reject=w,this.psd=k}function ks(u,f){var g,w;No.push(f),u._state===null&&(g=u._lib&&Tr(),f=_s(f),u._state=!1,u._value=f,w=u,ti.some(function(k){return k._value===w._value})||ti.push(w),Dl(u),g)&&ii()}function Dl(u){var f=u._listeners;u._listeners=[];for(var g=0,w=f.length;g<w;++g)xs(u,f[g]);var k=u._PSD;--k.ref||k.finalize(),fr===0&&(++fr,$i(function(){--fr==0&&oi()},[]))}function xs(u,f){if(u._state===null)u._listeners.push(f);else{var g=u._state?f.onFulfilled:f.onRejected;if(g===null)return(u._state?f.resolve:f.reject)(u._value);++f.psd.ref,++fr,$i(uu,[g,u,f])}}function uu(u,f,g){try{var w,k=f._value;!f._state&&No.length&&(No=[]),w=un&&f._consoleTask?f._consoleTask.run(function(){return u(k)}):u(k),f._state||No.indexOf(k)!==-1||(S=>{for(var I=ti.length;I;)if(ti[--I]._value===S._value)return ti.splice(I,1)})(f),g.resolve(w)}catch(S){g.reject(S)}finally{--fr==0&&oi(),--g.psd.ref||g.psd.finalize()}}function cu(){Ar(Or,function(){Tr()&&ii()})}function Tr(){var u=ei;return Ir=ei=!1,u}function ii(){var u,f,g;do for(;0<ni.length;)for(u=ni,ni=[],g=u.length,f=0;f<g;++f){var w=u[f];w[0].apply(null,w[1])}while(0<ni.length);Ir=ei=!0}function oi(){for(var u=ti,f=(ti=[],u.forEach(function(w){w._PSD.onunhandled.call(null,w._value,w)}),Ki.slice(0)),g=f.length;g;)f[--g]()}function Vi(u){return new Oe(zi,!1,u)}function _t(u,f){var g=ze;return function(){var w=Tr(),k=ze;try{return Nr(g,!0),u.apply(this,arguments)}catch(S){f&&f(S)}finally{Nr(k,!1),w&&ii()}}}x(Oe.prototype,{then:jr,_then:function(u,f){xs(this,new ri(null,null,u,f,ze))},catch:function(u){var f,g;return arguments.length===1?this.then(null,u):(f=u,g=arguments[1],typeof f=="function"?this.then(null,function(w){return(w instanceof f?g:Vi)(w)}):this.then(null,function(w){return(w&&w.name===f?g:Vi)(w)}))},finally:function(u){return this.then(function(f){return Oe.resolve(u()).then(function(){return f})},function(f){return Oe.resolve(u()).then(function(){return Vi(f)})})},timeout:function(u,f){var g=this;return u<1/0?new Oe(function(w,k){var S=setTimeout(function(){return k(new fe.Timeout(f))},u);g.then(w,k).finally(clearTimeout.bind(null,S))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&j(Oe.prototype,Symbol.toStringTag,"Dexie.Promise"),Or.env=Rl(),x(Oe,{all:function(){var u=ne.apply(null,arguments).map(Do);return new Oe(function(f,g){u.length===0&&f([]);var w=u.length;u.forEach(function(k,S){return Oe.resolve(k).then(function(I){u[S]=I,--w||f(u)},g)})})},resolve:function(u){return u instanceof Oe?u:u&&typeof u.then=="function"?new Oe(function(f,g){u.then(f,g)}):new Oe(zi,!0,u)},reject:Vi,race:function(){var u=ne.apply(null,arguments).map(Do);return new Oe(function(f,g){u.map(function(w){return Oe.resolve(w).then(f,g)})})},PSD:{get:function(){return ze},set:function(u){return ze=u}},totalEchoes:{get:function(){return Wi}},newPSD:Pr,usePSD:Ar,scheduler:{get:function(){return $i},set:function(u){$i=u}},rejectionMapper:{get:function(){return _s},set:function(u){_s=u}},follow:function(u,f){return new Oe(function(g,w){return Pr(function(k,S){var I=ze;I.unhandleds=[],I.onunhandled=S,I.finalize=vt(function(){var O,F=this;O=function(){F.unhandleds.length===0?k():S(F.unhandleds[0])},Ki.push(function V(){O(),Ki.splice(Ki.indexOf(V),1)}),++fr,$i(function(){--fr==0&&oi()},[])},I.finalize),u()},f,g,w)})}}),dr&&(dr.allSettled&&j(Oe,"allSettled",function(){var u=ne.apply(null,arguments).map(Do);return new Oe(function(f){u.length===0&&f([]);var g=u.length,w=new Array(g);u.forEach(function(k,S){return Oe.resolve(k).then(function(I){return w[S]={status:"fulfilled",value:I}},function(I){return w[S]={status:"rejected",reason:I}}).then(function(){return--g||f(w)})})})}),dr.any&&typeof AggregateError<"u"&&j(Oe,"any",function(){var u=ne.apply(null,arguments).map(Do);return new Oe(function(f,g){u.length===0&&g(new AggregateError([]));var w=u.length,k=new Array(w);u.forEach(function(S,I){return Oe.resolve(S).then(function(O){return f(O)},function(O){k[I]=O,--w||g(new AggregateError(k))})})})}),dr.withResolvers)&&(Oe.withResolvers=dr.withResolvers);var Vt={awaits:0,echoes:0,id:0},Ao=0,si=[],li=0,Wi=0,Cd=0;function Pr(u,I,g,w){var k=ze,S=Object.create(k),I=(S.parent=k,S.ref=0,S.global=!1,S.id=++Cd,Or.env,S.env=Bi?{Promise:Oe,PromiseProp:{value:Oe,configurable:!0,writable:!0},all:Oe.all,race:Oe.race,allSettled:Oe.allSettled,any:Oe.any,resolve:Oe.resolve,reject:Oe.reject}:{},I&&y(S,I),++k.ref,S.finalize=function(){--this.parent.ref||this.parent.finalize()},Ar(S,u,g,w));return S.ref===0&&S.finalize(),I}function Hi(){return Vt.id||(Vt.id=++Ao),++Vt.awaits,Vt.echoes+=Al,Vt.id}function wn(){return!!Vt.awaits&&(--Vt.awaits==0&&(Vt.id=0),Vt.echoes=Vt.awaits*Al,!0)}function Do(u){return Vt.echoes&&u&&u.constructor===dr?(Hi(),u.then(function(f){return wn(),f},function(f){return wn(),Mt(f)})):u}function du(){var u=si[si.length-1];si.pop(),Nr(u,!1)}function Nr(u,f){var g,w,k=ze;(f?!Vt.echoes||li++&&u===ze:!li||--li&&u===ze)||queueMicrotask(f?(function(S){++Wi,Vt.echoes&&--Vt.echoes!=0||(Vt.echoes=Vt.awaits=Vt.id=0),si.push(ze),Nr(S,!0)}).bind(null,u):du),u!==ze&&(ze=u,k===Or&&(Or.env=Rl()),Bi)&&(g=Or.env.Promise,w=u.env,k.global||u.global)&&(Object.defineProperty(a,"Promise",w.PromiseProp),g.all=w.all,g.race=w.race,g.resolve=w.resolve,g.reject=w.reject,w.allSettled&&(g.allSettled=w.allSettled),w.any)&&(g.any=w.any)}function Rl(){var u=a.Promise;return Bi?{Promise:u,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:u.all,race:u.race,allSettled:u.allSettled,any:u.any,resolve:u.resolve,reject:u.reject}:{}}function Ar(u,f,g,w,k){var S=ze;try{return Nr(u,!0),f(g,w,k)}finally{Nr(S,!1)}}function Ll(u,f,g,w){return typeof u!="function"?u:function(){var k=ze;g&&Hi(),Nr(f,!0);try{return u.apply(this,arguments)}finally{Nr(k,!1),w&&queueMicrotask(wn)}}}function Ss(u){Promise===dr&&Vt.echoes===0?li===0?u():enqueueNativeMicroTask(u):setTimeout(u,0)}(""+mi).indexOf("[native code]")===-1&&(Hi=wn=We);var Mt=Oe.reject,ai="",wt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",fu="String expected.",Dr=[],Ro="__dbnames",qi="readonly",Ml="readwrite";function Rr(u,f){return u?f?function(){return u.apply(this,arguments)&&f.apply(this,arguments)}:u:f}var Lo={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function In(u){return typeof u!="string"||/\./.test(u)?function(f){return f}:function(f){return f[u]===void 0&&u in f&&delete(f=be(f))[u],f}}function hu(){throw fe.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Xe(u,f){try{var g=pu(u),w=pu(f);if(g!==w)return g==="Array"?1:w==="Array"?-1:g==="binary"?1:w==="binary"?-1:g==="string"?1:w==="string"?-1:g==="Date"?1:w!=="Date"?NaN:-1;switch(g){case"number":case"Date":case"string":return f<u?1:u<f?-1:0;case"binary":for(var k=mu(u),S=mu(f),I=k.length,O=S.length,F=I<O?I:O,V=0;V<F;++V)if(k[V]!==S[V])return k[V]<S[V]?-1:1;return I===O?0:I<O?-1:1;case"Array":for(var L=u,A=f,B=L.length,$=A.length,z=B<$?B:$,M=0;M<z;++M){var Q=Xe(L[M],A[M]);if(Q!==0)return Q}return B===$?0:B<$?-1:1}}catch{}return NaN}function pu(u){var f=typeof u;return f=="object"&&(ArrayBuffer.isView(u)||(f=Be(u))==="ArrayBuffer")?"binary":f}function mu(u){return u instanceof Uint8Array?u:ArrayBuffer.isView(u)?new Uint8Array(u.buffer,u.byteOffset,u.byteLength):new Uint8Array(u)}function Es(u,f,g){var w=u.schema.yProps;return w?(f&&0<g.numFailures&&(f=f.filter(function(k,S){return!g.failures[S]})),Promise.all(w.map(function(k){return k=k.updatesTable,f?u.db.table(k).where("k").anyOf(f).delete():u.db.table(k).clear()})).then(function(){return g})):g}Mo.prototype.execute=function(u){var f=this["@@propmod"];if(f.add!==void 0){var g=f.add;if(h(g))return l(l([],h(u)?u:[],!0),g).sort();if(typeof g=="number")return(Number(u)||0)+g;if(typeof g=="bigint")try{return BigInt(u)+g}catch{return BigInt(0)+g}throw new TypeError("Invalid term ".concat(g))}if(f.remove!==void 0){var w=f.remove;if(h(w))return h(u)?u.filter(function(k){return!w.includes(k)}).sort():[];if(typeof w=="number")return Number(u)-w;if(typeof w=="bigint")try{return BigInt(u)-w}catch{return BigInt(0)-w}throw new TypeError("Invalid subtrahend ".concat(w))}return g=(g=f.replacePrefix)==null?void 0:g[0],g&&typeof u=="string"&&u.startsWith(g)?f.replacePrefix[1]+u.substring(g.length):u};var Lr=Mo;function Mo(u){this["@@propmod"]=u}function Gi(u,f){for(var g=d(f),w=g.length,k=!1,S=0;S<w;++S){var I=g[S],O=f[I],F=ve(u,I);O instanceof Lr?(pe(u,I,O.execute(F)),k=!0):F!==O&&(pe(u,I,O),k=!0)}return k}St.prototype._trans=function(u,f,g){var w=this._tx||ze.trans,k=this.name,S=un&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(u==="readonly"?"read":"write"," ").concat(this.name));function I(V,L,A){if(A.schema[k])return f(A.idbtrans,A);throw new fe.NotFound("Table "+k+" not part of transaction")}var O=Tr();try{var F=w&&w.db._novip===this.db._novip?w===ze.trans?w._promise(u,I,g):Pr(function(){return w._promise(u,I,g)},{trans:w,transless:ze.transless||ze}):(function V(L,A,B,$){if(L.idbdb&&(L._state.openComplete||ze.letThrough||L._vip)){var z=L._createTransaction(A,B,L._dbSchema);try{z.create(),L._state.PR1398_maxLoop=3}catch(M){return M.name===Ye.InvalidState&&L.isOpen()&&0<--L._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),L.close({disableAutoOpen:!1}),L.open().then(function(){return V(L,A,B,$)})):Mt(M)}return z._promise(A,function(M,Q){return Pr(function(){return ze.trans=z,$(M,Q,z)})}).then(function(M){if(A==="readwrite")try{z.idbtrans.commit()}catch{}return A==="readonly"?M:z._completion.then(function(){return M})})}if(L._state.openComplete)return Mt(new fe.DatabaseClosed(L._state.dbOpenError));if(!L._state.isBeingOpened){if(!L._state.autoOpen)return Mt(new fe.DatabaseClosed);L.open().catch(We)}return L._state.dbReadyPromise.then(function(){return V(L,A,B,$)})})(this.db,u,[this.name],I);return S&&(F._consoleTask=S,F=F.catch(function(V){return console.trace(V),Mt(V)})),F}finally{O&&ii()}},St.prototype.get=function(u,f){var g=this;return u&&u.constructor===Object?this.where(u).first(f):u==null?Mt(new fe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(w){return g.core.get({trans:w,key:u}).then(function(k){return g.hook.reading.fire(k)})}).then(f)},St.prototype.where=function(u){if(typeof u=="string")return new this.db.WhereClause(this,u);if(h(u))return new this.db.WhereClause(this,"[".concat(u.join("+"),"]"));var f=d(u);if(f.length===1)return this.where(f[0]).equals(u[f[0]]);var g=this.schema.indexes.concat(this.schema.primKey).filter(function(O){if(O.compound&&f.every(function(V){return 0<=O.keyPath.indexOf(V)})){for(var F=0;F<f.length;++F)if(f.indexOf(O.keyPath[F])===-1)return!1;return!0}return!1}).sort(function(O,F){return O.keyPath.length-F.keyPath.length})[0];if(g&&this.db._maxKey!==ai)return I=g.keyPath.slice(0,f.length),this.where(I).equals(I.map(function(O){return u[O]}));!g&&un&&console.warn("The query ".concat(JSON.stringify(u)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(f.join("+"),"]"));var w=this.schema.idxByName;function k(O,F){return Xe(O,F)===0}var I=f.reduce(function(L,F){var V=L[0],L=L[1],A=w[F],B=u[F];return[V||A,V||!A?Rr(L,A&&A.multi?function($){return $=ve($,F),h($)&&$.some(function(z){return k(B,z)})}:function($){return k(B,ve($,F))}):L]},[null,null]),S=I[0],I=I[1];return S?this.where(S.name).equals(u[S.keyPath]).filter(I):g?this.filter(I):this.where(f).equals("")},St.prototype.filter=function(u){return this.toCollection().and(u)},St.prototype.count=function(u){return this.toCollection().count(u)},St.prototype.offset=function(u){return this.toCollection().offset(u)},St.prototype.limit=function(u){return this.toCollection().limit(u)},St.prototype.each=function(u){return this.toCollection().each(u)},St.prototype.toArray=function(u){return this.toCollection().toArray(u)},St.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},St.prototype.orderBy=function(u){return new this.db.Collection(new this.db.WhereClause(this,h(u)?"[".concat(u.join("+"),"]"):u))},St.prototype.reverse=function(){return this.toCollection().reverse()},St.prototype.mapToClass=function(u){for(var f=this.db,g=this.name,w=((this.schema.mappedClass=u).prototype instanceof hu&&(u=(I=>{var O=L,F=I;if(typeof F!="function"&&F!==null)throw new TypeError("Class extends value "+String(F)+" is not a constructor or null");function V(){this.constructor=O}function L(){return I!==null&&I.apply(this,arguments)||this}return r(O,F),O.prototype=F===null?Object.create(F):(V.prototype=F.prototype,new V),Object.defineProperty(L.prototype,"db",{get:function(){return f},enumerable:!1,configurable:!0}),L.prototype.table=function(){return g},L})(u)),new Set),k=u.prototype;k;k=m(k))Object.getOwnPropertyNames(k).forEach(function(I){return w.add(I)});function S(I){if(!I)return I;var O,F=Object.create(u.prototype);for(O in I)if(!w.has(O))try{F[O]=I[O]}catch{}return F}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=S,this.hook("reading",S),u},St.prototype.defineClass=function(){return this.mapToClass(function(u){y(this,u)})},St.prototype.add=function(u,f){var g=this,w=this.schema.primKey,k=w.auto,S=w.keyPath,I=u;return S&&k&&(I=In(S)(u)),this._trans("readwrite",function(O){return g.core.mutate({trans:O,type:"add",keys:f!=null?[f]:null,values:[I]})}).then(function(O){return O.numFailures?Oe.reject(O.failures[0]):O.lastResult}).then(function(O){if(S)try{pe(u,S,O)}catch{}return O})},St.prototype.upsert=function(u,f){var g=this,w=this.schema.primKey.keyPath;return this._trans("readwrite",function(k){return g.core.get({trans:k,key:u}).then(function(S){var I=S??{};return Gi(I,f),w&&pe(I,w,u),g.core.mutate({trans:k,type:"put",values:[I],keys:[u],upsert:!0,updates:{keys:[u],changeSpecs:[f]}}).then(function(O){return O.numFailures?Oe.reject(O.failures[0]):!!S})})})},St.prototype.update=function(u,f){return typeof u!="object"||h(u)?this.where(":id").equals(u).modify(f):(u=ve(u,this.schema.primKey.keyPath))===void 0?Mt(new fe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(u).modify(f)},St.prototype.put=function(u,f){var g=this,w=this.schema.primKey,k=w.auto,S=w.keyPath,I=u;return S&&k&&(I=In(S)(u)),this._trans("readwrite",function(O){return g.core.mutate({trans:O,type:"put",values:[I],keys:f!=null?[f]:null})}).then(function(O){return O.numFailures?Oe.reject(O.failures[0]):O.lastResult}).then(function(O){if(S)try{pe(u,S,O)}catch{}return O})},St.prototype.delete=function(u){var f=this;return this._trans("readwrite",function(g){return f.core.mutate({trans:g,type:"delete",keys:[u]}).then(function(w){return Es(f,[u],w)}).then(function(w){return w.numFailures?Oe.reject(w.failures[0]):void 0})})},St.prototype.clear=function(){var u=this;return this._trans("readwrite",function(f){return u.core.mutate({trans:f,type:"deleteRange",range:Lo}).then(function(g){return Es(u,null,g)})}).then(function(f){return f.numFailures?Oe.reject(f.failures[0]):void 0})},St.prototype.bulkGet=function(u){var f=this;return this._trans("readonly",function(g){return f.core.getMany({keys:u,trans:g}).then(function(w){return w.map(function(k){return f.hook.reading.fire(k)})})})},St.prototype.bulkAdd=function(u,f,g){var w=this,k=Array.isArray(f)?f:void 0,S=(g=g||(k?void 0:f))?g.allKeys:void 0;return this._trans("readwrite",function(I){var O=w.schema.primKey,V=O.auto,O=O.keyPath;if(O&&k)throw new fe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(k&&k.length!==u.length)throw new fe.InvalidArgument("Arguments objects and keys must have the same length");var F=u.length,V=O&&V?u.map(In(O)):u;return w.core.mutate({trans:I,type:"add",keys:k,values:V,wantResults:S}).then(function(L){var A=L.numFailures,B=L.failures;if(A===0)return S?L.results:L.lastResult;throw new Re("".concat(w.name,".bulkAdd(): ").concat(A," of ").concat(F," operations failed"),B)})})},St.prototype.bulkPut=function(u,f,g){var w=this,k=Array.isArray(f)?f:void 0,S=(g=g||(k?void 0:f))?g.allKeys:void 0;return this._trans("readwrite",function(I){var O=w.schema.primKey,V=O.auto,O=O.keyPath;if(O&&k)throw new fe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(k&&k.length!==u.length)throw new fe.InvalidArgument("Arguments objects and keys must have the same length");var F=u.length,V=O&&V?u.map(In(O)):u;return w.core.mutate({trans:I,type:"put",keys:k,values:V,wantResults:S}).then(function(L){var A=L.numFailures,B=L.failures;if(A===0)return S?L.results:L.lastResult;throw new Re("".concat(w.name,".bulkPut(): ").concat(A," of ").concat(F," operations failed"),B)})})},St.prototype.bulkUpdate=function(u){var f=this,g=this.core,w=u.map(function(I){return I.key}),k=u.map(function(I){return I.changes}),S=[];return this._trans("readwrite",function(I){return g.getMany({trans:I,keys:w,cache:"clone"}).then(function(O){var F=[],V=[],L=(u.forEach(function(A,B){var $=A.key,z=A.changes,M=O[B];if(M){for(var Q=0,Z=Object.keys(z);Q<Z.length;Q++){var H=Z[Q],re=z[H];if(H===f.schema.primKey.keyPath){if(Xe(re,$)!==0)throw new fe.Constraint("Cannot update primary key in bulkUpdate()")}else pe(M,H,re)}S.push(B),F.push($),V.push(M)}}),F.length);return g.mutate({trans:I,type:"put",keys:F,values:V,updates:{keys:w,changeSpecs:k}}).then(function(A){var B=A.numFailures,$=A.failures;if(B===0)return L;for(var z=0,M=Object.keys($);z<M.length;z++){var Q,Z=M[z],H=S[Number(Z)];H!=null&&(Q=$[Z],delete $[Z],$[H]=Q)}throw new Re("".concat(f.name,".bulkUpdate(): ").concat(B," of ").concat(L," operations failed"),$)})})})},St.prototype.bulkDelete=function(u){var f=this,g=u.length;return this._trans("readwrite",function(w){return f.core.mutate({trans:w,type:"delete",keys:u}).then(function(k){return Es(f,u,k)})}).then(function(w){var k=w.numFailures,S=w.failures;if(k===0)return w.lastResult;throw new Re("".concat(f.name,".bulkDelete(): ").concat(k," of ").concat(g," operations failed"),S)})};var Uo=St;function St(){}function zo(u){function f(I,O){if(O){for(var F=arguments.length,V=new Array(F-1);--F;)V[F-1]=arguments[F];return g[I].subscribe.apply(null,V),u}if(typeof I=="string")return g[I]}var g={};f.addEventType=S;for(var w=1,k=arguments.length;w<k;++w)S(arguments[w]);return f;function S(I,O,F){var V,L;if(typeof I!="object")return O=O||Nl,L={subscribers:[],fire:F=F||We,subscribe:function(A){L.subscribers.indexOf(A)===-1&&(L.subscribers.push(A),L.fire=O(L.fire,A))},unsubscribe:function(A){L.subscribers=L.subscribers.filter(function(B){return B!==A}),L.fire=L.subscribers.reduce(O,F)}},g[I]=f[I]=L;d(V=I).forEach(function(A){var B=V[A];if(h(B))S(A,V[A][0],V[A][1]);else{if(B!=="asap")throw new fe.InvalidArgument("Invalid event config");var $=S(A,it,function(){for(var z=arguments.length,M=new Array(z);z--;)M[z]=arguments[z];$.subscribers.forEach(function(Q){ee(function(){Q.apply(null,M)})})})}})}}function ui(u,f){return T(f).from({prototype:u}),f}function ci(u,f){return!(u.filter||u.algorithm||u.or)&&(f?u.justLimit:!u.replayFilter)}function Fo(u,f){u.filter=Rr(u.filter,f)}function di(u,f,g){var w=u.replayFilter;u.replayFilter=w?function(){return Rr(w(),f())}:f,u.justLimit=g&&!w}function Cs(u,f){if(u.isPrimKey)return f.primaryKey;var g=f.getIndexByKeyPath(u.index);if(g)return g;throw new fe.Schema("KeyPath "+u.index+" on object store "+f.name+" is not indexed")}function Is(u,f,g){var w=Cs(u,f.schema);return f.openCursor({trans:g,values:!u.keysOnly,reverse:u.dir==="prev",unique:!!u.unique,query:{index:w,range:u.range}})}function ht(u,f,g,w){var k,S,I=u.replayFilter?Rr(u.filter,u.replayFilter()):u.filter;return u.or?(k={},S=function(O,F,V){var L,A;I&&!I(F,V,function(B){return F.stop(B)},function(B){return F.fail(B)})||((A=""+(L=F.primaryKey))=="[object ArrayBuffer]"&&(A=""+new Uint8Array(L)),b(k,A))||(k[A]=!0,f(O,F,V))},Promise.all([u.or._iterate(S,g),Ul(Is(u,w,g),u.algorithm,S,!u.keysOnly&&u.valueMapper)])):Ul(Is(u,w,g),Rr(u.algorithm,I),f,!u.keysOnly&&u.valueMapper)}function Ul(u,f,g,w){var k=_t(w?function(S,I,O){return g(w(S),I,O)}:g);return u.then(function(S){if(S)return S.start(function(){var I=function(){return S.continue()};f&&!f(S,function(O){return I=O},function(O){S.stop(O),I=We},function(O){S.fail(O),I=We})||k(S.value,S,function(O){return I=O}),I()})})}dt.prototype._read=function(u,f){var g=this._ctx;return g.error?g.table._trans(null,Mt.bind(null,g.error)):g.table._trans("readonly",u).then(f)},dt.prototype._write=function(u){var f=this._ctx;return f.error?f.table._trans(null,Mt.bind(null,f.error)):f.table._trans("readwrite",u,"locked")},dt.prototype._addAlgorithm=function(u){var f=this._ctx;f.algorithm=Rr(f.algorithm,u)},dt.prototype._iterate=function(u,f){return ht(this._ctx,u,f,this._ctx.table.core)},dt.prototype.clone=function(u){var f=Object.create(this.constructor.prototype),g=Object.create(this._ctx);return u&&y(g,u),f._ctx=g,f},dt.prototype.raw=function(){return this._ctx.valueMapper=null,this},dt.prototype.each=function(u){var f=this._ctx;return this._read(function(g){return ht(f,u,g,f.table.core)})},dt.prototype.count=function(u){var f=this;return this._read(function(g){var w,k=f._ctx,S=k.table.core;return ci(k,!0)?S.count({trans:g,query:{index:Cs(k,S.schema),range:k.range}}).then(function(I){return Math.min(I,k.limit)}):(w=0,ht(k,function(){return++w,!1},g,S).then(function(){return w}))}).then(u)},dt.prototype.sortBy=function(u,f){var g=u.split(".").reverse(),w=g[0],k=g.length-1;function S(F,V){return V?S(F[g[V]],V-1):F[w]}var I=this._ctx.dir==="next"?1:-1;function O(F,V){return Xe(S(F,k),S(V,k))*I}return this.toArray(function(F){return F.sort(O)}).then(f)},dt.prototype.toArray=function(u){var f=this;return this._read(function(g){var w,k,S,I=f._ctx;return I.dir==="next"&&ci(I,!0)&&0<I.limit?(w=I.valueMapper,k=Cs(I,I.table.core.schema),I.table.core.query({trans:g,limit:I.limit,values:!0,query:{index:k,range:I.range}}).then(function(O){return O=O.result,w?O.map(w):O})):(S=[],ht(I,function(O){return S.push(O)},g,I.table.core).then(function(){return S}))},u)},dt.prototype.offset=function(u){var f=this._ctx;return u<=0||(f.offset+=u,ci(f)?di(f,function(){var g=u;return function(w,k){return g===0||(g===1?--g:k(function(){w.advance(g),g=0}),!1)}}):di(f,function(){var g=u;return function(){return--g<0}})),this},dt.prototype.limit=function(u){return this._ctx.limit=Math.min(this._ctx.limit,u),di(this._ctx,function(){var f=u;return function(g,w,k){return--f<=0&&w(k),0<=f}},!0),this},dt.prototype.until=function(u,f){return Fo(this._ctx,function(g,w,k){return!u(g.value)||(w(k),f)}),this},dt.prototype.first=function(u){return this.limit(1).toArray(function(f){return f[0]}).then(u)},dt.prototype.last=function(u){return this.reverse().first(u)},dt.prototype.filter=function(u){var f;return Fo(this._ctx,function(g){return u(g.value)}),(f=this._ctx).isMatch=Rr(f.isMatch,u),this},dt.prototype.and=function(u){return this.filter(u)},dt.prototype.or=function(u){return new this.db.WhereClause(this._ctx.table,u,this)},dt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},dt.prototype.desc=function(){return this.reverse()},dt.prototype.eachKey=function(u){var f=this._ctx;return f.keysOnly=!f.isMatch,this.each(function(g,w){u(w.key,w)})},dt.prototype.eachUniqueKey=function(u){return this._ctx.unique="unique",this.eachKey(u)},dt.prototype.eachPrimaryKey=function(u){var f=this._ctx;return f.keysOnly=!f.isMatch,this.each(function(g,w){u(w.primaryKey,w)})},dt.prototype.keys=function(u){var f=this._ctx,g=(f.keysOnly=!f.isMatch,[]);return this.each(function(w,k){g.push(k.key)}).then(function(){return g}).then(u)},dt.prototype.primaryKeys=function(u){var f=this._ctx;if(f.dir==="next"&&ci(f,!0)&&0<f.limit)return this._read(function(w){var k=Cs(f,f.table.core.schema);return f.table.core.query({trans:w,values:!1,limit:f.limit,query:{index:k,range:f.range}})}).then(function(w){return w.result}).then(u);f.keysOnly=!f.isMatch;var g=[];return this.each(function(w,k){g.push(k.primaryKey)}).then(function(){return g}).then(u)},dt.prototype.uniqueKeys=function(u){return this._ctx.unique="unique",this.keys(u)},dt.prototype.firstKey=function(u){return this.limit(1).keys(function(f){return f[0]}).then(u)},dt.prototype.lastKey=function(u){return this.reverse().firstKey(u)},dt.prototype.distinct=function(){var u,f=this._ctx,f=f.index&&f.table.schema.idxByName[f.index];return f&&f.multi&&(u={},Fo(this._ctx,function(w){var w=w.primaryKey.toString(),k=b(u,w);return u[w]=!0,!k})),this},dt.prototype.modify=function(u){var f=this,g=this._ctx;return this._write(function(w){function k(M,Q){var Z=Q.failures;B+=M-Q.numFailures;for(var H=0,re=d(Z);H<re.length;H++){var le=re[H];A.push(Z[le])}}var S=typeof u=="function"?u:function(M){return Gi(M,u)},I=g.table.core,L=I.schema.primaryKey,O=L.outbound,F=L.extractKey,V=200,L=f.db._options.modifyChunkSize,A=(L&&(V=typeof L=="object"?L[I.name]||L["*"]||200:L),[]),B=0,$=[],z=u===zl;return f.clone().primaryKeys().then(function(M){function Q(H){var re=Math.min(V,M.length-H),le=M.slice(H,H+re);return(z?Promise.resolve([]):I.getMany({trans:w,keys:le,cache:"immutable"})).then(function(xe){var Se=[],ue=[],Te=O?[]:null,je=z?le:[];if(!z)for(var ge=0;ge<re;++ge){var Ne=xe[ge],ut={value:be(Ne),primKey:M[H+ge]};S.call(ut,ut.value,ut)!==!1&&(ut.value==null?je.push(M[H+ge]):O||Xe(F(Ne),F(ut.value))===0?(ue.push(ut.value),O&&Te.push(M[H+ge])):(je.push(M[H+ge]),Se.push(ut.value)))}return Promise.resolve(0<Se.length&&I.mutate({trans:w,type:"add",values:Se}).then(function(ft){for(var qe in ft.failures)je.splice(parseInt(qe),1);k(Se.length,ft)})).then(function(){return(0<ue.length||Z&&typeof u=="object")&&I.mutate({trans:w,type:"put",keys:Te,values:ue,criteria:Z,changeSpec:typeof u!="function"&&u,isAdditionalChunk:0<H}).then(function(ft){return k(ue.length,ft)})}).then(function(){return(0<je.length||Z&&z)&&I.mutate({trans:w,type:"delete",keys:je,criteria:Z,isAdditionalChunk:0<H}).then(function(ft){return Es(g.table,je,ft)}).then(function(ft){return k(je.length,ft)})}).then(function(){return M.length>H+re&&Q(H+V)})})}var Z=ci(g)&&g.limit===1/0&&(typeof u!="function"||z)&&{index:g.index,range:g.range};return Q(0).then(function(){if(0<A.length)throw new Ve("Error modifying one or more objects",A,B,$);return M.length})})})},dt.prototype.delete=function(){var u=this._ctx,f=u.range;return!ci(u)||u.table.schema.yProps||!u.isPrimKey&&f.type!==3?this.modify(zl):this._write(function(g){var w=u.table.core.schema.primaryKey,k=f;return u.table.core.count({trans:g,query:{index:w,range:k}}).then(function(S){return u.table.core.mutate({trans:g,type:"deleteRange",range:k}).then(function(F){var O=F.failures,F=F.numFailures;if(F)throw new Ve("Could not delete some values",Object.keys(O).map(function(V){return O[V]}),S-F);return S-F})})})};var yu=dt;function dt(){}var zl=function(u,f){return f.value=null};function gu(u,f){return u<f?-1:u===f?0:1}function vu(u,f){return f<u?-1:u===f?0:1}function cn(u,f,g){return u=u instanceof Yi?new u.Collection(u):u,u._ctx.error=new(g||TypeError)(f),u}function hr(u){return new u.Collection(u,function(){return pr("")}).limit(0)}function Bn($,f,g,w){var k,S,I,O,F,V,L,A=g.length;if(!g.every(function(M){return typeof M=="string"}))return cn($,fu);function B(M){k=M==="next"?function(Z){return Z.toUpperCase()}:function(Z){return Z.toLowerCase()},S=M==="next"?function(Z){return Z.toLowerCase()}:function(Z){return Z.toUpperCase()},I=M==="next"?gu:vu;var Q=g.map(function(Z){return{lower:S(Z),upper:k(Z)}}).sort(function(Z,H){return I(Z.lower,H.lower)});O=Q.map(function(Z){return Z.upper}),F=Q.map(function(Z){return Z.lower}),L=(V=M)==="next"?"":w}B("next");var $=new $.Collection($,function(){return dn(O[0],F[A-1]+w)}),z=($._ondirectionchange=function(M){B(M)},0);return $._addAlgorithm(function(M,Q,Z){var H=M.key;if(typeof H=="string"){var re=S(H);if(f(re,F,z))return!0;for(var le=null,xe=z;xe<A;++xe){var Se=((ue,Te,je,ge,Ne,ut)=>{for(var ft=Math.min(ue.length,ge.length),qe=-1,nt=0;nt<ft;++nt){var jt=Te[nt];if(jt!==ge[nt])return Ne(ue[nt],je[nt])<0?ue.substr(0,nt)+je[nt]+je.substr(nt+1):Ne(ue[nt],ge[nt])<0?ue.substr(0,nt)+ge[nt]+je.substr(nt+1):0<=qe?ue.substr(0,qe)+Te[qe]+je.substr(qe+1):null;Ne(ue[nt],jt)<0&&(qe=nt)}return ft<ge.length&&ut==="next"?ue+je.substr(ue.length):ft<ue.length&&ut==="prev"?ue.substr(0,je.length):qe<0?null:ue.substr(0,qe)+ge[qe]+je.substr(qe+1)})(H,re,O[xe],F[xe],I,V);Se===null&&le===null?z=xe+1:(le===null||0<I(le,Se))&&(le=Se)}Q(le!==null?function(){M.continue(le+L)}:Z)}return!1}),$}function dn(u,f,g,w){return{type:2,lower:u,upper:f,lowerOpen:g,upperOpen:w}}function pr(u){return{type:1,lower:u,upper:u}}Object.defineProperty(Dt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Dt.prototype.between=function(u,f,g,w){g=g!==!1,w=w===!0;try{return 0<this._cmp(u,f)||this._cmp(u,f)===0&&(g||w)&&(!g||!w)?hr(this):new this.Collection(this,function(){return dn(u,f,!g,!w)})}catch{return cn(this,wt)}},Dt.prototype.equals=function(u){return u==null?cn(this,wt):new this.Collection(this,function(){return pr(u)})},Dt.prototype.above=function(u){return u==null?cn(this,wt):new this.Collection(this,function(){return dn(u,void 0,!0)})},Dt.prototype.aboveOrEqual=function(u){return u==null?cn(this,wt):new this.Collection(this,function(){return dn(u,void 0,!1)})},Dt.prototype.below=function(u){return u==null?cn(this,wt):new this.Collection(this,function(){return dn(void 0,u,!1,!0)})},Dt.prototype.belowOrEqual=function(u){return u==null?cn(this,wt):new this.Collection(this,function(){return dn(void 0,u)})},Dt.prototype.startsWith=function(u){return typeof u!="string"?cn(this,fu):this.between(u,u+ai,!0,!0)},Dt.prototype.startsWithIgnoreCase=function(u){return u===""?this.startsWith(u):Bn(this,function(f,g){return f.indexOf(g[0])===0},[u],ai)},Dt.prototype.equalsIgnoreCase=function(u){return Bn(this,function(f,g){return f===g[0]},[u],"")},Dt.prototype.anyOfIgnoreCase=function(){var u=ne.apply(oe,arguments);return u.length===0?hr(this):Bn(this,function(f,g){return g.indexOf(f)!==-1},u,"")},Dt.prototype.startsWithAnyOfIgnoreCase=function(){var u=ne.apply(oe,arguments);return u.length===0?hr(this):Bn(this,function(f,g){return g.some(function(w){return f.indexOf(w)===0})},u,ai)},Dt.prototype.anyOf=function(){var u,f,g=this,w=ne.apply(oe,arguments),k=this._cmp;try{w.sort(k)}catch{return cn(this,wt)}return w.length===0?hr(this):((u=new this.Collection(this,function(){return dn(w[0],w[w.length-1])}))._ondirectionchange=function(S){k=S==="next"?g._ascending:g._descending,w.sort(k)},f=0,u._addAlgorithm(function(S,I,O){for(var F=S.key;0<k(F,w[f]);)if(++f===w.length)return I(O),!1;return k(F,w[f])===0||(I(function(){S.continue(w[f])}),!1)}),u)},Dt.prototype.notEqual=function(u){return this.inAnyRange([[-1/0,u],[u,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Dt.prototype.noneOf=function(){var u=ne.apply(oe,arguments);if(u.length===0)return new this.Collection(this);try{u.sort(this._ascending)}catch{return cn(this,wt)}var f=u.reduce(function(g,w){return g?g.concat([[g[g.length-1][1],w]]):[[-1/0,w]]},null);return f.push([u[u.length-1],this.db._maxKey]),this.inAnyRange(f,{includeLowers:!1,includeUppers:!1})},Dt.prototype.inAnyRange=function(u,Z){var g=this,w=this._cmp,k=this._ascending,S=this._descending,I=this._min,O=this._max;if(u.length===0)return hr(this);if(!u.every(function(H){return H[0]!==void 0&&H[1]!==void 0&&k(H[0],H[1])<=0}))return cn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",fe.InvalidArgument);var F=!Z||Z.includeLowers!==!1,V=Z&&Z.includeUppers===!0,L,A=k;function B(H,re){return A(H[0],re[0])}try{(L=u.reduce(function(H,re){for(var le=0,xe=H.length;le<xe;++le){var Se=H[le];if(w(re[0],Se[1])<0&&0<w(re[1],Se[0])){Se[0]=I(Se[0],re[0]),Se[1]=O(Se[1],re[1]);break}}return le===xe&&H.push(re),H},[])).sort(B)}catch{return cn(this,wt)}var $=0,z=V?function(H){return 0<k(H,L[$][1])}:function(H){return 0<=k(H,L[$][1])},M=F?function(H){return 0<S(H,L[$][0])}:function(H){return 0<=S(H,L[$][0])},Q=z,Z=new this.Collection(this,function(){return dn(L[0][0],L[L.length-1][1],!F,!V)});return Z._ondirectionchange=function(H){A=H==="next"?(Q=z,k):(Q=M,S),L.sort(B)},Z._addAlgorithm(function(H,re,le){for(var xe,Se=H.key;Q(Se);)if(++$===L.length)return re(le),!1;return!z(xe=Se)&&!M(xe)||(g._cmp(Se,L[$][1])===0||g._cmp(Se,L[$][0])===0||re(function(){A===k?H.continue(L[$][0]):H.continue(L[$][1])}),!1)}),Z},Dt.prototype.startsWithAnyOf=function(){var u=ne.apply(oe,arguments);return u.every(function(f){return typeof f=="string"})?u.length===0?hr(this):this.inAnyRange(u.map(function(f){return[f,f+ai]})):cn(this,"startsWithAnyOf() only works with strings")};var Yi=Dt;function Dt(){}function qt(u){return _t(function(f){return Bo(f),u(f.target.error),!1})}function Bo(u){u.stopPropagation&&u.stopPropagation(),u.preventDefault&&u.preventDefault()}var Qi="storagemutated",fi="x-storagemutated-1",Mr=zo(null,Qi),wu=(On.prototype._lock=function(){return ie(!ze.global),++this._reculock,this._reculock!==1||ze.global||(ze.lockOwnerFor=this),this},On.prototype._unlock=function(){if(ie(!ze.global),--this._reculock==0)for(ze.global||(ze.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var u=this._blockedFuncs.shift();try{Ar(u[1],u[0])}catch{}}return this},On.prototype._locked=function(){return this._reculock&&ze.lockOwnerFor!==this},On.prototype.create=function(u){var f=this;if(this.mode){var g=this.db.idbdb,w=this.db._state.dbOpenError;if(ie(!this.idbtrans),!u&&!g)switch(w&&w.name){case"DatabaseClosedError":throw new fe.DatabaseClosed(w);case"MissingAPIError":throw new fe.MissingAPI(w.message,w);default:throw new fe.OpenFailed(w)}if(!this.active)throw new fe.TransactionInactive;ie(this._completion._state===null),(u=this.idbtrans=u||(this.db.core||g).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=_t(function(k){Bo(k),f._reject(u.error)}),u.onabort=_t(function(k){Bo(k),f.active&&f._reject(new fe.Abort(u.error)),f.active=!1,f.on("abort").fire(k)}),u.oncomplete=_t(function(){f.active=!1,f._resolve(),"mutatedParts"in u&&Mr.storagemutated.fire(u.mutatedParts)})}return this},On.prototype._promise=function(u,f,g){var w,k=this;return u==="readwrite"&&this.mode!=="readwrite"?Mt(new fe.ReadOnly("Transaction is readonly")):this.active?this._locked()?new Oe(function(S,I){k._blockedFuncs.push([function(){k._promise(u,f,g).then(S,I)},ze])}):g?Pr(function(){var S=new Oe(function(I,O){k._lock();var F=f(I,O,k);F&&F.then&&F.then(I,O)});return S.finally(function(){return k._unlock()}),S._lib=!0,S}):((w=new Oe(function(S,I){var O=f(S,I,k);O&&O.then&&O.then(S,I)}))._lib=!0,w):Mt(new fe.TransactionInactive)},On.prototype._root=function(){return this.parent?this.parent._root():this},On.prototype.waitFor=function(u){var f,g=this._root(),w=Oe.resolve(u),k=(g._waitingFor?g._waitingFor=g._waitingFor.then(function(){return w}):(g._waitingFor=w,g._waitingQueue=[],f=g.idbtrans.objectStore(g.storeNames[0]),(function S(){for(++g._spinCount;g._waitingQueue.length;)g._waitingQueue.shift()();g._waitingFor&&(f.get(-1/0).onsuccess=S)})()),g._waitingFor);return new Oe(function(S,I){w.then(function(O){return g._waitingQueue.push(_t(S.bind(null,O)))},function(O){return g._waitingQueue.push(_t(I.bind(null,O)))}).finally(function(){g._waitingFor===k&&(g._waitingFor=null)})})},On.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new fe.Abort))},On.prototype.table=function(u){var f=this._memoizedTables||(this._memoizedTables={});if(b(f,u))return f[u];var g=this.schema[u];if(g)return(g=new this.db.Table(u,g,this)).core=this.db.core.table(u),f[u]=g;throw new fe.NotFound("Table "+u+" not part of transaction")},On);function On(){}function Os(u,f,g,w,k,S,I,O){return{name:u,keyPath:f,unique:g,multi:w,auto:k,compound:S,src:(g&&!I?"&":"")+(w?"*":"")+(k?"++":"")+bu(f),type:O}}function bu(u){return typeof u=="string"?u:u?"["+[].join.call(u,"+")+"]":""}function hi(u,f,g){return{name:u,primKey:f,indexes:g,mappedClass:null,idxByName:(w=function(k){return[k.name,k]},g.reduce(function(k,S,I){return S=w(S,I),S&&(k[S[0]]=S[1]),k},{}))};var w}var mr=function(u){try{return u.only([[]]),mr=function(){return[[]]},[[]]}catch{return mr=function(){return ai},ai}};function Ur(u){return u==null?function(){}:typeof u=="string"?(f=u).split(".").length===1?function(g){return g[f]}:function(g){return ve(g,f)}:function(g){return ve(g,u)};var f}function $o(u){return[].slice.call(u)}var Id=0;function Ko(u){return u==null?":id":typeof u=="string"?u:"[".concat(u.join("+"),"]")}function Fl(u,f,F){function w(z){if(z.type===3)return null;if(z.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var A=z.lower,B=z.upper,$=z.lowerOpen,z=z.upperOpen;return A===void 0?B===void 0?null:f.upperBound(B,!!z):B===void 0?f.lowerBound(A,!!$):f.bound(A,B,!!$,!!z)}function k(L){var A,B=L.name;return{name:B,schema:L,mutate:function($){var z=$.trans,M=$.type,Q=$.keys,Z=$.values,H=$.range;return new Promise(function(re,le){re=_t(re);var xe=z.objectStore(B),Se=xe.keyPath==null,ue=M==="put"||M==="add";if(!ue&&M!=="delete"&&M!=="deleteRange")throw new Error("Invalid operation type: "+M);var Te,je=(Q||Z||{length:1}).length;if(Q&&Z&&Q.length!==Z.length)throw new Error("Given keys array must have same length as given values array.");if(je===0)return re({numFailures:0,failures:{},results:[],lastResult:void 0});function ge(bt){++ft,Bo(bt)}var Ne=[],ut=[],ft=0;if(M==="deleteRange"){if(H.type===4)return re({numFailures:ft,failures:ut,results:[],lastResult:void 0});H.type===3?Ne.push(Te=xe.clear()):Ne.push(Te=xe.delete(w(H)))}else{var Se=ue?Se?[Z,Q]:[Z,null]:[Q,null],qe=Se[0],nt=Se[1];if(ue)for(var jt=0;jt<je;++jt)Ne.push(Te=nt&&nt[jt]!==void 0?xe[M](qe[jt],nt[jt]):xe[M](qe[jt])),Te.onerror=ge;else for(jt=0;jt<je;++jt)Ne.push(Te=xe[M](qe[jt])),Te.onerror=ge}function jn(bt){bt=bt.target.result,Ne.forEach(function(br,Go){return br.error!=null&&(ut[Go]=br.error)}),re({numFailures:ft,failures:ut,results:M==="delete"?Q:Ne.map(function(br){return br.result}),lastResult:bt})}Te.onerror=function(bt){ge(bt),jn(bt)},Te.onsuccess=jn})},getMany:function($){var z=$.trans,M=$.keys;return new Promise(function(Q,Z){Q=_t(Q);for(var H,re=z.objectStore(B),le=M.length,xe=new Array(le),Se=0,ue=0,Te=function(Ne){Ne=Ne.target,xe[Ne._pos]=Ne.result,++ue===Se&&Q(xe)},je=qt(Z),ge=0;ge<le;++ge)M[ge]!=null&&((H=re.get(M[ge]))._pos=ge,H.onsuccess=Te,H.onerror=je,++Se);Se===0&&Q(xe)})},get:function($){var z=$.trans,M=$.key;return new Promise(function(Q,Z){Q=_t(Q);var H=z.objectStore(B).get(M);H.onsuccess=function(re){return Q(re.target.result)},H.onerror=qt(Z)})},query:(A=O,function($){return new Promise(function(z,M){z=_t(z);var Q,Z,H,ue=$.trans,re=$.values,le=$.limit,Se=$.query,xe=le===1/0?void 0:le,Te=Se.index,Se=Se.range,ue=ue.objectStore(B),ue=Te.isPrimaryKey?ue:ue.index(Te.name),Te=w(Se);if(le===0)return z({result:[]});A?((Se=re?ue.getAll(Te,xe):ue.getAllKeys(Te,xe)).onsuccess=function(je){return z({result:je.target.result})},Se.onerror=qt(M)):(Q=0,Z=!re&&"openKeyCursor"in ue?ue.openKeyCursor(Te):ue.openCursor(Te),H=[],Z.onsuccess=function(je){var ge=Z.result;return!ge||(H.push(re?ge.value:ge.primaryKey),++Q===le)?z({result:H}):void ge.continue()},Z.onerror=qt(M))})}),openCursor:function($){var z=$.trans,M=$.values,Q=$.query,Z=$.reverse,H=$.unique;return new Promise(function(re,le){re=_t(re);var ue=Q.index,xe=Q.range,Se=z.objectStore(B),Se=ue.isPrimaryKey?Se:Se.index(ue.name),ue=Z?H?"prevunique":"prev":H?"nextunique":"next",Te=!M&&"openKeyCursor"in Se?Se.openKeyCursor(w(xe),ue):Se.openCursor(w(xe),ue);Te.onerror=qt(le),Te.onsuccess=_t(function(je){var ge,Ne,ut,ft,qe=Te.result;qe?(qe.___id=++Id,qe.done=!1,ge=qe.continue.bind(qe),Ne=(Ne=qe.continuePrimaryKey)&&Ne.bind(qe),ut=qe.advance.bind(qe),ft=function(){throw new Error("Cursor not stopped")},qe.trans=z,qe.stop=qe.continue=qe.continuePrimaryKey=qe.advance=function(){throw new Error("Cursor not started")},qe.fail=_t(le),qe.next=function(){var nt=this,jt=1;return this.start(function(){return jt--?nt.continue():nt.stop()}).then(function(){return nt})},qe.start=function(nt){function jt(){if(Te.result)try{nt()}catch(bt){qe.fail(bt)}else qe.done=!0,qe.start=function(){throw new Error("Cursor behind last entry")},qe.stop()}var jn=new Promise(function(bt,br){bt=_t(bt),Te.onerror=qt(br),qe.fail=br,qe.stop=function(Go){qe.stop=qe.continue=qe.continuePrimaryKey=qe.advance=ft,bt(Go)}});return Te.onsuccess=_t(function(bt){Te.onsuccess=jt,jt()}),qe.continue=ge,qe.continuePrimaryKey=Ne,qe.advance=ut,jt(),jn},re(qe)):re(null)},le)})},count:function($){var z=$.query,M=$.trans,Q=z.index,Z=z.range;return new Promise(function(H,re){var le=M.objectStore(B),le=Q.isPrimaryKey?le:le.index(Q.name),xe=w(Z),xe=xe?le.count(xe):le.count();xe.onsuccess=_t(function(Se){return H(Se.target.result)}),xe.onerror=qt(re)})}}}S=F,I=$o((F=u).objectStoreNames);var S,F={schema:{name:F.name,tables:I.map(function(L){return S.objectStore(L)}).map(function(L){var A=L.keyPath,B=L.autoIncrement,z=h(A),$={},z={name:L.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:A==null,compound:z,keyPath:A,autoIncrement:B,unique:!0,extractKey:Ur(A)},indexes:$o(L.indexNames).map(function(M){return L.index(M)}).map(function(H){var re=H.name,Q=H.unique,Z=H.multiEntry,H=H.keyPath,re={name:re,compound:h(H),keyPath:H,unique:Q,multiEntry:Z,extractKey:Ur(H)};return $[Ko(H)]=re}),getIndexByKeyPath:function(M){return $[Ko(M)]}};return $[":id"]=z.primaryKey,A!=null&&($[Ko(A)]=z.primaryKey),z})},hasGetAll:0<I.length&&"getAll"in S.objectStore(I[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},I=F.schema,O=F.hasGetAll,F=I.tables.map(k),V={};return F.forEach(function(L){return V[L.name]=L}),{stack:"dbcore",transaction:u.transaction.bind(u),table:function(L){if(V[L])return V[L];throw new Error("Table '".concat(L,"' not found"))},MIN_KEY:-1/0,MAX_KEY:mr(f),schema:I}}function js(u,f,g,w){return g=g.IDBKeyRange,f=Fl(f,g,w),{dbcore:u.dbcore.reduce(function(k,S){return S=S.create,o(o({},k),S(k))},f)}}function Ji(u,f){var g=f.db,g=js(u._middlewares,g,u._deps,f);u.core=g.dbcore,u.tables.forEach(function(w){var k=w.name;u.core.schema.tables.some(function(S){return S.name===k})&&(w.core=u.core.table(k),u[k]instanceof u.Table)&&(u[k].core=w.core)})}function Vo(u,f,g,w){g.forEach(function(k){var S=w[k];f.forEach(function(I){var O=(function F(V,L){return W(V,L)||(V=m(V))&&F(V,L)})(I,k);(!O||"value"in O&&O.value===void 0)&&(I===u.Transaction.prototype||I instanceof u.Transaction?j(I,k,{get:function(){return this.table(k)},set:function(F){C(this,k,{value:F,writable:!0,configurable:!0,enumerable:!0})}}):I[k]=new u.Table(k,S))})})}function Jn(u,f){f.forEach(function(g){for(var w in g)g[w]instanceof u.Table&&delete g[w]})}function Bl(u,f){return u._cfg.version-f._cfg.version}function Ts(u,f,g,w){var k=u._dbSchema,S=(g.objectStoreNames.contains("$meta")&&!k.$meta&&(k.$meta=hi("$meta",to("")[0],[]),u._storeNames.push("$meta")),u._createTransaction("readwrite",u._storeNames,k)),I=(S.create(g),S._completion.catch(w),S._reject.bind(S)),O=ze.transless||ze;Pr(function(){if(ze.trans=S,ze.transless=O,f!==0)return Ji(u,g),V=f,((F=S).storeNames.includes("$meta")?F.table("$meta").get("version").then(function(L){return L??V}):Oe.resolve(V)).then(function(Q){var A=u,B=Q,$=S,z=g,M=[],Q=A._versions,Z=A._dbSchema=yr(0,A.idbdb,z);return(Q=Q.filter(function(H){return H._cfg.version>=B})).length===0?Oe.resolve():(Q.forEach(function(H){M.push(function(){var re,le,xe,Se=Z,ue=H._cfg.dbschema,Te=(eo(A,Se,z),eo(A,ue,z),Z=A._dbSchema=ue,Xi(Se,ue)),je=(Te.add.forEach(function(ge){Zi(z,ge[0],ge[1].primKey,ge[1].indexes)}),Te.change.forEach(function(ge){if(ge.recreate)throw new fe.Upgrade("Not yet support for changing primary key");var Ne=z.objectStore(ge.name);ge.add.forEach(function(ut){return tn(Ne,ut)}),ge.change.forEach(function(ut){Ne.deleteIndex(ut.name),tn(Ne,ut)}),ge.del.forEach(function(ut){return Ne.deleteIndex(ut)})}),H._cfg.contentUpgrade);if(je&&H._cfg.version>B)return Ji(A,z),$._memoizedTables={},re=se(ue),Te.del.forEach(function(ge){re[ge]=Se[ge]}),Jn(A,[A.Transaction.prototype]),Vo(A,[A.Transaction.prototype],d(re),re),$.schema=re,(le=N(je))&&Hi(),ue=Oe.follow(function(){var ge;(xe=je($))&&le&&(ge=wn.bind(null,null),xe.then(ge,ge))}),xe&&typeof xe.then=="function"?Oe.resolve(xe):ue.then(function(){return xe})}),M.push(function(re){var le,xe,Se=H._cfg.dbschema;le=Se,xe=re,[].slice.call(xe.db.objectStoreNames).forEach(function(ue){return le[ue]==null&&xe.db.deleteObjectStore(ue)}),Jn(A,[A.Transaction.prototype]),Vo(A,[A.Transaction.prototype],A._storeNames,A._dbSchema),$.schema=A._dbSchema}),M.push(function(re){A.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(A.idbdb.version/10)===H._cfg.version?(A.idbdb.deleteObjectStore("$meta"),delete A._dbSchema.$meta,A._storeNames=A._storeNames.filter(function(le){return le!=="$meta"})):re.objectStore("$meta").put(H._cfg.version,"version"))})}),(function H(){return M.length?Oe.resolve(M.shift()($.idbtrans)).then(H):Oe.resolve()})().then(function(){$l(Z,z)}))}).catch(I);var F,V;d(k).forEach(function(L){Zi(g,L,k[L].primKey,k[L].indexes)}),Ji(u,g),Oe.follow(function(){return u.on.populate.fire(S)}).catch(I)})}function _u(u,f){$l(u._dbSchema,f),f.db.version%10!=0||f.objectStoreNames.contains("$meta")||f.db.createObjectStore("$meta").add(Math.ceil(f.db.version/10-1),"version");var g=yr(0,u.idbdb,f);eo(u,u._dbSchema,f);for(var w=0,k=Xi(g,u._dbSchema).change;w<k.length;w++){var S=(I=>{if(I.change.length||I.recreate)return console.warn("Unable to patch indexes of table ".concat(I.name," because it has changes on the type of index or primary key.")),{value:void 0};var O=f.objectStore(I.name);I.add.forEach(function(F){un&&console.debug("Dexie upgrade patch: Creating missing index ".concat(I.name,".").concat(F.src)),tn(O,F)})})(k[w]);if(typeof S=="object")return S.value}}function Xi(u,f){var g,w={del:[],add:[],change:[]};for(g in u)f[g]||w.del.push(g);for(g in f){var k=u[g],S=f[g];if(k){var I={name:g,def:S,recreate:!1,del:[],add:[],change:[]};if(""+(k.primKey.keyPath||"")!=""+(S.primKey.keyPath||"")||k.primKey.auto!==S.primKey.auto)I.recreate=!0,w.change.push(I);else{var O=k.idxByName,F=S.idxByName,V=void 0;for(V in O)F[V]||I.del.push(V);for(V in F){var L=O[V],A=F[V];L?L.src!==A.src&&I.change.push(A):I.add.push(A)}(0<I.del.length||0<I.add.length||0<I.change.length)&&w.change.push(I)}}else w.add.push([g,S])}return w}function Zi(u,f,g,w){var k=u.db.createObjectStore(f,g.keyPath?{keyPath:g.keyPath,autoIncrement:g.auto}:{autoIncrement:g.auto});w.forEach(function(S){return tn(k,S)})}function $l(u,f){d(u).forEach(function(g){f.db.objectStoreNames.contains(g)||(un&&console.debug("Dexie: Creating missing table",g),Zi(f,g,u[g].primKey,u[g].indexes))})}function tn(u,f){u.createIndex(f.name,f.keyPath,{unique:f.unique,multiEntry:f.multi})}function yr(u,f,g){var w={};return X(f.objectStoreNames,0).forEach(function(k){for(var S=g.objectStore(k),I=Os(bu(V=S.keyPath),V||"",!0,!1,!!S.autoIncrement,V&&typeof V!="string",!0),O=[],F=0;F<S.indexNames.length;++F){var L=S.index(S.indexNames[F]),V=L.keyPath,L=Os(L.name,V,!!L.unique,!!L.multiEntry,!1,V&&typeof V!="string",!1);O.push(L)}w[k]=hi(k,I,O)}),w}function eo(u,f,g){for(var w=g.db.objectStoreNames,k=0;k<w.length;++k){var S=w[k],I=g.objectStore(S);u._hasGetAll="getAll"in I;for(var O=0;O<I.indexNames.length;++O){var F,V=I.indexNames[O],L=I.index(V).keyPath,L=typeof L=="string"?L:"["+X(L).join("+")+"]";f[S]&&(F=f[S].idxByName[L])&&(F.name=V,delete f[S].idxByName[L],f[S].idxByName[V]=F)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(u._hasGetAll=!1)}function to(u){return u.split(",").map(function(f,g){var k=f.split(":"),w=(w=k[1])==null?void 0:w.trim(),k=(f=k[0].trim()).replace(/([&*]|\+\+)/g,""),S=/^\[/.test(k)?k.match(/^\[(.*)\]$/)[1].split("+"):k;return Os(k,S||null,/\&/.test(f),/\*/.test(f),/\+\+/.test(f),h(S),g===0,w)})}zr.prototype._createTableSchema=hi,zr.prototype._parseIndexSyntax=to,zr.prototype._parseStoresSpec=function(u,f){var g=this;d(u).forEach(function(w){if(u[w]!==null){var k=g._parseIndexSyntax(u[w]),S=k.shift();if(!S)throw new fe.Schema("Invalid schema for table "+w+": "+u[w]);if(S.unique=!0,S.multi)throw new fe.Schema("Primary key cannot be multiEntry*");k.forEach(function(I){if(I.auto)throw new fe.Schema("Only primary key can be marked as autoIncrement (++)");if(!I.keyPath)throw new fe.Schema("Index must have a name and cannot be an empty string")}),S=g._createTableSchema(w,S,k),f[w]=S}})},zr.prototype.stores=function(g){var f=this.db,g=(this._cfg.storesSource=this._cfg.storesSource?y(this._cfg.storesSource,g):g,f._versions),w={},k={};return g.forEach(function(S){y(w,S._cfg.storesSource),k=S._cfg.dbschema={},S._parseStoresSpec(w,k)}),f._dbSchema=k,Jn(f,[f._allTables,f,f.Transaction.prototype]),Vo(f,[f._allTables,f,f.Transaction.prototype,this._cfg.tables],d(k),k),f._storeNames=d(k),this},zr.prototype.upgrade=function(u){return this._cfg.contentUpgrade=Zr(this._cfg.contentUpgrade||We,u),this};var Od=zr;function zr(){}function Wo(u,f){var g=u._dbNamesDB;return g||(g=u._dbNamesDB=new vr(Ro,{addons:[],indexedDB:u,IDBKeyRange:f})).version(1).stores({dbnames:"name"}),g.table("dbnames")}function pi(u){return u&&typeof u.databases=="function"}function no(u){return Pr(function(){return ze.letThrough=!0,u()})}function Ps(u){return!("from"in u)}var nn=function(u,f){var g;if(!this)return g=new nn,u&&"d"in u&&y(g,u),g;y(this,arguments.length?{d:1,from:u,to:1<arguments.length?f:u}:{d:0})};function Ho(u,f,g){var w=Xe(f,g);if(!isNaN(w)){if(0<w)throw RangeError();if(Ps(u))return y(u,{from:f,to:g,d:1});var w=u.l,k=u.r;if(Xe(g,u.from)<0)return w?Ho(w,f,g):u.l={from:f,to:g,d:1,l:null,r:null},ku(u);if(0<Xe(f,u.to))return k?Ho(k,f,g):u.r={from:f,to:g,d:1,l:null,r:null},ku(u);Xe(f,u.from)<0&&(u.from=f,u.l=null,u.d=k?k.d+1:1),0<Xe(g,u.to)&&(u.to=g,u.r=null,u.d=u.l?u.l.d+1:1),f=!u.r,w&&!u.l&&qo(u,w),k&&f&&qo(u,k)}}function qo(u,f){Ps(f)||(function g(w,k){var S=k.from,I=k.l,O=k.r;Ho(w,S,k.to),I&&g(w,I),O&&g(w,O)})(u,f)}function Ns(u,f){var g=As(f),w=g.next();if(!w.done)for(var k=w.value,S=As(u),I=S.next(k.from),O=I.value;!w.done&&!I.done;){if(Xe(O.from,k.to)<=0&&0<=Xe(O.to,k.from))return!0;Xe(k.from,O.from)<0?k=(w=g.next(O.from)).value:O=(I=S.next(k.from)).value}return!1}function As(u){var f=Ps(u)?null:{s:0,n:u};return{next:function(g){for(var w=0<arguments.length;f;)switch(f.s){case 0:if(f.s=1,w)for(;f.n.l&&Xe(g,f.n.from)<0;)f={up:f,n:f.n.l,s:1};else for(;f.n.l;)f={up:f,n:f.n.l,s:1};case 1:if(f.s=2,!w||Xe(g,f.n.to)<=0)return{value:f.n,done:!1};case 2:if(f.n.r){f.s=3,f={up:f,n:f.n.r,s:0};continue}case 3:f=f.up}return{done:!0}}}}function ku(u){var f,g,w,k=(((k=u.r)==null?void 0:k.d)||0)-(((k=u.l)==null?void 0:k.d)||0),k=1<k?"r":k<-1?"l":"";k&&(f=k=="r"?"l":"r",g=o({},u),w=u[k],u.from=w.from,u.to=w.to,u[k]=w[k],g[k]=w[f],(u[f]=g).d=xu(g)),u.d=xu(u)}function xu(g){var f=g.r,g=g.l;return(f?g?Math.max(f.d,g.d):f.d:g?g.d:0)+1}function Ds(u,f){return d(f).forEach(function(g){u[g]?qo(u[g],f[g]):u[g]=(function w(k){var S,I,O={};for(S in k)b(k,S)&&(I=k[S],O[S]=!I||typeof I!="object"||Ce.has(I.constructor)?I:w(I));return O})(f[g])}),u}function Kl(u,f){return u.all||f.all||Object.keys(u).some(function(g){return f[g]&&Ns(f[g],u[g])})}x(nn.prototype,((vn={add:function(u){return qo(this,u),this},addKey:function(u){return Ho(this,u,u),this},addKeys:function(u){var f=this;return u.forEach(function(g){return Ho(f,g,g)}),this},hasKey:function(u){var f=As(this).next(u).value;return f&&Xe(f.from,u)<=0&&0<=Xe(f.to,u)}})[Ee]=function(){return As(this)},vn));var Fr={},Vl={},Wl=!1;function Rs(u){Ds(Vl,u),Wl||(Wl=!0,setTimeout(function(){Wl=!1,Hl(Vl,!(Vl={}))},0))}function Hl(u,f){f===void 0&&(f=!1);var g=new Set;if(u.all)for(var w=0,k=Object.values(Fr);w<k.length;w++)Ls(O=k[w],u,g,f);else for(var S in u){var I,O,S=/^idb\:\/\/(.*)\/(.*)\//.exec(S);S&&(I=S[1],S=S[2],O=Fr["idb://".concat(I,"/").concat(S)])&&Ls(O,u,g,f)}g.forEach(function(F){return F()})}function Ls(u,f,g,w){for(var k=[],S=0,I=Object.entries(u.queries.query);S<I.length;S++){for(var O=I[S],F=O[0],V=[],L=0,A=O[1];L<A.length;L++){var B=A[L];Kl(f,B.obsSet)?B.subscribers.forEach(function(Q){return g.add(Q)}):w&&V.push(B)}w&&k.push([F,V])}if(w)for(var $=0,z=k;$<z.length;$++){var M=z[$],F=M[0],V=M[1];u.queries.query[F]=V}}function jd(u){var f=u._state,g=u._deps.indexedDB;if(f.isBeingOpened||u.idbdb)return f.dbReadyPromise.then(function(){return f.dbOpenError?Mt(f.dbOpenError):u});f.isBeingOpened=!0,f.dbOpenError=null,f.openComplete=!1;var w=f.openCanceller,k=Math.round(10*u.verno),S=!1;function I(){if(f.openCanceller!==w)throw new fe.DatabaseClosed("db.open() was cancelled")}function O(){return new Oe(function(B,$){if(I(),!g)throw new fe.MissingAPI;var z=u.name,M=f.autoSchema||!k?g.open(z):g.open(z,k);if(!M)throw new fe.MissingAPI;M.onerror=qt($),M.onblocked=_t(u._fireOnBlocked),M.onupgradeneeded=_t(function(Q){var Z;L=M.transaction,f.autoSchema&&!u._options.allowEmptyDB?(M.onerror=Bo,L.abort(),M.result.close(),(Z=g.deleteDatabase(z)).onsuccess=Z.onerror=_t(function(){$(new fe.NoSuchDatabase("Database ".concat(z," doesnt exist")))})):(L.onerror=qt($),Z=Q.oldVersion>Math.pow(2,62)?0:Q.oldVersion,A=Z<1,u.idbdb=M.result,S&&_u(u,L),Ts(u,Z/10,L,$))},$),M.onsuccess=_t(function(){L=null;var Q,Z,H,re,le,xe,Se=u.idbdb=M.result,ue=X(Se.objectStoreNames);if(0<ue.length)try{var Te=Se.transaction((le=ue).length===1?le[0]:le,"readonly");if(f.autoSchema)xe=Se,re=Te,(H=u).verno=xe.version/10,re=H._dbSchema=yr(0,xe,re),H._storeNames=X(xe.objectStoreNames,0),Vo(H,[H._allTables],d(re),re);else if(eo(u,u._dbSchema,Te),Z=Te,((Z=Xi(yr(0,(Q=u).idbdb,Z),Q._dbSchema)).add.length||Z.change.some(function(je){return je.add.length||je.change.length}))&&!S)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Se.close(),k=Se.version+1,S=!0,B(O());Ji(u,Te)}catch{}Dr.push(u),Se.onversionchange=_t(function(je){f.vcFired=!0,u.on("versionchange").fire(je)}),Se.onclose=_t(function(){u.close({disableAutoOpen:!1})}),A&&(ue=u._deps,le=z,pi(xe=ue.indexedDB)||le===Ro||Wo(xe,ue.IDBKeyRange).put({name:le}).catch(We)),B()},$)}).catch(function(B){switch(B==null?void 0:B.name){case"UnknownError":if(0<f.PR1398_maxLoop)return f.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),O();break;case"VersionError":if(0<k)return k=0,O()}return Oe.reject(B)})}var F,V=f.dbReadyResolve,L=null,A=!1;return Oe.race([w,(typeof navigator>"u"?Oe.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(B){function $(){return indexedDB.databases().finally(B)}F=setInterval($,100),$()}).finally(function(){return clearInterval(F)}):Promise.resolve()).then(O)]).then(function(){return I(),f.onReadyBeingFired=[],Oe.resolve(no(function(){return u.on.ready.fire(u.vip)})).then(function B(){var $;if(0<f.onReadyBeingFired.length)return $=f.onReadyBeingFired.reduce(Zr,We),f.onReadyBeingFired=[],Oe.resolve(no(function(){return $(u.vip)})).then(B)})}).finally(function(){f.openCanceller===w&&(f.onReadyBeingFired=null,f.isBeingOpened=!1)}).catch(function(B){f.dbOpenError=B;try{L&&L.abort()}catch{}return w===f.openCanceller&&u._close(),Mt(B)}).finally(function(){f.openComplete=!0,V()}).then(function(){var B;return A&&(B={},u.tables.forEach(function($){$.schema.indexes.forEach(function(z){z.name&&(B["idb://".concat(u.name,"/").concat($.name,"/").concat(z.name)]=new nn(-1/0,[[[]]]))}),B["idb://".concat(u.name,"/").concat($.name,"/")]=B["idb://".concat(u.name,"/").concat($.name,"/:dels")]=new nn(-1/0,[[[]]])}),Mr(Qi).fire(B),Hl(B,!0)),u})}function ql(u){function f(S){return u.next(S)}var g=k(f),w=k(function(S){return u.throw(S)});function k(S){return function(O){var O=S(O),F=O.value;return O.done?F:F&&typeof F.then=="function"?F.then(g,w):h(F)?Promise.all(F).then(g,w):g(F)}}return k(f)()}function Ms(u,f,g){for(var w=h(u)?u.slice():[u],k=0;k<g;++k)w.push(f);return w}var Su={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(u){return o(o({},u),{table:function(w){var g=u.table(w),w=g.schema,k={},S=[];function I(B,$,z){var H=Ko(B),M=k[H]=k[H]||[],Q=B==null?0:typeof B=="string"?1:B.length,Z=0<$,H=o(o({},z),{name:Z?"".concat(H,"(virtual-from:").concat(z.name,")"):z.name,lowLevelIndex:z,isVirtual:Z,keyTail:$,keyLength:Q,extractKey:Ur(B),unique:!Z&&z.unique});return M.push(H),H.isPrimaryKey||S.push(H),1<Q&&I(Q===2?B[0]:B.slice(0,Q-1),$+1,z),M.sort(function(re,le){return re.keyTail-le.keyTail}),H}var O=I(w.primaryKey.keyPath,0,w.primaryKey);k[":id"]=[O];for(var F=0,V=w.indexes;F<V.length;F++){var L=V[F];I(L.keyPath,0,L)}function A(B){var $,z=B.query.index;return z.isVirtual?o(o({},B),{query:{index:z.lowLevelIndex,range:($=B.query.range,z=z.keyTail,{type:$.type===1?2:$.type,lower:Ms($.lower,$.lowerOpen?u.MAX_KEY:u.MIN_KEY,z),lowerOpen:!0,upper:Ms($.upper,$.upperOpen?u.MIN_KEY:u.MAX_KEY,z),upperOpen:!0})}}):B}return o(o({},g),{schema:o(o({},w),{primaryKey:O,indexes:S,getIndexByKeyPath:function(B){return(B=k[Ko(B)])&&B[0]}}),count:function(B){return g.count(A(B))},query:function(B){return g.query(A(B))},openCursor:function(B){var $=B.query.index,z=$.keyTail,M=$.keyLength;return $.isVirtual?g.openCursor(A(B)).then(function(Z){return Z&&Q(Z)}):g.openCursor(B);function Q(Z){return Object.create(Z,{continue:{value:function(H){H!=null?Z.continue(Ms(H,B.reverse?u.MAX_KEY:u.MIN_KEY,z)):B.unique?Z.continue(Z.key.slice(0,M).concat(B.reverse?u.MIN_KEY:u.MAX_KEY,z)):Z.continue()}},continuePrimaryKey:{value:function(H,re){Z.continuePrimaryKey(Ms(H,u.MAX_KEY,z),re)}},primaryKey:{get:function(){return Z.primaryKey}},key:{get:function(){var H=Z.key;return M===1?H[0]:H.slice(0,M)}},value:{get:function(){return Z.value}}})}}})}})}};function Gl(u,f,g,w){return g=g||{},w=w||"",d(u).forEach(function(k){var S,I,O;b(f,k)?(S=u[k],I=f[k],typeof S=="object"&&typeof I=="object"&&S&&I?(O=Be(S))!==Be(I)?g[w+k]=f[k]:O==="Object"?Gl(S,I,g,w+k+"."):S!==I&&(g[w+k]=f[k]):S!==I&&(g[w+k]=f[k])):g[w+k]=void 0}),d(f).forEach(function(k){b(u,k)||(g[w+k]=f[k])}),g}function Yl(u,f){return f.type==="delete"?f.keys:f.keys||f.values.map(u.extractKey)}var Td={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(u){return o(o({},u),{table:function(f){var g=u.table(f),w=g.schema.primaryKey;return o(o({},g),{mutate:function(k){var S=ze.trans,I=S.table(f).hook,O=I.deleting,F=I.creating,V=I.updating;switch(k.type){case"add":if(F.fire===We)break;return S._promise("readwrite",function(){return L(k)},!0);case"put":if(F.fire===We&&V.fire===We)break;return S._promise("readwrite",function(){return L(k)},!0);case"delete":if(O.fire===We)break;return S._promise("readwrite",function(){return L(k)},!0);case"deleteRange":if(O.fire===We)break;return S._promise("readwrite",function(){return(function A(B,$,z){return g.query({trans:B,values:!1,query:{index:w,range:$},limit:z}).then(function(M){var Q=M.result;return L({type:"delete",keys:Q,trans:B}).then(function(Z){return 0<Z.numFailures?Promise.reject(Z.failures[0]):Q.length<z?{failures:[],numFailures:0,lastResult:void 0}:A(B,o(o({},$),{lower:Q[Q.length-1],lowerOpen:!0}),z)})})})(k.trans,k.range,1e4)},!0)}return g.mutate(k);function L(A){var B,$,z,M=ze.trans,Q=A.keys||Yl(w,A);if(Q)return(A=A.type==="add"||A.type==="put"?o(o({},A),{keys:Q}):o({},A)).type!=="delete"&&(A.values=l([],A.values)),A.keys&&(A.keys=l([],A.keys)),B=g,z=Q,(($=A).type==="add"?Promise.resolve([]):B.getMany({trans:$.trans,keys:z,cache:"immutable"})).then(function(Z){var H=Q.map(function(re,le){var xe,Se,ue,Te=Z[le],je={onerror:null,onsuccess:null};return A.type==="delete"?O.fire.call(je,re,Te,M):A.type==="add"||Te===void 0?(xe=F.fire.call(je,re,A.values[le],M),re==null&&xe!=null&&(A.keys[le]=re=xe,w.outbound||pe(A.values[le],w.keyPath,re))):(xe=Gl(Te,A.values[le]),(Se=V.fire.call(je,xe,re,Te,M))&&(ue=A.values[le],Object.keys(Se).forEach(function(ge){b(ue,ge)?ue[ge]=Se[ge]:pe(ue,ge,Se[ge])}))),je});return g.mutate(A).then(function(re){for(var le=re.failures,xe=re.results,Se=re.numFailures,re=re.lastResult,ue=0;ue<Q.length;++ue){var Te=(xe||Q)[ue],je=H[ue];Te==null?je.onerror&&je.onerror(le[ue]):je.onsuccess&&je.onsuccess(A.type==="put"&&Z[ue]?A.values[ue]:Te)}return{failures:le,results:xe,numFailures:Se,lastResult:re}}).catch(function(re){return H.forEach(function(le){return le.onerror&&le.onerror(re)}),Promise.reject(re)})});throw new Error("Keys missing")}}})}})}};function Eu(u,f,g){try{if(!f||f.keys.length<u.length)return null;for(var w=[],k=0,S=0;k<f.keys.length&&S<u.length;++k)Xe(f.keys[k],u[S])===0&&(w.push(g?be(f.values[k]):f.values[k]),++S);return w.length===u.length?w:null}catch{return null}}var Pd={stack:"dbcore",level:-1,create:function(u){return{table:function(f){var g=u.table(f);return o(o({},g),{getMany:function(w){var k;return w.cache?(k=Eu(w.keys,w.trans._cache,w.cache==="clone"))?Oe.resolve(k):g.getMany(w).then(function(S){return w.trans._cache={keys:w.keys,values:w.cache==="clone"?be(S):S},S}):g.getMany(w)},mutate:function(w){return w.type!=="add"&&(w.trans._cache=null),g.mutate(w)}})}}}};function Cu(u,f){return u.trans.mode==="readonly"&&!!u.subscr&&!u.trans.explicit&&u.trans.db._options.cache!=="disabled"&&!f.schema.primaryKey.outbound}function Iu(u,f){switch(u){case"query":return f.values&&!f.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Ql={stack:"dbcore",level:0,name:"Observability",create:function(u){var f=u.schema.name,g=new nn(u.MIN_KEY,u.MAX_KEY);return o(o({},u),{transaction:function(w,k,S){if(ze.subscr&&k!=="readonly")throw new fe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ze.querier));return u.transaction(w,k,S)},table:function(w){function k(Q){var M,Q=Q.query;return[M=Q.index,new nn((M=(Q=Q.range).lower)!=null?M:u.MIN_KEY,(M=Q.upper)!=null?M:u.MAX_KEY)]}var S=u.table(w),I=S.schema,O=I.primaryKey,F=I.indexes,V=O.extractKey,L=O.outbound,A=O.autoIncrement&&F.filter(function(z){return z.compound&&z.keyPath.includes(O.keyPath)}),B=o(o({},S),{mutate:function(z){function M(Ne){return Ne="idb://".concat(f,"/").concat(w,"/").concat(Ne),le[Ne]||(le[Ne]=new nn)}var Q,Z,H,re=z.trans,le=z.mutatedParts||(z.mutatedParts={}),xe=M(""),Se=M(":dels"),ue=z.type,je=z.type==="deleteRange"?[z.range]:z.type==="delete"?[z.keys]:z.values.length<50?[Yl(O,z).filter(function(Ne){return Ne}),z.values]:[],Te=je[0],je=je[1],ge=z.trans._cache;return h(Te)?(xe.addKeys(Te),(ue=ue==="delete"||Te.length===je.length?Eu(Te,ge):null)||Se.addKeys(Te),(ue||je)&&(Q=M,Z=ue,H=je,I.indexes.forEach(function(Ne){var ut=Q(Ne.name||"");function ft(nt){return nt!=null?Ne.extractKey(nt):null}function qe(nt){Ne.multiEntry&&h(nt)?nt.forEach(function(jt){return ut.addKey(jt)}):ut.addKey(nt)}(Z||H).forEach(function(nt,bt){var jn=Z&&ft(Z[bt]),bt=H&&ft(H[bt]);Xe(jn,bt)!==0&&(jn!=null&&qe(jn),bt!=null)&&qe(bt)})}))):Te?(je={from:(ge=Te.lower)!=null?ge:u.MIN_KEY,to:(ue=Te.upper)!=null?ue:u.MAX_KEY},Se.add(je),xe.add(je)):(xe.add(g),Se.add(g),I.indexes.forEach(function(Ne){return M(Ne.name).add(g)})),S.mutate(z).then(function(Ne){return!Te||z.type!=="add"&&z.type!=="put"||(xe.addKeys(Ne.results),A&&A.forEach(function(ut){for(var ft=z.values.map(function(jn){return ut.extractKey(jn)}),qe=ut.keyPath.findIndex(function(jn){return jn===O.keyPath}),nt=0,jt=Ne.results.length;nt<jt;++nt)ft[nt][qe]=Ne.results[nt];M(ut.name).addKeys(ft)})),re.mutatedParts=Ds(re.mutatedParts||{},le),Ne})}}),$={get:function(z){return[O,new nn(z.key)]},getMany:function(z){return[O,new nn().addKeys(z.keys)]},count:k,query:k,openCursor:k};return d($).forEach(function(z){B[z]=function(M){var Q=ze.subscr,Z=!!Q,H=Cu(ze,S)&&Iu(z,M)?M.obsSet={}:Q;if(Z){var re,Q=function(je){return je="idb://".concat(f,"/").concat(w,"/").concat(je),H[je]||(H[je]=new nn)},le=Q(""),xe=Q(":dels"),Z=$[z](M),Se=Z[0],Z=Z[1];if((z==="query"&&Se.isPrimaryKey&&!M.values?xe:Q(Se.name||"")).add(Z),!Se.isPrimaryKey){if(z!=="count")return re=z==="query"&&L&&M.values&&S.query(o(o({},M),{values:!1})),S[z].apply(this,arguments).then(function(je){if(z==="query"){if(L&&M.values)return re.then(function(ft){return ft=ft.result,le.addKeys(ft),je});var ge=M.values?je.result.map(V):je.result;(M.values?le:xe).addKeys(ge)}else{var Ne,ut;if(z==="openCursor")return ut=M.values,(Ne=je)&&Object.create(Ne,{key:{get:function(){return xe.addKey(Ne.primaryKey),Ne.key}},primaryKey:{get:function(){var ft=Ne.primaryKey;return xe.addKey(ft),ft}},value:{get:function(){return ut&&le.addKey(Ne.primaryKey),Ne.value}}})}return je});xe.add(g)}}return S[z].apply(this,arguments)}}),B}})}};function ro(u,f,g){var w;return g.numFailures===0?f:f.type==="deleteRange"||(w=f.keys?f.keys.length:"values"in f&&f.values?f.values.length:1,g.numFailures===w)?null:(w=o({},f),h(w.keys)&&(w.keys=w.keys.filter(function(k,S){return!(S in g.failures)})),"values"in w&&h(w.values)&&(w.values=w.values.filter(function(k,S){return!(S in g.failures)})),w)}function Jl(u,f){return g=u,((w=f).lower===void 0||(w.lowerOpen?0<Xe(g,w.lower):0<=Xe(g,w.lower)))&&(g=u,(w=f).upper===void 0||(w.upperOpen?Xe(g,w.upper)<0:Xe(g,w.upper)<=0));var g,w}function Xl(u,f,g,w,k,S){var I,O,F,V,L,A;return!g||g.length===0||(I=f.query.index,O=I.multiEntry,F=f.query.range,V=w.schema.primaryKey.extractKey,L=I.extractKey,A=(I.lowLevelIndex||I).extractKey,(w=g.reduce(function(B,$){var z=B,M=[];if($.type==="add"||$.type==="put")for(var Q=new nn,Z=$.values.length-1;0<=Z;--Z){var H,re=$.values[Z],le=V(re);!Q.hasKey(le)&&(H=L(re),O&&h(H)?H.some(function(je){return Jl(je,F)}):Jl(H,F))&&(Q.addKey(le),M.push(re))}switch($.type){case"add":var xe=new nn().addKeys(f.values?B.map(function(ge){return V(ge)}):B),z=B.concat(f.values?M.filter(function(ge){return ge=V(ge),!xe.hasKey(ge)&&(xe.addKey(ge),!0)}):M.map(function(ge){return V(ge)}).filter(function(ge){return!xe.hasKey(ge)&&(xe.addKey(ge),!0)}));break;case"put":var Se=new nn().addKeys($.values.map(function(ge){return V(ge)}));z=B.filter(function(ge){return!Se.hasKey(f.values?V(ge):ge)}).concat(f.values?M:M.map(function(ge){return V(ge)}));break;case"delete":var ue=new nn().addKeys($.keys);z=B.filter(function(ge){return!ue.hasKey(f.values?V(ge):ge)});break;case"deleteRange":var Te=$.range;z=B.filter(function(ge){return!Jl(V(ge),Te)})}return z},u))===u)?u:(w.sort(function(B,$){return Xe(A(B),A($))||Xe(V(B),V($))}),f.limit&&f.limit<1/0&&(w.length>f.limit?w.length=f.limit:u.length===f.limit&&w.length<f.limit&&(k.dirty=!0)),S?Object.freeze(w):w)}function Zl(u,f){return Xe(u.lower,f.lower)===0&&Xe(u.upper,f.upper)===0&&!!u.lowerOpen==!!f.lowerOpen&&!!u.upperOpen==!!f.upperOpen}function Ou(u,f){return((g,w,k,S)=>{if(g===void 0)return w!==void 0?-1:0;if(w===void 0)return 1;if((g=Xe(g,w))===0){if(k&&S)return 0;if(k)return 1;if(S)return-1}return g})(u.lower,f.lower,u.lowerOpen,f.lowerOpen)<=0&&0<=((g,w,k,S)=>{if(g===void 0)return w!==void 0?1:0;if(w===void 0)return-1;if((g=Xe(g,w))===0){if(k&&S)return 0;if(k)return-1;if(S)return 1}return g})(u.upper,f.upper,u.upperOpen,f.upperOpen)}function ju(u,f,g,w){u.subscribers.add(g),w.addEventListener("abort",function(){var k,S;u.subscribers.delete(g),u.subscribers.size===0&&(k=u,S=f,setTimeout(function(){k.subscribers.size===0&&U(S,k)},3e3))})}var Tu={stack:"dbcore",level:0,name:"Cache",create:function(u){var f=u.schema.name;return o(o({},u),{transaction:function(g,w,k){var S,I,O=u.transaction(g,w,k);return w==="readwrite"&&(k=(S=new AbortController).signal,O.addEventListener("abort",(I=function(F){return function(){if(S.abort(),w==="readwrite"){for(var V=new Set,L=0,A=g;L<A.length;L++){var B=A[L],$=Fr["idb://".concat(f,"/").concat(B)];if($){var z=u.table(B),M=$.optimisticOps.filter(function(Ne){return Ne.trans===O});if(O._explicit&&F&&O.mutatedParts)for(var Q=0,Z=Object.values($.queries.query);Q<Z.length;Q++)for(var H=0,re=(Se=Z[Q]).slice();H<re.length;H++)Kl((ue=re[H]).obsSet,O.mutatedParts)&&(U(Se,ue),ue.subscribers.forEach(function(Ne){return V.add(Ne)}));else if(0<M.length){$.optimisticOps=$.optimisticOps.filter(function(Ne){return Ne.trans!==O});for(var le=0,xe=Object.values($.queries.query);le<xe.length;le++)for(var Se,ue,Te,je=0,ge=(Se=xe[le]).slice();je<ge.length;je++)(ue=ge[je]).res!=null&&O.mutatedParts&&(F&&!ue.dirty?(Te=Object.isFrozen(ue.res),Te=Xl(ue.res,ue.req,M,z,ue,Te),ue.dirty?(U(Se,ue),ue.subscribers.forEach(function(Ne){return V.add(Ne)})):Te!==ue.res&&(ue.res=Te,ue.promise=Oe.resolve({result:Te}))):(ue.dirty&&U(Se,ue),ue.subscribers.forEach(function(Ne){return V.add(Ne)})))}}}V.forEach(function(Ne){return Ne()})}}})(!1),{signal:k}),O.addEventListener("error",I(!1),{signal:k}),O.addEventListener("complete",I(!0),{signal:k})),O},table:function(g){var w=u.table(g),k=w.schema.primaryKey;return o(o({},w),{mutate:function(S){var I,O=ze.trans;return!k.outbound&&O.db._options.cache!=="disabled"&&!O.explicit&&O.idbtrans.mode==="readwrite"&&(I=Fr["idb://".concat(f,"/").concat(g)])?(O=w.mutate(S),S.type!=="add"&&S.type!=="put"||!(50<=S.values.length||Yl(k,S).some(function(F){return F==null}))?(I.optimisticOps.push(S),S.mutatedParts&&Rs(S.mutatedParts),O.then(function(F){0<F.numFailures&&(U(I.optimisticOps,S),(F=ro(0,S,F))&&I.optimisticOps.push(F),S.mutatedParts)&&Rs(S.mutatedParts)}),O.catch(function(){U(I.optimisticOps,S),S.mutatedParts&&Rs(S.mutatedParts)})):O.then(function(F){var V=ro(0,o(o({},S),{values:S.values.map(function(L,A){var B;return F.failures[A]?L:(pe(B=(B=k.keyPath)!=null&&B.includes(".")?be(L):o({},L),k.keyPath,F.results[A]),B)})}),F);I.optimisticOps.push(V),queueMicrotask(function(){return S.mutatedParts&&Rs(S.mutatedParts)})}),O):w.mutate(S)},query:function(S){var I,O,F,V,L,A,B;return Cu(ze,w)&&Iu("query",S)?(I=((F=ze.trans)==null?void 0:F.db._options.cache)==="immutable",O=(F=ze).requery,F=F.signal,A=(($,z,M,Q)=>{var Z=Fr["idb://".concat($,"/").concat(z)];if(!Z)return[];if(!($=Z.queries[M]))return[null,!1,Z,null];var H=$[(Q.query?Q.query.index.name:null)||""];if(!H)return[null,!1,Z,null];switch(M){case"query":var re=H.find(function(le){return le.req.limit===Q.limit&&le.req.values===Q.values&&Zl(le.req.query.range,Q.query.range)});return re?[re,!0,Z,H]:[H.find(function(le){return("limit"in le.req?le.req.limit:1/0)>=Q.limit&&(!Q.values||le.req.values)&&Ou(le.req.query.range,Q.query.range)}),!1,Z,H];case"count":return re=H.find(function(le){return Zl(le.req.query.range,Q.query.range)}),[re,!!re,Z,H]}})(f,g,"query",S),B=A[0],V=A[2],L=A[3],B&&A[1]?B.obsSet=S.obsSet:(A=w.query(S).then(function($){var z=$.result;if(B&&(B.res=z),I){for(var M=0,Q=z.length;M<Q;++M)Object.freeze(z[M]);Object.freeze(z)}else $.result=be(z);return $}).catch(function($){return L&&B&&U(L,B),Promise.reject($)}),B={obsSet:S.obsSet,promise:A,subscribers:new Set,type:"query",req:S,dirty:!1},L?L.push(B):(L=[B],(V=V||(Fr["idb://".concat(f,"/").concat(g)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[S.query.index.name||""]=L)),ju(B,L,O,F),B.promise.then(function($){return{result:Xl($.result,S,V==null?void 0:V.optimisticOps,w,B,I)}})):w.query(S)}})}})}};function gr(u,f){return new Proxy(u,{get:function(g,w,k){return w==="db"?f:Reflect.get(g,w,k)}})}Ut.prototype.version=function(u){if(isNaN(u)||u<.1)throw new fe.Type("Given version is not a positive number");if(u=Math.round(10*u)/10,this.idbdb||this._state.isBeingOpened)throw new fe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,u);var f=this._versions,g=f.filter(function(w){return w._cfg.version===u})[0];return g||(g=new this.Version(u),f.push(g),f.sort(Bl),g.stores({}),this._state.autoSchema=!1),g},Ut.prototype._whenReady=function(u){var f=this;return this.idbdb&&(this._state.openComplete||ze.letThrough||this._vip)?u():new Oe(function(g,w){if(f._state.openComplete)return w(new fe.DatabaseClosed(f._state.dbOpenError));if(!f._state.isBeingOpened){if(!f._state.autoOpen)return void w(new fe.DatabaseClosed);f.open().catch(We)}f._state.dbReadyPromise.then(g,w)}).then(u)},Ut.prototype.use=function(k){var f=k.stack,g=k.create,w=k.level,k=k.name,S=(k&&this.unuse({stack:f,name:k}),this._middlewares[f]||(this._middlewares[f]=[]));return S.push({stack:f,create:g,level:w??10,name:k}),S.sort(function(I,O){return I.level-O.level}),this},Ut.prototype.unuse=function(u){var f=u.stack,g=u.name,w=u.create;return f&&this._middlewares[f]&&(this._middlewares[f]=this._middlewares[f].filter(function(k){return w?k.create!==w:!!g&&k.name!==g})),this},Ut.prototype.open=function(){var u=this;return Ar(Or,function(){return jd(u)})},Ut.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var u=this._state,f=Dr.indexOf(this);if(0<=f&&Dr.splice(f,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}u.isBeingOpened||(u.dbReadyPromise=new Oe(function(g){u.dbReadyResolve=g}),u.openCanceller=new Oe(function(g,w){u.cancelOpen=w}))},Ut.prototype.close=function(f){var f=(f===void 0?{disableAutoOpen:!0}:f).disableAutoOpen,g=this._state;f?(g.isBeingOpened&&g.cancelOpen(new fe.DatabaseClosed),this._close(),g.autoOpen=!1,g.dbOpenError=new fe.DatabaseClosed):(this._close(),g.autoOpen=this._options.autoOpen||g.isBeingOpened,g.openComplete=!1,g.dbOpenError=null)},Ut.prototype.delete=function(u){var f=this,g=(u===void 0&&(u={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),w=this._state;return new Oe(function(k,S){function I(){f.close(u);var O=f._deps.indexedDB.deleteDatabase(f.name);O.onsuccess=_t(function(){var F,V,L;F=f._deps,V=f.name,pi(L=F.indexedDB)||V===Ro||Wo(L,F.IDBKeyRange).delete(V).catch(We),k()}),O.onerror=qt(S),O.onblocked=f._fireOnBlocked}if(g)throw new fe.InvalidArgument("Invalid closeOptions argument to db.delete()");w.isBeingOpened?w.dbReadyPromise.then(I):I()})},Ut.prototype.backendDB=function(){return this.idbdb},Ut.prototype.isOpen=function(){return this.idbdb!==null},Ut.prototype.hasBeenClosed=function(){var u=this._state.dbOpenError;return u&&u.name==="DatabaseClosed"},Ut.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Ut.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Ut.prototype,"tables",{get:function(){var u=this;return d(this._allTables).map(function(f){return u._allTables[f]})},enumerable:!1,configurable:!0}),Ut.prototype.transaction=function(){var u=(function(f,g,w){var k=arguments.length;if(k<2)throw new fe.InvalidArgument("Too few arguments");for(var S=new Array(k-1);--k;)S[k-1]=arguments[k];return w=S.pop(),[f,ke(S),w]}).apply(this,arguments);return this._transaction.apply(this,u)},Ut.prototype._transaction=function(u,f,g){var w,k,S=this,I=ze.trans,O=(I&&I.db===this&&u.indexOf("!")===-1||(I=null),u.indexOf("?")!==-1);u=u.replace("!","").replace("?","");try{if(k=f.map(function(V){if(V=V instanceof S.Table?V.name:V,typeof V!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return V}),u=="r"||u===qi)w=qi;else{if(u!="rw"&&u!=Ml)throw new fe.InvalidArgument("Invalid transaction mode: "+u);w=Ml}if(I){if(I.mode===qi&&w===Ml){if(!O)throw new fe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");I=null}I&&k.forEach(function(V){if(I&&I.storeNames.indexOf(V)===-1){if(!O)throw new fe.SubTransaction("Table "+V+" not included in parent transaction.");I=null}}),O&&I&&!I.active&&(I=null)}}catch(V){return I?I._promise(null,function(L,A){A(V)}):Mt(V)}var F=(function V(L,A,B,$,z){return Oe.resolve().then(function(){var H=ze.transless||ze,M=L._createTransaction(A,B,L._dbSchema,$),H=(M.explicit=!0,{trans:M,transless:H});if($)M.idbtrans=$.idbtrans;else try{M.create(),M.idbtrans._explicit=!0,L._state.PR1398_maxLoop=3}catch(re){return re.name===Ye.InvalidState&&L.isOpen()&&0<--L._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),L.close({disableAutoOpen:!1}),L.open().then(function(){return V(L,A,B,null,z)})):Mt(re)}var Q,Z=N(z),H=(Z&&Hi(),Oe.follow(function(){var re;(Q=z.call(M,M))&&(Z?(re=wn.bind(null,null),Q.then(re,re)):typeof Q.next=="function"&&typeof Q.throw=="function"&&(Q=ql(Q)))},H));return(Q&&typeof Q.then=="function"?Oe.resolve(Q).then(function(re){return M.active?re:Mt(new fe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):H.then(function(){return Q})).then(function(re){return $&&M._resolve(),M._completion.then(function(){return re})}).catch(function(re){return M._reject(re),Mt(re)})})}).bind(null,this,w,k,I,g);return I?I._promise(w,F,"lock"):ze.trans?Ar(ze.transless,function(){return S._whenReady(F)}):this._whenReady(F)},Ut.prototype.table=function(u){if(b(this._allTables,u))return this._allTables[u];throw new fe.InvalidTable("Table ".concat(u," does not exist"))};var vr=Ut;function Ut(u,f){var g,w,k,S,I,O=this,F=(this._middlewares={},this.verno=0,Ut.dependencies),F=(this._options=f=o({addons:Ut.addons,autoOpen:!0,indexedDB:F.indexedDB,IDBKeyRange:F.IDBKeyRange,cache:"cloned"},f),this._deps={indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange},f.addons),V=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:We,dbReadyPromise:null,cancelOpen:We,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:f.autoOpen}),L=(V.dbReadyPromise=new Oe(function(A){V.dbReadyResolve=A}),V.openCanceller=new Oe(function(A,B){V.cancelOpen=B}),this._state=V,this.name=u,this.on=zo(this,"populate","blocked","versionchange","close",{ready:[Zr,We]}),this.once=function(A,B){var $=function(){for(var z=[],M=0;M<arguments.length;M++)z[M]=arguments[M];O.on(A).unsubscribe($),B.apply(O,z)};return O.on(A,$)},this.on.ready.subscribe=ce(this.on.ready.subscribe,function(A){return function(B,$){Ut.vip(function(){var z,M=O._state;M.openComplete?(M.dbOpenError||Oe.resolve().then(B),$&&A(B)):M.onReadyBeingFired?(M.onReadyBeingFired.push(B),$&&A(B)):(A(B),z=O,$||A(function Q(){z.on.ready.unsubscribe(B),z.on.ready.unsubscribe(Q)}))})}}),this.Collection=(g=this,ui(yu.prototype,function(Q,M){this.db=g;var $=Lo,z=null;if(M)try{$=M()}catch(H){z=H}var M=Q._ctx,Q=M.table,Z=Q.hook.reading.fire;this._ctx={table:Q,index:M.index,isPrimKey:!M.index||Q.schema.primKey.keyPath&&M.index===Q.schema.primKey.name,range:$,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:z,or:M.or,valueMapper:Z!==it?Z:null}})),this.Table=(w=this,ui(Uo.prototype,function(A,B,$){this.db=w,this._tx=$,this.name=A,this.schema=B,this.hook=w._allTables[A]?w._allTables[A].hook:zo(null,{creating:[gn,We],reading:[ct,it],updating:[Fn,We],deleting:[cr,We]})})),this.Transaction=(k=this,ui(wu.prototype,function(A,B,$,z,M){var Q=this;A!=="readonly"&&B.forEach(function(Z){Z=(Z=$[Z])==null?void 0:Z.yProps,Z&&(B=B.concat(Z.map(function(H){return H.updatesTable})))}),this.db=k,this.mode=A,this.storeNames=B,this.schema=$,this.chromeTransactionDurability=z,this.idbtrans=null,this.on=zo(this,"complete","error","abort"),this.parent=M||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Oe(function(Z,H){Q._resolve=Z,Q._reject=H}),this._completion.then(function(){Q.active=!1,Q.on.complete.fire()},function(Z){var H=Q.active;return Q.active=!1,Q.on.error.fire(Z),Q.parent?Q.parent._reject(Z):H&&Q.idbtrans&&Q.idbtrans.abort(),Mt(Z)})})),this.Version=(S=this,ui(Od.prototype,function(A){this.db=S,this._cfg={version:A,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(I=this,ui(Yi.prototype,function(A,B,$){if(this.db=I,this._ctx={table:A,index:B===":id"?null:B,or:$},this._cmp=this._ascending=Xe,this._descending=function(z,M){return Xe(M,z)},this._max=function(z,M){return 0<Xe(z,M)?z:M},this._min=function(z,M){return Xe(z,M)<0?z:M},this._IDBKeyRange=I._deps.IDBKeyRange,!this._IDBKeyRange)throw new fe.MissingAPI})),this.on("versionchange",function(A){0<A.newVersion?console.warn("Another connection wants to upgrade database '".concat(O.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(O.name,"'. Closing db now to resume the delete request.")),O.close({disableAutoOpen:!1})}),this.on("blocked",function(A){!A.newVersion||A.newVersion<A.oldVersion?console.warn("Dexie.delete('".concat(O.name,"') was blocked")):console.warn("Upgrade '".concat(O.name,"' blocked by other connection holding version ").concat(A.oldVersion/10))}),this._maxKey=mr(f.IDBKeyRange),this._createTransaction=function(A,B,$,z){return new O.Transaction(A,B,$,O._options.chromeTransactionDurability,z)},this._fireOnBlocked=function(A){O.on("blocked").fire(A),Dr.filter(function(B){return B.name===O.name&&B!==O&&!B._state.vcFired}).map(function(B){return B.on("versionchange").fire(A)})},this.use(Pd),this.use(Tu),this.use(Ql),this.use(Su),this.use(Td),new Proxy(this,{get:function(A,B,$){var z;return B==="_vip"||(B==="table"?function(M){return gr(O.table(M),L)}:(z=Reflect.get(A,B,$))instanceof Uo?gr(z,L):B==="tables"?z.map(function(M){return gr(M,L)}):B==="_createTransaction"?function(){return gr(z.apply(this,arguments),L)}:z)}}));this.vip=L,F.forEach(function(A){return A(O)})}var Us,mi=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Pu=(yi.prototype.subscribe=function(u,f,g){return this._subscribe(u&&typeof u!="function"?u:{next:u,error:f,complete:g})},yi.prototype[mi]=function(){return this},yi);function yi(u){this._subscribe=u}try{Us={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{Us={indexedDB:null,IDBKeyRange:null}}function io(u){var f,g=!1,w=new Pu(function(k){var S=N(u),I,O=!1,F={},V={},L={get closed(){return O},unsubscribe:function(){O||(O=!0,I&&I.abort(),A&&Mr.storagemutated.unsubscribe($))}},A=(k.start&&k.start(L),!1),B=function(){return Ss(z)},$=function(M){Ds(F,M),Kl(V,F)&&B()},z=function(){var M,Q,Z;!O&&Us.indexedDB&&(F={},M={},I&&I.abort(),I=new AbortController,Z=(H=>{var re=Tr();try{S&&Hi();var le=Pr(u,H);return le=S?le.finally(wn):le}finally{re&&ii()}})(Q={subscr:M,signal:I.signal,requery:B,querier:u,trans:null}),Promise.resolve(Z).then(function(H){g=!0,f=H,O||Q.signal.aborted||(F={},(re=>{for(var le in re)if(b(re,le))return;return 1})(V=M)||A||(Mr(Qi,$),A=!0),Ss(function(){return!O&&k.next&&k.next(H)}))},function(H){g=!1,["DatabaseClosedError","AbortError"].includes(H==null?void 0:H.name)||O||Ss(function(){O||k.error&&k.error(H)})}))};return setTimeout(B,0),L});return w.hasValue=function(){return g},w.getValue=function(){return f},w}var gi=vr;function oo(u){var f=wr;try{wr=!0,Mr.storagemutated.fire(u),Hl(u,!0)}finally{wr=f}}x(gi,o(o({},G),{delete:function(u){return new gi(u,{addons:[]}).delete()},exists:function(u){return new gi(u,{addons:[]}).open().then(function(f){return f.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(u){try{return f=gi.dependencies,g=f.indexedDB,f=f.IDBKeyRange,(pi(g)?Promise.resolve(g.databases()).then(function(w){return w.map(function(k){return k.name}).filter(function(k){return k!==Ro})}):Wo(g,f).toCollection().primaryKeys()).then(u)}catch{return Mt(new fe.MissingAPI)}var f,g},defineClass:function(){return function(u){y(this,u)}},ignoreTransaction:function(u){return ze.trans?Ar(ze.transless,u):u()},vip:no,async:function(u){return function(){try{var f=ql(u.apply(this,arguments));return f&&typeof f.then=="function"?f:Oe.resolve(f)}catch(g){return Mt(g)}}},spawn:function(u,f,g){try{var w=ql(u.apply(g,f||[]));return w&&typeof w.then=="function"?w:Oe.resolve(w)}catch(k){return Mt(k)}},currentTransaction:{get:function(){return ze.trans||null}},waitFor:function(u,f){return u=Oe.resolve(typeof u=="function"?gi.ignoreTransaction(u):u).timeout(f||6e4),ze.trans?ze.trans.waitFor(u):u},Promise:Oe,debug:{get:function(){return un},set:function(u){bs(u)}},derive:T,extend:y,props:x,override:ce,Events:zo,on:Mr,liveQuery:io,extendObservabilitySet:Ds,getByKeyPath:ve,setByKeyPath:pe,delByKeyPath:function(u,f){typeof f=="string"?pe(u,f,void 0):"length"in f&&[].map.call(f,function(g){pe(u,g,void 0)})},shallowClone:se,deepClone:be,getObjectDiff:Gl,cmp:Xe,asap:ee,minKey:-1/0,addons:[],connections:Dr,errnames:Ye,dependencies:Us,cache:Fr,semVer:"4.3.0",version:"4.3.0".split(".").map(function(u){return parseInt(u)}).reduce(function(u,f,g){return u+f/Math.pow(10,2*g)})})),gi.maxKey=mr(gi.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Mr(Qi,function(u){wr||(u=new CustomEvent(fi,{detail:u}),wr=!0,dispatchEvent(u),wr=!1)}),addEventListener(fi,function(u){u=u.detail,wr||oo(u)}));var so,wr=!1,zs=function(){};return typeof BroadcastChannel<"u"&&((zs=function(){(so=new BroadcastChannel(fi)).onmessage=function(u){return u.data&&oo(u.data)}})(),typeof so.unref=="function"&&so.unref(),Mr(Qi,function(u){wr||so.postMessage(u)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(u){if(!vr.disableBfCache&&u.persisted){un&&console.debug("Dexie: handling persisted pagehide"),so!=null&&so.close();for(var f=0,g=Dr;f<g.length;f++)g[f].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(u){!vr.disableBfCache&&u.persisted&&(un&&console.debug("Dexie: handling persisted pageshow"),zs(),oo({all:new nn(-1/0,[[]])}))})),Oe.rejectionMapper=function(u,f){return!u||u instanceof Ie||u instanceof TypeError||u instanceof SyntaxError||!u.name||!It[u.name]?u:(f=new It[u.name](f||u.message,u),"stack"in u&&j(f,"stack",{get:function(){return this.inner.stack}}),f)},bs(un),o(vr,Object.freeze({__proto__:null,Dexie:vr,Entity:hu,PropModification:Lr,RangeSet:nn,add:function(u){return new Lr({add:u})},cmp:Xe,default:vr,liveQuery:io,mergeRanges:qo,rangesOverlap:Ns,remove:function(u){return new Lr({remove:u})},replacePrefix:function(u,f){return new Lr({replacePrefix:[u,f]})}}),{default:vr}),vr})})(Rc)),Rc.exports}var Vb=Kb();const gh=nv(Vb),wy=Symbol.for("Dexie"),st=globalThis[wy]||(globalThis[wy]=gh);if(gh.semVer!==st.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${gh.semVer} and ${st.semVer}`);const{liveQuery:So,mergeRanges:HC,rangesOverlap:qC,RangeSet:Wb,cmp:ud,Entity:Hb,PropModification:by,replacePrefix:GC,add:YC,remove:QC,DexieYProvider:JC}=st;function Xa(n,e,r){var o,l;typeof n=="function"?(o=e||[],l=r):(o=[],l=e);var a=ol.useRef({hasResult:!1,result:l,error:null}),d=ol.useReducer(function(m){return m+1},0);d[0];var h=d[1],y=ol.useMemo(function(){var m=typeof n=="function"?n():n;if(!m||typeof m.subscribe!="function")throw n===m?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!a.current.hasResult&&typeof window<"u"&&(typeof m.hasValue!="function"||m.hasValue()))if(typeof m.getValue=="function")a.current.result=m.getValue(),a.current.hasResult=!0;else{var _=m.subscribe(function(b){a.current.result=b,a.current.hasResult=!0});typeof _=="function"?_():_.unsubscribe()}return m},o);if(ol.useDebugValue(a.current.result),ol.useEffect(function(){var m=y.subscribe(function(_){var b=a.current;(b.error!==null||b.result!==_)&&(b.error=null,b.result=_,b.hasResult=!0,h())},function(_){var b=a.current;b.error!==_&&(b.error=_,h())});return typeof m=="function"?m:m.unsubscribe.bind(m)},o),a.current.error)throw a.current.error;return a.current.result}function Za(n,e,r){return Xa(function(){return st.liveQuery(n)},e||[],r)}function eu(n,e,r){if(!n)throw new TypeError("Invalid arguments to usePermissions(): undefined or null");var o;if(arguments.length>=3){if(!("transaction"in n))throw new TypeError("Invalid arguments to usePermission(db, table, obj): 1st arg must be a Dexie instance");if(typeof e!="string")throw new TypeError("Invalid arguments to usePermission(db, table, obj): 2nd arg must be string");if(!r||typeof r!="object")throw new TypeError("Invalid arguments to usePermission(db, table, obj): 3rd arg must be an object");o=n}else{if(n instanceof st)throw new TypeError("Invalid arguments to usePermission(db, table, obj): Missing table and obj arguments.");if(typeof n.table=="function"&&typeof n.db=="object")o=n.db,r=n,e=n.table();else throw new TypeError("Invalid arguments to usePermissions(). Expected usePermissions(entity: DexieCloudEntity) or usePermissions(db: Dexie, table: string, obj: DexieCloudObject)")}if(!("cloud"in o))throw new Error("usePermissions() is only for Dexie Cloud but there's no dexie-cloud-addon active in given db.");if(!("permissions"in o.cloud))throw new Error("usePermissions() requires a newer version of dexie-cloud-addon. Please upgrade it.");return Xa(function(){return o.cloud.permissions(r,e)},[r.realmId,r.owner,e])}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(n){var e=st.DexieYProvider;e&&e.release(n)});const Di=Math.floor,Lc=Math.abs,rv=(n,e)=>n<e?n:e,_l=(n,e)=>n>e?n:e,iv=n=>n!==0?n<0:1/n<0,_y=1,ky=2,Yf=4,Qf=8,Da=32,Ni=64,qn=128,cd=31,vh=63,fs=127,qb=2147483647,ov=Number.MAX_SAFE_INTEGER,Gb=Number.isInteger||(n=>typeof n=="number"&&isFinite(n)&&Di(n)===n),ps=()=>new Set,Jf=n=>n[n.length-1],Yb=(n,e)=>{for(let r=0;r<e.length;r++)n.push(e[r])},jo=Array.from,Qb=Array.isArray,Jb=n=>n.toLowerCase(),Xb=/^\s*/g,Zb=n=>n.replace(Xb,""),e_=/([A-Z])/g,xy=(n,e)=>Zb(n.replace(e_,r=>`${e}${Jb(r)}`)),t_=n=>{const e=unescape(encodeURIComponent(n)),r=e.length,o=new Uint8Array(r);for(let l=0;l<r;l++)o[l]=e.codePointAt(l);return o},Ra=typeof TextEncoder<"u"?new TextEncoder:null,n_=n=>Ra.encode(n),r_=Ra?n_:t_;let Ca=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Ca&&Ca.decode(new Uint8Array).length===1&&(Ca=null);class kl{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const xl=()=>new kl,i_=n=>{let e=n.cpos;for(let r=0;r<n.bufs.length;r++)e+=n.bufs[r].length;return e},Hn=n=>{const e=new Uint8Array(i_(n));let r=0;for(let o=0;o<n.bufs.length;o++){const l=n.bufs[o];e.set(l,r),r+=l.length}return e.set(new Uint8Array(n.cbuf.buffer,0,n.cpos),r),e},o_=(n,e)=>{const r=n.cbuf.length;r-n.cpos<e&&(n.bufs.push(new Uint8Array(n.cbuf.buffer,0,n.cpos)),n.cbuf=new Uint8Array(_l(r,e)*2),n.cpos=0)},ln=(n,e)=>{const r=n.cbuf.length;n.cpos===r&&(n.bufs.push(n.cbuf),n.cbuf=new Uint8Array(r*2),n.cpos=0),n.cbuf[n.cpos++]=e},wh=ln,rt=(n,e)=>{for(;e>fs;)ln(n,qn|fs&e),e=Di(e/128);ln(n,fs&e)},Yh=(n,e)=>{const r=iv(e);for(r&&(e=-e),ln(n,(e>vh?qn:0)|(r?Ni:0)|vh&e),e=Di(e/64);e>0;)ln(n,(e>fs?qn:0)|fs&e),e=Di(e/128)},bh=new Uint8Array(3e4),s_=bh.length/3,l_=(n,e)=>{if(e.length<s_){const r=Ra.encodeInto(e,bh).written||0;rt(n,r);for(let o=0;o<r;o++)ln(n,bh[o])}else pn(n,r_(e))},a_=(n,e)=>{const r=unescape(encodeURIComponent(e)),o=r.length;rt(n,o);for(let l=0;l<o;l++)ln(n,r.codePointAt(l))},or=Ra&&Ra.encodeInto?l_:a_,u_=(n,e)=>tu(n,Hn(e)),tu=(n,e)=>{const r=n.cbuf.length,o=n.cpos,l=rv(r-o,e.length),a=e.length-l;n.cbuf.set(e.subarray(0,l),o),n.cpos+=l,a>0&&(n.bufs.push(n.cbuf),n.cbuf=new Uint8Array(_l(r*2,a)),n.cbuf.set(e.subarray(l)),n.cpos=a)},pn=(n,e)=>{rt(n,e.byteLength),tu(n,e)},dd=(n,e)=>{o_(n,e);const r=new DataView(n.cbuf.buffer,n.cpos,e);return n.cpos+=e,r},c_=(n,e)=>dd(n,4).setFloat32(0,e,!1),d_=(n,e)=>dd(n,8).setFloat64(0,e,!1),f_=(n,e)=>dd(n,8).setBigInt64(0,e,!1),Sy=(n,e)=>dd(n,8).setBigUint64(0,e,!1),Ey=new DataView(new ArrayBuffer(4)),h_=n=>(Ey.setFloat32(0,n),Ey.getFloat32(0)===n),Eo=(n,e)=>{switch(typeof e){case"string":ln(n,119),or(n,e);break;case"number":Gb(e)&&Lc(e)<=qb?(ln(n,125),Yh(n,e)):h_(e)?(ln(n,124),c_(n,e)):(ln(n,123),d_(n,e));break;case"bigint":ln(n,122),f_(n,e);break;case"object":if(e===null)ln(n,126);else if(Qb(e)){ln(n,117),rt(n,e.length);for(let r=0;r<e.length;r++)Eo(n,e[r])}else if(e instanceof Uint8Array)ln(n,116),pn(n,e);else{ln(n,118);const r=Object.keys(e);rt(n,r.length);for(let o=0;o<r.length;o++){const l=r[o];or(n,l),Eo(n,e[l])}}break;case"boolean":ln(n,e?120:121);break;default:ln(n,127)}};class Cy extends kl{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&rt(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const Iy=n=>{n.count>0&&(Yh(n.encoder,n.count===1?n.s:-n.s),n.count>1&&rt(n.encoder,n.count-2))};class Mc{constructor(){this.encoder=new kl,this.s=0,this.count=0}write(e){this.s===e?this.count++:(Iy(this),this.count=1,this.s=e)}toUint8Array(){return Iy(this),Hn(this.encoder)}}const Oy=n=>{if(n.count>0){const e=n.diff*2+(n.count===1?0:1);Yh(n.encoder,e),n.count>1&&rt(n.encoder,n.count-2)}};class Xf{constructor(){this.encoder=new kl,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(Oy(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return Oy(this),Hn(this.encoder)}}class p_{constructor(){this.sarr=[],this.s="",this.lensE=new Mc}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new kl;return this.sarr.push(this.s),this.s="",or(e,this.sarr.join("")),tu(e,this.lensE.toUint8Array()),Hn(e)}}const To=n=>new Error(n),Yr=()=>{throw To("Method unimplemented")},Qr=()=>{throw To("Unexpected case")},sv=To("Unexpected end of array"),lv=To("Integer out of Range");class Sl{constructor(e){this.arr=e,this.pos=0}}const nu=n=>new Sl(n),av=n=>n.pos!==n.arr.length,m_=(n,e)=>{const r=new Uint8Array(n.arr.buffer,n.pos+n.arr.byteOffset,e);return n.pos+=e,r},mn=n=>m_(n,Ct(n)),hl=n=>n.arr[n.pos++],Ct=n=>{let e=0,r=1;const o=n.arr.length;for(;n.pos<o;){const l=n.arr[n.pos++];if(e=e+(l&fs)*r,r*=128,l<qn)return e;if(e>ov)throw lv}throw sv},Qh=n=>{let e=n.arr[n.pos++],r=e&vh,o=64;const l=(e&Ni)>0?-1:1;if((e&qn)===0)return l*r;const a=n.arr.length;for(;n.pos<a;){if(e=n.arr[n.pos++],r=r+(e&fs)*o,o*=128,e<qn)return l*r;if(r>ov)throw lv}throw sv},y_=n=>{let e=Ct(n);if(e===0)return"";{let r=String.fromCodePoint(hl(n));if(--e<100)for(;e--;)r+=String.fromCodePoint(hl(n));else for(;e>0;){const o=e<1e4?e:1e4,l=n.arr.subarray(n.pos,n.pos+o);n.pos+=o,r+=String.fromCodePoint.apply(null,l),e-=o}return decodeURIComponent(escape(r))}},g_=n=>Ca.decode(mn(n)),sr=Ca?g_:y_,fd=(n,e)=>{const r=new DataView(n.arr.buffer,n.arr.byteOffset+n.pos,e);return n.pos+=e,r},v_=n=>fd(n,4).getFloat32(0,!1),w_=n=>fd(n,8).getFloat64(0,!1),b_=n=>fd(n,8).getBigInt64(0,!1),jy=n=>fd(n,8).getBigUint64(0,!1),__=[n=>{},n=>null,Qh,v_,w_,b_,n=>!1,n=>!0,sr,n=>{const e=Ct(n),r={};for(let o=0;o<e;o++){const l=sr(n);r[l]=Co(n)}return r},n=>{const e=Ct(n),r=[];for(let o=0;o<e;o++)r.push(Co(n));return r},mn],Co=n=>__[127-hl(n)](n);class Ty extends Sl{constructor(e,r){super(e),this.reader=r,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),av(this)?this.count=Ct(this)+1:this.count=-1),this.count--,this.s}}class Uc extends Sl{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=Qh(this);const e=iv(this.s);this.count=1,e&&(this.s=-this.s,this.count=Ct(this)+2)}return this.count--,this.s}}class Zf extends Sl{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=Qh(this),r=e&1;this.diff=Di(e/2),this.count=1,r&&(this.count=Ct(this)+2)}return this.s+=this.diff,this.count--,this.s}}class k_{constructor(e){this.decoder=new Uc(e),this.str=sr(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),r=this.str.slice(this.spos,e);return this.spos=e,r}}var _h=function(n,e){return _h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},_h(n,e)};function Ri(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");_h(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function x_(n,e,r,o){function l(a){return a instanceof r?a:new r(function(d){d(a)})}return new(r||(r=Promise))(function(a,d){function h(_){try{m(o.next(_))}catch(b){d(b)}}function y(_){try{m(o.throw(_))}catch(b){d(b)}}function m(_){_.done?a(_.value):l(_.value).then(h,y)}m((o=o.apply(n,e||[])).next())})}function uv(n,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},o,l,a,d=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return d.next=h(0),d.throw=h(1),d.return=h(2),typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function h(m){return function(_){return y([m,_])}}function y(m){if(o)throw new TypeError("Generator is already executing.");for(;d&&(d=0,m[0]&&(r=0)),r;)try{if(o=1,l&&(a=m[0]&2?l.return:m[0]?l.throw||((a=l.return)&&a.call(l),0):l.next)&&!(a=a.call(l,m[1])).done)return a;switch(l=0,a&&(m=[m[0]&2,a.value]),m[0]){case 0:case 1:a=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,l=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!a||m[1]>a[0]&&m[1]<a[3])){r.label=m[1];break}if(m[0]===6&&r.label<a[1]){r.label=a[1],a=m;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(m);break}a[2]&&r.ops.pop(),r.trys.pop();continue}m=e.call(n,r)}catch(_){m=[6,_],l=0}finally{o=a=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}function pl(n){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&n[e],o=0;if(r)return r.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ms(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var o=r.call(n),l,a=[],d;try{for(;(e===void 0||e-- >0)&&!(l=o.next()).done;)a.push(l.value)}catch(h){d={error:h}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(d)throw d.error}}return a}function ml(n,e,r){if(r||arguments.length===2)for(var o=0,l=e.length,a;o<l;o++)(a||!(o in e))&&(a||(a=Array.prototype.slice.call(e,0,o)),a[o]=e[o]);return n.concat(a||Array.prototype.slice.call(e))}function ul(n){return this instanceof ul?(this.v=n,this):new ul(n)}function S_(n,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=r.apply(n,e||[]),l,a=[];return l=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",d),l[Symbol.asyncIterator]=function(){return this},l;function d(C){return function(j){return Promise.resolve(j).then(C,b)}}function h(C,j){o[C]&&(l[C]=function(T){return new Promise(function(W,q){a.push([C,T,W,q])>1||y(C,T)})},j&&(l[C]=j(l[C])))}function y(C,j){try{m(o[C](j))}catch(T){x(a[0][3],T)}}function m(C){C.value instanceof ul?Promise.resolve(C.value.v).then(_,b):x(a[0][2],C)}function _(C){y("next",C)}function b(C){y("throw",C)}function x(C,j){C(j),a.shift(),a.length&&y(a[0][0],a[0][1])}}function E_(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],r;return e?e.call(n):(n=typeof pl=="function"?pl(n):n[Symbol.iterator](),r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r);function o(a){r[a]=n[a]&&function(d){return new Promise(function(h,y){d=n[a](d),l(h,y,d.done,d.value)})}}function l(a,d,h,y){Promise.resolve(y).then(function(m){a({value:m,done:h})},d)}}function xt(n){return typeof n=="function"}function Jh(n){var e=function(o){Error.call(o),o.stack=new Error().stack},r=n(e);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var eh=Jh(function(n){return function(r){n(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(o,l){return l+1+") "+o.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function Vc(n,e){if(n){var r=n.indexOf(e);0<=r&&n.splice(r,1)}}var El=(function(){function n(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return n.prototype.unsubscribe=function(){var e,r,o,l,a;if(!this.closed){this.closed=!0;var d=this._parentage;if(d)if(this._parentage=null,Array.isArray(d))try{for(var h=pl(d),y=h.next();!y.done;y=h.next()){var m=y.value;m.remove(this)}}catch(T){e={error:T}}finally{try{y&&!y.done&&(r=h.return)&&r.call(h)}finally{if(e)throw e.error}}else d.remove(this);var _=this.initialTeardown;if(xt(_))try{_()}catch(T){a=T instanceof eh?T.errors:[T]}var b=this._finalizers;if(b){this._finalizers=null;try{for(var x=pl(b),C=x.next();!C.done;C=x.next()){var j=C.value;try{Py(j)}catch(T){a=a??[],T instanceof eh?a=ml(ml([],ms(a)),ms(T.errors)):a.push(T)}}}catch(T){o={error:T}}finally{try{C&&!C.done&&(l=x.return)&&l.call(x)}finally{if(o)throw o.error}}}if(a)throw new eh(a)}},n.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)Py(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(e)}},n.prototype._hasParent=function(e){var r=this._parentage;return r===e||Array.isArray(r)&&r.includes(e)},n.prototype._addParent=function(e){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(e),r):r?[r,e]:e},n.prototype._removeParent=function(e){var r=this._parentage;r===e?this._parentage=null:Array.isArray(r)&&Vc(r,e)},n.prototype.remove=function(e){var r=this._finalizers;r&&Vc(r,e),e instanceof n&&e._removeParent(this)},n.EMPTY=(function(){var e=new n;return e.closed=!0,e})(),n})(),cv=El.EMPTY;function dv(n){return n instanceof El||n&&"closed"in n&&xt(n.remove)&&xt(n.add)&&xt(n.unsubscribe)}function Py(n){xt(n)?n():n.unsubscribe()}var C_={Promise:void 0},I_={setTimeout:function(n,e){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return setTimeout.apply(void 0,ml([n,e],ms(r)))},clearTimeout:function(n){return clearTimeout(n)},delegate:void 0};function fv(n){I_.setTimeout(function(){throw n})}function Ny(){}function zc(n){n()}var Xh=(function(n){Ri(e,n);function e(r){var o=n.call(this)||this;return o.isStopped=!1,r?(o.destination=r,dv(r)&&r.add(o)):o.destination=T_,o}return e.create=function(r,o,l){return new yl(r,o,l)},e.prototype.next=function(r){this.isStopped||this._next(r)},e.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(r){this.destination.next(r)},e.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e})(El),O_=(function(){function n(e){this.partialObserver=e}return n.prototype.next=function(e){var r=this.partialObserver;if(r.next)try{r.next(e)}catch(o){kc(o)}},n.prototype.error=function(e){var r=this.partialObserver;if(r.error)try{r.error(e)}catch(o){kc(o)}else kc(e)},n.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(r){kc(r)}},n})(),yl=(function(n){Ri(e,n);function e(r,o,l){var a=n.call(this)||this,d;return xt(r)||!r?d={next:r??void 0,error:o??void 0,complete:l??void 0}:d=r,a.destination=new O_(d),a}return e})(Xh);function kc(n){fv(n)}function j_(n){throw n}var T_={closed:!0,next:Ny,error:j_,complete:Ny},Zh=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();function Cl(n){return n}function P_(n){return n.length===0?Cl:n.length===1?n[0]:function(r){return n.reduce(function(o,l){return l(o)},r)}}var Xt=(function(){function n(e){e&&(this._subscribe=e)}return n.prototype.lift=function(e){var r=new n;return r.source=this,r.operator=e,r},n.prototype.subscribe=function(e,r,o){var l=this,a=A_(e)?e:new yl(e,r,o);return zc(function(){var d=l,h=d.operator,y=d.source;a.add(h?h.call(a,y):y?l._subscribe(a):l._trySubscribe(a))}),a},n.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){e.error(r)}},n.prototype.forEach=function(e,r){var o=this;return r=Ay(r),new r(function(l,a){var d=new yl({next:function(h){try{e(h)}catch(y){a(y),d.unsubscribe()}},error:a,complete:l});o.subscribe(d)})},n.prototype._subscribe=function(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)},n.prototype[Zh]=function(){return this},n.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return P_(e)(this)},n.prototype.toPromise=function(e){var r=this;return e=Ay(e),new e(function(o,l){var a;r.subscribe(function(d){return a=d},function(d){return l(d)},function(){return o(a)})})},n.create=function(e){return new n(e)},n})();function Ay(n){var e;return(e=n??C_.Promise)!==null&&e!==void 0?e:Promise}function N_(n){return n&&xt(n.next)&&xt(n.error)&&xt(n.complete)}function A_(n){return n&&n instanceof Xh||N_(n)&&dv(n)}function D_(n){return xt(n==null?void 0:n.lift)}function Qn(n){return function(e){if(D_(e))return e.lift(function(r){try{return n(r,this)}catch(o){this.error(o)}});throw new TypeError("Unable to lift unknown Observable type")}}function Yn(n,e,r,o,l){return new R_(n,e,r,o,l)}var R_=(function(n){Ri(e,n);function e(r,o,l,a,d,h){var y=n.call(this,r)||this;return y.onFinalize=d,y.shouldUnsubscribe=h,y._next=o?function(m){try{o(m)}catch(_){r.error(_)}}:n.prototype._next,y._error=a?function(m){try{a(m)}catch(_){r.error(_)}finally{this.unsubscribe()}}:n.prototype._error,y._complete=l?function(){try{l()}catch(m){r.error(m)}finally{this.unsubscribe()}}:n.prototype._complete,y}return e.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var o=this.closed;n.prototype.unsubscribe.call(this),!o&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},e})(Xh),L_=Jh(function(n){return function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),ys=(function(n){Ri(e,n);function e(){var r=n.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return e.prototype.lift=function(r){var o=new Dy(this,this);return o.operator=r,o},e.prototype._throwIfClosed=function(){if(this.closed)throw new L_},e.prototype.next=function(r){var o=this;zc(function(){var l,a;if(o._throwIfClosed(),!o.isStopped){o.currentObservers||(o.currentObservers=Array.from(o.observers));try{for(var d=pl(o.currentObservers),h=d.next();!h.done;h=d.next()){var y=h.value;y.next(r)}}catch(m){l={error:m}}finally{try{h&&!h.done&&(a=d.return)&&a.call(d)}finally{if(l)throw l.error}}}})},e.prototype.error=function(r){var o=this;zc(function(){if(o._throwIfClosed(),!o.isStopped){o.hasError=o.isStopped=!0,o.thrownError=r;for(var l=o.observers;l.length;)l.shift().error(r)}})},e.prototype.complete=function(){var r=this;zc(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var o=r.observers;o.length;)o.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(r){return this._throwIfClosed(),n.prototype._trySubscribe.call(this,r)},e.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},e.prototype._innerSubscribe=function(r){var o=this,l=this,a=l.hasError,d=l.isStopped,h=l.observers;return a||d?cv:(this.currentObservers=null,h.push(r),new El(function(){o.currentObservers=null,Vc(h,r)}))},e.prototype._checkFinalizedStatuses=function(r){var o=this,l=o.hasError,a=o.thrownError,d=o.isStopped;l?r.error(a):d&&r.complete()},e.prototype.asObservable=function(){var r=new Xt;return r.source=this,r},e.create=function(r,o){return new Dy(r,o)},e})(Xt),Dy=(function(n){Ri(e,n);function e(r,o){var l=n.call(this)||this;return l.destination=r,l.source=o,l}return e.prototype.next=function(r){var o,l;(l=(o=this.destination)===null||o===void 0?void 0:o.next)===null||l===void 0||l.call(o,r)},e.prototype.error=function(r){var o,l;(l=(o=this.destination)===null||o===void 0?void 0:o.error)===null||l===void 0||l.call(o,r)},e.prototype.complete=function(){var r,o;(o=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||o===void 0||o.call(r)},e.prototype._subscribe=function(r){var o,l;return(l=(o=this.source)===null||o===void 0?void 0:o.subscribe(r))!==null&&l!==void 0?l:cv},e})(ys),Cr=(function(n){Ri(e,n);function e(r){var o=n.call(this)||this;return o._value=r,o}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(r){var o=n.prototype._subscribe.call(this,r);return!o.closed&&r.next(this._value),o},e.prototype.getValue=function(){var r=this,o=r.hasError,l=r.thrownError,a=r._value;if(o)throw l;return this._throwIfClosed(),a},e.prototype.next=function(r){n.prototype.next.call(this,this._value=r)},e})(ys),M_={now:function(){return Date.now()}},U_=(function(n){Ri(e,n);function e(r,o){return n.call(this)||this}return e.prototype.schedule=function(r,o){return this},e})(El),Ry={setInterval:function(n,e){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return setInterval.apply(void 0,ml([n,e],ms(r)))},clearInterval:function(n){return clearInterval(n)},delegate:void 0},z_=(function(n){Ri(e,n);function e(r,o){var l=n.call(this,r,o)||this;return l.scheduler=r,l.work=o,l.pending=!1,l}return e.prototype.schedule=function(r,o){var l;if(o===void 0&&(o=0),this.closed)return this;this.state=r;var a=this.id,d=this.scheduler;return a!=null&&(this.id=this.recycleAsyncId(d,a,o)),this.pending=!0,this.delay=o,this.id=(l=this.id)!==null&&l!==void 0?l:this.requestAsyncId(d,this.id,o),this},e.prototype.requestAsyncId=function(r,o,l){return l===void 0&&(l=0),Ry.setInterval(r.flush.bind(r,this),l)},e.prototype.recycleAsyncId=function(r,o,l){if(l===void 0&&(l=0),l!=null&&this.delay===l&&this.pending===!1)return o;o!=null&&Ry.clearInterval(o)},e.prototype.execute=function(r,o){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var l=this._execute(r,o);if(l)return l;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(r,o){var l=!1,a;try{this.work(r)}catch(d){l=!0,a=d||new Error("Scheduled action threw falsy error")}if(l)return this.unsubscribe(),a},e.prototype.unsubscribe=function(){if(!this.closed){var r=this,o=r.id,l=r.scheduler,a=l.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Vc(a,this),o!=null&&(this.id=this.recycleAsyncId(l,o,null)),this.delay=null,n.prototype.unsubscribe.call(this)}},e})(U_),Ly=(function(){function n(e,r){r===void 0&&(r=n.now),this.schedulerActionCtor=e,this.now=r}return n.prototype.schedule=function(e,r,o){return r===void 0&&(r=0),new this.schedulerActionCtor(this,e).schedule(o,r)},n.now=M_.now,n})(),F_=(function(n){Ri(e,n);function e(r,o){o===void 0&&(o=Ly.now);var l=n.call(this,r,o)||this;return l.actions=[],l._active=!1,l}return e.prototype.flush=function(r){var o=this.actions;if(this._active){o.push(r);return}var l;this._active=!0;do if(l=r.execute(r.state,r.delay))break;while(r=o.shift());if(this._active=!1,l){for(;r=o.shift();)r.unsubscribe();throw l}},e})(Ly),ep=new F_(z_),B_=ep,hv=new Xt(function(n){return n.complete()});function pv(n){return n&&xt(n.schedule)}function tp(n){return n[n.length-1]}function $_(n){return xt(tp(n))?n.pop():void 0}function ru(n){return pv(tp(n))?n.pop():void 0}function K_(n,e){return typeof tp(n)=="number"?n.pop():e}var np=(function(n){return n&&typeof n.length=="number"&&typeof n!="function"});function mv(n){return xt(n==null?void 0:n.then)}function yv(n){return xt(n[Zh])}function gv(n){return Symbol.asyncIterator&&xt(n==null?void 0:n[Symbol.asyncIterator])}function vv(n){return new TypeError("You provided "+(n!==null&&typeof n=="object"?"an invalid object":"'"+n+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function V_(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var wv=V_();function bv(n){return xt(n==null?void 0:n[wv])}function _v(n){return S_(this,arguments,function(){var r,o,l,a;return uv(this,function(d){switch(d.label){case 0:r=n.getReader(),d.label=1;case 1:d.trys.push([1,,9,10]),d.label=2;case 2:return[4,ul(r.read())];case 3:return o=d.sent(),l=o.value,a=o.done,a?[4,ul(void 0)]:[3,5];case 4:return[2,d.sent()];case 5:return[4,ul(l)];case 6:return[4,d.sent()];case 7:return d.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}function kv(n){return xt(n==null?void 0:n.getReader)}function ur(n){if(n instanceof Xt)return n;if(n!=null){if(yv(n))return W_(n);if(np(n))return H_(n);if(mv(n))return q_(n);if(gv(n))return xv(n);if(bv(n))return G_(n);if(kv(n))return Y_(n)}throw vv(n)}function W_(n){return new Xt(function(e){var r=n[Zh]();if(xt(r.subscribe))return r.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function H_(n){return new Xt(function(e){for(var r=0;r<n.length&&!e.closed;r++)e.next(n[r]);e.complete()})}function q_(n){return new Xt(function(e){n.then(function(r){e.closed||(e.next(r),e.complete())},function(r){return e.error(r)}).then(null,fv)})}function G_(n){return new Xt(function(e){var r,o;try{for(var l=pl(n),a=l.next();!a.done;a=l.next()){var d=a.value;if(e.next(d),e.closed)return}}catch(h){r={error:h}}finally{try{a&&!a.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}e.complete()})}function xv(n){return new Xt(function(e){Q_(n,e).catch(function(r){return e.error(r)})})}function Y_(n){return xv(_v(n))}function Q_(n,e){var r,o,l,a;return x_(this,void 0,void 0,function(){var d,h;return uv(this,function(y){switch(y.label){case 0:y.trys.push([0,5,6,11]),r=E_(n),y.label=1;case 1:return[4,r.next()];case 2:if(o=y.sent(),!!o.done)return[3,4];if(d=o.value,e.next(d),e.closed)return[2];y.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return h=y.sent(),l={error:h},[3,11];case 6:return y.trys.push([6,,9,10]),o&&!o.done&&(a=r.return)?[4,a.call(r)]:[3,8];case 7:y.sent(),y.label=8;case 8:return[3,10];case 9:if(l)throw l.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function Io(n,e,r,o,l){o===void 0&&(o=0),l===void 0&&(l=!1);var a=e.schedule(function(){r(),l?n.add(this.schedule(null,o)):this.unsubscribe()},o);if(n.add(a),!l)return a}function Sv(n,e){return e===void 0&&(e=0),Qn(function(r,o){r.subscribe(Yn(o,function(l){return Io(o,n,function(){return o.next(l)},e)},function(){return Io(o,n,function(){return o.complete()},e)},function(l){return Io(o,n,function(){return o.error(l)},e)}))})}function Ev(n,e){return e===void 0&&(e=0),Qn(function(r,o){o.add(n.schedule(function(){return r.subscribe(o)},e))})}function J_(n,e){return ur(n).pipe(Ev(e),Sv(e))}function X_(n,e){return ur(n).pipe(Ev(e),Sv(e))}function Z_(n,e){return new Xt(function(r){var o=0;return e.schedule(function(){o===n.length?r.complete():(r.next(n[o++]),r.closed||this.schedule())})})}function ek(n,e){return new Xt(function(r){var o;return Io(r,e,function(){o=n[wv](),Io(r,e,function(){var l,a,d;try{l=o.next(),a=l.value,d=l.done}catch(h){r.error(h);return}d?r.complete():r.next(a)},0,!0)}),function(){return xt(o==null?void 0:o.return)&&o.return()}})}function Cv(n,e){if(!n)throw new Error("Iterable cannot be null");return new Xt(function(r){Io(r,e,function(){var o=n[Symbol.asyncIterator]();Io(r,e,function(){o.next().then(function(l){l.done?r.complete():r.next(l.value)})},0,!0)})})}function tk(n,e){return Cv(_v(n),e)}function nk(n,e){if(n!=null){if(yv(n))return J_(n,e);if(np(n))return Z_(n,e);if(mv(n))return X_(n,e);if(gv(n))return Cv(n,e);if(bv(n))return ek(n,e);if(kv(n))return tk(n,e)}throw vv(n)}function Gn(n,e){return e?nk(n,e):ur(n)}function Ai(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=ru(n);return Gn(n,r)}function My(n,e){var r=xt(n)?n:function(){return n},o=function(l){return l.error(r())};return new Xt(o)}var rk=Jh(function(n){return function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}});function cs(n,e){return new Promise(function(r,o){var l=new yl({next:function(a){r(a),l.unsubscribe()},error:o,complete:function(){o(new rk)}});n.subscribe(l)})}function ik(n){return n instanceof Date&&!isNaN(n)}function Wn(n,e){return Qn(function(r,o){var l=0;r.subscribe(Yn(o,function(a){o.next(n.call(e,a,l++))}))})}var ok=Array.isArray;function sk(n,e){return ok(e)?n.apply(void 0,ml([],ms(e))):n(e)}function Iv(n){return Wn(function(e){return sk(n,e)})}var lk=Array.isArray,ak=Object.getPrototypeOf,uk=Object.prototype,ck=Object.keys;function dk(n){if(n.length===1){var e=n[0];if(lk(e))return{args:e,keys:null};if(fk(e)){var r=ck(e);return{args:r.map(function(o){return e[o]}),keys:r}}}return{args:n,keys:null}}function fk(n){return n&&typeof n=="object"&&ak(n)===uk}function hk(n,e){return n.reduce(function(r,o,l){return r[o]=e[l],r},{})}function La(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=ru(n),o=$_(n),l=dk(n),a=l.args,d=l.keys;if(a.length===0)return Gn([],r);var h=new Xt(pk(a,r,d?function(y){return hk(d,y)}:Cl));return o?h.pipe(Iv(o)):h}function pk(n,e,r){return r===void 0&&(r=Cl),function(o){Uy(e,function(){for(var l=n.length,a=new Array(l),d=l,h=l,y=function(_){Uy(e,function(){var b=Gn(n[_],e),x=!1;b.subscribe(Yn(o,function(C){a[_]=C,x||(x=!0,h--),h||o.next(r(a.slice()))},function(){--d||o.complete()}))},o)},m=0;m<l;m++)y(m)},o)}}function Uy(n,e,r){n?Io(r,n,e):e()}function mk(n,e,r,o,l,a,d,h){var y=[],m=0,_=0,b=!1,x=function(){b&&!y.length&&!m&&e.complete()},C=function(T){return m<o?j(T):y.push(T)},j=function(T){m++;var W=!1;ur(r(T,_++)).subscribe(Yn(e,function(q){e.next(q)},function(){W=!0},void 0,function(){if(W)try{m--;for(var q=function(){var X=y.shift();d||j(X)};y.length&&m<o;)q();x()}catch(X){e.error(X)}}))};return n.subscribe(Yn(e,C,function(){b=!0,x()})),function(){}}function iu(n,e,r){return r===void 0&&(r=1/0),xt(e)?iu(function(o,l){return Wn(function(a,d){return e(o,a,l,d)})(ur(n(o,l)))},r):(typeof e=="number"&&(r=e),Qn(function(o,l){return mk(o,l,n,r)}))}function Ov(n){return n===void 0&&(n=1/0),iu(Cl,n)}function yk(){return Ov(1)}function zy(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return yk()(Gn(n,ru(n)))}var gk=["addListener","removeListener"],vk=["addEventListener","removeEventListener"],wk=["on","off"];function Gr(n,e,r,o){if(xt(r)&&(o=r,r=void 0),o)return Gr(n,e,r).pipe(Iv(o));var l=ms(kk(n)?vk.map(function(h){return function(y){return n[h](e,y,r)}}):bk(n)?gk.map(Fy(n,e)):_k(n)?wk.map(Fy(n,e)):[],2),a=l[0],d=l[1];if(!a&&np(n))return iu(function(h){return Gr(h,e,r)})(ur(n));if(!a)throw new TypeError("Invalid event target");return new Xt(function(h){var y=function(){for(var m=[],_=0;_<arguments.length;_++)m[_]=arguments[_];return h.next(1<m.length?m:m[0])};return a(y),function(){return d(y)}})}function Fy(n,e){return function(r){return function(o){return n[r](e,o)}}}function bk(n){return xt(n.addListener)&&xt(n.removeListener)}function _k(n){return xt(n.on)&&xt(n.off)}function kk(n){return xt(n.addEventListener)&&xt(n.removeEventListener)}function jv(n,e,r){n===void 0&&(n=0),r===void 0&&(r=B_);var o=-1;return e!=null&&(pv(e)?r=e:o=e),new Xt(function(l){var a=ik(n)?+n-r.now():n;a<0&&(a=0);var d=0;return r.schedule(function(){l.closed||(l.next(d++),0<=o?this.schedule(void 0,o):l.complete())},a)})}function hd(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=ru(n),o=K_(n,1/0),l=n;return l.length?l.length===1?ur(l[0]):Ov(o)(Gn(l,r)):hv}function ir(n,e){return Qn(function(r,o){var l=0;r.subscribe(Yn(o,function(a){return n.call(e,a,l++)&&o.next(a)}))})}function kh(n){return Qn(function(e,r){var o=null,l=!1,a;o=e.subscribe(Yn(r,void 0,void 0,function(d){a=ur(n(d,kh(n)(e))),o?(o.unsubscribe(),o=null,a.subscribe(r)):l=!0})),l&&(o.unsubscribe(),o=null,a.subscribe(r))})}function By(n,e){return e===void 0&&(e=ep),Qn(function(r,o){var l=null,a=null,d=null,h=function(){if(l){l.unsubscribe(),l=null;var m=a;a=null,o.next(m)}};function y(){var m=d+n,_=e.now();if(_<m){l=this.schedule(void 0,m-_),o.add(l);return}h()}r.subscribe(Yn(o,function(m){a=m,d=e.now(),l||(l=e.schedule(y,n),o.add(l))},function(){h(),o.complete()},void 0,function(){a=l=null}))})}function sl(n){return n<=0?function(){return hv}:Qn(function(e,r){var o=0;e.subscribe(Yn(r,function(l){++o<=n&&(r.next(l),n<=o&&r.complete())}))})}function xk(n){return Wn(function(){return n})}function Sk(n,e){return iu(function(r,o){return ur(n(r,o)).pipe(sl(1),xk(r))})}function Tv(n,e){e===void 0&&(e=ep);var r=jv(n,e);return Sk(function(){return r})}function Pv(n,e){return e===void 0&&(e=Cl),n=n??Ek,Qn(function(r,o){var l,a=!0;r.subscribe(Yn(o,function(d){var h=e(d);(a||!n(l,h))&&(a=!1,l=h,o.next(d))}))})}function Ek(n,e){return n===e}function Ck(n){n===void 0&&(n={});var e=n.connector,r=e===void 0?function(){return new ys}:e,o=n.resetOnError,l=o===void 0?!0:o,a=n.resetOnComplete,d=a===void 0?!0:a,h=n.resetOnRefCountZero,y=h===void 0?!0:h;return function(m){var _,b,x,C=0,j=!1,T=!1,W=function(){b==null||b.unsubscribe(),b=void 0},q=function(){W(),_=x=void 0,j=T=!1},X=function(){var ce=_;q(),ce==null||ce.unsubscribe()};return Qn(function(ce,ie){C++,!T&&!j&&W();var ee=x=x??r();ie.add(function(){C--,C===0&&!T&&!j&&(b=th(X,y))}),ee.subscribe(ie),!_&&C>0&&(_=new yl({next:function(ve){return ee.next(ve)},error:function(ve){T=!0,W(),b=th(q,l,ve),ee.error(ve)},complete:function(){j=!0,W(),b=th(q,d),ee.complete()}}),ur(ce).subscribe(_))})(m)}}function th(n,e){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];if(e===!0){n();return}if(e!==!1){var l=new yl({next:function(){l.unsubscribe(),n()}});return ur(e.apply(void 0,ml([],ms(r)))).subscribe(l)}}function $y(n){return ir(function(e,r){return n<=r})}function Nv(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=ru(n);return Qn(function(o,l){(r?zy(n,o,r):zy(n,o)).subscribe(l)})}function Sn(n,e){return Qn(function(r,o){var l=null,a=0,d=!1,h=function(){return d&&!l&&o.complete()};r.subscribe(Yn(o,function(y){l==null||l.unsubscribe();var m=0,_=a++;ur(n(y,_)).subscribe(l=Yn(o,function(b){return o.next(e?e(y,b,_,m++):b)},function(){l=null,h()}))},function(){d=!0,h()}))})}function xh(n,e,r){var o=xt(n)||e||r?{next:n,error:e,complete:r}:n;return o?Qn(function(l,a){var d;(d=o.subscribe)===null||d===void 0||d.call(o);var h=!0;l.subscribe(Yn(a,function(y){var m;(m=o.next)===null||m===void 0||m.call(o,y),a.next(y)},function(){var y;h=!1,(y=o.complete)===null||y===void 0||y.call(o),a.complete()},function(y){var m;h=!1,(m=o.error)===null||m===void 0||m.call(o,y),a.error(y)},function(){var y,m;h&&((y=o.unsubscribe)===null||y===void 0||y.call(o)),(m=o.finalize)===null||m===void 0||m.call(o)}))}):Cl}const zn=()=>new Map,Sh=n=>{const e=zn();return n.forEach((r,o)=>{e.set(o,r)}),e},Li=(n,e,r)=>{let o=n.get(e);return o===void 0&&n.set(e,o=r()),o},Ik=(n,e)=>{const r=[];for(const[o,l]of n)r.push(e(l,o));return r},Ok=(n,e)=>{for(const[r,o]of n)if(e(o,r))return!0;return!1};class jk{constructor(){this._observers=zn()}on(e,r){return Li(this._observers,e,ps).add(r),r}once(e,r){const o=(...l)=>{this.off(e,o),r(...l)};this.on(e,o)}off(e,r){const o=this._observers.get(e);o!==void 0&&(o.delete(r),o.size===0&&this._observers.delete(e))}emit(e,r){return jo((this._observers.get(e)||zn()).values()).forEach(o=>o(...r))}destroy(){this._observers=zn()}}class Tk{constructor(){this._observers=zn()}on(e,r){Li(this._observers,e,ps).add(r)}once(e,r){const o=(...l)=>{this.off(e,o),r(...l)};this.on(e,o)}off(e,r){const o=this._observers.get(e);o!==void 0&&(o.delete(r),o.size===0&&this._observers.delete(e))}emit(e,r){return jo((this._observers.get(e)||zn()).values()).forEach(o=>o(...r))}destroy(){this._observers=zn()}}const Pk=crypto.getRandomValues.bind(crypto),Av=()=>Pk(new Uint32Array(1))[0],Nk="10000000-1000-4000-8000"+-1e11,Ak=()=>Nk.replace(/[018]/g,n=>(n^Av()&15>>n/4).toString(16)),Wc=Date.now,Ky=n=>new Promise(n);Promise.all.bind(Promise);const Vy=n=>n===void 0?null:n;class Dk{constructor(){this.map=new Map}setItem(e,r){this.map.set(e,r)}getItem(e){return this.map.get(e)}}let Dv=new Dk,Rk=!0;try{typeof localStorage<"u"&&localStorage&&(Dv=localStorage,Rk=!1)}catch{}const Lk=Dv,Mk=Object.assign,Rv=Object.keys,Uk=(n,e)=>{for(const r in n)e(n[r],r)},Wy=n=>Rv(n).length,Hy=n=>Rv(n).length,zk=n=>{for(const e in n)return!1;return!0},Fk=(n,e)=>{for(const r in n)if(!e(n[r],r))return!1;return!0},Lv=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),Bk=(n,e)=>n===e||Hy(n)===Hy(e)&&Fk(n,(r,o)=>(r!==void 0||Lv(e,o))&&e[o]===r),$k=Object.freeze,Mv=n=>{for(const e in n){const r=n[e];(typeof r=="object"||typeof r=="function")&&Mv(n[e])}return $k(n)},qy=Symbol("Equality"),rp=(n,e,r=0)=>{try{for(;r<n.length;r++)n[r](...e)}finally{r<n.length&&rp(n,e,r+1)}},Ia=(n,e)=>{if(n===e)return!0;if(n==null||e==null||n.constructor!==e.constructor)return!1;if(n[qy]!=null)return n[qy](e);switch(n.constructor){case ArrayBuffer:n=new Uint8Array(n),e=new Uint8Array(e);case Uint8Array:{if(n.byteLength!==e.byteLength)return!1;for(let r=0;r<n.length;r++)if(n[r]!==e[r])return!1;break}case Set:{if(n.size!==e.size)return!1;for(const r of n)if(!e.has(r))return!1;break}case Map:{if(n.size!==e.size)return!1;for(const r of n.keys())if(!e.has(r)||!Ia(n.get(r),e.get(r)))return!1;break}case Object:if(Wy(n)!==Wy(e))return!1;for(const r in n)if(!Lv(n,r)||!Ia(n[r],e[r]))return!1;break;case Array:if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++)if(!Ia(n[r],e[r]))return!1;break;default:return!1}return!0},Kk=(n,e)=>e.includes(n);var Uv={};const Ma=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";let Wr;const Vk=()=>{if(Wr===void 0)if(Ma){Wr=zn();const n=process.argv;let e=null;for(let r=0;r<n.length;r++){const o=n[r];o[0]==="-"?(e!==null&&Wr.set(e,""),e=o):e!==null&&(Wr.set(e,o),e=null)}e!==null&&Wr.set(e,"")}else typeof location=="object"?(Wr=zn(),(location.search||"?").slice(1).split("&").forEach(n=>{if(n.length!==0){const[e,r]=n.split("=");Wr.set(`--${xy(e,"-")}`,r),Wr.set(`-${xy(e,"-")}`,r)}})):Wr=zn();return Wr},Eh=n=>Vk().has(n),Hc=n=>Vy(Ma?Uv[n.toUpperCase().replaceAll("-","_")]:Lk.getItem(n)),zv=n=>Eh("--"+n)||Hc(n)!==null;zv("production");const Wk=Ma&&Kk(Uv.FORCE_COLOR,["true","1","2"]),Hk=Wk||!Eh("--no-colors")&&!zv("no-color")&&(!Ma||process.stdout.isTTY)&&(!Ma||Eh("--color")||Hc("COLORTERM")!==null||(Hc("TERM")||"").includes("color"));class qk{constructor(e,r){this.left=e,this.right=r}}const Ci=(n,e)=>new qk(n,e);typeof DOMParser<"u"&&new DOMParser;const Gk=n=>Ik(n,(e,r)=>`${r}:${e};`).join(""),Mi=Symbol,Fv=Mi(),Bv=Mi(),Yk=Mi(),Qk=Mi(),Jk=Mi(),$v=Mi(),Xk=Mi(),ip=Mi(),Zk=Mi(),e1=n=>{var l;n.length===1&&((l=n[0])==null?void 0:l.constructor)===Function&&(n=n[0]());const e=[],r=[];let o=0;for(;o<n.length;o++){const a=n[o];if(a===void 0)break;if(a.constructor===String||a.constructor===Number)e.push(a);else if(a.constructor===Object)break}for(o>0&&r.push(e.join(""));o<n.length;o++){const a=n[o];a instanceof Symbol||r.push(a)}return r},t1={[Fv]:Ci("font-weight","bold"),[Bv]:Ci("font-weight","normal"),[Yk]:Ci("color","blue"),[Jk]:Ci("color","green"),[Qk]:Ci("color","grey"),[$v]:Ci("color","red"),[Xk]:Ci("color","purple"),[ip]:Ci("color","orange"),[Zk]:Ci("color","black")},n1=n=>{var d;n.length===1&&((d=n[0])==null?void 0:d.constructor)===Function&&(n=n[0]());const e=[],r=[],o=zn();let l=[],a=0;for(;a<n.length;a++){const h=n[a],y=t1[h];if(y!==void 0)o.set(y.left,y.right);else{if(h===void 0)break;if(h.constructor===String||h.constructor===Number){const m=Gk(o);a>0||m.length>0?(e.push("%c"+h),r.push(m)):e.push(h)}else break}}for(a>0&&(l=r,l.unshift(e.join("")));a<n.length;a++){const h=n[a];h instanceof Symbol||l.push(h)}return l},Kv=Hk?n1:e1,r1=(...n)=>{console.log(...Kv(n)),Vv.forEach(e=>e.print(n))},i1=(...n)=>{console.warn(...Kv(n)),n.unshift(ip),Vv.forEach(e=>e.print(n))},Vv=ps(),Wv=n=>({[Symbol.iterator](){return this},next:n}),o1=(n,e)=>Wv(()=>{let r;do r=n.next();while(!r.done&&!e(r.value));return r}),nh=(n,e)=>Wv(()=>{const{done:r,value:o}=n.next();return{done:r,value:r?void 0:e(o)}});class Hv{constructor(e,r){this.clock=e,this.len=r}}class pd{constructor(){this.clients=new Map}}const qv=(n,e,r)=>e.clients.forEach((o,l)=>{const a=n.doc.store.clients.get(l);if(a!=null){const d=a[a.length-1],h=d.id.clock+d.length;for(let y=0,m=o[y];y<o.length&&m.clock<h;m=o[++y])n0(n,a,m.clock,m.len,r)}}),s1=(n,e)=>{let r=0,o=n.length-1;for(;r<=o;){const l=Di((r+o)/2),a=n[l],d=a.clock;if(d<=e){if(e<d+a.len)return l;r=l+1}else o=l-1}return null},Gv=(n,e)=>{const r=n.clients.get(e.client);return r!==void 0&&s1(r,e.clock)!==null},op=n=>{n.clients.forEach(e=>{e.sort((l,a)=>l.clock-a.clock);let r,o;for(r=1,o=1;r<e.length;r++){const l=e[o-1],a=e[r];l.clock+l.len>=a.clock?l.len=_l(l.len,a.clock+a.len-l.clock):(o<r&&(e[o]=a),o++)}e.length=o})},l1=n=>{const e=new pd;for(let r=0;r<n.length;r++)n[r].clients.forEach((o,l)=>{if(!e.clients.has(l)){const a=o.slice();for(let d=r+1;d<n.length;d++)Yb(a,n[d].clients.get(l)||[]);e.clients.set(l,a)}});return op(e),e},qc=(n,e,r,o)=>{Li(n.clients,e,()=>[]).push(new Hv(r,o))},sp=(n,e)=>{rt(n.restEncoder,e.clients.size),jo(e.clients.entries()).sort((r,o)=>o[0]-r[0]).forEach(([r,o])=>{n.resetDsCurVal(),rt(n.restEncoder,r);const l=o.length;rt(n.restEncoder,l);for(let a=0;a<l;a++){const d=o[a];n.writeDsClock(d.clock),n.writeDsLen(d.len)}})},a1=n=>{const e=new pd,r=Ct(n.restDecoder);for(let o=0;o<r;o++){n.resetDsCurVal();const l=Ct(n.restDecoder),a=Ct(n.restDecoder);if(a>0){const d=Li(e.clients,l,()=>[]);for(let h=0;h<a;h++)d.push(new Hv(n.readDsClock(),n.readDsLen()))}}return e},Gy=(n,e,r)=>{const o=new pd,l=Ct(n.restDecoder);for(let a=0;a<l;a++){n.resetDsCurVal();const d=Ct(n.restDecoder),h=Ct(n.restDecoder),y=r.clients.get(d)||[],m=an(r,d);for(let _=0;_<h;_++){const b=n.readDsClock(),x=b+n.readDsLen();if(b<m){m<x&&qc(o,d,m,x-m);let C=Jr(y,b),j=y[C];for(!j.deleted&&j.id.clock<b&&(y.splice(C+1,0,ed(e,j,b-j.id.clock)),C++);C<y.length&&(j=y[C++],j.id.clock<x);)j.deleted||(x<j.id.clock+j.length&&y.splice(C,0,ed(e,j,x-j.id.clock)),j.delete(e))}else qc(o,d,b,x-b)}}if(o.clients.size>0){const a=new md;return rt(a.restEncoder,0),sp(a,o),a.toUint8Array()}return null},Yv=Av;class Il extends jk{constructor({guid:e=Ak(),collectionid:r=null,gc:o=!0,gcFilter:l=()=>!0,meta:a=null,autoLoad:d=!1,shouldLoad:h=!0}={}){super(),this.gc=o,this.gcFilter=l,this.clientID=Yv(),this.guid=e,this.collectionid=r,this.share=new Map,this.store=new e0,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=h,this.autoLoad=d,this.meta=a,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=Ky(m=>{this.on("load",()=>{this.isLoaded=!0,m(this)})});const y=()=>Ky(m=>{const _=b=>{(b===void 0||b===!0)&&(this.off("sync",_),m())};this.on("sync",_)});this.on("sync",m=>{m===!1&&this.isSynced&&(this.whenSynced=y()),this.isSynced=m===void 0||m===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=y()}load(){const e=this._item;e!==null&&!this.shouldLoad&&Ot(e.parent.doc,r=>{r.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(jo(this.subdocs).map(e=>e.guid))}transact(e,r=null){return Ot(this,e,r)}get(e,r=yn){const o=Li(this.share,e,()=>{const a=new r;return a._integrate(this,null),a}),l=o.constructor;if(r!==yn&&l!==r)if(l===yn){const a=new r;a._map=o._map,o._map.forEach(d=>{for(;d!==null;d=d.left)d.parent=a}),a._start=o._start;for(let d=a._start;d!==null;d=d.right)d.parent=a;return a._length=o._length,this.share.set(e,a),a._integrate(this,null),a}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return o}getArray(e=""){return this.get(e,dl)}getText(e=""){return this.get(e,vl)}getMap(e=""){return this.get(e,gl)}getXmlElement(e=""){return this.get(e,wl)}getXmlFragment(e=""){return this.get(e,gs)}toJSON(){const e={};return this.share.forEach((r,o)=>{e[o]=r.toJSON()}),e}destroy(){this.isDestroyed=!0,jo(this.subdocs).forEach(r=>r.destroy());const e=this._item;if(e!==null){this._item=null;const r=e.content;r.doc=new Il({guid:this.guid,...r.opts,shouldLoad:!1}),r.doc._item=e,Ot(e.parent.doc,o=>{const l=r.doc;e.deleted||o.subdocsAdded.add(l),o.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class u1{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=Ct(this.restDecoder),this.dsCurrVal}readDsLen(){const e=Ct(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class Ua extends u1{constructor(e){super(e),this.keys=[],Ct(e),this.keyClockDecoder=new Zf(mn(e)),this.clientDecoder=new Uc(mn(e)),this.leftClockDecoder=new Zf(mn(e)),this.rightClockDecoder=new Zf(mn(e)),this.infoDecoder=new Ty(mn(e),hl),this.stringDecoder=new k_(mn(e)),this.parentInfoDecoder=new Ty(mn(e),hl),this.typeRefDecoder=new Uc(mn(e)),this.lenDecoder=new Uc(mn(e))}readLeftID(){return new cl(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new cl(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return Co(this.restDecoder)}readBuf(){return mn(this.restDecoder)}readJSON(){return Co(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const r=this.stringDecoder.read();return this.keys.push(r),r}}}class c1{constructor(){this.restEncoder=xl()}toUint8Array(){return Hn(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){rt(this.restEncoder,e)}writeDsLen(e){rt(this.restEncoder,e)}}class d1 extends c1{writeLeftID(e){rt(this.restEncoder,e.client),rt(this.restEncoder,e.clock)}writeRightID(e){rt(this.restEncoder,e.client),rt(this.restEncoder,e.clock)}writeClient(e){rt(this.restEncoder,e)}writeInfo(e){wh(this.restEncoder,e)}writeString(e){or(this.restEncoder,e)}writeParentInfo(e){rt(this.restEncoder,e?1:0)}writeTypeRef(e){rt(this.restEncoder,e)}writeLen(e){rt(this.restEncoder,e)}writeAny(e){Eo(this.restEncoder,e)}writeBuf(e){pn(this.restEncoder,e)}writeJSON(e){or(this.restEncoder,JSON.stringify(e))}writeKey(e){or(this.restEncoder,e)}}class Qv{constructor(){this.restEncoder=xl(),this.dsCurrVal=0}toUint8Array(){return Hn(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const r=e-this.dsCurrVal;this.dsCurrVal=e,rt(this.restEncoder,r)}writeDsLen(e){e===0&&Qr(),rt(this.restEncoder,e-1),this.dsCurrVal+=e}}class md extends Qv{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new Xf,this.clientEncoder=new Mc,this.leftClockEncoder=new Xf,this.rightClockEncoder=new Xf,this.infoEncoder=new Cy(wh),this.stringEncoder=new p_,this.parentInfoEncoder=new Cy(wh),this.typeRefEncoder=new Mc,this.lenEncoder=new Mc}toUint8Array(){const e=xl();return rt(e,0),pn(e,this.keyClockEncoder.toUint8Array()),pn(e,this.clientEncoder.toUint8Array()),pn(e,this.leftClockEncoder.toUint8Array()),pn(e,this.rightClockEncoder.toUint8Array()),pn(e,Hn(this.infoEncoder)),pn(e,this.stringEncoder.toUint8Array()),pn(e,Hn(this.parentInfoEncoder)),pn(e,this.typeRefEncoder.toUint8Array()),pn(e,this.lenEncoder.toUint8Array()),tu(e,Hn(this.restEncoder)),Hn(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){Eo(this.restEncoder,e)}writeBuf(e){pn(this.restEncoder,e)}writeJSON(e){Eo(this.restEncoder,e)}writeKey(e){const r=this.keyMap.get(e);r===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(r)}}const f1=(n,e,r,o)=>{o=_l(o,e[0].id.clock);const l=Jr(e,o);rt(n.restEncoder,e.length-l),n.writeClient(r),rt(n.restEncoder,o);const a=e[l];a.write(n,o-a.id.clock);for(let d=l+1;d<e.length;d++)e[d].write(n,0)},Jv=(n,e,r)=>{const o=new Map;r.forEach((l,a)=>{an(e,a)>l&&o.set(a,l)}),lp(e).forEach((l,a)=>{r.has(a)||o.set(a,0)}),rt(n.restEncoder,o.size),jo(o.entries()).sort((l,a)=>a[0]-l[0]).forEach(([l,a])=>{f1(n,e.clients.get(l),l,a)})},h1=(n,e)=>{const r=zn(),o=Ct(n.restDecoder);for(let l=0;l<o;l++){const a=Ct(n.restDecoder),d=new Array(a),h=n.readClient();let y=Ct(n.restDecoder);r.set(h,{i:0,refs:d});for(let m=0;m<a;m++){const _=n.readInfo();switch(cd&_){case 0:{const b=n.readLen();d[m]=new lr(yt(h,y),b),y+=b;break}case 10:{const b=Ct(n.restDecoder);d[m]=new ar(yt(h,y),b),y+=b;break}default:{const b=(_&(Ni|qn))===0,x=new Jt(yt(h,y),null,(_&qn)===qn?n.readLeftID():null,null,(_&Ni)===Ni?n.readRightID():null,b?n.readParentInfo()?e.get(n.readString()):n.readLeftID():null,b&&(_&Da)===Da?n.readString():null,x0(n,_));d[m]=x,y+=x.length}}}}return r},p1=(n,e,r)=>{const o=[];let l=jo(r.keys()).sort((C,j)=>C-j);if(l.length===0)return null;const a=()=>{if(l.length===0)return null;let C=r.get(l[l.length-1]);for(;C.refs.length===C.i;)if(l.pop(),l.length>0)C=r.get(l[l.length-1]);else return null;return C};let d=a();if(d===null)return null;const h=new e0,y=new Map,m=(C,j)=>{const T=y.get(C);(T==null||T>j)&&y.set(C,j)};let _=d.refs[d.i++];const b=new Map,x=()=>{for(const C of o){const j=C.id.client,T=r.get(j);T?(T.i--,h.clients.set(j,T.refs.slice(T.i)),r.delete(j),T.i=0,T.refs=[]):h.clients.set(j,[C]),l=l.filter(W=>W!==j)}o.length=0};for(;;){if(_.constructor!==ar){const j=Li(b,_.id.client,()=>an(e,_.id.client))-_.id.clock;if(j<0)o.push(_),m(_.id.client,_.id.clock-1),x();else{const T=_.getMissing(n,e);if(T!==null){o.push(_);const W=r.get(T)||{refs:[],i:0};if(W.refs.length===W.i)m(T,an(e,T)),x();else{_=W.refs[W.i++];continue}}else(j===0||j<_.length)&&(_.integrate(n,j),b.set(_.id.client,_.id.clock+_.length))}}if(o.length>0)_=o.pop();else if(d!==null&&d.i<d.refs.length)_=d.refs[d.i++];else{if(d=a(),d===null)break;_=d.refs[d.i++]}}if(h.clients.size>0){const C=new md;return Jv(C,h,new Map),rt(C.restEncoder,0),{missing:y,update:C.toUint8Array()}}return null},m1=(n,e)=>Jv(n,e.doc.store,e.beforeState),y1=(n,e,r,o=new Ua(n))=>Ot(e,l=>{l.local=!1;let a=!1;const d=l.doc,h=d.store,y=h1(o,d),m=p1(l,h,y),_=h.pendingStructs;if(_){for(const[x,C]of _.missing)if(C<an(h,x)){a=!0;break}if(m){for(const[x,C]of m.missing){const j=_.missing.get(x);(j==null||j>C)&&_.missing.set(x,C)}_.update=Gc([_.update,m.update])}}else h.pendingStructs=m;const b=Gy(o,l,h);if(h.pendingDs){const x=new Ua(nu(h.pendingDs));Ct(x.restDecoder);const C=Gy(x,l,h);b&&C?h.pendingDs=Gc([b,C]):h.pendingDs=b||C}else h.pendingDs=b;if(a){const x=h.pendingStructs.update;h.pendingStructs=null,Xv(l.doc,x)}},r,!1),Xv=(n,e,r,o=Ua)=>{const l=nu(e);y1(l,n,r,new o(l))};class g1{constructor(){this.l=[]}}const Yy=()=>new g1,Qy=(n,e)=>n.l.push(e),Jy=(n,e)=>{const r=n.l,o=r.length;n.l=r.filter(l=>e!==l),o===n.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},Zv=(n,e,r)=>rp(n.l,[e,r]);class cl{constructor(e,r){this.client=e,this.clock=r}}const xc=(n,e)=>n===e||n!==null&&e!==null&&n.client===e.client&&n.clock===e.clock,yt=(n,e)=>new cl(n,e),v1=n=>{for(const[e,r]of n.doc.share.entries())if(r===n)return e;throw Qr()},ll=(n,e)=>e===void 0?!n.deleted:e.sv.has(n.id.client)&&(e.sv.get(n.id.client)||0)>n.id.clock&&!Gv(e.ds,n.id),Ch=(n,e)=>{const r=Li(n.meta,Ch,ps),o=n.doc.store;r.has(e)||(e.sv.forEach((l,a)=>{l<an(o,a)&&Po(n,yt(a,l))}),qv(n,e.ds,l=>{}),r.add(e))};class e0{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const lp=n=>{const e=new Map;return n.clients.forEach((r,o)=>{const l=r[r.length-1];e.set(o,l.id.clock+l.length)}),e},an=(n,e)=>{const r=n.clients.get(e);if(r===void 0)return 0;const o=r[r.length-1];return o.id.clock+o.length},t0=(n,e)=>{let r=n.clients.get(e.id.client);if(r===void 0)r=[],n.clients.set(e.id.client,r);else{const o=r[r.length-1];if(o.id.clock+o.length!==e.id.clock)throw Qr()}r.push(e)},Jr=(n,e)=>{let r=0,o=n.length-1,l=n[o],a=l.id.clock;if(a===e)return o;let d=Di(e/(a+l.length-1)*o);for(;r<=o;){if(l=n[d],a=l.id.clock,a<=e){if(e<a+l.length)return d;r=d+1}else o=d-1;d=Di((r+o)/2)}throw Qr()},w1=(n,e)=>{const r=n.clients.get(e.client);return r[Jr(r,e.clock)]},rh=w1,Ih=(n,e,r)=>{const o=Jr(e,r),l=e[o];return l.id.clock<r&&l instanceof Jt?(e.splice(o+1,0,ed(n,l,r-l.id.clock)),o+1):o},Po=(n,e)=>{const r=n.doc.store.clients.get(e.client);return r[Ih(n,r,e.clock)]},Xy=(n,e,r)=>{const o=e.clients.get(r.client),l=Jr(o,r.clock),a=o[l];return r.clock!==a.id.clock+a.length-1&&a.constructor!==lr&&o.splice(l+1,0,ed(n,a,r.clock-a.id.clock+1)),a},b1=(n,e,r)=>{const o=n.clients.get(e.id.client);o[Jr(o,e.id.clock)]=r},n0=(n,e,r,o,l)=>{if(o===0)return;const a=r+o;let d=Ih(n,e,r),h;do h=e[d++],a<h.id.clock+h.length&&Ih(n,e,a),l(h);while(d<e.length&&e[d].id.clock<a)};class _1{constructor(e,r,o){this.doc=e,this.deleteSet=new pd,this.beforeState=lp(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=r,this.meta=new Map,this.local=o,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const Zy=(n,e)=>e.deleteSet.clients.size===0&&!Ok(e.afterState,(r,o)=>e.beforeState.get(o)!==r)?!1:(op(e.deleteSet),m1(n,e),sp(n,e.deleteSet),!0),eg=(n,e,r)=>{const o=e._item;(o===null||o.id.clock<(n.beforeState.get(o.id.client)||0)&&!o.deleted)&&Li(n.changed,e,ps).add(r)},Fc=(n,e)=>{let r=n[e],o=n[e-1],l=e;for(;l>0;r=o,o=n[--l-1]){if(o.deleted===r.deleted&&o.constructor===r.constructor&&o.mergeWith(r)){r instanceof Jt&&r.parentSub!==null&&r.parent._map.get(r.parentSub)===r&&r.parent._map.set(r.parentSub,o);continue}break}const a=e-l;return a&&n.splice(e+1-a,a),a},k1=(n,e,r)=>{for(const[o,l]of n.clients.entries()){const a=e.clients.get(o);for(let d=l.length-1;d>=0;d--){const h=l[d],y=h.clock+h.len;for(let m=Jr(a,h.clock),_=a[m];m<a.length&&_.id.clock<y;_=a[++m]){const b=a[m];if(h.clock+h.len<=b.id.clock)break;b instanceof Jt&&b.deleted&&!b.keep&&r(b)&&b.gc(e,!1)}}}},x1=(n,e)=>{n.clients.forEach((r,o)=>{const l=e.clients.get(o);for(let a=r.length-1;a>=0;a--){const d=r[a],h=rv(l.length-1,1+Jr(l,d.clock+d.len-1));for(let y=h,m=l[y];y>0&&m.id.clock>=d.clock;m=l[y])y-=1+Fc(l,y)}})},r0=(n,e)=>{if(e<n.length){const r=n[e],o=r.doc,l=o.store,a=r.deleteSet,d=r._mergeStructs;try{op(a),r.afterState=lp(r.doc.store),o.emit("beforeObserverCalls",[r,o]);const h=[];r.changed.forEach((y,m)=>h.push(()=>{(m._item===null||!m._item.deleted)&&m._callObserver(r,y)})),h.push(()=>{r.changedParentTypes.forEach((y,m)=>{m._dEH.l.length>0&&(m._item===null||!m._item.deleted)&&(y=y.filter(_=>_.target._item===null||!_.target._item.deleted),y.forEach(_=>{_.currentTarget=m,_._path=null}),y.sort((_,b)=>_.path.length-b.path.length),Zv(m._dEH,y,r))})}),h.push(()=>o.emit("afterTransaction",[r,o])),rp(h,[]),r._needFormattingCleanup&&B1(r)}finally{o.gc&&k1(a,l,o.gcFilter),x1(a,l),r.afterState.forEach((_,b)=>{const x=r.beforeState.get(b)||0;if(x!==_){const C=l.clients.get(b),j=_l(Jr(C,x),1);for(let T=C.length-1;T>=j;)T-=1+Fc(C,T)}});for(let _=d.length-1;_>=0;_--){const{client:b,clock:x}=d[_].id,C=l.clients.get(b),j=Jr(C,x);j+1<C.length&&Fc(C,j+1)>1||j>0&&Fc(C,j)}if(!r.local&&r.afterState.get(o.clientID)!==r.beforeState.get(o.clientID)&&(r1(ip,Fv,"[yjs] ",Bv,$v,"Changed the client-id because another client seems to be using it."),o.clientID=Yv()),o.emit("afterTransactionCleanup",[r,o]),o._observers.has("update")){const _=new d1;Zy(_,r)&&o.emit("update",[_.toUint8Array(),r.origin,o,r])}if(o._observers.has("updateV2")){const _=new md;Zy(_,r)&&o.emit("updateV2",[_.toUint8Array(),r.origin,o,r])}const{subdocsAdded:h,subdocsLoaded:y,subdocsRemoved:m}=r;(h.size>0||m.size>0||y.size>0)&&(h.forEach(_=>{_.clientID=o.clientID,_.collectionid==null&&(_.collectionid=o.collectionid),o.subdocs.add(_)}),m.forEach(_=>o.subdocs.delete(_)),o.emit("subdocs",[{loaded:y,added:h,removed:m},o,r]),m.forEach(_=>_.destroy())),n.length<=e+1?(o._transactionCleanups=[],o.emit("afterAllTransactions",[o,n])):r0(n,e+1)}}},Ot=(n,e,r=null,o=!0)=>{const l=n._transactionCleanups;let a=!1,d=null;n._transaction===null&&(a=!0,n._transaction=new _1(n,r,o),l.push(n._transaction),l.length===1&&n.emit("beforeAllTransactions",[n]),n.emit("beforeTransaction",[n._transaction,n]));try{d=e(n._transaction)}finally{if(a){const h=n._transaction===l[0];n._transaction=null,h&&r0(l,0)}}return d};function*S1(n){const e=Ct(n.restDecoder);for(let r=0;r<e;r++){const o=Ct(n.restDecoder),l=n.readClient();let a=Ct(n.restDecoder);for(let d=0;d<o;d++){const h=n.readInfo();if(h===10){const y=Ct(n.restDecoder);yield new ar(yt(l,a),y),a+=y}else if((cd&h)!==0){const y=(h&(Ni|qn))===0,m=new Jt(yt(l,a),null,(h&qn)===qn?n.readLeftID():null,null,(h&Ni)===Ni?n.readRightID():null,y?n.readParentInfo()?n.readString():n.readLeftID():null,y&&(h&Da)===Da?n.readString():null,x0(n,h));yield m,a+=m.length}else{const y=n.readLen();yield new lr(yt(l,a),y),a+=y}}}}class i0{constructor(e,r){this.gen=S1(e),this.curr=null,this.done=!1,this.filterSkips=r,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===ar);return this.curr}}class E1{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const o0=(n,e=Qv,r=Ua)=>{const o=new e,l=new i0(new r(nu(n)),!1);let a=l.curr;if(a!==null){let d=0,h=a.id.client,y=a.id.clock!==0,m=y?0:a.id.clock+a.length;for(;a!==null;a=l.next())h!==a.id.client&&(m!==0&&(d++,rt(o.restEncoder,h),rt(o.restEncoder,m)),h=a.id.client,m=0,y=a.id.clock!==0),a.constructor===ar&&(y=!0),y||(m=a.id.clock+a.length);m!==0&&(d++,rt(o.restEncoder,h),rt(o.restEncoder,m));const _=xl();return rt(_,d),u_(_,o.restEncoder),o.restEncoder=_,o.toUint8Array()}else return rt(o.restEncoder,0),o.toUint8Array()},C1=(n,e)=>{if(n.constructor===lr){const{client:r,clock:o}=n.id;return new lr(yt(r,o+e),n.length-e)}else if(n.constructor===ar){const{client:r,clock:o}=n.id;return new ar(yt(r,o+e),n.length-e)}else{const r=n,{client:o,clock:l}=r.id;return new Jt(yt(o,l+e),null,yt(o,l+e-1),null,r.rightOrigin,r.parent,r.parentSub,r.content.splice(e))}},Gc=(n,e=Ua,r=md)=>{if(n.length===1)return n[0];const o=n.map(_=>new e(nu(_)));let l=o.map(_=>new i0(_,!0)),a=null;const d=new r,h=new E1(d);for(;l=l.filter(x=>x.curr!==null),l.sort((x,C)=>{if(x.curr.id.client===C.curr.id.client){const j=x.curr.id.clock-C.curr.id.clock;return j===0?x.curr.constructor===C.curr.constructor?0:x.curr.constructor===ar?1:-1:j}else return C.curr.id.client-x.curr.id.client}),l.length!==0;){const _=l[0],b=_.curr.id.client;if(a!==null){let x=_.curr,C=!1;for(;x!==null&&x.id.clock+x.length<=a.struct.id.clock+a.struct.length&&x.id.client>=a.struct.id.client;)x=_.next(),C=!0;if(x===null||x.id.client!==b||C&&x.id.clock>a.struct.id.clock+a.struct.length)continue;if(b!==a.struct.id.client)ba(h,a.struct,a.offset),a={struct:x,offset:0},_.next();else if(a.struct.id.clock+a.struct.length<x.id.clock)if(a.struct.constructor===ar)a.struct.length=x.id.clock+x.length-a.struct.id.clock;else{ba(h,a.struct,a.offset);const j=x.id.clock-a.struct.id.clock-a.struct.length;a={struct:new ar(yt(b,a.struct.id.clock+a.struct.length),j),offset:0}}else{const j=a.struct.id.clock+a.struct.length-x.id.clock;j>0&&(a.struct.constructor===ar?a.struct.length-=j:x=C1(x,j)),a.struct.mergeWith(x)||(ba(h,a.struct,a.offset),a={struct:x,offset:0},_.next())}}else a={struct:_.curr,offset:0},_.next();for(let x=_.curr;x!==null&&x.id.client===b&&x.id.clock===a.struct.id.clock+a.struct.length&&x.constructor!==ar;x=_.next())ba(h,a.struct,a.offset),a={struct:x,offset:0}}a!==null&&(ba(h,a.struct,a.offset),a=null),I1(h);const y=o.map(_=>a1(_)),m=l1(y);return sp(d,m),d.toUint8Array()},s0=n=>{n.written>0&&(n.clientStructs.push({written:n.written,restEncoder:Hn(n.encoder.restEncoder)}),n.encoder.restEncoder=xl(),n.written=0)},ba=(n,e,r)=>{n.written>0&&n.currClient!==e.id.client&&s0(n),n.written===0&&(n.currClient=e.id.client,n.encoder.writeClient(e.id.client),rt(n.encoder.restEncoder,e.id.clock+r)),e.write(n.encoder,r),n.written++},I1=n=>{s0(n);const e=n.encoder.restEncoder;rt(e,n.clientStructs.length);for(let r=0;r<n.clientStructs.length;r++){const o=n.clientStructs[r];rt(e,o.written),tu(e,o.restEncoder)}},tg="You must not compute changes after the event-handler fired.";class yd{constructor(e,r){this.target=e,this.currentTarget=e,this.transaction=r,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=O1(this.currentTarget,this.target))}deletes(e){return Gv(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw To(tg);const e=new Map,r=this.target;this.transaction.changed.get(r).forEach(l=>{if(l!==null){const a=r._map.get(l);let d,h;if(this.adds(a)){let y=a.left;for(;y!==null&&this.adds(y);)y=y.left;if(this.deletes(a))if(y!==null&&this.deletes(y))d="delete",h=Jf(y.content.getContent());else return;else y!==null&&this.deletes(y)?(d="update",h=Jf(y.content.getContent())):(d="add",h=void 0)}else if(this.deletes(a))d="delete",h=Jf(a.content.getContent());else return;e.set(l,{action:d,oldValue:h})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw To(tg);const r=this.target,o=ps(),l=ps(),a=[];if(e={added:o,deleted:l,delta:a,keys:this.keys},this.transaction.changed.get(r).has(null)){let h=null;const y=()=>{h&&a.push(h)};for(let m=r._start;m!==null;m=m.right)m.deleted?this.deletes(m)&&!this.adds(m)&&((h===null||h.delete===void 0)&&(y(),h={delete:0}),h.delete+=m.length,l.add(m)):this.adds(m)?((h===null||h.insert===void 0)&&(y(),h={insert:[]}),h.insert=h.insert.concat(m.content.getContent()),o.add(m)):((h===null||h.retain===void 0)&&(y(),h={retain:0}),h.retain+=m.length);h!==null&&h.retain===void 0&&y()}this._changes=e}return e}}const O1=(n,e)=>{const r=[];for(;e._item!==null&&e!==n;){if(e._item.parentSub!==null)r.unshift(e._item.parentSub);else{let o=0,l=e._item.parent._start;for(;l!==e._item&&l!==null;)!l.deleted&&l.countable&&(o+=l.length),l=l.right;r.unshift(o)}e=e._item.parent}return r},Cn=()=>{i1("Invalid access: Add Yjs type to a document before reading data.")},l0=80;let ap=0;class j1{constructor(e,r){e.marker=!0,this.p=e,this.index=r,this.timestamp=ap++}}const T1=n=>{n.timestamp=ap++},a0=(n,e,r)=>{n.p.marker=!1,n.p=e,e.marker=!0,n.index=r,n.timestamp=ap++},P1=(n,e,r)=>{if(n.length>=l0){const o=n.reduce((l,a)=>l.timestamp<a.timestamp?l:a);return a0(o,e,r),o}else{const o=new j1(e,r);return n.push(o),o}},gd=(n,e)=>{if(n._start===null||e===0||n._searchMarker===null)return null;const r=n._searchMarker.length===0?null:n._searchMarker.reduce((a,d)=>Lc(e-a.index)<Lc(e-d.index)?a:d);let o=n._start,l=0;for(r!==null&&(o=r.p,l=r.index,T1(r));o.right!==null&&l<e;){if(!o.deleted&&o.countable){if(e<l+o.length)break;l+=o.length}o=o.right}for(;o.left!==null&&l>e;)o=o.left,!o.deleted&&o.countable&&(l-=o.length);for(;o.left!==null&&o.left.id.client===o.id.client&&o.left.id.clock+o.left.length===o.id.clock;)o=o.left,!o.deleted&&o.countable&&(l-=o.length);return r!==null&&Lc(r.index-l)<o.parent.length/l0?(a0(r,o,l),r):P1(n._searchMarker,o,l)},za=(n,e,r)=>{for(let o=n.length-1;o>=0;o--){const l=n[o];if(r>0){let a=l.p;for(a.marker=!1;a&&(a.deleted||!a.countable);)a=a.left,a&&!a.deleted&&a.countable&&(l.index-=a.length);if(a===null||a.marker===!0){n.splice(o,1);continue}l.p=a,a.marker=!0}(e<l.index||r>0&&e===l.index)&&(l.index=_l(e,l.index+r))}},vd=(n,e,r)=>{const o=n,l=e.changedParentTypes;for(;Li(l,n,()=>[]).push(r),n._item!==null;)n=n._item.parent;Zv(o._eH,r,e)};class yn{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=Yy(),this._dEH=Yy(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,r){this.doc=e,this._item=r}_copy(){throw Yr()}clone(){throw Yr()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,r){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){Qy(this._eH,e)}observeDeep(e){Qy(this._dEH,e)}unobserve(e){Jy(this._eH,e)}unobserveDeep(e){Jy(this._dEH,e)}toJSON(){}}const u0=(n,e,r)=>{n.doc??Cn(),e<0&&(e=n._length+e),r<0&&(r=n._length+r);let o=r-e;const l=[];let a=n._start;for(;a!==null&&o>0;){if(a.countable&&!a.deleted){const d=a.content.getContent();if(d.length<=e)e-=d.length;else{for(let h=e;h<d.length&&o>0;h++)l.push(d[h]),o--;e=0}}a=a.right}return l},c0=n=>{n.doc??Cn();const e=[];let r=n._start;for(;r!==null;){if(r.countable&&!r.deleted){const o=r.content.getContent();for(let l=0;l<o.length;l++)e.push(o[l])}r=r.right}return e},Fa=(n,e)=>{let r=0,o=n._start;for(n.doc??Cn();o!==null;){if(o.countable&&!o.deleted){const l=o.content.getContent();for(let a=0;a<l.length;a++)e(l[a],r++,n)}o=o.right}},d0=(n,e)=>{const r=[];return Fa(n,(o,l)=>{r.push(e(o,l,n))}),r},N1=n=>{let e=n._start,r=null,o=0;return{[Symbol.iterator](){return this},next:()=>{if(r===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};r=e.content.getContent(),o=0,e=e.right}const l=r[o++];return r.length<=o&&(r=null),{done:!1,value:l}}}},f0=(n,e)=>{n.doc??Cn();const r=gd(n,e);let o=n._start;for(r!==null&&(o=r.p,e-=r.index);o!==null;o=o.right)if(!o.deleted&&o.countable){if(e<o.length)return o.content.getContent()[e];e-=o.length}},Yc=(n,e,r,o)=>{let l=r;const a=n.doc,d=a.clientID,h=a.store,y=r===null?e._start:r.right;let m=[];const _=()=>{m.length>0&&(l=new Jt(yt(d,an(h,d)),l,l&&l.lastId,y,y&&y.id,e,null,new vs(m)),l.integrate(n,0),m=[])};o.forEach(b=>{if(b===null)m.push(b);else switch(b.constructor){case Number:case Object:case Boolean:case Array:case String:m.push(b);break;default:switch(_(),b.constructor){case Uint8Array:case ArrayBuffer:l=new Jt(yt(d,an(h,d)),l,l&&l.lastId,y,y&&y.id,e,null,new ou(new Uint8Array(b))),l.integrate(n,0);break;case Il:l=new Jt(yt(d,an(h,d)),l,l&&l.lastId,y,y&&y.id,e,null,new su(b)),l.integrate(n,0);break;default:if(b instanceof yn)l=new Jt(yt(d,an(h,d)),l,l&&l.lastId,y,y&&y.id,e,null,new Ui(b)),l.integrate(n,0);else throw new Error("Unexpected content type in insert operation")}}}),_()},h0=()=>To("Length exceeded!"),p0=(n,e,r,o)=>{if(r>e._length)throw h0();if(r===0)return e._searchMarker&&za(e._searchMarker,r,o.length),Yc(n,e,null,o);const l=r,a=gd(e,r);let d=e._start;for(a!==null&&(d=a.p,r-=a.index,r===0&&(d=d.prev,r+=d&&d.countable&&!d.deleted?d.length:0));d!==null;d=d.right)if(!d.deleted&&d.countable){if(r<=d.length){r<d.length&&Po(n,yt(d.id.client,d.id.clock+r));break}r-=d.length}return e._searchMarker&&za(e._searchMarker,l,o.length),Yc(n,e,d,o)},A1=(n,e,r)=>{let l=(e._searchMarker||[]).reduce((a,d)=>d.index>a.index?d:a,{index:0,p:e._start}).p;if(l)for(;l.right;)l=l.right;return Yc(n,e,l,r)},m0=(n,e,r,o)=>{if(o===0)return;const l=r,a=o,d=gd(e,r);let h=e._start;for(d!==null&&(h=d.p,r-=d.index);h!==null&&r>0;h=h.right)!h.deleted&&h.countable&&(r<h.length&&Po(n,yt(h.id.client,h.id.clock+r)),r-=h.length);for(;o>0&&h!==null;)h.deleted||(o<h.length&&Po(n,yt(h.id.client,h.id.clock+o)),h.delete(n),o-=h.length),h=h.right;if(o>0)throw h0();e._searchMarker&&za(e._searchMarker,l,-a+o)},Qc=(n,e,r)=>{const o=e._map.get(r);o!==void 0&&o.delete(n)},up=(n,e,r,o)=>{const l=e._map.get(r)||null,a=n.doc,d=a.clientID;let h;if(o==null)h=new vs([o]);else switch(o.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:h=new vs([o]);break;case Uint8Array:h=new ou(o);break;case Il:h=new su(o);break;default:if(o instanceof yn)h=new Ui(o);else throw new Error("Unexpected content type")}new Jt(yt(d,an(a.store,d)),l,l&&l.lastId,null,null,e,r,h).integrate(n,0)},cp=(n,e)=>{n.doc??Cn();const r=n._map.get(e);return r!==void 0&&!r.deleted?r.content.getContent()[r.length-1]:void 0},y0=n=>{const e={};return n.doc??Cn(),n._map.forEach((r,o)=>{r.deleted||(e[o]=r.content.getContent()[r.length-1])}),e},g0=(n,e)=>{n.doc??Cn();const r=n._map.get(e);return r!==void 0&&!r.deleted},D1=(n,e)=>{const r={};return n._map.forEach((o,l)=>{let a=o;for(;a!==null&&(!e.sv.has(a.id.client)||a.id.clock>=(e.sv.get(a.id.client)||0));)a=a.left;a!==null&&ll(a,e)&&(r[l]=a.content.getContent()[a.length-1])}),r},Sc=n=>(n.doc??Cn(),o1(n._map.entries(),e=>!e[1].deleted));class R1 extends yd{}class dl extends yn{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const r=new dl;return r.push(e),r}_integrate(e,r){super._integrate(e,r),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new dl}clone(){const e=new dl;return e.insert(0,this.toArray().map(r=>r instanceof yn?r.clone():r)),e}get length(){return this.doc??Cn(),this._length}_callObserver(e,r){super._callObserver(e,r),vd(this,e,new R1(this,e))}insert(e,r){this.doc!==null?Ot(this.doc,o=>{p0(o,this,e,r)}):this._prelimContent.splice(e,0,...r)}push(e){this.doc!==null?Ot(this.doc,r=>{A1(r,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,r=1){this.doc!==null?Ot(this.doc,o=>{m0(o,this,e,r)}):this._prelimContent.splice(e,r)}get(e){return f0(this,e)}toArray(){return c0(this)}slice(e=0,r=this.length){return u0(this,e,r)}toJSON(){return this.map(e=>e instanceof yn?e.toJSON():e)}map(e){return d0(this,e)}forEach(e){Fa(this,e)}[Symbol.iterator](){return N1(this)}_write(e){e.writeTypeRef(sx)}}const L1=n=>new dl;class M1 extends yd{constructor(e,r,o){super(e,r),this.keysChanged=o}}class gl extends yn{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,r){super._integrate(e,r),this._prelimContent.forEach((o,l)=>{this.set(l,o)}),this._prelimContent=null}_copy(){return new gl}clone(){const e=new gl;return this.forEach((r,o)=>{e.set(o,r instanceof yn?r.clone():r)}),e}_callObserver(e,r){vd(this,e,new M1(this,e,r))}toJSON(){this.doc??Cn();const e={};return this._map.forEach((r,o)=>{if(!r.deleted){const l=r.content.getContent()[r.length-1];e[o]=l instanceof yn?l.toJSON():l}}),e}get size(){return[...Sc(this)].length}keys(){return nh(Sc(this),e=>e[0])}values(){return nh(Sc(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return nh(Sc(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??Cn(),this._map.forEach((r,o)=>{r.deleted||e(r.content.getContent()[r.length-1],o,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?Ot(this.doc,r=>{Qc(r,this,e)}):this._prelimContent.delete(e)}set(e,r){return this.doc!==null?Ot(this.doc,o=>{up(o,this,e,r)}):this._prelimContent.set(e,r),r}get(e){return cp(this,e)}has(e){return g0(this,e)}clear(){this.doc!==null?Ot(this.doc,e=>{this.forEach(function(r,o,l){Qc(e,l,o)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(lx)}}const U1=n=>new gl,xo=(n,e)=>n===e||typeof n=="object"&&typeof e=="object"&&n&&e&&Bk(n,e);class Oh{constructor(e,r,o,l){this.left=e,this.right=r,this.index=o,this.currentAttributes=l}forward(){switch(this.right===null&&Qr(),this.right.content.constructor){case Zt:this.right.deleted||Ol(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const ng=(n,e,r)=>{for(;e.right!==null&&r>0;){switch(e.right.content.constructor){case Zt:e.right.deleted||Ol(e.currentAttributes,e.right.content);break;default:e.right.deleted||(r<e.right.length&&Po(n,yt(e.right.id.client,e.right.id.clock+r)),e.index+=e.right.length,r-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},Ec=(n,e,r,o)=>{const l=new Map,a=o?gd(e,r):null;if(a){const d=new Oh(a.p.left,a.p,a.index,l);return ng(n,d,r-a.index)}else{const d=new Oh(null,e._start,0,l);return ng(n,d,r)}},v0=(n,e,r,o)=>{for(;r.right!==null&&(r.right.deleted===!0||r.right.content.constructor===Zt&&xo(o.get(r.right.content.key),r.right.content.value));)r.right.deleted||o.delete(r.right.content.key),r.forward();const l=n.doc,a=l.clientID;o.forEach((d,h)=>{const y=r.left,m=r.right,_=new Jt(yt(a,an(l.store,a)),y,y&&y.lastId,m,m&&m.id,e,null,new Zt(h,d));_.integrate(n,0),r.right=_,r.forward()})},Ol=(n,e)=>{const{key:r,value:o}=e;o===null?n.delete(r):n.set(r,o)},w0=(n,e)=>{for(;n.right!==null;){if(!(n.right.deleted||n.right.content.constructor===Zt&&xo(e[n.right.content.key]??null,n.right.content.value)))break;n.forward()}},b0=(n,e,r,o)=>{const l=n.doc,a=l.clientID,d=new Map;for(const h in o){const y=o[h],m=r.currentAttributes.get(h)??null;if(!xo(m,y)){d.set(h,m);const{left:_,right:b}=r;r.right=new Jt(yt(a,an(l.store,a)),_,_&&_.lastId,b,b&&b.id,e,null,new Zt(h,y)),r.right.integrate(n,0),r.forward()}}return d},ih=(n,e,r,o,l)=>{r.currentAttributes.forEach((x,C)=>{l[C]===void 0&&(l[C]=null)});const a=n.doc,d=a.clientID;w0(r,l);const h=b0(n,e,r,l),y=o.constructor===String?new Xr(o):o instanceof yn?new Ui(o):new ws(o);let{left:m,right:_,index:b}=r;e._searchMarker&&za(e._searchMarker,r.index,y.getLength()),_=new Jt(yt(d,an(a.store,d)),m,m&&m.lastId,_,_&&_.id,e,null,y),_.integrate(n,0),r.right=_,r.index=b,r.forward(),v0(n,e,r,h)},rg=(n,e,r,o,l)=>{const a=n.doc,d=a.clientID;w0(r,l);const h=b0(n,e,r,l);e:for(;r.right!==null&&(o>0||h.size>0&&(r.right.deleted||r.right.content.constructor===Zt));){if(!r.right.deleted)switch(r.right.content.constructor){case Zt:{const{key:y,value:m}=r.right.content,_=l[y];if(_!==void 0){if(xo(_,m))h.delete(y);else{if(o===0)break e;h.set(y,m)}r.right.delete(n)}else r.currentAttributes.set(y,m);break}default:o<r.right.length&&Po(n,yt(r.right.id.client,r.right.id.clock+o)),o-=r.right.length;break}r.forward()}if(o>0){let y="";for(;o>0;o--)y+=`
`;r.right=new Jt(yt(d,an(a.store,d)),r.left,r.left&&r.left.lastId,r.right,r.right&&r.right.id,e,null,new Xr(y)),r.right.integrate(n,0),r.forward()}v0(n,e,r,h)},_0=(n,e,r,o,l)=>{let a=e;const d=zn();for(;a&&(!a.countable||a.deleted);){if(!a.deleted&&a.content.constructor===Zt){const m=a.content;d.set(m.key,m)}a=a.right}let h=0,y=!1;for(;e!==a;){if(r===e&&(y=!0),!e.deleted){const m=e.content;switch(m.constructor){case Zt:{const{key:_,value:b}=m,x=o.get(_)??null;(d.get(_)!==m||x===b)&&(e.delete(n),h++,!y&&(l.get(_)??null)===b&&x!==b&&(x===null?l.delete(_):l.set(_,x))),!y&&!e.deleted&&Ol(l,m);break}}}e=e.right}return h},z1=(n,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const r=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===Zt){const o=e.content.key;r.has(o)?e.delete(n):r.add(o)}e=e.left}},F1=n=>{let e=0;return Ot(n.doc,r=>{let o=n._start,l=n._start,a=zn();const d=Sh(a);for(;l;){if(l.deleted===!1)switch(l.content.constructor){case Zt:Ol(d,l.content);break;default:e+=_0(r,o,l,a,d),a=Sh(d),o=l;break}l=l.right}}),e},B1=n=>{const e=new Set,r=n.doc;for(const[o,l]of n.afterState.entries()){const a=n.beforeState.get(o)||0;l!==a&&n0(n,r.store.clients.get(o),a,l,d=>{!d.deleted&&d.content.constructor===Zt&&d.constructor!==lr&&e.add(d.parent)})}Ot(r,o=>{qv(n,n.deleteSet,l=>{if(l instanceof lr||!l.parent._hasFormatting||e.has(l.parent))return;const a=l.parent;l.content.constructor===Zt?e.add(a):z1(o,l)});for(const l of e)F1(l)})},ig=(n,e,r)=>{const o=r,l=Sh(e.currentAttributes),a=e.right;for(;r>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case Ui:case ws:case Xr:r<e.right.length&&Po(n,yt(e.right.id.client,e.right.id.clock+r)),r-=e.right.length,e.right.delete(n);break}e.forward()}a&&_0(n,a,e.right,l,e.currentAttributes);const d=(e.left||e.right).parent;return d._searchMarker&&za(d._searchMarker,e.index,-o+r),e};class $1 extends yd{constructor(e,r,o){super(e,r),this.childListChanged=!1,this.keysChanged=new Set,o.forEach(l=>{l===null?this.childListChanged=!0:this.keysChanged.add(l)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,r=[];Ot(e,o=>{const l=new Map,a=new Map;let d=this.target._start,h=null;const y={};let m="",_=0,b=0;const x=()=>{if(h!==null){let C=null;switch(h){case"delete":b>0&&(C={delete:b}),b=0;break;case"insert":(typeof m=="object"||m.length>0)&&(C={insert:m},l.size>0&&(C.attributes={},l.forEach((j,T)=>{j!==null&&(C.attributes[T]=j)}))),m="";break;case"retain":_>0&&(C={retain:_},zk(y)||(C.attributes=Mk({},y))),_=0;break}C&&r.push(C),h=null}};for(;d!==null;){switch(d.content.constructor){case Ui:case ws:this.adds(d)?this.deletes(d)||(x(),h="insert",m=d.content.getContent()[0],x()):this.deletes(d)?(h!=="delete"&&(x(),h="delete"),b+=1):d.deleted||(h!=="retain"&&(x(),h="retain"),_+=1);break;case Xr:this.adds(d)?this.deletes(d)||(h!=="insert"&&(x(),h="insert"),m+=d.content.str):this.deletes(d)?(h!=="delete"&&(x(),h="delete"),b+=d.length):d.deleted||(h!=="retain"&&(x(),h="retain"),_+=d.length);break;case Zt:{const{key:C,value:j}=d.content;if(this.adds(d)){if(!this.deletes(d)){const T=l.get(C)??null;xo(T,j)?j!==null&&d.delete(o):(h==="retain"&&x(),xo(j,a.get(C)??null)?delete y[C]:y[C]=j)}}else if(this.deletes(d)){a.set(C,j);const T=l.get(C)??null;xo(T,j)||(h==="retain"&&x(),y[C]=T)}else if(!d.deleted){a.set(C,j);const T=y[C];T!==void 0&&(xo(T,j)?T!==null&&d.delete(o):(h==="retain"&&x(),j===null?delete y[C]:y[C]=j))}d.deleted||(h==="insert"&&x(),Ol(l,d.content));break}}d=d.right}for(x();r.length>0;){const C=r[r.length-1];if(C.retain!==void 0&&C.attributes===void 0)r.pop();else break}}),this._delta=r}return this._delta}}class vl extends yn{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??Cn(),this._length}_integrate(e,r){super._integrate(e,r);try{this._pending.forEach(o=>o())}catch(o){console.error(o)}this._pending=null}_copy(){return new vl}clone(){const e=new vl;return e.applyDelta(this.toDelta()),e}_callObserver(e,r){super._callObserver(e,r);const o=new $1(this,e,r);vd(this,e,o),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??Cn();let e="",r=this._start;for(;r!==null;)!r.deleted&&r.countable&&r.content.constructor===Xr&&(e+=r.content.str),r=r.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:r=!0}={}){this.doc!==null?Ot(this.doc,o=>{const l=new Oh(null,this._start,0,new Map);for(let a=0;a<e.length;a++){const d=e[a];if(d.insert!==void 0){const h=!r&&typeof d.insert=="string"&&a===e.length-1&&l.right===null&&d.insert.slice(-1)===`
`?d.insert.slice(0,-1):d.insert;(typeof h!="string"||h.length>0)&&ih(o,this,l,h,d.attributes||{})}else d.retain!==void 0?rg(o,this,l,d.retain,d.attributes||{}):d.delete!==void 0&&ig(o,l,d.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,r,o){this.doc??Cn();const l=[],a=new Map,d=this.doc;let h="",y=this._start;function m(){if(h.length>0){const b={};let x=!1;a.forEach((j,T)=>{x=!0,b[T]=j});const C={insert:h};x&&(C.attributes=b),l.push(C),h=""}}const _=()=>{for(;y!==null;){if(ll(y,e)||r!==void 0&&ll(y,r))switch(y.content.constructor){case Xr:{const b=a.get("ychange");e!==void 0&&!ll(y,e)?(b===void 0||b.user!==y.id.client||b.type!=="removed")&&(m(),a.set("ychange",o?o("removed",y.id):{type:"removed"})):r!==void 0&&!ll(y,r)?(b===void 0||b.user!==y.id.client||b.type!=="added")&&(m(),a.set("ychange",o?o("added",y.id):{type:"added"})):b!==void 0&&(m(),a.delete("ychange")),h+=y.content.str;break}case Ui:case ws:{m();const b={insert:y.content.getContent()[0]};if(a.size>0){const x={};b.attributes=x,a.forEach((C,j)=>{x[j]=C})}l.push(b);break}case Zt:ll(y,e)&&(m(),Ol(a,y.content));break}y=y.right}m()};return e||r?Ot(d,b=>{e&&Ch(b,e),r&&Ch(b,r),_()},"cleanup"):_(),l}insert(e,r,o){if(r.length<=0)return;const l=this.doc;l!==null?Ot(l,a=>{const d=Ec(a,this,e,!o);o||(o={},d.currentAttributes.forEach((h,y)=>{o[y]=h})),ih(a,this,d,r,o)}):this._pending.push(()=>this.insert(e,r,o))}insertEmbed(e,r,o){const l=this.doc;l!==null?Ot(l,a=>{const d=Ec(a,this,e,!o);ih(a,this,d,r,o||{})}):this._pending.push(()=>this.insertEmbed(e,r,o||{}))}delete(e,r){if(r===0)return;const o=this.doc;o!==null?Ot(o,l=>{ig(l,Ec(l,this,e,!0),r)}):this._pending.push(()=>this.delete(e,r))}format(e,r,o){if(r===0)return;const l=this.doc;l!==null?Ot(l,a=>{const d=Ec(a,this,e,!1);d.right!==null&&rg(a,this,d,r,o)}):this._pending.push(()=>this.format(e,r,o))}removeAttribute(e){this.doc!==null?Ot(this.doc,r=>{Qc(r,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,r){this.doc!==null?Ot(this.doc,o=>{up(o,this,e,r)}):this._pending.push(()=>this.setAttribute(e,r))}getAttribute(e){return cp(this,e)}getAttributes(){return y0(this)}_write(e){e.writeTypeRef(ax)}}const K1=n=>new vl;class oh{constructor(e,r=()=>!0){this._filter=r,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??Cn()}[Symbol.iterator](){return this}next(){let e=this._currentNode,r=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(r)))do if(r=e.content.type,!e.deleted&&(r.constructor===wl||r.constructor===gs)&&r._start!==null)e=r._start;else for(;e!==null;){const o=e.next;if(o!==null){e=o;break}else e.parent===this._root?e=null:e=e.parent._item}while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class gs extends yn{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,r){super._integrate(e,r),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new gs}clone(){const e=new gs;return e.insert(0,this.toArray().map(r=>r instanceof yn?r.clone():r)),e}get length(){return this.doc??Cn(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new oh(this,e)}querySelector(e){e=e.toUpperCase();const o=new oh(this,l=>l.nodeName&&l.nodeName.toUpperCase()===e).next();return o.done?null:o.value}querySelectorAll(e){return e=e.toUpperCase(),jo(new oh(this,r=>r.nodeName&&r.nodeName.toUpperCase()===e))}_callObserver(e,r){vd(this,e,new H1(this,r,e))}toString(){return d0(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,r={},o){const l=e.createDocumentFragment();return o!==void 0&&o._createAssociation(l,this),Fa(this,a=>{l.insertBefore(a.toDOM(e,r,o),null)}),l}insert(e,r){this.doc!==null?Ot(this.doc,o=>{p0(o,this,e,r)}):this._prelimContent.splice(e,0,...r)}insertAfter(e,r){if(this.doc!==null)Ot(this.doc,o=>{const l=e&&e instanceof yn?e._item:e;Yc(o,this,l,r)});else{const o=this._prelimContent,l=e===null?0:o.findIndex(a=>a===e)+1;if(l===0&&e!==null)throw To("Reference item not found");o.splice(l,0,...r)}}delete(e,r=1){this.doc!==null?Ot(this.doc,o=>{m0(o,this,e,r)}):this._prelimContent.splice(e,r)}toArray(){return c0(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return f0(this,e)}slice(e=0,r=this.length){return u0(this,e,r)}forEach(e){Fa(this,e)}_write(e){e.writeTypeRef(cx)}}const V1=n=>new gs;class wl extends gs{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,r){super._integrate(e,r),this._prelimAttrs.forEach((o,l)=>{this.setAttribute(l,o)}),this._prelimAttrs=null}_copy(){return new wl(this.nodeName)}clone(){const e=new wl(this.nodeName),r=this.getAttributes();return Uk(r,(o,l)=>{typeof o=="string"&&e.setAttribute(l,o)}),e.insert(0,this.toArray().map(o=>o instanceof yn?o.clone():o)),e}toString(){const e=this.getAttributes(),r=[],o=[];for(const h in e)o.push(h);o.sort();const l=o.length;for(let h=0;h<l;h++){const y=o[h];r.push(y+'="'+e[y]+'"')}const a=this.nodeName.toLocaleLowerCase(),d=r.length>0?" "+r.join(" "):"";return`<${a}${d}>${super.toString()}</${a}>`}removeAttribute(e){this.doc!==null?Ot(this.doc,r=>{Qc(r,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,r){this.doc!==null?Ot(this.doc,o=>{up(o,this,e,r)}):this._prelimAttrs.set(e,r)}getAttribute(e){return cp(this,e)}hasAttribute(e){return g0(this,e)}getAttributes(e){return e?D1(this,e):y0(this)}toDOM(e=document,r={},o){const l=e.createElement(this.nodeName),a=this.getAttributes();for(const d in a){const h=a[d];typeof h=="string"&&l.setAttribute(d,h)}return Fa(this,d=>{l.appendChild(d.toDOM(e,r,o))}),o!==void 0&&o._createAssociation(l,this),l}_write(e){e.writeTypeRef(ux),e.writeKey(this.nodeName)}}const W1=n=>new wl(n.readKey());class H1 extends yd{constructor(e,r,o){super(e,o),this.childListChanged=!1,this.attributesChanged=new Set,r.forEach(l=>{l===null?this.childListChanged=!0:this.attributesChanged.add(l)})}}class Jc extends gl{constructor(e){super(),this.hookName=e}_copy(){return new Jc(this.hookName)}clone(){const e=new Jc(this.hookName);return this.forEach((r,o)=>{e.set(o,r)}),e}toDOM(e=document,r={},o){const l=r[this.hookName];let a;return l!==void 0?a=l.createDom(this):a=document.createElement(this.hookName),a.setAttribute("data-yjs-hook",this.hookName),o!==void 0&&o._createAssociation(a,this),a}_write(e){e.writeTypeRef(dx),e.writeKey(this.hookName)}}const q1=n=>new Jc(n.readKey());class Xc extends vl{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new Xc}clone(){const e=new Xc;return e.applyDelta(this.toDelta()),e}toDOM(e=document,r,o){const l=e.createTextNode(this.toString());return o!==void 0&&o._createAssociation(l,this),l}toString(){return this.toDelta().map(e=>{const r=[];for(const l in e.attributes){const a=[];for(const d in e.attributes[l])a.push({key:d,value:e.attributes[l][d]});a.sort((d,h)=>d.key<h.key?-1:1),r.push({nodeName:l,attrs:a})}r.sort((l,a)=>l.nodeName<a.nodeName?-1:1);let o="";for(let l=0;l<r.length;l++){const a=r[l];o+=`<${a.nodeName}`;for(let d=0;d<a.attrs.length;d++){const h=a.attrs[d];o+=` ${h.key}="${h.value}"`}o+=">"}o+=e.insert;for(let l=r.length-1;l>=0;l--)o+=`</${r[l].nodeName}>`;return o}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(fx)}}const G1=n=>new Xc;class dp{constructor(e,r){this.id=e,this.length=r}get deleted(){throw Yr()}mergeWith(e){return!1}write(e,r,o){throw Yr()}integrate(e,r){throw Yr()}}const Y1=0;class lr extends dp{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,r){r>0&&(this.id.clock+=r,this.length-=r),t0(e.doc.store,this)}write(e,r){e.writeInfo(Y1),e.writeLen(this.length-r)}getMissing(e,r){return null}}class ou{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new ou(this.content)}splice(e){throw Yr()}mergeWith(e){return!1}integrate(e,r){}delete(e){}gc(e){}write(e,r){e.writeBuf(this.content)}getRef(){return 3}}const Q1=n=>new ou(n.readBuf());class Ba{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Ba(this.len)}splice(e){const r=new Ba(this.len-e);return this.len=e,r}mergeWith(e){return this.len+=e.len,!0}integrate(e,r){qc(e.deleteSet,r.id.client,r.id.clock,this.len),r.markDeleted()}delete(e){}gc(e){}write(e,r){e.writeLen(this.len-r)}getRef(){return 1}}const J1=n=>new Ba(n.readLen()),k0=(n,e)=>new Il({guid:n,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class su{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const r={};this.opts=r,e.gc||(r.gc=!1),e.autoLoad&&(r.autoLoad=!0),e.meta!==null&&(r.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new su(k0(this.doc.guid,this.opts))}splice(e){throw Yr()}mergeWith(e){return!1}integrate(e,r){this.doc._item=r,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,r){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const X1=n=>new su(k0(n.readString(),n.readAny()));class ws{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new ws(this.embed)}splice(e){throw Yr()}mergeWith(e){return!1}integrate(e,r){}delete(e){}gc(e){}write(e,r){e.writeJSON(this.embed)}getRef(){return 5}}const Z1=n=>new ws(n.readJSON());class Zt{constructor(e,r){this.key=e,this.value=r}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new Zt(this.key,this.value)}splice(e){throw Yr()}mergeWith(e){return!1}integrate(e,r){const o=r.parent;o._searchMarker=null,o._hasFormatting=!0}delete(e){}gc(e){}write(e,r){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const ex=n=>new Zt(n.readKey(),n.readJSON());class Zc{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Zc(this.arr)}splice(e){const r=new Zc(this.arr.slice(e));return this.arr=this.arr.slice(0,e),r}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,r){}delete(e){}gc(e){}write(e,r){const o=this.arr.length;e.writeLen(o-r);for(let l=r;l<o;l++){const a=this.arr[l];e.writeString(a===void 0?"undefined":JSON.stringify(a))}}getRef(){return 2}}const tx=n=>{const e=n.readLen(),r=[];for(let o=0;o<e;o++){const l=n.readString();l==="undefined"?r.push(void 0):r.push(JSON.parse(l))}return new Zc(r)},nx=Hc("node_env")==="development";class vs{constructor(e){this.arr=e,nx&&Mv(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new vs(this.arr)}splice(e){const r=new vs(this.arr.slice(e));return this.arr=this.arr.slice(0,e),r}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,r){}delete(e){}gc(e){}write(e,r){const o=this.arr.length;e.writeLen(o-r);for(let l=r;l<o;l++){const a=this.arr[l];e.writeAny(a)}}getRef(){return 8}}const rx=n=>{const e=n.readLen(),r=[];for(let o=0;o<e;o++)r.push(n.readAny());return new vs(r)};class Xr{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Xr(this.str)}splice(e){const r=new Xr(this.str.slice(e));this.str=this.str.slice(0,e);const o=this.str.charCodeAt(e-1);return o>=55296&&o<=56319&&(this.str=this.str.slice(0,e-1)+"",r.str=""+r.str.slice(1)),r}mergeWith(e){return this.str+=e.str,!0}integrate(e,r){}delete(e){}gc(e){}write(e,r){e.writeString(r===0?this.str:this.str.slice(r))}getRef(){return 4}}const ix=n=>new Xr(n.readString()),ox=[L1,U1,K1,W1,V1,q1,G1],sx=0,lx=1,ax=2,ux=3,cx=4,dx=5,fx=6;class Ui{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Ui(this.type._copy())}splice(e){throw Yr()}mergeWith(e){return!1}integrate(e,r){this.type._integrate(e.doc,r)}delete(e){let r=this.type._start;for(;r!==null;)r.deleted?r.id.clock<(e.beforeState.get(r.id.client)||0)&&e._mergeStructs.push(r):r.delete(e),r=r.right;this.type._map.forEach(o=>{o.deleted?o.id.clock<(e.beforeState.get(o.id.client)||0)&&e._mergeStructs.push(o):o.delete(e)}),e.changed.delete(this.type)}gc(e){let r=this.type._start;for(;r!==null;)r.gc(e,!0),r=r.right;this.type._start=null,this.type._map.forEach(o=>{for(;o!==null;)o.gc(e,!0),o=o.left}),this.type._map=new Map}write(e,r){this.type._write(e)}getRef(){return 7}}const hx=n=>new Ui(ox[n.readTypeRef()](n)),ed=(n,e,r)=>{const{client:o,clock:l}=e.id,a=new Jt(yt(o,l+r),e,yt(o,l+r-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(r));return e.deleted&&a.markDeleted(),e.keep&&(a.keep=!0),e.redone!==null&&(a.redone=yt(e.redone.client,e.redone.clock+r)),e.right=a,a.right!==null&&(a.right.left=a),n._mergeStructs.push(a),a.parentSub!==null&&a.right===null&&a.parent._map.set(a.parentSub,a),e.length=r,a};class Jt extends dp{constructor(e,r,o,l,a,d,h,y){super(e,y.getLength()),this.origin=o,this.left=r,this.right=l,this.rightOrigin=a,this.parent=d,this.parentSub=h,this.redone=null,this.content=y,this.info=this.content.isCountable()?ky:0}set marker(e){(this.info&Qf)>0!==e&&(this.info^=Qf)}get marker(){return(this.info&Qf)>0}get keep(){return(this.info&_y)>0}set keep(e){this.keep!==e&&(this.info^=_y)}get countable(){return(this.info&ky)>0}get deleted(){return(this.info&Yf)>0}set deleted(e){this.deleted!==e&&(this.info^=Yf)}markDeleted(){this.info|=Yf}getMissing(e,r){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=an(r,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=an(r,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===cl&&this.id.client!==this.parent.client&&this.parent.clock>=an(r,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Xy(e,r,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Po(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===lr||this.right&&this.right.constructor===lr)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===Jt?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===Jt&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===cl){const o=rh(r,this.parent);o.constructor===lr?this.parent=null:this.parent=o.content.type}return null}integrate(e,r){if(r>0&&(this.id.clock+=r,this.left=Xy(e,e.doc.store,yt(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(r),this.length-=r),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let o=this.left,l;if(o!==null)l=o.right;else if(this.parentSub!==null)for(l=this.parent._map.get(this.parentSub)||null;l!==null&&l.left!==null;)l=l.left;else l=this.parent._start;const a=new Set,d=new Set;for(;l!==null&&l!==this.right;){if(d.add(l),a.add(l),xc(this.origin,l.origin)){if(l.id.client<this.id.client)o=l,a.clear();else if(xc(this.rightOrigin,l.rightOrigin))break}else if(l.origin!==null&&d.has(rh(e.doc.store,l.origin)))a.has(rh(e.doc.store,l.origin))||(o=l,a.clear());else break;l=l.right}this.left=o}if(this.left!==null){const o=this.left.right;this.right=o,this.left.right=this}else{let o;if(this.parentSub!==null)for(o=this.parent._map.get(this.parentSub)||null;o!==null&&o.left!==null;)o=o.left;else o=this.parent._start,this.parent._start=this;this.right=o}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),t0(e.doc.store,this),this.content.integrate(e,this),eg(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new lr(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:yt(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&xc(e.origin,this.lastId)&&this.right===e&&xc(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const r=this.parent._searchMarker;return r&&r.forEach(o=>{o.p===e&&(o.p=this,!this.deleted&&this.countable&&(o.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const r=this.parent;this.countable&&this.parentSub===null&&(r._length-=this.length),this.markDeleted(),qc(e.deleteSet,this.id.client,this.id.clock,this.length),eg(e,r,this.parentSub),this.content.delete(e)}}gc(e,r){if(!this.deleted)throw Qr();this.content.gc(e),r?b1(e,this,new lr(this.id,this.length)):this.content=new Ba(this.length)}write(e,r){const o=r>0?yt(this.id.client,this.id.clock+r-1):this.origin,l=this.rightOrigin,a=this.parentSub,d=this.content.getRef()&cd|(o===null?0:qn)|(l===null?0:Ni)|(a===null?0:Da);if(e.writeInfo(d),o!==null&&e.writeLeftID(o),l!==null&&e.writeRightID(l),o===null&&l===null){const h=this.parent;if(h._item!==void 0){const y=h._item;if(y===null){const m=v1(h);e.writeParentInfo(!0),e.writeString(m)}else e.writeParentInfo(!1),e.writeLeftID(y.id)}else h.constructor===String?(e.writeParentInfo(!0),e.writeString(h)):h.constructor===cl?(e.writeParentInfo(!1),e.writeLeftID(h)):Qr();a!==null&&e.writeString(a)}this.content.write(e,r)}}const x0=(n,e)=>px[e&cd](n),px=[()=>{Qr()},J1,tx,Q1,ix,Z1,ex,hx,rx,X1,()=>{Qr()}],mx=10;class ar extends dp{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,r){Qr()}write(e,r){e.writeInfo(mx),rt(e.restEncoder,this.length-r)}getMissing(e,r){return null}}const S0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},E0="__ $YJS$ __";S0[E0]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");S0[E0]=!0;const sh=new FinalizationRegistry(({cache:n,key:e})=>{delete n[e]});function C0(n){var e,r;return(e=(r=n._novip)._docCache)!==null&&e!==void 0?e:r._docCache={cache:{},get size(){return Object.keys(this.cache).length},find(o,l,a){const d=lh(o,l,a),h=this.cache[d];return h?h.deref():void 0},add(o){var l;const{parentTable:a,parentId:d,parentProp:h}=o.meta;if(!a||!h||d==null)throw new Error("Missing Dexie-related metadata in Y.Doc");const y=lh(a,d,h),m=(l=this.cache[y])===null||l===void 0?void 0:l.deref();m&&sh.unregister(m),this.cache[y]=new WeakRef(o),sh.register(o,{cache:this.cache,key:y},o)},delete(o){sh.unregister(o);const l=lh(o.meta.parentTable,o.meta.parentId,o.meta.parentProp),a=this.cache[l];(a==null?void 0:a.deref())===o&&delete this.cache[l]}}}const Oa=new WeakSet;function jh(n){if(Oa.has(n))throw new Error(`Y.Doc ${n.meta.parentId} has been destroyed`)}function lh(n,e,r){return`${n}[${e}].${r}`}function yx(n,e,r,o,l,a){let d=e.find(r,a,o);return d||(d=new Il({meta:{db:n,updatesTable:l,parentProp:o,parentTable:r,parentId:a}}),e.add(d),d.on("destroy",()=>{Oa.add(d),e.delete(d)}),d)}const{getByKeyPath:XC}=st;let I0=null;function og(n){I0=n}function gx(n,e,r,o,l,a){let d=0,h=!0;const y=So(()=>{jh(e);const b=r.table(l);return Promise.all([(d>0?b.where("i").between(d,1/0,!1).toArray().then(x=>x.filter(C=>ud(C.k,a)===0)):b.where({k:a}).toArray()).then(x=>x),r.table(o).where(":id").equals(a).toArray()])}).subscribe(([b,x])=>{if(b.length>0&&(d=b[b.length-1].i),x.length===0){e.destroy();return}jh(e),b.length>0&&Ot(e,()=>{b.forEach(C=>{try{og(C),Xv(e,C.u)}finally{og(null)}})},n,!1),h&&(h=!1,e.emit("load",[e]))},b=>{n.on("error").fire(b)}),m=(b,x)=>{x!==n&&r.table(l).add({k:a,u:b,f:1}).then(C=>{C===d-1&&++d}).catch(C=>{n.on("error").fire(C)})},_=()=>{y.unsubscribe(),e.off("updateV2",m),e.off("destroy",_)};return e.on("updateV2",m),e.on("destroy",_),_}function O0(){}function vx(n,e){return n===O0?e:function(){var r=n.apply(this,arguments);if(r&&typeof r.then=="function"){for(var o=this,l=arguments.length,a=new Array(l);l--;)a[l]=arguments[l];return r.then(function(){return e.apply(o,a)})}return e.apply(this,arguments)}}function wx(n,e){return n===O0?e:function(){n.apply(this,arguments),e.apply(this,arguments)}}const _a=new WeakMap;function sg(){return st.Events(null,"load","sync","error")}class En{static getOrCreateDocument(e,r,o,l){var a,d;const h=C0(e),y=(d=(a=e.table(r).schema.yProps)===null||a===void 0?void 0:a.find(m=>m.prop===o))===null||d===void 0?void 0:d.updatesTable;if(!y)throw new Error(`Updates table for ${r}.${o} not found`);return yx(e,h,r,o,y,l)}static load(e,r){var o;let l=_a.get(e);return l?(++l.refCount,(r==null?void 0:r.gracePeriod)!=null&&l.graceTimeout<r.gracePeriod&&(l.graceTimeout=r.gracePeriod),l.graceTimer&&(clearTimeout(l.graceTimer),l.graceTimer=null)):(l=new En(e),l.graceTimeout=(o=r==null?void 0:r.gracePeriod)!==null&&o!==void 0?o:-1,_a.set(e,l)),l}static release(e){if(!e||Oa.has(e))return;const r=_a.get(e);r?--r.refCount<=0&&(r.graceTimeout<0?r._release():r.graceTimer||(r.graceTimer=setTimeout(()=>{r.graceTimer=null,r.refCount===0&&r._release()},r.graceTimeout))):e.destroy()}_release(){this.doc&&Promise.resolve(En.on("beforeunload").fire(this)).finally(()=>{var e;this.refCount===0&&((e=this.doc)===null||e===void 0||e.destroy())})}static for(e){return _a.get(e)}static get currentUpdateRow(){return I0}get whenLoaded(){return this._whenLoaded||(this._whenLoaded=new Promise((e,r)=>{if(!this.doc){r(new Error("No Y.Doc associated with this provider"));return}this.doc.isLoaded?e():this._error?r(this._error):Oa.has(this.doc)?r(new st.AbortError("Document was destroyed before loaded")):(this.on("load",e),this.on("error",r),this.doc.on("destroy",()=>r(new st.AbortError("Document was destroyed before loaded"))))})),this._whenLoaded}get whenSynced(){return this._whenSynced||(this._whenSynced=new Promise((e,r)=>{if(!this.doc){r(new Error("No Y.Doc associated with this provider"));return}this.doc.isSynced?e():this._error?r(this._error):Oa.has(this.doc)?r(new st.AbortError("Document was destroyed before synced")):(this.on("sync",e),this.on("error",r),this.doc.on("destroy",()=>r(new st.AbortError("Document was destroyed before synced"))))})),this._whenSynced}constructor(e){this.refCount=1,this.cleanupHandlers=[],this.graceTimeout=-1,this.doc=null,this.destroyed=!1,this.on=sg(),this.doc=e,this.off=(d,h)=>{var y;return(y=this.on[d])===null||y===void 0?void 0:y.unsubscribe(h)},"dispose"in Symbol&&(this[Symbol.dispose]=()=>En.release(e)),e.on("load",()=>this.on("load").fire()),e.on("sync",d=>d!==!1&&this.on("sync").fire()),e.on("destroy",this.destroy.bind(this)),this.on("error",d=>{this._error=d});const{db:r,parentTable:o,parentId:l,updatesTable:a}=e.meta||{};if(!r||!o||!a)throw new Error("Missing Dexie-related metadata in Y.Doc. Documents need to be obtained through Y.Doc properties from dexie queries.");if(!r.table(o)||!r.table(a))throw new Error(`Table ${o} or ${a} not found in db`);jh(e),this.stopObserving=gx(this,e,r,o,a,l),En.on("new").fire(this)}destroy(){var e,r,o;console.debug(`Y.Doc ${(r=(e=this.doc)===null||e===void 0?void 0:e.meta)===null||r===void 0?void 0:r.parentId} was destroyed`),_a.delete(this.doc),this.doc=null,this.destroyed=!0,this.refCount=0,(o=this.stopObserving)===null||o===void 0||o.call(this),this.on=sg(),this.cleanupHandlers.forEach(l=>l())}addCleanupHandler(e){this.cleanupHandlers.push(typeof e=="function"?e:()=>e.unsubscribe())}}En.on=st.Events(null,{new:[wx],beforeunload:[vx]});En.getDocCache=C0;st.DexieYProvider?En=st.DexieYProvider||En:st.DexieYProvider=En;const ah=3e4;class bx extends Tk{constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const r=Wc();this.getLocalState()!==null&&ah/2<=r-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const o=[];this.meta.forEach((l,a)=>{a!==this.clientID&&ah<=r-l.lastUpdated&&this.states.has(a)&&o.push(a)}),o.length>0&&j0(this,o,"timeout")},Di(ah/10)),e.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){const r=this.clientID,o=this.meta.get(r),l=o===void 0?0:o.clock+1,a=this.states.get(r);e===null?this.states.delete(r):this.states.set(r,e),this.meta.set(r,{clock:l,lastUpdated:Wc()});const d=[],h=[],y=[],m=[];e===null?m.push(r):a==null?e!=null&&d.push(r):(h.push(r),Ia(a,e)||y.push(r)),(d.length>0||y.length>0||m.length>0)&&this.emit("change",[{added:d,updated:y,removed:m},"local"]),this.emit("update",[{added:d,updated:h,removed:m},"local"])}setLocalStateField(e,r){const o=this.getLocalState();o!==null&&this.setLocalState({...o,[e]:r})}getStates(){return this.states}}const j0=(n,e,r)=>{const o=[];for(let l=0;l<e.length;l++){const a=e[l];if(n.states.has(a)){if(n.states.delete(a),a===n.clientID){const d=n.meta.get(a);n.meta.set(a,{clock:d.clock+1,lastUpdated:Wc()})}o.push(a)}}o.length>0&&(n.emit("change",[{added:[],updated:[],removed:o},r]),n.emit("update",[{added:[],updated:[],removed:o},r]))},_x=(n,e,r=n.states)=>{const o=e.length,l=xl();rt(l,o);for(let a=0;a<o;a++){const d=e[a],h=r.get(d)||null,y=n.meta.get(d).clock;rt(l,d),rt(l,y),or(l,JSON.stringify(h))}return Hn(l)},kx=(n,e,r)=>{const o=nu(e),l=Wc(),a=[],d=[],h=[],y=[],m=Ct(o);for(let _=0;_<m;_++){const b=Ct(o);let x=Ct(o);const C=JSON.parse(sr(o)),j=n.meta.get(b),T=n.states.get(b),W=j===void 0?0:j.clock;(W<x||W===x&&C===null&&n.states.has(b))&&(C===null?b===n.clientID&&n.getLocalState()!=null?x++:n.states.delete(b):n.states.set(b,C),n.meta.set(b,{clock:x,lastUpdated:l}),j===void 0&&C!==null?a.push(b):j!==void 0&&C===null?y.push(b):C!==null&&(Ia(C,T)||h.push(b),d.push(b)))}(a.length>0||h.length>0||y.length>0)&&n.emit("change",[{added:a,updated:h,removed:y},r]),(a.length>0||d.length>0||y.length>0)&&n.emit("update",[{added:a,updated:d,removed:y},r])};function Pe(n,e,r,o){return new(r||(r=Promise))(function(l,a){function d(m){try{y(o.next(m))}catch(_){a(_)}}function h(m){try{y(o.throw(m))}catch(_){a(_)}}function y(m){var _;m.done?l(m.value):(_=m.value,_ instanceof r?_:new r(function(b){b(_)})).then(d,h)}y((o=o.apply(n,e||[])).next())})}function xx(n){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&n[e],o=0;if(r)return r.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Hr(n){return this instanceof Hr?(this.v=n,this):new Hr(n)}function Sx(n,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,l=r.apply(n,e||[]),a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",function(b){return function(x){return Promise.resolve(x).then(b,m)}}),o[Symbol.asyncIterator]=function(){return this},o;function d(b,x){l[b]&&(o[b]=function(C){return new Promise(function(j,T){a.push([b,C,j,T])>1||h(b,C)})},x&&(o[b]=x(o[b])))}function h(b,x){try{(function(C){C.value instanceof Hr?Promise.resolve(C.value.v).then(y,m):_(a[0][2],C)})(l[b](x))}catch(C){_(a[0][3],C)}}function y(b){h("next",b)}function m(b){h("throw",b)}function _(b,x){b(x),a.shift(),a.length&&h(a[0][0],a[0][1])}}function Ex(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=n[Symbol.asyncIterator];return r?r.call(n):(n=xx(n),e={},o("next"),o("throw"),o("return"),e[Symbol.asyncIterator]=function(){return this},e);function o(l){e[l]=n[l]&&function(a){return new Promise(function(d,h){(function(y,m,_,b){Promise.resolve(b).then(function(x){y({value:x,done:_})},m)})(d,h,(a=n[l](a)).done,a.value)})}}}const Cx={}.hasOwnProperty;function td(n,e,r){if(n&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(n)))if(typeof e!="string"&&"length"in e){(function(m){if(!m)throw new Error("Assertion Failed")})(typeof r!="string"&&"length"in r);for(var o=0,l=e.length;o<l;++o)td(n,e[o],r[o])}else{var a=e.indexOf(".");if(a!==-1){var d=e.substr(0,a),h=e.substr(a+1);if(h==="")r===void 0?Array.isArray(n)?isNaN(parseInt(d))||n.splice(parseInt(d),1):delete n[d]:n[d]=r;else{var y=n[d];y&&(function(m,_){return Cx.call(m,_)})(n,d)||(y=n[d]={}),td(y,h,r)}}else r===void 0?Array.isArray(n)&&!isNaN(parseInt(e))?n.splice(e,1):delete n[e]:n[e]=r}}const Ix=typeof self<"u"&&typeof crypto<"u"?(n,e=crypto.getRandomValues.bind(crypto))=>{const r=new Uint8Array(n);return e(r),self.btoa(String.fromCharCode.apply(null,r))}:typeof Buffer<"u"?(n,e=Ox)=>{const r=Buffer.alloc(n);return e(r),r.toString("base64")}:()=>{throw new Error("No implementation of randomString was found")};function Ox(n){for(let e=0;e<n.length;++e)n[e]=Math.floor(256*Math.random())}function fp(n){return typeof n=="string"||!!(Array.isArray(n)&&n.some(e=>fp(e))&&n.every(T0))}function T0(n){return typeof n=="string"||typeof n=="number"||Array.isArray(n)&&n.every(T0)}function jx(n,e,r){const o=n[e]||(n[e]={}),l=r.keys.map(a=>typeof a=="string"?a:JSON.stringify(a));switch(r.type){case"insert":case"upsert":l.forEach((a,d)=>{o[a]={type:"ups",val:r.values[d]}});break;case"update":case"modify":l.forEach((a,d)=>{const h=r.type==="update"?r.changeSpecs[d]:r.changeSpec,y=o[a];if(y)switch(y.type){case"ups":for(const[m,_]of Object.entries(h))td(y.val,m,_);break;case"del":break;case"upd":Object.assign(y.mod,h)}else o[a]={type:"upd",mod:h}});break;case"delete":l.forEach(a=>{o[a]={type:"del"}})}return n}function lg(n,e){for(const{table:r,muts:o}of e)for(const l of o)jx(n,r,l)}async function*Tx(n){let e=0,r=new Uint8Array(4),o=0,l=[],a=0;for await(const d of n){const h=new DataView(d.buffer,d.byteOffset,d.byteLength);let y=0;for(;y<d.byteLength;)switch(e){case 0:if(y+4>d.byteLength){for(const m of d.slice(y)){if(o===4)break;r[o++]=m,++y}if(o<4)break}else if(o>0&&o<4)for(const m of d.slice(y,y+4-o))r[o++]=m,++y;case 1:a=o===4?new DataView(r.buffer,0,4).getUint32(0,!1):h.getUint32(y,!1),o?o=0:y+=4;case 2:if(y>=d.byteLength){e=2;break}if(y+a>d.byteLength)l.push(d.slice(y)),a-=d.byteLength-y,e=2,y=d.byteLength;else{if(l.length>0){const m=new Uint8Array(l.reduce((b,x)=>b+x.byteLength,a));let _=0;for(const b of l)m.set(b,_),_+=b.byteLength;m.set(d.slice(y,y+a),_),l=[],yield m}else yield d.slice(y,y+a);y+=a,e=0}}}}function P0(n,e){return Pe(this,void 0,void 0,function*(){try{const r=yield navigator.serviceWorker.ready;if(e==="push"&&r.sync&&(yield r.sync.register(`dexie-cloud:${n.name}`)),!r.active)throw new Error("Failed to trigger sync - there's no active service worker");return void r.active.postMessage({type:"dexie-cloud-sync",dbName:n.name,purpose:e})}catch{}})}function Ti(n,e){n.cloud.usingServiceWorker?P0(n,e):n.localSyncEvent.next({purpose:e})}const Px="fromBase64"in Uint8Array,Nx="toBase64"in Uint8Array.prototype,hp=typeof Buffer<"u"?n=>Buffer.from(n,"base64"):Px?n=>Uint8Array.fromBase64(n):n=>{const e=atob(n),r=e.length,o=new Uint8Array(r);for(var l=0;l<r;l++)o[l]=e.charCodeAt(l);return o},jl=typeof Buffer<"u"?n=>ArrayBuffer.isView(n)?Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("base64"):Buffer.from(n).toString("base64"):Nx?n=>(ArrayBuffer.isView(n)?n:new Uint8Array(n)).toBase64():n=>{const e=ArrayBuffer.isView(n)?n:new Uint8Array(n),r=[];for(let o=0,l=e.length;o<l;o+=4096){const a=e.subarray(o,o+4096);r.push(String.fromCharCode.apply(null,a))}return btoa(r.join(""))};class ds extends Error{constructor({title:e,message:r,messageCode:o,messageParams:l}){super(r),this.name="TokenErrorResponseError",this.title=e,this.messageCode=o,this.messageParams=l}}const uh={},ag={google:'<svg viewBox="0 0 24 24" width="20" height="20"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>',github:'<svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/></svg>',microsoft:'<svg viewBox="0 0 24 24" width="20" height="20"><rect fill="#F25022" x="1" y="1" width="10" height="10"/><rect fill="#00A4EF" x="1" y="13" width="10" height="10"/><rect fill="#7FBA00" x="13" y="1" width="10" height="10"/><rect fill="#FFB900" x="13" y="13" width="10" height="10"/></svg>',apple:'<svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/></svg>'};function Ax(n){return Pe(this,void 0,void 0,function*(){var e;let r;if(ag[n.type])r=ag[n.type];else if(!((e=n.iconUrl)===null||e===void 0)&&e.toLowerCase().endsWith(".svg")){const o=yield(function(l){return Pe(this,void 0,void 0,function*(){if(uh[l])return uh[l];try{const a=yield fetch(l);if(a.ok){const d=yield a.text();if(d.includes("<svg"))return uh[l]=d,d}}catch{}return null})})(n.iconUrl);o&&(r=o)}return{name:"provider",value:n.name,displayName:`Continue with ${n.displayName}`,iconSvg:r,iconUrl:!r&&n.iconUrl?n.iconUrl:void 0,styleHint:n.type}})}function lu(n,e){return new Promise((r,o)=>{const l=Object.assign(Object.assign({submitLabel:"Submit",cancelLabel:"Cancel"},e),{onSubmit:a=>{n.next(void 0),r(a)},onCancel:()=>{n.next(void 0),o(new st.AbortError("User cancelled"))}});n.next(l)})}function nd(n,e,...r){return lu(n,{type:"message-alert",title:e,alerts:r,fields:{},submitLabel:"OK",cancelLabel:null})}function ug(n,e,r){return Pe(this,void 0,void 0,function*(){let o=r||"";for(;!o||!/^[\w-+.]+@([\w-]+\.)+[\w-]{2,10}(\sas\s[\w-+.]+@([\w-]+\.)+[\w-]{2,10})?$/.test(o);)o=(yield lu(n,{type:"email",title:e,alerts:o?[{type:"error",messageCode:"INVALID_EMAIL",message:"Please enter a valid email address",messageParams:{}}]:[],fields:{email:{type:"email",placeholder:"you@somedomain.com"}}})).email;return o})}function cg(n,e,r){return Pe(this,void 0,void 0,function*(){const o=[{type:"info",messageCode:"OTP_SENT",message:"A One-Time password has been sent to {email}",messageParams:{email:e}}];r&&o.push(r);const{otp:l}=yield lu(n,{type:"otp",title:"Enter OTP",alerts:o,fields:{otp:{type:"otp",label:"OTP",placeholder:"Paste OTP here"}}});return l})}class Th extends Error{constructor(e){super(`OAuth redirect initiated for provider: ${e}`),this.name="OAuthRedirectError",this.provider=e}}function wd(n){return Pe(this,void 0,void 0,function*(){var e,r,o;const l=yield n.getCurrentUser(),{accessToken:a,accessTokenExpiration:d,refreshToken:h,refreshTokenExpiration:y,claims:m}=l;if(!a)return null;if(((e=d==null?void 0:d.getTime())!==null&&e!==void 0?e:1/0)>Date.now()&&(((r=l.license)===null||r===void 0?void 0:r.status)||"ok")==="ok")return l;if(!h)throw new Error("Refresh token missing");if(((o=y==null?void 0:y.getTime())!==null&&o!==void 0?o:1/0)<=Date.now())throw new Error("Refresh token has expired");const _=yield bd(n.cloud.options.databaseUrl,l);return yield n.table("$logins").update(m.sub,{accessToken:_.accessToken,accessTokenExpiration:_.accessTokenExpiration,claims:_.claims,license:_.license,data:_.data}),_})}function Dx(n,e,r,o,l){return Pe(this,void 0,void 0,function*(){return e.accessToken&&e.accessTokenExpiration.getTime()>Date.now()?e:e.refreshToken&&(!e.refreshTokenExpiration||e.refreshTokenExpiration.getTime()>Date.now())?yield bd(n,e):yield(function(a,d,h,y){return Pe(this,void 0,void 0,function*(){if(!crypto.subtle)throw typeof location<"u"&&location.protocol==="http:"?new Error("Dexie Cloud Addon needs to use WebCrypto, but your browser has disabled it due to being served from an insecure location. Please serve it from https or http://localhost:<port> (See https://stackoverflow.com/questions/46670556/how-to-enable-crypto-subtle-for-unsecure-origins-in-chrome/46671627#46671627)"):new Error("This browser does not support WebCrypto.");const{privateKey:m,publicKey:_}=yield crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!1,["sign","verify"]);if(!m||!_)throw new Error("Could not generate RSA keypair");a.nonExportablePrivateKey=m;const b=(function(x){const C=jl(x);return(function(j){let T=`-----BEGIN PUBLIC KEY-----
`;for(;j.length>0;)T+=j.substring(0,64)+`
`,j=j.substring(64);return T+="-----END PUBLIC KEY-----",T})(C)})(yield crypto.subtle.exportKey("spki",_));a.publicKey=_;try{const x=yield d({public_key:b,hints:y});if(x.type==="error")throw new ds(x);if(x.type!=="tokens")throw new Error(`Unexpected response type from token endpoint: ${x.type}`);return a.accessToken=x.accessToken,a.accessTokenExpiration=new Date(x.accessTokenExpiration),a.refreshToken=x.refreshToken,x.refreshTokenExpiration&&(a.refreshTokenExpiration=new Date(x.refreshTokenExpiration)),a.userId=x.claims.sub,a.email=x.claims.email,a.name=x.claims.name,a.claims=x.claims,a.license={type:x.userType,status:x.claims.license||"ok"},a.data=x.data,x.evalDaysLeft!=null&&(a.license.evalDaysLeft=x.evalDaysLeft),x.userValidUntil!=null&&(a.license.validUntil=new Date(x.userValidUntil)),x.alerts&&x.alerts.length>0&&(yield lu(h,{type:"message-alert",title:"Authentication Alert",fields:{},alerts:x.alerts})),a}catch(x){if(x instanceof Th||(x==null?void 0:x.name)==="OAuthRedirectError")throw x;if(x instanceof ds)throw yield nd(h,x.title,{type:"error",messageCode:x.messageCode,message:x.message,messageParams:{}}),x;let C="We're having a problem authenticating right now.";throw x instanceof TypeError&&(C=typeof navigator!==void 0&&!navigator.onLine?"You seem to be offline. Please connect to the internet and try again.":st.debug||typeof location<"u"&&(location.hostname==="localhost"||location.hostname==="127.0.0.1")?`Could not connect to server. Please verify that your origin '${location.origin}' is whitelisted using \`npx dexie-cloud whitelist\``:"Could not connect to server. Please verify the connection.",yield nd(h,"Authentication Failed",{type:"error",messageCode:"GENERIC_ERROR",message:C,messageParams:{}}).catch(()=>{})),x}})})(e,r,o,l)})}function bd(n,e){return Pe(this,void 0,void 0,function*(){if(!e.refreshToken)throw new Error("Cannot refresh token - refresh token is missing.");if(!e.nonExportablePrivateKey)throw new Error("login.nonExportablePrivateKey is missing - cannot sign refresh token without a private key.");const r=Date.now(),o="RSASSA-PKCS1-v1_5",l=new TextEncoder().encode(e.refreshToken+r),a=yield crypto.subtle.sign(o,e.nonExportablePrivateKey,l),d=jl(a),h={grant_type:"refresh_token",refresh_token:e.refreshToken,scopes:["ACCESS_DB"],signature:d,signing_algorithm:o,time_stamp:r},y=yield fetch(`${n}/token`,{body:JSON.stringify(h),method:"post",headers:{"Content-Type":"application/json"},mode:"cors"});if(y.status!==200)throw new Error(`RefreshToken: Status ${y.status} from ${n}/token`);const m=yield y.json();if(m.type==="error")throw new ds(m);return e.accessToken=m.accessToken,e.accessTokenExpiration=m.accessTokenExpiration?new Date(m.accessTokenExpiration):void 0,e.claims=m.claims,e.license={type:m.userType,status:m.claims.license||"ok"},m.evalDaysLeft!=null&&(e.license.evalDaysLeft=m.evalDaysLeft),m.userValidUntil!=null&&(e.license.validUntil=new Date(m.userValidUntil)),m.data&&(e.data=m.data),e})}const dg=new WeakMap;class pp{constructor(e,r){dg.set(this,e),Object.assign(this,r)}static load(e,r){return e.table("$logins").get(r).then(o=>new pp(e,o||{userId:r,claims:{sub:r},lastLogin:new Date(0)}))}save(){return Pe(this,void 0,void 0,function*(){dg.get(this).table("$logins").put(this)})}}const Un={userId:"unauthorized",name:"Unauthorized",claims:{sub:"unauthorized"},lastLogin:new Date(0)};try{Object.freeze(Un),Object.freeze(Un.claims)}catch{}function N0(n,e){return cs(Gn(n).pipe(ir(e)))}function A0(n){return Pe(this,void 0,void 0,function*(){const e=yield Ph(n);if(e){if(!(yield(function(r,o,l){return Pe(this,void 0,void 0,function*(){const a=[{type:"warning",messageCode:"LOGOUT_CONFIRMATION",message:`{numUnsyncedChanges} unsynced changes will get lost!
                Logout anyway?`,messageParams:{currentUserId:o,numUnsyncedChanges:l.toString()}}];return yield lu(r,{type:"logout-confirmation",title:"Confirm Logout",alerts:a,fields:{},submitLabel:"Confirm logout",cancelLabel:"Cancel"}).then(()=>!0).catch(()=>!1)})})(n.cloud.userInteraction,n.cloud.currentUserId,e)))throw new Error("User cancelled logout due to unsynced changes");yield Ph(n,{deleteUnsyncedData:!0})}})}function Ph(n){return Pe(this,arguments,void 0,function*(e,{deleteUnsyncedData:r=!1}={}){const[o,l]=yield e.dx.transaction("rw",e.dx.tables,a=>Pe(this,void 0,void 0,function*(){const d=a.idbtrans;d.disableChangeTracking=!0,d.disableAccessControl=!0;const h=a.storeNames.filter(m=>m.endsWith("_mutations")),y=(yield Promise.all(h.map(m=>a.table(m).count()))).reduce((m,_)=>m+_,0);if(y>0&&!r)return[y,!1];e.$syncState.delete("syncState");for(const m of e.dx.tables)m.name!=="$jobs"&&m.name!=="$syncState"&&m.clear();return[y,!0]}));return l&&(yield N0(e.cloud.currentUser,a=>a.userId===Un.userId),yield e.cloud.sync({purpose:"pull",wait:!0})),o})}class Nh extends Error{constructor(e,r){super(r||`${e.status} ${e.statusText}`),this.httpStatus=e.status}get name(){return"HttpError"}}const fg={access_denied:"Access was denied by the authentication provider.",invalid_state:"The authentication response could not be verified. Please try again.",email_not_verified:"Your email address must be verified before you can log in.",expired_code:"The authentication code has expired. Please try again.",provider_error:"An error occurred with the authentication provider.",network_error:"A network error occurred during authentication. Please check your connection and try again."};class qr extends Error{constructor(e,r,o){super(o||fg[e]),this.name="OAuthError",this.code=e,this.provider=r}get userMessage(){return fg[this.code]||this.message}}const Cc={providers:[],otpEnabled:!0};function Rx(n){typeof sessionStorage<"u"&&sessionStorage.setItem("dexie-cloud-oauth-provider",n.provider);const e=(function(r){const o=new URL(`${r.databaseUrl}/oauth/login/${r.provider}`),l=r.redirectUri||(typeof window<"u"?window.location.href:"");return l&&o.searchParams.set("redirect_uri",l),o.toString()})(n);window.location.href=e}function Lx(n){const{userInteraction:e}=n.cloud;return function(r){return Pe(this,arguments,void 0,function*({public_key:o,hints:l}){var a,d;let h;const y=(a=n.cloud.options)===null||a===void 0?void 0:a.databaseUrl;if(!y)throw new Error("No database URL given.");if(l!=null&&l.oauthCode&&l.provider)return yield(function(b){return Pe(this,void 0,void 0,function*(){const{databaseUrl:x,code:C,publicKey:j,scopes:T=["ACCESS_DB"]}=b,W={grant_type:"authorization_code",code:C,public_key:j,scopes:T};try{const q=yield fetch(`${x}/token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(W),mode:"cors"});if(!q.ok){if(q.status===400||q.status===401)try{const ie=yield q.json();if(ie.type==="error")throw ie.messageCode==="INVALID_OTP"?new qr("expired_code",void 0,ie.message):new ds(ie)}catch(ie){if(ie instanceof qr||ie instanceof ds)throw ie}const ce=yield q.text().catch(()=>q.statusText);throw new qr("provider_error",void 0,`Token exchange failed: ${q.status} ${ce}`)}const X=yield q.json();if(X.type==="error")throw new ds(X);if(X.type!=="tokens")throw new qr("provider_error",void 0,`Unexpected response type: ${X.type}`);return X}catch(q){throw q instanceof qr||q instanceof ds?q:q instanceof TypeError?new qr("network_error"):q}})})({databaseUrl:y,code:l.oauthCode,publicKey:o,scopes:["ACCESS_DB"]});if(l!=null&&l.provider)throw hg(n,l.provider),new Th(l.provider);if((l==null?void 0:l.grant_type)==="demo")h={demo_user:yield ug(e,"Enter a demo user email",(l==null?void 0:l.email)||(l==null?void 0:l.userId)),grant_type:"demo",scopes:["ACCESS_DB"],public_key:o};else if(l!=null&&l.otpId&&l.otp)h={grant_type:"otp",otp_id:l.otpId,otp:l.otp,scopes:["ACCESS_DB"],public_key:o};else{const b=((d=n.cloud.options)===null||d===void 0?void 0:d.socialAuth)!==!1,x=yield(function(j){return Pe(this,arguments,void 0,function*(T,W=!0){if(!W)return Cc;try{const q=yield fetch(`${T}/auth-providers`,{method:"GET",headers:{Accept:"application/json"},mode:"cors"});return q.status===404?Cc:q.ok?yield q.json():Cc}catch{return Cc}})})(y,b);if(x.providers.length>0){const j=yield(function(T,W,q){return Pe(this,arguments,void 0,function*(X,ce,ie,ee="Choose login method",ve=[]){const pe=[...yield Promise.all(ce.map(Ax))];return ie&&pe.push({name:"otp",value:"email",displayName:"Continue with email",iconSvg:'<svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="4" width="20" height="16" rx="2"/><path d="M22 6L12 13 2 6"/></svg>',styleHint:"otp"}),new Promise((se,we)=>{const ke={type:"generic",title:ee,alerts:ve,options:pe,fields:{},submitLabel:"",cancelLabel:"Cancel",onSubmit:Ce=>{X.next(void 0),se("otp"in Ce?{type:"otp"}:"provider"in Ce?{type:"provider",provider:Ce.provider}:{type:"otp"})},onCancel:()=>{X.next(void 0),we(new st.AbortError("User cancelled"))}};X.next(ke)})})})(e,x.providers,x.otpEnabled,"Sign in");if(j.type==="provider")throw hg(n,j.provider),new Th(j.provider)}const C=yield ug(e,"Enter email address",l==null?void 0:l.email);h=/@demo.local$/.test(C)?{demo_user:C,grant_type:"demo",scopes:["ACCESS_DB"],public_key:o}:{email:C,grant_type:"otp",scopes:["ACCESS_DB"]}}const m=yield fetch(`${y}/token`,{body:JSON.stringify(h),method:"post",headers:{"Content-Type":"application/json",mode:"cors"}});if(m.status!==200){const b=yield m.text();throw yield nd(e,"Token request failed",{type:"error",messageCode:"GENERIC_ERROR",message:b,messageParams:{}}).catch(()=>{}),new Nh(m,b)}const _=yield m.json();if(_.type==="tokens"||_.type==="error")return _;if(h.grant_type==="otp"&&"email"in h){if(_.type!=="otp-sent")throw new Error(`Unexpected response from ${y}/token`);const b=yield cg(e,h.email),x=Object.assign(Object.assign({},h),{otp:b||"",otp_id:_.otp_id,public_key:o});let C=yield fetch(`${y}/token`,{body:JSON.stringify(x),method:"post",headers:{"Content-Type":"application/json"},mode:"cors"});for(;C.status===401;){const j=yield C.text();x.otp=yield cg(e,h.email,{type:"error",messageCode:"INVALID_OTP",message:j,messageParams:{}}),C=yield fetch(`${y}/token`,{body:JSON.stringify(x),method:"post",headers:{"Content-Type":"application/json"},mode:"cors"})}if(C.status!==200){const j=yield C.text();throw new Nh(C,j)}return yield C.json()}throw new Error(`Unexpected response from ${y}/token`)})}}function hg(n,e){var r,o;const l=(r=n.cloud.options)===null||r===void 0?void 0:r.databaseUrl;if(!l)throw new Error("No database URL given.");Rx({databaseUrl:l,provider:e,redirectUri:((o=n.cloud.options)===null||o===void 0?void 0:o.oauthRedirectUri)||(typeof window<"u"?window.location.href:void 0)})}function Ic(n,...e){globalThis.console[n](...e)}function Oc(n,e){return Pe(this,void 0,void 0,function*(){var r;const o=yield n.getCurrentUser(),l=o.userId;if(o.isLoggedIn&&(!e||!e.email&&!e.userId)){if((((r=o.license)===null||r===void 0?void 0:r.status)||"ok")==="ok"&&o.accessToken&&(!o.accessTokenExpiration||o.accessTokenExpiration.getTime()>Date.now()))return!1;if(o.refreshToken&&(!o.refreshTokenExpiration||o.refreshTokenExpiration.getTime()>Date.now()))return yield wd(n),!1}const a=new pp(n,{claims:{},lastLogin:new Date(0)});try{yield Dx(n.cloud.options.databaseUrl,a,n.cloud.options.fetchTokens||Lx(n),n.cloud.userInteraction,e)}catch(d){if(d.name==="OAuthRedirectError")return!1;throw d}return l!==Un.userId&&a.userId!==l&&(yield A0(n)),yield(function(d,h){return Pe(this,void 0,void 0,function*(){const y=d.table("$logins");yield d.transaction("rw",y,m=>Pe(this,void 0,void 0,function*(){const _=yield y.toArray();yield Promise.all(_.filter(b=>b.userId!==h.userId&&b.isLoggedIn).map(b=>(b.isLoggedIn=!1,y.put(b)))),h.isLoggedIn=!0,h.lastLogin=new Date;try{yield h.save()}catch(b){try{b.name==="DataCloneError"&&(Ic("debug","Login context property names:",Object.keys(h)),Ic("debug","Login context property names:",Object.keys(h)),Ic("debug","Login context:",h),Ic("debug","Login context JSON:",JSON.stringify(h)))}catch{}throw b}})),yield N0(d.cloud.currentUser,m=>m.userId===h.userId)})})(n,a),Ti(n,"pull"),a.userId!==l})}const Ah={},ja=typeof self<"u"&&self.document&&typeof navigator<"u"&&navigator.serviceWorker;ja&&ja.ready.then(n=>Ah.registration=n),typeof self<"u"&&"clients"in self&&!self.document&&addEventListener("message",n=>{var e,r;!((r=(e=n.data)===null||e===void 0?void 0:e.type)===null||r===void 0)&&r.startsWith("sw-broadcast-")&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(o=>{var l;return o.id!==((l=n.source)===null||l===void 0?void 0:l.id)&&o.postMessage(n.data)})});class ch{constructor(e){this.name=e}subscribe(e){if(!ja)return()=>{};const r=o=>{var l;((l=o.data)===null||l===void 0?void 0:l.type)===`sw-broadcast-${this.name}`&&e(o.data.message)};return ja.addEventListener("message",r),()=>ja.removeEventListener("message",r)}postMessage(e){var r;typeof self.clients=="object"?[...self.clients.matchAll({includeUncontrolled:!0})].forEach(o=>o.postMessage({type:`sw-broadcast-${this.name}`,message:e})):Ah.registration&&((r=Ah.registration.active)===null||r===void 0||r.postMessage({type:`sw-broadcast-${this.name}`,message:e}))}}const ka=globalThis["lbc-events"]||(globalThis["lbc-events"]=new Map);class jc extends Xt{constructor(e){const r=typeof BroadcastChannel>"u"?new ch(e):new BroadcastChannel(e);super(o=>{function l(h){o.next(h.detail)}function a(h){o.next(h.data)}let d;(function(h,y){ka.has(h)?ka.get(h).push(y):ka.set(h,[y])})(`lbc-${e}`,l);try{r instanceof ch?d=r.subscribe(h=>o.next(h)):r.addEventListener("message",a)}catch{}return()=>{(function(h,y){const m=ka.get(h);if(m){const _=m.indexOf(y);_!==-1&&m.splice(_,1)}})(`lbc-${e}`,l),r instanceof ch?d():r.removeEventListener("message",a)}}),this.name=e,this.bc=r}next(e){this.bc.postMessage(e),(function(r){const o=ka.get(r.type);o&&o.forEach(l=>{try{l(r)}catch{}})})(new CustomEvent(`lbc-${this.name}`,{detail:e}))}}function Dh(n){return Pe(this,arguments,void 0,function*({realms:e,inviteRealms:r}){const o=JSON.stringify([...e.map(d=>({realmId:d,accepted:!0})),...r.map(d=>({realmId:d,accepted:!1}))].sort((d,h)=>d.realmId<h.realmId?-1:d.realmId>h.realmId?1:0)),l=new TextEncoder().encode(o),a=yield crypto.subtle.digest("SHA-1",l);return jl(a)})}function Bc(n){return Object.entries(n.cloud.schema||{}).filter(([,{markedForSync:e}])=>e).map(([e])=>n.tables.filter(({name:r})=>r===e)[0]).filter(e=>e)}function mp(n){return`$${n}_mutations`}function D0(n){var e;const r=(e=/^\$(.*)_mutations$/.exec(n))===null||e===void 0?void 0:e[1];if(!r)throw new Error(`Given mutationTable ${n} is not correct`);return r}const Mx=[].concat;function yp(n){return Mx.apply([],n)}function Rh(n,e){return Pe(this,arguments,void 0,function*(r,o,{since:l={},limit:a=1/0}={}){const d=yield Promise.all(r.map(b=>Pe(this,void 0,void 0,function*(){const x=D0(b.name),C=l[x];let j=C?b.where("rev").above(C):b;a<1/0&&(j=j.limit(a));let T=yield j.toArray();return T=(function(W){return W=W.map(q=>{if(q.type==="modify"&&q.criteria.index===null){const X=Object.assign(Object.assign({},q),{criteria:void 0,changeSpec:void 0,type:"update",keys:q.keys,changeSpecs:[q.changeSpec]});return delete X.criteria,delete X.changeSpec,X}return q}),W})(T),T=(function(W){const q=new Map;for(const X of W)if(X.type==="update"){if(X.keys.length!==1||X.changeSpecs.length!==1)continue;const ce=""+X.keys[0],ie=X.changeSpecs[0];if(Object.values(ie).some(ve=>typeof ve=="object"&&ve&&"@@propmod"in ve))continue;let ee=q.get(ce);ee?ee.push({txid:X.txid,updateSpec:ie}):q.set(ce,[{txid:X.txid,updateSpec:ie}])}return W=W.filter(X=>{if(X.type!=="update"||X.keys.length!==1||X.changeSpecs.length!==1)return!0;const ce=X.changeSpecs[0];if(Object.values(ce).some(pe=>typeof pe=="object"&&pe&&"@@propmod"in pe))return!0;const ie=new Set(Object.keys(X.changeSpecs[0])),ee=""+X.keys[0],ve=q.get(ee);if(!ve)return!0;for(let pe=ve.length-1;pe>=0;--pe){const{txid:se,updateSpec:we}=ve[pe];if(se===X.txid)break;for(const ke of Object.keys(we))ie.delete(ke)}return ie.size!==0}),W})(T),T.map(W=>({table:x,mut:W}))}))),h=yp(d).sort((b,x)=>b.mut.txid===x.mut.txid?b.mut.opNo-x.mut.opNo:b.mut.ts-x.mut.ts),y=[];let m=null,_=null;for(const{table:b,mut:x}of h)m&&m.table===b&&_===x.txid?m.muts.push(x):(m={table:b,muts:[x]},_=x.txid,y.push(m));return y})}function R0(n){const e=new Uint8Array(n);if(typeof crypto<"u")crypto.getRandomValues(e);else for(let r=0;r<n;r++)e[r]=Math.floor(256*Math.random());if(typeof Buffer<"u"&&Buffer.from)return Buffer.from(e).toString("base64");if(typeof btoa<"u")return btoa(String.fromCharCode.apply(null,e));throw new Error("No btoa or Buffer available")}const{toString:Ux}={},pg={replace:function(n){const e=Object.keys(n);let r=null;for(let l=0,a=e.length;l<a;++l)e[l][0]==="$"&&(r=r||[],r.push(e[l]));if(!r)return n;const o={...n};for(const l of r)delete o[l];for(const l of r)o["$"+l]=n[l];return o}};function L0(...n){const e=n.reduce((o,l)=>({...o,...l}),n.reduce((o,l)=>({...l,...o}),{})),r=new WeakMap;return{stringify(o,l,a){return JSON.stringify(o,function(h){const y=this[h],m=(function(_){const b=typeof _;switch(typeof _){case"object":case"function":{if(_===null)return null;const C=Object.getPrototypeOf(_);if(!C)return pg;let j=r.get(C);if(j!==void 0)return j;const T=(x=_,Ux.call(x).slice(8,-1)),W=Object.entries(e).find(([q,X])=>{var ce,ie;return(ie=(ce=X==null?void 0:X.test)===null||ce===void 0?void 0:ce.call(X,_,T))!==null&&ie!==void 0?ie:q===T});return j=W==null?void 0:W[1],j||(j=Array.isArray(_)?null:typeof _=="function"?e.function||null:pg),r.set(C,j),j}default:return e[b]}var x})(y);return m?m.replace(y,l,e):y},a)},parse(o,l){const a=[];return JSON.parse(o,function(d,h){const y=h==null?void 0:h.$t;if(y){const _=e[y];h=_?_.revive(h,l,e):h}let m=a[a.length-1];if(m&&m[0]===h){h={...h};for(const _ of m[1])delete h[_];for(const[_,b]of Object.entries(m[2]))h[_]=b;a.pop()}if(h===void 0||d[0]==="$"&&d!=="$t"){let _,b;m=a[a.length-1],m&&m[0]===this?(_=m[1],b=m[2]):a.push([this,_=[],b={}]),d[0]==="$"&&d!=="$t"?(_.push(d),b[d.substr(1)]=h):b[d]=void 0}return h})}}}const zx={Blob:{test:(n,e)=>e==="Blob",replace:(n,e)=>{const r=e.length;return e.push(n),{$t:"Blob",mimeType:n.type,i:r}},revive:({i:n,mimeType:e},r)=>new Blob([r[n]],{type:e})}};var Fx={number:{replace:n=>{switch(!0){case isNaN(n):return{$t:"number",v:"NaN"};case n===1/0:return{$t:"number",v:"Infinity"};case n===-1/0:return{$t:"number",v:"-Infinity"};default:return n}},revive:({v:n})=>Number(n)}};const Bx={bigint:{replace:n=>({$t:"bigint",v:""+n}),revive:n=>BigInt(n.v)}};var $x={Date:{replace:n=>({$t:"Date",v:isNaN(n.getTime())?"NaN":n.toISOString()}),revive:({v:n})=>new Date(n==="NaN"?NaN:Date.parse(n))}},Kx={Set:{replace:n=>({$t:"Set",v:Array.from(n.entries())}),revive:({v:n})=>new Set(n)}},Vx={Map:{replace:n=>({$t:"Map",v:Array.from(n.entries())}),revive:({v:n})=>new Map(n)}};const Wx=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:void 0;var Hx=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","DataView","BigInt64Array","BigUint64Array"].reduce((n,e)=>({...n,[e]:{replace:(r,o,l)=>({$t:e,v:l.ArrayBuffer.replace(r.byteOffset===0&&r.byteLength===r.buffer.byteLength?r.buffer:r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength),o,l).v}),revive:({v:r},o,l)=>{const a=Wx[e];return a&&new a(l.ArrayBuffer.revive({v:r},o,l))}}}),{});function M0(n){return(function(e){for(var r="",o=0,l=e.length;o<l;o++)r+=U0[e[o]];return r})(jl(n))}function qx(n){return hp((function(e){if(typeof e!="string")throw new Error("invalid decoder input: "+e);for(var r="",o=0,l=e.length;o<l;o++)r+=Lh[e[o]];return r})(n))}const Lh={"-":"=",0:"A",1:"B",2:"C",3:"D",4:"E",5:"F",6:"G",7:"H",8:"I",9:"J",A:"K",B:"L",C:"M",D:"N",E:"O",F:"P",G:"Q",H:"R",I:"S",J:"T",K:"U",L:"V",M:"W",N:"X",O:"Y",P:"Z",Q:"a",R:"b",S:"c",T:"d",U:"e",V:"f",W:"g",X:"h",Y:"i",Z:"j",_:"k",a:"l",b:"m",c:"n",d:"o",e:"p",f:"q",g:"r",h:"s",i:"t",j:"u",k:"v",l:"w",m:"x",n:"y",o:"z",p:"0",q:"1",r:"2",s:"3",t:"4",u:"5",v:"6",w:"7",x:"8",y:"9",z:"+","|":"/"},U0={};for(const n of Object.keys(Lh))U0[Lh[n]]=n;var Gx={ArrayBuffer:{replace:n=>({$t:"ArrayBuffer",v:M0(n)}),revive:({v:n})=>{const e=qx(n);return e.buffer.byteLength===e.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}}};class dh{constructor(e,r){this.buf=e,this.type=r}}function z0(n){const e=new XMLHttpRequest;if(e.overrideMimeType("text/plain; charset=x-user-defined"),e.open("GET",URL.createObjectURL(n),!1),e.send(),e.status!==200&&e.status!==0)throw new Error("Bad Blob access: "+e.status);return e.responseText}function F0(n){const e=new Uint8Array(n.length);for(let r=0;r<n.length;++r)e[r]=n.charCodeAt(r);return e.buffer}var Yx={Blob:{test:(n,e)=>e==="Blob"||n instanceof dh,replace:n=>({$t:"Blob",v:jl(n instanceof dh?n.buf:F0(z0(n))),type:n.type}),revive:({type:n,v:e})=>{const r=hp(e);return typeof Blob!==void 0?new Blob([r]):new dh(r.buffer,n)}}};const B0={...Fx,...Bx,...$x,...Kx,...Vx,...Hx,...Gx,...Yx};function mg(n){return new Promise((e,r)=>{const o=new FileReader;o.onabort=l=>r(new Error("file read aborted")),o.onerror=l=>r(l.target.error),o.onload=l=>e(l.target.result),o.readAsArrayBuffer(n)})}var Qx={undefined:{replace:()=>({$t:"undefined"}),revive:()=>{}}},Jx={File:{test:(n,e)=>e==="File",replace:n=>({$t:"File",v:jl(F0(z0(n))),type:n.type,name:n.name,lastModified:new Date(n.lastModified).toISOString()}),revive:({type:n,v:e,name:r,lastModified:o})=>{const l=hp(e);return new File([l],r,{type:n,lastModified:new Date(o).getTime()})}}};const Xx=typeof BigInt=="function"&&typeof BigInt(0)=="bigint";class yg{toString(){return this.v}constructor(e){this.v=e}}const Zx=Xx?{}:{bigint:{test:n=>n instanceof yg,replace:n=>Object.assign({$t:"bigint"},n),revive:({v:n})=>new yg(n)}},$0=Object.assign(Object.assign(Object.assign(Object.assign({},Qx),Zx),Jx),{PropModification:{test:n=>n instanceof by,replace:n=>Object.assign({$t:"PropModification"},n["@@propmod"]),revive:n=>{var{$t:e}=n,r=(function(o,l){var a={};for(var d in o)Object.prototype.hasOwnProperty.call(o,d)&&l.indexOf(d)<0&&(a[d]=o[d]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function"){var h=0;for(d=Object.getOwnPropertySymbols(o);h<d.length;h++)l.indexOf(d[h])<0&&Object.prototype.propertyIsEnumerable.call(o,d[h])&&(a[d[h]]=o[d[h]])}return a})(n,["$t"]);return new by(r)}}}),$a=L0(B0,$0),eS=(function(...n){const e=L0(B0,zx,...n);return{toBinary(r){const[o,l]=this.stringify(r),a=new ArrayBuffer(4);return new DataView(a).setUint32(0,o.size),new Blob([a,o,l])},stringify(r){const o=[],l=e.stringify(r,o);return[new Blob(o.map(a=>{const d=new ArrayBuffer(4);return new DataView(d).setUint32(0,"byteLength"in a?a.byteLength:a.size),new Blob([d,a])})),l]},async parse(r,o){let l=0;const a=[],d=await mg(o),h=new DataView(d);for(;l<d.byteLength;){const y=h.getUint32(l);l+=4;const m=d.slice(l,l+y);l+=y,a.push(m)}return e.parse(r,a)},async fromBinary(r){const o=new DataView(await mg(r.slice(0,4))).getUint32(0),l=r.slice(4,o+4),a=await(function(d){return new Promise((h,y)=>{const m=new FileReader;m.onabort=_=>y(new Error("file read aborted")),m.onerror=_=>y(_.target.error),m.onload=_=>h(_.target.result),m.readAsText(d)})})(r.slice(o+4));return await this.parse(a,l)}}})($0);function tS(n,e,r){const o=[];for(let l of r){const{table:a,muts:d}=l,h=n.tables.find(_=>_.name===a);if(!h)throw new Error(`Internal error: table ${a} not found in DBCore schema`);const{primaryKey:y}=h;let m=l;d.forEach((_,b)=>{const x=!y.outbound&&(_.type==="upsert"||_.type==="insert");_.keys.forEach((C,j)=>{if(Array.isArray(C)){m===l&&(m=gg(l,x));const T=m.muts[b],W=JSON.stringify(C);T.keys[j]=W}else if(C[0]==="#"){m===l&&(m=gg(l,x));const T=m.muts[b];if(!e.isLoggedIn)throw new Error("Internal error: Cannot sync private IDs before authenticated");const W=`${C}:${e.userId}`;T.keys[j]=W,x&&st.setByKeyPath(T.values[j],y.keyPath,W)}})}),o.push(m)}return o}function gg(n,e){return Object.assign(Object.assign({},n),{muts:e?n.muts.map(r=>r.type!=="insert"&&r.type!=="upsert"||!r.values?Object.assign(Object.assign({},r),{keys:r.keys.slice()}):Object.assign(Object.assign({},r),{keys:r.keys.slice(),values:r.values.slice()})):n.muts.map(r=>Object.assign(Object.assign({},r),{keys:r.keys.slice()}))})}let Mh=new WeakMap;function K0(n){return Pe(this,void 0,void 0,function*(){var e,r;const o=((r=(e=Mh.get(n))===null||e===void 0?void 0:e.getTime())!==null&&r!==void 0?r:0)-Date.now();o>0&&(yield new Promise(l=>setTimeout(l,o)))})}function nS(n,e,r,o,l,a,d,h,y){return Pe(this,void 0,void 0,function*(){const m={Accept:"application/json, application/x-bison, application/x-bison-stream","Content-Type":"application/tson"},_=yield wd(l),b=_==null?void 0:_.accessToken;b&&(m.Authorization=`Bearer ${b}`);const x={v:2,dbID:r==null?void 0:r.remoteDbId,clientIdentity:h,schema:d||{},lastPull:r?{serverRevision:r.serverRevision,yServerRevision:r.yServerRevision,realms:r.realms,inviteRealms:r.inviteRealms}:void 0,baseRevs:o,changes:tS(l.dx.core.schema,y,n),y:e,dxcv:l.cloud.version};l.syncStateChangedEvent.next({phase:"pushing"});const C=$a.stringify(x),j=yield fetch(`${a}/sync`,{method:"post",headers:m,credentials:"include",body:C});if(l.syncStateChangedEvent.next({phase:"pulling"}),(function(T,W){const q=W.headers.get("Ratelimit-Limit"),X=W.headers.get("Ratelimit-Remaining"),ce=W.headers.get("Ratelimit-Reset");if(q&&X&&ce){const ie=Number(q),ee=Math.max(0,Number(X)),ve=Number(ce);if(ee<ie/2){const pe=Math.ceil(ve/(ee+1));Mh.set(T,new Date(Date.now()+1e3*pe))}else Mh.delete(T)}})(l,j),!j.ok)throw new Nh(j);if(j.headers.get("content-type")==="application/x-bison")return eS.fromBinary(yield j.blob());{const T=yield j.text();return $a.parse(T)}})}function xa(n){if(n!=null&&n.cancelled)throw new st.AbortError("Operation was cancelled")}let fl=!1;function V0(n,e,r,o){return Pe(this,void 0,void 0,function*(){yield n.$baseRevs.bulkPut(Object.keys(e).filter(l=>e[l].markedForSync).map(l=>({tableName:l,clientRev:(r[l]||0)+1,serverRev:o}))),yield n.$baseRevs.where("tableName").noneOf(Object.keys(e).filter(l=>e[l].markedForSync)).delete()})}function Uh(n,e={}){for(const{table:r,muts:o}of n){const l=o.length>0?o[o.length-1].rev:null;e[r]=l||e[r]||0}return e}function rS(n,e,r){return Pe(this,void 0,void 0,function*(){const o=yield n.bulkGet(e),l=[],a=[];e.forEach((d,h)=>{const y=o[h];if(y){for(const[m,_]of Object.entries(r[h]))if(m===n.schema.primKey.keyPath){if(ud(_,d)!==0)throw new Error("Cannot change primary key")}else st.setByKeyPath(y,m,_);l.push(d),a.push(y)}}),yield n.schema.primKey.keyPath==null?n.bulkPut(a,l):n.bulkPut(a)})}function W0(n,e){return Pe(this,void 0,void 0,function*(){for(const{table:r,muts:o}of n){if(!e.dx._allTables[r])continue;const l=e.table(r),{primaryKey:a}=l.core.schema,d=h=>{switch(h[0]){case"[":if(h.endsWith("]"))try{return JSON.parse(h)}catch{}return h;case"#":return h.endsWith(":"+e.cloud.currentUserId)?h.substr(0,h.length-e.cloud.currentUserId.length-1):h;default:return h}};for(const h of o){const y=h.keys.map(d);switch(h.type){case"insert":a.outbound?yield l.bulkAdd(h.values,y):(y.forEach((m,_)=>{st.setByKeyPath(h.values[_],a.keyPath,m)}),yield l.bulkAdd(h.values));break;case"upsert":a.outbound?yield l.bulkPut(h.values,y):(y.forEach((m,_)=>{st.setByKeyPath(h.values[_],a.keyPath,m)}),yield l.bulkPut(h.values));break;case"modify":y.length===1?yield l.update(y[0],h.changeSpec):yield l.where(":id").anyOf(y).modify(h.changeSpec);break;case"update":yield rS(l,y,h.changeSpecs);break;case"delete":yield l.bulkDelete(y)}}}})}typeof self<"u"&&typeof navigator<"u"&&(fl=navigator.onLine,self.addEventListener("online",()=>fl=!0),self.addEventListener("offline",()=>fl=!1));const Oo="dexie-cloud-syncer";function H0(n,e){return n.where("i").between(e,1/0,!0).toArray()}function Ta(n,e,r){var o,l,a;if(!n.dx._allTables[e])return;const d=(a=(l=(o=n.table(e))===null||o===void 0?void 0:o.schema.yProps)===null||l===void 0?void 0:l.find(h=>h.prop===r))===null||a===void 0?void 0:a.updatesTable;return d&&n.dx._allTables[d]?n.table(d):void 0}function q0(n,e){return Pe(this,void 0,void 0,function*(){var r;const o={};let l,a=!1;for(const d of n)try{switch(d.type){case"u-s":{const h=Ta(e,d.table,d.prop);if(h){const y={k:d.k,u:d.u};d.r&&(y.r=d.r,l=d.r),o[h.name]=yield h.add(y)}break}case"u-ack":{const h=Ta(e,d.table,d.prop);h&&(yield e.transaction("rw",h,y=>Pe(this,void 0,void 0,function*(){let m=yield y.table(h.name).get(Oo);yield y.table(h.name).put(Object.assign(Object.assign({},m||{i:Oo}),{unsentFrom:Math.max((m==null?void 0:m.unsentFrom)||1,d.i+1)}))})));break}case"u-reject":{const h=Ta(e,d.table,d.prop);if(!h)break;const y=(r=yield h.get(d.i))===null||r===void 0?void 0:r.k;if(y!=null){yield e.transaction("rw",h,_=>(_.idbtrans._rejecting_y_ypdate=!0,h.where("i").aboveOrEqual(d.i).filter(b=>ud(b.k,y)===0&&!(1&~(b.f||0))).delete()));const m=En.getDocCache(e.dx).find(d.table,y,d.prop);m&&m.destroy()}break}case"in-sync":{const h=En.getDocCache(e.dx).find(d.table,d.k,d.prop);h&&!h.isSynced&&h.emit("sync",[!0,h]);break}case"y-complete-sync-done":l=d.yServerRev;break;case"outdated-server-rev":a=!0}}catch{}return{receivedUntils:o,resyncNeeded:a,yServerRevision:l}})}function iS(n,e,r){return Pe(this,arguments,void 0,function*(o,l,{yDownloadedRealms:a,realms:d}){if(a&&d&&d.every(_=>a[_]==="*"))return;const h=yield wd(o),y={"Content-Type":"application/json",Accept:"application/octet-stream"};h&&(y.Authorization=`Bearer ${h.accessToken}`);const m=yield fetch(`${l}/y/download`,{body:$a.stringify({downloadedRealms:a||{}}),method:"POST",headers:y,credentials:"include"});if(!m.ok)throw new Error(`Failed to download Yjs documents from server. Status: ${m.status}`);yield(async function(_,...b){let x=_();for(let C=0;C<b.length;C++)x=b[C](x);for await(const C of x);})((function(_){return async function*(){if(!_.body)throw new Error("Response body is not readable");const b=_.body.getReader();try{for(;;){const{done:x,value:C}=await b.read();if(x)return;yield C}}finally{b.releaseLock()}}})(m),Tx,function(_){return Sx(this,arguments,function*(){var b,x,C,j;let T=null,W=null,q=null,X=[];function ce(pe){return Pe(this,void 0,void 0,function*(){const se=X[X.length-1];if(X.length>0){if(!T||!W||!q)throw new Error(`Protocol error from ${l}/y/download`);const we=Ta(o,W,q);we&&(yield we.bulkAdd(X)),X=[]}T&&(W&&q&&se||pe)&&(yield o.$syncState.update("syncState",we=>{const ke=we.yDownloadedRealms||{};ke[T]=pe?"*":{tbl:W,prop:q,key:se.k},we.yDownloadedRealms=ke}))})}try{try{for(var ie,ee=!0,ve=Ex(_);!(b=(ie=yield Hr(ve.next())).done);ee=!0){j=ie.value,ee=!1;const pe=new Sl(j);for(;av(pe);)switch(hl(pe)){case 1:yield Hr(ce(!0)),T=sr(pe);break;case 2:yield Hr(ce(!1)),W=sr(pe),q=sr(pe);break;case 3:{const se=Co(pe),we=mn(pe);X.push({k:se,u:we});break}}yield Hr(ce(!1))}}catch(pe){x={error:pe}}finally{try{ee||b||!(C=ve.return)||(yield Hr(C.call(ve)))}finally{if(x)throw x.error}}yield Hr(ce(!0))}catch(pe){throw pe instanceof st.DexieError||(yield Hr(ce(!1))),pe}})})})}const G0="currentSyncWorker";function _d(n,e,r,o){return Y0(n,e,r,o).then(l=>(o!=null&&o.justCheckIfNeeded||n.syncStateChangedEvent.next({phase:"in-sync"}),l)).catch(l=>Pe(this,void 0,void 0,function*(){return o!=null&&o.justCheckIfNeeded?Promise.reject(l):fl&&(o!=null&&o.retryImmediatelyOnFetchError)&&(l==null?void 0:l.name)==="TypeError"&&/fetch/.test(l==null?void 0:l.message)?(n.syncStateChangedEvent.next({phase:"error",error:l}),yield new Promise(a=>setTimeout(a,500)),yield _d(n,e,r,Object.assign(Object.assign({},o),{retryImmediatelyOnFetchError:!1}))):(yield n.$syncState.update("syncState",{timestamp:new Date,error:""+l}),n.syncStateChangedEvent.next({phase:fl?"error":"offline",error:new Error(""+(l==null?void 0:l.message)||l)}),Promise.reject(l))}))}function Y0(n,e,r){return Pe(this,arguments,void 0,function*(o,l,a,{isInitialSync:d,cancelToken:h,justCheckIfNeeded:y,purpose:m}={isInitialSync:!1}){var _;if(!(!((_=o.cloud.options)===null||_===void 0)&&_.databaseUrl))throw new Error("Internal error: sync must not be called when no databaseUrl is configured");const{databaseUrl:b}=l,x=yield o.getCurrentUser(),C=x.isLoggedIn?Bc(o):[],j=C.map(Ee=>o.table(mp(Ee.name))),T=yield o.getPersistedSyncState(),W=x.isLoggedIn,q=W?(function(Ee,me){const U=(me==null?void 0:me.syncedTables)||[];return Bc(Ee).filter(oe=>!U.includes(oe.name))})(o,T):[];xa(h);const X=q.length>0;if(X){if(y)return!0;yield o.transaction("rw",q,Ee=>Pe(this,void 0,void 0,function*(){Ee.idbtrans.disableChangeTracking=!0,Ee.idbtrans.disableAccessControl=!0,yield(function(me,U,oe){return Pe(this,void 0,void 0,function*(){const ne=new Set(oe||[]);for(const N of me)N.name==="members"?yield N.toCollection().modify(G=>{ne.has(G.realmId)||G.userId&&G.userId!==Un.userId||(G.userId=U.userId)}):N.name==="roles"||(N.name==="realms"?yield N.toCollection().modify(G=>{ne.has(G.realmId)||G.owner!==void 0&&G.owner!==Un.userId||(G.owner=U.userId)}):yield N.toCollection().modify(G=>{G.realmId&&ne.has(G.realmId)||(G.owner&&G.owner!==Un.userId||(G.owner=U.userId),G.realmId&&G.realmId!==Un.userId||(G.realmId=U.userId))}))})})(q,x,T==null?void 0:T.realms)})),xa(h)}const[ce,ie,ee,{yMessages:ve,lastUpdateIds:pe}]=yield o.transaction("r",o.tables,()=>Pe(this,void 0,void 0,function*(){const Ee=yield o.getPersistedSyncState();let me=yield o.$baseRevs.toArray();me=me.filter(ne=>C.some(N=>N.name===ne.tableName));let U=yield Rh(j,o);const oe=yield(function(ne,N){return Pe(this,void 0,void 0,function*(){const G=[],ye={};for(const Ie of N)if(Ie.schema.yProps)for(const Ge of Ie.schema.yProps){const Ve=ne.table(Ge.updatesTable),Re=yield Ve.get(Oo),Ye=(Re==null?void 0:Re.unsentFrom)||1,et=(Re==null?void 0:Re.receivedUntil)||0,fe=Math.min(Ye,et+1),It=yield H0(Ve,fe);It.length>0&&(ye[Ve.name]=It[It.length-1].i);const We={};for(const it of It){const ct=!(1&~(it.f||0));if(ct&&it.i<Ye)continue;const vt=JSON.stringify(it.k)+"/"+ct;let gn=We[vt];gn?(gn.u.push(it.u),gn.i=Math.max(it.i,gn.i)):(We[vt]=gn={i:it.i,k:it.k,isLocal:ct,u:[]},gn.u.push(it.u))}for(const{k:it,isLocal:ct,u:vt,i:gn}of Object.values(We)){const cr=vt.length===1?vt[0]:Gc(vt);if(ct)G.push({type:"u-c",table:Ie.name,prop:Ge.prop,k:it,u:cr,i:gn});else{const Fn=o0(cr);G.push({type:"sv",table:Ie.name,prop:Ge.prop,k:it,sv:Fn})}}}return{yMessages:G,lastUpdateIds:ye}})})(o,C);if(xa(h),X){const ne=[...(T==null?void 0:T.realms)||[],...(T==null?void 0:T.inviteRealms)||[]],N=yield(function(G,ye,Ie,Ge){return Pe(this,void 0,void 0,function*(){const Ve=`upload-${R0(8)}`;if(ye.isLoggedIn&&G.length>0){const Re=new Set(Ge||[]);return(yield Promise.all(G.map(Ye=>Pe(this,void 0,void 0,function*(){const{extractKey:et}=Ye.core.schema.primaryKey;if(!et)return{table:Ye.name,muts:[]};const fe=Ie[Ye.name],It=fe!=null&&fe.generatedGlobalId?Ye.filter(it=>{return et(it),!Re.has(it.realmId||"")&&(ct=et(it),!(vt=fe==null?void 0:fe.idPrefix)||typeof ct=="string"&&ct.startsWith(vt));var ct,vt}):Ye.filter(it=>{const ct=et(it);return!Re.has(it.realmId||"")&&fp(ct)}),We=yield It.toArray();if(We.length>0){const it={type:"upsert",values:We,keys:We.map(et),userId:ye.userId,txid:Ve};return{table:Ye.name,muts:[it]}}return{table:Ye.name,muts:[]}})))).filter(Ye=>Ye.muts.length>0)}return[]})})(q,x,a,ne);return xa(h),U=U.concat(N),[U,Ee,me,oe]}return[U,Ee,me,oe]})),se=ce.some(Ee=>Ee.muts.some(me=>me.keys.length>0))||ve.some(Ee=>Ee.type==="u-c");if(y)return se;if(m==="push"&&!se)return!1;const we=Uh(ce,ie==null?void 0:ie.latestRevisions),ke=(ie==null?void 0:ie.clientIdentity)||Ix(16);xa(h);const Ce=yield nS(ce,ve,ie,ee,o,b,a,ke,x),{done:He,newSyncState:be}=yield o.transaction("rw",o.tables,Ee=>Pe(this,void 0,void 0,function*(){Ee.idbtrans.disableChangeTracking=!0,Ee.idbtrans.disableAccessControl=!0;for(const N of Object.keys(a))Ce.schema[N]&&(a[N]=Ce.schema[N]);yield o.$syncState.put(a,"schema");const me=yield Rh(j,o,{since:we});for(const N of j){const G=D0(N.name);if(me.some(ye=>ye.table===G&&ye.muts.length>0)){if(we[G]){const ye=we[G]||0;yield Promise.all([N.where("rev").belowOrEqual(ye).delete(),o.$baseRevs.where(":id").between([G,-1/0],[G,ye+1],!0,!0).reverse().offset(1).delete()])}}else yield Promise.all([N.clear(),o.$baseRevs.where({tableName:G}).delete()])}Uh(me,we),yield V0(o,a,we,Ce.serverRevision);const U=yield o.getPersistedSyncState();yield(function(N,G,ye){return Pe(this,void 0,void 0,function*(){const Ie=new Set,Ge=new Set,Ve=ye?ye.realms:[],Re=ye?ye.inviteRealms:[],Ye=new Set(G.realms),et=new Set(G.realms.concat(G.inviteRealms));for(const fe of Ve)Ye.has(fe)||(Ge.add(fe),et.has(fe)||Ie.add(fe));for(const fe of Re.concat(Ve))et.has(fe)||Ie.add(fe);if(Ie.size>0||Ge.size>0){const fe=Bc(N);for(const It of fe){let We=["realms","members","roles"].includes(It.name)?Ie:Ge;We.size!==0&&(It.schema.indexes.some(it=>it.keyPath==="realmId"||Array.isArray(it.keyPath)&&it.keyPath[0]==="realmId")?yield It.where("realmId").anyOf([...We]).delete():yield It.filter(it=>!!(it!=null&&it.realmId)&&We.has(it.realmId)).delete())}}if(Ge.size>0&&(ye!=null&&ye.yDownloadedRealms))for(const fe of Ge)delete ye.yDownloadedRealms[fe]})})(o,Ce,U);const oe=U||{syncedTables:[],latestRevisions:{},realms:[],inviteRealms:[],clientIdentity:ke};W&&(oe.syncedTables=C.map(N=>N.name).concat(q.map(N=>N.name))),oe.latestRevisions=we,oe.remoteDbId=Ce.dbId,oe.initiallySynced=!0,oe.realms=Ce.realms,oe.inviteRealms=Ce.inviteRealms,oe.serverRevision=Ce.serverRevision,oe.yServerRevision=Ce.serverRevision,oe.timestamp=new Date,delete oe.error;const ne=Q0(Ce.changes,me);if(yield W0(ne,o),Ce.yMessages){const{receivedUntils:N,resyncNeeded:G,yServerRevision:ye}=yield q0(Ce.yMessages,o);ye&&(oe.yServerRevision=ye),yield(function(Ie,Ge,Ve){return Pe(this,void 0,void 0,function*(){var Re,Ye,et,fe,It;const We={};for(const[ct,vt]of Object.entries(Ie))(Re=We[ct])!==null&&Re!==void 0||(We[ct]={}),We[ct].unsentFrom=vt+1;for(const[ct,vt]of Object.entries(Ge))(Ye=We[ct])!==null&&Ye!==void 0||(We[ct]={}),We[ct].receivedUntil=vt;const it=Object.values(Ve.dx._dbSchema).filter(ct=>ct.yProps).map(ct=>ct.yProps.map(vt=>vt.updatesTable)).flat();for(const ct of it){const vt=We[ct],gn=(et=vt==null?void 0:vt.unsentFrom)!==null&&et!==void 0?et:1,cr=(It=(fe=vt==null?void 0:vt.receivedUntil)!==null&&fe!==void 0?fe:(yield Ve.table(ct).where("i").between(1,1/0).reverse().limit(1).primaryKeys())[0])!==null&&It!==void 0?It:0;yield Ve.transaction("rw",ct,()=>Pe(this,void 0,void 0,function*(){const Fn=yield Ve.table(ct).get(Oo);Fn?(Fn.unsentFrom=Math.max(gn,Fn.unsentFrom||1),Fn.receivedUntil=Math.max(cr,Fn.receivedUntil||0),yield Ve.table(ct).put(Fn)):yield Ve.table(ct).add({i:Oo,unsentFrom:gn,receivedUntil:cr})}))}})})(pe,N,o),G&&(oe.yDownloadedRealms={})}return o.$syncState.put(oe,"syncState"),{done:me.length===0,newSyncState:oe}}));if(!He)return yield K0(o),yield Y0(o,l,a,{isInitialSync:d,cancelToken:h});const Ke=Object.values(a).some(Ee=>{var me;return(me=Ee.yProps)===null||me===void 0?void 0:me.length}),Be=!!Ce.yMessages;if(Ke&&Be)try{yield iS(o,b,be)}catch{}return o.syncCompleteEvent.next(),!1})}function Q0(n,e){const r={};lg(r,n);const o={};return lg(o,e),(function(l,a){var d,h,y;for(const[m,_]of Object.entries(a))for(const[b,x]of Object.entries(_))switch(x.type){case"ups":{const C=(d=l[m])==null?void 0:d[b];if(C)switch(C.type){case"ups":case"upd":delete l[m][b]}}break;case"del":(h=l[m])==null||delete h[b];break;case"upd":{const C=(y=l[m])==null?void 0:y[b];if(C)switch(C.type){case"ups":for(const[j,T]of Object.entries(x.mod))td(C.val,j,T);break;case"del":break;case"upd":for(const j of Object.keys(x.mod))delete C.mod[j]}break}}})(r,o),(function(l,a){const d={};for(const[y,m]of Object.entries(l))for(const[_,b]of Object.entries(m)){const x=d[y]||(d[y]={});(x[b.type]||(x[b.type]=[])).push({key:_,...b})}const h=[];for(const[y,m]of Object.entries(d)){const _={table:y,muts:[]};for(const[b,x]of Object.entries(m))switch(b){case"ups":{const C={type:"upsert",keys:x.map(j=>j.key),values:x.map(j=>j.val),txid:a};_.muts.push(C);break}case"upd":{const C={type:"update",keys:x.map(j=>j.key),changeSpecs:x.map(j=>j.mod),txid:a};_.muts.push(C);break}case"del":{const C={type:"delete",keys:x.map(j=>j.key),txid:a};_.muts.push(C);break}}h.push(_)}return h})(r)}function oS(n){const e=[],r=new Cr(!0),o=new Cr(null);let l=!1,a=new Array(10).fill(0);return o.subscribe(()=>Pe(this,void 0,void 0,function*(){if(!l&&e.length>0){l=!0,a.shift(),a.push(Date.now()),r.next(!1);try{yield(function(){return Pe(this,void 0,void 0,function*(){for(var d,h,y,m,_,b;e.length>0;){const x=e.shift();try{yield cs(n.cloud.syncState.pipe(ir(({phase:j})=>j==="in-sync"||j==="error")));const C=n.cloud.persistedSyncState.value;if(!x)continue;switch(x.type){case"token-expired":const j=n.cloud.currentUser.value,T=yield bd(n.cloud.options.databaseUrl,j);yield n.table("$logins").update(j.userId,{accessToken:T.accessToken,accessTokenExpiration:T.accessTokenExpiration,claims:T.claims,license:T.license,data:T.data});break;case"realm-added":!((d=C==null?void 0:C.realms)===null||d===void 0)&&d.includes(x.realm)||!((h=C==null?void 0:C.inviteRealms)===null||h===void 0)&&h.includes(x.realm)||(yield n.cloud.sync({purpose:"pull",wait:!0}));break;case"realm-accepted":!((y=C==null?void 0:C.realms)===null||y===void 0)&&y.includes(x.realm)||(yield n.cloud.sync({purpose:"pull",wait:!0}));break;case"realm-removed":(!((m=C==null?void 0:C.realms)===null||m===void 0)&&m.includes(x.realm)||!((_=C==null?void 0:C.inviteRealms)===null||_===void 0)&&_.includes(x.realm))&&(yield n.cloud.sync({purpose:"pull",wait:!0}));break;case"realms-changed":yield n.cloud.sync({purpose:"pull",wait:!0});break;case"changes":if(((b=n.cloud.syncState.value)===null||b===void 0?void 0:b.phase)==="error"){Ti(n,"pull");break}yield n.transaction("rw",n.dx.tables,W=>Pe(this,void 0,void 0,function*(){W.idbtrans.disableChangeTracking=!0,W.idbtrans.disableAccessControl=!0;const[q,X,ce]=yield Promise.all([n.getSchema(),n.getPersistedSyncState(),n.getCurrentUser()]);if(!X||!q||!ce)return;if(x.baseRev!==X.serverRevision)return void(typeof x.baseRev!="string"||typeof X.serverRevision!="bigint"&&typeof X.serverRevision!="object"||Ti(n,"pull"));if((yield st.waitFor(Dh(X)))!==x.realmSetHash)return void Ti(n,"pull");let ie=[];if(ce.isLoggedIn){const ee=Bc(n).map(ve=>n.table(mp(ve.name)));ie=yield Rh(ee,n)}if(x.changes.length>0){const ee=Q0(x.changes,ie);yield W0(ee,n)}X.latestRevisions=Uh(ie,X.latestRevisions),X.serverRevision=x.newRev,yield V0(n,q,X.latestRevisions,x.newRev),yield n.$syncState.put(X,"syncState")}))}}catch{}}})})()}finally{a[a.length-1]-a[0]<1e4&&(yield new Promise(d=>setTimeout(d,1e3))),l=!1,r.next(!0)}}})),{enqueue:function(d){e.push(d),o.next(null)},readyToServe:r}}const vg=new WeakMap,Tc={members:"@id, [userId+realmId], [email+realmId], realmId",roles:"[realmId+name]",realms:"@realmId",$jobs:"",$syncState:"",$baseRevs:"[tableName+clientRev]",$logins:"claims.sub, lastLogin"};let sS=0;function Ii(n){"vip"in n&&(n=n.vip);let e=vg.get(n.cloud);if(!e){const r=new ys;let o=new jc(`syncstatechanged-${n.name}`),l=new jc(`synccomplete-${n.name}`);r.id=++sS;let a=!1;e={get name(){return n.name},close:()=>n.close(),transaction:n.transaction.bind(n),table:n.table.bind(n),get tables(){return n.tables},cloud:n.cloud,get $jobs(){return n.table("$jobs")},get $syncState(){return n.table("$syncState")},get $baseRevs(){return n.table("$baseRevs")},get $logins(){return n.table("$logins")},get realms(){return n.realms},get members(){return n.members},get roles(){return n.roles},get initiallySynced(){return a},localSyncEvent:r,get syncStateChangedEvent(){return o},get syncCompleteEvent(){return l},dx:n},Object.assign(e,{getCurrentUser:()=>e.$logins.toArray().then(h=>h.find(y=>y.isLoggedIn)||Un),getPersistedSyncState:()=>e.$syncState.get("syncState"),getSchema:()=>e.$syncState.get("schema").then(h=>{if(h)for(const y of e.tables)y.schema.primKey&&y.schema.primKey.keyPath&&h[y.name]&&(h[y.name].primaryKey=lS(y.schema.primKey.keyPath));return h}),getOptions:()=>e.$syncState.get("options"),setInitiallySynced(h){a=h},reconfigure(){o=new jc(`syncstatechanged-${n.name}`),l=new jc(`synccomplete-${n.name}`)}}),e.messageConsumer=oS(e),e.messageProducer=new ys,vg.set(n.cloud,e)}return e}function lS(n){return typeof n=="string"?n:n?"["+[].join.call(n,"+")+"]":""}const aS=typeof InstallTrigger<"u",J0=typeof navigator<"u"&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\/|Edge\//.test(navigator.userAgent),uS=J0?[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]:NaN,cS=J0&&uS<=605||aS,dS=typeof self<"u"&&"clients"in self&&!self.document,{toString:fS}={};function wg(n){return fS.call(n).slice(8,-1)}function fh(n,e){var r;return e.type==="delete"?e.keys:((r=e.keys)===null||r===void 0?void 0:r.slice())||e.values.map(n.extractKey)}function hS(n,e){return(1&e?n[0].toUpperCase():n[0].toLowerCase())+(2&e?n[1].toUpperCase():n[1].toLowerCase())+(4&e?n[2].toUpperCase():n[2].toLowerCase())}const pS=/b|c|d|f|g|h|j|k|l|m|n|p|q|r|s|t|v|x|y|z/i;function mS(n){return n>="A"&&n<="Z"}let Oi=0;function X0(n,e){const r=new Uint8Array(18),o=new Uint8Array(r.buffer,0,6),l=Date.now();Oi>=l?++Oi:Oi=l,o[0]=Oi/1099511627776,o[1]=Oi/4294967296,o[2]=Oi/16777216,o[3]=Oi/65536,o[4]=Oi/256,o[5]=Oi;const a=new Uint8Array(r.buffer,6);return crypto.getRandomValues(a),n+M0(new Uint8Array(r.buffer))+(e||"")}function yS(n){return{stack:"dbcore",name:"idGenerationMiddleware",level:1,create:e=>Object.assign(Object.assign({},e),{table:r=>{const o=e.table(r);return Object.assign(Object.assign({},o),{mutate:l=>{var a,d;const h=l.trans;if(h.mode==="versionchange"&&(h.disableChangeTracking=!0,h.disableAccessControl=!0),h.disableChangeTracking)return o.mutate(l);if(l.type==="add"||l.type==="put"){const y=(a=n.cloud.schema)===null||a===void 0?void 0:a[r];if(y!=null&&y.generatedGlobalId){if(!((d=n.cloud.options)===null||d===void 0)&&d.databaseUrl&&!n.initiallySynced){const m=fh(o.schema.primaryKey,l);return o.getMany({keys:m,trans:l.trans,cache:"immutable"}).then(_=>{if(_.length<m.length)throw new Error("Unable to create new objects without an initial sync having been performed.");return o.mutate(l)})}return(function(m,_){let b=null;const x=fh(o.schema.primaryKey,m);return x.forEach((C,j)=>{if(C===void 0){const T=m.values[j].realmId||n.cloud.currentUserId,W=T.substr(T.length-3);x[j]=X0(_,W),o.schema.primaryKey.outbound||(b||(b=m.values.slice()),b[j]=st.deepClone(b[j]),st.setByKeyPath(b[j],o.schema.primaryKey.keyPath,x[j]))}else if(typeof C!="string"||!C.startsWith(_)&&!C.startsWith("#"+_))throw new st.ConstraintError(`The ID "${C}" is not valid for table "${r}". Primary '@' keys requires the key to be prefixed with "${_}" (or "#${_}).
If you want to generate IDs programmatically, remove '@' from the schema to get rid of this constraint. Dexie Cloud supports custom IDs as long as they are random and globally unique.`)}),o.mutate(Object.assign(Object.assign({},m),{keys:x,values:b||m.values}))})(l,y.idPrefix)}y!=null&&y.markedForSync&&fh(o.schema.primaryKey,l).forEach((m,_)=>{if(!fp(m)){const b=Array.isArray(m)?m.map(wg).join(","):wg(m);throw new st.ConstraintError(`Invalid primary key type ${b} for table ${r}. Tables marked for sync has primary keys of type string or Array of string (and optional numbers)`)}})}return o.mutate(l)}})}})}}let gS=0;function Sa(n,e){return function(r){const{readers:o,writers:l}=r.trans[e]||(r.trans[e]={writers:[],readers:[]}),a=l.length,d=(a>0?l[a-1].then(()=>n(r),()=>n(r)):n(r)).finally(()=>{o.splice(o.indexOf(d))});return o.push(d),d}}function vS(n,e){return function(r){const{readers:o,writers:l}=r.trans[e]||(r.trans[e]={writers:[],readers:[]});let a=(l.length>0?l[l.length-1].then(()=>n(r),()=>n(r)):o.length>0?(d=o,new Promise(h=>{d.length===0&&h([]);let y=d.length;const m=new Array(y);d.forEach((_,b)=>Promise.resolve(_).then(x=>m[b]={status:"fulfilled",value:x},x=>m[b]={status:"rejected",reason:x}).then(()=>--y||h(m)))})).then(()=>n(r)):n(r)).finally(()=>{l.shift()});var d;return l.push(a),a}}const rl=new Cr(new Set);function Ka(n){var e,r,o,l;return((e=n.cloud.options)===null||e===void 0?void 0:e.disableEagerSync)||((o=(r=n.cloud.currentUser.value)===null||r===void 0?void 0:r.license)===null||o===void 0?void 0:o.status)!=="ok"||!(!((l=n.cloud.options)===null||l===void 0)&&l.databaseUrl)}function wS({currentUserObservable:n,db:e}){return{stack:"dbcore",name:"MutationTrackingMiddleware",level:1,create:r=>{const o=new Set(r.schema.tables.map(d=>d.name)),l=r.schema.tables.filter(d=>!/^\$/.test(d.name)),a=new Map;for(const d of l){const h=`$${d.name}_mutations`;o.has(h)&&a.set(d.name,r.table(h))}return Object.assign(Object.assign({},r),{transaction:(d,h)=>{let y;if(h==="readwrite"){const m=d.filter(_=>{var b,x;return(x=(b=e.cloud.schema)===null||b===void 0?void 0:b[_])===null||x===void 0?void 0:x.markedForSync}).map(_=>mp(_));y=r.transaction([...d,...m],h)}else y=r.transaction(d,h);if(h==="readwrite"){y.txid=R0(16),y.opCount=0,y.currentUser=n.value,rl.value.add(y),rl.next(rl.value);const m=()=>{y.removeEventListener("complete",_),y.removeEventListener("error",m),y.removeEventListener("abort",m),rl.value.delete(y),rl.next(rl.value)},_=()=>{y.mutationsAdded&&!Ka(e)&&Ti(e,"push"),m()};y.addEventListener("complete",_),y.addEventListener("error",m),y.addEventListener("abort",m)}return y},table:d=>{const h=r.table(d);if(/^\$/.test(d))return d.endsWith("_mutations")?Object.assign(Object.assign({},h),{mutate:b=>(b.type!=="add"&&b.type!=="put"||(b.trans.mutationsAdded=!0),h.mutate(b))}):d==="$logins"?Object.assign(Object.assign({},h),{mutate:b=>h.mutate(b).then(x=>(b.trans.mutationsAdded=!0,x)).catch(x=>Promise.reject(x))}):h;const{schema:y}=h,m=a.get(d);return m?(function(b){const x="$lock"+ ++gS;return Object.assign(Object.assign({},b),{count:Sa(b.count,x),get:Sa(b.get,x),getMany:Sa(b.getMany,x),openCursor:Sa(b.openCursor,x),query:Sa(b.query,x),mutate:vS(b.mutate,x)})})(Object.assign(Object.assign({},h),{mutate:b=>{var x,C,j;const T=b.trans;return T.txid?T.disableChangeTracking?h.mutate(b):!((C=(x=e.cloud.schema)===null||x===void 0?void 0:x[d])===null||C===void 0)&&C.markedForSync&&(!((j=T.currentUser)===null||j===void 0)&&j.isLoggedIn)?b.type==="deleteRange"?h.query({query:{range:b.range,index:y.primaryKey},trans:b.trans,values:!1}).then(W=>_({type:"delete",keys:W.result,trans:b.trans,criteria:{index:null,range:b.range}})):_(b):h.mutate(b):h.mutate(b)}})):h;function _(b){var x,C;const j=b.trans,T=(C=(x=e.cloud.options)===null||x===void 0?void 0:x.unsyncedProperties)===null||C===void 0?void 0:C[d],{txid:W,currentUser:{userId:q}}=j,{type:X}=b,ce=++j.opCount;function ie(ee){if(!T)return ee;let ve=ee;for(const pe of Object.keys(ee))T.some(se=>pe===se||pe.startsWith(se+"."))&&(ve===ee&&(ve=Object.assign({},ee)),delete ve[pe]);return ve}return h.mutate(b).then(ee=>{var ve;const{numFailures:pe,failures:se}=ee;let we=X==="delete"?b.keys:ee.results,ke="values"in b?b.values:[],Ce="changeSpec"in b?b.changeSpec:void 0,He="updates"in b?b.updates:void 0,be=!(!He||!("upsert"in b))&&b.upsert;if(pe&&(we=we.filter((me,U)=>!se[U]),ke=ke.filter((me,U)=>!se[U])),T){if(ke=ke.map(me=>{const U=Object.assign({},me);for(const oe of T)delete U[oe];return U}),Ce&&(Ce=ie(Ce),Object.keys(Ce).length===0))return ee;if(He){let me=He.changeSpecs.map(ie),U={keys:[],changeSpecs:[]};const oe=new Wb;let ne=!1;if(!be){for(let N=0,G=me.length;N<G;++N)Object.keys(me[N]).length>0?(U.keys.push(He.keys[N]),U.changeSpecs.push(me[N]),oe.addKey(He.keys[N])):ne=!0;if(He=U,ne){let N=[],G=[];for(let ye=0,Ie=we.length;ye<Ie;++ye)oe.hasKey(we[ye])&&(N.push(we[ye]),G.push(ke[ye]));we=N,ke=G}}}}const Ke=Date.now();let Be="criteria"in b&&b.criteria?Object.assign(Object.assign({},b.criteria),{index:b.criteria.index===y.primaryKey.keyPath?null:b.criteria.index}):void 0;if(T&&(Be!=null&&Be.index)){const me=(ve=y.indexes.find(U=>U.name===Be.index))===null||ve===void 0?void 0:ve.keyPath;(me?typeof me=="string"?[me]:me:[]).some(U=>T==null?void 0:T.includes(U))&&(Be=void 0)}const Ee=b.type==="delete"?{type:"delete",ts:Ke,opNo:ce,keys:we,criteria:Be,txid:W,userId:q}:b.type==="add"?{type:"insert",ts:Ke,opNo:ce,keys:we,txid:W,userId:q,values:ke}:be&&He?{type:"upsert",ts:Ke,opNo:ce,keys:we,values:ke,changeSpecs:He.changeSpecs.filter((me,U)=>!se[U]),txid:W,userId:q}:Be&&Ce?{type:"modify",ts:Ke,opNo:ce,keys:we,criteria:Be,changeSpec:Ce,txid:W,userId:q}:Ce?{type:"update",ts:Ke,opNo:ce,keys:we,changeSpecs:we.map(()=>Ce),txid:W,userId:q}:He?{type:"update",ts:Ke,opNo:ce,keys:He.keys,changeSpecs:He.changeSpecs,txid:W,userId:q}:{type:"upsert",ts:Ke,opNo:ce,keys:we,values:ke,txid:W,userId:q};return"isAdditionalChunk"in b&&b.isAdditionalChunk&&(Ee.isAdditionalChunk=!0),we.length>0||Be?m.mutate({type:"add",trans:j,values:[Ee]}).then(()=>(j.mutationsAdded=!0,ee)):ee})}}})}}}function bS(n,e){return function(r,o){var l;const a=Object.assign(Object.assign({},Tc),r);Object.keys(Tc).forEach(m=>{const _=a[m];if(_==null)throw new Error(`Cannot delete table ${m} as it is needed for access control of Dexie Cloud`);if(!r[m])return;const b=_.split(",").map(j=>j.trim()),x=Tc[m].split(",").map(j=>j.trim()),C=new Set(b.map(j=>j.replace(/([&*]|\+\+)/g,"")));if(b[0]!==x[0])throw new Error(`Cannot override primary key of table ${m}. Please declare it as {${m}: ${JSON.stringify(Tc[m])}`);for(let j=1;j<x.length;++j){const T=x[j];C.has(T.replace(/([&*]|\+\+)/g,""))||(a[m]+=`,${T}`)}});const d=e.cloud.schema||(e.cloud.schema={}),h=new Set;Object.keys(a).forEach(m=>{var _;const b=(_=a[m])===null||_===void 0?void 0:_.trim(),x=d[m]||(d[m]={});b!=null?(/^\@/.test(b)&&(a[m]=a[m].substr(1),x.generatedGlobalId=!0,x.idPrefix=(function(C,j){let T=C[0].toLocaleLowerCase();for(let W=1,q=C.length;W<q&&T.length<3;++W)(pS.test(C[W])||mS(C[W]))&&(T+=C[W].toLowerCase());for(;j.has(T);){if(/\d/g.test(T)){if(T=T.substr(0,T.length-1)+(T[T.length-1]+1),!(T.length>3))continue;T=T.substr(0,3)}else if(T.length<3){T+="2";continue}let W=1,q=T;for(;j.has(q)&&W<8;)q=hS(T,W),++W;if(W<8)T=q;else{let X=T.charCodeAt(2)+1&127;T=T.substr(0,2)+String.fromCharCode(X)}}return T})(m,h),h.add(x.idPrefix)),/^\$/.test(m)||(a[`$${m}_mutations`]="++rev",x.markedForSync=!0),x.deleted&&(x.deleted=!1)):(x.deleted=!0,x.markedForSync=!1,a[`$${m}_mutations`]=null)});const y=n.call(this,a,o);for(const[m,_]of Object.entries(o))if(!((l=_.yProps)===null||l===void 0)&&l.length){const b=d[m];b&&(b.yProps=_.yProps.map(x=>x.prop))}return y}}function Z0(n,e,r){return typeof navigator<"u"&&navigator.locks?navigator.locks.request(n.name+"|"+e,r):r()}const Pa=new Cr(!0),zh=new Cr(!0);Pa.pipe(Sn(n=>n?Ai(!0):Ai(!1).pipe(Tv(2e4))),Pv()).subscribe(zh);const ew=typeof document<"u"?Gr(document,"visibilitychange"):Ai({}),_S=ew.pipe(ir(()=>document.visibilityState==="hidden")),kS=ew.pipe(ir(()=>document.visibilityState==="visible")),tw=typeof window<"u"?hd(kS,Gr(window,"mousedown"),Gr(window,"mousemove"),Gr(window,"keydown"),Gr(window,"wheel"),Gr(window,"touchmove")):Ai({});typeof document<"u"&&hd(Ai(!0),_S,tw).pipe(Wn(()=>document.visibilityState==="visible"),xh(n=>{Pa.value!==n&&Pa.next(n)}),Sn(n=>n?Ai(0).pipe(Tv(16e4),xh(()=>Pa.next(!1))):Ai(0))).subscribe(()=>{});class xS extends Error{constructor(){super(...arguments),this.name="TokenExpiredError"}}const nw=new WeakMap,bg=new WeakMap;function rw(n){let e=bg.get(n);return e||(e=new ys,bg.set(n,e)),e}class SS extends Xt{constructor(e,r,o,l,a,d,h,y){super(m=>new CS(e,r,o,l,a,y,m,d,h))}}let ES=0;class CS extends El{constructor(e,r,o,l,a,d,h,y,m){super(()=>this.teardown()),this.id=++ES,this.subscriptions=new Set,this.reconnecting=!1,this.db=e,this.databaseUrl=e.cloud.options.databaseUrl,this.rev=r,this.yrev=o,this.realmSetHash=l,this.clientIdentity=a,this.user=d,this.subscriber=h,this.lastUserActivity=new Date,this.messageProducer=y,this.webSocketStatus=m,this.connect()}teardown(){this.disconnect()}disconnect(){if(this.webSocketStatus.next("disconnected"),this.pinger&&(clearInterval(this.pinger),this.pinger=null),this.ws)try{this.ws.close()}catch{}this.ws=null;for(const e of this.subscriptions)e.unsubscribe();this.subscriptions.clear()}reconnect(){if(!this.reconnecting){this.reconnecting=!0;try{this.disconnect()}catch{}this.connect().catch(()=>{}).then(()=>this.reconnecting=!1)}}connect(){return Pe(this,void 0,void 0,function*(){if(this.lastServerActivity=new Date,this.pauseUntil&&this.pauseUntil>new Date)return;if(this.ws)throw new Error("Called connect() when a connection is already open");if(!this.databaseUrl)throw new Error("Cannot connect without a database URL");if(this.closed)return;const e=this.user.accessTokenExpiration;if(e&&e<new Date)return void this.subscriber.error(new xS);this.webSocketStatus.next("connecting"),this.pinger=setInterval(()=>Pe(this,void 0,void 0,function*(){if(this.closed)this.teardown();else if(this.ws)try{this.ws.send(JSON.stringify({type:"ping"})),setTimeout(()=>{this.pinger&&(this.closed?this.teardown():this.lastServerActivity<new Date(Date.now()-2e4)&&this.reconnect())},2e4)}catch{this.reconnect()}else this.reconnect()}),3e4);const r=new URL(this.databaseUrl);r.protocol=r.protocol==="http:"?"ws":"wss";const o=new URLSearchParams;if(this.subscriber.closed)return;o.set("v","2"),this.rev&&o.set("rev",this.rev),this.yrev&&o.set("yrev",this.yrev),o.set("realmsHash",this.realmSetHash),o.set("clientId",this.clientIdentity),o.set("dxcv",this.db.cloud.version),this.user.accessToken&&o.set("token",this.user.accessToken);const l=this.ws=new WebSocket(`${r}/changes?${o}`);l.binaryType="arraybuffer",l.onclose=a=>{this.pinger&&this.reconnect()},l.onmessage=a=>{if(this.pinger){this.lastServerActivity=new Date;try{const d=typeof a.data=="string"?$a.parse(a.data):(function(h){const y=new Sl(h),m=sr(y);if(m==="outdated-server-rev")return{type:m};if(m==="y-complete-sync-done")return{type:m,yServerRev:sr(y)};const _=sr(y),b=sr(y);switch(m){case"u-ack":case"u-reject":return{type:m,table:_,prop:b,i:Number(jy(y))};default:{const x=Co(y);switch(m){case"in-sync":case"doc-close":return{type:m,table:_,prop:b,k:x};case"aware":return{type:m,table:_,prop:b,k:x,u:mn(y)};case"doc-open":return{type:m,table:_,prop:b,k:x,serverRev:Co(y),sv:Co(y)};case"sv":return{type:m,table:_,prop:b,k:x,sv:mn(y)};case"u-c":return{type:m,table:_,prop:b,k:x,u:mn(y),i:Number(jy(y))};case"u-s":return{type:m,table:_,prop:b,k:x,u:mn(y),r:y.pos<y.arr.length&&sr(y)||void 0};default:throw new TypeError(`Unknown message type: ${m}`)}}}})(new Uint8Array(a.data));if(d.type==="error")throw new Error(`Error message from dexie-cloud: ${d.error}`);if(d.type==="aware"){const h=En.getDocCache(this.db.dx).find(d.table,d.k,d.prop);if(h){const y=(m=>nw.get(m))(h);y&&kx(y,d.u,"server")}}else if(d.type!=="pong")if(d.type==="doc-open"){const h=En.getDocCache(this.db.dx).find(d.table,d.k,d.prop);h&&rw(h).next()}else d.type==="u-ack"||d.type==="u-reject"||d.type==="u-s"||d.type==="in-sync"||d.type==="outdated-server-rev"||d.type==="y-complete-sync-done"?q0([d],this.db).then(h=>Pe(this,[h],void 0,function*({resyncNeeded:y,yServerRevision:m,receivedUntils:_}){if(m&&(yield this.db.$syncState.update("syncState",{yServerRevision:m})),d.type==="u-s"&&_){const b=Ta(this.db,d.table,d.prop);if(b){const x=_[b.name];x&&(yield b.update(Oo,{receivedUntil:x}))}}y&&(yield this.db.cloud.sync({purpose:"pull",wait:!0}))})):this.subscriber.next(d)}catch(d){this.subscriber.error(d)}}};try{let a=!1;yield new Promise((d,h)=>{l.onopen=y=>{a=!0,d(null)},l.onerror=y=>{if(a)this.reconnect();else{const m=y.error||new Error("WebSocket Error");this.subscriber.error(m),this.webSocketStatus.next("error"),h(m)}}}),this.subscriptions.add(this.messageProducer.subscribe(d=>{var h,y;this.closed||(d.type==="ready"&&this.webSocketStatus.value!=="connected"&&this.webSocketStatus.next("connected"),d.type==="ready"?(this.rev=d.rev,(h=this.ws)===null||h===void 0||h.send($a.stringify(d))):(y=this.ws)===null||y===void 0||y.send((function(m){const _=new kl;switch(or(_,m.type),"table"in m&&or(_,m.table),"prop"in m&&or(_,m.prop),m.type){case"u-ack":case"u-reject":Sy(_,BigInt(m.i));break;case"outdated-server-rev":break;case"y-complete-sync-done":or(_,m.yServerRev);break;default:switch(Eo(_,m.k),m.type){case"aware":pn(_,m.u);break;case"doc-open":Eo(_,m.serverRev),Eo(_,m.sv);break;case"doc-close":break;case"sv":pn(_,m.sv);break;case"u-c":pn(_,m.u),Sy(_,BigInt(m.i));break;case"u-s":pn(_,m.u),or(_,m.r||"")}}return Hn(_)})(d)))})),this.user.isLoggedIn&&!Ka(this.db)&&this.subscriptions.add((function(d){const h=yp(d.tables.filter(y=>{var m,_;return((_=(m=d.cloud.schema)===null||m===void 0?void 0:m[y.name])===null||_===void 0?void 0:_.markedForSync)&&y.schema.yProps}).map(y=>y.schema.yProps.map(m=>({table:y.name,ydocProp:m.prop,updatesTable:m.updatesTable}))));return hd(...h.map(({table:y,ydocProp:m,updatesTable:_})=>{const b=d.table(_);return Gn(b.get(Oo)).pipe(Sn(x=>{let C=(x==null?void 0:x.unsentFrom)||1;return Gn(So(()=>Pe(this,void 0,void 0,function*(){return(yield H0(b,C)).filter(j=>j.f&&1&j.f).map(j=>({type:"u-c",table:y,prop:m,k:j.k,u:j.u,i:j.i}))}))).pipe(xh(j=>{j.length>0&&(C=j.at(-1).i+1)}))}))})).pipe(iu(y=>y))})(this.db).subscribe(this.db.messageProducer))}catch{this.pauseUntil=new Date(Date.now()+6e4)}})}}class IS extends Error{constructor(e){super(e==="expired"?"License expired":e==="deactivated"?"User deactivated":"Invalid license"),this.name="InvalidLicenseError",e&&(this.license=e)}}function OS(n){return Pe(this,void 0,void 0,function*(){var e;yield(e=3e3,new Promise(r=>setTimeout(r,e))),yield cs(tw)})}function _g(n){return Pe(this,void 0,void 0,function*(){var e;return!(!(!((e=n.cloud.options)===null||e===void 0)&&e.databaseUrl)||!n.cloud.schema)&&(yield _d(n,n.cloud.options,n.cloud.schema,{justCheckIfNeeded:!0}))})}const Pc=new WeakMap;function iw(n,e,r,o){const l=Pc.get(n);if(l){if(l.pull||(o==null?void 0:o.purpose)==="push")return l.promise;{let d=!1;const h=n.cloud.syncState.subscribe(y=>{y.phase==="pulling"&&(d=!0)});return l.promise.then(()=>{h.unsubscribe()}).catch(y=>(h.unsubscribe(),Promise.reject(y))).then(()=>{if(!d)return iw(n,e,r,o)})}}const a=(function(){return Pe(this,void 0,void 0,function*(){try{yield K0(n),yield Z0(n,G0,()=>_d(n,e,r,o)),Pc.delete(n)}catch(d){throw Pc.delete(n),d}})})();return Pc.set(n,{promise:a,pull:(o==null?void 0:o.purpose)!=="push"}),a}function jS(n,e,r){let o=null,l={cancelled:!1},a=0,d=0;function h(x=1){setTimeout(()=>{const C=y?"pull":"push";d=Date.now(),iw(n,e,r,{cancelToken:l,retryImmediatelyOnFetchError:!0,purpose:C}).then(()=>{if(l.cancelled)b();else if(y||m)return y=!1,m=!1,h();_=!1,a=0,d=0}).catch(j=>{if(l.cancelled)b(),_=!1,a=0,d=0;else if(x<5){const T=1e3*[0,20,40,300,900][x];a=Date.now()+T,d=0,setTimeout(()=>h(x+1),T)}else _=!1,a=0,d=0})},0)}let y=!1,m=!1,_=!1;const b=()=>{l.cancelled=!0,o&&o.unsubscribe()};return{start:()=>{o=n.localSyncEvent.subscribe(({purpose:x})=>{(C=>{l.cancelled||(C==="pull"&&(y=!0),C==="push"&&(m=!0),_?a||d>0&&Date.now():(_=!0,h()))})(x||"pull")})},stop:b}}function hh(n,e){if(n&&e&&e.unsyncedTables)for(const r of e.unsyncedTables)n[r]&&(n[r].markedForSync=!1)}var kd,At,ow,us,kg,sw,lw,aw,gp,Fh,Bh,Va={},uw=[],TS=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,xd=Array.isArray;function Pi(n,e){for(var r in e)n[r]=e[r];return n}function vp(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function mt(n,e,r){var o,l,a,d={};for(a in e)a=="key"?o=e[a]:a=="ref"?l=e[a]:d[a]=e[a];if(arguments.length>2&&(d.children=arguments.length>3?kd.call(arguments,2):r),typeof n=="function"&&n.defaultProps!=null)for(a in n.defaultProps)d[a]===void 0&&(d[a]=n.defaultProps[a]);return $c(n,d,o,l,null)}function $c(n,e,r,o,l){var a={type:n,props:e,key:r,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:l??++ow,__i:-1,__u:0};return l==null&&At.vnode!=null&&At.vnode(a),a}function hs(n){return n.children}function Na(n,e){this.props=n,this.context=e}function bl(n,e){if(e==null)return n.__?bl(n.__,n.__i+1):null;for(var r;e<n.__k.length;e++)if((r=n.__k[e])!=null&&r.__e!=null)return r.__e;return typeof n.type=="function"?bl(n):null}function cw(n){var e,r;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((r=n.__k[e])!=null&&r.__e!=null){n.__e=n.__c.base=r.__e;break}return cw(n)}}function xg(n){(!n.__d&&(n.__d=!0)&&us.push(n)&&!rd.__r++||kg!=At.debounceRendering)&&((kg=At.debounceRendering)||sw)(rd)}function rd(){for(var n,e,r,o,l,a,d,h=1;us.length;)us.length>h&&us.sort(lw),n=us.shift(),h=us.length,n.__d&&(r=void 0,o=void 0,l=(o=(e=n).__v).__e,a=[],d=[],e.__P&&((r=Pi({},o)).__v=o.__v+1,At.vnode&&At.vnode(r),wp(e.__P,r,o,e.__n,e.__P.namespaceURI,32&o.__u?[l]:null,a,l??bl(o),!!(32&o.__u),d),r.__v=o.__v,r.__.__k[r.__i]=r,hw(a,r,d),o.__e=o.__=null,r.__e!=l&&cw(r)));rd.__r=0}function dw(n,e,r,o,l,a,d,h,y,m,_){var b,x,C,j,T,W,q,X=o&&o.__k||uw,ce=e.length;for(y=(function(ie,ee,ve,pe,se){var we,ke,Ce,He,be,Ke=ve.length,Be=Ke,Ee=0;for(ie.__k=new Array(se),we=0;we<se;we++)(ke=ee[we])!=null&&typeof ke!="boolean"&&typeof ke!="function"?(typeof ke=="string"||typeof ke=="number"||typeof ke=="bigint"||ke.constructor==String?ke=ie.__k[we]=$c(null,ke,null,null,null):xd(ke)?ke=ie.__k[we]=$c(hs,{children:ke},null,null,null):ke.constructor==null&&ke.__b>0?ke=ie.__k[we]=$c(ke.type,ke.props,ke.key,ke.ref?ke.ref:null,ke.__v):ie.__k[we]=ke,He=we+Ee,ke.__=ie,ke.__b=ie.__b+1,(be=ke.__i=PS(ke,ve,He,Be))!=-1&&(Be--,(Ce=ve[be])&&(Ce.__u|=2)),Ce==null||Ce.__v==null?(be==-1&&(se>Ke?Ee--:se<Ke&&Ee++),typeof ke.type!="function"&&(ke.__u|=4)):be!=He&&(be==He-1?Ee--:be==He+1?Ee++:(be>He?Ee--:Ee++,ke.__u|=4))):ie.__k[we]=null;if(Be)for(we=0;we<Ke;we++)(Ce=ve[we])!=null&&!(2&Ce.__u)&&(Ce.__e==pe&&(pe=bl(Ce)),mw(Ce,Ce));return pe})(r,e,X,y,ce),b=0;b<ce;b++)(C=r.__k[b])!=null&&(x=C.__i==-1?Va:X[C.__i]||Va,C.__i=b,W=wp(n,C,x,l,a,d,h,y,m,_),j=C.__e,C.ref&&x.ref!=C.ref&&(x.ref&&bp(x.ref,null,C),_.push(C.ref,C.__c||j,C)),T==null&&j!=null&&(T=j),(q=!!(4&C.__u))||x.__k===C.__k?y=fw(C,y,n,q):typeof C.type=="function"&&W!==void 0?y=W:j&&(y=j.nextSibling),C.__u&=-7);return r.__e=T,y}function fw(n,e,r,o){var l,a;if(typeof n.type=="function"){for(l=n.__k,a=0;l&&a<l.length;a++)l[a]&&(l[a].__=n,e=fw(l[a],e,r,o));return e}n.__e!=e&&(o&&(e&&n.type&&!e.parentNode&&(e=bl(n)),r.insertBefore(n.__e,e||null)),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function PS(n,e,r,o){var l,a,d,h=n.key,y=n.type,m=e[r],_=m!=null&&!(2&m.__u);if(m===null&&h==null||_&&h==m.key&&y==m.type)return r;if(o>(_?1:0)){for(l=r-1,a=r+1;l>=0||a<e.length;)if((m=e[d=l>=0?l--:a++])!=null&&!(2&m.__u)&&h==m.key&&y==m.type)return d}return-1}function Sg(n,e,r){e[0]=="-"?n.setProperty(e,r??""):n[e]=r==null?"":typeof r!="number"||TS.test(e)?r:r+"px"}function Nc(n,e,r,o,l){var a,d;e:if(e=="style")if(typeof r=="string")n.style.cssText=r;else{if(typeof o=="string"&&(n.style.cssText=o=""),o)for(e in o)r&&e in r||Sg(n.style,e,"");if(r)for(e in r)o&&r[e]==o[e]||Sg(n.style,e,r[e])}else if(e[0]=="o"&&e[1]=="n")a=e!=(e=e.replace(aw,"$1")),d=e.toLowerCase(),e=d in n||e=="onFocusOut"||e=="onFocusIn"?d.slice(2):e.slice(2),n.l||(n.l={}),n.l[e+a]=r,r?o?r.u=o.u:(r.u=gp,n.addEventListener(e,a?Bh:Fh,a)):n.removeEventListener(e,a?Bh:Fh,a);else{if(l=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in n)try{n[e]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&e[4]!="-"?n.removeAttribute(e):n.setAttribute(e,e=="popover"&&r==1?"":r))}}function Eg(n){return function(e){if(this.l){var r=this.l[e.type+n];if(e.t==null)e.t=gp++;else if(e.t<r.u)return;return r(At.event?At.event(e):e)}}}function wp(n,e,r,o,l,a,d,h,y,m){var _,b,x,C,j,T,W,q,X,ce,ie,ee,ve,pe,se,we,ke,Ce=e.type;if(e.constructor!=null)return null;128&r.__u&&(y=!!(32&r.__u),a=[h=e.__e=r.__e]),(_=At.__b)&&_(e);e:if(typeof Ce=="function")try{if(q=e.props,X="prototype"in Ce&&Ce.prototype.render,ce=(_=Ce.contextType)&&o[_.__c],ie=_?ce?ce.props.value:_.__:o,r.__c?W=(b=e.__c=r.__c).__=b.__E:(X?e.__c=b=new Ce(q,ie):(e.__c=b=new Na(q,ie),b.constructor=Ce,b.render=AS),ce&&ce.sub(b),b.state||(b.state={}),b.__n=o,x=b.__d=!0,b.__h=[],b._sb=[]),X&&b.__s==null&&(b.__s=b.state),X&&Ce.getDerivedStateFromProps!=null&&(b.__s==b.state&&(b.__s=Pi({},b.__s)),Pi(b.__s,Ce.getDerivedStateFromProps(q,b.__s))),C=b.props,j=b.state,b.__v=e,x)X&&Ce.getDerivedStateFromProps==null&&b.componentWillMount!=null&&b.componentWillMount(),X&&b.componentDidMount!=null&&b.__h.push(b.componentDidMount);else{if(X&&Ce.getDerivedStateFromProps==null&&q!==C&&b.componentWillReceiveProps!=null&&b.componentWillReceiveProps(q,ie),e.__v==r.__v||!b.__e&&b.shouldComponentUpdate!=null&&b.shouldComponentUpdate(q,b.__s,ie)===!1){for(e.__v!=r.__v&&(b.props=q,b.state=b.__s,b.__d=!1),e.__e=r.__e,e.__k=r.__k,e.__k.some(function(He){He&&(He.__=e)}),ee=0;ee<b._sb.length;ee++)b.__h.push(b._sb[ee]);b._sb=[],b.__h.length&&d.push(b);break e}b.componentWillUpdate!=null&&b.componentWillUpdate(q,b.__s,ie),X&&b.componentDidUpdate!=null&&b.__h.push(function(){b.componentDidUpdate(C,j,T)})}if(b.context=ie,b.props=q,b.__P=n,b.__e=!1,ve=At.__r,pe=0,X){for(b.state=b.__s,b.__d=!1,ve&&ve(e),_=b.render(b.props,b.state,b.context),se=0;se<b._sb.length;se++)b.__h.push(b._sb[se]);b._sb=[]}else do b.__d=!1,ve&&ve(e),_=b.render(b.props,b.state,b.context),b.state=b.__s;while(b.__d&&++pe<25);b.state=b.__s,b.getChildContext!=null&&(o=Pi(Pi({},o),b.getChildContext())),X&&!x&&b.getSnapshotBeforeUpdate!=null&&(T=b.getSnapshotBeforeUpdate(C,j)),we=_,_!=null&&_.type===hs&&_.key==null&&(we=pw(_.props.children)),h=dw(n,xd(we)?we:[we],e,r,o,l,a,d,h,y,m),b.base=e.__e,e.__u&=-161,b.__h.length&&d.push(b),W&&(b.__E=b.__=null)}catch(He){if(e.__v=null,y||a!=null)if(He.then){for(e.__u|=y?160:128;h&&h.nodeType==8&&h.nextSibling;)h=h.nextSibling;a[a.indexOf(h)]=null,e.__e=h}else{for(ke=a.length;ke--;)vp(a[ke]);$h(e)}else e.__e=r.__e,e.__k=r.__k,He.then||$h(e);At.__e(He,e,r)}else a==null&&e.__v==r.__v?(e.__k=r.__k,e.__e=r.__e):h=e.__e=NS(r.__e,e,r,o,l,a,d,y,m);return(_=At.diffed)&&_(e),128&e.__u?void 0:h}function $h(n){n&&n.__c&&(n.__c.__e=!0),n&&n.__k&&n.__k.forEach($h)}function hw(n,e,r){for(var o=0;o<r.length;o++)bp(r[o],r[++o],r[++o]);At.__c&&At.__c(e,n),n.some(function(l){try{n=l.__h,l.__h=[],n.some(function(a){a.call(l)})}catch(a){At.__e(a,l.__v)}})}function pw(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:xd(n)?n.map(pw):Pi({},n)}function NS(n,e,r,o,l,a,d,h,y){var m,_,b,x,C,j,T,W=r.props||Va,q=e.props,X=e.type;if(X=="svg"?l="http://www.w3.org/2000/svg":X=="math"?l="http://www.w3.org/1998/Math/MathML":l||(l="http://www.w3.org/1999/xhtml"),a!=null){for(m=0;m<a.length;m++)if((C=a[m])&&"setAttribute"in C==!!X&&(X?C.localName==X:C.nodeType==3)){n=C,a[m]=null;break}}if(n==null){if(X==null)return document.createTextNode(q);n=document.createElementNS(l,X,q.is&&q),h&&(At.__m&&At.__m(e,a),h=!1),a=null}if(X==null)W===q||h&&n.data==q||(n.data=q);else{if(a=a&&kd.call(n.childNodes),!h&&a!=null)for(W={},m=0;m<n.attributes.length;m++)W[(C=n.attributes[m]).name]=C.value;for(m in W)if(C=W[m],m!="children"){if(m=="dangerouslySetInnerHTML")b=C;else if(!(m in q)){if(m=="value"&&"defaultValue"in q||m=="checked"&&"defaultChecked"in q)continue;Nc(n,m,null,C,l)}}for(m in q)C=q[m],m=="children"?x=C:m=="dangerouslySetInnerHTML"?_=C:m=="value"?j=C:m=="checked"?T=C:h&&typeof C!="function"||W[m]===C||Nc(n,m,C,W[m],l);if(_)h||b&&(_.__html==b.__html||_.__html==n.innerHTML)||(n.innerHTML=_.__html),e.__k=[];else if(b&&(n.innerHTML=""),dw(e.type=="template"?n.content:n,xd(x)?x:[x],e,r,o,X=="foreignObject"?"http://www.w3.org/1999/xhtml":l,a,d,a?a[0]:r.__k&&bl(r,0),h,y),a!=null)for(m=a.length;m--;)vp(a[m]);h||(m="value",X=="progress"&&j==null?n.removeAttribute("value"):j!=null&&(j!==n[m]||X=="progress"&&!j||X=="option"&&j!=W[m])&&Nc(n,m,j,W[m],l),m="checked",T!=null&&T!=n[m]&&Nc(n,m,T,W[m],l))}return n}function bp(n,e,r){try{if(typeof n=="function"){var o=typeof n.__u=="function";o&&n.__u(),o&&e==null||(n.__u=n(e))}else n.current=e}catch(l){At.__e(l,r)}}function mw(n,e,r){var o,l;if(At.unmount&&At.unmount(n),(o=n.ref)&&(o.current&&o.current!=n.__e||bp(o,null,e)),(o=n.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(a){At.__e(a,e)}o.base=o.__P=null}if(o=n.__k)for(l=0;l<o.length;l++)o[l]&&mw(o[l],e,r||typeof n.type!="function");r||vp(n.__e),n.__c=n.__=n.__e=void 0}function AS(n,e,r){return this.constructor(n,r)}function Cg(n,e,r){var o,l,a;e==document&&(e=document.documentElement),At.__&&At.__(n,e),o=e.__k,l=[],a=[],wp(e,n=e.__k=mt(hs,null,[n]),o||Va,Va,e.namespaceURI,o?null:e.firstChild?kd.call(e.childNodes):null,l,o?o.__e:e.firstChild,!1,a),hw(l,n,a)}kd=uw.slice,At={__e:function(n,e,r,o){for(var l,a,d;e=e.__;)if((l=e.__c)&&!l.__)try{if((a=l.constructor)&&a.getDerivedStateFromError!=null&&(l.setState(a.getDerivedStateFromError(n)),d=l.__d),l.componentDidCatch!=null&&(l.componentDidCatch(n,o||{}),d=l.__d),d)return l.__E=l}catch(h){n=h}throw n}},ow=0,Na.prototype.setState=function(n,e){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Pi({},this.state),typeof n=="function"&&(n=n(Pi({},r),this.props)),n&&Pi(r,n),n!=null&&this.__v&&(e&&this._sb.push(e),xg(this))},Na.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),xg(this))},Na.prototype.render=hs,us=[],sw=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,lw=function(n,e){return n.__v.__b-e.__v.__b},rd.__r=0,aw=/(PointerCapture)$|Capture$/i,gp=0,Fh=Eg(!1),Bh=Eg(!0);const Lt={Alert:{error:{color:"red",fontWeight:"bold"},warning:{color:"#f80",fontWeight:"bold"},info:{color:"black"}},Darken:{position:"fixed",top:0,left:0,opacity:.5,backgroundColor:"#000",width:"100vw",height:"100vh",zIndex:150,webkitBackdropFilter:"blur(2px)",backdropFilter:"blur(2px)"},DialogOuter:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:150,alignItems:"center",display:"flex",justifyContent:"center",padding:"16px",boxSizing:"border-box"},DialogInner:{position:"relative",color:"#222",backgroundColor:"#fff",padding:"24px",marginBottom:"2em",maxWidth:"400px",width:"100%",maxHeight:"90%",overflowY:"auto",border:"3px solid #3d3d5d",borderRadius:"8px",boxShadow:"0 0 80px 10px #666",fontFamily:"sans-serif",boxSizing:"border-box"},Input:{height:"35px",width:"100%",maxWidth:"100%",borderColor:"#ccf4",outline:"none",fontSize:"16px",padding:"8px",boxSizing:"border-box",backgroundColor:"#f9f9f9",borderRadius:"4px",border:"1px solid #ccc",marginTop:"6px",fontFamily:"inherit"},Button:{padding:"10px 20px",margin:"0 4px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:"#ffffff",cursor:"pointer",fontSize:"14px",fontWeight:"500",color:"#374151",transition:"all 0.2s ease"},PrimaryButton:{padding:"10px 20px",margin:"0 4px",border:"1px solid #3b82f6",borderRadius:"6px",backgroundColor:"#3b82f6",color:"white",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s ease"},ButtonsDiv:{display:"flex",justifyContent:"flex-end",gap:"12px",marginTop:"24px",paddingTop:"20px"},Label:{display:"block",marginBottom:"12px",fontSize:"14px",fontWeight:"500",color:"#333"},WindowHeader:{margin:"0 0 20px 0",fontSize:"18px",fontWeight:"600",color:"#333",borderBottom:"1px solid #eee",paddingBottom:"10px"},ProviderButton:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",padding:"12px 16px",marginBottom:"10px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:"#ffffff",cursor:"pointer",fontSize:"14px",fontWeight:"500",color:"#374151",transition:"all 0.2s ease",gap:"12px"},ProviderButtonIcon:{width:"20px",height:"20px",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center"},ProviderButtonText:{flex:1,textAlign:"left"},ProviderGoogle:{backgroundColor:"#ffffff",border:"1px solid #dadce0",color:"#3c4043"},ProviderGitHub:{backgroundColor:"#24292e",border:"1px solid #24292e",color:"#ffffff"},ProviderMicrosoft:{backgroundColor:"#ffffff",border:"1px solid #8c8c8c",color:"#5e5e5e"},ProviderApple:{backgroundColor:"#000000",border:"1px solid #000000",color:"#ffffff"},ProviderCustom:{backgroundColor:"#4f46e5",border:"1px solid #4f46e5",color:"#ffffff"},Divider:{display:"flex",alignItems:"center",margin:"20px 0",color:"#6b7280",fontSize:"13px"},DividerLine:{flex:1,height:"1px",backgroundColor:"#e5e7eb"},DividerText:{padding:"0 12px",color:"#9ca3af"},OtpButton:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",padding:"12px 16px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:"#f9fafb",cursor:"pointer",fontSize:"14px",fontWeight:"500",color:"#374151",transition:"all 0.2s ease",gap:"12px"}};function DS({children:n,className:e}){return mt("div",{className:`dexie-dialog ${e||""}`},mt("div",{style:Lt.Darken}),mt("div",{style:Lt.DialogOuter},mt("div",{style:Lt.DialogInner},n)))}var Wa,Kt,ph,Ig,id=0,yw=[],Ht=At,Og=Ht.__b,jg=Ht.__r,Tg=Ht.diffed,Pg=Ht.__c,Ng=Ht.unmount,Ag=Ht.__;function _p(n,e){Ht.__h&&Ht.__h(Kt,n,id||e),id=0;var r=Kt.__H||(Kt.__H={__:[],__h:[]});return n>=r.__.length&&r.__.push({}),r.__[n]}function RS(n){return id=1,(function(e,r){var o=_p(Wa++,2);if(o.t=e,!o.__c&&(o.__=[Rg(void 0,r),function(h){var y=o.__N?o.__N[0]:o.__[0],m=o.t(y,h);y!==m&&(o.__N=[m,o.__[1]],o.__c.setState({}))}],o.__c=Kt,!Kt.__f)){var l=function(h,y,m){if(!o.__c.__H)return!0;var _=o.__c.__H.__.filter(function(x){return!!x.__c});if(_.every(function(x){return!x.__N}))return!a||a.call(this,h,y,m);var b=o.__c.props!==h;return _.forEach(function(x){if(x.__N){var C=x.__[0];x.__=x.__N,x.__N=void 0,C!==x.__[0]&&(b=!0)}}),a&&a.call(this,h,y,m)||b};Kt.__f=!0;var a=Kt.shouldComponentUpdate,d=Kt.componentWillUpdate;Kt.componentWillUpdate=function(h,y,m){if(this.__e){var _=a;a=void 0,l(h,y,m),a=_}d&&d.call(this,h,y,m)},Kt.shouldComponentUpdate=l}return o.__N||o.__})(Rg,n)}function LS(n){return id=5,(function(e,r){var o=_p(Wa++,7);return gw(o.__H,r)&&(o.__=e(),o.__H=r,o.__h=e),o.__})(function(){return{current:n}},[])}function MS(){for(var n;n=yw.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(Kc),n.__H.__h.forEach(Kh),n.__H.__h=[]}catch(e){n.__H.__h=[],Ht.__e(e,n.__v)}}Ht.__b=function(n){Kt=null,Og&&Og(n)},Ht.__=function(n,e){n&&e.__k&&e.__k.__m&&(n.__m=e.__k.__m),Ag&&Ag(n,e)},Ht.__r=function(n){jg&&jg(n),Wa=0;var e=(Kt=n.__c).__H;e&&(ph===Kt?(e.__h=[],Kt.__h=[],e.__.forEach(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(e.__h.forEach(Kc),e.__h.forEach(Kh),e.__h=[],Wa=0)),ph=Kt},Ht.diffed=function(n){Tg&&Tg(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(yw.push(e)!==1&&Ig===Ht.requestAnimationFrame||((Ig=Ht.requestAnimationFrame)||US)(MS)),e.__H.__.forEach(function(r){r.u&&(r.__H=r.u),r.u=void 0})),ph=Kt=null},Ht.__c=function(n,e){e.some(function(r){try{r.__h.forEach(Kc),r.__h=r.__h.filter(function(o){return!o.__||Kh(o)})}catch(o){e.some(function(l){l.__h&&(l.__h=[])}),e=[],Ht.__e(o,r.__v)}}),Pg&&Pg(n,e)},Ht.unmount=function(n){Ng&&Ng(n);var e,r=n.__c;r&&r.__H&&(r.__H.__.forEach(function(o){try{Kc(o)}catch(l){e=l}}),r.__H=void 0,e&&Ht.__e(e,r.__v))};var Dg=typeof requestAnimationFrame=="function";function US(n){var e,r=function(){clearTimeout(o),Dg&&cancelAnimationFrame(e),setTimeout(n)},o=setTimeout(r,35);Dg&&(e=requestAnimationFrame(r))}function Kc(n){var e=Kt,r=n.__c;typeof r=="function"&&(n.__c=void 0,r()),Kt=e}function Kh(n){var e=Kt;n.__c=n.__(),Kt=e}function gw(n,e){return!n||n.length!==e.length||e.some(function(r,o){return r!==n[o]})}function Rg(n,e){return typeof e=="function"?e(n):e}function zS({message:n,messageCode:e,messageParams:r}){return n.replace(/\{\w+\}/gi,o=>r[o.substring(1,o.length-1)])}function Lg({option:n,onClick:e}){const{displayName:r,iconUrl:o,iconSvg:l,styleHint:a,value:d}=n,h=(function(_){const b=Object.assign({},Lt.ProviderButton);if(!_)return b;switch(_){case"google":return Object.assign(Object.assign({},b),Lt.ProviderGoogle);case"github":return Object.assign(Object.assign({},b),Lt.ProviderGitHub);case"microsoft":return Object.assign(Object.assign({},b),Lt.ProviderMicrosoft);case"apple":return Object.assign(Object.assign({},b),Lt.ProviderApple);case"otp":return Object.assign({},Lt.OtpButton);case"custom-oauth2":return Object.assign(Object.assign({},b),Lt.ProviderCustom);default:return b}})(a),y=h.color||"#000000",m=l?l.replace(/fill="currentColor"/gi,`fill="${y}"`).replace(/fill='currentColor'/gi,`fill='${y}'`).replace(/stroke="currentColor"/gi,`stroke="${y}"`).replace(/stroke='currentColor'/gi,`stroke='${y}'`):null;return mt("button",{type:"button",style:h,onClick:e,class:"dxc-option-btn"+(a?` dxc-option-${a}`:""),"aria-label":r},m?mt("span",{style:Lt.ProviderButtonIcon,"aria-hidden":"true",dangerouslySetInnerHTML:{__html:m}}):o?mt("img",{src:o,alt:"",style:Lt.ProviderButtonIcon,"aria-hidden":"true"}):null,mt("span",{style:Lt.ProviderButtonText},r))}function Mg(){return mt("div",{style:Lt.Divider},mt("div",{style:Lt.DividerLine}),mt("span",{style:Lt.DividerText},"or"),mt("div",{style:Lt.DividerLine}))}function FS({title:n,alerts:e,fields:r,options:o,submitLabel:l,cancelLabel:a,onCancel:d,onSubmit:h}){const[y,m]=RS({}),_=LS(null);(function(q,X){var ce=_p(Wa++,4);!Ht.__s&&gw(ce.__H,X)&&(ce.__=q,ce.u=X,Kt.__h.push(ce))})(()=>{var q;return(q=_.current)===null||q===void 0?void 0:q.focus()},[]);const b=Object.entries(r||{}),x=b.length>0,C=o&&o.length>0,j=new Map;if(o)for(const q of o){const X=j.get(q.name)||[];X.push(q),j.set(q.name,X)}const T=j.size>1,W=q=>{h({[q.name]:q.value})};return mt(DS,{className:"dxc-login-dlg"},mt(hs,null,mt("h3",{style:Lt.WindowHeader},n),e.map((q,X)=>mt("p",{key:X,style:Lt.Alert[q.type]},zS(q))),C&&mt("div",{class:"dxc-options"},T?Array.from(j.entries()).map(([q,X],ce)=>mt(hs,{key:q},ce>0&&mt(Mg,null),X.map(ie=>mt(Lg,{key:`${ie.name}-${ie.value}`,option:ie,onClick:()=>W(ie)})))):o.map(q=>mt(Lg,{key:`${q.name}-${q.value}`,option:q,onClick:()=>W(q)}))),C&&x&&mt(Mg,null),x&&mt("form",{onSubmit:q=>{q.preventDefault(),h(y)}},b.map(([q,{type:X,label:ce,placeholder:ie}],ee)=>mt("label",{style:Lt.Label,key:ee},ce?`${ce}: `:"",mt("input",{ref:ee===0?_:void 0,type:X,name:q,autoComplete:"on",style:Lt.Input,autoFocus:!0,placeholder:ie,value:y[q]||"",onInput:ve=>{var pe;const se=(function(ke,Ce){switch(ke){case"email":return Ce.toLowerCase();case"otp":return Ce.toUpperCase();default:return Ce}})(X,(pe=ve.target)===null||pe===void 0?void 0:pe.value);let we=Object.assign(Object.assign({},y),{[q]:se});m(we),X==="otp"&&(se==null?void 0:se.trim().length)===8&&h(we)}}))))),mt("div",{style:Lt.ButtonsDiv},mt(hs,null,l&&(x||!C&&!x)&&mt("button",{type:"submit",style:Lt.PrimaryButton,onClick:()=>h(y)},l),a&&mt("button",{style:Lt.Button,onClick:d},a))))}class Ug extends Na{constructor(e){super(e),this.observer=r=>this.setState({userInteraction:r}),this.state={userInteraction:void 0}}componentDidMount(){this.subscription=Gn(this.props.db.cloud.userInteraction).subscribe(this.observer)}componentWillUnmount(){this.subscription&&(this.subscription.unsubscribe(),delete this.subscription)}render(e,{userInteraction:r}){return r?mt(FS,Object.assign({},r)):null}}function au(n){const e=new WeakMap;return r=>{let o=e.get(r);return o||(o=n(r),e.set(r,o)),o}}const od=au(n=>new Cr(Un));function Sd(n,e){let r=e,o=Gn(n).pipe(Wn(a=>r=a),Ck({resetOnRefCountZero:()=>jv(1e3)}));const l=new Xt(a=>{let d=!1;const h=o.subscribe({next(y){d=!0,a.next(y)},error(y){a.error(y)},complete(){a.complete()}});return d||h.closed||a.next(r),h});return l.getValue=()=>r,l}const vw=au(n=>Sd(So(()=>n.roles.where({realmId:"rlm-public"}).toArray().then(e=>{const r={};for(const o of e.slice().sort((l,a)=>(l.sortOrder||0)-(a.sortOrder||0)))r[o.name]=o;return r})),{})),ww=au(n=>Sd(od(n._novip).pipe(Sn(e=>So(()=>n.transaction("r","realms","members",()=>Promise.all([n.members.where({userId:e.userId}).toArray(),n.realms.toArray(),e.userId]).then(([r,o,l])=>({selfMembers:r,realms:o,userId:l})))))),{selfMembers:[],realms:[],get userId(){return n.cloud.currentUserId}}));function BS(...n){return n.length===0?{}:n.reduce((r,o)=>{const l=Object.assign({},r);for(const[a,d]of Object.entries(o))if(a in l&&l[a]){if(l[a]==="*")continue;if(d==="*")l[a]="*";else if(Array.isArray(d)&&Array.isArray(l[a])){const h=l,y=h[a];h[a]=[...new Set([...y,...d])]}else if(typeof d=="object"&&d&&typeof l[a]=="object"){const h=l[a];for(const[y,m]of Object.entries(d))h[y]!=="*"&&(m==="*"?h[y]="*":Array.isArray(h[y])&&Array.isArray(m)&&(h[y]=[...new Set([...h[y],...m])]))}}else l[a]=o[a];return l})}const bw=au(n=>(function(e,r){let o;const l=e.pipe(Wn(a=>o=r(a)));return l.getValue=()=>o!==void 0?o:o=r(e.getValue()),l})(Sd(La([ww(n._novip),vw(n._novip)]).pipe(Wn(([{selfMembers:e,realms:r,userId:o},l])=>({selfMembers:e,realms:r,userId:o,globalRoles:l}))),{selfMembers:[],realms:[],userId:Un.userId,globalRoles:{}}),({selfMembers:e,realms:r,userId:o,globalRoles:l})=>r.map(d=>{const h=e.filter(_=>_.realmId===d.realmId),y=h.map(_=>_.permissions).filter(_=>_),m=yp(h.map(_=>_.roles).filter(_=>_)).map(_=>l[_]).filter(_=>_).map(_=>_.permissions);return Object.assign(Object.assign({},d),{permissions:d.owner===o?{manage:"*"}:BS(...y,...m)})}).reduce((d,h)=>Object.assign(Object.assign({},d),{[h.realmId]:h}),{[o]:{realmId:o,owner:o,name:o,permissions:{manage:"*"}}})));class zg{constructor(e,r,o){this.permissions=e||{},this.tableName=r,this.isOwner=o}add(...e){var r;return this.permissions.manage==="*"||!!(!((r=this.permissions.manage)===null||r===void 0)&&r.includes(this.tableName))||this.permissions.add==="*"||!!e.every(o=>{var l;return(l=this.permissions.add)===null||l===void 0?void 0:l.includes(o)})}update(...e){var r,o;if(this.isOwner||this.permissions.manage==="*"||!((r=this.permissions.manage)===null||r===void 0)&&r.includes(this.tableName))return!0;if(this.permissions.update==="*")return e.every(a=>a!=="owner");const l=(o=this.permissions.update)===null||o===void 0?void 0:o[this.tableName];return l==="*"?e.every(a=>a!=="owner"):e.every(a=>l==null?void 0:l.some(d=>d===a||d==="*"&&a!=="owner"))}delete(){var e;return!(!this.isOwner&&this.permissions.manage!=="*")||!!(!((e=this.permissions.manage)===null||e===void 0)&&e.includes(this.tableName))}}const $S=au(n=>{const e=od(n._novip).pipe(Sn(l=>So(()=>n.members.where({email:l.email||""}).toArray()))),r=bw(n._novip),o=ww(n._novip);return Sd(La([e,o,r]).pipe(Wn(([l,a,d])=>{const h=(_,b)=>Object.assign(Object.assign({},_),{[b.id]:Object.assign(Object.assign({},b),{realm:d[b.realmId]})}),y=l.reduce(h,{}),m=a.selfMembers.reduce(h,y);return Object.values(m).filter(_=>!_.accepted).map(_=>Object.assign(Object.assign({},_),{accept(){return Pe(this,void 0,void 0,function*(){yield n.members.update(_.id,{accepted:new Date})})},reject(){return Pe(this,void 0,void 0,function*(){yield n.members.update(_.id,{rejected:new Date})})}}))})),[])});function KS(n){return e=>{var r;const o=e.doc;if(!o)throw new Error("Internal error: DexieYProvider.createYHandler called without a doc. This is unexpected.");const{parentTable:l}=o.meta||{};if(!(!((r=n.cloud.schema)===null||r===void 0)&&r[l].markedForSync))return;let a;Object.defineProperty(e,"awareness",{get:()=>a||(a=(function(d,h,y){const{parentTable:m,parentId:_,parentProp:b,updatesTable:x}=h.meta,C=new bx(h),j=rw(h);return C.on("update",({added:T,updated:W,removed:q},X)=>{const ce=T.concat(W).concat(q),ie=d.cloud.currentUser.value;if(X!=="server"&&ie.isLoggedIn&&!Ka(d)){const ee=_x(C,ce);d.messageProducer.next({type:"aware",table:m,prop:b,k:h.meta.parentId,u:ee}),y.destroyed&&d.messageProducer.next({type:"doc-close",table:m,prop:b,k:h.meta.parentId})}}),C.on("destroy",()=>{j0(C,[h.clientID],"provider destroyed")}),Pe(this,void 0,void 0,function*(){if(y.destroyed)return;let T=!1,W=1;const q=La([d.cloud.webSocketStatus,j.pipe(Nv(null))]).subscribe(([ce])=>{if(y.destroyed)return;T=ce==="connected";const ie=d.cloud.currentUser.value;ce==="connected"&&ie.isLoggedIn&&!Ka(d)&&(++W,X().catch(ee=>{}))});function X(){return Pe(this,void 0,void 0,function*(){const ce=W,ie=d.table(x),ee=d.$syncState,[ve,pe]=yield d.transaction("r",ee,ie,()=>Pe(this,void 0,void 0,function*(){const ke=yield ie.get(Oo),Ce=yield ee.get("syncState");return[(ke==null?void 0:ke.receivedUntil)||0,(Ce==null?void 0:Ce.yServerRevision)||(Ce==null?void 0:Ce.serverRevision)]}));if(y.destroyed||W!==ce||!T)return;const se={type:"doc-open",table:m,prop:b,k:_,serverRev:pe},we=yield ie.where("i").between(ve,1/0,!1).filter(ke=>ud(ke.k,_)===0&&!(1&(ke.f||0))).toArray();if(!y.destroyed&&W===ce&&T){if(we.length>0){const ke=Gc(we.map(He=>He.u)),Ce=o0(ke);se.sv=Ce}d.messageProducer.next(se)}})}y.addCleanupHandler(q)}),C})(n,o,e),nw.set(o,a),a)})}}function VS(n){const e=typeof window<"u"?window.location.href:"";if(!e)return null;const r=new URL(e).searchParams.get("dxc-auth");if(!r)return null;let o;try{const y=(function(m){const _=(m+"=".repeat((4-m.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/");return atob(_)})(r);o=JSON.parse(y)}catch{return null}const{code:l,provider:a,state:d,error:h}=o;if(h)throw h.toLowerCase().includes("access_denied")||h.toLowerCase().includes("access denied")?new qr("access_denied",a,h):h.toLowerCase().includes("email")&&h.toLowerCase().includes("verif")?new qr("email_not_verified",a,h):new qr("provider_error",a,h);return l&&a&&d?{code:l,provider:a,state:d}:null}function Fg(){var n;if(typeof window>"u"||!(!((n=window.history)===null||n===void 0)&&n.replaceState))return;const e=new URL(window.location.href);if(!e.searchParams.has("dxc-auth"))return;e.searchParams.delete("dxc-auth");const r=e.pathname+(e.searchParams.toString()?`?${e.searchParams.toString()}`:"")+e.hash;window.history.replaceState(null,"",r)}function ls(n){return"rlm~"+n}const WS={nameSuffix:!0};function Vh(n){const e=n.name,r=od(n),o=[];let l=!1,a=null,d=null,h=null;n.on("ready",x=>Pe(this,void 0,void 0,function*(){try{yield(function(C){return Pe(this,void 0,void 0,function*(){var j,T,W,q,X,ce,ie;y=!1;const ee=Ii(C);typeof window<"u"&&typeof document<"u"&&(!((j=ee.cloud.options)===null||j===void 0)&&j.customLoginGui||o.push((function(be){let Ke=!1;const Be=document.createElement("div");return document.body?(document.body.appendChild(Be),Cg(mt(Ug,{db:be.vip}),Be)):addEventListener("DOMContentLoaded",()=>{Ke||(document.body.appendChild(Be),Cg(mt(Ug,{db:be.vip}),Be))}),{unsubscribe(){try{Be.remove()}catch{}Ke=!0},get closed(){return Ke}}})(C))),ee.cloud.isServiceWorkerDB||o.push((function(be){let Ke=be.cloud.webSocketStatus.value;const Be=be.cloud.webSocketStatus.pipe(Sn(Ee=>{const me=Ke;Ke=Ee;const U=Ai(Ee);switch(Ee){case"disconnected":return Pa.value?U.pipe(By(500)):U;case"connecting":return me==="not-started"||me==="error"?U:U.pipe(By(4e3));default:return U}}));return La([Be,be.syncStateChangedEvent.pipe(Nv({phase:"initial"})),od(be.dx._novip),zh]).pipe(Wn(([Ee,me,U,oe])=>{var ne;if(!((ne=U.license)===null||ne===void 0)&&ne.status&&U.license.status!=="ok")return{phase:"offline",status:"offline",license:U.license.status};let{phase:N,error:G,progress:ye}=me,Ie=Ee;return N==="error"&&(Ie="error"),Ee==="not-started"&&(N!=="pushing"&&N!=="pulling"||(Ie="connecting")),be.cloud.syncState.value.phase!=="error"||me.phase!=="pushing"&&me.phase!=="pulling"||(Ie="connecting"),oe||(Ie="disconnected"),{phase:N,error:G,progress:ye,status:fl?Ie:"offline",license:"ok"}}))})(ee).subscribe(C.cloud.syncState)),o.push(ee.syncCompleteEvent.subscribe(_)),ee.tables.every(be=>be.core)||(function(){throw new st.SchemaError("Version increment needed to allow dexie-cloud change tracking")})();const ve="serviceWorker"in navigator?yield navigator.serviceWorker.getRegistrations():[],[pe,se]=yield ee.transaction("rw",ee.$syncState,()=>Pe(this,void 0,void 0,function*(){var be,Ke;const{options:Be,schema:Ee}=ee.cloud,[me,U,oe]=yield Promise.all([ee.getOptions(),ee.getSchema(),ee.getPersistedSyncState()]);if(l){if(!me||JSON.stringify(me)!==JSON.stringify(Be)){if(!Be)throw new Error("Internal error");const ne=Object.assign({},Be);delete ne.fetchTokens,delete ne.awarenessProtocol,yield ee.$syncState.put(ne,"options")}}else ee.cloud.options=me||null;if(!((be=ee.cloud.options)===null||be===void 0)&&be.tryUseServiceWorker&&"serviceWorker"in navigator&&ve.length>0&&!cS?ee.cloud.usingServiceWorker=!0:(!((Ke=ee.cloud.options)===null||Ke===void 0)&&Ke.tryUseServiceWorker&&ee.cloud.isServiceWorkerDB,ee.cloud.usingServiceWorker=!1),hh(Ee,ee.cloud.options),hh(U,ee.cloud.options),Ee){if(!U||JSON.stringify(U)!==JSON.stringify(Ee)){const ne=U||{};for(const[N,G]of Object.entries(Ee)){const ye=ne[N];ye?(ye.markedForSync=G.markedForSync,G.deleted=ye.deleted,ye.generatedGlobalId=G.generatedGlobalId):ne[N]=Object.assign({},G)}yield ee.$syncState.put(ne,"schema"),Object.assign(Ee,ne)}}else ee.cloud.schema=U||null;return[oe==null?void 0:oe.initiallySynced,oe==null?void 0:oe.realms]}));if(pe&&ee.setInitiallySynced(!0),(function(be){var Ke,Be;for(const Ee of be.tables)if(!((Be=(Ke=be.cloud.schema)===null||Ke===void 0?void 0:Ke[Ee.name])===null||Be===void 0)&&Be.markedForSync){if(Ee.schema.primKey.auto)throw new st.SchemaError(`Table ${Ee.name} is both autoIncremented and synced. Use db.cloud.configure({unsyncedTables: [${JSON.stringify(Ee.name)}]}) to blacklist it from sync`);if(!Ee.schema.primKey.keyPath)throw new st.SchemaError(`Table ${Ee.name} cannot be both synced and outbound. Use db.cloud.configure({unsyncedTables: [${JSON.stringify(Ee.name)}]}) to blacklist it from sync`)}})(ee),m(),!ee.cloud.isServiceWorkerDB){o.push(So(()=>ee.getCurrentUser()).subscribe(r)),o.push(So(()=>ee.getPersistedSyncState()).subscribe(ee.cloud.persistedSyncState)),yield cs(La([r.pipe($y(1),sl(1)),ee.cloud.persistedSyncState.pipe($y(1),sl(1))]));const be=KS(ee);En.on.new.subscribe(be),ee.dx.once("close",()=>{En.on.new.unsubscribe(be)})}let we=!1,ke=yield ee.getCurrentUser();if(d&&!ee.cloud.isServiceWorkerDB){const be=d;d=null,yield nd(ee.cloud.userInteraction,"Authentication Error",{type:"error",messageCode:"GENERIC_ERROR",message:be.message,messageParams:{provider:be.provider||"unknown"}})}if(a&&!ee.cloud.isServiceWorkerDB){const{code:be,provider:Ke}=a;a=null;try{we=yield Oc(ee,{oauthCode:be,provider:Ke}),ke=yield ee.getCurrentUser()}catch{}}const Ce=(T=ee.cloud.options)===null||T===void 0?void 0:T.requireAuth;Ce&&(ee.cloud.isServiceWorkerDB?yield cs(r.pipe(ir(be=>!!be.isLoggedIn),sl(1))):typeof Ce=="object"?(!ke.isLoggedIn||Ce.userId&&ke.userId!==Ce.userId||Ce.email&&ke.email!==Ce.email)&&(we=yield Oc(ee,Ce)):ke.isLoggedIn||(we=yield Oc(ee))),!ke.isLoggedIn||se&&se.includes(ke.userId)||(we=!0),h&&h.stop(),h=null,m();const He=((W=ee.cloud.options)===null||W===void 0?void 0:W.databaseUrl)&&(!pe||we);He&&(yield(function(be,Ke,Be){return Pe(this,void 0,void 0,function*(){yield Z0(be,G0,()=>_d(be,Ke,Be,{isInitialSync:!0}))})})(ee,ee.cloud.options,ee.cloud.schema),ee.setInitiallySynced(!0)),m(),ee.cloud.usingServiceWorker&&(!((q=ee.cloud.options)===null||q===void 0)&&q.databaseUrl)?(He||P0(ee,"push").catch(()=>{}),(function(be){return Pe(this,void 0,void 0,function*(){var Ke;try{const{periodicSync:Be}=yield navigator.serviceWorker.ready;if(Be)try{yield Be.register(`dexie-cloud:${be.name}`,(Ke=be.cloud.options)===null||Ke===void 0?void 0:Ke.periodicSync)}catch{}}catch{}})})(ee).catch(()=>{})):!((X=ee.cloud.options)===null||X===void 0)&&X.databaseUrl&&ee.cloud.schema&&!ee.cloud.isServiceWorkerDB&&(h=jS(ee,ee.cloud.options,ee.cloud.schema),h.start(),He||Ti(ee,"push")),m(),ee.cloud.isServiceWorkerDB||o.push(Gr(self,"online").subscribe(()=>{ee.syncStateChangedEvent.next({phase:"not-in-sync"}),Ka(ee)||Ti(ee,"push")}),Gr(self,"offline").subscribe(()=>{ee.syncStateChangedEvent.next({phase:"offline"})})),!(!((ce=ee.cloud.options)===null||ce===void 0)&&ce.databaseUrl)||!((ie=ee.cloud.options)===null||ie===void 0)&&ie.disableWebSocket||dS||o.push((function(be){var Ke;if(!(!((Ke=be.cloud.options)===null||Ke===void 0)&&Ke.databaseUrl))throw new Error("No database URL to connect WebSocket to");const Be=be.messageConsumer.readyToServe.pipe(ir(me=>me),Sn(()=>be.getPersistedSyncState()),ir(me=>me&&me.serverRevision),Sn(me=>Pe(this,void 0,void 0,function*(){return{type:"ready",rev:me.serverRevision,realmSetHash:yield Dh(me)}}))),Ee=hd(Be,be.messageProducer);return(function me(){return be.cloud.persistedSyncState.pipe(ir(U=>U==null?void 0:U.serverRevision),sl(1),Sn(U=>be.cloud.currentUser.pipe(Wn(oe=>[oe,U]))),Sn(([U,oe])=>zh.pipe(Wn(ne=>[ne?U:null,oe]))),Sn(([U,oe])=>U!=null&&U.isLoggedIn&&!(oe!=null&&oe.realms.includes(U.userId))?be.cloud.persistedSyncState.pipe(ir(ne=>(ne==null?void 0:ne.realms.includes(U.userId))||!1),sl(1),Wn(ne=>[U,ne])):new Cr([U,oe])),Sn(U=>Pe(this,[U],void 0,function*([oe,ne]){return[oe,yield Dh(ne)]})),Pv(([U,oe],[ne,N])=>U===ne&&oe===N),Sn(([U,oe])=>{var ne;return!((ne=be.cloud.persistedSyncState)===null||ne===void 0)&&ne.value?U?new SS(be,be.cloud.persistedSyncState.value.serverRevision,be.cloud.persistedSyncState.value.yServerRevision,oe,be.cloud.persistedSyncState.value.clientIdentity,Ee,be.cloud.webSocketStatus,U):Gn([]):me()}),kh(U=>(U==null?void 0:U.name)==="TokenExpiredError"?Ai(!0).pipe(Sn(()=>Pe(this,void 0,void 0,function*(){const oe=yield be.getCurrentUser(),ne=yield bd(be.cloud.options.databaseUrl,oe);yield be.table("$logins").update(oe.userId,{accessToken:ne.accessToken,accessTokenExpiration:ne.accessTokenExpiration,claims:ne.claims,license:ne.license,data:ne.data})})),Sn(()=>me())):My(()=>U)),kh(U=>(be.cloud.webSocketStatus.next("error"),U instanceof IS?My(()=>U):Gn(OS()).pipe(Sn(()=>me())))))})().subscribe({next:me=>{me&&be.messageConsumer.enqueue(me)},error:me=>{},complete:()=>{}})})(ee))})})(x)}catch{}}),!0);let y=!1;function m(){if(y)throw new st.DatabaseClosedError}n.once("close",()=>{o.forEach(x=>x.unsubscribe()),o.splice(0,o.length),y=!0,h&&h.stop(),h=null,r.next(Un)});const _=new ys;var b;n.cloud={version:"4.3.3",options:Object.assign({},WS),schema:null,get currentUserId(){return r.value.userId||Un.userId},currentUser:r,syncState:new Cr({phase:"initial",status:"not-started"}),events:{syncComplete:_},persistedSyncState:new Cr(void 0),userInteraction:new Cr(void 0),webSocketStatus:new Cr("not-started"),login(x){return Pe(this,void 0,void 0,function*(){const C=Ii(n);yield C.cloud.sync(),yield Oc(C,x)})},invites:$S(n),roles:vw(n),configure(x){if(x=n.cloud.options=Object.assign(Object.assign({},n.cloud.options),x),l=!0,x.databaseUrl&&x.nameSuffix&&(n.name=`${e}-${(function(C){const j=new URL(C);return j.pathname==="/"?j.hostname.split(".")[0]:j.pathname.split("/")[1]})(x.databaseUrl)}`,Ii(n).reconfigure()),hh(n.cloud.schema,n.cloud.options),typeof window<"u"&&window.location)try{const C=VS();C&&(Fg(),a={code:C.code,provider:C.provider})}catch(C){Fg(),C instanceof qr&&(d=C)}},logout(){return Pe(this,arguments,void 0,function*({force:x}={}){x?yield Ph(Ii(n),{deleteUnsyncedData:!0}):yield A0(Ii(n))})},sync(){return Pe(this,arguments,void 0,function*({wait:x,purpose:C}={wait:!0,purpose:"push"}){var j;x===void 0&&(x=!0);const T=Ii(n);if((((j=T.cloud.currentUser.value.license)===null||j===void 0?void 0:j.status)||"ok")!=="ok"&&(yield wd(T)),C==="pull"){const W=T.cloud.persistedSyncState.value;if(Ti(T,C),x){const q=yield cs(T.cloud.persistedSyncState.pipe(ir(X=>(X==null?void 0:X.timestamp)!=null&&(!W||X.timestamp>W.timestamp))));if(q!=null&&q.error)throw new Error("Sync error: "+q.error)}}else if(yield _g(T)){const W=T.cloud.persistedSyncState.value;Ti(T,C),x&&(yield cs(Gn(So(()=>Pe(this,void 0,void 0,function*(){const q=yield _g(T),X=yield T.getPersistedSyncState();if((X==null?void 0:X.timestamp)!==(W==null?void 0:W.timestamp)&&(X!=null&&X.error))throw new Error("Sync error: "+X.error);return q}))).pipe(ir(q=>!q))))}})},permissions:(x,C)=>(function(j,T,W){if(!T)throw new TypeError("Cannot check permissions of undefined or null. A Dexie Cloud object with realmId and owner expected.");const{owner:q,realmId:X}=T;if(!W){if(typeof T.table!="function")throw new TypeError("Missing 'table' argument to permissions and table could not be extracted from entity");W=T.table()}const ce=bw(j),ie=ve=>{const pe=ve[X||j.cloud.currentUserId];return pe?new zg(pe.permissions,W,X===void 0||X===j.cloud.currentUserId||q===j.cloud.currentUserId):new zg({},W,!q||q===j.cloud.currentUserId)},ee=ce.pipe(Wn(ie));return ee.getValue=()=>ie(ce.getValue()),ee})(n._novip,x,C)},n.Version.prototype._parseStoresSpec=st.override(n.Version.prototype._parseStoresSpec,x=>bS(x,n)),n.Table.prototype.newId=function({colocateWith:x}={}){const C=x&&x.substr(x.length-3);return X0(n.cloud.schema[this.name].idPrefix||"",C)},n.Table.prototype.idPrefix=function(){var x,C;return((C=(x=this.db.cloud.schema)===null||x===void 0?void 0:x[this.name])===null||C===void 0?void 0:C.idPrefix)||""},n.use(wS({currentUserObservable:n.cloud.currentUser,db:Ii(n)})),n.use((b=Ii(n),{stack:"dbcore",name:"implicitPropSetterMiddleware",level:1,create:x=>Object.assign(Object.assign({},x),{table:C=>{const j=x.table(C);return Object.assign(Object.assign({},j),{mutate:T=>{var W,q,X,ce,ie,ee;const ve=T.trans;if(ve.disableChangeTracking)return j.mutate(T);const pe=(q=(W=ve.currentUser)===null||W===void 0?void 0:W.userId)!==null&&q!==void 0?q:Un.userId;if(!((ce=(X=b.cloud.schema)===null||X===void 0?void 0:X[C])===null||ce===void 0)&&ce.markedForSync&&(T.type==="add"||T.type==="put")){if(C==="members")for(const se of T.values)typeof se.email=="string"&&(se.email=se.email.trim().toLowerCase());for(const se of T.values){se.owner||(se.owner=pe),se.realmId||(se.realmId=pe);const we=(ee=(ie=j.schema.primaryKey).extractKey)===null||ee===void 0?void 0:ee.call(ie,se);typeof we=="string"&&we[0]==="#"&&T.type==="put"&&(delete T.criteria,delete T.changeSpec,T.upsert||delete T.updates,se.$ts=Date.now())}}return j.mutate(T)}})}})})),n.use(yS(Ii(n)))}Vh.version="4.3.3",st.Cloud=Vh;class HS extends Hb{constructor(){super(...arguments);_o(this,"id");_o(this,"realmId");_o(this,"owner");_o(this,"title")}isSharable(){return this.realmId===ls(this.id)}async makeSharable(){const r=ls(this.id),o=this.db;return await o.transaction("rw",[o.todoLists,o.todoItems,o.realms],()=>{o.realms.upsert(r,{name:this.title,represents:"a to-do list"}),o.todoLists.update(this.id,{realmId:r}),o.todoItems.where({todoListId:this.id}).modify({realmId:r})}),r}async makePrivate(){const r=ls(this.id),o=this.db;await o.transaction("rw",[o.todoLists,o.todoItems,o.members,o.realms],async()=>{await o.todoItems.where({realmId:r,todoListId:this.id}).modify({realmId:o.cloud.currentUserId,owner:o.cloud.currentUserId}),await o.todoLists.update(this.id,{realmId:this.db.cloud.currentUserId,owner:this.db.cloud.currentUserId}),await o.members.where("realmId").equals(r).delete(),await o.realms.delete(r)})}async shareWith(r,o,l,a){const{db:d}=this;await d.transaction("rw",[d.members,d.todoLists,d.todoItems,d.realms],async()=>{const h=await this.makeSharable();await d.members.add({realmId:h,name:r,email:o,invite:l,roles:a})})}async unshareWith(r){await this.db.members.delete(r.id)}async leaveList(){const{db:r}=this;await r.members.where({realmId:ls(this.id),userId:r.cloud.currentUserId}).delete()}async deleteList(){const{db:r}=this;await r.transaction("rw",[r.todoLists,r.todoItems,r.members,r.realms],()=>{r.todoItems.where({todoListId:this.id,realmId:ls(this.id)}).delete(),r.todoItems.where({todoListId:this.id,realmId:r.cloud.currentUserId}).delete(),r.todoLists.delete(this.id);const o=ls(this.id);r.realms.delete(o)})}async changeOwner(r){const{db:o}=this,l=ls(this.id);if(!r)throw new Error("Cannot give ownership to user before invite is accepted.");return o.transaction("rw",o.todoLists,o.members,o.realms,()=>{o.members.where({realmId:l,userId:this.owner}).modify({roles:["manager"]}),o.members.where({realmId:l}).modify({owner:r}),o.todoLists.where({realmId:l,id:this.id}).modify({owner:r}),o.realms.update(l,{owner:r})})}async changeMemberRole(r,o){await this.db.members.update(r.id,{permissions:{},roles:[o]})}}class qS extends st{constructor(){super("TodoDBCloud2",{addons:[Vh],cache:"immutable"});_o(this,"todoLists");_o(this,"todoItems");_o(this,"openCloseStates");this.version(15).stores({todoLists:"@id, [realmId+id]",todoItems:"@id, realmId, [todoListId+realmId]",openCloseStates:""}),this.todoLists.mapToClass(HS),this.cloud.configure({unsyncedTables:["openCloseStates"],databaseUrl:"https://z0lesejpr.dexie.cloud",tryUseServiceWorker:!0,requireAuth:!1})}}const at=new qS;/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),YS=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,o)=>o?o.toUpperCase():r.toLowerCase()),Bg=n=>{const e=YS(n);return e.charAt(0).toUpperCase()+e.slice(1)},_w=(...n)=>n.filter((e,r,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===r).join(" ").trim(),QS=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var JS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=tt.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:l="",children:a,iconNode:d,...h},y)=>tt.createElement("svg",{ref:y,...JS,width:e,height:e,stroke:n,strokeWidth:o?Number(r)*24/Number(e):r,className:_w("lucide",l),...!a&&!QS(h)&&{"aria-hidden":"true"},...h},[...d.map(([m,_])=>tt.createElement(m,_)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=(n,e)=>{const r=tt.forwardRef(({className:o,...l},a)=>tt.createElement(XS,{ref:a,iconNode:e,className:_w(`lucide-${GS(Bg(n))}`,`lucide-${n}`,o),...l}));return r.displayName=Bg(n),r};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],$g=en("chevron-down",ZS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],tE=en("circle-alert",eE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=[["path",{d:"M13 16a3 3 0 0 1 0 6H7a5 5 0 1 1 4.9-6z",key:"ie2ih4"}],["path",{d:"M18.376 14.512a6 6 0 0 0 3.461-4.127c.148-.625-.659-.97-1.248-.714a4 4 0 0 1-5.259-5.26c.255-.589-.09-1.395-.716-1.248a6 6 0 0 0-4.594 5.36",key:"zwnc1e"}]],rE=en("cloud-moon",nE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Kg=en("cloud",iE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],sE=en("crown",oE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],aE=en("list",lE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],cE=en("loader-circle",uE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Vg=en("log-out",dE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Wg=en("mail",fE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hE=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],pE=en("menu",hE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],kw=en("plus",mE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yE=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],gE=en("rotate-ccw",yE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vE=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],wE=en("share-2",vE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ed=en("trash-2",bE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _E=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],kE=en("user-plus",_E);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],xw=en("user",xE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],EE=en("users",SE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],IE=en("wifi-off",CE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OE=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],jE=en("wifi",OE);function Sw(n){var e,r,o="";if(typeof n=="string"||typeof n=="number")o+=n;else if(typeof n=="object")if(Array.isArray(n)){var l=n.length;for(e=0;e<l;e++)n[e]&&(r=Sw(n[e]))&&(o&&(o+=" "),o+=r)}else for(r in n)n[r]&&(o&&(o+=" "),o+=r);return o}function Ew(){for(var n,e,r=0,o="",l=arguments.length;r<l;r++)(n=arguments[r])&&(e=Sw(n))&&(o&&(o+=" "),o+=e);return o}const Hg=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,qg=Ew,TE=(n,e)=>r=>{var o;if((e==null?void 0:e.variants)==null)return qg(n,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:l,defaultVariants:a}=e,d=Object.keys(l).map(m=>{const _=r==null?void 0:r[m],b=a==null?void 0:a[m];if(_===null)return null;const x=Hg(_)||Hg(b);return l[m][x]}),h=r&&Object.entries(r).reduce((m,_)=>{let[b,x]=_;return x===void 0||(m[b]=x),m},{}),y=e==null||(o=e.compoundVariants)===null||o===void 0?void 0:o.reduce((m,_)=>{let{class:b,className:x,...C}=_;return Object.entries(C).every(j=>{let[T,W]=j;return Array.isArray(W)?W.includes({...a,...h}[T]):{...a,...h}[T]===W})?[...m,b,x]:m},[]);return qg(n,d,y,r==null?void 0:r.class,r==null?void 0:r.className)},PE=(n,e)=>{const r=new Array(n.length+e.length);for(let o=0;o<n.length;o++)r[o]=n[o];for(let o=0;o<e.length;o++)r[n.length+o]=e[o];return r},NE=(n,e)=>({classGroupId:n,validator:e}),Cw=(n=new Map,e=null,r)=>({nextPart:n,validators:e,classGroupId:r}),sd="-",Gg=[],AE="arbitrary..",DE=n=>{const e=LE(n),{conflictingClassGroups:r,conflictingClassGroupModifiers:o}=n;return{getClassGroupId:d=>{if(d.startsWith("[")&&d.endsWith("]"))return RE(d);const h=d.split(sd),y=h[0]===""&&h.length>1?1:0;return Iw(h,y,e)},getConflictingClassGroupIds:(d,h)=>{if(h){const y=o[d],m=r[d];return y?m?PE(m,y):y:m||Gg}return r[d]||Gg}}},Iw=(n,e,r)=>{if(n.length-e===0)return r.classGroupId;const l=n[e],a=r.nextPart.get(l);if(a){const m=Iw(n,e+1,a);if(m)return m}const d=r.validators;if(d===null)return;const h=e===0?n.join(sd):n.slice(e).join(sd),y=d.length;for(let m=0;m<y;m++){const _=d[m];if(_.validator(h))return _.classGroupId}},RE=n=>n.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=n.slice(1,-1),r=e.indexOf(":"),o=e.slice(0,r);return o?AE+o:void 0})(),LE=n=>{const{theme:e,classGroups:r}=n;return ME(r,e)},ME=(n,e)=>{const r=Cw();for(const o in n){const l=n[o];kp(l,r,o,e)}return r},kp=(n,e,r,o)=>{const l=n.length;for(let a=0;a<l;a++){const d=n[a];UE(d,e,r,o)}},UE=(n,e,r,o)=>{if(typeof n=="string"){zE(n,e,r);return}if(typeof n=="function"){FE(n,e,r,o);return}BE(n,e,r,o)},zE=(n,e,r)=>{const o=n===""?e:Ow(e,n);o.classGroupId=r},FE=(n,e,r,o)=>{if($E(n)){kp(n(o),e,r,o);return}e.validators===null&&(e.validators=[]),e.validators.push(NE(r,n))},BE=(n,e,r,o)=>{const l=Object.entries(n),a=l.length;for(let d=0;d<a;d++){const[h,y]=l[d];kp(y,Ow(e,h),r,o)}},Ow=(n,e)=>{let r=n;const o=e.split(sd),l=o.length;for(let a=0;a<l;a++){const d=o[a];let h=r.nextPart.get(d);h||(h=Cw(),r.nextPart.set(d,h)),r=h}return r},$E=n=>"isThemeGetter"in n&&n.isThemeGetter===!0,KE=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,r=Object.create(null),o=Object.create(null);const l=(a,d)=>{r[a]=d,e++,e>n&&(e=0,o=r,r=Object.create(null))};return{get(a){let d=r[a];if(d!==void 0)return d;if((d=o[a])!==void 0)return l(a,d),d},set(a,d){a in r?r[a]=d:l(a,d)}}},Wh="!",Yg=":",VE=[],Qg=(n,e,r,o,l)=>({modifiers:n,hasImportantModifier:e,baseClassName:r,maybePostfixModifierPosition:o,isExternal:l}),WE=n=>{const{prefix:e,experimentalParseClassName:r}=n;let o=l=>{const a=[];let d=0,h=0,y=0,m;const _=l.length;for(let T=0;T<_;T++){const W=l[T];if(d===0&&h===0){if(W===Yg){a.push(l.slice(y,T)),y=T+1;continue}if(W==="/"){m=T;continue}}W==="["?d++:W==="]"?d--:W==="("?h++:W===")"&&h--}const b=a.length===0?l:l.slice(y);let x=b,C=!1;b.endsWith(Wh)?(x=b.slice(0,-1),C=!0):b.startsWith(Wh)&&(x=b.slice(1),C=!0);const j=m&&m>y?m-y:void 0;return Qg(a,C,x,j)};if(e){const l=e+Yg,a=o;o=d=>d.startsWith(l)?a(d.slice(l.length)):Qg(VE,!1,d,void 0,!0)}if(r){const l=o;o=a=>r({className:a,parseClassName:l})}return o},HE=n=>{const e=new Map;return n.orderSensitiveModifiers.forEach((r,o)=>{e.set(r,1e6+o)}),r=>{const o=[];let l=[];for(let a=0;a<r.length;a++){const d=r[a],h=d[0]==="[",y=e.has(d);h||y?(l.length>0&&(l.sort(),o.push(...l),l=[]),o.push(d)):l.push(d)}return l.length>0&&(l.sort(),o.push(...l)),o}},qE=n=>({cache:KE(n.cacheSize),parseClassName:WE(n),sortModifiers:HE(n),...DE(n)}),GE=/\s+/,YE=(n,e)=>{const{parseClassName:r,getClassGroupId:o,getConflictingClassGroupIds:l,sortModifiers:a}=e,d=[],h=n.trim().split(GE);let y="";for(let m=h.length-1;m>=0;m-=1){const _=h[m],{isExternal:b,modifiers:x,hasImportantModifier:C,baseClassName:j,maybePostfixModifierPosition:T}=r(_);if(b){y=_+(y.length>0?" "+y:y);continue}let W=!!T,q=o(W?j.substring(0,T):j);if(!q){if(!W){y=_+(y.length>0?" "+y:y);continue}if(q=o(j),!q){y=_+(y.length>0?" "+y:y);continue}W=!1}const X=x.length===0?"":x.length===1?x[0]:a(x).join(":"),ce=C?X+Wh:X,ie=ce+q;if(d.indexOf(ie)>-1)continue;d.push(ie);const ee=l(q,W);for(let ve=0;ve<ee.length;++ve){const pe=ee[ve];d.push(ce+pe)}y=_+(y.length>0?" "+y:y)}return y},QE=(...n)=>{let e=0,r,o,l="";for(;e<n.length;)(r=n[e++])&&(o=jw(r))&&(l&&(l+=" "),l+=o);return l},jw=n=>{if(typeof n=="string")return n;let e,r="";for(let o=0;o<n.length;o++)n[o]&&(e=jw(n[o]))&&(r&&(r+=" "),r+=e);return r},JE=(n,...e)=>{let r,o,l,a;const d=y=>{const m=e.reduce((_,b)=>b(_),n());return r=qE(m),o=r.cache.get,l=r.cache.set,a=h,h(y)},h=y=>{const m=o(y);if(m)return m;const _=YE(y,r);return l(y,_),_};return a=d,(...y)=>a(QE(...y))},XE=[],Qt=n=>{const e=r=>r[n]||XE;return e.isThemeGetter=!0,e},Tw=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Pw=/^\((?:(\w[\w-]*):)?(.+)\)$/i,ZE=/^\d+\/\d+$/,eC=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,tC=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,nC=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,rC=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,iC=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,il=n=>ZE.test(n),ot=n=>!!n&&!Number.isNaN(Number(n)),ko=n=>!!n&&Number.isInteger(Number(n)),mh=n=>n.endsWith("%")&&ot(n.slice(0,-1)),ji=n=>eC.test(n),oC=()=>!0,sC=n=>tC.test(n)&&!nC.test(n),Nw=()=>!1,lC=n=>rC.test(n),aC=n=>iC.test(n),uC=n=>!Me(n)&&!Ue(n),cC=n=>Tl(n,Rw,Nw),Me=n=>Tw.test(n),as=n=>Tl(n,Lw,sC),yh=n=>Tl(n,mC,ot),Jg=n=>Tl(n,Aw,Nw),dC=n=>Tl(n,Dw,aC),Ac=n=>Tl(n,Mw,lC),Ue=n=>Pw.test(n),Ea=n=>Pl(n,Lw),fC=n=>Pl(n,yC),Xg=n=>Pl(n,Aw),hC=n=>Pl(n,Rw),pC=n=>Pl(n,Dw),Dc=n=>Pl(n,Mw,!0),Tl=(n,e,r)=>{const o=Tw.exec(n);return o?o[1]?e(o[1]):r(o[2]):!1},Pl=(n,e,r=!1)=>{const o=Pw.exec(n);return o?o[1]?e(o[1]):r:!1},Aw=n=>n==="position"||n==="percentage",Dw=n=>n==="image"||n==="url",Rw=n=>n==="length"||n==="size"||n==="bg-size",Lw=n=>n==="length",mC=n=>n==="number",yC=n=>n==="family-name",Mw=n=>n==="shadow",gC=()=>{const n=Qt("color"),e=Qt("font"),r=Qt("text"),o=Qt("font-weight"),l=Qt("tracking"),a=Qt("leading"),d=Qt("breakpoint"),h=Qt("container"),y=Qt("spacing"),m=Qt("radius"),_=Qt("shadow"),b=Qt("inset-shadow"),x=Qt("text-shadow"),C=Qt("drop-shadow"),j=Qt("blur"),T=Qt("perspective"),W=Qt("aspect"),q=Qt("ease"),X=Qt("animate"),ce=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ie=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],ee=()=>[...ie(),Ue,Me],ve=()=>["auto","hidden","clip","visible","scroll"],pe=()=>["auto","contain","none"],se=()=>[Ue,Me,y],we=()=>[il,"full","auto",...se()],ke=()=>[ko,"none","subgrid",Ue,Me],Ce=()=>["auto",{span:["full",ko,Ue,Me]},ko,Ue,Me],He=()=>[ko,"auto",Ue,Me],be=()=>["auto","min","max","fr",Ue,Me],Ke=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Be=()=>["start","end","center","stretch","center-safe","end-safe"],Ee=()=>["auto",...se()],me=()=>[il,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...se()],U=()=>[n,Ue,Me],oe=()=>[...ie(),Xg,Jg,{position:[Ue,Me]}],ne=()=>["no-repeat",{repeat:["","x","y","space","round"]}],N=()=>["auto","cover","contain",hC,cC,{size:[Ue,Me]}],G=()=>[mh,Ea,as],ye=()=>["","none","full",m,Ue,Me],Ie=()=>["",ot,Ea,as],Ge=()=>["solid","dashed","dotted","double"],Ve=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Re=()=>[ot,mh,Xg,Jg],Ye=()=>["","none",j,Ue,Me],et=()=>["none",ot,Ue,Me],fe=()=>["none",ot,Ue,Me],It=()=>[ot,Ue,Me],We=()=>[il,"full",...se()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ji],breakpoint:[ji],color:[oC],container:[ji],"drop-shadow":[ji],ease:["in","out","in-out"],font:[uC],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ji],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ji],shadow:[ji],spacing:["px",ot],text:[ji],"text-shadow":[ji],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",il,Me,Ue,W]}],container:["container"],columns:[{columns:[ot,Me,Ue,h]}],"break-after":[{"break-after":ce()}],"break-before":[{"break-before":ce()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:ee()}],overflow:[{overflow:ve()}],"overflow-x":[{"overflow-x":ve()}],"overflow-y":[{"overflow-y":ve()}],overscroll:[{overscroll:pe()}],"overscroll-x":[{"overscroll-x":pe()}],"overscroll-y":[{"overscroll-y":pe()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:we()}],"inset-x":[{"inset-x":we()}],"inset-y":[{"inset-y":we()}],start:[{start:we()}],end:[{end:we()}],top:[{top:we()}],right:[{right:we()}],bottom:[{bottom:we()}],left:[{left:we()}],visibility:["visible","invisible","collapse"],z:[{z:[ko,"auto",Ue,Me]}],basis:[{basis:[il,"full","auto",h,...se()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ot,il,"auto","initial","none",Me]}],grow:[{grow:["",ot,Ue,Me]}],shrink:[{shrink:["",ot,Ue,Me]}],order:[{order:[ko,"first","last","none",Ue,Me]}],"grid-cols":[{"grid-cols":ke()}],"col-start-end":[{col:Ce()}],"col-start":[{"col-start":He()}],"col-end":[{"col-end":He()}],"grid-rows":[{"grid-rows":ke()}],"row-start-end":[{row:Ce()}],"row-start":[{"row-start":He()}],"row-end":[{"row-end":He()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":be()}],"auto-rows":[{"auto-rows":be()}],gap:[{gap:se()}],"gap-x":[{"gap-x":se()}],"gap-y":[{"gap-y":se()}],"justify-content":[{justify:[...Ke(),"normal"]}],"justify-items":[{"justify-items":[...Be(),"normal"]}],"justify-self":[{"justify-self":["auto",...Be()]}],"align-content":[{content:["normal",...Ke()]}],"align-items":[{items:[...Be(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Be(),{baseline:["","last"]}]}],"place-content":[{"place-content":Ke()}],"place-items":[{"place-items":[...Be(),"baseline"]}],"place-self":[{"place-self":["auto",...Be()]}],p:[{p:se()}],px:[{px:se()}],py:[{py:se()}],ps:[{ps:se()}],pe:[{pe:se()}],pt:[{pt:se()}],pr:[{pr:se()}],pb:[{pb:se()}],pl:[{pl:se()}],m:[{m:Ee()}],mx:[{mx:Ee()}],my:[{my:Ee()}],ms:[{ms:Ee()}],me:[{me:Ee()}],mt:[{mt:Ee()}],mr:[{mr:Ee()}],mb:[{mb:Ee()}],ml:[{ml:Ee()}],"space-x":[{"space-x":se()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":se()}],"space-y-reverse":["space-y-reverse"],size:[{size:me()}],w:[{w:[h,"screen",...me()]}],"min-w":[{"min-w":[h,"screen","none",...me()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[d]},...me()]}],h:[{h:["screen","lh",...me()]}],"min-h":[{"min-h":["screen","lh","none",...me()]}],"max-h":[{"max-h":["screen","lh",...me()]}],"font-size":[{text:["base",r,Ea,as]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[o,Ue,yh]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",mh,Me]}],"font-family":[{font:[fC,Me,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[l,Ue,Me]}],"line-clamp":[{"line-clamp":[ot,"none",Ue,yh]}],leading:[{leading:[a,...se()]}],"list-image":[{"list-image":["none",Ue,Me]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ue,Me]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:U()}],"text-color":[{text:U()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ge(),"wavy"]}],"text-decoration-thickness":[{decoration:[ot,"from-font","auto",Ue,as]}],"text-decoration-color":[{decoration:U()}],"underline-offset":[{"underline-offset":[ot,"auto",Ue,Me]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:se()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ue,Me]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ue,Me]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:oe()}],"bg-repeat":[{bg:ne()}],"bg-size":[{bg:N()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ko,Ue,Me],radial:["",Ue,Me],conic:[ko,Ue,Me]},pC,dC]}],"bg-color":[{bg:U()}],"gradient-from-pos":[{from:G()}],"gradient-via-pos":[{via:G()}],"gradient-to-pos":[{to:G()}],"gradient-from":[{from:U()}],"gradient-via":[{via:U()}],"gradient-to":[{to:U()}],rounded:[{rounded:ye()}],"rounded-s":[{"rounded-s":ye()}],"rounded-e":[{"rounded-e":ye()}],"rounded-t":[{"rounded-t":ye()}],"rounded-r":[{"rounded-r":ye()}],"rounded-b":[{"rounded-b":ye()}],"rounded-l":[{"rounded-l":ye()}],"rounded-ss":[{"rounded-ss":ye()}],"rounded-se":[{"rounded-se":ye()}],"rounded-ee":[{"rounded-ee":ye()}],"rounded-es":[{"rounded-es":ye()}],"rounded-tl":[{"rounded-tl":ye()}],"rounded-tr":[{"rounded-tr":ye()}],"rounded-br":[{"rounded-br":ye()}],"rounded-bl":[{"rounded-bl":ye()}],"border-w":[{border:Ie()}],"border-w-x":[{"border-x":Ie()}],"border-w-y":[{"border-y":Ie()}],"border-w-s":[{"border-s":Ie()}],"border-w-e":[{"border-e":Ie()}],"border-w-t":[{"border-t":Ie()}],"border-w-r":[{"border-r":Ie()}],"border-w-b":[{"border-b":Ie()}],"border-w-l":[{"border-l":Ie()}],"divide-x":[{"divide-x":Ie()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Ie()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ge(),"hidden","none"]}],"divide-style":[{divide:[...Ge(),"hidden","none"]}],"border-color":[{border:U()}],"border-color-x":[{"border-x":U()}],"border-color-y":[{"border-y":U()}],"border-color-s":[{"border-s":U()}],"border-color-e":[{"border-e":U()}],"border-color-t":[{"border-t":U()}],"border-color-r":[{"border-r":U()}],"border-color-b":[{"border-b":U()}],"border-color-l":[{"border-l":U()}],"divide-color":[{divide:U()}],"outline-style":[{outline:[...Ge(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ot,Ue,Me]}],"outline-w":[{outline:["",ot,Ea,as]}],"outline-color":[{outline:U()}],shadow:[{shadow:["","none",_,Dc,Ac]}],"shadow-color":[{shadow:U()}],"inset-shadow":[{"inset-shadow":["none",b,Dc,Ac]}],"inset-shadow-color":[{"inset-shadow":U()}],"ring-w":[{ring:Ie()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:U()}],"ring-offset-w":[{"ring-offset":[ot,as]}],"ring-offset-color":[{"ring-offset":U()}],"inset-ring-w":[{"inset-ring":Ie()}],"inset-ring-color":[{"inset-ring":U()}],"text-shadow":[{"text-shadow":["none",x,Dc,Ac]}],"text-shadow-color":[{"text-shadow":U()}],opacity:[{opacity:[ot,Ue,Me]}],"mix-blend":[{"mix-blend":[...Ve(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ve()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ot]}],"mask-image-linear-from-pos":[{"mask-linear-from":Re()}],"mask-image-linear-to-pos":[{"mask-linear-to":Re()}],"mask-image-linear-from-color":[{"mask-linear-from":U()}],"mask-image-linear-to-color":[{"mask-linear-to":U()}],"mask-image-t-from-pos":[{"mask-t-from":Re()}],"mask-image-t-to-pos":[{"mask-t-to":Re()}],"mask-image-t-from-color":[{"mask-t-from":U()}],"mask-image-t-to-color":[{"mask-t-to":U()}],"mask-image-r-from-pos":[{"mask-r-from":Re()}],"mask-image-r-to-pos":[{"mask-r-to":Re()}],"mask-image-r-from-color":[{"mask-r-from":U()}],"mask-image-r-to-color":[{"mask-r-to":U()}],"mask-image-b-from-pos":[{"mask-b-from":Re()}],"mask-image-b-to-pos":[{"mask-b-to":Re()}],"mask-image-b-from-color":[{"mask-b-from":U()}],"mask-image-b-to-color":[{"mask-b-to":U()}],"mask-image-l-from-pos":[{"mask-l-from":Re()}],"mask-image-l-to-pos":[{"mask-l-to":Re()}],"mask-image-l-from-color":[{"mask-l-from":U()}],"mask-image-l-to-color":[{"mask-l-to":U()}],"mask-image-x-from-pos":[{"mask-x-from":Re()}],"mask-image-x-to-pos":[{"mask-x-to":Re()}],"mask-image-x-from-color":[{"mask-x-from":U()}],"mask-image-x-to-color":[{"mask-x-to":U()}],"mask-image-y-from-pos":[{"mask-y-from":Re()}],"mask-image-y-to-pos":[{"mask-y-to":Re()}],"mask-image-y-from-color":[{"mask-y-from":U()}],"mask-image-y-to-color":[{"mask-y-to":U()}],"mask-image-radial":[{"mask-radial":[Ue,Me]}],"mask-image-radial-from-pos":[{"mask-radial-from":Re()}],"mask-image-radial-to-pos":[{"mask-radial-to":Re()}],"mask-image-radial-from-color":[{"mask-radial-from":U()}],"mask-image-radial-to-color":[{"mask-radial-to":U()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":ie()}],"mask-image-conic-pos":[{"mask-conic":[ot]}],"mask-image-conic-from-pos":[{"mask-conic-from":Re()}],"mask-image-conic-to-pos":[{"mask-conic-to":Re()}],"mask-image-conic-from-color":[{"mask-conic-from":U()}],"mask-image-conic-to-color":[{"mask-conic-to":U()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:oe()}],"mask-repeat":[{mask:ne()}],"mask-size":[{mask:N()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ue,Me]}],filter:[{filter:["","none",Ue,Me]}],blur:[{blur:Ye()}],brightness:[{brightness:[ot,Ue,Me]}],contrast:[{contrast:[ot,Ue,Me]}],"drop-shadow":[{"drop-shadow":["","none",C,Dc,Ac]}],"drop-shadow-color":[{"drop-shadow":U()}],grayscale:[{grayscale:["",ot,Ue,Me]}],"hue-rotate":[{"hue-rotate":[ot,Ue,Me]}],invert:[{invert:["",ot,Ue,Me]}],saturate:[{saturate:[ot,Ue,Me]}],sepia:[{sepia:["",ot,Ue,Me]}],"backdrop-filter":[{"backdrop-filter":["","none",Ue,Me]}],"backdrop-blur":[{"backdrop-blur":Ye()}],"backdrop-brightness":[{"backdrop-brightness":[ot,Ue,Me]}],"backdrop-contrast":[{"backdrop-contrast":[ot,Ue,Me]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ot,Ue,Me]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ot,Ue,Me]}],"backdrop-invert":[{"backdrop-invert":["",ot,Ue,Me]}],"backdrop-opacity":[{"backdrop-opacity":[ot,Ue,Me]}],"backdrop-saturate":[{"backdrop-saturate":[ot,Ue,Me]}],"backdrop-sepia":[{"backdrop-sepia":["",ot,Ue,Me]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":se()}],"border-spacing-x":[{"border-spacing-x":se()}],"border-spacing-y":[{"border-spacing-y":se()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ue,Me]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ot,"initial",Ue,Me]}],ease:[{ease:["linear","initial",q,Ue,Me]}],delay:[{delay:[ot,Ue,Me]}],animate:[{animate:["none",X,Ue,Me]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[T,Ue,Me]}],"perspective-origin":[{"perspective-origin":ee()}],rotate:[{rotate:et()}],"rotate-x":[{"rotate-x":et()}],"rotate-y":[{"rotate-y":et()}],"rotate-z":[{"rotate-z":et()}],scale:[{scale:fe()}],"scale-x":[{"scale-x":fe()}],"scale-y":[{"scale-y":fe()}],"scale-z":[{"scale-z":fe()}],"scale-3d":["scale-3d"],skew:[{skew:It()}],"skew-x":[{"skew-x":It()}],"skew-y":[{"skew-y":It()}],transform:[{transform:[Ue,Me,"","none","gpu","cpu"]}],"transform-origin":[{origin:ee()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:We()}],"translate-x":[{"translate-x":We()}],"translate-y":[{"translate-y":We()}],"translate-z":[{"translate-z":We()}],"translate-none":["translate-none"],accent:[{accent:U()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:U()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ue,Me]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":se()}],"scroll-mx":[{"scroll-mx":se()}],"scroll-my":[{"scroll-my":se()}],"scroll-ms":[{"scroll-ms":se()}],"scroll-me":[{"scroll-me":se()}],"scroll-mt":[{"scroll-mt":se()}],"scroll-mr":[{"scroll-mr":se()}],"scroll-mb":[{"scroll-mb":se()}],"scroll-ml":[{"scroll-ml":se()}],"scroll-p":[{"scroll-p":se()}],"scroll-px":[{"scroll-px":se()}],"scroll-py":[{"scroll-py":se()}],"scroll-ps":[{"scroll-ps":se()}],"scroll-pe":[{"scroll-pe":se()}],"scroll-pt":[{"scroll-pt":se()}],"scroll-pr":[{"scroll-pr":se()}],"scroll-pb":[{"scroll-pb":se()}],"scroll-pl":[{"scroll-pl":se()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ue,Me]}],fill:[{fill:["none",...U()]}],"stroke-w":[{stroke:[ot,Ea,as,yh]}],stroke:[{stroke:["none",...U()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},vC=JE(gC);function kt(...n){return vC(Ew(n))}const wC=TE("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Et=tt.forwardRef(({className:n,variant:e,size:r,asChild:o=!1,...l},a)=>R.jsx("button",{className:kt(wC({variant:e,size:r,className:n})),ref:a,...l}));Et.displayName="Button";function bC({className:n}){return R.jsx("svg",{className:kt("w-4 h-4 fill-current",n),viewBox:"0 0 20 20",children:R.jsx("path",{d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"})})}function al(n){return(...e)=>n(...e).catch(r=>{(r==null?void 0:r.name)==="AbortError"?console.debug(r):console.error(r)})}function _C({item:n}){const e=eu(at,"todoItems",n),[r,o]=tt.useState(!1),[l,a]=tt.useState(!1),[d,h]=tt.useState(!1),y=C=>{at.todoItems.update(n.id,{done:C})},m=async()=>{await at.todoItems.delete(n.id)},_=()=>{e.update("title")&&h(!0)},b=C=>{(C.key==="Enter"||C.key==="Escape")&&(C.preventDefault(),h(!1))};tt.useEffect(()=>{let C;return r&&e.delete()?(a(!0),C=setTimeout(()=>{a(!1)},2e3)):a(!1),()=>{C&&clearTimeout(C)}},[r,e]);const x=C=>{e.delete()&&(a(!0),o(!1),setTimeout(()=>o(!0),10))};return R.jsxs("div",{className:kt("group flex items-center gap-3 py-3 px-4 border-b border-blue-200/60 last:border-b-0 transition-colors",n.done?"bg-blue-50 dark:bg-blue-900/20":"bg-background hover:bg-muted/30"),onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),onClick:x,children:[R.jsxs("label",{className:"relative flex items-center cursor-pointer",children:[R.jsx("input",{type:"checkbox",disabled:!e.update("done"),checked:!!n.done,onChange:C=>y(C.target.checked),className:"sr-only"}),R.jsx("div",{className:kt("w-6 h-6 border-2 rounded flex items-center justify-center transition-all duration-200",n.done?"bg-blue-500 border-blue-500 text-white shadow-sm":"border-gray-300 hover:border-blue-400 bg-white",!e.update("done")&&"opacity-50 cursor-not-allowed"),children:n.done&&R.jsx(bC,{})})]}),R.jsx("div",{className:"flex-1",children:d?R.jsx("input",{type:"text",defaultValue:n.title,onChange:al(C=>at.todoItems.update(n.id,{title:C.target.value})),onKeyDown:b,onBlur:()=>h(!1),autoFocus:!0,className:kt("w-full text-sm leading-relaxed bg-transparent border-none outline-none focus:ring-1 focus:ring-blue-500 rounded px-1 py-0.5",n.done?"text-foreground/80":"text-foreground")}):R.jsx("div",{className:kt("text-sm leading-relaxed cursor-pointer hover:bg-muted/30 rounded px-1 py-0.5 transition-colors",n.done?"text-foreground/80":"text-foreground",!e.update("title")&&"cursor-default hover:bg-transparent"),onClick:_,title:e.update("title")?"Click to edit":void 0,children:n.title})}),R.jsx(Et,{variant:"ghost",size:"icon",onClick:m,title:"Delete item",className:kt("h-8 w-8 text-muted-foreground hover:text-destructive transition-all duration-300",l?"opacity-100 translate-x-0":"opacity-0 translate-x-2 pointer-events-none"),children:R.jsx(Ed,{className:"h-4 w-4"})})]})}const Ha=tt.forwardRef(({className:n,type:e,...r},o)=>R.jsx("input",{type:e,className:kt("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",n),ref:o,...r}));Ha.displayName="Input";function kC({todoList:n,autoFocus:e}){const[r,o]=tt.useState(""),l=async a=>{a.preventDefault(),r.trim()&&(await at.todoItems.add({todoListId:n.id,realmId:n.realmId,title:r.trim()}),o(""))};return R.jsxs("form",{onSubmit:l,className:"flex gap-2",children:[R.jsx("div",{className:"flex-1",children:R.jsx(Ha,{type:"text",placeholder:"Add todo item ...",value:r,autoFocus:e,onChange:a=>o(a.target.value)})}),R.jsx(Et,{type:"submit",size:"icon",disabled:!r.trim(),title:"Add item",children:R.jsx(kw,{className:"h-4 w-4"})})]})}function xC({todoList:n,member:e,access:r}){const o=Xa(at.cloud.roles)||{};return R.jsxs("select",{disabled:n.owner===e.userId&&e.userId===at.cloud.currentUserId,style:{border:0},value:r,onChange:l=>SC(n,e,r,l.target.value),children:[R.jsx("option",{value:"owner",disabled:!e.userId,children:"Owner"}),Object.entries(o).map(([l,a])=>R.jsx("option",{value:l,children:a.displayName},l)),!o[r]&&r!=="owner"&&R.jsx("option",{children:"(unknown)"},r)]})}async function SC(n,e,r,o){if(o==="owner"){if(!e.userId)throw new Error("Cannot give ownership to user before invite is accepted.");return r==="owner"?void 0:n.changeOwner(e.userId)}else e.userId===n.owner&&await n.changeOwner(at.cloud.currentUserId),await n.changeMemberRole(e,o)}function EC({member:n,todoList:e}){var m;const r=eu(at,"members",n),o=Xa(at.cloud.roles),l=(m=n.roles)==null?void 0:m[0],a=l?o==null?void 0:o[l]:null,d=n.userId===e.owner?"owner":l||"readonly",h=d==="owner"?"Owner":(a==null?void 0:a.displayName)||d,y=()=>d==="owner"?R.jsx(sE,{className:"h-4 w-4"}):R.jsx(xw,{className:"h-4 w-4"});return R.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 bg-gray-50 rounded border border-gray-200 min-w-[100px]",children:[y(),r.update("roles")?R.jsx(xC,{todoList:e,member:n,access:d}):R.jsx("span",{className:"text-sm font-medium",children:h})]})}const CC={"alice@demo.local":{},"bob@demo.local":{},"foo@demo.local":{},"bar@demo.local":{}},Hh={demoUsers:CC};function IC({todoList:n}){const[e,r]=tt.useState(""),[o,l]=tt.useState(""),a=Za(async()=>await at.members.where({realmId:n.realmId}).toArray(),[n.realmId]),[d,h]=tt.useState(!1),y=eu(n);return R.jsxs("div",{className:"space-y-3",children:[a&&a.length>0&&R.jsxs("div",{children:[R.jsx("h4",{className:"text-sm font-medium text-foreground mb-2",children:"Shared with:"}),R.jsx("div",{className:"space-y-1",children:a==null?void 0:a.map(m=>R.jsx(OC,{todoList:n,member:m},m.id))})]}),R.jsx("div",{className:"border-t border-border pt-3",children:y.add("members")&&R.jsxs("div",{className:"space-y-3",children:[R.jsxs("h4",{className:"text-sm font-medium text-foreground flex items-center gap-2",children:[R.jsx(kE,{className:"h-4 w-4"}),"Invite someone?"]}),R.jsx("div",{className:"space-y-1",children:Object.keys(Hh.demoUsers).filter(m=>m!==at.cloud.currentUserId).map(m=>R.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-white rounded border border-blue-100",children:[R.jsx("span",{className:"text-sm text-foreground",children:m}),R.jsx(Et,{size:"sm",variant:"outline",onClick:()=>{h(!1),n.shareWith(m,m,!0,["doer"])},className:"h-7 px-3 text-xs border-blue-200 text-blue-600 hover:bg-blue-50",children:"Invite"})]},m))}),d?R.jsxs("form",{onSubmit:m=>{m.preventDefault(),h(!1),n.shareWith(e,o,!0,["doer"]),r(""),l("")},className:"space-y-3 p-4 bg-muted/50 rounded-lg",children:[R.jsx(Ha,{type:"email",placeholder:"Email address",value:o,onChange:m=>l(m.target.value)}),R.jsx(Ha,{type:"text",placeholder:"Name",value:e,onChange:m=>r(m.target.value)}),R.jsxs("div",{className:"flex gap-2",children:[R.jsxs(Et,{type:"submit",disabled:!/@/.test(o),size:"sm",className:"flex items-center gap-2",children:[R.jsx(Wg,{className:"h-4 w-4"}),"Send invite"]}),R.jsx(Et,{type:"button",variant:"outline",size:"sm",onClick:()=>h(!1),children:"Cancel"})]})]}):R.jsx("div",{className:"mt-2",children:R.jsxs(Et,{variant:"outline",size:"sm",onClick:()=>h(!0),className:"flex items-center gap-2 h-8 px-3 text-xs border-blue-200 text-blue-600 hover:bg-blue-50",children:[R.jsx(Wg,{className:"h-4 w-4"}),"Invite by email address"]})})]})})]})}function OC({member:n,todoList:e}){var h,y;const r=eu(at,"members",n),o=n.userId===at.cloud.currentUserId,l=n.userId===e.owner;let a=n.name||n.email||n.userId;o&&(a+=" (me)");const d=async m=>{await e.unshareWith(m),await at.members.where({realmId:e.realmId}).filter(b=>b.userId!==at.cloud.currentUserId).count()===0&&await e.makePrivate()};return R.jsxs("div",{className:`flex items-center justify-between py-2 px-3 bg-white rounded border border-blue-100 ${n.accepted?"":"opacity-50"}`,children:[R.jsxs("div",{className:"flex-1",children:[R.jsx("span",{className:"text-sm text-foreground font-medium",children:a}),!n.rejected&&!n.accepted&&R.jsx("span",{className:"text-xs text-muted-foreground italic ml-2",children:"Pending invite"}),n.rejected&&R.jsx("span",{className:"text-xs text-muted-foreground italic ml-2",children:"Rejected"})]}),R.jsxs("div",{className:"flex items-center gap-2 min-w-[140px] justify-end",children:[R.jsx(EC,{member:n,todoList:e}),R.jsx("div",{className:"w-8 flex justify-center ml-1",children:r.delete()&&!l?R.jsx(Et,{variant:"ghost",size:"sm",onClick:()=>d(n),className:"text-red-500 hover:text-red-700 hover:bg-red-50 h-8 w-8 p-0",children:R.jsx(Ed,{className:"h-4 w-4"})}):!l&&n.userId===at.cloud.currentUserId&&((((h=n.accepted)==null?void 0:h.getTime())||0)>(((y=n.rejected)==null?void 0:y.getTime())||0)?R.jsx(Et,{variant:"outline",size:"sm",onClick:()=>e.leaveList(),className:"h-7 px-3 text-xs border-red-300 text-red-600 hover:bg-red-50 hover:border-red-400 min-w-[50px]",children:"Leave"}):R.jsx(Et,{variant:"default",size:"sm",onClick:()=>at.members.update(n.id,{accepted:new Date,rejected:void 0}),className:"h-7 px-3 text-xs bg-blue-500 hover:bg-blue-600",children:"Accept"}))})]})]})}function jC(n,e,r=!1){return[Za(()=>at.openCloseStates.get([n,e]),[n,e],r)??r,a=>at.openCloseStates.put(a,[n,e])]}function TC({todoList:n,autoFocus:e}){const[r,o]=tt.useState(!1),l=Za(()=>at.todoItems.where({todoListId:n.id}).reverse().toArray(),[n.id]),a=eu(n),[d,h]=jC("sharing-menu",n.id,!1);if(!l)return null;const y=async()=>{confirm(`Are you sure you want to delete "${n.title}" and all its items?`)&&await n.deleteList()},m=()=>{a.update("title")&&o(!0)},_=b=>{(b.key==="Enter"||b.key==="Escape")&&(b.preventDefault(),o(!1))};return R.jsxs("div",{className:"border-b border-border bg-background",children:[R.jsxs("div",{className:"flex items-center justify-between px-4 py-4 border-b border-blue-300/70 bg-blue-500 dark:bg-blue-600",children:[R.jsx("div",{className:"flex-1 mr-4",children:r?R.jsx("input",{type:"text",defaultValue:n.title,onChange:al(b=>at.todoLists.update(n.id,{title:b.target.value})),onKeyDown:_,onBlur:()=>o(!1),autoFocus:!0,className:kt("text-lg font-semibold bg-transparent border-none outline-none focus:ring-1 focus:ring-white/50 rounded px-2 py-1 text-white placeholder-white/70 w-full")}):R.jsx("h2",{className:kt("text-lg font-semibold text-white cursor-pointer hover:bg-white/10 rounded px-2 py-1 transition-colors",!a.update("title")&&"cursor-default hover:bg-transparent"),onClick:m,title:a.update("title")?"Click to edit list name":void 0,children:n.title})}),R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx(Et,{variant:"ghost",size:"icon",onClick:()=>h(!d),title:"Share list",className:kt("text-white hover:bg-blue-600 transition-all duration-200",d&&"bg-blue-600/50"),children:R.jsx(wE,{className:kt("h-4 w-4 transition-transform duration-200",d&&"rotate-180")})}),a.delete()&&R.jsx(Et,{variant:"ghost",size:"icon",onClick:y,title:"Delete list",className:"text-white hover:bg-blue-600",children:R.jsx(Ed,{className:"h-4 w-4"})})]})]}),R.jsx("div",{className:kt("overflow-hidden transition-all duration-300 ease-in-out",d?"max-h-[600px] opacity-100":"max-h-0 opacity-0"),children:R.jsx("div",{className:"px-4 py-4 bg-blue-50/70 dark:bg-blue-900/15 border-b border-blue-200/60",children:R.jsx(IC,{todoList:n})})}),R.jsxs("div",{className:"px-0 py-0",children:[a.add("todoItems")&&R.jsx("div",{className:"px-4 py-3 border-b border-blue-200/60 bg-background",children:R.jsx(kC,{todoList:n,autoFocus:e})}),l.map(b=>R.jsx(_C,{item:b},b.id))]})]})}function PC(){const n=Za(()=>at.todoLists.reverse().toArray());return n?R.jsx("div",{className:"w-full",children:n.map((e,r)=>R.jsx(TC,{todoList:e,autoFocus:r===0},e.id))}):null}const qa=tt.forwardRef(({className:n,...e},r)=>R.jsx("div",{ref:r,className:kt("rounded-xl border bg-card text-card-foreground shadow",n),...e}));qa.displayName="Card";const Ga=tt.forwardRef(({className:n,...e},r)=>R.jsx("div",{ref:r,className:kt("flex flex-col space-y-1.5 p-6",n),...e}));Ga.displayName="CardHeader";const Ya=tt.forwardRef(({className:n,...e},r)=>R.jsx("h3",{ref:r,className:kt("font-semibold leading-none tracking-tight",n),...e}));Ya.displayName="CardTitle";const Qa=tt.forwardRef(({className:n,...e},r)=>R.jsx("p",{ref:r,className:kt("text-sm text-muted-foreground",n),...e}));Qa.displayName="CardDescription";const Ja=tt.forwardRef(({className:n,...e},r)=>R.jsx("div",{ref:r,className:kt("p-6 pt-0",n),...e}));Ja.displayName="CardContent";const NC=tt.forwardRef(({className:n,...e},r)=>R.jsx("div",{ref:r,className:kt("flex items-center p-6 pt-0",n),...e}));NC.displayName="CardFooter";function AC(){const[n,e]=tt.useState(!1),[r,o]=tt.useState(""),l=Za(async()=>await at.todoLists.count()>0),a=()=>{r.trim()&&(at.todoLists.add({title:r.trim()}),o(""),e(!1))};return n?R.jsxs(qa,{className:"w-full sm:max-w-md",children:[R.jsxs(Ga,{children:[R.jsxs(Ya,{className:"flex items-center gap-2",children:[R.jsx(kw,{className:"h-5 w-5"}),"New Todo List"]}),R.jsx(Qa,{children:"Give your list a name to get started"})]}),R.jsxs(Ja,{className:"space-y-4",children:[R.jsx(Ha,{type:"text",autoFocus:!0,placeholder:"Name of list...",value:r,onChange:d=>o(d.target.value),onKeyUp:d=>{d.key==="Enter"?a():d.key==="Escape"&&(e(!1),o(""))}}),R.jsxs("div",{className:"flex gap-2",children:[R.jsx(Et,{onClick:a,disabled:!r.trim(),children:"Create List"}),R.jsx(Et,{variant:"outline",onClick:()=>{e(!1),o("")},children:"Cancel"})]})]})]}):R.jsxs(Et,{onClick:()=>e(!0),size:"lg",variant:"outline",className:"w-full sm:w-auto flex items-center gap-2 border-slate-300 text-slate-700 hover:bg-slate-50",children:[R.jsx(aE,{className:"h-4 w-4"}),l?"Add another list":"Create ToDo List"]})}function DC(){const n=async()=>{confirm("Are you sure you want to reset the database? This will delete all your local data and reload the app.")&&(await at.delete(),location.reload())};return R.jsxs(Et,{variant:"outline",size:"lg",onClick:n,className:"w-full sm:w-auto flex items-center gap-2 border-red-300 text-red-700 bg-red-50 hover:bg-red-100 hover:border-red-400",children:[R.jsx(gE,{className:"h-4 w-4"}),"Factory reset client"]})}var RC=typeof window<"u",LC=RC?tt.useLayoutEffect:tt.useEffect;function xp(n,e){var r=tt.useState(e),o=r[0],l=r[1];return LC(function(){var a=n.subscribe(l);return function(){return a.unsubscribe()}},[n]),o}function Zg({className:n}){const e=xp(at.cloud.syncState),r=kt("text-muted-foreground",n);switch(e==null?void 0:e.status){case"not-started":return R.jsx("div",{title:"Sync not started",children:R.jsx(Kg,{className:r})});case"connecting":return R.jsx("div",{title:"Connecting to cloud...",children:R.jsx(cE,{className:kt(r,"animate-spin")})});case"connected":return R.jsx("div",{title:"Connected and syncing",children:R.jsx(jE,{className:kt(r,"text-green-500")})});case"disconnected":return R.jsx("div",{title:"Connection sleeping - will reconnect when active",children:R.jsx(rE,{className:kt(r,"text-blue-400")})});case"offline":return R.jsx("div",{title:e.error?String(e.error):"Offline",children:R.jsx(IE,{className:kt(r,"text-orange-500")})});case"error":return R.jsx("div",{title:e.error?String(e.error):"Connection error",children:R.jsx(tE,{className:kt(r,"text-red-500")})});default:return R.jsx("div",{title:"Sync status unknown",children:R.jsx(Kg,{className:r})})}}const ev=({children:n,...e})=>{const[r,o]=tt.useState(!1);return R.jsx("div",{className:"relative inline-block text-left",...e,children:tt.Children.map(n,l=>{if(tt.isValidElement(l)){if(l.type===ld)return tt.cloneElement(l,{onClick:()=>o(!r),"aria-expanded":r});if(l.type===ad)return tt.cloneElement(l,{isOpen:r,onClose:()=>o(!1)})}return l})})},ld=tt.forwardRef(({className:n,children:e,...r},o)=>R.jsx("button",{ref:o,className:kt("inline-flex w-full justify-center gap-x-1.5 rounded-md bg-background px-3 py-2 text-sm font-semibold text-foreground shadow-sm ring-1 ring-inset ring-border hover:bg-accent",n),...r,children:e}));ld.displayName="DropdownMenuTrigger";const ad=tt.forwardRef(({className:n,align:e="end",isOpen:r,onClose:o,children:l,...a},d)=>(tt.useEffect(()=>{const h=y=>{d&&"current"in d&&d.current&&!d.current.contains(y.target)&&(o==null||o())};if(r)return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[r,o,d]),r?R.jsx("div",{ref:d,className:kt("absolute z-10 mt-2 w-56 origin-top-right rounded-md bg-popover shadow-lg ring-1 ring-border ring-opacity-5 focus:outline-none",e==="end"?"right-0":"left-0",n),...a,children:tt.Children.map(l,h=>tt.isValidElement(h)&&h.type===Aa?tt.cloneElement(h,{onClick:y=>{var m,_;(_=(m=h.props).onClick)==null||_.call(m,y),o==null||o()}}):h)}):null));ad.displayName="DropdownMenuContent";const Aa=tt.forwardRef(({className:n,...e},r)=>R.jsx("button",{ref:r,className:kt("block w-full px-4 py-2 text-left text-sm text-popover-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none",n),...e}));Aa.displayName="DropdownMenuItem";const Uw=tt.forwardRef(({className:n,...e},r)=>R.jsx("div",{ref:r,className:kt("my-1 h-px bg-border",n),...e}));Uw.displayName="DropdownMenuSeparator";const qh=tt.forwardRef(({className:n,...e},r)=>R.jsx("div",{ref:r,className:kt("px-4 py-2 text-xs font-semibold text-muted-foreground",n),...e}));qh.displayName="DropdownMenuLabel";function tv(){return at.cloud.logout().catch(n=>{console.log("Logout cancelled",n)})}function MC(){const n=xp(at.cloud.currentUser),[e,r]=tt.useState(!1);return R.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-background border-b border-border",children:R.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[R.jsxs("div",{className:"flex h-16 items-center justify-between",children:[R.jsx("div",{className:"flex items-center",children:R.jsx("h1",{className:"text-xl font-semibold text-foreground",children:"Dexie Cloud ToDo App"})}),R.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[R.jsx(Zg,{className:"h-5 w-5"}),n!=null&&n.isLoggedIn?R.jsxs(ev,{children:[R.jsx(ld,{children:R.jsxs(Et,{variant:"ghost",className:"flex items-center gap-2",children:[R.jsx(xw,{className:"h-4 w-4"}),n.name,R.jsx($g,{className:"h-4 w-4"})]})}),R.jsx(ad,{children:R.jsxs(Aa,{onClick:()=>tv(),children:[R.jsx(Vg,{className:"mr-2 h-4 w-4"}),"Logout"]})})]}):R.jsxs(ev,{children:[R.jsx(ld,{children:R.jsxs(Et,{variant:"outline",className:"flex items-center gap-2",children:["Sign in or create account",R.jsx($g,{className:"h-4 w-4"})]})}),R.jsxs(ad,{children:[R.jsx(qh,{children:"Sign in a demo user"}),Object.keys(Hh.demoUsers).map(o=>R.jsx(Aa,{onClick:al(()=>at.cloud.login({grant_type:"demo",email:o})),children:o},o)),R.jsx(Uw,{}),R.jsx(qh,{children:"Sign in real user"}),R.jsx(Aa,{onClick:al(()=>at.cloud.login()),children:"Sign in / sign up yourself"})]})]})]}),R.jsxs("div",{className:"md:hidden flex items-center space-x-2",children:[R.jsx(Zg,{className:"h-5 w-5"}),R.jsx(Et,{variant:"ghost",size:"icon",onClick:()=>r(!e),children:R.jsx(pE,{className:"h-5 w-5"})})]})]}),e&&R.jsx("div",{className:"md:hidden border-t border-border",children:R.jsx("div",{className:"px-2 pt-2 pb-3 space-y-1",children:n!=null&&n.isLoggedIn?R.jsxs("div",{className:"space-y-1",children:[R.jsxs("div",{className:"px-3 py-2 text-sm text-muted-foreground",children:["Signed in as ",n.name]}),R.jsxs(Et,{variant:"ghost",className:"w-full justify-start",onClick:()=>{tv(),r(!1)},children:[R.jsx(Vg,{className:"mr-2 h-4 w-4"}),"Logout"]})]}):R.jsxs("div",{className:"space-y-1",children:[R.jsx("div",{className:"px-3 py-2 text-sm font-medium text-muted-foreground",children:"Sign in a demo user"}),Object.keys(Hh.demoUsers).map(o=>R.jsx(Et,{variant:"ghost",className:"w-full justify-start",onClick:al(async()=>{await at.cloud.login({grant_type:"demo",email:o}),r(!1)}),children:o},o)),R.jsx("div",{className:"border-t border-border my-2"}),R.jsx("div",{className:"px-3 py-2 text-sm font-medium text-muted-foreground",children:"Sign in real user"}),R.jsx(Et,{variant:"outline",className:"w-full justify-start",onClick:al(async()=>{await at.cloud.login(),r(!1)}),children:"Sign in / sign up yourself"})]})})})]})})}function UC(){const n=xp(at.cloud.invites,[]);return n.length===0?null:R.jsxs(qa,{children:[R.jsxs(Ga,{children:[R.jsxs(Ya,{className:"flex items-center gap-2",children:[R.jsx(EE,{className:"h-5 w-5"}),"You've got invited!"]}),R.jsxs(Qa,{children:["You have ",n.length," pending invitation",n.length>1?"s":""]})]}),R.jsx(Ja,{children:R.jsx("div",{className:"space-y-4",children:n.map(e=>{var r,o;return R.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[R.jsxs("div",{className:"flex-1",children:[R.jsx("div",{className:"font-medium",children:(r=e.realm)==null?void 0:r.name}),R.jsxs("div",{className:"text-sm text-muted-foreground",children:["Invited by ",(o=e.invitedBy)==null?void 0:o.name]})]}),R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx(Et,{size:"sm",onClick:()=>e.accept(),disabled:!!e.accepted,variant:e.accepted?"secondary":"default",children:e.accepted?"Accepted":"Accept"}),R.jsx(Et,{size:"sm",variant:"outline",onClick:()=>e.reject(),disabled:!!e.rejected,children:e.rejected?"Rejected":"Reject"}),R.jsx(Et,{size:"sm",variant:"ghost",onClick:()=>at.members.delete(e.id),title:"Remove invite",children:R.jsx(Ed,{className:"h-4 w-4"})})]})]},e.id)})})})]})}function zC(){return R.jsxs("div",{className:"min-h-screen bg-background",children:[R.jsx(MC,{}),R.jsxs("main",{className:"pt-16",children:[R.jsxs("div",{className:"max-w-4xl mx-auto px-4 pb-2",children:[R.jsx(FC,{}),R.jsx(UC,{})]}),R.jsx(PC,{}),R.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6",children:R.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[R.jsx(AC,{}),R.jsx(DC,{})]})})]})]})}function FC(){var o;const n=Xa(at.cloud.currentUser);if(!n)return null;const{license:e}=n;if(!e||e.status==="ok"&&e.validUntil===void 0&&e.evalDaysLeft===void 0)return null;if(e.status!=="ok")return R.jsxs(qa,{className:"mb-6 border-destructive",children:[R.jsx(Ga,{children:R.jsx(Ya,{className:"text-destructive",children:"License Required"})}),R.jsxs(Ja,{className:"space-y-4",children:[R.jsx(Qa,{children:"No valid license. You are in offline mode until a valid license is purchased."}),R.jsxs("div",{className:"space-y-2",children:[R.jsx(Et,{asChild:!0,children:R.jsx("a",{href:"https://example.com",children:"Purchase License"})}),R.jsx(Et,{variant:"destructive",onClick:l=>{l.preventDefault(),l.stopPropagation(),BC(n)},children:"Delete Account & All Data"})]})]})]});let r=e.evalDaysLeft;if(r===void 0){const l=((o=e.validUntil)==null?void 0:o.getTime())??1/0;r=Math.round((l-Date.now())/(1440*60*1e3))}return r<7?R.jsxs(qa,{className:"mb-6 border-yellow-500",children:[R.jsx(Ga,{children:R.jsx(Ya,{className:"text-yellow-600",children:"License Expiring Soon"})}),R.jsxs(Ja,{className:"space-y-4",children:[R.jsxs(Qa,{children:["License expires in ",r," days."]}),R.jsx(Et,{asChild:!0,children:R.jsx("a",{href:"https://example.com",children:"Purchase Production License"})})]})]}):null}async function BC(n){var r;!(n!=null&&n.userId)||!confirm(`Are you sure you want to delete your user completely along all stored data for ${n.userId}? Private data will be deleted. Shared data will not be deleted. This action cannot be undone.`)||(await fetch(`${(r=at.cloud.options)==null?void 0:r.databaseUrl}/users/${n.userId}`,{method:"DELETE",headers:{Authorization:`Bearer ${n.accessToken}`}}),await at.cloud.logout({force:!0}))}function $C(n){return"serviceWorker"in navigator?window.addEventListener("load",async()=>{try{let e="./";e.endsWith("/")||(e+="/");const r=await navigator.serviceWorker.register(`${e}sw.js`,{scope:e});console.log(" Service Worker: Registration successful",r),r.addEventListener("updatefound",()=>{const o=r.installing;o&&o.addEventListener("statechange",()=>{var l,a,d,h;o.state==="installed"&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed."),(l=n==null?void 0:n.onUpdate)==null||l.call(n,r),(a=n==null?void 0:n.onNeedRefresh)==null||a.call(n)):(console.log("App ready to work offline."),(d=n==null?void 0:n.onSuccess)==null||d.call(n,r),(h=n==null?void 0:n.onOfflineReady)==null||h.call(n)))})})}catch(e){console.error(" Service worker registration failed:",e),e instanceof Error&&console.error(" Error details:",{name:e.name,message:e.message,stack:e.stack})}}):"serviceWorker"in navigator||console.log(" Service Worker: Not supported in this browser"),()=>{}}window.Dexie=st;st.debug=!0;const KC=document.getElementById("root"),VC=Bb.createRoot(KC);VC.render(R.jsx(ol.StrictMode,{children:R.jsx(zC,{})}));$C();
//# sourceMappingURL=index-D0d1whyP.js.map
